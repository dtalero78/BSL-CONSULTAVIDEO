var UL=Object.defineProperty;var $L=(r,t,e)=>t in r?UL(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var jt=(r,t,e)=>$L(r,typeof t!="symbol"?t+"":t,e);function VL(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function zL(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),e}var aS={exports:{}},_p={},oS={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af=Symbol.for("react.element"),WL=Symbol.for("react.portal"),qL=Symbol.for("react.fragment"),HL=Symbol.for("react.strict_mode"),GL=Symbol.for("react.profiler"),KL=Symbol.for("react.provider"),QL=Symbol.for("react.context"),YL=Symbol.for("react.forward_ref"),JL=Symbol.for("react.suspense"),XL=Symbol.for("react.memo"),ZL=Symbol.for("react.lazy"),f2=Symbol.iterator;function eO(r){return r===null||typeof r!="object"?null:(r=f2&&r[f2]||r["@@iterator"],typeof r=="function"?r:null)}var sS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lS=Object.assign,cS={};function ic(r,t,e){this.props=r,this.context=t,this.refs=cS,this.updater=e||sS}ic.prototype.isReactComponent={};ic.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};ic.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function uS(){}uS.prototype=ic.prototype;function Oy(r,t,e){this.props=r,this.context=t,this.refs=cS,this.updater=e||sS}var Ay=Oy.prototype=new uS;Ay.constructor=Oy;lS(Ay,ic.prototype);Ay.isPureReactComponent=!0;var d2=Array.isArray,fS=Object.prototype.hasOwnProperty,Ny={current:null},dS={key:!0,ref:!0,__self:!0,__source:!0};function hS(r,t,e){var n,i={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)fS.call(t,n)&&!dS.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=e;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(r&&r.defaultProps)for(n in s=r.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:af,type:r,key:a,ref:o,props:i,_owner:Ny.current}}function tO(r,t){return{$$typeof:af,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function Ry(r){return typeof r=="object"&&r!==null&&r.$$typeof===af}function rO(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(e){return t[e]})}var h2=/\/+/g;function sm(r,t){return typeof r=="object"&&r!==null&&r.key!=null?rO(""+r.key):t.toString(36)}function ih(r,t,e,n,i){var a=typeof r;(a==="undefined"||a==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case af:case WL:o=!0}}if(o)return o=r,i=i(o),r=n===""?"."+sm(o,0):n,d2(i)?(e="",r!=null&&(e=r.replace(h2,"$&/")+"/"),ih(i,t,e,"",function(l){return l})):i!=null&&(Ry(i)&&(i=tO(i,e+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(h2,"$&/")+"/")+r)),t.push(i)),1;if(o=0,n=n===""?".":n+":",d2(r))for(var s=0;s<r.length;s++){a=r[s];var c=n+sm(a,s);o+=ih(a,t,e,c,i)}else if(c=eO(r),typeof c=="function")for(r=c.call(r),s=0;!(a=r.next()).done;)a=a.value,c=n+sm(a,s++),o+=ih(a,t,e,c,i);else if(a==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ld(r,t,e){if(r==null)return r;var n=[],i=0;return ih(r,n,"","",function(a){return t.call(e,a,i++)}),n}function nO(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(e){(r._status===0||r._status===-1)&&(r._status=1,r._result=e)},function(e){(r._status===0||r._status===-1)&&(r._status=2,r._result=e)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var mn={current:null},ah={transition:null},iO={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:ah,ReactCurrentOwner:Ny};function pS(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:ld,forEach:function(r,t,e){ld(r,function(){t.apply(this,arguments)},e)},count:function(r){var t=0;return ld(r,function(){t++}),t},toArray:function(r){return ld(r,function(t){return t})||[]},only:function(r){if(!Ry(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};kt.Component=ic;kt.Fragment=qL;kt.Profiler=GL;kt.PureComponent=Oy;kt.StrictMode=HL;kt.Suspense=JL;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iO;kt.act=pS;kt.cloneElement=function(r,t,e){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=lS({},r.props),i=r.key,a=r.ref,o=r._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Ny.current),t.key!==void 0&&(i=""+t.key),r.type&&r.type.defaultProps)var s=r.type.defaultProps;for(c in t)fS.call(t,c)&&!dS.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=e;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:af,type:r.type,key:i,ref:a,props:n,_owner:o}};kt.createContext=function(r){return r={$$typeof:QL,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:KL,_context:r},r.Consumer=r};kt.createElement=hS;kt.createFactory=function(r){var t=hS.bind(null,r);return t.type=r,t};kt.createRef=function(){return{current:null}};kt.forwardRef=function(r){return{$$typeof:YL,render:r}};kt.isValidElement=Ry;kt.lazy=function(r){return{$$typeof:ZL,_payload:{_status:-1,_result:r},_init:nO}};kt.memo=function(r,t){return{$$typeof:XL,type:r,compare:t===void 0?null:t}};kt.startTransition=function(r){var t=ah.transition;ah.transition={};try{r()}finally{ah.transition=t}};kt.unstable_act=pS;kt.useCallback=function(r,t){return mn.current.useCallback(r,t)};kt.useContext=function(r){return mn.current.useContext(r)};kt.useDebugValue=function(){};kt.useDeferredValue=function(r){return mn.current.useDeferredValue(r)};kt.useEffect=function(r,t){return mn.current.useEffect(r,t)};kt.useId=function(){return mn.current.useId()};kt.useImperativeHandle=function(r,t,e){return mn.current.useImperativeHandle(r,t,e)};kt.useInsertionEffect=function(r,t){return mn.current.useInsertionEffect(r,t)};kt.useLayoutEffect=function(r,t){return mn.current.useLayoutEffect(r,t)};kt.useMemo=function(r,t){return mn.current.useMemo(r,t)};kt.useReducer=function(r,t,e){return mn.current.useReducer(r,t,e)};kt.useRef=function(r){return mn.current.useRef(r)};kt.useState=function(r){return mn.current.useState(r)};kt.useSyncExternalStore=function(r,t,e){return mn.current.useSyncExternalStore(r,t,e)};kt.useTransition=function(){return mn.current.useTransition()};kt.version="18.3.1";oS.exports=kt;var he=oS.exports;const vS=iS(he),aO=VL({__proto__:null,default:vS},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO=he,sO=Symbol.for("react.element"),lO=Symbol.for("react.fragment"),cO=Object.prototype.hasOwnProperty,uO=oO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fO={key:!0,ref:!0,__self:!0,__source:!0};function mS(r,t,e){var n,i={},a=null,o=null;e!==void 0&&(a=""+e),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)cO.call(t,n)&&!fO.hasOwnProperty(n)&&(i[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:sO,type:r,key:a,ref:o,props:i,_owner:uO.current}}_p.Fragment=lO;_p.jsx=mS;_p.jsxs=mS;aS.exports=_p;var m=aS.exports,qg={},gS={exports:{}},Kn={},yS={exports:{}},_S={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(H,ie){var fe=H.length;H.push(ie);e:for(;0<fe;){var ne=fe-1>>>1,E=H[ne];if(0<i(E,ie))H[ne]=ie,H[fe]=E,fe=ne;else break e}}function e(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var ie=H[0],fe=H.pop();if(fe!==ie){H[0]=fe;e:for(var ne=0,E=H.length,W=E>>>1;ne<W;){var G=2*(ne+1)-1,ee=H[G],oe=G+1,ue=H[oe];if(0>i(ee,fe))oe<E&&0>i(ue,ee)?(H[ne]=ue,H[oe]=fe,ne=oe):(H[ne]=ee,H[G]=fe,ne=G);else if(oe<E&&0>i(ue,fe))H[ne]=ue,H[oe]=fe,ne=oe;else break e}}return ie}function i(H,ie){var fe=H.sortIndex-ie.sortIndex;return fe!==0?fe:H.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();r.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,v=3,p=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(H){for(var ie=e(l);ie!==null;){if(ie.callback===null)n(l);else if(ie.startTime<=H)n(l),ie.sortIndex=ie.expirationTime,t(c,ie);else break;ie=e(l)}}function T(H){if(_=!1,k(H),!y)if(e(c)!==null)y=!0,X(R);else{var ie=e(l);ie!==null&&se(T,ie.startTime-H)}}function R(H,ie){y=!1,_&&(_=!1,w(F),F=-1),p=!0;var fe=v;try{for(k(ie),d=e(c);d!==null&&(!(d.expirationTime>ie)||H&&!O());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,v=d.priorityLevel;var E=ne(d.expirationTime<=ie);ie=r.unstable_now(),typeof E=="function"?d.callback=E:d===e(c)&&n(c),k(ie)}else n(c);d=e(c)}if(d!==null)var W=!0;else{var G=e(l);G!==null&&se(T,G.startTime-ie),W=!1}return W}finally{d=null,v=fe,p=!1}}var U=!1,$=null,F=-1,M=5,J=-1;function O(){return!(r.unstable_now()-J<M)}function N(){if($!==null){var H=r.unstable_now();J=H;var ie=!0;try{ie=$(!0,H)}finally{ie?q():(U=!1,$=null)}}else U=!1}var q;if(typeof x=="function")q=function(){x(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Z=j.port2;j.port1.onmessage=N,q=function(){Z.postMessage(null)}}else q=function(){S(N,0)};function X(H){$=H,U||(U=!0,q())}function se(H,ie){F=S(function(){H(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){y||p||(y=!0,X(R))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return e(c)},r.unstable_next=function(H){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var fe=v;v=ie;try{return H()}finally{v=fe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,ie){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var fe=v;v=H;try{return ie()}finally{v=fe}},r.unstable_scheduleCallback=function(H,ie,fe){var ne=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ne+fe:ne):fe=ne,H){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=fe+E,H={id:u++,callback:ie,priorityLevel:H,startTime:fe,expirationTime:E,sortIndex:-1},fe>ne?(H.sortIndex=fe,t(l,H),e(c)===null&&H===e(l)&&(_?(w(F),F=-1):_=!0,se(T,fe-ne))):(H.sortIndex=E,t(c,H),y||p||(y=!0,X(R))),H},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(H){var ie=v;return function(){var fe=v;v=ie;try{return H.apply(this,arguments)}finally{v=fe}}}})(_S);yS.exports=_S;var dO=yS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hO=he,Gn=dO;function Le(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wS=new Set,Nu={};function js(r,t){ql(r,t),ql(r+"Capture",t)}function ql(r,t){for(Nu[r]=t,r=0;r<t.length;r++)wS.add(t[r])}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hg=Object.prototype.hasOwnProperty,pO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p2={},v2={};function vO(r){return Hg.call(v2,r)?!0:Hg.call(p2,r)?!1:pO.test(r)?v2[r]=!0:(p2[r]=!0,!1)}function mO(r,t,e,n){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function gO(r,t,e,n){if(t===null||typeof t>"u"||mO(r,t,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gn(r,t,e,n,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=r,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Yr[r]=new gn(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];Yr[t]=new gn(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Yr[r]=new gn(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Yr[r]=new gn(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Yr[r]=new gn(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Yr[r]=new gn(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Yr[r]=new gn(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Yr[r]=new gn(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Yr[r]=new gn(r,5,!1,r.toLowerCase(),null,!1,!1)});var jy=/[\-:]([a-z])/g;function Iy(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(jy,Iy);Yr[t]=new gn(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(jy,Iy);Yr[t]=new gn(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(jy,Iy);Yr[t]=new gn(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Yr[r]=new gn(r,1,!1,r.toLowerCase(),null,!1,!1)});Yr.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Yr[r]=new gn(r,1,!1,r.toLowerCase(),null,!0,!0)});function My(r,t,e,n){var i=Yr.hasOwnProperty(t)?Yr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gO(t,e,i,n)&&(e=null),n||i===null?vO(t)&&(e===null?r.removeAttribute(t):r.setAttribute(t,""+e)):i.mustUseProperty?r[i.propertyName]=e===null?i.type===3?!1:"":e:(t=i.attributeName,n=i.attributeNamespace,e===null?r.removeAttribute(t):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,n?r.setAttributeNS(n,t,e):r.setAttribute(t,e))))}var Ma=hO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cd=Symbol.for("react.element"),_l=Symbol.for("react.portal"),wl=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),Gg=Symbol.for("react.profiler"),bS=Symbol.for("react.provider"),xS=Symbol.for("react.context"),Fy=Symbol.for("react.forward_ref"),Kg=Symbol.for("react.suspense"),Qg=Symbol.for("react.suspense_list"),By=Symbol.for("react.memo"),co=Symbol.for("react.lazy"),SS=Symbol.for("react.offscreen"),m2=Symbol.iterator;function Kc(r){return r===null||typeof r!="object"?null:(r=m2&&r[m2]||r["@@iterator"],typeof r=="function"?r:null)}var sr=Object.assign,lm;function fu(r){if(lm===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);lm=t&&t[1]||""}return`
`+lm+r}var cm=!1;function um(r,t){if(!r||cm)return"";cm=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(r,[],t)}else{try{t.call()}catch(l){n=l}r.call(t.prototype)}else{try{throw Error()}catch(l){n=l}r()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var c=`
`+i[o].replace(" at new "," at ");return r.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",r.displayName)),c}while(1<=o&&0<=s);break}}}finally{cm=!1,Error.prepareStackTrace=e}return(r=r?r.displayName||r.name:"")?fu(r):""}function yO(r){switch(r.tag){case 5:return fu(r.type);case 16:return fu("Lazy");case 13:return fu("Suspense");case 19:return fu("SuspenseList");case 0:case 2:case 15:return r=um(r.type,!1),r;case 11:return r=um(r.type.render,!1),r;case 1:return r=um(r.type,!0),r;default:return""}}function Yg(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case wl:return"Fragment";case _l:return"Portal";case Gg:return"Profiler";case Dy:return"StrictMode";case Kg:return"Suspense";case Qg:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case xS:return(r.displayName||"Context")+".Consumer";case bS:return(r._context.displayName||"Context")+".Provider";case Fy:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case By:return t=r.displayName||null,t!==null?t:Yg(r.type)||"Memo";case co:t=r._payload,r=r._init;try{return Yg(r(t))}catch{}}return null}function _O(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yg(t);case 8:return t===Dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Lo(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function kS(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wO(r){var t=kS(r)?"checked":"value",e=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),n=""+r[t];if(!r.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,a=e.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(r,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function ud(r){r._valueTracker||(r._valueTracker=wO(r))}function PS(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return r&&(n=kS(r)?r.checked?"true":"false":r.value),r=n,r!==e?(t.setValue(r),!0):!1}function jh(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Jg(r,t){var e=t.checked;return sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??r._wrapperState.initialChecked})}function g2(r,t){var e=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;e=Lo(t.value!=null?t.value:e),r._wrapperState={initialChecked:n,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function TS(r,t){t=t.checked,t!=null&&My(r,"checked",t,!1)}function Xg(r,t){TS(r,t);var e=Lo(t.value),n=t.type;if(e!=null)n==="number"?(e===0&&r.value===""||r.value!=e)&&(r.value=""+e):r.value!==""+e&&(r.value=""+e);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?Zg(r,t.type,e):t.hasOwnProperty("defaultValue")&&Zg(r,t.type,Lo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function y2(r,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,e||t===r.value||(r.value=t),r.defaultValue=t}e=r.name,e!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,e!==""&&(r.name=e)}function Zg(r,t,e){(t!=="number"||jh(r.ownerDocument)!==r)&&(e==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+e&&(r.defaultValue=""+e))}var du=Array.isArray;function Rl(r,t,e,n){if(r=r.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<r.length;e++)i=t.hasOwnProperty("$"+r[e].value),r[e].selected!==i&&(r[e].selected=i),i&&n&&(r[e].defaultSelected=!0)}else{for(e=""+Lo(e),t=null,i=0;i<r.length;i++){if(r[i].value===e){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}t!==null||r[i].disabled||(t=r[i])}t!==null&&(t.selected=!0)}}function e0(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Le(91));return sr({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function _2(r,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(Le(92));if(du(e)){if(1<e.length)throw Error(Le(93));e=e[0]}t=e}t==null&&(t=""),e=t}r._wrapperState={initialValue:Lo(e)}}function ES(r,t){var e=Lo(t.value),n=Lo(t.defaultValue);e!=null&&(e=""+e,e!==r.value&&(r.value=e),t.defaultValue==null&&r.defaultValue!==e&&(r.defaultValue=e)),n!=null&&(r.defaultValue=""+n)}function w2(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function CS(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function t0(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?CS(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var fd,LS=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return r(t,e,n,i)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(fd=fd||document.createElement("div"),fd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fd.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function Ru(r,t){if(t){var e=r.firstChild;if(e&&e===r.lastChild&&e.nodeType===3){e.nodeValue=t;return}}r.textContent=t}var _u={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bO=["Webkit","ms","Moz","O"];Object.keys(_u).forEach(function(r){bO.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),_u[t]=_u[r]})});function OS(r,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||_u.hasOwnProperty(r)&&_u[r]?(""+t).trim():t+"px"}function AS(r,t){r=r.style;for(var e in t)if(t.hasOwnProperty(e)){var n=e.indexOf("--")===0,i=OS(e,t[e],n);e==="float"&&(e="cssFloat"),n?r.setProperty(e,i):r[e]=i}}var xO=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r0(r,t){if(t){if(xO[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Le(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Le(62))}}function n0(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var i0=null;function Uy(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var a0=null,jl=null,Il=null;function b2(r){if(r=lf(r)){if(typeof a0!="function")throw Error(Le(280));var t=r.stateNode;t&&(t=kp(t),a0(r.stateNode,r.type,t))}}function NS(r){jl?Il?Il.push(r):Il=[r]:jl=r}function RS(){if(jl){var r=jl,t=Il;if(Il=jl=null,b2(r),t)for(r=0;r<t.length;r++)b2(t[r])}}function jS(r,t){return r(t)}function IS(){}var fm=!1;function MS(r,t,e){if(fm)return r(t,e);fm=!0;try{return jS(r,t,e)}finally{fm=!1,(jl!==null||Il!==null)&&(IS(),RS())}}function ju(r,t){var e=r.stateNode;if(e===null)return null;var n=kp(e);if(n===null)return null;e=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(e&&typeof e!="function")throw Error(Le(231,t,typeof e));return e}var o0=!1;if(Na)try{var Qc={};Object.defineProperty(Qc,"passive",{get:function(){o0=!0}}),window.addEventListener("test",Qc,Qc),window.removeEventListener("test",Qc,Qc)}catch{o0=!1}function SO(r,t,e,n,i,a,o,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(e,l)}catch(u){this.onError(u)}}var wu=!1,Ih=null,Mh=!1,s0=null,kO={onError:function(r){wu=!0,Ih=r}};function PO(r,t,e,n,i,a,o,s,c){wu=!1,Ih=null,SO.apply(kO,arguments)}function TO(r,t,e,n,i,a,o,s,c){if(PO.apply(this,arguments),wu){if(wu){var l=Ih;wu=!1,Ih=null}else throw Error(Le(198));Mh||(Mh=!0,s0=l)}}function Is(r){var t=r,e=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(e=t.return),r=t.return;while(r)}return t.tag===3?e:null}function DS(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function x2(r){if(Is(r)!==r)throw Error(Le(188))}function EO(r){var t=r.alternate;if(!t){if(t=Is(r),t===null)throw Error(Le(188));return t!==r?null:r}for(var e=r,n=t;;){var i=e.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){e=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===e)return x2(i),r;if(a===n)return x2(i),t;a=a.sibling}throw Error(Le(188))}if(e.return!==n.return)e=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===e){o=!0,e=i,n=a;break}if(s===n){o=!0,n=i,e=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===e){o=!0,e=a,n=i;break}if(s===n){o=!0,n=a,e=i;break}s=s.sibling}if(!o)throw Error(Le(189))}}if(e.alternate!==n)throw Error(Le(190))}if(e.tag!==3)throw Error(Le(188));return e.stateNode.current===e?r:t}function FS(r){return r=EO(r),r!==null?BS(r):null}function BS(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=BS(r);if(t!==null)return t;r=r.sibling}return null}var US=Gn.unstable_scheduleCallback,S2=Gn.unstable_cancelCallback,CO=Gn.unstable_shouldYield,LO=Gn.unstable_requestPaint,xr=Gn.unstable_now,OO=Gn.unstable_getCurrentPriorityLevel,$y=Gn.unstable_ImmediatePriority,$S=Gn.unstable_UserBlockingPriority,Dh=Gn.unstable_NormalPriority,AO=Gn.unstable_LowPriority,VS=Gn.unstable_IdlePriority,wp=null,Zi=null;function NO(r){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(wp,r,void 0,(r.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:IO,RO=Math.log,jO=Math.LN2;function IO(r){return r>>>=0,r===0?32:31-(RO(r)/jO|0)|0}var dd=64,hd=4194304;function hu(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Fh(r,t){var e=r.pendingLanes;if(e===0)return 0;var n=0,i=r.suspendedLanes,a=r.pingedLanes,o=e&268435455;if(o!==0){var s=o&~i;s!==0?n=hu(s):(a&=o,a!==0&&(n=hu(a)))}else o=e&~i,o!==0?n=hu(o):a!==0&&(n=hu(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=e&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=n;0<t;)e=31-Ci(t),i=1<<e,n|=r[e],t&=~i;return n}function MO(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DO(r,t){for(var e=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,a=r.pendingLanes;0<a;){var o=31-Ci(a),s=1<<o,c=i[o];c===-1?(!(s&e)||s&n)&&(i[o]=MO(s,t)):c<=t&&(r.expiredLanes|=s),a&=~s}}function l0(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function zS(){var r=dd;return dd<<=1,!(dd&4194240)&&(dd=64),r}function dm(r){for(var t=[],e=0;31>e;e++)t.push(r);return t}function of(r,t,e){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-Ci(t),r[t]=e}function FO(r,t){var e=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<e;){var i=31-Ci(e),a=1<<i;t[i]=0,n[i]=-1,r[i]=-1,e&=~a}}function Vy(r,t){var e=r.entangledLanes|=t;for(r=r.entanglements;e;){var n=31-Ci(e),i=1<<n;i&t|r[n]&t&&(r[n]|=t),e&=~i}}var $t=0;function WS(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var qS,zy,HS,GS,KS,c0=!1,pd=[],_o=null,wo=null,bo=null,Iu=new Map,Mu=new Map,fo=[],BO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function k2(r,t){switch(r){case"focusin":case"focusout":_o=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":Iu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(t.pointerId)}}function Yc(r,t,e,n,i,a){return r===null||r.nativeEvent!==a?(r={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=lf(t),t!==null&&zy(t)),r):(r.eventSystemFlags|=n,t=r.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),r)}function UO(r,t,e,n,i){switch(t){case"focusin":return _o=Yc(_o,r,t,e,n,i),!0;case"dragenter":return wo=Yc(wo,r,t,e,n,i),!0;case"mouseover":return bo=Yc(bo,r,t,e,n,i),!0;case"pointerover":var a=i.pointerId;return Iu.set(a,Yc(Iu.get(a)||null,r,t,e,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Mu.set(a,Yc(Mu.get(a)||null,r,t,e,n,i)),!0}return!1}function QS(r){var t=ms(r.target);if(t!==null){var e=Is(t);if(e!==null){if(t=e.tag,t===13){if(t=DS(e),t!==null){r.blockedOn=t,KS(r.priority,function(){HS(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){r.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}r.blockedOn=null}function oh(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var e=u0(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(e===null){e=r.nativeEvent;var n=new e.constructor(e.type,e);i0=n,e.target.dispatchEvent(n),i0=null}else return t=lf(e),t!==null&&zy(t),r.blockedOn=e,!1;t.shift()}return!0}function P2(r,t,e){oh(r)&&e.delete(t)}function $O(){c0=!1,_o!==null&&oh(_o)&&(_o=null),wo!==null&&oh(wo)&&(wo=null),bo!==null&&oh(bo)&&(bo=null),Iu.forEach(P2),Mu.forEach(P2)}function Jc(r,t){r.blockedOn===t&&(r.blockedOn=null,c0||(c0=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,$O)))}function Du(r){function t(i){return Jc(i,r)}if(0<pd.length){Jc(pd[0],r);for(var e=1;e<pd.length;e++){var n=pd[e];n.blockedOn===r&&(n.blockedOn=null)}}for(_o!==null&&Jc(_o,r),wo!==null&&Jc(wo,r),bo!==null&&Jc(bo,r),Iu.forEach(t),Mu.forEach(t),e=0;e<fo.length;e++)n=fo[e],n.blockedOn===r&&(n.blockedOn=null);for(;0<fo.length&&(e=fo[0],e.blockedOn===null);)QS(e),e.blockedOn===null&&fo.shift()}var Ml=Ma.ReactCurrentBatchConfig,Bh=!0;function VO(r,t,e,n){var i=$t,a=Ml.transition;Ml.transition=null;try{$t=1,Wy(r,t,e,n)}finally{$t=i,Ml.transition=a}}function zO(r,t,e,n){var i=$t,a=Ml.transition;Ml.transition=null;try{$t=4,Wy(r,t,e,n)}finally{$t=i,Ml.transition=a}}function Wy(r,t,e,n){if(Bh){var i=u0(r,t,e,n);if(i===null)xm(r,t,n,Uh,e),k2(r,n);else if(UO(i,r,t,e,n))n.stopPropagation();else if(k2(r,n),t&4&&-1<BO.indexOf(r)){for(;i!==null;){var a=lf(i);if(a!==null&&qS(a),a=u0(r,t,e,n),a===null&&xm(r,t,n,Uh,e),a===i)break;i=a}i!==null&&n.stopPropagation()}else xm(r,t,n,null,e)}}var Uh=null;function u0(r,t,e,n){if(Uh=null,r=Uy(n),r=ms(r),r!==null)if(t=Is(r),t===null)r=null;else if(e=t.tag,e===13){if(r=DS(t),r!==null)return r;r=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return Uh=r,null}function YS(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OO()){case $y:return 1;case $S:return 4;case Dh:case AO:return 16;case VS:return 536870912;default:return 16}default:return 16}}var po=null,qy=null,sh=null;function JS(){if(sh)return sh;var r,t=qy,e=t.length,n,i="value"in po?po.value:po.textContent,a=i.length;for(r=0;r<e&&t[r]===i[r];r++);var o=e-r;for(n=1;n<=o&&t[e-n]===i[a-n];n++);return sh=i.slice(r,1<n?1-n:void 0)}function lh(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function vd(){return!0}function T2(){return!1}function Qn(r){function t(e,n,i,a,o){this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in r)r.hasOwnProperty(s)&&(e=r[s],this[s]=e?e(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?vd:T2,this.isPropagationStopped=T2,this}return sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=vd)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=vd)},persist:function(){},isPersistent:vd}),t}var ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hy=Qn(ac),sf=sr({},ac,{view:0,detail:0}),WO=Qn(sf),hm,pm,Xc,bp=sr({},sf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gy,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Xc&&(Xc&&r.type==="mousemove"?(hm=r.screenX-Xc.screenX,pm=r.screenY-Xc.screenY):pm=hm=0,Xc=r),hm)},movementY:function(r){return"movementY"in r?r.movementY:pm}}),E2=Qn(bp),qO=sr({},bp,{dataTransfer:0}),HO=Qn(qO),GO=sr({},sf,{relatedTarget:0}),vm=Qn(GO),KO=sr({},ac,{animationName:0,elapsedTime:0,pseudoElement:0}),QO=Qn(KO),YO=sr({},ac,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),JO=Qn(YO),XO=sr({},ac,{data:0}),C2=Qn(XO),ZO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rA(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=tA[r])?!!t[r]:!1}function Gy(){return rA}var nA=sr({},sf,{key:function(r){if(r.key){var t=ZO[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=lh(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?eA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gy,charCode:function(r){return r.type==="keypress"?lh(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?lh(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),iA=Qn(nA),aA=sr({},bp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L2=Qn(aA),oA=sr({},sf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gy}),sA=Qn(oA),lA=sr({},ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),cA=Qn(lA),uA=sr({},bp,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),fA=Qn(uA),dA=[9,13,27,32],Ky=Na&&"CompositionEvent"in window,bu=null;Na&&"documentMode"in document&&(bu=document.documentMode);var hA=Na&&"TextEvent"in window&&!bu,XS=Na&&(!Ky||bu&&8<bu&&11>=bu),O2=" ",A2=!1;function ZS(r,t){switch(r){case"keyup":return dA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ek(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var bl=!1;function pA(r,t){switch(r){case"compositionend":return ek(t);case"keypress":return t.which!==32?null:(A2=!0,O2);case"textInput":return r=t.data,r===O2&&A2?null:r;default:return null}}function vA(r,t){if(bl)return r==="compositionend"||!Ky&&ZS(r,t)?(r=JS(),sh=qy=po=null,bl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return XS&&t.locale!=="ko"?null:t.data;default:return null}}var mA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N2(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!mA[r.type]:t==="textarea"}function tk(r,t,e,n){NS(n),t=$h(t,"onChange"),0<t.length&&(e=new Hy("onChange","change",null,e,n),r.push({event:e,listeners:t}))}var xu=null,Fu=null;function gA(r){dk(r,0)}function xp(r){var t=kl(r);if(PS(t))return r}function yA(r,t){if(r==="change")return t}var rk=!1;if(Na){var mm;if(Na){var gm="oninput"in document;if(!gm){var R2=document.createElement("div");R2.setAttribute("oninput","return;"),gm=typeof R2.oninput=="function"}mm=gm}else mm=!1;rk=mm&&(!document.documentMode||9<document.documentMode)}function j2(){xu&&(xu.detachEvent("onpropertychange",nk),Fu=xu=null)}function nk(r){if(r.propertyName==="value"&&xp(Fu)){var t=[];tk(t,Fu,r,Uy(r)),MS(gA,t)}}function _A(r,t,e){r==="focusin"?(j2(),xu=t,Fu=e,xu.attachEvent("onpropertychange",nk)):r==="focusout"&&j2()}function wA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xp(Fu)}function bA(r,t){if(r==="click")return xp(t)}function xA(r,t){if(r==="input"||r==="change")return xp(t)}function SA(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var Oi=typeof Object.is=="function"?Object.is:SA;function Bu(r,t){if(Oi(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var e=Object.keys(r),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var i=e[n];if(!Hg.call(t,i)||!Oi(r[i],t[i]))return!1}return!0}function I2(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function M2(r,t){var e=I2(r);r=0;for(var n;e;){if(e.nodeType===3){if(n=r+e.textContent.length,r<=t&&n>=t)return{node:e,offset:t-r};r=n}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=I2(e)}}function ik(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?ik(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function ak(){for(var r=window,t=jh();t instanceof r.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)r=t.contentWindow;else break;t=jh(r.document)}return t}function Qy(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function kA(r){var t=ak(),e=r.focusedElem,n=r.selectionRange;if(t!==e&&e&&e.ownerDocument&&ik(e.ownerDocument.documentElement,e)){if(n!==null&&Qy(e)){if(t=n.start,r=n.end,r===void 0&&(r=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(r,e.value.length);else if(r=(t=e.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var i=e.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!r.extend&&a>n&&(i=n,n=a,a=i),i=M2(e,a);var o=M2(e,n);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),r.removeAllRanges(),a>n?(r.addRange(t),r.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),r.addRange(t)))}}for(t=[],r=e;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)r=t[e],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var PA=Na&&"documentMode"in document&&11>=document.documentMode,xl=null,f0=null,Su=null,d0=!1;function D2(r,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;d0||xl==null||xl!==jh(n)||(n=xl,"selectionStart"in n&&Qy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Su&&Bu(Su,n)||(Su=n,n=$h(f0,"onSelect"),0<n.length&&(t=new Hy("onSelect","select",null,t,e),r.push({event:t,listeners:n}),t.target=xl)))}function md(r,t){var e={};return e[r.toLowerCase()]=t.toLowerCase(),e["Webkit"+r]="webkit"+t,e["Moz"+r]="moz"+t,e}var Sl={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},ym={},ok={};Na&&(ok=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function Sp(r){if(ym[r])return ym[r];if(!Sl[r])return r;var t=Sl[r],e;for(e in t)if(t.hasOwnProperty(e)&&e in ok)return ym[r]=t[e];return r}var sk=Sp("animationend"),lk=Sp("animationiteration"),ck=Sp("animationstart"),uk=Sp("transitionend"),fk=new Map,F2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function No(r,t){fk.set(r,t),js(t,[r])}for(var _m=0;_m<F2.length;_m++){var wm=F2[_m],TA=wm.toLowerCase(),EA=wm[0].toUpperCase()+wm.slice(1);No(TA,"on"+EA)}No(sk,"onAnimationEnd");No(lk,"onAnimationIteration");No(ck,"onAnimationStart");No("dblclick","onDoubleClick");No("focusin","onFocus");No("focusout","onBlur");No(uk,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CA=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function B2(r,t,e){var n=r.type||"unknown-event";r.currentTarget=e,TO(n,t,void 0,r),r.currentTarget=null}function dk(r,t){t=(t&4)!==0;for(var e=0;e<r.length;e++){var n=r[e],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break e;B2(i,s,l),a=c}else for(o=0;o<n.length;o++){if(s=n[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break e;B2(i,s,l),a=c}}}if(Mh)throw r=s0,Mh=!1,s0=null,r}function Xt(r,t){var e=t[g0];e===void 0&&(e=t[g0]=new Set);var n=r+"__bubble";e.has(n)||(hk(t,r,2,!1),e.add(n))}function bm(r,t,e){var n=0;t&&(n|=4),hk(e,r,n,t)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Uu(r){if(!r[gd]){r[gd]=!0,wS.forEach(function(e){e!=="selectionchange"&&(CA.has(e)||bm(e,!1,r),bm(e,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[gd]||(t[gd]=!0,bm("selectionchange",!1,t))}}function hk(r,t,e,n){switch(YS(t)){case 1:var i=VO;break;case 4:i=zO;break;default:i=Wy}e=i.bind(null,t,e,r),i=void 0,!o0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(t,e,{capture:!0,passive:i}):r.addEventListener(t,e,!0):i!==void 0?r.addEventListener(t,e,{passive:i}):r.addEventListener(t,e,!1)}function xm(r,t,e,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;s!==null;){if(o=ms(s),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}s=s.parentNode}}n=n.return}MS(function(){var l=a,u=Uy(e),d=[];e:{var v=fk.get(r);if(v!==void 0){var p=Hy,y=r;switch(r){case"keypress":if(lh(e)===0)break e;case"keydown":case"keyup":p=iA;break;case"focusin":y="focus",p=vm;break;case"focusout":y="blur",p=vm;break;case"beforeblur":case"afterblur":p=vm;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=E2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=HO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=sA;break;case sk:case lk:case ck:p=QO;break;case uk:p=cA;break;case"scroll":p=WO;break;case"wheel":p=fA;break;case"copy":case"cut":case"paste":p=JO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=L2}var _=(t&4)!==0,S=!_&&r==="scroll",w=_?v!==null?v+"Capture":null:v;_=[];for(var x=l,k;x!==null;){k=x;var T=k.stateNode;if(k.tag===5&&T!==null&&(k=T,w!==null&&(T=ju(x,w),T!=null&&_.push($u(x,T,k)))),S)break;x=x.return}0<_.length&&(v=new p(v,y,null,e,u),d.push({event:v,listeners:_}))}}if(!(t&7)){e:{if(v=r==="mouseover"||r==="pointerover",p=r==="mouseout"||r==="pointerout",v&&e!==i0&&(y=e.relatedTarget||e.fromElement)&&(ms(y)||y[Ra]))break e;if((p||v)&&(v=u.window===u?u:(v=u.ownerDocument)?v.defaultView||v.parentWindow:window,p?(y=e.relatedTarget||e.toElement,p=l,y=y?ms(y):null,y!==null&&(S=Is(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=l),p!==y)){if(_=E2,T="onMouseLeave",w="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(_=L2,T="onPointerLeave",w="onPointerEnter",x="pointer"),S=p==null?v:kl(p),k=y==null?v:kl(y),v=new _(T,x+"leave",p,e,u),v.target=S,v.relatedTarget=k,T=null,ms(u)===l&&(_=new _(w,x+"enter",y,e,u),_.target=k,_.relatedTarget=S,T=_),S=T,p&&y)t:{for(_=p,w=y,x=0,k=_;k;k=nl(k))x++;for(k=0,T=w;T;T=nl(T))k++;for(;0<x-k;)_=nl(_),x--;for(;0<k-x;)w=nl(w),k--;for(;x--;){if(_===w||w!==null&&_===w.alternate)break t;_=nl(_),w=nl(w)}_=null}else _=null;p!==null&&U2(d,v,p,_,!1),y!==null&&S!==null&&U2(d,S,y,_,!0)}}e:{if(v=l?kl(l):window,p=v.nodeName&&v.nodeName.toLowerCase(),p==="select"||p==="input"&&v.type==="file")var R=yA;else if(N2(v))if(rk)R=xA;else{R=wA;var U=_A}else(p=v.nodeName)&&p.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(R=bA);if(R&&(R=R(r,l))){tk(d,R,e,u);break e}U&&U(r,v,l),r==="focusout"&&(U=v._wrapperState)&&U.controlled&&v.type==="number"&&Zg(v,"number",v.value)}switch(U=l?kl(l):window,r){case"focusin":(N2(U)||U.contentEditable==="true")&&(xl=U,f0=l,Su=null);break;case"focusout":Su=f0=xl=null;break;case"mousedown":d0=!0;break;case"contextmenu":case"mouseup":case"dragend":d0=!1,D2(d,e,u);break;case"selectionchange":if(PA)break;case"keydown":case"keyup":D2(d,e,u)}var $;if(Ky)e:{switch(r){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else bl?ZS(r,e)&&(F="onCompositionEnd"):r==="keydown"&&e.keyCode===229&&(F="onCompositionStart");F&&(XS&&e.locale!=="ko"&&(bl||F!=="onCompositionStart"?F==="onCompositionEnd"&&bl&&($=JS()):(po=u,qy="value"in po?po.value:po.textContent,bl=!0)),U=$h(l,F),0<U.length&&(F=new C2(F,r,null,e,u),d.push({event:F,listeners:U}),$?F.data=$:($=ek(e),$!==null&&(F.data=$)))),($=hA?pA(r,e):vA(r,e))&&(l=$h(l,"onBeforeInput"),0<l.length&&(u=new C2("onBeforeInput","beforeinput",null,e,u),d.push({event:u,listeners:l}),u.data=$))}dk(d,t)})}function $u(r,t,e){return{instance:r,listener:t,currentTarget:e}}function $h(r,t){for(var e=t+"Capture",n=[];r!==null;){var i=r,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ju(r,e),a!=null&&n.unshift($u(r,a,i)),a=ju(r,t),a!=null&&n.push($u(r,a,i))),r=r.return}return n}function nl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function U2(r,t,e,n,i){for(var a=t._reactName,o=[];e!==null&&e!==n;){var s=e,c=s.alternate,l=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&l!==null&&(s=l,i?(c=ju(e,a),c!=null&&o.unshift($u(e,c,s))):i||(c=ju(e,a),c!=null&&o.push($u(e,c,s)))),e=e.return}o.length!==0&&r.push({event:t,listeners:o})}var LA=/\r\n?/g,OA=/\u0000|\uFFFD/g;function $2(r){return(typeof r=="string"?r:""+r).replace(LA,`
`).replace(OA,"")}function yd(r,t,e){if(t=$2(t),$2(r)!==t&&e)throw Error(Le(425))}function Vh(){}var h0=null,p0=null;function v0(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var m0=typeof setTimeout=="function"?setTimeout:void 0,AA=typeof clearTimeout=="function"?clearTimeout:void 0,V2=typeof Promise=="function"?Promise:void 0,NA=typeof queueMicrotask=="function"?queueMicrotask:typeof V2<"u"?function(r){return V2.resolve(null).then(r).catch(RA)}:m0;function RA(r){setTimeout(function(){throw r})}function Sm(r,t){var e=t,n=0;do{var i=e.nextSibling;if(r.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(n===0){r.removeChild(i),Du(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=i}while(e);Du(t)}function xo(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function z2(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return r;t--}else e==="/$"&&t++}r=r.previousSibling}return null}var oc=Math.random().toString(36).slice(2),Qi="__reactFiber$"+oc,Vu="__reactProps$"+oc,Ra="__reactContainer$"+oc,g0="__reactEvents$"+oc,jA="__reactListeners$"+oc,IA="__reactHandles$"+oc;function ms(r){var t=r[Qi];if(t)return t;for(var e=r.parentNode;e;){if(t=e[Ra]||e[Qi]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(r=z2(r);r!==null;){if(e=r[Qi])return e;r=z2(r)}return t}r=e,e=r.parentNode}return null}function lf(r){return r=r[Qi]||r[Ra],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function kl(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Le(33))}function kp(r){return r[Vu]||null}var y0=[],Pl=-1;function Ro(r){return{current:r}}function er(r){0>Pl||(r.current=y0[Pl],y0[Pl]=null,Pl--)}function Yt(r,t){Pl++,y0[Pl]=r.current,r.current=t}var Oo={},cn=Ro(Oo),Tn=Ro(!1),Ps=Oo;function Hl(r,t){var e=r.type.contextTypes;if(!e)return Oo;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in e)i[a]=t[a];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=i),i}function En(r){return r=r.childContextTypes,r!=null}function zh(){er(Tn),er(cn)}function W2(r,t,e){if(cn.current!==Oo)throw Error(Le(168));Yt(cn,t),Yt(Tn,e)}function pk(r,t,e){var n=r.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Le(108,_O(r)||"Unknown",i));return sr({},e,n)}function Wh(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Oo,Ps=cn.current,Yt(cn,r),Yt(Tn,Tn.current),!0}function q2(r,t,e){var n=r.stateNode;if(!n)throw Error(Le(169));e?(r=pk(r,t,Ps),n.__reactInternalMemoizedMergedChildContext=r,er(Tn),er(cn),Yt(cn,r)):er(Tn),Yt(Tn,e)}var Ta=null,Pp=!1,km=!1;function vk(r){Ta===null?Ta=[r]:Ta.push(r)}function MA(r){Pp=!0,vk(r)}function jo(){if(!km&&Ta!==null){km=!0;var r=0,t=$t;try{var e=Ta;for($t=1;r<e.length;r++){var n=e[r];do n=n(!0);while(n!==null)}Ta=null,Pp=!1}catch(i){throw Ta!==null&&(Ta=Ta.slice(r+1)),US($y,jo),i}finally{$t=t,km=!1}}return null}var Tl=[],El=0,qh=null,Hh=0,ai=[],oi=0,Ts=null,Ca=1,La="";function us(r,t){Tl[El++]=Hh,Tl[El++]=qh,qh=r,Hh=t}function mk(r,t,e){ai[oi++]=Ca,ai[oi++]=La,ai[oi++]=Ts,Ts=r;var n=Ca;r=La;var i=32-Ci(n)-1;n&=~(1<<i),e+=1;var a=32-Ci(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ca=1<<32-Ci(t)+i|e<<i|n,La=a+r}else Ca=1<<a|e<<i|n,La=r}function Yy(r){r.return!==null&&(us(r,1),mk(r,1,0))}function Jy(r){for(;r===qh;)qh=Tl[--El],Tl[El]=null,Hh=Tl[--El],Tl[El]=null;for(;r===Ts;)Ts=ai[--oi],ai[oi]=null,La=ai[--oi],ai[oi]=null,Ca=ai[--oi],ai[oi]=null}var Hn=null,Wn=null,rr=!1,Ei=null;function gk(r,t){var e=li(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=r,t=r.deletions,t===null?(r.deletions=[e],r.flags|=16):t.push(e)}function H2(r,t){switch(r.tag){case 5:var e=r.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Hn=r,Wn=xo(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Hn=r,Wn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Ts!==null?{id:Ca,overflow:La}:null,r.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=li(18,null,null,0),e.stateNode=t,e.return=r,r.child=e,Hn=r,Wn=null,!0):!1;default:return!1}}function _0(r){return(r.mode&1)!==0&&(r.flags&128)===0}function w0(r){if(rr){var t=Wn;if(t){var e=t;if(!H2(r,t)){if(_0(r))throw Error(Le(418));t=xo(e.nextSibling);var n=Hn;t&&H2(r,t)?gk(n,e):(r.flags=r.flags&-4097|2,rr=!1,Hn=r)}}else{if(_0(r))throw Error(Le(418));r.flags=r.flags&-4097|2,rr=!1,Hn=r}}}function G2(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Hn=r}function _d(r){if(r!==Hn)return!1;if(!rr)return G2(r),rr=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!v0(r.type,r.memoizedProps)),t&&(t=Wn)){if(_0(r))throw yk(),Error(Le(418));for(;t;)gk(r,t),t=xo(t.nextSibling)}if(G2(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Le(317));e:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="/$"){if(t===0){Wn=xo(r.nextSibling);break e}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}r=r.nextSibling}Wn=null}}else Wn=Hn?xo(r.stateNode.nextSibling):null;return!0}function yk(){for(var r=Wn;r;)r=xo(r.nextSibling)}function Gl(){Wn=Hn=null,rr=!1}function Xy(r){Ei===null?Ei=[r]:Ei.push(r)}var DA=Ma.ReactCurrentBatchConfig;function Zc(r,t,e){if(r=e.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(Le(309));var n=e.stateNode}if(!n)throw Error(Le(147,r));var i=n,a=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},t._stringRef=a,t)}if(typeof r!="string")throw Error(Le(284));if(!e._owner)throw Error(Le(290,r))}return r}function wd(r,t){throw r=Object.prototype.toString.call(t),Error(Le(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function K2(r){var t=r._init;return t(r._payload)}function _k(r){function t(w,x){if(r){var k=w.deletions;k===null?(w.deletions=[x],w.flags|=16):k.push(x)}}function e(w,x){if(!r)return null;for(;x!==null;)t(w,x),x=x.sibling;return null}function n(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function i(w,x){return w=To(w,x),w.index=0,w.sibling=null,w}function a(w,x,k){return w.index=k,r?(k=w.alternate,k!==null?(k=k.index,k<x?(w.flags|=2,x):k):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return r&&w.alternate===null&&(w.flags|=2),w}function s(w,x,k,T){return x===null||x.tag!==6?(x=Am(k,w.mode,T),x.return=w,x):(x=i(x,k),x.return=w,x)}function c(w,x,k,T){var R=k.type;return R===wl?u(w,x,k.props.children,T,k.key):x!==null&&(x.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===co&&K2(R)===x.type)?(T=i(x,k.props),T.ref=Zc(w,x,k),T.return=w,T):(T=vh(k.type,k.key,k.props,null,w.mode,T),T.ref=Zc(w,x,k),T.return=w,T)}function l(w,x,k,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==k.containerInfo||x.stateNode.implementation!==k.implementation?(x=Nm(k,w.mode,T),x.return=w,x):(x=i(x,k.children||[]),x.return=w,x)}function u(w,x,k,T,R){return x===null||x.tag!==7?(x=bs(k,w.mode,T,R),x.return=w,x):(x=i(x,k),x.return=w,x)}function d(w,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Am(""+x,w.mode,k),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cd:return k=vh(x.type,x.key,x.props,null,w.mode,k),k.ref=Zc(w,null,x),k.return=w,k;case _l:return x=Nm(x,w.mode,k),x.return=w,x;case co:var T=x._init;return d(w,T(x._payload),k)}if(du(x)||Kc(x))return x=bs(x,w.mode,k,null),x.return=w,x;wd(w,x)}return null}function v(w,x,k,T){var R=x!==null?x.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return R!==null?null:s(w,x,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case cd:return k.key===R?c(w,x,k,T):null;case _l:return k.key===R?l(w,x,k,T):null;case co:return R=k._init,v(w,x,R(k._payload),T)}if(du(k)||Kc(k))return R!==null?null:u(w,x,k,T,null);wd(w,k)}return null}function p(w,x,k,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return w=w.get(k)||null,s(x,w,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case cd:return w=w.get(T.key===null?k:T.key)||null,c(x,w,T,R);case _l:return w=w.get(T.key===null?k:T.key)||null,l(x,w,T,R);case co:var U=T._init;return p(w,x,k,U(T._payload),R)}if(du(T)||Kc(T))return w=w.get(k)||null,u(x,w,T,R,null);wd(x,T)}return null}function y(w,x,k,T){for(var R=null,U=null,$=x,F=x=0,M=null;$!==null&&F<k.length;F++){$.index>F?(M=$,$=null):M=$.sibling;var J=v(w,$,k[F],T);if(J===null){$===null&&($=M);break}r&&$&&J.alternate===null&&t(w,$),x=a(J,x,F),U===null?R=J:U.sibling=J,U=J,$=M}if(F===k.length)return e(w,$),rr&&us(w,F),R;if($===null){for(;F<k.length;F++)$=d(w,k[F],T),$!==null&&(x=a($,x,F),U===null?R=$:U.sibling=$,U=$);return rr&&us(w,F),R}for($=n(w,$);F<k.length;F++)M=p($,w,F,k[F],T),M!==null&&(r&&M.alternate!==null&&$.delete(M.key===null?F:M.key),x=a(M,x,F),U===null?R=M:U.sibling=M,U=M);return r&&$.forEach(function(O){return t(w,O)}),rr&&us(w,F),R}function _(w,x,k,T){var R=Kc(k);if(typeof R!="function")throw Error(Le(150));if(k=R.call(k),k==null)throw Error(Le(151));for(var U=R=null,$=x,F=x=0,M=null,J=k.next();$!==null&&!J.done;F++,J=k.next()){$.index>F?(M=$,$=null):M=$.sibling;var O=v(w,$,J.value,T);if(O===null){$===null&&($=M);break}r&&$&&O.alternate===null&&t(w,$),x=a(O,x,F),U===null?R=O:U.sibling=O,U=O,$=M}if(J.done)return e(w,$),rr&&us(w,F),R;if($===null){for(;!J.done;F++,J=k.next())J=d(w,J.value,T),J!==null&&(x=a(J,x,F),U===null?R=J:U.sibling=J,U=J);return rr&&us(w,F),R}for($=n(w,$);!J.done;F++,J=k.next())J=p($,w,F,J.value,T),J!==null&&(r&&J.alternate!==null&&$.delete(J.key===null?F:J.key),x=a(J,x,F),U===null?R=J:U.sibling=J,U=J);return r&&$.forEach(function(N){return t(w,N)}),rr&&us(w,F),R}function S(w,x,k,T){if(typeof k=="object"&&k!==null&&k.type===wl&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case cd:e:{for(var R=k.key,U=x;U!==null;){if(U.key===R){if(R=k.type,R===wl){if(U.tag===7){e(w,U.sibling),x=i(U,k.props.children),x.return=w,w=x;break e}}else if(U.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===co&&K2(R)===U.type){e(w,U.sibling),x=i(U,k.props),x.ref=Zc(w,U,k),x.return=w,w=x;break e}e(w,U);break}else t(w,U);U=U.sibling}k.type===wl?(x=bs(k.props.children,w.mode,T,k.key),x.return=w,w=x):(T=vh(k.type,k.key,k.props,null,w.mode,T),T.ref=Zc(w,x,k),T.return=w,w=T)}return o(w);case _l:e:{for(U=k.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===k.containerInfo&&x.stateNode.implementation===k.implementation){e(w,x.sibling),x=i(x,k.children||[]),x.return=w,w=x;break e}else{e(w,x);break}else t(w,x);x=x.sibling}x=Nm(k,w.mode,T),x.return=w,w=x}return o(w);case co:return U=k._init,S(w,x,U(k._payload),T)}if(du(k))return y(w,x,k,T);if(Kc(k))return _(w,x,k,T);wd(w,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,x!==null&&x.tag===6?(e(w,x.sibling),x=i(x,k),x.return=w,w=x):(e(w,x),x=Am(k,w.mode,T),x.return=w,w=x),o(w)):e(w,x)}return S}var Kl=_k(!0),wk=_k(!1),Gh=Ro(null),Kh=null,Cl=null,Zy=null;function e1(){Zy=Cl=Kh=null}function t1(r){var t=Gh.current;er(Gh),r._currentValue=t}function b0(r,t,e){for(;r!==null;){var n=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),r===e)break;r=r.return}}function Dl(r,t){Kh=r,Zy=Cl=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(Pn=!0),r.firstContext=null)}function fi(r){var t=r._currentValue;if(Zy!==r)if(r={context:r,memoizedValue:t,next:null},Cl===null){if(Kh===null)throw Error(Le(308));Cl=r,Kh.dependencies={lanes:0,firstContext:r}}else Cl=Cl.next=r;return t}var gs=null;function r1(r){gs===null?gs=[r]:gs.push(r)}function bk(r,t,e,n){var i=t.interleaved;return i===null?(e.next=e,r1(t)):(e.next=i.next,i.next=e),t.interleaved=e,ja(r,n)}function ja(r,t){r.lanes|=t;var e=r.alternate;for(e!==null&&(e.lanes|=t),e=r,r=r.return;r!==null;)r.childLanes|=t,e=r.alternate,e!==null&&(e.childLanes|=t),e=r,r=r.return;return e.tag===3?e.stateNode:null}var uo=!1;function n1(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xk(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Aa(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function So(r,t,e){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Lt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,ja(r,e)}return i=n.interleaved,i===null?(t.next=t,r1(n)):(t.next=i.next,i.next=t),n.interleaved=t,ja(r,e)}function ch(r,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var n=t.lanes;n&=r.pendingLanes,e|=n,t.lanes=e,Vy(r,e)}}function Q2(r,t){var e=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var i=null,a=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};a===null?i=a=o:a=a.next=o,e=e.next}while(e!==null);a===null?i=a=t:a=a.next=t}else i=a=t;e={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},r.updateQueue=e;return}r=e.lastBaseUpdate,r===null?e.firstBaseUpdate=t:r.next=t,e.lastBaseUpdate=t}function Qh(r,t,e,n){var i=r.updateQueue;uo=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=r.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var v=s.lane,p=s.eventTime;if((n&v)===v){u!==null&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=r,_=s;switch(v=t,p=e,_.tag){case 1:if(y=_.payload,typeof y=="function"){d=y.call(p,d,v);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,v=typeof y=="function"?y.call(p,d,v):y,v==null)break e;d=sr({},d,v);break e;case 2:uo=!0}}s.callback!==null&&s.lane!==0&&(r.flags|=64,v=i.effects,v===null?i.effects=[s]:v.push(s))}else p={eventTime:p,lane:v,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=v;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;v=s,s=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Cs|=o,r.lanes=o,r.memoizedState=d}}function Y2(r,t,e){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var n=r[t],i=n.callback;if(i!==null){if(n.callback=null,n=e,typeof i!="function")throw Error(Le(191,i));i.call(n)}}}var cf={},ea=Ro(cf),zu=Ro(cf),Wu=Ro(cf);function ys(r){if(r===cf)throw Error(Le(174));return r}function i1(r,t){switch(Yt(Wu,t),Yt(zu,r),Yt(ea,cf),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:t0(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=t0(t,r)}er(ea),Yt(ea,t)}function Ql(){er(ea),er(zu),er(Wu)}function Sk(r){ys(Wu.current);var t=ys(ea.current),e=t0(t,r.type);t!==e&&(Yt(zu,r),Yt(ea,e))}function a1(r){zu.current===r&&(er(ea),er(zu))}var ir=Ro(0);function Yh(r){for(var t=r;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pm=[];function o1(){for(var r=0;r<Pm.length;r++)Pm[r]._workInProgressVersionPrimary=null;Pm.length=0}var uh=Ma.ReactCurrentDispatcher,Tm=Ma.ReactCurrentBatchConfig,Es=0,or=null,Dr=null,Ur=null,Jh=!1,ku=!1,qu=0,FA=0;function en(){throw Error(Le(321))}function s1(r,t){if(t===null)return!1;for(var e=0;e<t.length&&e<r.length;e++)if(!Oi(r[e],t[e]))return!1;return!0}function l1(r,t,e,n,i,a){if(Es=a,or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uh.current=r===null||r.memoizedState===null?VA:zA,r=e(n,i),ku){a=0;do{if(ku=!1,qu=0,25<=a)throw Error(Le(301));a+=1,Ur=Dr=null,t.updateQueue=null,uh.current=WA,r=e(n,i)}while(ku)}if(uh.current=Xh,t=Dr!==null&&Dr.next!==null,Es=0,Ur=Dr=or=null,Jh=!1,t)throw Error(Le(300));return r}function c1(){var r=qu!==0;return qu=0,r}function Gi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?or.memoizedState=Ur=r:Ur=Ur.next=r,Ur}function di(){if(Dr===null){var r=or.alternate;r=r!==null?r.memoizedState:null}else r=Dr.next;var t=Ur===null?or.memoizedState:Ur.next;if(t!==null)Ur=t,Dr=r;else{if(r===null)throw Error(Le(310));Dr=r,r={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Ur===null?or.memoizedState=Ur=r:Ur=Ur.next=r}return Ur}function Hu(r,t){return typeof t=="function"?t(r):t}function Em(r){var t=di(),e=t.queue;if(e===null)throw Error(Le(311));e.lastRenderedReducer=r;var n=Dr,i=n.baseQueue,a=e.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,e.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,c=null,l=a;do{var u=l.lane;if((Es&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:r(n,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(s=c=d,o=n):c=c.next=d,or.lanes|=u,Cs|=u}l=l.next}while(l!==null&&l!==a);c===null?o=n:c.next=s,Oi(n,t.memoizedState)||(Pn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,e.lastRenderedState=n}if(r=e.interleaved,r!==null){i=r;do a=i.lane,or.lanes|=a,Cs|=a,i=i.next;while(i!==r)}else i===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function Cm(r){var t=di(),e=t.queue;if(e===null)throw Error(Le(311));e.lastRenderedReducer=r;var n=e.dispatch,i=e.pending,a=t.memoizedState;if(i!==null){e.pending=null;var o=i=i.next;do a=r(a,o.action),o=o.next;while(o!==i);Oi(a,t.memoizedState)||(Pn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),e.lastRenderedState=a}return[a,n]}function kk(){}function Pk(r,t){var e=or,n=di(),i=t(),a=!Oi(n.memoizedState,i);if(a&&(n.memoizedState=i,Pn=!0),n=n.queue,u1(Ck.bind(null,e,n,r),[r]),n.getSnapshot!==t||a||Ur!==null&&Ur.memoizedState.tag&1){if(e.flags|=2048,Gu(9,Ek.bind(null,e,n,i,t),void 0,null),Vr===null)throw Error(Le(349));Es&30||Tk(e,t,i)}return i}function Tk(r,t,e){r.flags|=16384,r={getSnapshot:t,value:e},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.stores=[r]):(e=t.stores,e===null?t.stores=[r]:e.push(r))}function Ek(r,t,e,n){t.value=e,t.getSnapshot=n,Lk(t)&&Ok(r)}function Ck(r,t,e){return e(function(){Lk(t)&&Ok(r)})}function Lk(r){var t=r.getSnapshot;r=r.value;try{var e=t();return!Oi(r,e)}catch{return!0}}function Ok(r){var t=ja(r,1);t!==null&&Li(t,r,1,-1)}function J2(r){var t=Gi();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:r},t.queue=r,r=r.dispatch=$A.bind(null,or,r),[t.memoizedState,r]}function Gu(r,t,e,n){return r={tag:r,create:t,destroy:e,deps:n,next:null},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.lastEffect=r.next=r):(e=t.lastEffect,e===null?t.lastEffect=r.next=r:(n=e.next,e.next=r,r.next=n,t.lastEffect=r)),r}function Ak(){return di().memoizedState}function fh(r,t,e,n){var i=Gi();or.flags|=r,i.memoizedState=Gu(1|t,e,void 0,n===void 0?null:n)}function Tp(r,t,e,n){var i=di();n=n===void 0?null:n;var a=void 0;if(Dr!==null){var o=Dr.memoizedState;if(a=o.destroy,n!==null&&s1(n,o.deps)){i.memoizedState=Gu(t,e,a,n);return}}or.flags|=r,i.memoizedState=Gu(1|t,e,a,n)}function X2(r,t){return fh(8390656,8,r,t)}function u1(r,t){return Tp(2048,8,r,t)}function Nk(r,t){return Tp(4,2,r,t)}function Rk(r,t){return Tp(4,4,r,t)}function jk(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function Ik(r,t,e){return e=e!=null?e.concat([r]):null,Tp(4,4,jk.bind(null,t,r),e)}function f1(){}function Mk(r,t){var e=di();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&s1(t,n[1])?n[0]:(e.memoizedState=[r,t],r)}function Dk(r,t){var e=di();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&s1(t,n[1])?n[0]:(r=r(),e.memoizedState=[r,t],r)}function Fk(r,t,e){return Es&21?(Oi(e,t)||(e=zS(),or.lanes|=e,Cs|=e,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,Pn=!0),r.memoizedState=e)}function BA(r,t){var e=$t;$t=e!==0&&4>e?e:4,r(!0);var n=Tm.transition;Tm.transition={};try{r(!1),t()}finally{$t=e,Tm.transition=n}}function Bk(){return di().memoizedState}function UA(r,t,e){var n=Po(r);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},Uk(r))$k(t,e);else if(e=bk(r,t,e,n),e!==null){var i=vn();Li(e,r,n,i),Vk(e,t,n)}}function $A(r,t,e){var n=Po(r),i={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(Uk(r))$k(t,i);else{var a=r.alternate;if(r.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,e);if(i.hasEagerState=!0,i.eagerState=s,Oi(s,o)){var c=t.interleaved;c===null?(i.next=i,r1(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}e=bk(r,t,i,n),e!==null&&(i=vn(),Li(e,r,n,i),Vk(e,t,n))}}function Uk(r){var t=r.alternate;return r===or||t!==null&&t===or}function $k(r,t){ku=Jh=!0;var e=r.pending;e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t}function Vk(r,t,e){if(e&4194240){var n=t.lanes;n&=r.pendingLanes,e|=n,t.lanes=e,Vy(r,e)}}var Xh={readContext:fi,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},VA={readContext:fi,useCallback:function(r,t){return Gi().memoizedState=[r,t===void 0?null:t],r},useContext:fi,useEffect:X2,useImperativeHandle:function(r,t,e){return e=e!=null?e.concat([r]):null,fh(4194308,4,jk.bind(null,t,r),e)},useLayoutEffect:function(r,t){return fh(4194308,4,r,t)},useInsertionEffect:function(r,t){return fh(4,2,r,t)},useMemo:function(r,t){var e=Gi();return t=t===void 0?null:t,r=r(),e.memoizedState=[r,t],r},useReducer:function(r,t,e){var n=Gi();return t=e!==void 0?e(t):t,n.memoizedState=n.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},n.queue=r,r=r.dispatch=UA.bind(null,or,r),[n.memoizedState,r]},useRef:function(r){var t=Gi();return r={current:r},t.memoizedState=r},useState:J2,useDebugValue:f1,useDeferredValue:function(r){return Gi().memoizedState=r},useTransition:function(){var r=J2(!1),t=r[0];return r=BA.bind(null,r[1]),Gi().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,e){var n=or,i=Gi();if(rr){if(e===void 0)throw Error(Le(407));e=e()}else{if(e=t(),Vr===null)throw Error(Le(349));Es&30||Tk(n,t,e)}i.memoizedState=e;var a={value:e,getSnapshot:t};return i.queue=a,X2(Ck.bind(null,n,a,r),[r]),n.flags|=2048,Gu(9,Ek.bind(null,n,a,e,t),void 0,null),e},useId:function(){var r=Gi(),t=Vr.identifierPrefix;if(rr){var e=La,n=Ca;e=(n&~(1<<32-Ci(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=qu++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=FA++,t=":"+t+"r"+e.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},zA={readContext:fi,useCallback:Mk,useContext:fi,useEffect:u1,useImperativeHandle:Ik,useInsertionEffect:Nk,useLayoutEffect:Rk,useMemo:Dk,useReducer:Em,useRef:Ak,useState:function(){return Em(Hu)},useDebugValue:f1,useDeferredValue:function(r){var t=di();return Fk(t,Dr.memoizedState,r)},useTransition:function(){var r=Em(Hu)[0],t=di().memoizedState;return[r,t]},useMutableSource:kk,useSyncExternalStore:Pk,useId:Bk,unstable_isNewReconciler:!1},WA={readContext:fi,useCallback:Mk,useContext:fi,useEffect:u1,useImperativeHandle:Ik,useInsertionEffect:Nk,useLayoutEffect:Rk,useMemo:Dk,useReducer:Cm,useRef:Ak,useState:function(){return Cm(Hu)},useDebugValue:f1,useDeferredValue:function(r){var t=di();return Dr===null?t.memoizedState=r:Fk(t,Dr.memoizedState,r)},useTransition:function(){var r=Cm(Hu)[0],t=di().memoizedState;return[r,t]},useMutableSource:kk,useSyncExternalStore:Pk,useId:Bk,unstable_isNewReconciler:!1};function Si(r,t){if(r&&r.defaultProps){t=sr({},t),r=r.defaultProps;for(var e in r)t[e]===void 0&&(t[e]=r[e]);return t}return t}function x0(r,t,e,n){t=r.memoizedState,e=e(n,t),e=e==null?t:sr({},t,e),r.memoizedState=e,r.lanes===0&&(r.updateQueue.baseState=e)}var Ep={isMounted:function(r){return(r=r._reactInternals)?Is(r)===r:!1},enqueueSetState:function(r,t,e){r=r._reactInternals;var n=vn(),i=Po(r),a=Aa(n,i);a.payload=t,e!=null&&(a.callback=e),t=So(r,a,i),t!==null&&(Li(t,r,i,n),ch(t,r,i))},enqueueReplaceState:function(r,t,e){r=r._reactInternals;var n=vn(),i=Po(r),a=Aa(n,i);a.tag=1,a.payload=t,e!=null&&(a.callback=e),t=So(r,a,i),t!==null&&(Li(t,r,i,n),ch(t,r,i))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var e=vn(),n=Po(r),i=Aa(e,n);i.tag=2,t!=null&&(i.callback=t),t=So(r,i,n),t!==null&&(Li(t,r,n,e),ch(t,r,n))}};function Z2(r,t,e,n,i,a,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!Bu(e,n)||!Bu(i,a):!0}function zk(r,t,e){var n=!1,i=Oo,a=t.contextType;return typeof a=="object"&&a!==null?a=fi(a):(i=En(t)?Ps:cn.current,n=t.contextTypes,a=(n=n!=null)?Hl(r,i):Oo),t=new t(e,a),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ep,r.stateNode=t,t._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=a),t}function ew(r,t,e,n){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==r&&Ep.enqueueReplaceState(t,t.state,null)}function S0(r,t,e,n){var i=r.stateNode;i.props=e,i.state=r.memoizedState,i.refs={},n1(r);var a=t.contextType;typeof a=="object"&&a!==null?i.context=fi(a):(a=En(t)?Ps:cn.current,i.context=Hl(r,a)),i.state=r.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(x0(r,t,a,e),i.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ep.enqueueReplaceState(i,i.state,null),Qh(r,e,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function Yl(r,t){try{var e="",n=t;do e+=yO(n),n=n.return;while(n);var i=e}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:r,source:t,stack:i,digest:null}}function Lm(r,t,e){return{value:r,source:null,stack:e??null,digest:t??null}}function k0(r,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var qA=typeof WeakMap=="function"?WeakMap:Map;function Wk(r,t,e){e=Aa(-1,e),e.tag=3,e.payload={element:null};var n=t.value;return e.callback=function(){ep||(ep=!0,j0=n),k0(r,t)},e}function qk(r,t,e){e=Aa(-1,e),e.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;e.payload=function(){return n(i)},e.callback=function(){k0(r,t)}}var a=r.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){k0(r,t),typeof n!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function tw(r,t,e){var n=r.pingCache;if(n===null){n=r.pingCache=new qA;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(e)||(i.add(e),r=a6.bind(null,r,t,e),t.then(r,r))}function rw(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function nw(r,t,e,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===t?r.flags|=65536:(r.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Aa(-1,1),t.tag=2,So(e,t,1))),e.lanes|=1),r)}var HA=Ma.ReactCurrentOwner,Pn=!1;function hn(r,t,e,n){t.child=r===null?wk(t,null,e,n):Kl(t,r.child,e,n)}function iw(r,t,e,n,i){e=e.render;var a=t.ref;return Dl(t,i),n=l1(r,t,e,n,a,i),e=c1(),r!==null&&!Pn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Ia(r,t,i)):(rr&&e&&Yy(t),t.flags|=1,hn(r,t,n,i),t.child)}function aw(r,t,e,n,i){if(r===null){var a=e.type;return typeof a=="function"&&!_1(a)&&a.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=a,Hk(r,t,a,n,i)):(r=vh(e.type,null,n,t,t.mode,i),r.ref=t.ref,r.return=t,t.child=r)}if(a=r.child,!(r.lanes&i)){var o=a.memoizedProps;if(e=e.compare,e=e!==null?e:Bu,e(o,n)&&r.ref===t.ref)return Ia(r,t,i)}return t.flags|=1,r=To(a,n),r.ref=t.ref,r.return=t,t.child=r}function Hk(r,t,e,n,i){if(r!==null){var a=r.memoizedProps;if(Bu(a,n)&&r.ref===t.ref)if(Pn=!1,t.pendingProps=n=a,(r.lanes&i)!==0)r.flags&131072&&(Pn=!0);else return t.lanes=r.lanes,Ia(r,t,i)}return P0(r,t,e,n,i)}function Gk(r,t,e){var n=t.pendingProps,i=n.children,a=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Ol,Vn),Vn|=e;else{if(!(e&1073741824))return r=a!==null?a.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,Yt(Ol,Vn),Vn|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:e,Yt(Ol,Vn),Vn|=n}else a!==null?(n=a.baseLanes|e,t.memoizedState=null):n=e,Yt(Ol,Vn),Vn|=n;return hn(r,t,i,e),t.child}function Kk(r,t){var e=t.ref;(r===null&&e!==null||r!==null&&r.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function P0(r,t,e,n,i){var a=En(e)?Ps:cn.current;return a=Hl(t,a),Dl(t,i),e=l1(r,t,e,n,a,i),n=c1(),r!==null&&!Pn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Ia(r,t,i)):(rr&&n&&Yy(t),t.flags|=1,hn(r,t,e,i),t.child)}function ow(r,t,e,n,i){if(En(e)){var a=!0;Wh(t)}else a=!1;if(Dl(t,i),t.stateNode===null)dh(r,t),zk(t,e,n),S0(t,e,n,i),n=!0;else if(r===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,l=e.contextType;typeof l=="object"&&l!==null?l=fi(l):(l=En(e)?Ps:cn.current,l=Hl(t,l));var u=e.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||c!==l)&&ew(t,o,n,l),uo=!1;var v=t.memoizedState;o.state=v,Qh(t,n,o,i),c=t.memoizedState,s!==n||v!==c||Tn.current||uo?(typeof u=="function"&&(x0(t,e,u,n),c=t.memoizedState),(s=uo||Z2(t,e,s,n,v,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=l,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,xk(r,t),s=t.memoizedProps,l=t.type===t.elementType?s:Si(t.type,s),o.props=l,d=t.pendingProps,v=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=fi(c):(c=En(e)?Ps:cn.current,c=Hl(t,c));var p=e.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||v!==c)&&ew(t,o,n,c),uo=!1,v=t.memoizedState,o.state=v,Qh(t,n,o,i);var y=t.memoizedState;s!==d||v!==y||Tn.current||uo?(typeof p=="function"&&(x0(t,e,p,n),y=t.memoizedState),(l=uo||Z2(t,e,l,n,v,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=1024),n=!1)}return T0(r,t,e,n,a,i)}function T0(r,t,e,n,i,a){Kk(r,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&q2(t,e,!1),Ia(r,t,a);n=t.stateNode,HA.current=t;var s=o&&typeof e.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,r!==null&&o?(t.child=Kl(t,r.child,null,a),t.child=Kl(t,null,s,a)):hn(r,t,s,a),t.memoizedState=n.state,i&&q2(t,e,!0),t.child}function Qk(r){var t=r.stateNode;t.pendingContext?W2(r,t.pendingContext,t.pendingContext!==t.context):t.context&&W2(r,t.context,!1),i1(r,t.containerInfo)}function sw(r,t,e,n,i){return Gl(),Xy(i),t.flags|=256,hn(r,t,e,n),t.child}var E0={dehydrated:null,treeContext:null,retryLane:0};function C0(r){return{baseLanes:r,cachePool:null,transitions:null}}function Yk(r,t,e){var n=t.pendingProps,i=ir.current,a=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=r!==null&&r.memoizedState===null?!1:(i&2)!==0),s?(a=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),Yt(ir,i&1),r===null)return w0(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,r=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Op(o,n,0,null),r=bs(r,n,e,null),a.return=t,r.return=t,a.sibling=r,t.child=a,t.child.memoizedState=C0(e),t.memoizedState=E0,r):d1(t,o));if(i=r.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return GA(r,t,o,n,s,i,e);if(a){a=n.fallback,o=t.mode,i=r.child,s=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=To(i,c),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=To(s,a):(a=bs(a,o,e,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=r.child.memoizedState,o=o===null?C0(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=r.childLanes&~e,t.memoizedState=E0,n}return a=r.child,r=a.sibling,n=To(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=e),n.return=t,n.sibling=null,r!==null&&(e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)),t.child=n,t.memoizedState=null,n}function d1(r,t){return t=Op({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function bd(r,t,e,n){return n!==null&&Xy(n),Kl(t,r.child,null,e),r=d1(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function GA(r,t,e,n,i,a,o){if(e)return t.flags&256?(t.flags&=-257,n=Lm(Error(Le(422))),bd(r,t,o,n)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Op({mode:"visible",children:n.children},i,0,null),a=bs(a,i,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Kl(t,r.child,null,o),t.child.memoizedState=C0(o),t.memoizedState=E0,a);if(!(t.mode&1))return bd(r,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(Le(419)),n=Lm(a,n,void 0),bd(r,t,o,n)}if(s=(o&r.childLanes)!==0,Pn||s){if(n=Vr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ja(r,i),Li(n,r,i,-1))}return y1(),n=Lm(Error(Le(421))),bd(r,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=r.child,t=o6.bind(null,r),i._reactRetry=t,null):(r=a.treeContext,Wn=xo(i.nextSibling),Hn=t,rr=!0,Ei=null,r!==null&&(ai[oi++]=Ca,ai[oi++]=La,ai[oi++]=Ts,Ca=r.id,La=r.overflow,Ts=t),t=d1(t,n.children),t.flags|=4096,t)}function lw(r,t,e){r.lanes|=t;var n=r.alternate;n!==null&&(n.lanes|=t),b0(r.return,t,e)}function Om(r,t,e,n,i){var a=r.memoizedState;a===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=e,a.tailMode=i)}function Jk(r,t,e){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(hn(r,t,n.children,e),n=ir.current,n&2)n=n&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&lw(r,e,t);else if(r.tag===19)lw(r,e,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Yt(ir,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(e=t.child,i=null;e!==null;)r=e.alternate,r!==null&&Yh(r)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),Om(t,!1,i,e,a);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(r=i.alternate,r!==null&&Yh(r)===null){t.child=i;break}r=i.sibling,i.sibling=e,e=i,i=r}Om(t,!0,e,null,a);break;case"together":Om(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dh(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function Ia(r,t,e){if(r!==null&&(t.dependencies=r.dependencies),Cs|=t.lanes,!(e&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(Le(153));if(t.child!==null){for(r=t.child,e=To(r,r.pendingProps),t.child=e,e.return=t;r.sibling!==null;)r=r.sibling,e=e.sibling=To(r,r.pendingProps),e.return=t;e.sibling=null}return t.child}function KA(r,t,e){switch(t.tag){case 3:Qk(t),Gl();break;case 5:Sk(t);break;case 1:En(t.type)&&Wh(t);break;case 4:i1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Yt(Gh,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Yt(ir,ir.current&1),t.flags|=128,null):e&t.child.childLanes?Yk(r,t,e):(Yt(ir,ir.current&1),r=Ia(r,t,e),r!==null?r.sibling:null);Yt(ir,ir.current&1);break;case 19:if(n=(e&t.childLanes)!==0,r.flags&128){if(n)return Jk(r,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yt(ir,ir.current),n)break;return null;case 22:case 23:return t.lanes=0,Gk(r,t,e)}return Ia(r,t,e)}var Xk,L0,Zk,e4;Xk=function(r,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)r.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};L0=function(){};Zk=function(r,t,e,n){var i=r.memoizedProps;if(i!==n){r=t.stateNode,ys(ea.current);var a=null;switch(e){case"input":i=Jg(r,i),n=Jg(r,n),a=[];break;case"select":i=sr({},i,{value:void 0}),n=sr({},n,{value:void 0}),a=[];break;case"textarea":i=e0(r,i),n=e0(r,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Vh)}r0(e,n);var o;e=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Nu.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in n){var c=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(a||(a=[]),a.push(l,e)),e=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(a=a||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Nu.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Xt("scroll",r),a||s===c||(a=[])):(a=a||[]).push(l,c))}e&&(a=a||[]).push("style",e);var l=a;(t.updateQueue=l)&&(t.flags|=4)}};e4=function(r,t,e,n){e!==n&&(t.flags|=4)};function eu(r,t){if(!rr)switch(r.tailMode){case"hidden":t=r.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?r.tail=null:e.sibling=null;break;case"collapsed":e=r.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function tn(r){var t=r.alternate!==null&&r.alternate.child===r.child,e=0,n=0;if(t)for(var i=r.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=e,t}function QA(r,t,e){var n=t.pendingProps;switch(Jy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(t),null;case 1:return En(t.type)&&zh(),tn(t),null;case 3:return n=t.stateNode,Ql(),er(Tn),er(cn),o1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(_d(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ei!==null&&(D0(Ei),Ei=null))),L0(r,t),tn(t),null;case 5:a1(t);var i=ys(Wu.current);if(e=t.type,r!==null&&t.stateNode!=null)Zk(r,t,e,n,i),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Le(166));return tn(t),null}if(r=ys(ea.current),_d(t)){n=t.stateNode,e=t.type;var a=t.memoizedProps;switch(n[Qi]=t,n[Vu]=a,r=(t.mode&1)!==0,e){case"dialog":Xt("cancel",n),Xt("close",n);break;case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(i=0;i<pu.length;i++)Xt(pu[i],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"details":Xt("toggle",n);break;case"input":g2(n,a),Xt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Xt("invalid",n);break;case"textarea":_2(n,a),Xt("invalid",n)}r0(e,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&yd(n.textContent,s,r),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&yd(n.textContent,s,r),i=["children",""+s]):Nu.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Xt("scroll",n)}switch(e){case"input":ud(n),y2(n,a,!0);break;case"textarea":ud(n),w2(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Vh)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=CS(e)),r==="http://www.w3.org/1999/xhtml"?e==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(e,{is:n.is}):(r=o.createElement(e),e==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,e),r[Qi]=t,r[Vu]=n,Xk(r,t,!1,!1),t.stateNode=r;e:{switch(o=n0(e,n),e){case"dialog":Xt("cancel",r),Xt("close",r),i=n;break;case"iframe":case"object":case"embed":Xt("load",r),i=n;break;case"video":case"audio":for(i=0;i<pu.length;i++)Xt(pu[i],r);i=n;break;case"source":Xt("error",r),i=n;break;case"img":case"image":case"link":Xt("error",r),Xt("load",r),i=n;break;case"details":Xt("toggle",r),i=n;break;case"input":g2(r,n),i=Jg(r,n),Xt("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=sr({},n,{value:void 0}),Xt("invalid",r);break;case"textarea":_2(r,n),i=e0(r,n),Xt("invalid",r);break;default:i=n}r0(e,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="style"?AS(r,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&LS(r,c)):a==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&Ru(r,c):typeof c=="number"&&Ru(r,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Nu.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Xt("scroll",r):c!=null&&My(r,a,c,o))}switch(e){case"input":ud(r),y2(r,n,!1);break;case"textarea":ud(r),w2(r);break;case"option":n.value!=null&&r.setAttribute("value",""+Lo(n.value));break;case"select":r.multiple=!!n.multiple,a=n.value,a!=null?Rl(r,!!n.multiple,a,!1):n.defaultValue!=null&&Rl(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Vh)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tn(t),null;case 6:if(r&&t.stateNode!=null)e4(r,t,r.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Le(166));if(e=ys(Wu.current),ys(ea.current),_d(t)){if(n=t.stateNode,e=t.memoizedProps,n[Qi]=t,(a=n.nodeValue!==e)&&(r=Hn,r!==null))switch(r.tag){case 3:yd(n.nodeValue,e,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&yd(n.nodeValue,e,(r.mode&1)!==0)}a&&(t.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[Qi]=t,t.stateNode=n}return tn(t),null;case 13:if(er(ir),n=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(rr&&Wn!==null&&t.mode&1&&!(t.flags&128))yk(),Gl(),t.flags|=98560,a=!1;else if(a=_d(t),n!==null&&n.dehydrated!==null){if(r===null){if(!a)throw Error(Le(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Le(317));a[Qi]=t}else Gl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tn(t),a=!1}else Ei!==null&&(D0(Ei),Ei=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(r===null||ir.current&1?Fr===0&&(Fr=3):y1())),t.updateQueue!==null&&(t.flags|=4),tn(t),null);case 4:return Ql(),L0(r,t),r===null&&Uu(t.stateNode.containerInfo),tn(t),null;case 10:return t1(t.type._context),tn(t),null;case 17:return En(t.type)&&zh(),tn(t),null;case 19:if(er(ir),a=t.memoizedState,a===null)return tn(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)eu(a,!1);else{if(Fr!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(o=Yh(r),o!==null){for(t.flags|=128,eu(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=e,e=t.child;e!==null;)a=e,r=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e=e.sibling;return Yt(ir,ir.current&1|2),t.child}r=r.sibling}a.tail!==null&&xr()>Jl&&(t.flags|=128,n=!0,eu(a,!1),t.lanes=4194304)}else{if(!n)if(r=Yh(o),r!==null){if(t.flags|=128,n=!0,e=r.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),eu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!rr)return tn(t),null}else 2*xr()-a.renderingStartTime>Jl&&e!==1073741824&&(t.flags|=128,n=!0,eu(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(e=a.last,e!==null?e.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=xr(),t.sibling=null,e=ir.current,Yt(ir,n?e&1|2:e&1),t):(tn(t),null);case 22:case 23:return g1(),n=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Vn&1073741824&&(tn(t),t.subtreeFlags&6&&(t.flags|=8192)):tn(t),null;case 24:return null;case 25:return null}throw Error(Le(156,t.tag))}function YA(r,t){switch(Jy(t),t.tag){case 1:return En(t.type)&&zh(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return Ql(),er(Tn),er(cn),o1(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return a1(t),null;case 13:if(er(ir),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(Le(340));Gl()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return er(ir),null;case 4:return Ql(),null;case 10:return t1(t.type._context),null;case 22:case 23:return g1(),null;case 24:return null;default:return null}}var xd=!1,sn=!1,JA=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Ll(r,t){var e=r.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){hr(r,t,n)}else e.current=null}function O0(r,t,e){try{e()}catch(n){hr(r,t,n)}}var cw=!1;function XA(r,t){if(h0=Bh,r=ak(),Qy(r)){if("selectionStart"in r)var e={start:r.selectionStart,end:r.selectionEnd};else e:{e=(e=r.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{e.nodeType,a.nodeType}catch{e=null;break e}var o=0,s=-1,c=-1,l=0,u=0,d=r,v=null;t:for(;;){for(var p;d!==e||i!==0&&d.nodeType!==3||(s=o+i),d!==a||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)v=d,d=p;for(;;){if(d===r)break t;if(v===e&&++l===i&&(s=o),v===a&&++u===n&&(c=o),(p=d.nextSibling)!==null)break;d=v,v=d.parentNode}d=p}e=s===-1||c===-1?null:{start:s,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(p0={focusedElem:r,selectionRange:e},Bh=!1,Me=t;Me!==null;)if(t=Me,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,Me=r;else for(;Me!==null;){t=Me;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,S=y.memoizedState,w=t.stateNode,x=w.getSnapshotBeforeUpdate(t.elementType===t.type?_:Si(t.type,_),S);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(T){hr(t,t.return,T)}if(r=t.sibling,r!==null){r.return=t.return,Me=r;break}Me=t.return}return y=cw,cw=!1,y}function Pu(r,t,e){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var a=i.destroy;i.destroy=void 0,a!==void 0&&O0(t,e,a)}i=i.next}while(i!==n)}}function Cp(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&r)===r){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}}function A0(r){var t=r.ref;if(t!==null){var e=r.stateNode;switch(r.tag){case 5:r=e;break;default:r=e}typeof t=="function"?t(r):t.current=r}}function t4(r){var t=r.alternate;t!==null&&(r.alternate=null,t4(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[Qi],delete t[Vu],delete t[g0],delete t[jA],delete t[IA])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function r4(r){return r.tag===5||r.tag===3||r.tag===4}function uw(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||r4(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function N0(r,t,e){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(r,t):e.insertBefore(r,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(r,e)):(t=e,t.appendChild(r)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Vh));else if(n!==4&&(r=r.child,r!==null))for(N0(r,t,e),r=r.sibling;r!==null;)N0(r,t,e),r=r.sibling}function R0(r,t,e){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?e.insertBefore(r,t):e.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(R0(r,t,e),r=r.sibling;r!==null;)R0(r,t,e),r=r.sibling}var Kr=null,ki=!1;function no(r,t,e){for(e=e.child;e!==null;)n4(r,t,e),e=e.sibling}function n4(r,t,e){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(wp,e)}catch{}switch(e.tag){case 5:sn||Ll(e,t);case 6:var n=Kr,i=ki;Kr=null,no(r,t,e),Kr=n,ki=i,Kr!==null&&(ki?(r=Kr,e=e.stateNode,r.nodeType===8?r.parentNode.removeChild(e):r.removeChild(e)):Kr.removeChild(e.stateNode));break;case 18:Kr!==null&&(ki?(r=Kr,e=e.stateNode,r.nodeType===8?Sm(r.parentNode,e):r.nodeType===1&&Sm(r,e),Du(r)):Sm(Kr,e.stateNode));break;case 4:n=Kr,i=ki,Kr=e.stateNode.containerInfo,ki=!0,no(r,t,e),Kr=n,ki=i;break;case 0:case 11:case 14:case 15:if(!sn&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&O0(e,t,o),i=i.next}while(i!==n)}no(r,t,e);break;case 1:if(!sn&&(Ll(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(s){hr(e,t,s)}no(r,t,e);break;case 21:no(r,t,e);break;case 22:e.mode&1?(sn=(n=sn)||e.memoizedState!==null,no(r,t,e),sn=n):no(r,t,e);break;default:no(r,t,e)}}function fw(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var e=r.stateNode;e===null&&(e=r.stateNode=new JA),t.forEach(function(n){var i=s6.bind(null,r,n);e.has(n)||(e.add(n),n.then(i,i))})}}function bi(r,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];try{var a=r,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Kr=s.stateNode,ki=!1;break e;case 3:Kr=s.stateNode.containerInfo,ki=!0;break e;case 4:Kr=s.stateNode.containerInfo,ki=!0;break e}s=s.return}if(Kr===null)throw Error(Le(160));n4(a,o,i),Kr=null,ki=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){hr(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)i4(t,r),t=t.sibling}function i4(r,t){var e=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bi(t,r),zi(r),n&4){try{Pu(3,r,r.return),Cp(3,r)}catch(_){hr(r,r.return,_)}try{Pu(5,r,r.return)}catch(_){hr(r,r.return,_)}}break;case 1:bi(t,r),zi(r),n&512&&e!==null&&Ll(e,e.return);break;case 5:if(bi(t,r),zi(r),n&512&&e!==null&&Ll(e,e.return),r.flags&32){var i=r.stateNode;try{Ru(i,"")}catch(_){hr(r,r.return,_)}}if(n&4&&(i=r.stateNode,i!=null)){var a=r.memoizedProps,o=e!==null?e.memoizedProps:a,s=r.type,c=r.updateQueue;if(r.updateQueue=null,c!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&TS(i,a),n0(s,o);var l=n0(s,a);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?AS(i,d):u==="dangerouslySetInnerHTML"?LS(i,d):u==="children"?Ru(i,d):My(i,u,d,l)}switch(s){case"input":Xg(i,a);break;case"textarea":ES(i,a);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Rl(i,!!a.multiple,p,!1):v!==!!a.multiple&&(a.defaultValue!=null?Rl(i,!!a.multiple,a.defaultValue,!0):Rl(i,!!a.multiple,a.multiple?[]:"",!1))}i[Vu]=a}catch(_){hr(r,r.return,_)}}break;case 6:if(bi(t,r),zi(r),n&4){if(r.stateNode===null)throw Error(Le(162));i=r.stateNode,a=r.memoizedProps;try{i.nodeValue=a}catch(_){hr(r,r.return,_)}}break;case 3:if(bi(t,r),zi(r),n&4&&e!==null&&e.memoizedState.isDehydrated)try{Du(t.containerInfo)}catch(_){hr(r,r.return,_)}break;case 4:bi(t,r),zi(r);break;case 13:bi(t,r),zi(r),i=r.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(v1=xr())),n&4&&fw(r);break;case 22:if(u=e!==null&&e.memoizedState!==null,r.mode&1?(sn=(l=sn)||u,bi(t,r),sn=l):bi(t,r),zi(r),n&8192){if(l=r.memoizedState!==null,(r.stateNode.isHidden=l)&&!u&&r.mode&1)for(Me=r,u=r.child;u!==null;){for(d=Me=u;Me!==null;){switch(v=Me,p=v.child,v.tag){case 0:case 11:case 14:case 15:Pu(4,v,v.return);break;case 1:Ll(v,v.return);var y=v.stateNode;if(typeof y.componentWillUnmount=="function"){n=v,e=v.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(_){hr(n,e,_)}}break;case 5:Ll(v,v.return);break;case 22:if(v.memoizedState!==null){hw(d);continue}}p!==null?(p.return=v,Me=p):hw(d)}u=u.sibling}e:for(u=null,d=r;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=OS("display",o))}catch(_){hr(r,r.return,_)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(_){hr(r,r.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===r)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bi(t,r),zi(r),n&4&&fw(r);break;case 21:break;default:bi(t,r),zi(r)}}function zi(r){var t=r.flags;if(t&2){try{e:{for(var e=r.return;e!==null;){if(r4(e)){var n=e;break e}e=e.return}throw Error(Le(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ru(i,""),n.flags&=-33);var a=uw(r);R0(r,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=uw(r);N0(r,s,o);break;default:throw Error(Le(161))}}catch(c){hr(r,r.return,c)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function ZA(r,t,e){Me=r,a4(r)}function a4(r,t,e){for(var n=(r.mode&1)!==0;Me!==null;){var i=Me,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||xd;if(!o){var s=i.alternate,c=s!==null&&s.memoizedState!==null||sn;s=xd;var l=sn;if(xd=o,(sn=c)&&!l)for(Me=i;Me!==null;)o=Me,c=o.child,o.tag===22&&o.memoizedState!==null?pw(i):c!==null?(c.return=o,Me=c):pw(i);for(;a!==null;)Me=a,a4(a),a=a.sibling;Me=i,xd=s,sn=l}dw(r)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Me=a):dw(r)}}function dw(r){for(;Me!==null;){var t=Me;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sn||Cp(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!sn)if(e===null)n.componentDidMount();else{var i=t.elementType===t.type?e.memoizedProps:Si(t.type,e.memoizedProps);n.componentDidUpdate(i,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Y2(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Y2(t,o,e)}break;case 5:var s=t.stateNode;if(e===null&&t.flags&4){e=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Du(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}sn||t.flags&512&&A0(t)}catch(v){hr(t,t.return,v)}}if(t===r){Me=null;break}if(e=t.sibling,e!==null){e.return=t.return,Me=e;break}Me=t.return}}function hw(r){for(;Me!==null;){var t=Me;if(t===r){Me=null;break}var e=t.sibling;if(e!==null){e.return=t.return,Me=e;break}Me=t.return}}function pw(r){for(;Me!==null;){var t=Me;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Cp(4,t)}catch(c){hr(t,e,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){hr(t,i,c)}}var a=t.return;try{A0(t)}catch(c){hr(t,a,c)}break;case 5:var o=t.return;try{A0(t)}catch(c){hr(t,o,c)}}}catch(c){hr(t,t.return,c)}if(t===r){Me=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Me=s;break}Me=t.return}}var e6=Math.ceil,Zh=Ma.ReactCurrentDispatcher,h1=Ma.ReactCurrentOwner,ui=Ma.ReactCurrentBatchConfig,Lt=0,Vr=null,Lr=null,Qr=0,Vn=0,Ol=Ro(0),Fr=0,Ku=null,Cs=0,Lp=0,p1=0,Tu=null,kn=null,v1=0,Jl=1/0,Pa=null,ep=!1,j0=null,ko=null,Sd=!1,vo=null,tp=0,Eu=0,I0=null,hh=-1,ph=0;function vn(){return Lt&6?xr():hh!==-1?hh:hh=xr()}function Po(r){return r.mode&1?Lt&2&&Qr!==0?Qr&-Qr:DA.transition!==null?(ph===0&&(ph=zS()),ph):(r=$t,r!==0||(r=window.event,r=r===void 0?16:YS(r.type)),r):1}function Li(r,t,e,n){if(50<Eu)throw Eu=0,I0=null,Error(Le(185));of(r,e,n),(!(Lt&2)||r!==Vr)&&(r===Vr&&(!(Lt&2)&&(Lp|=e),Fr===4&&ho(r,Qr)),Cn(r,n),e===1&&Lt===0&&!(t.mode&1)&&(Jl=xr()+500,Pp&&jo()))}function Cn(r,t){var e=r.callbackNode;DO(r,t);var n=Fh(r,r===Vr?Qr:0);if(n===0)e!==null&&S2(e),r.callbackNode=null,r.callbackPriority=0;else if(t=n&-n,r.callbackPriority!==t){if(e!=null&&S2(e),t===1)r.tag===0?MA(vw.bind(null,r)):vk(vw.bind(null,r)),NA(function(){!(Lt&6)&&jo()}),e=null;else{switch(WS(n)){case 1:e=$y;break;case 4:e=$S;break;case 16:e=Dh;break;case 536870912:e=VS;break;default:e=Dh}e=h4(e,o4.bind(null,r))}r.callbackPriority=t,r.callbackNode=e}}function o4(r,t){if(hh=-1,ph=0,Lt&6)throw Error(Le(327));var e=r.callbackNode;if(Fl()&&r.callbackNode!==e)return null;var n=Fh(r,r===Vr?Qr:0);if(n===0)return null;if(n&30||n&r.expiredLanes||t)t=rp(r,n);else{t=n;var i=Lt;Lt|=2;var a=l4();(Vr!==r||Qr!==t)&&(Pa=null,Jl=xr()+500,ws(r,t));do try{n6();break}catch(s){s4(r,s)}while(!0);e1(),Zh.current=a,Lt=i,Lr!==null?t=0:(Vr=null,Qr=0,t=Fr)}if(t!==0){if(t===2&&(i=l0(r),i!==0&&(n=i,t=M0(r,i))),t===1)throw e=Ku,ws(r,0),ho(r,n),Cn(r,xr()),e;if(t===6)ho(r,n);else{if(i=r.current.alternate,!(n&30)&&!t6(i)&&(t=rp(r,n),t===2&&(a=l0(r),a!==0&&(n=a,t=M0(r,a))),t===1))throw e=Ku,ws(r,0),ho(r,n),Cn(r,xr()),e;switch(r.finishedWork=i,r.finishedLanes=n,t){case 0:case 1:throw Error(Le(345));case 2:fs(r,kn,Pa);break;case 3:if(ho(r,n),(n&130023424)===n&&(t=v1+500-xr(),10<t)){if(Fh(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){vn(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=m0(fs.bind(null,r,kn,Pa),t);break}fs(r,kn,Pa);break;case 4:if(ho(r,n),(n&4194240)===n)break;for(t=r.eventTimes,i=-1;0<n;){var o=31-Ci(n);a=1<<o,o=t[o],o>i&&(i=o),n&=~a}if(n=i,n=xr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*e6(n/1960))-n,10<n){r.timeoutHandle=m0(fs.bind(null,r,kn,Pa),n);break}fs(r,kn,Pa);break;case 5:fs(r,kn,Pa);break;default:throw Error(Le(329))}}}return Cn(r,xr()),r.callbackNode===e?o4.bind(null,r):null}function M0(r,t){var e=Tu;return r.current.memoizedState.isDehydrated&&(ws(r,t).flags|=256),r=rp(r,t),r!==2&&(t=kn,kn=e,t!==null&&D0(t)),r}function D0(r){kn===null?kn=r:kn.push.apply(kn,r)}function t6(r){for(var t=r;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var i=e[n],a=i.getSnapshot;i=i.value;try{if(!Oi(a(),i))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ho(r,t){for(t&=~p1,t&=~Lp,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var e=31-Ci(t),n=1<<e;r[e]=-1,t&=~n}}function vw(r){if(Lt&6)throw Error(Le(327));Fl();var t=Fh(r,0);if(!(t&1))return Cn(r,xr()),null;var e=rp(r,t);if(r.tag!==0&&e===2){var n=l0(r);n!==0&&(t=n,e=M0(r,n))}if(e===1)throw e=Ku,ws(r,0),ho(r,t),Cn(r,xr()),e;if(e===6)throw Error(Le(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,fs(r,kn,Pa),Cn(r,xr()),null}function m1(r,t){var e=Lt;Lt|=1;try{return r(t)}finally{Lt=e,Lt===0&&(Jl=xr()+500,Pp&&jo())}}function Ls(r){vo!==null&&vo.tag===0&&!(Lt&6)&&Fl();var t=Lt;Lt|=1;var e=ui.transition,n=$t;try{if(ui.transition=null,$t=1,r)return r()}finally{$t=n,ui.transition=e,Lt=t,!(Lt&6)&&jo()}}function g1(){Vn=Ol.current,er(Ol)}function ws(r,t){r.finishedWork=null,r.finishedLanes=0;var e=r.timeoutHandle;if(e!==-1&&(r.timeoutHandle=-1,AA(e)),Lr!==null)for(e=Lr.return;e!==null;){var n=e;switch(Jy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&zh();break;case 3:Ql(),er(Tn),er(cn),o1();break;case 5:a1(n);break;case 4:Ql();break;case 13:er(ir);break;case 19:er(ir);break;case 10:t1(n.type._context);break;case 22:case 23:g1()}e=e.return}if(Vr=r,Lr=r=To(r.current,null),Qr=Vn=t,Fr=0,Ku=null,p1=Lp=Cs=0,kn=Tu=null,gs!==null){for(t=0;t<gs.length;t++)if(e=gs[t],n=e.interleaved,n!==null){e.interleaved=null;var i=n.next,a=e.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}e.pending=n}gs=null}return r}function s4(r,t){do{var e=Lr;try{if(e1(),uh.current=Xh,Jh){for(var n=or.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Jh=!1}if(Es=0,Ur=Dr=or=null,ku=!1,qu=0,h1.current=null,e===null||e.return===null){Fr=1,Ku=t,Lr=null;break}e:{var a=r,o=e.return,s=e,c=t;if(t=Qr,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var v=u.alternate;v?(u.updateQueue=v.updateQueue,u.memoizedState=v.memoizedState,u.lanes=v.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=rw(o);if(p!==null){p.flags&=-257,nw(p,o,s,a,t),p.mode&1&&tw(a,l,t),t=p,c=l;var y=t.updateQueue;if(y===null){var _=new Set;_.add(c),t.updateQueue=_}else y.add(c);break e}else{if(!(t&1)){tw(a,l,t),y1();break e}c=Error(Le(426))}}else if(rr&&s.mode&1){var S=rw(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),nw(S,o,s,a,t),Xy(Yl(c,s));break e}}a=c=Yl(c,s),Fr!==4&&(Fr=2),Tu===null?Tu=[a]:Tu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=Wk(a,c,t);Q2(a,w);break e;case 1:s=c;var x=a.type,k=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(ko===null||!ko.has(k)))){a.flags|=65536,t&=-t,a.lanes|=t;var T=qk(a,s,t);Q2(a,T);break e}}a=a.return}while(a!==null)}u4(e)}catch(R){t=R,Lr===e&&e!==null&&(Lr=e=e.return);continue}break}while(!0)}function l4(){var r=Zh.current;return Zh.current=Xh,r===null?Xh:r}function y1(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Vr===null||!(Cs&268435455)&&!(Lp&268435455)||ho(Vr,Qr)}function rp(r,t){var e=Lt;Lt|=2;var n=l4();(Vr!==r||Qr!==t)&&(Pa=null,ws(r,t));do try{r6();break}catch(i){s4(r,i)}while(!0);if(e1(),Lt=e,Zh.current=n,Lr!==null)throw Error(Le(261));return Vr=null,Qr=0,Fr}function r6(){for(;Lr!==null;)c4(Lr)}function n6(){for(;Lr!==null&&!CO();)c4(Lr)}function c4(r){var t=d4(r.alternate,r,Vn);r.memoizedProps=r.pendingProps,t===null?u4(r):Lr=t,h1.current=null}function u4(r){var t=r;do{var e=t.alternate;if(r=t.return,t.flags&32768){if(e=YA(e,t),e!==null){e.flags&=32767,Lr=e;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Fr=6,Lr=null;return}}else if(e=QA(e,t,Vn),e!==null){Lr=e;return}if(t=t.sibling,t!==null){Lr=t;return}Lr=t=r}while(t!==null);Fr===0&&(Fr=5)}function fs(r,t,e){var n=$t,i=ui.transition;try{ui.transition=null,$t=1,i6(r,t,e,n)}finally{ui.transition=i,$t=n}return null}function i6(r,t,e,n){do Fl();while(vo!==null);if(Lt&6)throw Error(Le(327));e=r.finishedWork;var i=r.finishedLanes;if(e===null)return null;if(r.finishedWork=null,r.finishedLanes=0,e===r.current)throw Error(Le(177));r.callbackNode=null,r.callbackPriority=0;var a=e.lanes|e.childLanes;if(FO(r,a),r===Vr&&(Lr=Vr=null,Qr=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Sd||(Sd=!0,h4(Dh,function(){return Fl(),null})),a=(e.flags&15990)!==0,e.subtreeFlags&15990||a){a=ui.transition,ui.transition=null;var o=$t;$t=1;var s=Lt;Lt|=4,h1.current=null,XA(r,e),i4(e,r),kA(p0),Bh=!!h0,p0=h0=null,r.current=e,ZA(e),LO(),Lt=s,$t=o,ui.transition=a}else r.current=e;if(Sd&&(Sd=!1,vo=r,tp=i),a=r.pendingLanes,a===0&&(ko=null),NO(e.stateNode),Cn(r,xr()),t!==null)for(n=r.onRecoverableError,e=0;e<t.length;e++)i=t[e],n(i.value,{componentStack:i.stack,digest:i.digest});if(ep)throw ep=!1,r=j0,j0=null,r;return tp&1&&r.tag!==0&&Fl(),a=r.pendingLanes,a&1?r===I0?Eu++:(Eu=0,I0=r):Eu=0,jo(),null}function Fl(){if(vo!==null){var r=WS(tp),t=ui.transition,e=$t;try{if(ui.transition=null,$t=16>r?16:r,vo===null)var n=!1;else{if(r=vo,vo=null,tp=0,Lt&6)throw Error(Le(331));var i=Lt;for(Lt|=4,Me=r.current;Me!==null;){var a=Me,o=a.child;if(Me.flags&16){var s=a.deletions;if(s!==null){for(var c=0;c<s.length;c++){var l=s[c];for(Me=l;Me!==null;){var u=Me;switch(u.tag){case 0:case 11:case 15:Pu(8,u,a)}var d=u.child;if(d!==null)d.return=u,Me=d;else for(;Me!==null;){u=Me;var v=u.sibling,p=u.return;if(t4(u),u===l){Me=null;break}if(v!==null){v.return=p,Me=v;break}Me=p}}}var y=a.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}Me=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Me=o;else e:for(;Me!==null;){if(a=Me,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Pu(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Me=w;break e}Me=a.return}}var x=r.current;for(Me=x;Me!==null;){o=Me;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,Me=k;else e:for(o=x;Me!==null;){if(s=Me,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Cp(9,s)}}catch(R){hr(s,s.return,R)}if(s===o){Me=null;break e}var T=s.sibling;if(T!==null){T.return=s.return,Me=T;break e}Me=s.return}}if(Lt=i,jo(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(wp,r)}catch{}n=!0}return n}finally{$t=e,ui.transition=t}}return!1}function mw(r,t,e){t=Yl(e,t),t=Wk(r,t,1),r=So(r,t,1),t=vn(),r!==null&&(of(r,1,t),Cn(r,t))}function hr(r,t,e){if(r.tag===3)mw(r,r,e);else for(;t!==null;){if(t.tag===3){mw(t,r,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ko===null||!ko.has(n))){r=Yl(e,r),r=qk(t,r,1),t=So(t,r,1),r=vn(),t!==null&&(of(t,1,r),Cn(t,r));break}}t=t.return}}function a6(r,t,e){var n=r.pingCache;n!==null&&n.delete(t),t=vn(),r.pingedLanes|=r.suspendedLanes&e,Vr===r&&(Qr&e)===e&&(Fr===4||Fr===3&&(Qr&130023424)===Qr&&500>xr()-v1?ws(r,0):p1|=e),Cn(r,t)}function f4(r,t){t===0&&(r.mode&1?(t=hd,hd<<=1,!(hd&130023424)&&(hd=4194304)):t=1);var e=vn();r=ja(r,t),r!==null&&(of(r,t,e),Cn(r,e))}function o6(r){var t=r.memoizedState,e=0;t!==null&&(e=t.retryLane),f4(r,e)}function s6(r,t){var e=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(e=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Le(314))}n!==null&&n.delete(t),f4(r,e)}var d4;d4=function(r,t,e){if(r!==null)if(r.memoizedProps!==t.pendingProps||Tn.current)Pn=!0;else{if(!(r.lanes&e)&&!(t.flags&128))return Pn=!1,KA(r,t,e);Pn=!!(r.flags&131072)}else Pn=!1,rr&&t.flags&1048576&&mk(t,Hh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;dh(r,t),r=t.pendingProps;var i=Hl(t,cn.current);Dl(t,e),i=l1(null,t,n,r,i,e);var a=c1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,En(n)?(a=!0,Wh(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,n1(t),i.updater=Ep,t.stateNode=i,i._reactInternals=t,S0(t,n,r,e),t=T0(null,t,n,!0,a,e)):(t.tag=0,rr&&a&&Yy(t),hn(null,t,i,e),t=t.child),t;case 16:n=t.elementType;e:{switch(dh(r,t),r=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=c6(n),r=Si(n,r),i){case 0:t=P0(null,t,n,r,e);break e;case 1:t=ow(null,t,n,r,e);break e;case 11:t=iw(null,t,n,r,e);break e;case 14:t=aw(null,t,n,Si(n.type,r),e);break e}throw Error(Le(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Si(n,i),P0(r,t,n,i,e);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Si(n,i),ow(r,t,n,i,e);case 3:e:{if(Qk(t),r===null)throw Error(Le(387));n=t.pendingProps,a=t.memoizedState,i=a.element,xk(r,t),Qh(t,n,null,e);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Yl(Error(Le(423)),t),t=sw(r,t,n,e,i);break e}else if(n!==i){i=Yl(Error(Le(424)),t),t=sw(r,t,n,e,i);break e}else for(Wn=xo(t.stateNode.containerInfo.firstChild),Hn=t,rr=!0,Ei=null,e=wk(t,null,n,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Gl(),n===i){t=Ia(r,t,e);break e}hn(r,t,n,e)}t=t.child}return t;case 5:return Sk(t),r===null&&w0(t),n=t.type,i=t.pendingProps,a=r!==null?r.memoizedProps:null,o=i.children,v0(n,i)?o=null:a!==null&&v0(n,a)&&(t.flags|=32),Kk(r,t),hn(r,t,o,e),t.child;case 6:return r===null&&w0(t),null;case 13:return Yk(r,t,e);case 4:return i1(t,t.stateNode.containerInfo),n=t.pendingProps,r===null?t.child=Kl(t,null,n,e):hn(r,t,n,e),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Si(n,i),iw(r,t,n,i,e);case 7:return hn(r,t,t.pendingProps,e),t.child;case 8:return hn(r,t,t.pendingProps.children,e),t.child;case 12:return hn(r,t,t.pendingProps.children,e),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Yt(Gh,n._currentValue),n._currentValue=o,a!==null)if(Oi(a.value,o)){if(a.children===i.children&&!Tn.current){t=Ia(r,t,e);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var c=s.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Aa(-1,e&-e),c.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}a.lanes|=e,c=a.alternate,c!==null&&(c.lanes|=e),b0(a.return,e,t),s.lanes|=e;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Le(341));o.lanes|=e,s=o.alternate,s!==null&&(s.lanes|=e),b0(o,e,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}hn(r,t,i.children,e),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Dl(t,e),i=fi(i),n=n(i),t.flags|=1,hn(r,t,n,e),t.child;case 14:return n=t.type,i=Si(n,t.pendingProps),i=Si(n.type,i),aw(r,t,n,i,e);case 15:return Hk(r,t,t.type,t.pendingProps,e);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Si(n,i),dh(r,t),t.tag=1,En(n)?(r=!0,Wh(t)):r=!1,Dl(t,e),zk(t,n,i),S0(t,n,i,e),T0(null,t,n,!0,r,e);case 19:return Jk(r,t,e);case 22:return Gk(r,t,e)}throw Error(Le(156,t.tag))};function h4(r,t){return US(r,t)}function l6(r,t,e,n){this.tag=r,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(r,t,e,n){return new l6(r,t,e,n)}function _1(r){return r=r.prototype,!(!r||!r.isReactComponent)}function c6(r){if(typeof r=="function")return _1(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Fy)return 11;if(r===By)return 14}return 2}function To(r,t){var e=r.alternate;return e===null?(e=li(r.tag,t,r.key,r.mode),e.elementType=r.elementType,e.type=r.type,e.stateNode=r.stateNode,e.alternate=r,r.alternate=e):(e.pendingProps=t,e.type=r.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=r.flags&14680064,e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=r.sibling,e.index=r.index,e.ref=r.ref,e}function vh(r,t,e,n,i,a){var o=2;if(n=r,typeof r=="function")_1(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case wl:return bs(e.children,i,a,t);case Dy:o=8,i|=8;break;case Gg:return r=li(12,e,t,i|2),r.elementType=Gg,r.lanes=a,r;case Kg:return r=li(13,e,t,i),r.elementType=Kg,r.lanes=a,r;case Qg:return r=li(19,e,t,i),r.elementType=Qg,r.lanes=a,r;case SS:return Op(e,i,a,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case bS:o=10;break e;case xS:o=9;break e;case Fy:o=11;break e;case By:o=14;break e;case co:o=16,n=null;break e}throw Error(Le(130,r==null?r:typeof r,""))}return t=li(o,e,t,i),t.elementType=r,t.type=n,t.lanes=a,t}function bs(r,t,e,n){return r=li(7,r,n,t),r.lanes=e,r}function Op(r,t,e,n){return r=li(22,r,n,t),r.elementType=SS,r.lanes=e,r.stateNode={isHidden:!1},r}function Am(r,t,e){return r=li(6,r,null,t),r.lanes=e,r}function Nm(r,t,e){return t=li(4,r.children!==null?r.children:[],r.key,t),t.lanes=e,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function u6(r,t,e,n,i){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dm(0),this.expirationTimes=dm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dm(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function w1(r,t,e,n,i,a,o,s,c){return r=new u6(r,t,e,s,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=li(3,null,null,t),r.current=a,a.stateNode=r,a.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},n1(a),r}function f6(r,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_l,key:n==null?null:""+n,children:r,containerInfo:t,implementation:e}}function p4(r){if(!r)return Oo;r=r._reactInternals;e:{if(Is(r)!==r||r.tag!==1)throw Error(Le(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(En(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Le(171))}if(r.tag===1){var e=r.type;if(En(e))return pk(r,e,t)}return t}function v4(r,t,e,n,i,a,o,s,c){return r=w1(e,n,!0,r,i,a,o,s,c),r.context=p4(null),e=r.current,n=vn(),i=Po(e),a=Aa(n,i),a.callback=t??null,So(e,a,i),r.current.lanes=i,of(r,i,n),Cn(r,n),r}function Ap(r,t,e,n){var i=t.current,a=vn(),o=Po(i);return e=p4(e),t.context===null?t.context=e:t.pendingContext=e,t=Aa(a,o),t.payload={element:r},n=n===void 0?null:n,n!==null&&(t.callback=n),r=So(i,t,o),r!==null&&(Li(r,i,o,a),ch(r,i,o)),o}function np(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function gw(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var e=r.retryLane;r.retryLane=e!==0&&e<t?e:t}}function b1(r,t){gw(r,t),(r=r.alternate)&&gw(r,t)}function d6(){return null}var m4=typeof reportError=="function"?reportError:function(r){console.error(r)};function x1(r){this._internalRoot=r}Np.prototype.render=x1.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(Le(409));Ap(r,t,null,null)};Np.prototype.unmount=x1.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;Ls(function(){Ap(null,r,null,null)}),t[Ra]=null}};function Np(r){this._internalRoot=r}Np.prototype.unstable_scheduleHydration=function(r){if(r){var t=GS();r={blockedOn:null,target:r,priority:t};for(var e=0;e<fo.length&&t!==0&&t<fo[e].priority;e++);fo.splice(e,0,r),e===0&&QS(r)}};function S1(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Rp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function yw(){}function h6(r,t,e,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var l=np(o);a.call(l)}}var o=v4(t,n,r,0,null,!1,!1,"",yw);return r._reactRootContainer=o,r[Ra]=o.current,Uu(r.nodeType===8?r.parentNode:r),Ls(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var l=np(c);s.call(l)}}var c=w1(r,0,!1,null,null,!1,!1,"",yw);return r._reactRootContainer=c,r[Ra]=c.current,Uu(r.nodeType===8?r.parentNode:r),Ls(function(){Ap(t,c,e,n)}),c}function jp(r,t,e,n,i){var a=e._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var c=np(o);s.call(c)}}Ap(t,o,r,i)}else o=h6(e,t,r,i,n);return np(o)}qS=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var e=hu(t.pendingLanes);e!==0&&(Vy(t,e|1),Cn(t,xr()),!(Lt&6)&&(Jl=xr()+500,jo()))}break;case 13:Ls(function(){var n=ja(r,1);if(n!==null){var i=vn();Li(n,r,1,i)}}),b1(r,1)}};zy=function(r){if(r.tag===13){var t=ja(r,134217728);if(t!==null){var e=vn();Li(t,r,134217728,e)}b1(r,134217728)}};HS=function(r){if(r.tag===13){var t=Po(r),e=ja(r,t);if(e!==null){var n=vn();Li(e,r,t,n)}b1(r,t)}};GS=function(){return $t};KS=function(r,t){var e=$t;try{return $t=r,t()}finally{$t=e}};a0=function(r,t,e){switch(t){case"input":if(Xg(r,e),t=e.name,e.type==="radio"&&t!=null){for(e=r;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==r&&n.form===r.form){var i=kp(n);if(!i)throw Error(Le(90));PS(n),Xg(n,i)}}}break;case"textarea":ES(r,e);break;case"select":t=e.value,t!=null&&Rl(r,!!e.multiple,t,!1)}};jS=m1;IS=Ls;var p6={usingClientEntryPoint:!1,Events:[lf,kl,kp,NS,RS,m1]},tu={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v6={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ma.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=FS(r),r===null?null:r.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||d6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{wp=kd.inject(v6),Zi=kd}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p6;Kn.createPortal=function(r,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S1(t))throw Error(Le(200));return f6(r,t,null,e)};Kn.createRoot=function(r,t){if(!S1(r))throw Error(Le(299));var e=!1,n="",i=m4;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=w1(r,1,!1,null,null,e,!1,n,i),r[Ra]=t.current,Uu(r.nodeType===8?r.parentNode:r),new x1(t)};Kn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(Le(188)):(r=Object.keys(r).join(","),Error(Le(268,r)));return r=FS(t),r=r===null?null:r.stateNode,r};Kn.flushSync=function(r){return Ls(r)};Kn.hydrate=function(r,t,e){if(!Rp(t))throw Error(Le(200));return jp(null,r,t,!0,e)};Kn.hydrateRoot=function(r,t,e){if(!S1(r))throw Error(Le(405));var n=e!=null&&e.hydratedSources||null,i=!1,a="",o=m4;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=v4(t,null,r,1,e??null,i,!1,a,o),r[Ra]=t.current,Uu(r),n)for(r=0;r<n.length;r++)e=n[r],i=e._getVersion,i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i);return new Np(t)};Kn.render=function(r,t,e){if(!Rp(t))throw Error(Le(200));return jp(null,r,t,!1,e)};Kn.unmountComponentAtNode=function(r){if(!Rp(r))throw Error(Le(40));return r._reactRootContainer?(Ls(function(){jp(null,null,r,!1,function(){r._reactRootContainer=null,r[Ra]=null})}),!0):!1};Kn.unstable_batchedUpdates=m1;Kn.unstable_renderSubtreeIntoContainer=function(r,t,e,n){if(!Rp(e))throw Error(Le(200));if(r==null||r._reactInternals===void 0)throw Error(Le(38));return jp(r,t,e,!1,n)};Kn.version="18.3.1-next-f1338f8080-20240426";function g4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g4)}catch(r){console.error(r)}}g4(),gS.exports=Kn;var m6=gS.exports,_w=m6;qg.createRoot=_w.createRoot,qg.hydrateRoot=_w.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qu(){return Qu=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Qu.apply(this,arguments)}var mo;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(mo||(mo={}));const ww="popstate";function g6(r){r===void 0&&(r={});function t(n,i){let{pathname:a,search:o,hash:s}=n.location;return F0("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(n,i){return typeof i=="string"?i:ip(i)}return _6(t,e,null,r)}function Ar(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function y4(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function y6(){return Math.random().toString(36).substr(2,8)}function bw(r,t){return{usr:r.state,key:r.key,idx:t}}function F0(r,t,e,n){return e===void 0&&(e=null),Qu({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?sc(t):t,{state:e,key:t&&t.key||n||y6()})}function ip(r){let{pathname:t="/",search:e="",hash:n=""}=r;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sc(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substr(e),r=r.substr(0,e));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function _6(r,t,e,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s=mo.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Qu({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){s=mo.Pop;let S=u(),w=S==null?null:S-l;l=S,c&&c({action:s,location:_.location,delta:w})}function v(S,w){s=mo.Push;let x=F0(_.location,S,w);l=u()+1;let k=bw(x,l),T=_.createHref(x);try{o.pushState(k,"",T)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(T)}a&&c&&c({action:s,location:_.location,delta:1})}function p(S,w){s=mo.Replace;let x=F0(_.location,S,w);l=u();let k=bw(x,l),T=_.createHref(x);o.replaceState(k,"",T),a&&c&&c({action:s,location:_.location,delta:0})}function y(S){let w=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof S=="string"?S:ip(S);return x=x.replace(/ $/,"%20"),Ar(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let _={get action(){return s},get location(){return r(i,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ww,d),c=S,()=>{i.removeEventListener(ww,d),c=null}},createHref(S){return t(i,S)},createURL:y,encodeLocation(S){let w=y(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:p,go(S){return o.go(S)}};return _}var xw;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(xw||(xw={}));function w6(r,t,e){return e===void 0&&(e="/"),b6(r,t,e)}function b6(r,t,e,n){let i=typeof t=="string"?sc(t):t,a=k1(i.pathname||"/",e);if(a==null)return null;let o=_4(r);x6(o);let s=null;for(let c=0;s==null&&c<o.length;++c){let l=j6(a);s=A6(o[c],l)}return s}function _4(r,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let i=(a,o,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Ar(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let l=Eo([n,c.relativePath]),u=e.concat(c);a.children&&a.children.length>0&&(Ar(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),_4(a.children,t,u,l)),!(a.path==null&&!a.index)&&t.push({path:l,score:L6(l,a.index),routesMeta:u})};return r.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let c of w4(a.path))i(a,o,c)}),t}function w4(r){let t=r.split("/");if(t.length===0)return[];let[e,...n]=t,i=e.endsWith("?"),a=e.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=w4(n.join("/")),s=[];return s.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&s.push(...o),s.map(c=>r.startsWith("/")&&c===""?"/":c)}function x6(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:O6(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const S6=/^:[\w-]+$/,k6=3,P6=2,T6=1,E6=10,C6=-2,Sw=r=>r==="*";function L6(r,t){let e=r.split("/"),n=e.length;return e.some(Sw)&&(n+=C6),t&&(n+=P6),e.filter(i=>!Sw(i)).reduce((i,a)=>i+(S6.test(a)?k6:a===""?T6:E6),n)}function O6(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function A6(r,t,e){let{routesMeta:n}=r,i={},a="/",o=[];for(let s=0;s<n.length;++s){let c=n[s],l=s===n.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=N6({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),v=c.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Eo([a,d.pathname]),pathnameBase:F6(Eo([a,d.pathnameBase])),route:v}),d.pathnameBase!=="/"&&(a=Eo([a,d.pathnameBase]))}return o}function N6(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,n]=R6(r.path,r.caseSensitive,r.end),i=t.match(e);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((l,u,d)=>{let{paramName:v,isOptional:p}=u;if(v==="*"){let _=s[d]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const y=s[d];return p&&!y?l[v]=void 0:l[v]=(y||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:o,pattern:r}}function R6(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),y4(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,c)=>(n.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function j6(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return y4(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function k1(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=r.charAt(e);return n&&n!=="/"?null:r.slice(e)||"/"}function I6(r,t){t===void 0&&(t="/");let{pathname:e,search:n="",hash:i=""}=typeof r=="string"?sc(r):r;return{pathname:e?e.startsWith("/")?e:M6(e,t):t,search:B6(n),hash:U6(i)}}function M6(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function Rm(r,t,e,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function D6(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function b4(r,t){let e=D6(r);return t?e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):e.map(n=>n.pathnameBase)}function x4(r,t,e,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=sc(r):(i=Qu({},r),Ar(!i.pathname||!i.pathname.includes("?"),Rm("?","pathname","search",i)),Ar(!i.pathname||!i.pathname.includes("#"),Rm("#","pathname","hash",i)),Ar(!i.search||!i.search.includes("#"),Rm("#","search","hash",i)));let a=r===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=e;else{let d=t.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),d-=1;i.pathname=v.join("/")}s=d>=0?t[d]:"/"}let c=I6(i,s),l=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Eo=r=>r.join("/").replace(/\/\/+/g,"/"),F6=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),B6=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,U6=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function $6(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const S4=["post","put","patch","delete"];new Set(S4);const V6=["get",...S4];new Set(V6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yu(){return Yu=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Yu.apply(this,arguments)}const P1=he.createContext(null),z6=he.createContext(null),Ms=he.createContext(null),Ip=he.createContext(null),Io=he.createContext({outlet:null,matches:[],isDataRoute:!1}),k4=he.createContext(null);function W6(r,t){let{relative:e}=t===void 0?{}:t;uf()||Ar(!1);let{basename:n,navigator:i}=he.useContext(Ms),{hash:a,pathname:o,search:s}=C4(r,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:Eo([n,o])),i.createHref({pathname:c,search:s,hash:a})}function uf(){return he.useContext(Ip)!=null}function ff(){return uf()||Ar(!1),he.useContext(Ip).location}function P4(r){he.useContext(Ms).static||he.useLayoutEffect(r)}function T4(){let{isDataRoute:r}=he.useContext(Io);return r?nN():q6()}function q6(){uf()||Ar(!1);let r=he.useContext(P1),{basename:t,future:e,navigator:n}=he.useContext(Ms),{matches:i}=he.useContext(Io),{pathname:a}=ff(),o=JSON.stringify(b4(i,e.v7_relativeSplatPath)),s=he.useRef(!1);return P4(()=>{s.current=!0}),he.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){n.go(l);return}let d=x4(l,JSON.parse(o),a,u.relative==="path");r==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Eo([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,o,a,r])}function E4(){let{matches:r}=he.useContext(Io),t=r[r.length-1];return t?t.params:{}}function C4(r,t){let{relative:e}=t===void 0?{}:t,{future:n}=he.useContext(Ms),{matches:i}=he.useContext(Io),{pathname:a}=ff(),o=JSON.stringify(b4(i,n.v7_relativeSplatPath));return he.useMemo(()=>x4(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function H6(r,t){return G6(r,t)}function G6(r,t,e,n){uf()||Ar(!1);let{navigator:i}=he.useContext(Ms),{matches:a}=he.useContext(Io),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=ff(),u;if(t){var d;let S=typeof t=="string"?sc(t):t;c==="/"||(d=S.pathname)!=null&&d.startsWith(c)||Ar(!1),u=S}else u=l;let v=u.pathname||"/",p=v;if(c!=="/"){let S=c.replace(/^\//,"").split("/");p="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=w6(r,{pathname:p}),_=X6(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},s,S.params),pathname:Eo([c,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Eo([c,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,e,n);return t&&_?he.createElement(Ip.Provider,{value:{location:Yu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:mo.Pop}},_):_}function K6(){let r=rN(),t=$6(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},t),e?he.createElement("pre",{style:i},e):null,null)}const Q6=he.createElement(K6,null);class Y6 extends he.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?he.createElement(Io.Provider,{value:this.props.routeContext},he.createElement(k4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J6(r){let{routeContext:t,match:e,children:n}=r,i=he.useContext(P1);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),he.createElement(Io.Provider,{value:t},n)}function X6(r,t,e,n){var i;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),r==null){var a;if(!e)return null;if(e.errors)r=e.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let o=r,s=(i=e)==null?void 0:i.errors;if(s!=null){let u=o.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||Ar(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(e&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:v,errors:p}=e,y=d.route.loader&&v[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,v)=>{let p,y=!1,_=null,S=null;e&&(p=s&&d.route.id?s[d.route.id]:void 0,_=d.route.errorElement||Q6,c&&(l<0&&v===0?(iN("route-fallback"),y=!0,S=null):l===v&&(y=!0,S=d.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,v+1)),x=()=>{let k;return p?k=_:y?k=S:d.route.Component?k=he.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=u,he.createElement(J6,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:e!=null},children:k})};return e&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?he.createElement(Y6,{location:e.location,revalidation:e.revalidation,component:_,error:p,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var L4=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(L4||{}),O4=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(O4||{});function Z6(r){let t=he.useContext(P1);return t||Ar(!1),t}function eN(r){let t=he.useContext(z6);return t||Ar(!1),t}function tN(r){let t=he.useContext(Io);return t||Ar(!1),t}function A4(r){let t=tN(),e=t.matches[t.matches.length-1];return e.route.id||Ar(!1),e.route.id}function rN(){var r;let t=he.useContext(k4),e=eN(),n=A4();return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function nN(){let{router:r}=Z6(L4.UseNavigateStable),t=A4(O4.UseNavigateStable),e=he.useRef(!1);return P4(()=>{e.current=!0}),he.useCallback(function(i,a){a===void 0&&(a={}),e.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,Yu({fromRouteId:t},a)))},[r,t])}const kw={};function iN(r,t,e){kw[r]||(kw[r]=!0)}function aN(r,t){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function dl(r){Ar(!1)}function oN(r){let{basename:t="/",children:e=null,location:n,navigationType:i=mo.Pop,navigator:a,static:o=!1,future:s}=r;uf()&&Ar(!1);let c=t.replace(/^\/*/,"/"),l=he.useMemo(()=>({basename:c,navigator:a,static:o,future:Yu({v7_relativeSplatPath:!1},s)}),[c,s,a,o]);typeof n=="string"&&(n=sc(n));let{pathname:u="/",search:d="",hash:v="",state:p=null,key:y="default"}=n,_=he.useMemo(()=>{let S=k1(u,c);return S==null?null:{location:{pathname:S,search:d,hash:v,state:p,key:y},navigationType:i}},[c,u,d,v,p,y,i]);return _==null?null:he.createElement(Ms.Provider,{value:l},he.createElement(Ip.Provider,{children:e,value:_}))}function sN(r){let{children:t,location:e}=r;return H6(B0(t),e)}new Promise(()=>{});function B0(r,t){t===void 0&&(t=[]);let e=[];return he.Children.forEach(r,(n,i)=>{if(!he.isValidElement(n))return;let a=[...t,i];if(n.type===he.Fragment){e.push.apply(e,B0(n.props.children,a));return}n.type!==dl&&Ar(!1),!n.props.index||!n.props.children||Ar(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=B0(n.props.children,a)),e.push(o)}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function U0(){return U0=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},U0.apply(this,arguments)}function lN(r,t){if(r==null)return{};var e={},n=Object.keys(r),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}function cN(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function uN(r,t){return r.button===0&&(!t||t==="_self")&&!cN(r)}function $0(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,e)=>{let n=r[e];return t.concat(Array.isArray(n)?n.map(i=>[e,i]):[[e,n]])},[]))}function fN(r,t){let e=$0(r);return t&&t.forEach((n,i)=>{e.has(i)||t.getAll(i).forEach(a=>{e.append(i,a)})}),e}const dN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hN="6";try{window.__reactRouterVersion=hN}catch{}const pN="startTransition",Pw=aO[pN];function vN(r){let{basename:t,children:e,future:n,window:i}=r,a=he.useRef();a.current==null&&(a.current=g6({window:i,v5Compat:!0}));let o=a.current,[s,c]=he.useState({action:o.action,location:o.location}),{v7_startTransition:l}=n||{},u=he.useCallback(d=>{l&&Pw?Pw(()=>c(d)):c(d)},[c,l]);return he.useLayoutEffect(()=>o.listen(u),[o,u]),he.useEffect(()=>aN(n),[n]),he.createElement(oN,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o,future:n})}const mN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yN=he.forwardRef(function(t,e){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:s,target:c,to:l,preventScrollReset:u,viewTransition:d}=t,v=lN(t,dN),{basename:p}=he.useContext(Ms),y,_=!1;if(typeof l=="string"&&gN.test(l)&&(y=l,mN))try{let k=new URL(window.location.href),T=l.startsWith("//")?new URL(k.protocol+l):new URL(l),R=k1(T.pathname,p);T.origin===k.origin&&R!=null?l=R+T.search+T.hash:_=!0}catch{}let S=W6(l,{relative:i}),w=_N(l,{replace:o,state:s,target:c,preventScrollReset:u,relative:i,viewTransition:d});function x(k){n&&n(k),k.defaultPrevented||w(k)}return he.createElement("a",U0({},v,{href:y||S,onClick:_||a?n:x,ref:e,target:c}))});var Tw;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Tw||(Tw={}));var Ew;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Ew||(Ew={}));function _N(r,t){let{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:s}=t===void 0?{}:t,c=T4(),l=ff(),u=C4(r,{relative:o});return he.useCallback(d=>{if(uN(d,e)){d.preventDefault();let v=n!==void 0?n:ip(l)===ip(u);c(r,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:s})}},[l,c,u,n,i,e,r,a,o,s])}function N4(r){let t=he.useRef($0(r)),e=he.useRef(!1),n=ff(),i=he.useMemo(()=>fN(n.search,e.current?null:t.current),[n.search]),a=T4(),o=he.useCallback((s,c)=>{const l=$0(typeof s=="function"?s(i):s);e.current=!0,a("?"+l,c)},[a,i]);return[i,o]}var T1={exports:{}},Mp={},Xl={},Dp={},wN=function(r){var t=r.location,e=r.URL;return[t,e].some(function(n){return!n})?function(i){return Promise.reject(new Error("Failed to import: "+i+": dynamicImport is not supported"))}:(r.__twilioVideoImportedModules={},function(i){return i in r.__twilioVideoImportedModules?Promise.resolve(r.__twilioVideoImportedModules[i]):new Function("scope","return import('"+new e(i,t)+"').then(m => scope.__twilioVideoImportedModules['"+i+"'] = m);")(r)})}(globalThis),R4=function(){},Yi="undefined",bN=typeof window!==Yi&&typeof window.navigator!==Yi&&/Trident\/|MSIE /.test(window.navigator.userAgent),V0=["trace","debug","info","warn","error"];function Cw(r,t){var e=r[t];if(typeof e.bind=="function")return e.bind(r);try{return Function.prototype.bind.call(e,r)}catch{return function(){return Function.prototype.apply.apply(e,[r,arguments])}}}function xN(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function SN(r){return r==="debug"&&(r="log"),typeof console===Yi?!1:r==="trace"&&bN?xN:console[r]!==void 0?Cw(console,r):console.log!==void 0?Cw(console,"log"):R4}function j4(r,t){for(var e=0;e<V0.length;e++){var n=V0[e];this[n]=e<r?R4:this.methodFactory(n,r,t)}this.log=this.debug}function kN(r,t,e){return function(){typeof console!==Yi&&(j4.call(this,t,e),this[r].apply(this,arguments))}}function PN(r,t,e){return SN(r)||kN.apply(this,arguments)}function I4(r,t,e){var n=this,i,a="loglevel";typeof r=="string"?a+=":"+r:typeof r=="symbol"&&(a=void 0);function o(l){var u=(V0[l]||"silent").toUpperCase();if(!(typeof window===Yi||!a)){try{window.localStorage[a]=u;return}catch{}try{window.document.cookie=encodeURIComponent(a)+"="+u+";"}catch{}}}function s(){var l;if(!(typeof window===Yi||!a)){try{l=window.localStorage[a]}catch{}if(typeof l===Yi)try{var u=window.document.cookie,d=u.indexOf(encodeURIComponent(a)+"=");d!==-1&&(l=/^([^;]+)/.exec(u.slice(d))[1])}catch{}return n.levels[l]===void 0&&(l=void 0),l}}n.name=r,n.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},n.methodFactory=e||PN,n.getLevel=function(){return i},n.setLevel=function(l,u){if(typeof l=="string"&&n.levels[l.toUpperCase()]!==void 0&&(l=n.levels[l.toUpperCase()]),typeof l=="number"&&l>=0&&l<=n.levels.SILENT){if(i=l,u!==!1&&o(l),j4.call(n,l,r),typeof console===Yi&&l<n.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+l},n.setDefaultLevel=function(l){s()||n.setLevel(l,!1)},n.enableAll=function(l){n.setLevel(n.levels.TRACE,l)},n.disableAll=function(l){n.setLevel(n.levels.SILENT,l)};var c=s();c==null&&(c=t??"WARN"),n.setLevel(c,!1)}var ta=new I4,z0={};ta.getLogger=function(t){if(typeof t!="symbol"&&typeof t!="string"||t==="")throw new TypeError("You must supply a name when creating a logger.");var e=z0[t];return e||(e=z0[t]=new I4(t,ta.getLevel(),ta.methodFactory)),e};var TN=typeof window!==Yi?window.log:void 0;ta.noConflict=function(){return typeof window!==Yi&&window.log===ta&&(window.log=TN),ta};ta.getLoggers=function(){return z0};ta.default=ta;var M4=ta,E1={exports:{}};const EN="twilio-video",CN="2.32.1",D4={name:EN,version:CN};E1.exports;(function(r){var t=D4;r.exports.SDK_NAME=t.name+".js",r.exports.SDK_VERSION=t.version,r.exports.SDP_FORMAT="unified",r.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},r.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},r.exports.DEFAULT_ENVIRONMENT="prod",r.exports.DEFAULT_REALM="us1",r.exports.DEFAULT_REGION="gll",r.exports.DEFAULT_LOG_LEVEL="warn",r.exports.DEFAULT_LOGGER_NAME="twilio-video",r.exports.WS_SERVER=function(n,i){return i=i==="gll"?"global":encodeURIComponent(i),n==="prod"?"wss://"+i+".vss.twilio.com/signaling":"wss://"+i+".vss."+n+".twilio.com/signaling"},r.exports.PUBLISH_MAX_ATTEMPTS=5,r.exports.PUBLISH_BACKOFF_JITTER=10,r.exports.PUBLISH_BACKOFF_MS=20;function e(n){return["a","e","i","o","u"].includes(n.toLowerCase()[0])?"an":"a"}r.exports.typeErrors={ILLEGAL_INVOKE:function(n,i){return new TypeError("Illegal call to "+n+": "+i)},INVALID_TYPE:function(n,i){return new TypeError(n+" must be "+e(i)+" "+i)},INVALID_VALUE:function(n,i){return new RangeError(n+" must be one of "+i.join(", "))},REQUIRED_ARGUMENT:function(n){return new TypeError(n+" must be specified")}},r.exports.DEFAULT_FRAME_RATE=24,r.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,r.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,r.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,r.exports.DEFAULT_NQ_LEVEL_LOCAL=1,r.exports.DEFAULT_NQ_LEVEL_REMOTE=0,r.exports.MAX_NQ_LEVEL=3,r.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,r.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,r.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:r.exports.DEFAULT_SESSION_TIMEOUT_SEC*1e3,jitter:1},r.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},r.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},r.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},r.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},r.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},r.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}})(E1);var zt=E1.exports,LN=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},ON=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},AN=M4.getLogger,F4=zt,Lw=F4.DEFAULT_LOG_LEVEL,NN=F4.DEFAULT_LOGGER_NAME,mh=zt.typeErrors,ru;function RN(r){if(ru=ru||new Map,ru.has(r))return ru.get(r);var t=new Set;return ru.set(r,t),t}var C1=function(){function r(t,e,n,i,a){if(typeof t!="string")throw mh.INVALID_TYPE("moduleName","string");if(!e)throw mh.REQUIRED_ARGUMENT("component");typeof n!="object"&&(n={}),a=a||AN,Ow(n),Object.defineProperties(this,{_component:{value:e},_logLevels:{value:n},_warnings:{value:new Set},_loggerName:{get:function(){var s=i&&typeof i=="string"?i:NN;return this._logLevelsEqual||(s=s+"-"+t),s}},_logger:{get:function(){var s=a(this._loggerName),c=this._logLevels[t]||Lw;return c=c==="off"?"silent":c,s.setDefaultLevel(c),s}},_logLevelsEqual:{get:function(){return new Set(Object.values(this._logLevels)).size===1}},logLevel:{get:function(){return r.getLevelByName(n[t]||Lw)}},name:{get:e.toString.bind(e)}})}return r.getLevelByName=function(t){return isNaN(t)?(t=t.toUpperCase(),$4(t),r[t]):parseInt(t,10)},r.prototype.createLog=function(t,e){var n=this._loggerName;return this._logLevelsEqual||(n=n.substring(0,n.lastIndexOf("-"))),new r(t,e,this._logLevels,n)},r.prototype.setLevels=function(t){return Ow(t),Object.assign(this._logLevels,t),this},r.prototype.log=function(t,e){var n=r._levels[t];if(!n)throw mh.INVALID_VALUE("logLevel",U4);n=n.toLowerCase();var i=[new Date().toISOString(),n,this.name];return(this._logger[n]||function(){}).apply(void 0,ON([],LN(i.concat(e)))),this},r.prototype.debug=function(){return this.log(r.DEBUG,[].slice.call(arguments))},r.prototype.deprecated=function(t){var e=RN(this._component.constructor);return e.has(t)?this:(e.add(t),this.warn(t))},r.prototype.info=function(){return this.log(r.INFO,[].slice.call(arguments))},r.prototype.warn=function(){return this.log(r.WARN,[].slice.call(arguments))},r.prototype.warnOnce=function(t){return this._warnings.has(t)?this:(this._warnings.add(t),this.warn(t))},r.prototype.error=function(){return this.log(r.ERROR,[].slice.call(arguments))},r.prototype.throw=function(t,e){throw t.clone&&(t=t.clone(e)),this.log(r.ERROR,t),t},r}();Object.defineProperties(C1,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var B4={},U4=[],jN=C1._levels.map(function(r,t){return B4[r]=!0,U4.push(t),r});function $4(r){if(!(r in B4))throw mh.INVALID_VALUE("level",jN)}function Ow(r){Object.keys(r).forEach(function(t){$4(r[t].toUpperCase())})}var Da=C1,IN=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},MN=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Dp,"__esModule",{value:!0});Dp.createNoiseCancellationAudioProcessor=void 0;var DN=wN,FN={krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}},BN=function(r){var t=r.supportedVersion,e=r.plugin,n=r.log;if(!e.getVersion||!e.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var i=e.getVersion();n.debug("Plugin Version = "+i);var a=t.split(".").map(function(l){return Number(l)}),o=i.split(".").map(function(l){return Number(l)});if(a.length!==3||o.length!==3)throw new Error("Unsupported Plugin version format: "+t+", "+i);if(a[0]!==o[0])throw new Error("Major version mismatch: [Plugin version "+i+"],  [Supported Version "+t+"]");if(o[1]<a[1])throw new Error("Minor version mismatch: [Plugin version "+i+"] < [Supported Version "+t+"]");var s=new AudioContext,c=e.isSupported(s);if(s.close(),!c)throw new Error("Noise Cancellation plugin is not supported on your browser")},Aw=new Map;function UN(r,t){return IN(this,void 0,void 0,function(){var e,n,i,a,o,s,c,l,u;return MN(this,function(d){switch(d.label){case 0:if(e=Aw.get(r.vendor),e)return[3,6];if(n=FN[r.vendor],!n)throw new Error("Unsupported NoiseCancellationOptions.vendor: "+r.vendor);i=n.supportedVersion,a=n.pluginFile,o=r.sdkAssetsPath,s=o+"/"+a,d.label=1;case 1:return d.trys.push([1,5,,6]),t.debug("loading noise cancellation sdk: ",s),[4,DN(s)];case 2:return c=d.sent(),t.debug("Loaded noise cancellation sdk:",c),l=c.default,BN({supportedVersion:i,plugin:l,log:t}),l.isInitialized()?[3,4]:(t.debug("initializing noise cancellation sdk: ",o),[4,l.init({rootDir:o})]);case 3:d.sent(),t.debug("noise cancellation sdk initialized!"),d.label=4;case 4:return e={vendor:r.vendor,isInitialized:function(){return l.isInitialized()},isConnected:function(){return l.isConnected()},isEnabled:function(){return l.isEnabled()},disconnect:function(){return l.disconnect()},enable:function(){return l.enable()},disable:function(){return l.disable()},destroy:function(){return l.destroy()},setLogging:function(v){return l.setLogging(v)},connect:function(v){t.debug("connect: ",v.id),l.isConnected()&&l.disconnect();var p=l.connect(new MediaStream([v]));if(!p)throw new Error("Error connecting with noise cancellation sdk");var y=p.getAudioTracks()[0];if(!y)throw new Error("Error getting clean track from noise cancellation sdk");return l.enable(),y}},Aw.set(r.vendor,e),[3,6];case 5:throw u=d.sent(),t.error("Error loading noise cancellation sdk:"+s,u),u;case 6:return[2,e]}})})}Dp.createNoiseCancellationAudioProcessor=UN;var V4=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},z4=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Xl,"__esModule",{value:!0});Xl.applyNoiseCancellation=Xl.NoiseCancellationImpl=void 0;var $N=Dp,W4=function(){function r(t,e){this._processor=t,this._sourceTrack=e,this._disabledPermanent=!1}return Object.defineProperty(r.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),r.prototype.enable=function(){if(this._disabledPermanent)throw new Error(this.vendor+" noise cancellation is disabled permanently for this track");return this._processor.enable(),Promise.resolve()},r.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},r.prototype.reacquireTrack=function(t){return V4(this,void 0,void 0,function(){var e,n,i;return z4(this,function(a){switch(a.label){case 0:return e=this._processor.isEnabled(),this._processor.disconnect(),[4,t()];case 1:return n=a.sent(),this._sourceTrack=n,[4,this._processor.connect(n)];case 2:return i=a.sent(),e?this._processor.enable():this._processor.disable(),[2,i]}})})},r.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},r.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},r}();Xl.NoiseCancellationImpl=W4;function VN(r,t,e){return V4(this,void 0,void 0,function(){var n,i,a,o;return z4(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,$N.createNoiseCancellationAudioProcessor(t,e)];case 1:return n=s.sent(),i=n.connect(r),a=new W4(n,r),[2,{cleanTrack:i,noiseCancellation:a}];case 2:return o=s.sent(),e.warn("Failed to create noise cancellation. Returning normal audio track: "+o),[2,{cleanTrack:r}];case 3:return[2]}})})}Xl.applyNoiseCancellation=VN;var De={},Dt={},q4=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},zN=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};function WN(){var r={};return r.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),r}function qN(r,t,e,n){if(!(n in t)&&!n.match(/^on[a-z]+$/)){var i=!1;try{var a=Object.getOwnPropertyDescriptor(r,n);i=a&&!!a.get}catch{}if(!i){var o;try{o=typeof r[n]}catch{}o==="function"&&(t[n]=function(){return this[e][n].apply(this[e],arguments)})}}}function HN(r,t,e){for(var n in r)qN(r,t,e,n)}function GN(r,t){r=Array.isArray(r)?new Set(r):new Set(r.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var e=new Set;return r.forEach(function(n){t.has(n)||e.add(n)}),e}function KN(r,t){var e=r instanceof Map||r instanceof Set?Array.from(r.values()):r;return e.reduce(function(n,i){return n.concat(t(i))},[])}function L1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:null}function O1(r){return typeof r>"u"&&(r=L1()),/Chrome|CriOS/.test(r)?"chrome":/Firefox|FxiOS/.test(r)?"firefox":/Safari|iPhone|iPad|iPod/.test(r)?"safari":null}function QN(r){typeof r>"u"&&(r=L1());var t={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[O1(r)];if(!t)return null;var e=new RegExp("("+t+")/([^\\s]+)"),n=q4(r.match(e)||[],3),i=n[2];if(!i)return null;var a=i.split(".").map(Number);return{major:isNaN(a[0])?null:a[0],minor:isNaN(a[1])?null:a[1]}}function YN(r){return typeof r>"u"&&(r=L1()),/Mobi/.test(r)&&O1()==="chrome"&&/iPad|iPhone|iPod/.test(r)}function JN(r,t){var e=null;Object.defineProperty(r,"on"+t,{get:function(){return e},set:function(n){e&&this.removeEventListener(t,e),typeof n=="function"?(e=n,this.addEventListener(t,e)):e=null}})}function XN(r,t,e){return t?r.then(t,e):r}function ZN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=Math.random()*16|0,e=r==="x"?t:t&3|8;return e.toString(16)})}function eR(r,t,e){Object.getOwnPropertyNames(r).forEach(function(n){tR(r,t,e,n)})}function tR(r,t,e,n){if(!(n in t)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(t,n,{value:null,writable:!0}),e.addEventListener(n.slice(2),function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return t.dispatchEvent.apply(t,zN([],q4(i)))});return}Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}}function rR(){return typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"&&typeof RTCPeerConnection=="function"}function nR(r){if(typeof RTCRtpSender<"u"&&typeof RTCRtpSender.getCapabilities=="function")return Promise.resolve(new Set(RTCRtpSender.getCapabilities(r).codecs.map(function(e){var n=e.mimeType;return n.split("/")[1].toLowerCase()})));if(typeof RTCPeerConnection>"u"||typeof RTCPeerConnection.prototype>"u"||typeof RTCPeerConnection.prototype.addTransceiver!="function"||typeof RTCPeerConnection.prototype.close!="function"||typeof RTCPeerConnection.prototype.createOffer!="function")return Promise.resolve(new Set);var t=new RTCPeerConnection;return t.addTransceiver(r),t.createOffer().then(function(e){var n=e.sdp;return t.close(),new Set((n.match(/^a=rtpmap:.+$/gm)||[]).map(function(i){return i.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()}))},function(){return t.close(),new Set})}var W0=new Map;function iR(r,t){var e=W0.get(t);return e?Promise.resolve(e.has(r.toLowerCase())):nR(t).then(function(n){return W0.set(t,n),n.has(r.toLowerCase())})}function aR(){W0.clear()}Dt.clearCachedSupportedCodecs=aR;Dt.defer=WN;Dt.delegateMethods=HN;Dt.difference=GN;Dt.flatMap=KN;Dt.guessBrowser=O1;Dt.guessBrowserVersion=QN;Dt.isCodecSupported=iR;Dt.isIOSChrome=YN;Dt.interceptEvent=JN;Dt.legacyPromise=XN;Dt.makeUUID=ZN;Dt.proxyProperties=eR;Dt.support=rR;var Fp={},Nw="1234567890abcdef",oR=32;function H4(r){for(var t="",e=0;e<oR;e++)t+=Nw.charAt(Math.floor(Math.random()*Nw.length));return""+r+t}Fp.sessionSID=H4("SS");Fp.createSID=H4;var sR={recordingMediaLost:"recording-media-lost"},G4=sR,lR=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pn=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Os=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},A1=zt,cR=A1.typeErrors,jm=A1.trackPriority,uR=Dt,fR=Fp.sessionSID,dR=G4;function hR(r,t){if(r instanceof t.LocalAudioTrack||r instanceof t.LocalVideoTrack||r instanceof t.LocalDataTrack)return r;if(r instanceof t.MediaStreamTrack)return r.kind==="audio"?new t.LocalAudioTrack(r,t):new t.LocalVideoTrack(r,t);throw cR.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function pR(r,t,e,n){var i={audio:n.LocalAudioTrackPublication,video:n.LocalVideoTrackPublication,data:n.LocalDataTrackPublication}[r.kind];return new i(t,r,e,n)}function vR(r){return r[0].toUpperCase()+r.slice(1)}function mR(r,t,e,n){var i=new Set;t.on("newListener",function a(o){e.has(o)&&!i.has(o)&&(n.deprecated(r+"#"+o+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(e.get(o)?" Use "+r+"#"+e.get(o)+" instead.":"")),i.add(o)),i.size>=e.size&&t.removeListener("newListener",a)})}function gR(r,t){r=Array.isArray(r)?new Set(r):new Set(r.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var e=new Set;return r.forEach(function(n){t.has(n)||e.add(n)}),e}function yR(r,t){return Object.keys(r).reduce(function(e,n){return r[n]!==t&&(e[n]=r[n]),e},{})}function _R(r,t){var e=r instanceof Map||r instanceof Set?Array.from(r.values()):r;return t=t||function(i){return i},e.reduce(function(n,i){var a=t(i);return n.concat(a)},[])}function K4(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function wR(){var r=K4(),t=pn(r.match(/\(([^)]+)\)/)||[],2),e=t[1],n=e===void 0?"unknown":e,i=pn(n.split(";").map(function(o){return o.trim()}),1),a=i[0];return a.toLowerCase()}function bR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=Math.random()*16|0,e=r==="x"?t:t&3|8;return e.toString(16)})}function xR(r){var t=null;function e(){t=null,r()}return function(){t&&clearTimeout(t),t=setTimeout(e)}}function SR(r,t,e,n){return new Promise(function(i,a){function o(){var c=[].slice.call(arguments);n&&t.removeListener(n,s),i.apply(void 0,Os([],pn(c)))}function s(){var c=[].slice.call(arguments);t.removeListener(e,o),a.apply(void 0,Os([],pn(c)))}t.once(e,o),n&&t.once(n,s),r()})}function kR(r,t){return t.split(".").reduce(function(e,n){return e?e[n]:null},r)}function PR(){var r={};return r.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),r}function TR(r,t,e,n){if(!(n in t)&&!n.match(/^on[a-z]+$/)){var i;try{i=typeof r[n]}catch{}i==="function"&&(t[n]=function(){for(var a,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return(a=this[e])[n].apply(a,Os([],pn(o)))})}}function ER(r,t,e){for(var n in r)TR(r,t,e,n)}function gh(r,t){if(r===t)return!0;if(typeof r!=typeof t)return!1;if(r===null)return t===null;if(t===null)return!1;if(Array.isArray(r))return Array.isArray(t)&&r.length===t.length&&r.every(function(i,a){return gh(i,t[a])});if(typeof r=="object"){var e=Object.keys(r).sort(),n=Object.keys(t).sort();return!Array.isArray(t)&&gh(e,n)&&e.every(function(i){return gh(r[i],t[i])})}return!1}function Q4(r){return typeof r=="object"&&!Array.isArray(r)}function CR(r,t,e){Object.getOwnPropertyNames(r).forEach(function(n){LR(r,t,e,n)})}function LR(r,t,e,n){if(!(n in t)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(t,n,{value:null,writable:!0}),e.addEventListener(n.slice(2),function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];t.dispatchEvent.apply(t,Os([],pn(i)))});return}Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}}function OR(r,t,e){return t?r.then(function(n){t(n)},function(n){e(n)}):r}function AR(r){return typeof r=="string"?{default:r,media:r,signaling:r,webrtc:r}:r}function NR(r,t){return t=t?"Local":"",t+(r.kind||"").replace(/\w{1}/,function(e){return e.toUpperCase()})+"Track"}function RR(r,t){return t=t?"Local":"",t+(r.kind||"").replace(/\w{1}/,function(e){return e.toUpperCase()})+"TrackPublication"}function Y4(r){Object.getOwnPropertyNames(r).forEach(function(t){t.startsWith("_")&&J4(r,t)})}function jR(r,t){return function(e){lR(n,e);function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e.apply(this,Os([],pn(i)))||this;return Y4(o),IR(o,t),o}return n}(r)}function J4(r,t){var e=Object.getOwnPropertyDescriptor(r,t);e.enumerable=!1,Object.defineProperty(r,t,e)}function IR(r,t){t===void 0&&(t=[]),t.forEach(function(e){r.hasOwnProperty(e)&&J4(r,e)})}function X4(r){return r.map(Bp)}function MR(r){return X4(Os([],pn(r)))}function DR(r){return Os([],pn(r.entries())).reduce(function(t,e){var n,i=pn(e,2),a=i[0],o=i[1];return Object.assign((n={},n[a]=Bp(o),n),t)},{})}function FR(r){return Object.entries(r).reduce(function(t,e){var n,i=pn(e,2),a=i[0],o=i[1];return Object.assign((n={},n[a]=Bp(o),n),t)},{})}function Bp(r){return Array.isArray(r)?X4(r):r instanceof Set?MR(r):r instanceof Map?DR(r):r&&typeof r=="object"?FR(r):r}function BR(r){function t(a){return a?"true":"false"}var e={sessionSID:fR,iceServers:(r.iceServers||[]).length,audioTracks:(r.tracks||[]).filter(function(a){return a.kind==="audio"}).length,videoTracks:(r.tracks||[]).filter(function(a){return a.kind==="video"}).length,dataTracks:(r.tracks||[]).filter(function(a){return a.kind==="data"}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(a){var o=pn(a,2),s=o[0],c=o[1];c=c||s,e[c]=t(!!r[s])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(a){var o=pn(a,2),s=o[0],c=o[1];c=c||s,typeof r[s]=="number"?e[c]=r[s]:isNaN(Number(r[s]))||(e[c]=Number(r[s]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(a){var o=pn(a,2),s=o[0],c=o[1];c=c||s,typeof r[s]=="string"?e[c]=r[s]:typeof r[s]=="number"&&s==="name"&&(e[c]=r[s].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(a){a in r&&(e[a]=JSON.stringify(r[a]))}),"networkQuality"in r&&(e.networkQualityConfiguration={},Q4(r.networkQuality)?["local","remote"].forEach(function(a){typeof r.networkQuality[a]=="number"&&(e.networkQualityConfiguration[a]=r.networkQuality[a])}):(e.networkQualityConfiguration.remote=0,e.networkQualityConfiguration.local=r.networkQuality?1:0)),r.bandwidthProfile&&r.bandwidthProfile.video){var n=r.bandwidthProfile.video||{};e.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(a){typeof n[a]=="number"||typeof n[a]=="string"?e.bandwidthProfileOptions[a]=n[a]:typeof n[a]=="boolean"?e.bandwidthProfileOptions[a]=t(n[a]):typeof n[a]=="object"&&(e.bandwidthProfileOptions[a]=JSON.stringify(n[a]))})}var i={RTCPeerConnection:"customRTCPeerConnectionImpl",MediaStream:"customMediaStreamImpl",getUserMedia:"customGetUserMediaImpl",enumerateDevices:"customEnumerateDevicesImpl"};return Object.entries(i).forEach(function(a){var o=pn(a,2),s=o[0],c=o[1];e[c]=t(typeof r[s]<"u")}),{group:"room",name:"connect",level:"info",payload:e}}function UR(r){return Up(r,[{prop:"video",type:"object",transform:$R}])}function $R(r){return Up(r,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:zR},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function VR(r,t,e,n,i,a,o){var s={transports:[{type:"data-channel"}]};return Object.assign(r?{active_speaker:s}:{},t?{network_quality:s}:{},a?{render_hints:s}:{},i?{publisher_hints:s}:{},e?{track_priority:s}:{},n?{track_switch_off:s}:{},o?{extension_transcriptions:s}:{})}function Im(r){return Up(r,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function zR(r){var t=jm.PRIORITY_HIGH,e=jm.PRIORITY_LOW,n=jm.PRIORITY_STANDARD;return Up(r,[{prop:t,type:"object",transform:Im},{prop:e,type:"object",transform:Im},{prop:n,type:"object",transform:Im}])}function Up(r,t){return t.reduce(function(e,n){var i,a=n.prop,o=n.type,s=n.payloadProp,c=s===void 0?a:s,l=n.transform,u=l===void 0?function(d){return d}:l;return typeof r[a]===o?Object.assign((i={},i[c]=u(r[a]),i),e):e},{})}function WR(r){return{rules:[{type:r?"include":"exclude",all:!0}],revision:1}}function qR(r){var t,e=(t={},t[dR.recordingMediaLost]="recordings",t);return r.map(function(n){return e[n]}).filter(function(n){return!!n})}function HR(r,t){var e=Math.random();return r-t+Math.floor(2*t*e+.5)}function GR(r,t,e){return t<=r&&r<=e}function KR(r){return uR.guessBrowser()==="chrome"&&r.kind==="video"&&"displaySurface"in r.getSettings()}function QR(r){return r===void 0&&(r=10),new Promise(function(t){return setTimeout(t,r)})}function YR(r,t){return new Promise(function(e){r.addEventListener(t,function n(i){r.removeEventListener(t,n),e(i)})})}De.constants=A1;De.createBandwidthProfilePayload=UR;De.createMediaSignalingPayload=VR;De.createMediaWarningsPayload=qR;De.createRoomConnectEventPayload=BR;De.createSubscribePayload=WR;De.asLocalTrack=hR;De.asLocalTrackPublication=pR;De.capitalize=vR;De.deprecateEvents=mR;De.difference=gR;De.filterObject=yR;De.flatMap=_R;De.getPlatform=wR;De.getUserAgent=K4;De.hidePrivateProperties=Y4;De.hidePrivateAndCertainPublicPropertiesInClass=jR;De.isDeepEqual=gh;De.isNonArrayObject=Q4;De.inRange=GR;De.makeUUID=bR;De.oncePerTick=xR;De.promiseFromEvents=SR;De.getOrNull=kR;De.defer=PR;De.delegateMethods=ER;De.proxyProperties=CR;De.legacyPromise=OR;De.buildLogLevels=AR;De.trackClass=NR;De.trackPublicationClass=RR;De.valueToJSON=Bp;De.withJitter=HR;De.isChromeScreenShareTrack=KR;De.waitForSometime=QR;De.waitForEvent=YR;var An={},Z4=Dt,JR=Z4.flatMap,XR=Z4.guessBrowser,os=null;function ZR(){if(typeof os=="boolean")return os;if(typeof RTCPeerConnection>"u")return os=!1,os;try{new RTCPeerConnection({sdpSemantics:"foo"}),os=!1}catch{os=!0}return os}var hl=null;function e8(){hl=null}function t8(){if(!hl)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype){var r=new RTCPeerConnection;try{r.addTransceiver("audio"),hl="unified"}catch{hl="planb"}r.close()}else hl="planb";return hl}function r8(r){return!r||!ZR()?t8():{"plan-b":"planb","unified-plan":"unified"}[r]}function n8(){return typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}function i8(r){return{chrome:r8(r),firefox:"unified",safari:n8()}[XR()]||null}function N1(r,t){var e=t.match(new RegExp(r,"gm"))||[];return e.reduce(function(n,i){var a=i.match(new RegExp(r));return a?n.add(a[1]):n},new Set)}function e3(r,t){return N1(r,t)}function t3(r){return e3("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",r)}function r3(r){return e3("^a=msid:.+ +(.+) *$",r)}function n3(r,t){var e="^a=ssrc:([0-9]+) +msid:[^ ]+ +"+t+" *$";return N1(e,r)}function i3(r,t,e){return t===void 0&&(t=".*"),e===void 0&&(e=".*"),r.split(`\r
m=`).slice(1).map(function(n){return"m="+n}).filter(function(n){var i=new RegExp("m="+t,"gm"),a=new RegExp("a="+e,"gm");return i.test(n)&&a.test(n)})}function a8(r){return Array.from(N1("^a=ssrc:([0-9]+) +.*$",r))}function a3(r,t){var e=i3(r),n=new RegExp("^a=msid:[^ ]+ +"+t+" *$","gm"),i=e.filter(function(a){return a.match(n)});return new Set(JR(i,a8))}function o3(r,t,e){return new Map(Array.from(r(e)).map(function(n){return[n,t(e,n)]}))}function o8(r){return o3(t3,n3,r)}function s8(r){return o3(r3,a3,r)}function s3(r,t,e){var n=r(e),i=new Map;n.forEach(function(s,c){if(!t.has(c)){t.set(c,s);return}var l=Array.from(t.get(c)),u=Array.from(s);l.forEach(function(d,v){var p=u[v];i.set(p,d);var y="^a=ssrc:"+p+" (.*)$",_="a=ssrc:"+d+" $1";e=e.replace(new RegExp(y,"gm"),_)})});var a="^(a=ssrc-group:[^ ]+ +)(.*)$",o=e.match(new RegExp(a,"gm"))||[];return o.forEach(function(s){var c=s.match(new RegExp(a));if(c){var l=c[1],u=c[2],d=u.split(" ").map(function(v){var p=i.get(v);return p||v}).join(" ");e=e.replace(c[0],l+d)}}),e}function l8(r,t){return s3(o8,r,t)}function c8(r,t){return s3(s8,r,t)}An.clearChromeCachedSdpFormat=e8;An.getSdpFormat=i8;An.getMediaSections=i3;An.getPlanBTrackIds=t3;An.getUnifiedPlanTrackIds=r3;An.getPlanBSSRCs=n3;An.getUnifiedPlanSSRCs=a3;An.updatePlanBTrackIdsToSSRCs=l8;An.updateUnifiedPlanTrackIdsToSSRCs=c8;var Sn=A&&A.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lo=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},R1=Dt,l3=R1.flatMap,u8=R1.guessBrowser,f8=R1.guessBrowserVersion,d8=An.getSdpFormat,j1=u8(),h8=f8(),I1=j1==="chrome",c3=j1==="firefox",u3=j1==="safari",Rw=I1?h8.major:null,p8=32767;function Zl(r,t){return typeof r.get=="function"?r.get(t):r.find(function(e){return e.id===t})}function v8(r,t,e){var n,i,a,o,s,c,l,u,d,v,p,y,_,S,w,x,k,T,R,U,$,F;e===void 0&&(e=!1);var M;if(Array.isArray(r))M=new Map(r.map(function(je){return[je.id||String(Math.random()),je]}));else if(r instanceof Map)M=r;else if(typeof r=="object"&&r!==null){var J=new Map;Object.keys(r).forEach(function(je){J.set(je,r[je])}),M=J}else return new Map;if(!M||!t)return new Map;var O=new Map,N=t.id,q=t.kind,j=null,Z=null,X=null;try{for(var se=Sn(M),H=se.next();!H.done;H=se.next()){var ie=lo(H.value,2),fe=ie[0],ne=ie[1];if(e&&ne.type==="inbound-rtp"&&ne.trackIdentifier===N){j=ne,Z=fe,X=ne.ssrc;break}else if(!e&&ne.type==="media-source"&&ne.trackIdentifier===N){j=ne,Z=fe;break}else ne.type==="track"&&ne.trackIdentifier===N&&(j||(j=ne,Z=fe))}}catch(je){n={error:je}}finally{try{H&&!H.done&&(i=se.return)&&i.call(se)}finally{if(n)throw n.error}}if(!j)if(e){var E=[];try{for(var W=Sn(M),G=W.next();!G.done;G=W.next()){var ee=lo(G.value,2),fe=ee[0],ne=ee[1];ne.type==="inbound-rtp"&&(ne.kind===q||ne.mediaType===q)&&E.push({id:fe,stat:ne})}}catch(je){a={error:je}}finally{try{G&&!G.done&&(o=W.return)&&o.call(W)}finally{if(a)throw a.error}}(E.length===1||E.length>1)&&(j=E[0].stat,Z=E[0].id,X=j.ssrc)}else try{for(var oe=Sn(M),ue=oe.next();!ue.done;ue=oe.next()){var ye=lo(ue.value,2),fe=ye[0],ne=ye[1];if(ne.type==="media-source"&&ne.kind===q){j=ne,Z=fe;break}}}catch(je){s={error:je}}finally{try{ue&&!ue.done&&(c=oe.return)&&c.call(oe)}finally{if(s)throw s.error}}if(!j)return O;O.set(Z,j);var me=new Set;if(e){if(j.codecId&&me.add(j.codecId),j.transportId&&me.add(j.transportId),j.remoteId&&me.add(j.remoteId),X)try{for(var be=Sn(M),Te=be.next();!Te.done;Te=be.next()){var Re=lo(Te.value,2),fe=Re[0],ne=Re[1];ne.type==="remote-outbound-rtp"&&ne.ssrc===X&&me.add(fe)}}catch(je){l={error:je}}finally{try{Te&&!Te.done&&(u=be.return)&&u.call(be)}finally{if(l)throw l.error}}try{for(var Oe=Sn(me),re=Oe.next();!re.done;re=Oe.next()){var z=re.value;M.has(z)&&O.set(z,M.get(z))}}catch(je){d={error:je}}finally{try{re&&!re.done&&(v=Oe.return)&&v.call(Oe)}finally{if(d)throw d.error}}try{for(var nt=Sn(M),Ke=nt.next();!Ke.done;Ke=nt.next()){var $e=lo(Ke.value,2),fe=$e[0],ne=$e[1];ne.type==="track"&&ne.trackIdentifier===N&&O.set(fe,ne)}}catch(je){p={error:je}}finally{try{Ke&&!Ke.done&&(y=nt.return)&&y.call(nt)}finally{if(p)throw p.error}}}else{try{for(var Ee=Sn(M),Ie=Ee.next();!Ie.done;Ie=Ee.next()){var Ne=lo(Ie.value,2),fe=Ne[0],ne=Ne[1];if(ne.type==="outbound-rtp"&&ne.mediaSourceId===Z){O.set(fe,ne),ne.codecId&&me.add(ne.codecId),ne.transportId&&me.add(ne.transportId);var st=fe;try{for(var Qe=(w=void 0,Sn(M)),xt=Qe.next();!xt.done;xt=Qe.next()){var ut=lo(xt.value,2),dt=ut[0],Ot=ut[1];Ot.type==="remote-inbound-rtp"&&Ot.localId===st&&O.set(dt,Ot)}}catch(mr){w={error:mr}}finally{try{xt&&!xt.done&&(x=Qe.return)&&x.call(Qe)}finally{if(w)throw w.error}}}}}catch(je){_={error:je}}finally{try{Ie&&!Ie.done&&(S=Ee.return)&&S.call(Ee)}finally{if(_)throw _.error}}try{for(var lt=Sn(me),qe=lt.next();!qe.done;qe=lt.next()){var z=qe.value;M.has(z)&&O.set(z,M.get(z))}}catch(je){k={error:je}}finally{try{qe&&!qe.done&&(T=lt.return)&&T.call(lt)}finally{if(k)throw k.error}}}var it=null,Je=new Set;try{for(var At=Sn(O.values()),St=At.next();!St.done;St=At.next()){var ne=St.value;ne.transportId&&Je.add(ne.transportId)}}catch(je){R={error:je}}finally{try{St&&!St.done&&(U=At.return)&&U.call(At)}finally{if(R)throw R.error}}try{for(var Ve=Sn(Je),ot=Ve.next();!ot.done;ot=Ve.next()){var Nt=ot.value;if(M.has(Nt)){var We=M.get(Nt);O.set(Nt,We),We.selectedCandidatePairId&&(it=We.selectedCandidatePairId),We.localCertificateId&&M.has(We.localCertificateId)&&O.set(We.localCertificateId,M.get(We.localCertificateId)),We.remoteCertificateId&&M.has(We.remoteCertificateId)&&O.set(We.remoteCertificateId,M.get(We.remoteCertificateId))}}}catch(je){$={error:je}}finally{try{ot&&!ot.done&&(F=Ve.return)&&F.call(Ve)}finally{if($)throw $.error}}if(it&&M.has(it)){var ht=M.get(it);O.set(it,ht),ht.localCandidateId&&M.has(ht.localCandidateId)&&O.set(ht.localCandidateId,M.get(ht.localCandidateId)),ht.remoteCandidateId&&M.has(ht.remoteCandidateId)&&O.set(ht.remoteCandidateId,M.get(ht.remoteCandidateId))}return O}function m8(r,t){return r&&typeof r.getStats=="function"?g8(r,t):Promise.reject(new Error("Given PeerConnection does not support getStats"))}function g8(r,t){var e=Pd(r,"audio","local"),n=Pd(r,"video","local"),i=Pd(r,"audio"),a=Pd(r,"video"),o={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},s=l3([[e,"localAudioTrackStats",!1],[n,"localVideoTrackStats",!1],[i,"remoteAudioTrackStats",!0],[a,"remoteVideoTrackStats",!0]],function(c){var l=lo(c,3),u=l[0],d=l[1],v=l[2];return u.map(function(p){return x8(r,p,Object.assign({isRemote:v},t)).then(function(y){y.forEach(function(_){_.trackId=p.id,o[d].push(_)})})})});return Promise.all(s).then(function(){return y8(r,t)}).then(function(c){return o.activeIceCandidatePair=c,o})}function y8(r,t){return t===void 0&&(t={}),typeof t.testForChrome<"u"||I1||typeof t.testForSafari<"u"||u3?r.getStats().then(_8):typeof t.testForFirefox<"u"||c3?r.getStats().then(w8):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function _8(r){var t=Array.from(r.values()).find(function(c){var l=c.nominated,u=c.type;return u==="candidate-pair"&&l});if(!t)return null;var e=Zl(r,t.localCandidateId),n=Zl(r,t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],a=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),o=e?a.reduce(function(c,l){var u=l.key,d=l.type;return c[u]=typeof e[u]===d?e[u]:u==="deleted"?!1:null,c},{}):null,s=n?i.reduce(function(c,l){var u=l.key,d=l.type;return c[u]=typeof n[u]===d?n[u]:null,c},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(c){return c==="inprogress"?"in-progress":c}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(c,l){var u=l.key,d=l.type,v=l.fixup;return c[u]=typeof t[u]===d?v?v(t[u]):t[u]:null,c},{localCandidate:o,remoteCandidate:s})}function w8(r){var t=Array.from(r.values()).find(function(l){var u=l.nominated,d=l.type;return d==="candidate-pair"&&u});if(!t)return null;var e=Zl(r,t.localCandidateId),n=Zl(r,t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],a=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),o={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},s=e?a.reduce(function(l,u){var d=u.ffKeys,v=u.key,p=u.type,y=d&&d.find(function(_){return _ in e})||v;return l[v]=typeof e[y]===p?y==="candidateType"&&o[e[y]]||e[y]:y==="deleted"?!1:null,l},{}):null,c=n?i.reduce(function(l,u){var d=u.ffKeys,v=u.key,p=u.type,y=d&&d.find(function(_){return _ in n})||v;return l[v]=typeof n[y]===p?y==="candidateType"&&o[n[y]]||n[y]:null,l},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(l,u){var d=u.key,v=u.type;return l[d]=typeof t[d]===v?t[d]:null,l},{localCandidate:s,remoteCandidate:c})}function Pd(r,t,e){var n=e==="local"?"getSenders":"getReceivers";if(r[n])return r[n]().map(function(o){var s=o.track;return s}).filter(function(o){return o&&o.kind===t});var i=e==="local"?"getLocalStreams":"getRemoteStreams",a=t==="audio"?"getAudioTracks":"getVideoTracks";return l3(r[i](),function(o){return o[a]()})}function b8(r,t){var e,n,i,a,o,s;if(!r||!t)return!1;if(r.getReceivers){var c=r.getReceivers();try{for(var l=Sn(c),u=l.next();!u.done;u=l.next()){var d=u.value;if(d.track&&d.track.id===t.id)return!0}}catch(T){e={error:T}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}}if(r.getRemoteStreams){var v=r.getRemoteStreams();try{for(var p=Sn(v),y=p.next();!y.done;y=p.next()){var _=y.value,S=_.getTracks();try{for(var w=(o=void 0,Sn(S)),x=w.next();!x.done;x=w.next()){var k=x.value;if(k.id===t.id)return!0}}catch(T){o={error:T}}finally{try{x&&!x.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}}}catch(T){i={error:T}}finally{try{y&&!y.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return!1}function x8(r,t,e){return e===void 0&&(e={}),typeof e.testForChrome<"u"||I1?jw(r,t,e):typeof e.testForFirefox<"u"||c3?S8(r,t,e):typeof e.testForSafari<"u"||u3?typeof e.testForSafari<"u"||d8()==="unified"?jw(r,t,e):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function jw(r,t,e){var n=e.log;return Rw&&Rw<67?new Promise(function(i,a){r.getStats(function(o){i([k8(o,t)])},null,a)}):r.getStats(t).then(function(i){return n.info("getStats by track successful"),Iw(i,e)}).catch(function(){return n.warn("getStats by track failed. Getting default stats"),r.getStats().then(function(i){n.info("getStats by default successful");var a=b8(r,t);n.info("Starting filtering stats for "+(a?"remote":"local")+" track");var o=v8(i,t,a);return n.info("Completed filtering stats for "+(a?"remote":"local")+" track"),Iw(o,e)})})}function S8(r,t,e){return r.getStats(t).then(function(n){return[P8(n,e)]})}function k8(r,t){var e=r.result().find(function(i){return i.type==="ssrc"&&i.stat("googTrackId")===t.id}),n={};return e&&(n.timestamp=Math.round(Number(e.timestamp)),n=e.names().reduce(function(i,a){switch(a){case"googCodecName":i.codecName=e.stat(a);break;case"googRtt":i.roundTripTime=Number(e.stat(a));break;case"googJitterReceived":i.jitter=Number(e.stat(a));break;case"googFrameWidthInput":i.frameWidthInput=Number(e.stat(a));break;case"googFrameHeightInput":i.frameHeightInput=Number(e.stat(a));break;case"googFrameWidthSent":i.frameWidthSent=Number(e.stat(a));break;case"googFrameHeightSent":i.frameHeightSent=Number(e.stat(a));break;case"googFrameWidthReceived":i.frameWidthReceived=Number(e.stat(a));break;case"googFrameHeightReceived":i.frameHeightReceived=Number(e.stat(a));break;case"googFrameRateInput":i.frameRateInput=Number(e.stat(a));break;case"googFrameRateSent":i.frameRateSent=Number(e.stat(a));break;case"googFrameRateReceived":i.frameRateReceived=Number(e.stat(a));break;case"ssrc":i[a]=e.stat(a);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":i[a]=Number(e.stat(a));break}return i},n)),n}function Iw(r,t){var e=t.simulateExceptionWhileStandardizingStats,n=e===void 0?!1:e;if(n)throw new Error("Error while gathering stats");var i=null,a=[],o=null,s=null,c=null,l=null,u=null;r.forEach(function(_){var S=_.type;switch(S){case"inbound-rtp":i=_;break;case"outbound-rtp":a.push(_);break;case"media-source":u=_;break;case"track":c=_;break;case"codec":l=_;break;case"remote-inbound-rtp":o=_;break;case"remote-outbound-rtp":s=_;break}});var d=c?c.remoteSource:!u,v=d?[i]:a,p=[],y=d?s:o;return v.forEach(function(_){var S={},w=[_,u,c,l,y&&y.ssrc===_.ssrc?y:null];function x(ee){var oe=w.find(function(ue){return ue&&typeof ue[ee]<"u"})||null;return oe?oe[ee]:null}var k=x("ssrc");typeof k=="number"&&(S.ssrc=String(k));var T=x("timestamp");S.timestamp=Math.round(T);var R=x("mimeType");typeof R=="string"&&(R=R.split("/"),S.codecName=R[R.length-1]);var U=x("roundTripTime");typeof U=="number"&&(S.roundTripTime=Math.round(U*1e3));var $=x("jitter");typeof $=="number"&&(S.jitter=Math.round($*1e3));var F=x("frameWidth");typeof F=="number"&&(d?S.frameWidthReceived=F:(S.frameWidthSent=F,S.frameWidthInput=c?c.frameWidth:u.width));var M=x("frameHeight");typeof M=="number"&&(d?S.frameHeightReceived=M:(S.frameHeightSent=M,S.frameHeightInput=c?c.frameHeight:u.height));var J=x("framesPerSecond");typeof J=="number"&&(S[d?"frameRateReceived":"frameRateSent"]=J);var O=x("bytesReceived");typeof O=="number"&&(S.bytesReceived=O);var N=x("bytesSent");typeof N=="number"&&(S.bytesSent=N);var q=x("packetsLost");typeof q=="number"&&(S.packetsLost=q);var j=x("packetsReceived");typeof j=="number"&&(S.packetsReceived=j);var Z=x("packetsSent");typeof Z=="number"&&(S.packetsSent=Z);var X=x("audioLevel");typeof X=="number"&&(X=Math.round(X*p8),d?S.audioOutputLevel=X:S.audioInputLevel=X);var se=x("totalPacketSendDelay");typeof se=="number"&&(S.totalPacketSendDelay=se);var H=x("totalEncodeTime");typeof H=="number"&&(S.totalEncodeTime=H);var ie=x("framesEncoded");typeof ie=="number"&&(S.framesEncoded=ie);var fe=x("estimatedPlayoutTimestamp");typeof fe=="number"&&(S.estimatedPlayoutTimestamp=fe);var ne=x("totalDecodeTime");typeof ne=="number"&&(S.totalDecodeTime=ne);var E=x("framesDecoded");typeof E=="number"&&(S.framesDecoded=E);var W=x("jitterBufferDelay");typeof W=="number"&&(S.jitterBufferDelay=W);var G=x("jitterBufferEmittedCount");typeof G=="number"&&(S.jitterBufferEmittedCount=G),p.push(S)}),p}function P8(r,t){r===void 0&&(r=new Map);var e=t.isRemote,n=t.simulateExceptionWhileStandardizingStats,i=n===void 0?!1:n;if(i)throw new Error("Error while gathering stats");var a=null,o=null;r.forEach(function(j){var Z=j.isRemote,X=j.remoteId,se=j.type;if(!Z)switch(se){case"inbound-rtp":a=j,o=Zl(r,X);break;case"outbound-rtp":o=j,a=Zl(r,X);break}});var s=e?a:o,c=e?o:a;function l(j){return s&&typeof s[j]<"u"?s[j]:c&&typeof c[j]<"u"?c[j]:null}var u={},d=l("timestamp");u.timestamp=Math.round(d);var v=l("ssrc");typeof v=="number"&&(u.ssrc=String(v));var p=l("bytesSent");typeof p=="number"&&(u.bytesSent=p);var y=l("packetsLost");typeof y=="number"&&(u.packetsLost=y);var _=l("packetsSent");typeof _=="number"&&(u.packetsSent=_);var S=l("roundTripTime");typeof S=="number"&&(u.roundTripTime=Math.round(S*1e3));var w=l("jitter");typeof w=="number"&&(u.jitter=Math.round(w*1e3));var x=l("framerateMean");typeof x=="number"&&(u.frameRateSent=Math.round(x));var k=l("bytesReceived");typeof k=="number"&&(u.bytesReceived=k);var T=l("packetsReceived");typeof T=="number"&&(u.packetsReceived=T);var R=l("framerateMean");typeof R=="number"&&(u.frameRateReceived=Math.round(R));var U=l("totalPacketSendDelay");typeof U=="number"&&(u.totalPacketSendDelay=U);var $=l("totalEncodeTime");typeof $=="number"&&(u.totalEncodeTime=$);var F=l("framesEncoded");typeof F=="number"&&(u.framesEncoded=F);var M=l("estimatedPlayoutTimestamp");typeof M=="number"&&(u.estimatedPlayoutTimestamp=M);var J=l("totalDecodeTime");typeof J=="number"&&(u.totalDecodeTime=J);var O=l("framesDecoded");typeof O=="number"&&(u.framesDecoded=O);var N=l("jitterBufferDelay");typeof N=="number"&&(u.jitterBufferDelay=N);var q=l("jitterBufferEmittedCount");return typeof q=="number"&&(u.jitterBufferEmittedCount=q),u}var T8=m8;function E8(r){return r===void 0&&(r={audio:!0,video:!0}),typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(r):Promise.reject(new Error("getUserMedia is not supported"))}var C8=E8,q0={exports:{}};typeof MediaStream=="function"?q0.exports=MediaStream:q0.exports=function(){throw new Error("MediaStream is not supported")};var f3=q0.exports,H0={exports:{}};typeof MediaStreamTrack=="function"?H0.exports=MediaStreamTrack:H0.exports=function(){throw new Error("MediaStreamTrack is not supported")};var L8=H0.exports,G0={exports:{}};typeof RTCIceCandidate=="function"?G0.exports=RTCIceCandidate:G0.exports=function(){throw new Error("RTCIceCandidate is not supported")};var O8=G0.exports,pl={exports:{}},Mm,Mw;function d3(){if(Mw)return Mm;Mw=1;var r=function(){function t(e){this.descriptionInitDict=e;var n=e&&e.type==="rollback"?null:new RTCSessionDescription(e);Object.defineProperties(this,{_description:{get:function(){return n}}})}return Object.defineProperty(t.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),t}();return Mm=r,Mm}var M1={exports:{}},Bl=typeof Reflect=="object"?Reflect:null,Dw=Bl&&typeof Bl.apply=="function"?Bl.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},yh;Bl&&typeof Bl.ownKeys=="function"?yh=Bl.ownKeys:Object.getOwnPropertySymbols?yh=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:yh=function(t){return Object.getOwnPropertyNames(t)};function A8(r){console&&console.warn&&console.warn(r)}var h3=Number.isNaN||function(t){return t!==t};function Vt(){Vt.init.call(this)}M1.exports=Vt;M1.exports.once=I8;Vt.EventEmitter=Vt;Vt.prototype._events=void 0;Vt.prototype._eventsCount=0;Vt.prototype._maxListeners=void 0;var Fw=10;function $p(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Vt,"defaultMaxListeners",{enumerable:!0,get:function(){return Fw},set:function(r){if(typeof r!="number"||r<0||h3(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Fw=r}});Vt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Vt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||h3(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function p3(r){return r._maxListeners===void 0?Vt.defaultMaxListeners:r._maxListeners}Vt.prototype.getMaxListeners=function(){return p3(this)};Vt.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=a[t];if(c===void 0)return!1;if(typeof c=="function")Dw(c,this,e);else for(var l=c.length,u=_3(c,l),n=0;n<l;++n)Dw(u[n],this,e);return!0};function v3(r,t,e,n){var i,a,o;if($p(e),a=r._events,a===void 0?(a=r._events=Object.create(null),r._eventsCount=0):(a.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),a=r._events),o=a[t]),o===void 0)o=a[t]=e,++r._eventsCount;else if(typeof o=="function"?o=a[t]=n?[e,o]:[o,e]:n?o.unshift(e):o.push(e),i=p3(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=r,s.type=t,s.count=o.length,A8(s)}return r}Vt.prototype.addListener=function(t,e){return v3(this,t,e,!1)};Vt.prototype.on=Vt.prototype.addListener;Vt.prototype.prependListener=function(t,e){return v3(this,t,e,!0)};function N8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m3(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},i=N8.bind(n);return i.listener=e,n.wrapFn=i,i}Vt.prototype.once=function(t,e){return $p(e),this.on(t,m3(this,t,e)),this};Vt.prototype.prependOnceListener=function(t,e){return $p(e),this.prependListener(t,m3(this,t,e)),this};Vt.prototype.removeListener=function(t,e){var n,i,a,o,s;if($p(e),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():R8(n,a),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,s||e)}return this};Vt.prototype.off=Vt.prototype.removeListener;Vt.prototype.removeAllListeners=function(t){var e,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function g3(r,t,e){var n=r._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?j8(i):_3(i,i.length)}Vt.prototype.listeners=function(t){return g3(this,t,!0)};Vt.prototype.rawListeners=function(t){return g3(this,t,!1)};Vt.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):y3.call(r,t)};Vt.prototype.listenerCount=y3;function y3(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}Vt.prototype.eventNames=function(){return this._eventsCount>0?yh(this._events):[]};function _3(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function R8(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function j8(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function I8(r,t){return new Promise(function(e,n){function i(o){r.removeListener(t,a),n(o)}function a(){typeof r.removeListener=="function"&&r.removeListener("error",i),e([].slice.call(arguments))}w3(r,t,a,{once:!0}),t!=="error"&&M8(r,i,{once:!0})})}function M8(r,t,e){typeof r.on=="function"&&w3(r,"error",t,e)}function w3(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function i(a){n.once&&r.removeEventListener(t,i),e(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var yn=M1.exports,Dm,Bw;function D1(){if(Bw)return Dm;Bw=1;var r=A&&A.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var s=o.call(i),c,l=[],u;try{for(;(a===void 0||a-- >0)&&!(c=s.next()).done;)l.push(c.value)}catch(d){u={error:d}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(u)throw u.error}}return l},t=A&&A.__spreadArray||function(i,a){for(var o=0,s=a.length,c=i.length;o<s;o++,c++)i[c]=a[o];return i},e=yn.EventEmitter,n=function(){function i(){Object.defineProperties(this,{_eventEmitter:{value:new e}})}return i.prototype.dispatchEvent=function(a){return this._eventEmitter.emit(a.type,a)},i.prototype.addEventListener=function(){var a;return(a=this._eventEmitter).addListener.apply(a,t([],r(arguments)))},i.prototype.removeEventListener=function(){var a;return(a=this._eventEmitter).removeListener.apply(a,t([],r(arguments)))},i}();return Dm=n,Dm}var Fm,Uw;function b3(){if(Uw)return Fm;Uw=1;var r=Dt.defer,t={high:new Set(["low"]),low:new Set(["high"])},e=function(){function i(a){a===void 0&&(a="low");var o=a;Object.defineProperties(this,{_state:{set:function(s){var c=this;if(o!==s){o=s;var l=this._whenDeferreds.get(o);l.forEach(function(u){return u.resolve(c)}),l.clear()}},get:function(){return o}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),i.prototype.lower=function(){return this.transition("low")},i.prototype.raise=function(){return this.transition("high")},i.prototype.transition=function(a){if(!t[this.state].has(a))throw n(this.state,a);return this._state=a,this},i.prototype.when=function(a){if(this.state===a)return Promise.resolve(this);if(!t[this.state].has(a))return Promise.reject(n(this.state,a));var o=r();return this._whenDeferreds.get(a).add(o),o.promise},i}();function n(i,a){return new Error('Cannot transition from "'+i+'" to "'+a+'"')}return Fm=e,Fm}var Bm,$w;function D8(){if($w)return Bm;$w=1;var r=function(){function t(e){Object.defineProperties(this,{track:{enumerable:!0,value:e,writable:!0}})}return t}();return Bm=r,Bm}var Um,Vw;function F8(){if(Vw)return Um;Vw=1;var r=A&&A.__extends||function(){var N=function(q,j){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,X){Z.__proto__=X}||function(Z,X){for(var se in X)Object.prototype.hasOwnProperty.call(X,se)&&(Z[se]=X[se])},N(q,j)};return function(q,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");N(q,j);function Z(){this.constructor=q}q.prototype=j===null?Object.create(j):(Z.prototype=j.prototype,new Z)}}(),t=A&&A.__read||function(N,q){var j=typeof Symbol=="function"&&N[Symbol.iterator];if(!j)return N;var Z=j.call(N),X,se=[],H;try{for(;(q===void 0||q-- >0)&&!(X=Z.next()).done;)se.push(X.value)}catch(ie){H={error:ie}}finally{try{X&&!X.done&&(j=Z.return)&&j.call(Z)}finally{if(H)throw H.error}}return se},e=A&&A.__spreadArray||function(N,q){for(var j=0,Z=q.length,X=N.length;j<Z;j++,X++)N[X]=q[j];return N},n=d3(),i=D1(),a=b3(),o=f3,s=D8(),c=An,l=c.getSdpFormat,u=c.updatePlanBTrackIdsToSSRCs,d=c.updateUnifiedPlanTrackIdsToSSRCs,v=Dt,p=v.delegateMethods,y=v.interceptEvent,_=v.isIOSChrome,S=v.legacyPromise,w=v.proxyProperties,x=l()==="unified",k=function(N){r(q,N);function q(j,Z){j===void 0&&(j={});var X=N.call(this)||this,se=Object.assign(j.iceTransportPolicy?{iceTransports:j.iceTransportPolicy}:{},j);y(X,"datachannel"),y(X,"signalingstatechange");var H=l(se.sdpSemantics),ie=new RTCPeerConnection(se,Z);return Object.defineProperties(X,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new o},_peerConnection:{value:ie},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:H},_senders:{value:new Map},_signalingStateLatch:{value:new a},_tracksToSSRCs:{value:new Map,writable:!0}}),ie.addEventListener("datachannel",function(fe){J(fe.channel),X.dispatchEvent(fe)}),ie.addEventListener("signalingstatechange",function(){for(var fe=[],ne=0;ne<arguments.length;ne++)fe[ne]=arguments[ne];ie.signalingState==="stable"&&(X._appliedTracksToSSRCs=new Map(X._tracksToSSRCs)),!X._pendingLocalOffer&&!X._pendingRemoteOffer&&X.dispatchEvent.apply(X,e([],t(fe)))}),ie.ontrack=function(){},typeof ie.addTrack!="function"&&ie.addStream(X._localStream),w(RTCPeerConnection.prototype,X,ie),X}return Object.defineProperty(q.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),q.prototype.addTrack=function(j){for(var Z,X=[],se=1;se<arguments.length;se++)X[se-1]=arguments[se];if(typeof this._peerConnection.addTrack=="function")return(Z=this._peerConnection).addTrack.apply(Z,e([j],t(X)));if(this._peerConnection.signalingState==="closed")throw new Error("Cannot add MediaStreamTrack ["+j.id+`, 
        `+j.kind+"]: RTCPeerConnection is closed");var H=this._senders.get(j);if(H&&H.track)throw new Error("Cannot add MediaStreamTrack ['"+j.id+`, 
        `+j.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(j),this._peerConnection.addStream(this._localStream),H=new s(j),this._senders.set(j,H),H},q.prototype.removeTrack=function(j){if(this._peerConnection.signalingState==="closed")throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if(typeof this._peerConnection.addTrack=="function")try{return this._peerConnection.removeTrack(j)}catch{}else{var Z=j.track;if(!Z)return;j=this._senders.get(Z),j&&j.track&&(j.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(Z),this._peerConnection.addStream(this._localStream))}},q.prototype.getSenders=function(){return typeof this._peerConnection.addTrack=="function"?this._peerConnection.getSenders():Array.from(this._senders.values())},q.prototype.addIceCandidate=function(j){for(var Z=this,X=[],se=1;se<arguments.length;se++)X[se-1]=arguments[se];var H;return this.signalingState==="have-remote-offer"?H=this._signalingStateLatch.when("low").then(function(){return Z._peerConnection.addIceCandidate(j)}):H=this._peerConnection.addIceCandidate(j),X.length>0?S.apply(void 0,e([H],t(X))):H},q.prototype.close=function(){this.signalingState!=="closed"&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},q.prototype.createAnswer=function(){for(var j=this,Z=[],X=0;X<arguments.length;X++)Z[X]=arguments[X];var se;return this._pendingRemoteOffer?se=this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return j._signalingStateLatch.lower(),j._peerConnection.createAnswer()}).then(function(H){return j._pendingRemoteOffer=null,j._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:O(j._sdpFormat,j._tracksToSSRCs,H.sdp)})},function(H){throw j._pendingRemoteOffer=null,H}):se=this._peerConnection.createAnswer().then(function(H){return j._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:O(j._sdpFormat,j._tracksToSSRCs,H.sdp)})}),Z.length>1?S.apply(void 0,e([se],t(Z))):se},q.prototype.createOffer=function(){for(var j=this,Z=[],X=0;X<arguments.length;X++)Z[X]=arguments[X];var se=t(Z,3),H=se[0],ie=se[1],fe=se[2],ne=fe||H||{};if(_()){if(ne.offerToReceiveVideo&&!this._audioTransceiver&&!(x&&U(this,"audio"))){delete ne.offerToReceiveAudio;try{this._audioTransceiver=x?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(W){return Promise.reject(W)}}if(ne.offerToReceiveVideo&&!this._videoTransceiver&&!(x&&U(this,"video"))){delete ne.offerToReceiveVideo;try{this._videoTransceiver=x?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(W){return Promise.reject(W)}}}var E=this._peerConnection.createOffer(ne).then(function(W){return j._rolledBackTracksToSSRCs.clear(),new n({type:W.type,sdp:O(j._sdpFormat,j._tracksToSSRCs,W.sdp)})});return Z.length>1?S(E,H,ie):E},q.prototype.createDataChannel=function(j,Z){Z=M(Z);var X=this._peerConnection.createDataChannel(j,Z);return J(X),X},q.prototype.setLocalDescription=function(){for(var j=[],Z=0;Z<arguments.length;Z++)j[Z]=arguments[Z];var X=t(j,3),se=X[0],H=X[1],ie=X[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var fe=T(this,!0,se);return j.length>1?S(fe,H,ie):fe},q.prototype.setRemoteDescription=function(){for(var j=[],Z=0;Z<arguments.length;Z++)j[Z]=arguments[Z];var X=t(j,3),se=X[0],H=X[1],ie=X[2];this._rolledBackTracksToSSRCs.clear();var fe=T(this,!1,se);return j.length>1?S(fe,H,ie):fe},q}(i);p(RTCPeerConnection.prototype,k.prototype,"_peerConnection");function T(N,q,j){function Z(W){q?N._pendingLocalOffer=W:N._pendingRemoteOffer=W}function X(){q?N._pendingLocalOffer=null:N._pendingRemoteOffer=null}var se=q?N._pendingLocalOffer:N._pendingRemoteOffer,H=q?N._pendingRemoteOffer:N._pendingLocalOffer,ie=q?"have-local-offer":"have-remote-offer",fe=q?"setLocalDescription":"setRemoteDescription",ne;if(!q&&H&&j.type==="answer")ne=R(N,j);else if(j.type==="offer"){if(N.signalingState!==ie&&N.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+(q?"local":"remote")+" offer in state "+N.signalingState));!se&&N._signalingStateLatch.state==="low"&&N._signalingStateLatch.raise();var E=N.signalingState;Z($(j)),ne=Promise.resolve(),N.signalingState!==E&&ne.then(function(){return N.dispatchEvent(new Event("signalingstatechange"))})}else j.type==="rollback"&&(N.signalingState!==ie?ne=Promise.reject(new Error("Cannot rollback "+(q?"local":"remote")+" description in "+N.signalingState)):(X(),N._rolledBackTracksToSSRCs=new Map(N._tracksToSSRCs),N._tracksToSSRCs=new Map(N._appliedTracksToSSRCs),ne=Promise.resolve(),ne.then(function(){return N.dispatchEvent(new Event("signalingstatechange"))})));return ne||N._peerConnection[fe]($(j))}function R(N,q){var j=N._pendingLocalOffer;return N._peerConnection.setLocalDescription(j).then(function(){return N._pendingLocalOffer=null,N.setRemoteDescription(q)}).then(function(){N._signalingStateLatch.lower()})}function U(N,q){return!!N.getTransceivers().find(function(j){var Z=j.receiver,X=Z===void 0?{}:Z,se=X.track,H=se===void 0?{}:se;return H.kind===q})}function $(N){return N instanceof n&&N._description?N._description:new RTCSessionDescription(N)}function F(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function M(N){return N=Object.assign({},N),F()&&"maxPacketLifeTime"in N&&(N.maxRetransmitTime=N.maxPacketLifeTime),N}function J(N){return Object.defineProperty(N,"maxRetransmits",{value:N.maxRetransmits===65535?null:N.maxRetransmits}),F()&&Object.defineProperty(N,"maxPacketLifeTime",{value:N.maxRetransmitTime===65535?null:N.maxRetransmitTime}),N}function O(N,q,j){return N==="unified"?d(q,j):u(q,j)}return Um=k,Um}var $m,zw;function x3(){return zw||(zw=1,$m=RTCSessionDescription),$m}var Vm,Ww;function B8(){if(Ww)return Vm;Ww=1;var r=A&&A.__extends||function(){var _=function(S,w){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,k){x.__proto__=k}||function(x,k){for(var T in k)Object.prototype.hasOwnProperty.call(k,T)&&(x[T]=k[T])},_(S,w)};return function(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");_(S,w);function x(){this.constructor=S}S.prototype=w===null?Object.create(w):(x.prototype=w.prototype,new x)}}(),t=A&&A.__read||function(_,S){var w=typeof Symbol=="function"&&_[Symbol.iterator];if(!w)return _;var x=w.call(_),k,T=[],R;try{for(;(S===void 0||S-- >0)&&!(k=x.next()).done;)T.push(k.value)}catch(U){R={error:U}}finally{try{k&&!k.done&&(w=x.return)&&w.call(x)}finally{if(R)throw R.error}}return T},e=A&&A.__spreadArray||function(_,S){for(var w=0,x=S.length,k=_.length;w<x;w++,k++)_[k]=S[w];return _},n=D1(),i=x3(),a=An.updateUnifiedPlanTrackIdsToSSRCs,o=Dt,s=o.delegateMethods,c=o.interceptEvent,l=o.legacyPromise,u=o.proxyProperties,d=function(_){r(S,_);function S(w){var x=_.call(this)||this;c(x,"signalingstatechange");var k=new RTCPeerConnection(w);Object.defineProperties(x,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:k},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}});var T;return k.addEventListener("signalingstatechange",function(){for(var R=[],U=0;U<arguments.length;U++)R[U]=arguments[U];!x._rollingBack&&x.signalingState!==T&&(T=x.signalingState,x._isClosed?setTimeout(function(){return x.dispatchEvent.apply(x,e([],t(R)))}):x.dispatchEvent.apply(x,e([],t(R))))}),u(RTCPeerConnection.prototype,x,k),x}return Object.defineProperty(S.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"localDescription",{get:function(){return y(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),S.prototype.createAnswer=function(){for(var w=this,x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var T;return T=this._peerConnection.createAnswer().then(function(R){return p(w,R),y(R,w._initiallyNegotiatedDtlsRole)}),typeof x[0]=="function"?l.apply(void 0,e([T],t(x))):T},S.prototype.createOffer=function(){for(var w=this,x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var T=t(x,3),R=T[0],U=T[1],$=T[2],F=$||R||{},M;if(this.signalingState==="have-local-offer"||this.signalingState==="have-remote-offer"){var J=this.signalingState==="have-local-offer";M=v(this,J,function(){return w.createOffer(F)})}else M=this._peerConnection.createOffer(F);return M=M.then(function(O){return new i({type:O.type,sdp:a(w._tracksToSSRCs,O.sdp)})}),x.length>1?l(M,R,U):M},S.prototype.setLocalDescription=function(){for(var w,x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var T=t(x),R=T[0],U=T.slice(1),$;return R&&R.type==="answer"&&this.signalingState==="have-local-offer"&&($=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),$?x.length>1?l.apply(void 0,e([$],t(U))):$:(w=this._peerConnection).setLocalDescription.apply(w,e([],t(x)))},S.prototype.setRemoteDescription=function(){for(var w=this,x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var T=t(x),R=T[0],U=T.slice(1),$;return R&&this.signalingState==="have-remote-offer"&&(R.type==="answer"?$=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):R.type==="offer"&&($=v(this,!1,function(){return w._peerConnection.setRemoteDescription(R)}))),$||($=this._peerConnection.setRemoteDescription(R)),$=$.then(function(){return p(w,R,!0)}),x.length>1?l.apply(void 0,e([$],t(U))):$},S.prototype.close=function(){this.signalingState!=="closed"&&(this._isClosed=!0,this._peerConnection.close())},S}(n);s(RTCPeerConnection.prototype,d.prototype,"_peerConnection");function v(_,S,w){var x=S?"setLocalDescription":"setRemoteDescription";return _._rollingBack=!0,_._peerConnection[x](new i({type:"rollback"})).then(w).then(function(k){return _._rollingBack=!1,k},function(k){throw _._rollingBack=!1,k})}function p(_,S,w){if(!(_._initiallyNegotiatedDtlsRole||S.type==="offer")){var x=S.sdp.match(/a=setup:([a-z]+)/);if(x){var k=x[1];_._initiallyNegotiatedDtlsRole=w?{active:"passive",passive:"active"}[k]:k}}}function y(_,S){return _&&_.type==="answer"&&S?new i({type:_.type,sdp:_.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+S)}):_}return Vm=d,Vm}var zm,qw;function U8(){if(qw)return zm;qw=1;var r=A&&A.__extends||function(){var T=function(R,U){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,F){$.__proto__=F}||function($,F){for(var M in F)Object.prototype.hasOwnProperty.call(F,M)&&($[M]=F[M])},T(R,U)};return function(R,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");T(R,U);function $(){this.constructor=R}R.prototype=U===null?Object.create(U):($.prototype=U.prototype,new $)}}(),t=A&&A.__read||function(T,R){var U=typeof Symbol=="function"&&T[Symbol.iterator];if(!U)return T;var $=U.call(T),F,M=[],J;try{for(;(R===void 0||R-- >0)&&!(F=$.next()).done;)M.push(F.value)}catch(O){J={error:O}}finally{try{F&&!F.done&&(U=$.return)&&U.call($)}finally{if(J)throw J.error}}return M},e=A&&A.__spreadArray||function(T,R){for(var U=0,$=R.length,F=T.length;U<$;U++,F++)T[F]=R[U];return T},n=D1(),i=b3(),a=An,o=a.getSdpFormat,s=a.updatePlanBTrackIdsToSSRCs,c=a.updateUnifiedPlanTrackIdsToSSRCs,l=Dt,u=l.delegateMethods,d=l.interceptEvent,v=l.proxyProperties,p=o()==="unified",y=p?c:s,_=function(T){r(R,T);function R(U){var $=T.call(this)||this;d($,"datachannel"),d($,"iceconnectionstatechange"),d($,"signalingstatechange"),d($,"track");var F=new RTCPeerConnection(U);return Object.defineProperties($,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:F},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new i},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),F.addEventListener("datachannel",function(M){k(M.channel),$.dispatchEvent(M)}),F.addEventListener("iceconnectionstatechange",function(){for(var M=[],J=0;J<arguments.length;J++)M[J]=arguments[J];$._isClosed||$.dispatchEvent.apply($,e([],t(M)))}),F.addEventListener("signalingstatechange",function(){for(var M=[],J=0;J<arguments.length;J++)M[J]=arguments[J];$._isClosed||(F.signalingState==="stable"&&($._appliedTracksToSSRCs=new Map($._tracksToSSRCs)),!$._pendingLocalOffer&&!$._pendingRemoteOffer&&$.dispatchEvent.apply($,e([],t(M))))}),F.addEventListener("track",function(M){$._pendingRemoteOffer=null,$.dispatchEvent(M)}),v(RTCPeerConnection.prototype,$,F),$}return Object.defineProperty(R.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),R.prototype.addIceCandidate=function(U){var $=this;return this.signalingState==="have-remote-offer"?this._signalingStateLatch.when("low").then(function(){return $._peerConnection.addIceCandidate(U)}):this._peerConnection.addIceCandidate(U)},R.prototype.createOffer=function(U){var $=this;if(U=Object.assign({},U),U.offerToReceiveVideo&&!this._audioTransceiver&&!(p&&x(this,"audio"))){delete U.offerToReceiveAudio;try{this._audioTransceiver=p?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(F){return Promise.reject(F)}}if(U.offerToReceiveVideo&&!this._videoTransceiver&&!(p&&x(this,"video"))){delete U.offerToReceiveVideo;try{this._videoTransceiver=p?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(F){return Promise.reject(F)}}return this._peerConnection.createOffer(U).then(function(F){return $._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:F.type,sdp:y($._tracksToSSRCs,F.sdp)})})},R.prototype.createAnswer=function(U){var $=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return $._signalingStateLatch.lower(),$._peerConnection.createAnswer()}).then(function(F){return $._pendingRemoteOffer=null,$._rolledBackTracksToSSRCs.clear(),p?new RTCSessionDescription({type:F.type,sdp:y($._tracksToSSRCs,F.sdp)}):F},function(F){throw $._pendingRemoteOffer=null,F}):this._peerConnection.createAnswer(U).then(function(F){return $._rolledBackTracksToSSRCs.clear(),p?new RTCSessionDescription({type:F.type,sdp:y($._tracksToSSRCs,F.sdp)}):F})},R.prototype.createDataChannel=function(U,$){var F=this._peerConnection.createDataChannel(U,$);return k(F),F},R.prototype.removeTrack=function(U){U.replaceTrack(null),this._peerConnection.removeTrack(U)},R.prototype.setLocalDescription=function(U){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),S(this,!0,U)},R.prototype.setRemoteDescription=function(U){return this._rolledBackTracksToSSRCs.clear(),S(this,!1,U)},R.prototype.close=function(){var U=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout(function(){U.dispatchEvent(new Event("iceconnectionstatechange")),U.dispatchEvent(new Event("signalingstatechange"))}))},R}(n);u(RTCPeerConnection.prototype,_.prototype,"_peerConnection");function S(T,R,U){function $(j){R?T._pendingLocalOffer=j:T._pendingRemoteOffer=j}function F(){R?T._pendingLocalOffer=null:T._pendingRemoteOffer=null}var M=R?T._pendingLocalOffer:T._pendingRemoteOffer,J=R?T._pendingRemoteOffer:T._pendingLocalOffer,O=R?"have-local-offer":"have-remote-offer",N=R?"setLocalDescription":"setRemoteDescription";if(!R&&J&&U.type==="answer")return w(T,U);if(U.type==="offer"){if(T.signalingState!==O&&T.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+(R?"local":"remote")+`
        offer in state `+T.signalingState));!M&&T._signalingStateLatch.state==="low"&&T._signalingStateLatch.raise();var q=T.signalingState;return $(U),T.signalingState!==q?Promise.resolve().then(function(){return T.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}else if(U.type==="rollback")return T.signalingState!==O?Promise.reject(new Error(`Cannot rollback 
        `+(R?"local":"remote")+" description in "+T.signalingState)):(F(),T._rolledBackTracksToSSRCs=new Map(T._tracksToSSRCs),T._tracksToSSRCs=new Map(T._appliedTracksToSSRCs),Promise.resolve().then(function(){return T.dispatchEvent(new Event("signalingstatechange"))}));return T._peerConnection[N](U)}function w(T,R){var U=T._pendingLocalOffer;return T._peerConnection.setLocalDescription(U).then(function(){return T._pendingLocalOffer=null,T.setRemoteDescription(R)}).then(function(){return T._signalingStateLatch.lower()})}function x(T,R){return!!T.getTransceivers().find(function(U){var $=U.receiver,F=$===void 0?{}:$,M=F.track,J=M===void 0?{}:M;return J.kind===R})}function k(T){return Object.defineProperties(T,{maxPacketLifeTime:{value:T.maxPacketLifeTime===65535?null:T.maxPacketLifeTime},maxRetransmits:{value:T.maxRetransmits===65535?null:T.maxRetransmits}})}return zm=_,zm}if(typeof RTCPeerConnection=="function"){var $8=Dt.guessBrowser;switch($8()){case"chrome":pl.exports=F8();break;case"firefox":pl.exports=B8();break;case"safari":pl.exports=U8();break;default:pl.exports=RTCPeerConnection;break}}else pl.exports=function(){throw new Error("RTCPeerConnection is not supported")};var V8=pl.exports,vu={exports:{}};if(typeof RTCSessionDescription=="function"){var z8=Dt.guessBrowser;switch(z8()){case"chrome":vu.exports=d3();break;case"firefox":vu.exports=x3();break;default:vu.exports=RTCSessionDescription;break}}else vu.exports=function(){throw new Error("RTCSessionDescription is not supported")};var W8=vu.exports,S3={};Object.defineProperties(S3,{getStats:{enumerable:!0,value:T8},getUserMedia:{enumerable:!0,value:C8},MediaStream:{enumerable:!0,value:f3},MediaStreamTrack:{enumerable:!0,value:L8},RTCIceCandidate:{enumerable:!0,value:O8},RTCPeerConnection:{enumerable:!0,value:V8},RTCSessionDescription:{enumerable:!0,value:W8}});var Ds=S3,F1=function(t,e){if(t&&e)if(t.super_=e,typeof Object.create=="function")t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{var n=function(){function i(){}return i}();n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},q8=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};function H8(){return/Android/.test(navigator.userAgent)}function k3(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function P3(){return k3()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function T3(){return k3()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}function G8(){return P3()||T3()}function K8(){return/Mobi/.test(navigator.userAgent)}function Q8(r){return r==="chrome"&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")}function Y8(r){if(r!=="chrome")return null;if("brave"in navigator)return"brave";var t=X8(navigator.userAgent),e=t.reduce(function(o,s){return o.replace(s,"")},navigator.userAgent),n=e.match(/[^\s]+/g)||[],i=q8(n.map(function(o){return o.split("/")[0].toLowerCase()})),a=i.slice(2);return a.find(function(o){return!["chrome","mobile","safari"].includes(o)})||null}function J8(r){return r!=="safari"?null:"brave"in navigator?"brave":["edge","edg"].find(function(t){return navigator.userAgent.toLowerCase().includes(t)})||null}function X8(r){for(var t=[],e=[],n=0;n<r.length;n++)if(r[n]==="(")t.push(n);else if(r[n]===")"&&t.length>0){var i=t.pop();t.length===0&&e.push(r.substring(i,n+1))}return e}var Fs={isAndroid:H8,isIOS:G8,isIpad:P3,isIphone:T3,isMobile:K8,isNonChromiumEdge:Q8,mobileWebKitBrowser:J8,rebrandedChromeBrowser:Y8};function Z8(r){return r=typeof r=="number"?r:0,new Promise(function(t){return setTimeout(t,r)})}function ej(r,t,e){e=typeof e=="number"?e:250;var n=r.createMediaStreamSource(t),i=r.createAnalyser();i.fftSize=2048,n.connect(i);var a=new Uint8Array(i.fftSize),o=!1;setTimeout(function(){o=!0},e);function s(){return o?Promise.resolve(!0):(i.getByteTimeDomainData(a),a.some(function(c){return c!==128&&c!==0})?Promise.resolve(!1):Z8().then(s))}return s().then(function(c){return n.disconnect(),c},function(c){throw n.disconnect(),c})}var E3=ej,Wm,Hw;function Vp(){if(Hw)return Wm;Hw=1;var r=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,t=function(){function e(n){n=Object.assign({AudioContext:r},n),Object.defineProperties(this,{_AudioContext:{value:n.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:e}})}return e.prototype.getOrCreate=function(n){if(!this._holders.has(n)&&(this._holders.add(n),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},e.prototype.release=function(n){this._holders.has(n)&&(this._holders.delete(n),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},e}();return Wm=new t,Wm}var tj=E3,rj=3,nj=250;function ij(r){var t=Vp(),e={},n=t.getOrCreate(e),i=rj;function a(){return i--,tj(n,r.srcObject,nj).then(function(o){return o?i>0?a():!0:!1}).catch(function(){return!0})}return a().finally(function(){t.release(e)})}var C3=ij,Td=De.defer,aj=function(){function r(){Object.defineProperties(this,{_audio:{value:Td(),writable:!0},_video:{value:Td(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return r.prototype.resolveDeferred=function(t){t==="audio"?this._audio.resolve():this._video.resolve()},r.prototype.startDeferred=function(t){t==="audio"?this._audio=Td():this._video=Td()},r.prototype.whenResolved=function(t){return t==="audio"?this._audio.promise:this._video.promise},r}(),L3=new aj,oj=yn.EventEmitter,sj=De.hidePrivateAndCertainPublicPropertiesInClass,df=sj(oj,["domain"]),lj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cj=df,O3=De,uj=O3.buildLogLevels,fj=O3.valueToJSON,dj=zt.DEFAULT_LOG_LEVEL,hj=Da,pj=0,vj=function(r){lj(t,r);function t(e,n,i){var a=this;i=Object.assign({name:e,log:null,logLevel:dj},i),a=r.call(this)||this;var o=String(i.name),s=uj(i.logLevel),c=i.log?i.log.createLog("media",a):new hj("media",a,s,i.loggerName);return Object.defineProperties(a,{_instanceId:{value:++pj},_log:{value:c},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:o}}),a}return t.prototype.toJSON=function(){return fj(this)},t}(cj),B1=vj,mj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gj=Fs.isIOS,yj=Ds.MediaStream,A3=De,_j=A3.waitForEvent,wj=A3.waitForSometime,bj=L3,xj=B1,Sj=function(r){mj(t,r);function t(e,n){var i=this;n=Object.assign({playPausedElementsIfNotBackgrounded:gj()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},n),i=r.call(this,e.id,e.kind,n)||this;var a=!1;if(n=Object.assign({MediaStream:yj},n),typeof n.MediaStream!="function")throw new Error("MediaTrack received an invalid MediaStream constructor: "+n.MediaStream);return Object.defineProperties(i,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return a},set:function(o){a=o}},_playPausedElementsIfNotBackgrounded:{value:n.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:n.workaroundWebKitBug212780||n.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement},isStarted:{enumerable:!0,get:function(){return a}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||e.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),i._initialize(),i}return t.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},t.prototype._initialize=function(){var e=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack&&this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("ended",function n(){e._end(),e.mediaStreamTrack.removeEventListener("ended",n)}):this.mediaStreamTrack&&(this.mediaStreamTrack.onended=function(){e._end(),e.mediaStreamTrack.onended=null}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},t.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},t.prototype.attach=function(e){var n=this;if(typeof e=="string"?e=this._selectElement(e):e||(e=this._createElement()),this._log.debug("Attempting to attach to element:",e),e=this._attach(e),this._shouldShimAttachedElements&&!this._elShims.has(e)){var i=this._playPausedElementsIfNotBackgrounded?function(){return kj(e,n._log)}:null;this._elShims.set(e,Pj(e,i))}return e},t.prototype._attach=function(e,n){n===void 0&&(n=this.processedTrack||this.mediaStreamTrack);var i=e.srcObject;i instanceof this._MediaStream||(i=new this._MediaStream);var a=n.kind==="audio"?"getAudioTracks":"getVideoTracks";return i[a]().forEach(function(o){i.removeTrack(o)}),i.addTrack(n),this._mapMediaElement&&(this._log.debug("Mapping element using mapMediaElement before attaching media to element"),this._mapMediaElement(e)),e.srcObject=i,e.autoplay=!0,e.playsInline=!0,this._attachments.has(e)||this._attachments.add(e),e},t.prototype._selectElement=function(e){var n=document.querySelector(e);if(!n)throw new Error("Selector matched no element: "+e);return n},t.prototype._updateElementsMediaStreamTrack=function(){var e=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(n){return e._attach(n)})},t.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},t.prototype.detach=function(e){var n;return typeof e=="string"?n=[this._selectElement(e)]:e?n=[e]:n=this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",n),this._detachElements(n),e?n[0]:n},t.prototype._detachElements=function(e){return e.map(this._detachElement.bind(this))},t.prototype._detachElement=function(e){if(!this._attachments.has(e))return e;var n=e.srcObject;if(n instanceof this._MediaStream&&n.removeTrack(this.processedTrack||this.mediaStreamTrack),this._disposeMediaElement&&(this._log.debug("Disposing element using disposeMediaElement after removing media from element"),this._disposeMediaElement(e)),this._attachments.delete(e),this._shouldShimAttachedElements&&this._elShims.has(e)){var i=this._elShims.get(e);i.unShim(),this._elShims.delete(e)}return e},t.prototype._getAllAttachedElements=function(){var e=[];return this._attachments.forEach(function(n){e.push(n)}),e},t}(xj);function kj(r,t){var e=r.tagName.toLowerCase();t.warn("Unintentionally paused:",r),Promise.race([_j(document,"visibilitychange"),wj(1e3)]).then(function(){document.visibilityState==="visible"&&bj.whenResolved("audio").then(function(){return t.info("Playing unintentionally paused <"+e+"> element"),t.debug("Element:",r),r.play()}).then(function(){t.info("Successfully played unintentionally paused <"+e+"> element"),t.debug("Element:",r)}).catch(function(n){t.warn("Error while playing unintentionally paused <"+e+"> element:",{error:n,el:r})})})}function Pj(r,t){t===void 0&&(t=null);var e=r.pause,n=r.play,i=!1;r.pause=function(){return i=!0,e.call(r)},r.play=function(){return i=!1,n.call(r)};var a=t?function(){i||t()}:null;return a&&r.addEventListener("pause",a),{pausedIntentionally:function(){return i},unShim:function(){r.pause=e,r.play=n,a&&r.removeEventListener("pause",a)}}}var N3=Sj,Tj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ej=N3,Cj=function(r){Tj(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.attach=function(){return r.prototype.attach.apply(this,arguments)},t.prototype.detach=function(){return r.prototype.detach.apply(this,arguments)},t}(Ej),R3=Cj,K0=null,Lj=3,Gw=50,Kw=250,Qw=50;function Oj(r){try{var t=K0.getContext("2d");t.drawImage(r,0,0,Qw,Gw);var e=t.getImageData(0,0,Qw,Gw),n=e.data.filter(function(a,o){return(o+1)%4}),i=Math.max.apply(Math,n);return i===0}catch(a){return console.log("Error checking silence: ",a),!1}}function Aj(r){return K0=K0||document.createElement("canvas"),new Promise(function(t){var e=Lj;setTimeout(function n(){return e--,Oj(r)?e>0?setTimeout(n,Kw):t(!0):t(!1)},Kw)})}var j3=Aj,Nj=function(){function r(t){var e=this;t===void 0&&(t=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){e._emitVisible(document.visibilityState==="visible")}}});for(var n=0;n<t;n++)this._listeners.push([])}return r.prototype.clear=function(){for(var t=this._listeners.length,e=0;e<t;e++)this._listeners[e]=[]},r.prototype._listenerCount=function(){return this._listeners.reduce(function(t,e){return t+e.length},0)},r.prototype._emitVisible=function(t){for(var e=this,n=Promise.resolve(),i=function(o){n=n.then(function(){return e._emitVisiblePhase(o,t)})},a=1;a<=this._listeners.length;a++)i(a);return n},r.prototype._emitVisiblePhase=function(t,e){var n=this._listeners[t-1];return Promise.all(n.map(function(i){var a=i(e);return a instanceof Promise?a:Promise.resolve(a)}))},r.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},r.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},r.prototype.onVisibilityChange=function(t,e){if(typeof t!="number"||t<=0||t>this._listeners.length)throw new Error("invalid phase: ",t);var n=this._listeners[t-1];return n.push(e),this._listenerCount()===1&&this._start(),this},r.prototype.offVisibilityChange=function(t,e){if(typeof t!="number"||t<=0||t>this._listeners.length)throw new Error("invalid phase: ",t);var n=this._listeners[t-1],i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this._listenerCount()===0&&this._stop()),this},r}(),U1=new Nj(2),Rj=E3;function jj(r,t,e,n,i){n=typeof n=="number"?n:3;var a=0,o=Vp(),s={},c=o.getOrCreate(s);function l(){return t(e).then(function(u){var d=e.audio?Rj(c,u,i).catch(function(v){return r.warn("Encountered an error while detecting silence",v),!0}):Promise.resolve(!1);return d.then(function(v){if(v){if(n<=0)return r.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),u}else return r.info("Got a non-silent audio MediaStreamTrack; returning it."),u;return r.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++a+"."),u.getTracks().forEach(function(p){return p.stop()}),n--,l()})})}return l().then(function(u){return o.release(s),u},function(u){throw o.release(s),u})}var I3=jj,Ij=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yw=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Jw=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},Mj=yn.EventEmitter,Dj=function(r){Ij(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_queuedEvents:{value:new Map}}),e}return t.prototype.dequeue=function(e){var n=this,i=!0;if(!e)return this._queuedEvents.forEach(function(o,s){i=this.dequeue(s)&&i},this),i;var a=this._queuedEvents.get(e)||[];return this._queuedEvents.delete(e),a.reduce(function(o,s){return n.emit.apply(n,Jw([],Yw([e].concat(s))))&&o},i)},t.prototype.queue=function(){var e=[].slice.call(arguments);if(this.emit.apply(this,Jw([],Yw(e))))return!0;var n=e[0];return this._queuedEvents.has(n)||this._queuedEvents.set(n,[]),this._queuedEvents.get(n).push(e.slice(1)),!1},t}(Mj),M3=Dj,Fj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bj=M3,Uj=function(r){Fj(t,r);function t(e,n){var i=r.call(this)||this;return Object.defineProperties(i,{id:{enumerable:!0,value:e},kind:{enumerable:!0,value:n}}),i}return t.prototype.stop=function(){this.emit("stopped")},t}(Bj),D3=Uj,$j=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vj=D3,zj=function(r){$j(t,r);function t(e,n){var i=r.call(this,e,n.kind)||this;return Object.defineProperties(i,{_track:{value:n,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),i}return t.prototype.stop=function(){this.track.stop(),r.prototype.stop.call(this)},t}(Vj),F3=zj,Wj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qj=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Hj=F3,Gj=function(r){Wj(t,r);function t(e){var n=r.call(this,e.id,e)||this;return Object.defineProperties(n,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return n.queue("muted")}],["unmute",function(){return n.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),n._reemitMediaStreamTrackEvents(),n}return t.prototype._reemitMediaStreamTrackEvents=function(e){e===void 0&&(e=this._track);var n=this,i=n._eventsToReemitters,a=n._track;if(e.addEventListener?i.forEach(function(s,c){return e.addEventListener(c,s)}):i.forEach(function(s,c){e["on"+c]=s}),a!==e&&(i.forEach(function(s,c){return a.removeEventListener(c,s)}),a.muted!==e.muted)){var o=i.get(e.muted?"mute":"unmute");o()}},t.prototype.clone=function(){var e=new t(this.track.clone());return this._clones.add(e),e},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.setMediaStreamTrack=function(e){var n=this,i=Array.from(this._clones),a=Array.from(this._senders);return Promise.all(i.map(function(o){return o.setMediaStreamTrack(e.clone())}).concat(a.map(function(o){return n._replaceTrack(o,e)}))).finally(function(){n._reemitMediaStreamTrackEvents(e),n._track=e})},t.prototype.addSender=function(e,n){return this._senders.add(e),n&&this._senderToPublisherHintCallbacks.set(e,n),this},t.prototype.removeSender=function(e){return this._senders.delete(e),this._senderToPublisherHintCallbacks.delete(e),this},t.prototype.setPublisherHint=function(e){var n=qj(Array.from(this._senderToPublisherHintCallbacks.values()),1),i=n[0];return i?i(e):Promise.resolve("COULD_NOT_APPLY_HINT")},t.prototype._replaceTrack=function(e,n){var i=this;return e.replaceTrack(n).then(function(a){return i.setPublisherHint(null).catch(function(){}),i.emit("replaced"),a})},t}(Hj),B3=Gj,Kj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qj=Ds.getUserMedia,Yj=Fs.isIOS,zp=De,Xw=zp.capitalize,Jj=zp.defer,Xj=zp.waitForSometime,Zj=zp.waitForEvent,e7=zt.typeErrors.ILLEGAL_INVOKE,t7=C3,r7=j3,Zw=U1,e5=L3,n7=I3,i7=B3;function a7(r){return function(t){Kj(e,t);function e(n,i){var a=this,o=Yj()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string";i=Object.assign({getUserMedia:Qj,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:o,gUMSilentTrackWorkaround:n7},i);var s=new i7(n),c=s.kind;return a=t.call(this,s,i)||this,Object.defineProperties(a,{_constraints:{value:typeof i[c]=="object"?i[c]:{},writable:!0},_getUserMedia:{value:i.getUserMedia},_gUMSilentTrackWorkaround:{value:i.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return a.emit("muted",a)}],["unmuted",function(){return a.emit("unmuted",a)}]])},_workaroundWebKitBug1208516:{value:i.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:i.isCreatedByCreateLocalTracks},_noiseCancellation:{value:i.noiseCancellation||null},_trackSender:{value:s},id:{enumerable:!0,value:s.id},isEnabled:{enumerable:!0,get:function(){return s.enabled}},isMuted:{enumerable:!0,get:function(){return s.muted}},isStopped:{enumerable:!0,get:function(){return s.readyState==="ended"}}}),a._workaroundWebKitBug1208516&&(a._workaroundWebKitBug1208516Cleanup=t5(a)),a._reemitTrackSenderEvents(),a}return e.prototype._end=function(){var n=this;this._didCallEnd||(t.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach(function(i,a){return n._trackSender.removeListener(a,i)}),this.emit("stopped",this))},e.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),t.prototype._initialize.call(this)},e.prototype._reacquireTrack=function(n){var i,a=this,o=a._getUserMedia,s=a._gUMSilentTrackWorkaround,c=a._log,l=a.mediaStreamTrack.kind;c.info("Re-acquiring the MediaStreamTrack"),c.debug("Constraints:",n);var u=Object.assign({audio:!1,video:!1},(i={},i[l]=n,i)),d=this._workaroundWebKitBug1208516Cleanup?s(c,o,u):o(u);return d.then(function(v){return v.getTracks()[0]})},e.prototype._reemitTrackSenderEvents=function(){var n=this;this._eventsToReemitters.forEach(function(i,a){return n._trackSender.on(a,i)}),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},e.prototype._restart=function(n){var i=this,a=this._log;return n=n||this._constraints,this._stop(),this._reacquireTrack(n).catch(function(o){throw a.error("Failed to re-acquire the MediaStreamTrack:",{error:o,constraints:n}),o}).then(function(o){return a.info("Re-acquired the MediaStreamTrack"),a.debug("MediaStreamTrack:",o),i._constraints=Object.assign({},n),i._setMediaStreamTrack(o)})},e.prototype._setMediaStreamTrack=function(n){var i=this;return n.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){i._unprocessedTrack=n}):this._trackSender.setMediaStreamTrack(n).catch(function(a){i._log.warn("setMediaStreamTrack failed:",{error:a,mediaStreamTrack:n})})).then(function(){i._initialize(),i._getAllAttachedElements().forEach(function(a){return i._attach(a)})})},e.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},e.prototype.enable=function(n){return n=typeof n=="boolean"?n:!0,n!==this.mediaStreamTrack.enabled&&(this._log.info((n?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=n,this.emit(n?"enabled":"disabled",this)),this},e.prototype.disable=function(){return this.enable(!1)},e.prototype.restart=function(n){var i=this,a=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(e7("restart","can only be called on a"+(" Local"+Xw(a)+"Track that is created using createLocalTracks")+(" or createLocal"+Xw(a)+"Track.")));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var o=this._restart(n);return this._workaroundWebKitBug1208516&&(o=o.finally(function(){i._workaroundWebKitBug1208516Cleanup=t5(i)})),o},e.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},e}(r)}function t5(r){var t=r._log,e=r.kind,n=r._noiseCancellation,i={audio:t7,video:r7}[e],a=function(){return n?n.sourceTrack:r.mediaStreamTrack},o=r._dummyEl,s=a(),c=null;function l(){return o.play().then(function(){return i(o)}).then(function(S){return S?t.warn("Silence detected"):t.info("Non-silence detected"),S}).catch(function(S){t.warn("Failed to detect silence:",S)}).finally(function(){r.processedTrack||o.pause()})}function u(){var S=r._workaroundWebKitBug1208516Cleanup,w=r.isStopped,x=w&&!!S,k=a().muted;return Promise.resolve().then(function(){return document.visibilityState==="visible"&&!c&&(k||x||l())})}function d(){return Promise.race([Zj(s,"unmute"),Xj(50)]).then(function(){return u()}).then(function(S){S&&!c&&(c=Jj(),r._restart().finally(function(){o=r._dummyEl,y(),s=a(),p(),c.resolve(),c=null}).catch(function(x){t.error("failed to restart track: ",x)}));var w=c&&c.promise||Promise.resolve();return w.finally(function(){return e5.resolveDeferred(e)})}).catch(function(S){t.error("error in maybeRestart: "+S.message)})}function v(){var S=r._log,w=r.kind;S.info("Muted"),S.debug("LocalMediaTrack:",r),e5.startDeferred(w)}function p(){s.addEventListener?(s.addEventListener("ended",d),s.addEventListener("mute",v),s.addEventListener("unmute",d)):(s.onended=d,s.onmute=v,s.onunmute=d)}function y(){s.removeEventListener?(s.removeEventListener("ended",d),s.removeEventListener("mute",v),s.removeEventListener("unmute",d)):(s.onended=null,s.onmute=null,s.onunmute=null)}var _=function(S){return S?d():!1};return Zw.onVisibilityChange(1,_),p(),function(){Zw.offVisibilityChange(1,_),y()}}var U3=a7,o7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),s7=Fs.isIOS,l7=C3,c7=Dt.isIOSChrome,u7=R3,f7=U3,d7=f7(u7),h7=function(r){o7(t,r);function t(e,n){var i=this,a=(n==null?void 0:n.noiseCancellation)||null;i=r.call(this,e,n)||this;var o=i._log,s=e.label,c=s===void 0?"":s,l=e.getSettings(),u=l.deviceId,d=u===void 0?"":u,v=l.groupId,p=v===void 0?"":v;return Object.defineProperties(i,{_currentDefaultDeviceInfo:{value:{deviceId:d,groupId:p,label:c},writable:!0},_enumerateDevices:{value:typeof(n==null?void 0:n.enumerateDevices)=="function"?n.enumerateDevices:navigator.mediaDevices.enumerateDevices},_defaultDeviceCaptureMode:{value:(!s7()||a)&&i._isCreatedByCreateLocalTracks&&typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.addEventListener=="function"&&(typeof(n==null?void 0:n.enumerateDevices)=="function"||typeof navigator.mediaDevices.enumerateDevices=="function")?(n==null?void 0:n.defaultDeviceCaptureMode)||"auto":"manual"},_onDeviceChange:{value:function(){i._enumerateDevices().then(function(y){var _=y.find(function(S){var w=S.deviceId,x=S.kind;return x==="audioinput"&&w!=="default"});_&&["deviceId","groupId"].some(function(S){return _[S]!==i._currentDefaultDeviceInfo[S]})&&(o.info("Default device changed, restarting the LocalAudioTrack"),o.debug('Old default device: "'+i._currentDefaultDeviceInfo.deviceId+'" => "'+i._currentDefaultDeviceInfo.label+'"'),o.debug('New default device: "'+_.deviceId+'" => "'+_.label+'"'),i._currentDefaultDeviceInfo=_,i._restartDefaultDevice().catch(function(S){return o.warn("Failed to restart: "+S.message)}))},function(y){o.warn("Failed to run enumerateDevices(): "+y.message)})}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:a,writable:!1}}),o.debug("defaultDeviceCaptureMode:",i._defaultDeviceCaptureMode),i._maybeRestartOnDefaultDeviceChange(),i}return t.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},t.prototype.attach=function(e){return e=r.prototype.attach.call(this,e),e.muted=!0,e},t.prototype._end=function(){return r.prototype._end.apply(this,arguments)},t.prototype._maybeRestartOnDefaultDeviceChange=function(){var e=this,n=this,i=n._constraints,a=n._defaultDeviceCaptureMode,o=n._log,s=this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack,c=s.getSettings().deviceId,l=function(d){return d!==c||d==="default"},u=function d(v){return v===void 0&&(v={}),typeof v=="string"?l(v):Array.isArray(v)?v.every(l):v.exact?d(v.exact):v.ideal?d(v.ideal):!0}(i.deviceId);a==="auto"&&u?this._restartOnDefaultDeviceChangeCleanup||(o.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){o.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",e._onDeviceChange),e._restartOnDefaultDeviceChangeCleanup=null}):(o.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},t.prototype._reacquireTrack=function(e){var n=this;return this._log.debug("_reacquireTrack: ",e),this.noiseCancellation?this.noiseCancellation.reacquireTrack(function(){return r.prototype._reacquireTrack.call(n,e)}):r.prototype._reacquireTrack.call(this,e)},t.prototype._restartDefaultDevice=function(){var e=this,n=Object.assign({},this._constraints),i=Object.assign({},n,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(i).then(function(){e._constraints=n,e._maybeRestartOnDefaultDeviceChange()})},t.prototype._setMediaStreamTrack=function(e){var n=this,i=this,a=i._log,o=i.noiseCancellation,s=r.prototype._setMediaStreamTrack.call(this,e);return c7()&&o&&(a.debug("iOS Chrome detected, checking if the restarted Krisp audio is silent"),s=s.then(function(){return l7(n._dummyEl)}).then(function(c){return a.debug("Krisp audio is "+(c?"silent, using source audio":"not silent")),c&&o.disablePermanently().then(function(){return r.prototype._setMediaStreamTrack.call(n,o.sourceTrack)})})),s},t.prototype.disable=function(){return r.prototype.disable.apply(this,arguments)},t.prototype.enable=function(){return r.prototype.enable.apply(this,arguments)},t.prototype.restart=function(){return r.prototype.restart.apply(this,arguments)},t.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),r.prototype.stop.apply(this,arguments)},t}(d7),p7=h7,v7=F1,$3=p7;function $1(r,t){var e=new $3(r,t);return Object.setPrototypeOf(e,$1.prototype),e}v7($1,$3);var m7=$1,V3=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},g7=zt.DEFAULT_FRAME_RATE;function y7(r,t){var e=V3(r.srcObject.getVideoTracks(),1),n=e[0],i=n.getSettings().frameRate,a=i===void 0?g7:i,o,s=new ReadableStream({start:function(l){o=setInterval(function(){return l.enqueue()},1e3/a)}}),c=new TransformStream({transform:function(){return t()}});return s.pipeThrough(c).pipeTo(new WritableStream).then(function(){}),function(){clearInterval(o)}}function _7(r,t,e){var n=V3(r.srcObject.getVideoTracks(),1),i=n[0],a=new MediaStreamTrackProcessor({track:i}).readable,o=new MediaStreamTrackGenerator({kind:"video"}),s=!1,c=new TransformStream({transform:function(l,u){var d=e==="videoframe"?t(l):Promise.resolve(l.close()).then(t);return d.finally(function(){s&&u.terminate()})}});return a.pipeThrough(c).pipeTo(o.writable).then(function(){}),function(){s=!0}}var w7=typeof MediaStreamTrackGenerator=="function"&&typeof MediaStreamTrackProcessor=="function"?_7:y7,b7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),x7=yn.EventEmitter,S7=zt.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,k7=function(r){b7(t,r);function t(e){var n=r.call(this)||this;return Object.defineProperties(n,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:e},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),n.on("add",function(i){n._lastStatsSaveTime=Date.now(),n._lastStatsPublishTime=Date.now(),n._processorInfo=i,n._stats=[],n._reemitEvent("add",n._getEventData())}),n.on("remove",function(){var i=n._getEventData();n._lastStatsSaveTime=null,n._lastStatsPublishTime=null,n._processorInfo=null,n._stats=null,n._reemitEvent("remove",i)}),n.on("start",function(){n._reemitEvent("start",n._getEventData())}),n.on("stop",function(i){n._reemitEvent("stop",Object.assign({message:i},n._getEventData()))}),n.on("stats",function(){return n._maybeEmitStats()}),n}return t.prototype._getEventData=function(){if(!this._processorInfo)return{};var e=this._processorInfo,n=e.processor,i=e.captureHeight,a=e.captureWidth,o=e.inputFrameRate,s=e.isRemoteVideoTrack,c=e.inputFrameBufferType,l=e.outputFrameBufferContextType,u={captureHeight:i,captureWidth:a,inputFrameRate:o,isRemoteVideoTrack:s,inputFrameBufferType:c,outputFrameBufferContextType:l};return u.name=n._name||"VideoProcessor",["assetsPath","blurFilterRadius","debounce","fitType","isSimdEnabled","maskBlurRadius","pipeline","version"].forEach(function(d){var v=n["_"+d];typeof v<"u"&&(u[d]=v)}),Object.keys(u).forEach(function(d){var v=u[d];typeof v=="boolean"&&(u[d]=v?"true":"false")}),u},t.prototype._maybeEmitStats=function(){if(!(!this._stats||!this._processorInfo)){var e=this._processorInfo.processor._benchmark;if(e){var n=Date.now();if(!(n-this._lastStatsSaveTime<1e3)){var i={outputFrameRate:e.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(s){i[s]=e.getAverageDelay(s)}),this._lastStatsSaveTime=n,this._stats.push(i),!(n-this._lastStatsPublishTime<S7)){this._lastStatsPublishTime=n;var a=this._stats.splice(0),o=a.reduce(function(s,c,l){return Object.keys(i).forEach(function(u){s[u]||(s[u]=0),s[u]=(s[u]*l+c[u])/(l+1)}),s},{});Object.keys(o).forEach(function(s){o[s]=parseFloat(o[s].toFixed(2))}),this._reemitEvent("stats",Object.assign({},o,this._getEventData()))}}}}},t.prototype._reemitEvent=function(e,n){this._log.debug("VideoProcessor:"+e,n),this.emit("event",{name:e,data:n})},t}(x7),P7=k7,T7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),E7=N3,C7=w7,L7=P7;Dt.guessBrowser;var O7=zt.DEFAULT_FRAME_RATE,V1=function(r){T7(t,r);function t(e,n){var i=r.call(this,e,n)||this;return Object.defineProperties(i,{_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_processorOptions:{value:{},writable:!0},_stopCapture:{value:function(){},writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0},_documentPipWindow:{value:null,writable:!0},_documentPipEnterListener:{value:null,writable:!0},_documentPipExitListener:{value:null,writable:!0}}),i._processorEventObserver=new(n.VideoProcessorEventObserver||L7)(i._log),i}return t.prototype._checkIfCanCaptureFrames=function(e){e===void 0&&(e=!1);var n=!0,i="",a=this.mediaStreamTrack,o=a.enabled,s=a.readyState;return o||(n=!1,i="MediaStreamTrack is disabled"),s==="ended"&&(n=!1,i="MediaStreamTrack is ended"),this.processor||(n=!1,i="VideoProcessor not detected."),!this._attachments.size&&!e&&(n=!1,i="VideoTrack is not publishing and there is no attached element."),i&&this._log.debug(i),{canCaptureFrames:n,message:i}},t.prototype._captureFrames=function(){var e=this;if(this._isCapturing){this._log.debug("Ignoring captureFrames call. Capture is already in progress");return}if(!this._checkIfCanCaptureFrames().canCaptureFrames){this._isCapturing=!1,this._log.debug("Cannot capture frames. Ignoring captureFrames call.");return}this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var n=this._processorOptions.inputFrameBufferType;this._dummyEl.play().then(function(){var i=function(a){var o=e._checkIfCanCaptureFrames();if(!o.canCaptureFrames)return a&&a.close(),e._isCapturing=!1,e._stopCapture(),e._processorEventObserver.emit("stop",o.message),e._log.debug("Cannot capture frames. Stopping capturing frames."),Promise.resolve();var s=e.mediaStreamTrack.getSettings(),c=s.width,l=c===void 0?0:c,u=s.height,d=u===void 0?0:u;e._outputFrame&&e._outputFrame.width!==l&&(e._outputFrame.width=l,e._outputFrame.height=d),e._inputFrame&&(e._inputFrame.width!==l&&(e._inputFrame.width=l,e._inputFrame.height=d),e._inputFrame.getContext("2d").drawImage(e._dummyEl,0,0,l,d));var v=a||(["video","videoframe"].includes(n)?e._dummyEl:e._inputFrame),p=null;try{p=e.processor.processFrame(v,e._outputFrame)}catch(y){e._log.debug("Exception detected after calling processFrame.",y)}return(p instanceof Promise?p:Promise.resolve(p)).then(function(){e._outputFrame&&(typeof e.processedTrack.requestFrame=="function"&&e.processedTrack.requestFrame(),e._processorEventObserver.emit("stats"))})};e._stopCapture=C7(e._dummyEl,i,n)}).catch(function(i){return e._log.error("Video element cannot be played",{error:i,track:e})})},t.prototype._initialize=function(){var e=this;r.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){r5(e,e._dummyEl)&&(e.dimensions.width=e._dummyEl.videoWidth,e.dimensions.height=e._dummyEl.videoHeight)},this._dummyEl.onresize=function(){r5(e,e._dummyEl)&&(e.dimensions.width=e._dummyEl.videoWidth,e.dimensions.height=e._dummyEl.videoHeight,e.isStarted&&(e._log.debug("Dimensions changed:",e.dimensions),e.emit(t.DIMENSIONS_CHANGED,e)))})},t.prototype._restartProcessor=function(){var e=this.processor;if(e){var n=Object.assign({},this._processorOptions);this.removeProcessor(e),this.addProcessor(e,n)}},t.prototype._start=function(e){return this.dimensions.width=e.videoWidth,this.dimensions.height=e.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(t.DIMENSIONS_CHANGED,this),r.prototype._start.call(this,e)},t.prototype.addProcessor=function(e,n){var i=this;if(!e||typeof e.processFrame!="function")throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",e),this._unmuteHandler||(this._unmuteHandler=function(){i._log.debug("mediaStreamTrack unmuted"),i.processedTrack.muted&&(i._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),i._restartProcessor())},this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler):this.mediaStreamTrack.onunmute=this._unmuteHandler.bind(this)),this._processorOptions=n||{};var a=this._processorOptions,o=a.inputFrameBufferType,s=a.outputFrameBufferContextType;if(typeof OffscreenCanvas>"u"&&o==="offscreencanvas")throw new Error("OffscreenCanvas is not supported by this browser.");if(o&&o!=="videoframe"&&o!=="video"&&o!=="canvas"&&o!=="offscreencanvas")throw new Error("Invalid inputFrameBufferType of "+o);o||(o=typeof OffscreenCanvas>"u"?"canvas":"offscreencanvas");var c=this.mediaStreamTrack.getSettings(),l=c.width,u=l===void 0?0:l,d=c.height,v=d===void 0?0:d,p=c.frameRate,y=p===void 0?O7:p;o==="offscreencanvas"&&(this._inputFrame=new OffscreenCanvas(u,v)),o==="canvas"&&(this._inputFrame=document.createElement("canvas")),this._inputFrame&&(this._inputFrame.width=u,this._inputFrame.height=v),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=u,this._outputFrame.height=v,s=s||"2d";var _=this._outputFrame.getContext(s);if(!_)throw new Error("Cannot get outputFrameBufferContextType: "+s+".");var S=typeof CanvasCaptureMediaStreamTrack<"u"&&CanvasCaptureMediaStreamTrack.prototype&&typeof CanvasCaptureMediaStreamTrack.prototype.requestFrame=="function"?0:void 0;return this.processedTrack=this._outputFrame.captureStream(S).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=e,this._processorEventObserver.emit("add",{processor:e,captureHeight:v,captureWidth:u,inputFrameRate:y,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack"),inputFrameBufferType:o,outputFrameBufferContextType:s}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},t.prototype.attach=function(){var e=r.prototype.attach.apply(this,arguments);return this._attachments.size===1&&A7(this),this.processor&&this._captureFrames(),e},t.prototype.detach=function(){var e=r.prototype.detach.apply(this,arguments);return this._attachments.size===0&&N7(this),e},t.prototype.removeProcessor=function(e){if(!e)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(e!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",e),this._stopCapture(),this._stopCapture=function(){},this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._processorOptions={},this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},t}(E7);V1.DIMENSIONS_CHANGED="dimensionsChanged";function r5(r,t){return r.dimensions.width!==t.videoWidth||r.dimensions.height!==t.videoHeight}function A7(r){!r._documentPipEnterListener&&"documentPictureInPicture"in globalThis&&globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.addEventListener=="function"&&(r._documentPipEnterListener=function(t){r._log.debug("document pip entered"),r._documentPipWindow=t.window,r._documentPipExitListener=function(){r._log.debug("document pip exited"),r._documentPipWindow=null,typeof r._onDocumentPipExit=="function"&&r._onDocumentPipExit()},t.window&&typeof t.window.addEventListener=="function"&&t.window.addEventListener("pagehide",r._documentPipExitListener),z3(r),typeof r._onDocumentPipEnter=="function"&&r._onDocumentPipEnter(t)},globalThis.documentPictureInPicture.addEventListener("enter",r._documentPipEnterListener))}function N7(r){r._documentPipEnterListener&&(globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.removeEventListener=="function"&&globalThis.documentPictureInPicture.removeEventListener("enter",r._documentPipEnterListener),r._documentPipWindow&&r._documentPipExitListener&&typeof r._documentPipWindow.removeEventListener=="function"&&r._documentPipWindow.removeEventListener("pagehide",r._documentPipExitListener),r._documentPipEnterListener=null,r._documentPipExitListener=null,r._documentPipWindow=null)}function z3(r){if(r._documentPipWindow)try{var t=new WeakSet(r._documentPipWindow.document.querySelectorAll("video"));r._attachments.forEach(function(e){t.has(e)&&e.paused&&e.play().then(function(){r._log.debug("Successfully played inadvertently paused video element in document PiP window")}).catch(function(n){r._log.debug("Failed to play inadvertently paused video element in document PiP window",n)})})}catch(e){r._log.debug("Error checking document PiP video playback:",e)}}V1._ensureDocumentPipVideosPlaying=z3;var W3=V1,R7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),j7=Fs.isIOS,I7=j3,M7=U3,q3=W3,D7=M7(q3),F7=function(r){R7(t,r);function t(e,n){var i=this;return n=Object.assign({workaroundSilentLocalVideo:j7()&&typeof document<"u"&&typeof document.createElement=="function"},n),i=r.call(this,e,n)||this,Object.defineProperties(i,{_workaroundSilentLocalVideo:{value:n.workaroundSilentLocalVideo?B7:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0},_pipIntersectionObserver:{value:null,writable:!0}}),i._workaroundSilentLocalVideo&&(i._workaroundSilentLocalVideoCleanup=i._workaroundSilentLocalVideo(i,document)),i}return t.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},t.prototype._onDocumentPipEnter=function(){this._log.debug("LocalVideoTrack: Setting up PiP intersection observer"),this._setupPipIntersectionObserver()},t.prototype._onDocumentPipExit=function(){this._log.debug("LocalVideoTrack: Cleaning up PiP intersection observer"),this._cleanupPipIntersectionObserver()},t.prototype._setupPipIntersectionObserver=function(){var e=this;!this._pipIntersectionObserver&&this._documentPipWindow&&(this._log.debug("LocalVideoTrack: Creating PiP intersection observer"),this._pipIntersectionObserver=new IntersectionObserver(function(n){var i=n.some(function(a){return a.isIntersecting});i&&(e._log.debug("LocalVideoTrack: Element visible in PiP, ensuring videos are playing"),q3._ensureDocumentPipVideosPlaying(e))},{threshold:.25}),this._attachments.forEach(function(n){e._log.debug("LocalVideoTrack: Observing element for PiP visibility"),e._pipIntersectionObserver.observe(n)}))},t.prototype._cleanupPipIntersectionObserver=function(){this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Disconnecting PiP intersection observer"),this._pipIntersectionObserver.disconnect(),this._pipIntersectionObserver=null)},t.prototype.attach=function(){var e=r.prototype.attach.apply(this,arguments);return this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Observing newly attached element for PiP visibility"),this._pipIntersectionObserver.observe(e)),e},t.prototype.detach=function(){var e=this,n=r.prototype.detach.apply(this,arguments),i=Array.isArray(n)?n:[n];return this._pipIntersectionObserver&&i.forEach(function(a){e._log.debug("LocalVideoTrack: Unobserving detached element from PiP visibility"),e._pipIntersectionObserver.unobserve(a)}),n},t.prototype._checkIfCanCaptureFrames=function(){return r.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},t.prototype._end=function(){return r.prototype._end.apply(this,arguments)},t.prototype._setSenderMediaStreamTrack=function(e){var n=this,i=this.mediaStreamTrack,a=e?this.processedTrack:i;return this._trackSender.setMediaStreamTrack(a).catch(function(o){return n._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:o,mediaStreamTrack:a})}).then(function(){n._unprocessedTrack=e?i:null})},t.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var e=r.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),e):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},t.prototype.removeProcessor=function(){var e=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var n=r.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return e._updateElementsMediaStreamTrack()}),n},t.prototype.disable=function(){var e=r.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),e},t.prototype.enable=function(e){e===void 0&&(e=!0);var n=r.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=e,e&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),n},t.prototype.restart=function(){var e=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var n=r.prototype.restart.apply(this,arguments);return this.processor&&(n=n.then(function(){return e._restartProcessor()})),this._workaroundSilentLocalVideo&&n.finally(function(){e._workaroundSilentLocalVideoCleanup=e._workaroundSilentLocalVideo(e,document)}),n},t.prototype._restartProcessor=function(){var e=this.processor,n=Object.assign({},this._processorOptions);return r.prototype.removeProcessor.apply(this,[e]),r.prototype.addProcessor.apply(this,[e,n]),this._setSenderMediaStreamTrack(!0)},t.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),this._cleanupPipIntersectionObserver(),r.prototype.stop.apply(this,arguments)},t}(D7);function B7(r,t){var e=r._log,n=r._dummyEl,i=r.mediaStreamTrack;function a(){r.isEnabled&&(e.info("Unmuted, checking silence"),n.play().then(function(){return I7(n)}).then(function(o){if(!o){e.info("Non-silent frames detected, so no need to restart");return}return e.warn("Silence detected, restarting"),r._stop(),r._restart()}).catch(function(o){e.warn("Failed to detect silence and restart:",o)}).finally(function(){n=r._dummyEl,n&&!n.paused&&!r.processedTrack&&n.pause(),i.removeEventListener("unmute",a),i=r.mediaStreamTrack,i.addEventListener?i.addEventListener("unmute",a):i.onunmute=a}))}return i.addEventListener?i.addEventListener("unmute",a):i.onunmute=a,function(){i.removeEventListener?i.removeEventListener("unmute",a):i.onunmute=null}}var U7=F7,$7=F1,H3=U7;function z1(r,t){var e=new H3(r,t);return Object.setPrototypeOf(e,z1.prototype),e}$7(z1,H3);var V7=z1,z7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),W7=D3,q7=function(r){z7(t,r);function t(e,n,i,a){var o=r.call(this,e,"data")||this;return Object.defineProperties(o,{maxPacketLifeTime:{enumerable:!0,value:n},maxRetransmits:{enumerable:!0,value:i},ordered:{enumerable:!0,value:a}}),o}return t}(W7),G3=q7,H7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),G7=G3,K7=De.makeUUID,Q7=function(r){H7(t,r);function t(e,n,i){var a=r.call(this,K7(),e,n,i)||this;return Object.defineProperties(a,{_clones:{value:new Set},_dataChannels:{value:new Set}}),a}return t.prototype._addClone=function(e){this._clones.add(e)},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.addDataChannel=function(e){return this._dataChannels.add(e),this},t.prototype.clone=function(){var e=this,n=new t(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(n),n.once("stopped",function(){return e.removeClone(n)}),n},t.prototype.removeDataChannel=function(e){return this._dataChannels.delete(e),this},t.prototype.send=function(e){return this._dataChannels.forEach(function(n){try{n.send(e)}catch{}}),this._clones.forEach(function(n){try{n.send(e)}catch{}}),this},t.prototype.stop=function(){this._dataChannels.forEach(function(e){return e.close()}),this._clones.forEach(function(e){return e.stop()}),r.prototype.stop.call(this)},t}(G7),Y7=Q7,J7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),X7=B1,Z7=Y7,eI=function(r){J7(t,r);function t(e){var n=this;e=Object.assign({DataTrackSender:Z7,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},e);var i=e.DataTrackSender,a=new i(e.maxPacketLifeTime,e.maxRetransmits,e.ordered);return n=r.call(this,a.id,"data",e)||this,Object.defineProperties(n,{_trackSender:{value:a},id:{enumerable:!0,value:a.id},maxPacketLifeTime:{enumerable:!0,value:e.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:e.maxRetransmits},ordered:{enumerable:!0,value:e.ordered},reliable:{enumerable:!0,value:e.maxPacketLifeTime===null&&e.maxRetransmits===null}}),n}return t.prototype.send=function(e){this._trackSender.send(e)},t}(X7),tI=eI,rI=F1,K3=tI;function W1(r){var t=new K3(r);return Object.setPrototypeOf(t,W1.prototype),t}rI(W1,K3);var nI=W1,Ul={LocalAudioTrack:m7,LocalVideoTrack:V7,LocalDataTrack:nI},Ki=A&&A.__assign||function(){return Ki=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ki.apply(this,arguments)},n5=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},i5=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},a5=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},o5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};Object.defineProperty(Mp,"__esModule",{value:!0});Mp.createLocalTracks=void 0;var iI=Xl,aI=De.buildLogLevels,Q3=Ds,oI=Q3.getUserMedia,sI=Q3.MediaStreamTrack,q1=Ul,lI=q1.LocalAudioTrack,cI=q1.LocalDataTrack,uI=q1.LocalVideoTrack,fI=Da,H1=zt,dI=H1.DEFAULT_LOG_LEVEL,hI=H1.DEFAULT_LOGGER_NAME,pI=H1.typeErrors.INVALID_VALUE,vI=I3,mI=0;function gI(r){return n5(this,void 0,void 0,function(){var t,e,n,i,a,o,s,c,l,u,d,v,p,y=this;return i5(this,function(_){switch(_.label){case 0:if(t=!(r&&("audio"in r||"video"in r)),e=Ki({audio:t,getUserMedia:oI,loggerName:hI,logLevel:dI,LocalAudioTrack:lI,LocalDataTrack:cI,LocalVideoTrack:uI,MediaStreamTrack:sI,Log:fI,video:t},r),n="[createLocalTracks #"+ ++mI+"]",i=aI(e.logLevel),a=new e.Log("default",n,i,e.loggerName),o=Object.assign({log:a},e),delete o.name,e.audio===!1&&e.video===!1)return a.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(e.tracks)return a.info("Adding user-provided LocalTracks"),a.debug("LocalTracks:",e.tracks),[2,e.tracks];if(s={audio:typeof e.audio=="object"&&e.audio.name?{name:e.audio.name}:{defaultDeviceCaptureMode:"auto"},video:typeof e.video=="object"&&e.video.name?{name:e.video.name}:{}},s.audio.isCreatedByCreateLocalTracks=!0,s.video.isCreatedByCreateLocalTracks=!0,typeof e.audio=="object")if(typeof e.audio.workaroundWebKitBug1208516=="boolean"&&(s.audio.workaroundWebKitBug1208516=e.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in e.audio&&(c=e.audio.noiseCancellationOptions,delete e.audio.noiseCancellationOptions),!("defaultDeviceCaptureMode"in e.audio))s.audio.defaultDeviceCaptureMode="auto";else{if(["auto","manual"].every(function(S){return S!==e.audio.defaultDeviceCaptureMode}))throw pI("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);s.audio.defaultDeviceCaptureMode=e.audio.defaultDeviceCaptureMode}typeof e.video=="object"&&typeof e.video.workaroundWebKitBug1208516=="boolean"&&(s.video.workaroundWebKitBug1208516=e.video.workaroundWebKitBug1208516),typeof e.audio=="object"&&delete e.audio.name,typeof e.video=="object"&&delete e.video.name,l={audio:e.audio,video:e.video},u=typeof e.audio=="object"&&e.audio.workaroundWebKitBug180748,_.label=1;case 1:return _.trys.push([1,4,,5]),[4,u?vI(a,e.getUserMedia,l):e.getUserMedia(l)];case 2:return d=_.sent(),v=o5(o5([],a5(d.getAudioTracks())),a5(d.getVideoTracks())),a.info("Call to getUserMedia successful; got tracks:",v),[4,Promise.all(v.map(function(S){return n5(y,void 0,void 0,function(){var w,x,k;return i5(this,function(T){switch(T.label){case 0:return S.kind==="audio"&&c?[4,iI.applyNoiseCancellation(S,c,a)]:[3,2];case 1:return w=T.sent(),x=w.cleanTrack,k=w.noiseCancellation,[2,new o.LocalAudioTrack(x,Ki(Ki(Ki({},s.audio),o),{noiseCancellation:k}))];case 2:if(S.kind==="audio")return[2,new o.LocalAudioTrack(S,Ki(Ki({},s.audio),o))];T.label=3;case 3:return[2,new o.LocalVideoTrack(S,Ki(Ki({},s.video),o))]}})})}))];case 3:return[2,_.sent()];case 4:throw p=_.sent(),a.warn("Call to getUserMedia failed:",p),p;case 5:return[2]}})})}Mp.createLocalTracks=gI;var ec={},Wp={};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.Timer=void 0;var yI=function(){function r(){this._end=void 0,this.start()}return r.prototype.start=function(){return this._start=Date.now(),this},r.prototype.stop=function(){return this._end=Date.now(),this},r.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:this._end===void 0?void 0:this._end-this._start}},r}();Wp.Timer=yI;var tc={};Object.defineProperty(tc,"__esModule",{value:!0});tc.mosToScore=tc.calculateMOS=void 0;var s5=94.768;function _I(r,t,e){var n=r+t*2+10,i=0;switch(!0){case n<160:i=s5-n/40;break;case n<1e3:i=s5-(n-120)/10;break}switch(!0){case e<=i/2.5:i=Math.max(i-e*2.5,6.52);break;default:i=0;break}var a=1+.035*i+7e-6*i*(i-60)*(100-i);return a}tc.calculateMOS=_I;function wI(r){var t=0;return r?r>4.2?t=5:r>4?t=4:r>3.6?t=3:r>3?t=2:t=1:t=0,t}tc.mosToScore=wI;var qp={},bI=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},xI=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},SI=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};Object.defineProperty(qp,"__esModule",{value:!0});qp.getCombinedConnectionStats=void 0;function io(r,t,e,n){var i=[];return r.forEach(function(a){(n.length===0||n.includes(a.type))&&(e.length===0||e.includes(a.kind))&&typeof a[t]=="number"&&i.push(a[t])}),i}function kI(r){var t=r.publisher,e=r.subscriber;return bI(this,void 0,void 0,function(){var n,i,a,o,s,c,l,u,d,v,p,y,_,S,w;return xI(this,function(x){switch(x.label){case 0:return[4,Promise.all([t,e].map(function(k){return k.getStats()}))];case 1:return n=SI.apply(void 0,[x.sent(),2]),i=n[0],a=n[1],o=io(a,"timestamp",["audio"],["inbound-rtp"]),s=o.length>0?o[0]:0,c=io(a,"jitter",["audio"],["inbound-rtp"]).reduce(function(k,T){return Math.max(k,T)},0),l=io(a,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(k,T){return k+T},0),u=io(a,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(k,T){return k+T},0),d=io(i,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(k,T){return Math.max(k,T)},0),v=io(a,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(k,T){return Math.max(k,T)},0),p=(v||d)*1e3,y=io(i,"bytesSent",[],["candidate-pair"]).reduce(function(k,T){return k+T},0),_=io(a,"bytesReceived",[],["candidate-pair"]).reduce(function(k,T){return k+T},0),S=PI(a),w=[],a.forEach(function(k){(k.type==="local-candidate"||k.type==="remote-candidate")&&w.push(Q0(k))}),[2,{timestamp:s,jitter:c,packets:l,packetsLost:u,roundTripTime:p,bytesSent:y,bytesReceived:_,selectedIceCandidatePairStats:S,iceCandidateStats:w}]}})})}qp.getCombinedConnectionStats=kI;function Q0(r){var t=[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}];return t.reduce(function(e,n){var i=[n.key];n.altKeys&&(i=i.concat(n.altKeys));var a=i.find(function(o){return o in r});return a&&typeof r[a]===n.type&&(e[n.key]=r[a]),e},{})}function PI(r){var t=null,e=[];r.forEach(function(s){s.type==="transport"&&s.selectedCandidatePairId?t=s.selectedCandidatePairId:s.type==="candidate-pair"&&e.push(s)});var n=e.find(function(s){return s.selected||t&&s.id===t});if(!n)return null;var i=n,a=r.get(i.localCandidateId),o=r.get(i.remoteCandidateId);return!a||!o?null:{localCandidate:Q0(a),remoteCandidate:Q0(o)}}var Hp={},TI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EI=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},CI=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},LI=yn.EventEmitter,Y3=De,OI=function(r){TI(t,r);function t(e,n){var i=r.call(this)||this,a=null,o=e;return n=RI(n),Object.defineProperties(i,{_lock:{get:function(){return a},set:function(s){a=s}},_reachableStates:{value:NI(n)},_state:{get:function(){return o},set:function(s){o=s}},_states:{value:n},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return a!==null}},state:{enumerable:!0,get:function(){return o}}}),i.on("stateChanged",function(s){i._whenDeferreds.forEach(function(c){c.when(s,c.resolve,c.reject)})}),i}return t.prototype._whenPromise=function(e){var n=this;if(typeof e!="function")return Promise.reject(new Error("when() executor must be a function"));var i=Y3.defer();return i.when=e,this._whenDeferreds.add(i),i.promise.then(function(a){return n._whenDeferreds.delete(i),a},function(a){throw n._whenDeferreds.delete(i),a})},t.prototype.bracket=function(e,n){var i,a=this;function o(s){if(a.hasLock(i)&&a.releaseLockCompletely(i),s)throw s}return this.takeLock(e).then(function(c){return i=c,n(i)}).then(function(c){return o(),c},o)},t.prototype.hasLock=function(e){return this._lock===e},t.prototype.preempt=function(e,n,i){if(!Ed(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');var a;this.isLocked&&(a=this._lock,this._lock=null);var o=null;n&&(o=this.takeLockSync(n));var s=o?null:this.takeLockSync("preemption");return this.transition(e,o||s,i),a&&a.resolve(),s&&this.releaseLock(s),o},t.prototype.releaseLock=function(e){if(this.isLocked){if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");e.depth===0?(this._lock=null,e.resolve()):e.depth--},t.prototype.releaseLockCompletely=function(e){if(this.isLocked){if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");e.depth=0,this._lock=null,e.resolve()},t.prototype.takeLock=function(e){var n=this;if(typeof e=="object"){var i=e;return new Promise(function(s){s(n.takeLockSync(i))})}var a=e;if(this.isLocked){var o=this.takeLock.bind(this,a);return this._lock.promise.then(o)}return Promise.resolve(this.takeLockSync(a))},t.prototype.takeLockSync=function(e){var n=typeof e=="string"?null:e,i=n?n.name:e;if(n&&!this.hasLock(n)||!n&&this.isLocked)throw new Error("Could not take the lock for "+i+" because the lock for "+this._lock.name+" was not released");if(n)return n.depth++,n;var a=AI(i);return this._lock=a,a},t.prototype.transition=function(e,n,i){if(i=i||[],this.isLocked)if(n){if(!this.hasLock(n))throw new Error("Could not transition using the key for "+n.name+" because "+this._lock.name+" has the lock")}else throw new Error("You must provide the key in order to transition");else if(n)throw new Error("Key provided for "+n.name+", but the StateMachine was not locked (possibly due to preemption)");if(!Ed(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');this._state=e,this.emit.apply(this,CI([],EI(["stateChanged",e].concat(i))))},t.prototype.tryTransition=function(e,n,i){try{this.transition(e,n,i)}catch{return!1}return!0},t.prototype.when=function(e){var n=this;return this.state===e?Promise.resolve(this):Ed(this._reachableStates,this.state,e)?this._whenPromise(function(i,a,o){i===e?a(n):Ed(n._reachableStates,i,e)||o(l5(i,e))}):Promise.reject(l5(this.state,e))},t}(LI);function Ed(r,t,e){return r.get(t).has(e)}function AI(r){var t=Y3.defer();return t.name=r,t.depth=0,t}function NI(r){return Array.from(r.keys()).reduce(function(t,e){return t.set(e,J3(r,e))},new Map)}function J3(r,t,e){return e=e||new Set,r.get(t).forEach(function(n){e.has(n)||(e.add(n),J3(r,n,e).forEach(e.add,e))}),e}function RI(r){var t=new Map;for(var e in r)t.set(e,new Set(r[e]));return t}function l5(r,t){return new Error('"'+t+'" cannot be reached from "'+r+'"')}var lc=OI,jI=function(){function r(t,e){var n=this;e=Object.assign({navigator,window},e);var i=e.navigator,a=i.connection||{type:null},o=a.type,s=a.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var d=o!==n.type&&n.isOnline;o=n.type,d&&t()}},_target:{value:a}}:{_events:{value:["online"]},_listener:{value:t},_target:{value:e.window}},c=s._events,l=s._listener,u=s._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return typeof i.onLine=="boolean"?i.onLine:!0}},type:{enumerable:!0,get:function(){return a.type||null}},_listener:l,_events:c,_target:u})}return r.prototype.start=function(){var t=this;this._events.forEach(function(e){t._target.addEventListener(e,t._listener)})},r.prototype.stop=function(){var t=this;this._events.forEach(function(e){t._target.removeEventListener(e,t._listener)})},r}(),II=jI,MI=function(){function r(t,e,n){n===void 0&&(n=!0),Object.defineProperties(this,{_delay:{value:e,writable:!0},_fn:{value:t},_timeout:{value:null,writable:!0}}),n&&this.start()}return Object.defineProperty(r.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),r.prototype.setDelay=function(t){this._delay=t},r.prototype.start=function(){var t=this;this.isSet||(this._timeout=setTimeout(function(){var e=t._fn;t.clear(),e()},this._delay))},r.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},r.prototype.reset=function(){this.clear(),this.start()},r}(),Bs=MI,qm,c5;function X3(){return c5||(c5=1,qm=WebSocket),qm}var DI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),u5=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},FI=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},BI=lc,Z3=De,UI=Z3.buildLogLevels,$I=Z3.makeUUID,VI=Da,zI=II,il=Bs,WI=0,qI={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},f5={closed:"close",open:"open",waiting:"waiting"},HI=2,GI=3,KI=3,QI=5e3,YI=15e3,JI=5e3,XI=200,d5=1e3,Y0=3e3,J0=3001,X0=3002,Z0=3003,eP=3004,Cd=3005,ey=3006,tP=3007,h5=globalThis,ZI=h5.WebSocket?h5.WebSocket:X3(),Pi={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},eM=new Map([[Y0,Pi.TIMEOUT],[J0,Pi.TIMEOUT],[X0,Pi.FAILED],[Z0,Pi.FAILED],[eP,Pi.TIMEOUT],[ey,Pi.BUSY],[tP,Pi.TIMEOUT]]),rP=function(r){DI(t,r);function t(e,n){var i=r.call(this,"early",qI)||this;n=Object.assign({helloBody:null,maxConsecutiveFailedHellos:KI,maxConsecutiveMissedHeartbeats:GI,requestedHeartbeatTimeout:QI,openTimeout:YI,welcomeTimeout:JI,Log:VI,WebSocket:ZI},n);var a=UI(n.logLevel),o=new n.Log("default",i,a,n.loggerName),s=n.networkMonitor?new zI(function(){var l=s.type,u="Network changed"+(l?" to "+l:"");o.debug(u),i._close({code:eP,reason:u})}):null;Object.defineProperties(i,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:n.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:n.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++WI},_log:{value:o},_messageQueue:{value:[]},_networkMonitor:{value:s},_options:{value:n},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:e},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var c={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return i.on("stateChanged",function(l){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];l in f5&&i.emit.apply(i,FI([f5[l]],u5(u)));var v={name:l,group:"signaling",level:c[i.state]};if(l==="closed"){var p=u5(u,1),y=p[0];v.payload={reason:y},v.level=y===Pi.LOCAL?"info":"error"}i._eventObserver.emit("event",v)}),i._eventObserver.emit("event",{name:i.state,group:"signaling",level:c[i.state]}),i._connect(),i}return t.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},t.prototype._close=function(e){var n=e.code,i=e.reason;if(this.state!=="closed"){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&n!==Cd&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var a=this._log;n===d5?(a.debug("Closed"),this.transition("closed",null,[Pi.LOCAL])):(a.warn("Closed: "+n+" - "+i),n!==Cd&&this.transition("closed",null,[eM.get(n)||Pi.REMOTE]));var o=this._ws.readyState,s=this._options.WebSocket;o!==s.CLOSING&&o!==s.CLOSED&&this._ws.close(n,i)}},t.prototype._connect=function(){var e=this,n=this._log;if(this.state==="waiting")this.transition("early");else if(this.state!=="early"){n.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');return}this._ws=new this._options.WebSocket(this._serverUrl);var i=this._ws;n.debug("Created a new WebSocket:",i),i.addEventListener("close",function(o){return e._close(o)});var a=this._options.openTimeout;this._openTimeout=new il(function(){var o="Failed to open in "+a+" ms";e._close({code:tP,reason:o})},a),i.addEventListener("open",function(){n.debug("WebSocket opened:",i),e._openTimeout.clear(),e._startHandshake(),e._networkMonitor&&e._networkMonitor.start()}),i.addEventListener("message",function(o){n.debug("Incoming: "+o.data);try{o=JSON.parse(o.data)}catch(s){e.emit("error",s);return}switch(o.type){case"bad":e._handleBad(o);break;case"busy":e._handleBusy(o);break;case"bye":break;case"msg":e._handleMessage(o);case"heartbeat":e._handleHeartbeat();break;case"welcome":e._handleWelcome(o);break;default:e._log.debug("Unknown message type: "+o.type),e.emit("error",new Error("Unknown message type: "+o.type));break}})},t.prototype._handleBad=function(e){var n=e.reason,i=this._log;if(!["connecting","open"].includes(this.state)){i.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.');return}if(this.state==="connecting"){i.warn("Closing: "+X0+" - "+n),this._close({code:X0,reason:n});return}i.debug("Error: "+n),this.emit("error",new Error(n))},t.prototype._handleBusy=function(e){var n=this,i=e.cookie,a=e.keepAlive,o=e.retryAfter,s=this._log;if(!["connecting","waiting"].includes(this.state)){s.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.');return}this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var c=o<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+o+" ms";if(o<0){s.warn("Closing: "+ey+" - "+c),this._close({code:ey,reason:c});return}var l=this._options.maxConsecutiveFailedHellos;this._hellosLeft=l,this._cookie=i||null,a?(s.warn(c),this._busyWaitTimeout=new il(function(){return n._startHandshake()},o)):(s.warn("Closing: "+Cd+" - "+c),this._close({code:Cd,reason:c}),this._busyWaitTimeout=new il(function(){return n._connect()},o)),this.transition("waiting",null,[a,o])},t.prototype._handleHeartbeat=function(){if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.');return}this._heartbeatTimeout.reset()},t.prototype._handleHeartbeatTimeout=function(){if(this.state==="open"){var e=this._log,n=this._options.maxConsecutiveMissedHeartbeats;e.debug("Consecutive heartbeats missed: "+n);var i="Missed "+n+' "heartbeat" messages';e.warn("Closing: "+J0+" - "+i),this._close({code:J0,reason:i})}},t.prototype._handleMessage=function(e){var n=e.body;if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.');return}this.emit("message",n)},t.prototype._handleWelcome=function(e){var n=this,i=e.negotiatedTimeout,a=this._log;if(!["connecting","waiting"].includes(this.state)){a.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.');return}this.state==="waiting"&&(a.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var o=this._options.maxConsecutiveMissedHeartbeats,s=i*o,c=i-XI;this._welcomeTimeout.clear(),this._heartbeatTimeout=new il(function(){return n._handleHeartbeatTimeout()},s),this._messageQueue.splice(0).forEach(function(l){return n._send(l)}),this._sendHeartbeatTimeout=new il(function(){return n._sendHeartbeat()},c),this.transition("open")},t.prototype._handleWelcomeTimeout=function(){if(this.state==="connecting"){var e=this._log;if(this._hellosLeft<=0){var n="All handshake attempts failed";e.warn("Closing: "+Y0+" - "+n),this._close({code:Y0,reason:n});return}var i=this._options.maxConsecutiveFailedHellos;e.warn("Handshake attempt "+(i-this._hellosLeft)+" failed"),this._startHandshake()}},t.prototype._send=function(e){var n=this._ws.readyState,i=this._options.WebSocket;if(n===i.OPEN){var a=JSON.stringify(e);this._log.debug("Outgoing: "+a);try{this._ws.send(a),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var o="Failed to send message";this._log.warn("Closing: "+Z0+" - "+o),this._close({code:Z0,reason:o})}}},t.prototype._sendHeartbeat=function(){this.state!=="closed"&&this._send({type:"heartbeat"})},t.prototype._sendHello=function(){var e=this._options,n=e.helloBody,i=e.requestedHeartbeatTimeout,a={id:$I(),timeout:i,type:"hello",version:HI};this._cookie&&(a.cookie=this._cookie),n&&(a.body=n),this._send(a)},t.prototype._sendOrEnqueue=function(e){var n=this;if(this.state!=="closed"){var i=this.state==="open"?function(a){return n._send(a)}:function(a){return n._messageQueue.push(a)};i(e)}},t.prototype._startHandshake=function(){var e=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),this.state==="connecting"){this._hellosLeft--,this._sendHello();var n=this._options.welcomeTimeout;this._welcomeTimeout=new il(function(){return e._handleWelcomeTimeout()},n)}},t.prototype.close=function(){this.state!=="closed"&&(this._sendOrEnqueue({type:"bye"}),this._close({code:d5,reason:"Normal"}))},t.prototype.sendMessage=function(e){this._sendOrEnqueue({body:e,type:"msg"})},t}(BI);rP.CloseReason=Pi;var nP=rP,Be={},tM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rM=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},nM=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},iM=function(r){tM(t,r);function t(e){var n=this,i=[].slice.call(arguments,1);n=r.apply(this,nM([],rM(i)))||this,Object.setPrototypeOf(n,t.prototype);var a=Error.apply(n,i);return a.name="TwilioError",Object.defineProperty(n,"code",{value:e,enumerable:!0}),Object.getOwnPropertyNames(a).forEach(function(o){Object.defineProperty(this,o,{value:a[o],enumerable:!0})},n),n}return t.prototype.toString=function(){var e=this.message?": "+this.message:"";return this.name+" "+this.code+e},t}(Error),aM=iM,rt=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),tt=aM,et={};Be.createTwilioError=function(t,e){return t=typeof t=="number"?t:0,e=typeof e=="string"&&e?e:"Unknown error",et[t]?new et[t]:new tt(t,e)};var iP=function(r){rt(t,r);function t(){var e=r.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.AccessTokenInvalidError=iP;Object.defineProperty(et,20101,{value:iP});var aP=function(r){rt(t,r);function t(){var e=r.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.AccessTokenHeaderInvalidError=aP;Object.defineProperty(et,20102,{value:aP});var oP=function(r){rt(t,r);function t(){var e=r.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.AccessTokenIssuerInvalidError=oP;Object.defineProperty(et,20103,{value:oP});var sP=function(r){rt(t,r);function t(){var e=r.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.AccessTokenExpiredError=sP;Object.defineProperty(et,20104,{value:sP});var lP=function(r){rt(t,r);function t(){var e=r.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.AccessTokenNotYetValidError=lP;Object.defineProperty(et,20105,{value:lP});var cP=function(r){rt(t,r);function t(){var e=r.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.AccessTokenGrantsInvalidError=cP;Object.defineProperty(et,20106,{value:cP});var uP=function(r){rt(t,r);function t(){var e=r.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.AccessTokenSignatureInvalidError=uP;Object.defineProperty(et,20107,{value:uP});var fP=function(r){rt(t,r);function t(){var e=r.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.SignalingConnectionError=fP;Object.defineProperty(et,53e3,{value:fP});var dP=function(r){rt(t,r);function t(){var e=r.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.SignalingConnectionDisconnectedError=dP;Object.defineProperty(et,53001,{value:dP});var hP=function(r){rt(t,r);function t(){var e=r.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.SignalingConnectionTimeoutError=hP;Object.defineProperty(et,53002,{value:hP});var pP=function(r){rt(t,r);function t(){var e=r.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.SignalingIncomingMessageInvalidError=pP;Object.defineProperty(et,53003,{value:pP});var vP=function(r){rt(t,r);function t(){var e=r.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.SignalingOutgoingMessageInvalidError=vP;Object.defineProperty(et,53004,{value:vP});var mP=function(r){rt(t,r);function t(){var e=r.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.SignalingServerBusyError=mP;Object.defineProperty(et,53006,{value:mP});var gP=function(r){rt(t,r);function t(){var e=r.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomNameInvalidError=gP;Object.defineProperty(et,53100,{value:gP});var yP=function(r){rt(t,r);function t(){var e=r.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomNameTooLongError=yP;Object.defineProperty(et,53101,{value:yP});var _P=function(r){rt(t,r);function t(){var e=r.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomNameCharsInvalidError=_P;Object.defineProperty(et,53102,{value:_P});var wP=function(r){rt(t,r);function t(){var e=r.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomCreateFailedError=wP;Object.defineProperty(et,53103,{value:wP});var bP=function(r){rt(t,r);function t(){var e=r.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomConnectFailedError=bP;Object.defineProperty(et,53104,{value:bP});var xP=function(r){rt(t,r);function t(){var e=r.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomMaxParticipantsExceededError=xP;Object.defineProperty(et,53105,{value:xP});var SP=function(r){rt(t,r);function t(){var e=r.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomNotFoundError=SP;Object.defineProperty(et,53106,{value:SP});var kP=function(r){rt(t,r);function t(){var e=r.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomMaxParticipantsOutOfRangeError=kP;Object.defineProperty(et,53107,{value:kP});var PP=function(r){rt(t,r);function t(){var e=r.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomTypeInvalidError=PP;Object.defineProperty(et,53108,{value:PP});var TP=function(r){rt(t,r);function t(){var e=r.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomTimeoutOutOfRangeError=TP;Object.defineProperty(et,53109,{value:TP});var EP=function(r){rt(t,r);function t(){var e=r.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomStatusCallbackMethodInvalidError=EP;Object.defineProperty(et,53110,{value:EP});var CP=function(r){rt(t,r);function t(){var e=r.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomStatusCallbackInvalidError=CP;Object.defineProperty(et,53111,{value:CP});var LP=function(r){rt(t,r);function t(){var e=r.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomStatusInvalidError=LP;Object.defineProperty(et,53112,{value:LP});var OP=function(r){rt(t,r);function t(){var e=r.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomRoomExistsError=OP;Object.defineProperty(et,53113,{value:OP});var AP=function(r){rt(t,r);function t(){var e=r.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomInvalidParametersError=AP;Object.defineProperty(et,53114,{value:AP});var NP=function(r){rt(t,r);function t(){var e=r.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomMediaRegionInvalidError=NP;Object.defineProperty(et,53115,{value:NP});var RP=function(r){rt(t,r);function t(){var e=r.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomMediaRegionUnavailableError=RP;Object.defineProperty(et,53116,{value:RP});var jP=function(r){rt(t,r);function t(){var e=r.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomSubscriptionOperationNotSupportedError=jP;Object.defineProperty(et,53117,{value:jP});var IP=function(r){rt(t,r);function t(){var e=r.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomCompletedError=IP;Object.defineProperty(et,53118,{value:IP});var MP=function(r){rt(t,r);function t(){var e=r.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomAudioOnlyFlagNotSupportedError=MP;Object.defineProperty(et,53124,{value:MP});var DP=function(r){rt(t,r);function t(){var e=r.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.RoomTrackKindNotSupportedError=DP;Object.defineProperty(et,53125,{value:DP});var FP=function(r){rt(t,r);function t(){var e=r.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.ParticipantIdentityInvalidError=FP;Object.defineProperty(et,53200,{value:FP});var BP=function(r){rt(t,r);function t(){var e=r.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.ParticipantIdentityTooLongError=BP;Object.defineProperty(et,53201,{value:BP});var UP=function(r){rt(t,r);function t(){var e=r.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.ParticipantIdentityCharsInvalidError=UP;Object.defineProperty(et,53202,{value:UP});var $P=function(r){rt(t,r);function t(){var e=r.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.ParticipantMaxTracksExceededError=$P;Object.defineProperty(et,53203,{value:$P});var VP=function(r){rt(t,r);function t(){var e=r.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.ParticipantNotFoundError=VP;Object.defineProperty(et,53204,{value:VP});var zP=function(r){rt(t,r);function t(){var e=r.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.ParticipantDuplicateIdentityError=zP;Object.defineProperty(et,53205,{value:zP});var WP=function(r){rt(t,r);function t(){var e=r.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.TrackInvalidError=WP;Object.defineProperty(et,53300,{value:WP});var qP=function(r){rt(t,r);function t(){var e=r.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.TrackNameInvalidError=qP;Object.defineProperty(et,53301,{value:qP});var HP=function(r){rt(t,r);function t(){var e=r.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.TrackNameTooLongError=HP;Object.defineProperty(et,53302,{value:HP});var GP=function(r){rt(t,r);function t(){var e=r.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.TrackNameCharsInvalidError=GP;Object.defineProperty(et,53303,{value:GP});var KP=function(r){rt(t,r);function t(){var e=r.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.TrackNameIsDuplicatedError=KP;Object.defineProperty(et,53304,{value:KP});var QP=function(r){rt(t,r);function t(){var e=r.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.TrackServerTrackCapacityReachedError=QP;Object.defineProperty(et,53305,{value:QP});var YP=function(r){rt(t,r);function t(){var e=r.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.MediaClientLocalDescFailedError=YP;Object.defineProperty(et,53400,{value:YP});var JP=function(r){rt(t,r);function t(){var e=r.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.MediaServerLocalDescFailedError=JP;Object.defineProperty(et,53401,{value:JP});var XP=function(r){rt(t,r);function t(){var e=r.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.MediaClientRemoteDescFailedError=XP;Object.defineProperty(et,53402,{value:XP});var ZP=function(r){rt(t,r);function t(){var e=r.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.MediaServerRemoteDescFailedError=ZP;Object.defineProperty(et,53403,{value:ZP});var eT=function(r){rt(t,r);function t(){var e=r.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.MediaNoSupportedCodecError=eT;Object.defineProperty(et,53404,{value:eT});var tT=function(r){rt(t,r);function t(){var e=r.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.MediaConnectionError=tT;Object.defineProperty(et,53405,{value:tT});var rT=function(r){rt(t,r);function t(){var e=r.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.MediaDTLSTransportFailedError=rT;Object.defineProperty(et,53407,{value:rT});var nT=function(r){rt(t,r);function t(){var e=r.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.ConfigurationAcquireFailedError=nT;Object.defineProperty(et,53500,{value:nT});var iT=function(r){rt(t,r);function t(){var e=r.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(tt);Be.ConfigurationAcquireTurnFailedError=iT;Object.defineProperty(et,53501,{value:iT});Object.defineProperty(Hp,"__esModule",{value:!0});Hp.getTurnCredentials=void 0;var oM=nP,sM=zt.ICE_VERSION,aT=Be,lM=aT.createTwilioError,cM=aT.SignalingConnectionError,uM=yn;function fM(r,t){return new Promise(function(e,n){var i=new uM.EventEmitter,a={networkMonitor:null,eventObserver:i,helloBody:{edge:"roaming",preflight:!0,token:r,type:"ice",version:sM}},o=new oM(t,a),s=!1;o.once("close",function(){s||(s=!0,n(new cM))}),o.on("message",function(c){var l=c.code,u=c.message,d=c.ice_servers,v=c.type;(v==="iced"||v==="error")&&!s&&(s=!0,v==="iced"?e(d):n(lM(l,u)),o.close())})})}Hp.getTurnCredentials=fM;var Gp={},p5=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},v5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.makeStat=void 0;function dM(r){if(r&&r.length){var t=Math.min.apply(Math,v5([],p5(r))),e=Math.max.apply(Math,v5([],p5(r))),n=r.reduce(function(i,a){return i+a},0)/r.length;return{min:t,max:e,average:n}}return null}Gp.makeStat=dM;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.syntheticAudio=void 0;function hM(){var r=Vp(),t={},e=r.getOrCreate(t),n=e.createOscillator(),i=n.connect(e.createMediaStreamDestination());n.start();var a=i.stream.getAudioTracks()[0],o=a.stop;return a.stop=function(){o.call(a),r.release(t)},a}Kp.syntheticAudio=hM;var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.syntheticVideo=void 0;function pM(r){var t=r===void 0?{}:r,e=t.width,n=e===void 0?640:e,i=t.height,a=i===void 0?480:i,o=Object.assign(document.createElement("canvas"),{width:n,height:a}),s=o.getContext("2d");s.fillStyle="green",s.fillRect(0,0,o.width,o.height);var c=!1;requestAnimationFrame(function v(){if(!c){var p=Math.round(Math.random()*255),y=Math.round(Math.random()*255),_=Math.round(Math.random()*255),S=Math.round(Math.random()*255);s.fillStyle="rgba("+p+", "+y+", "+_+", "+S+")",s.fillRect(Math.random()*n,Math.random()*a,50,50),requestAnimationFrame(v)}});var l=o.captureStream(30),u=l.getTracks()[0],d=u.stop;return u.stop=function(){c=!0,d.call(u)},u}Qp.syntheticVideo=pM;var vM=function(){function r(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return r.prototype.get=function(){var t=this._samples,e=t[1].denominator-t[0].denominator||1/0,n=t[1].numerator-t[0].numerator;return n/e},r.prototype.putSample=function(t,e){var n=this._samples;n.shift(),n.push({denominator:e,numerator:t})},r}(),oT=vM,mM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gM=yn.EventEmitter,yM=["signaling","room","media","quality","video-processor","preflight"],_M=["debug","error","info","warning"],wM=function(r){mM(t,r);function t(e,n,i,a){a===void 0&&(a=null);var o=r.call(this)||this;return o.on("event",function(s){var c=s.name,l=s.group,u=s.level,d=s.payload;if(typeof c!="string")throw i.error("Unexpected name: ",c),new Error("Unexpected name: ",c);if(!yM.includes(l))throw i.error("Unexpected group: ",l),new Error("Unexpected group: ",l);if(!_M.includes(u))throw i.error("Unexpected level: ",u),new Error("Unexpected level: ",u);var v=Date.now(),p=v-n,y=Object.assign({elapsedTime:p,level:u},d||{});e.publish(l,c,y);var _=Object.assign({elapsedTime:p,group:l,level:u,name:c,timestamp:v},d?{payload:d}:{}),S={debug:"debug",error:"error",info:"info",warning:"warn"}[u];i[S]("event",_),a&&l==="signaling"&&a.emit("event",_)}),o}return t}(gM),sT=wM,bM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Al=A&&A.__assign||function(){return Al=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Al.apply(this,arguments)},xM=yn.EventEmitter,SM=De.getUserAgent,kM=5,PM=50,TM=1e3,m5=globalThis,EM=m5.WebSocket?m5.WebSocket:X3(),lT=zt,CM=lT.hardwareDevicePublisheriPad,LM=lT.hardwareDevicePublisheriPhone,OM=De,g5=Fs,AM=function(r){bM(t,r);function t(e,n,i,a,o,s){var c=r.call(this)||this;return s=Object.assign({gateway:NM(a,o)+"/v1/VideoEvents",maxReconnectAttempts:kM,reconnectIntervalMs:PM,userAgent:SM(),WebSocket:EM},s),Object.defineProperties(c,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:OM.defer()},_reconnectAttemptsLeft:{value:s.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:s.WebSocket}}),c._readyToConnect.promise.then(function(l){var u=l.roomSid,d=l.participantSid,v=c;c.on("disconnected",function p(y){if(v._session=null,y&&v._reconnectAttemptsLeft>0){v.emit("reconnecting"),jM(v,e,n,i,u,d,s);return}v.removeListener("disconnected",p)}),ty(c,e,n,i,u,d,s)}).catch(function(){}),c}return t.prototype.connect=function(e,n){this._readyToConnect.resolve({roomSid:e,participantSid:n})},t.prototype._publish=function(e){e.session=this._session,this._ws.send(JSON.stringify(e))},t.prototype.disconnect=function(){if(this._ws===null||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},t.prototype.publish=function(e,n,i){if(this._ws!==null&&(this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED))return!1;var a=typeof this._session=="string"?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue);return a({group:e,name:n,payload:i,timestamp:Date.now(),type:"event",version:1}),!0},t}(xM);function ty(r,t,e,n,i,a,o){r._connectTimestamp=Date.now(),r._reconnectAttemptsLeft--,r._ws=new o.WebSocket(o.gateway);var s=r._ws;s.addEventListener("close",function(c){if(c.code===TM){r.emit("disconnected");return}r.emit("disconnected",new Error("WebSocket Error "+c.code+": "+c.reason))}),s.addEventListener("message",function(c){RM(r,JSON.parse(c.data),o)}),s.addEventListener("open",function(){var c={type:"connect",token:t,version:1};c.publisher={name:e,sdkVersion:n,userAgent:o.userAgent,participantSid:a,roomSid:i},g5.isIpad()?c.publisher=Al(Al({},c.publisher),CM):g5.isIphone()&&(c.publisher=Al(Al({},c.publisher),LM)),s.send(JSON.stringify(c))})}function NM(r,t){return r==="prod"?"wss://sdkgw."+t+".twilio.com":"wss://sdkgw."+r+"-"+t+".twilio.com"}function RM(r,t,e){switch(t.type){case"connected":r._session=t.session,r._reconnectAttemptsLeft=e.maxReconnectAttempts,r._eventQueue.splice(0).forEach(r._publish,r),r.emit("connected");break;case"error":r._ws.close(),r.emit("disconnected",new Error(t.message));break}}function jM(r,t,e,n,i,a,o){var s=Date.now()-r._connectTimestamp,c=o.reconnectIntervalMs-s;if(c>0){setTimeout(function(){ty(r,t,e,n,i,a,o)},c);return}ty(r,t,e,n,i,a,o)}var cT=AM,IM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ap=A&&A.__assign||function(){return ap=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ap.apply(this,arguments)},nu=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},iu=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(ec,"__esModule",{value:!0});ec.runPreflight=ec.PreflightTest=void 0;var al=zt,ol=Wp,MM=tc,DM=qp,FM=Hp,Ld=Gp,BM=Kp,UM=Qp,$M=De,VM=zt.WS_SERVER,zM=Da,WM=df,Hm=oT,qM=sT,HM=cT,uT=Fp,GM=uT.createSID,KM=uT.sessionSID,fT=Be,QM=fT.SignalingConnectionTimeoutError,y5=fT.MediaConnectionError,dT=1e3,YM=10*dT,ss={mediaAcquired:"mediaAcquired",connected:"connected",mediaSubscribed:"mediaSubscribed",mediaStarted:"mediaStarted",dtlsConnected:"dtlsConnected",peerConnectionConnected:"peerConnectionConnected",iceConnected:"iceConnected"};function JM(r){return r!==null&&typeof r<"u"}var XM=0,hT=function(r){IM(t,r);function t(e,n){var i=r.call(this)||this;i._testTiming=new ol.Timer,i._dtlsTiming=new ol.Timer,i._iceTiming=new ol.Timer,i._peerConnectionTiming=new ol.Timer,i._mediaTiming=new ol.Timer,i._connectTiming=new ol.Timer,i._sentBytesMovingAverage=new Hm,i._packetLossMovingAverage=new Hm,i._progressEvents=[],i._receivedBytesMovingAverage=new Hm;var a=n,o=a.environment,s=o===void 0?"prod":o,c=a.region,l=c===void 0?"gll":c,u=a.duration,d=u===void 0?YM:u,v=a.wsServer||VM(s,l);return i._log=new zM("default",i,al.DEFAULT_LOG_LEVEL,al.DEFAULT_LOGGER_NAME),i._testDuration=d,i._instanceId=XM++,i._testTiming.start(),i._runPreflightTest(e,s,v),i}return t.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},t.prototype.stop=function(){this._stopped=!0},t.prototype._generatePreflightReport=function(e){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:Ld.makeStat(e==null?void 0:e.jitter),rtt:Ld.makeStat(e==null?void 0:e.rtt),packetLoss:Ld.makeStat(e==null?void 0:e.packetLoss)},selectedIceCandidatePairStats:e?e.selectedIceCandidatePairStats:null,iceCandidateStats:e?e.iceCandidateStats:[],progressEvents:this._progressEvents,mos:Ld.makeStat(e==null?void 0:e.mos)}},t.prototype._executePreflightStep=function(e,n,i){return nu(this,void 0,void 0,function(){var a,o,s,c,l;return iu(this,function(u){switch(u.label){case 0:if(this._log.debug("Executing step: ",e),a=this._testDuration+10*dT,this._stopped)throw new Error("stopped");o=Promise.resolve().then(n),s=null,c=new Promise(function(d,v){s=setTimeout(function(){v(i||new Error(e+" timeout."))},a)}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.race([c,o])];case 2:return l=u.sent(),[2,l];case 3:return s!==null&&clearTimeout(s),[7];case 4:return[2]}})})},t.prototype._collectNetworkTimings=function(e){var n=this;return new Promise(function(i){var a;e.addEventListener("iceconnectionstatechange",function(){e.iceConnectionState==="checking"&&n._iceTiming.start(),e.iceConnectionState==="connected"&&(n._iceTiming.stop(),n._updateProgress(ss.iceConnected),(!a||a&&a.state==="connected")&&i())}),e.addEventListener("connectionstatechange",function(){e.connectionState==="connecting"&&n._peerConnectionTiming.start(),e.connectionState==="connected"&&(n._peerConnectionTiming.stop(),n._updateProgress(ss.peerConnectionConnected))});var o=e.getSenders(),s=o.map(function(c){return c.transport}).find(JM);typeof s<"u"&&(a=s,a.addEventListener("statechange",function(){a.state==="connecting"&&n._dtlsTiming.start(),a.state==="connected"&&(n._dtlsTiming.stop(),n._updateProgress(ss.dtlsConnected),e.iceConnectionState==="connected"&&i())}))})},t.prototype._setupInsights=function(e){var n=e.token,i=e.environment,a=i===void 0?al.DEFAULT_ENVIRONMENT:i,o=e.realm,s=o===void 0?al.DEFAULT_REALM:o,c={},l=new HM(n,al.SDK_NAME,al.SDK_VERSION,a,s,c);l.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var u=new qM(l,Date.now(),this._log),d=void 0;return{reportToInsights:function(v){var p,y,_=v.report,S=_.stats.jitter||d,w=_.stats.rtt||d,x=_.stats.packetLoss||d,k=_.mos||d,T=new Map;_.iceCandidateStats.forEach(function($){if($.candidateType&&$.protocol){var F=T.get($.candidateType)||[];F.indexOf($.protocol)<0&&F.push($.protocol),T.set($.candidateType,F)}});var R=JSON.stringify(Object.fromEntries(T)),U={name:"report",group:"preflight",level:_.error?"error":"info",payload:{sessionSID:KM,preflightSID:GM("PF"),progressEvents:JSON.stringify(_.progressEvents),testTiming:_.testTiming,dtlsTiming:_.networkTiming.dtls,iceTiming:_.networkTiming.ice,peerConnectionTiming:_.networkTiming.peerConnection,connectTiming:_.networkTiming.connect,mediaTiming:_.networkTiming.media,selectedLocalCandidate:(p=_.selectedIceCandidatePairStats)===null||p===void 0?void 0:p.localCandidate,selectedRemoteCandidate:(y=_.selectedIceCandidatePairStats)===null||y===void 0?void 0:y.remoteCandidate,iceCandidateStats:R,jitterStats:S,rttStats:w,packetLossStats:x,mosStats:k,error:_.error}};u.emit("event",U),setTimeout(function(){return l.disconnect()},2e3)}}},t.prototype._runPreflightTest=function(e,n,i){return nu(this,void 0,void 0,function(){var a,o,s,c,l,u,d,v,p,y,_,S,w=this;return iu(this,function(x){switch(x.label){case 0:a=[],o=[],s=this._setupInsights({token:e,environment:n}).reportToInsights,x.label=1;case 1:return x.trys.push([1,8,9,10]),c=[],[4,this._executePreflightStep("Acquire media",function(){return[BM.syntheticAudio(),UM.syntheticVideo({width:640,height:480})]})];case 2:return a=x.sent(),this._updateProgress(ss.mediaAcquired),this.emit("debug",{localTracks:a}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return FM.getTurnCredentials(e,i)},new QM)];case 3:return l=x.sent(),this._connectTiming.stop(),this._updateProgress(ss.connected),u=new RTCPeerConnection({iceServers:l,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),d=new RTCPeerConnection({iceServers:l,bundlePolicy:"max-bundle"}),o.push(u),o.push(d),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return nu(w,void 0,void 0,function(){var k,T,R,U;return iu(this,function($){switch($.label){case 0:return u.addEventListener("icecandidate",function(F){return F.candidate&&d.addIceCandidate(F.candidate)}),d.addEventListener("icecandidate",function(F){return F.candidate&&u.addIceCandidate(F.candidate)}),a.forEach(function(F){return u.addTrack(F)}),k=new Promise(function(F){var M=[];d.addEventListener("track",function(J){M.push(J.track),M.length===a.length&&F(M)})}),[4,u.createOffer()];case 1:return T=$.sent(),R=T,[4,u.setLocalDescription(R)];case 2:return $.sent(),[4,d.setRemoteDescription(R)];case 3:return $.sent(),[4,d.createAnswer()];case 4:return U=$.sent(),[4,d.setLocalDescription(U)];case 5:return $.sent(),[4,u.setRemoteDescription(U)];case 6:return $.sent(),[4,this._collectNetworkTimings(u)];case 7:return $.sent(),[2,k]}})})},new y5)];case 4:return v=x.sent(),this.emit("debug",{remoteTracks:v}),v.forEach(function(k){k.addEventListener("ended",function(){return w._log.warn(k.kind+":ended")}),k.addEventListener("mute",function(){return w._log.warn(k.kind+":muted")}),k.addEventListener("unmute",function(){return w._log.warn(k.kind+":unmuted")})}),this._updateProgress(ss.mediaSubscribed),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(k){var T=document.createElement("video");T.autoplay=!0,T.playsInline=!0,T.muted=!0,T.srcObject=new MediaStream(v),c.push(T),w.emit("debugElement",T),T.oncanplay=k})},new y5)];case 5:return x.sent(),this._mediaTiming.stop(),this._updateProgress(ss.mediaStarted),[4,this._executePreflightStep("Collect stats for duration",function(){return w._collectRTCStatsForDuration(w._testDuration,ZM(),u,d)})];case 6:return p=x.sent(),[4,this._executePreflightStep("Generate report",function(){return w._generatePreflightReport(p)})];case 7:return y=x.sent(),s({report:y}),this.emit("completed",y),[3,10];case 8:return _=x.sent(),S=this._generatePreflightReport(),s({report:ap(ap({},S),{error:_==null?void 0:_.toString()})}),this.emit("failed",_,S),[3,10];case 9:return o.forEach(function(k){return k.close()}),a.forEach(function(k){return k.stop()}),[7];case 10:return[2]}})})},t.prototype._collectRTCStats=function(e,n,i){return nu(this,void 0,void 0,function(){var a,o,s,c,l,u,d,v,p,y,_,S,w,x;return iu(this,function(k){switch(k.label){case 0:return[4,DM.getCombinedConnectionStats({publisher:n,subscriber:i})];case 1:return a=k.sent(),o=a.timestamp,s=a.bytesSent,c=a.bytesReceived,l=a.packets,u=a.packetsLost,d=a.roundTripTime,v=a.jitter,p=a.selectedIceCandidatePairStats,y=a.iceCandidateStats,_=e.jitter.length>0,e.jitter.push(v),e.rtt.push(d),this._sentBytesMovingAverage.putSample(s,o),this._receivedBytesMovingAverage.putSample(c,o),this._packetLossMovingAverage.putSample(u,l),_&&(e.outgoingBitrate.push(this._sentBytesMovingAverage.get()*1e3*8),e.incomingBitrate.push(this._receivedBytesMovingAverage.get()*1e3*8),S=this._packetLossMovingAverage.get(),w=Math.min(100,S*100),e.packetLoss.push(w),x=MM.calculateMOS(d,v,S),e.mos.push(x)),e.selectedIceCandidatePairStats||(e.selectedIceCandidatePairStats=p),e.iceCandidateStats.length===0&&(e.iceCandidateStats=y),[2]}})})},t.prototype._collectRTCStatsForDuration=function(e,n,i,a){return nu(this,void 0,void 0,function(){var o,s,c;return iu(this,function(l){switch(l.label){case 0:return o=Date.now(),s=Math.min(1e3,e),[4,$M.waitForSometime(s)];case 1:return l.sent(),[4,this._collectRTCStats(n,i,a)];case 2:return l.sent(),c=e-(Date.now()-o),c>0?[4,this._collectRTCStatsForDuration(c,n,i,a)]:[3,4];case 3:n=l.sent(),l.label=4;case 4:return[2,n]}})})},t.prototype._updateProgress=function(e){var n=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:n,name:e}),this.emit("progress",e)},t}(WM);ec.PreflightTest=hT;function ZM(){return{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]}}function eD(r,t){t===void 0&&(t={});var e=new hT(r,t);return e}ec.runPreflight=eD;var Gm=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Km=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},tD=function(){function r(t,e){var n=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:e}}),Object.defineProperty(this,"_promise",{value:new Promise(function(i,a){t(function(o){n._isCancelable=!1,i(o)},function(o){n._isCancelable=!1,a(o)},function(){return n._isCanceled})})})}return r.reject=function(t){return new r(function(n,i){i(t)},function(){})},r.resolve=function(t){return new r(function(n){n(t)},function(){})},r.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},r.prototype.catch=function(){var t=[].slice.call(arguments),e=this._promise;return new r(function(i,a){e.catch.apply(e,Km([],Gm(t))).then(i,a)},this._onCancel)},r.prototype.then=function(){var t=[].slice.call(arguments),e=this._promise;return new r(function(i,a){e.then.apply(e,Km([],Gm(t))).then(i,a)},this._onCancel)},r.prototype.finally=function(){var t=[].slice.call(arguments),e=this._promise;return new r(function(i,a){e.finally.apply(e,Km([],Gm(t))).then(i,a)},this._onCancel)},r}(),G1=tD,_5=G1;function rD(r,t,e,n){var i,a=new Error("Canceled");return new _5(function(s,c,l){var u;r(function(v){return l()?_5.reject(a):(u=t(v),e(u).then(function(y){if(l())throw a;return i=y(),i}))}).then(function(v){if(l())throw v.disconnect(),a;s(n(u,v))}).catch(function(v){c(v)})},function(){i&&i.cancel()})}var nD=rD,iD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aD=yn.EventEmitter,oD=function(r){iD(t,r);function t(e,n){var i=r.call(this)||this;return e=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},e),Object.defineProperties(i,{maxAudioBitrate:{value:e.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:e.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:n}}),i}return t.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},t.prototype.update=function(e){var n=this;e=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},e);var i=["maxAudioBitrate","maxVideoBitrate"].reduce(function(a,o){return n[o]!==e[o]&&(n[o]=e[o],a=!0),a},!1);i&&this.emit("changed")},t}(aD),sD=oD,hf={},lD=De.isNonArrayObject,cc=zt,mu=cc.typeErrors,cD=cc.clientTrackSwitchOffControl,uD=cc.videoContentPreferencesMode,fD=cc.subscriptionMode,pT=cc.trackPriority,dD=cc.trackSwitchOffMode;function hD(r){var t=Ju(r,"options.bandwidthProfile");return!r||t||(t=Ju(r.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(uD)},{prop:"dominantSpeakerPriority",values:Object.values(pT)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(fD)},{prop:"clientTrackSwitchOffControl",values:Object.values(cD)},{prop:"trackSwitchOffMode",values:Object.values(dD)}]),t)?t:r.video?"maxTracks"in r.video&&"clientTrackSwitchOffControl"in r.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in r.video&&"contentPreferencesMode"in r.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):vD(r.video.renderDimensions):null}function pD(r,t){if(!(r instanceof t.LocalAudioTrack||r instanceof t.LocalDataTrack||r instanceof t.LocalVideoTrack||r instanceof t.MediaStreamTrack))throw mu.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function Ju(r,t,e){return e===void 0&&(e=[]),typeof r>"u"?null:r===null||!lD(r)?mu.INVALID_TYPE(t,"object"):e.reduce(function(n,i){var a=i.prop,o=i.type,s=i.values;if(n||!(a in r))return n;var c=r[a];return o&&typeof c!==o||o==="number"&&isNaN(c)?mu.INVALID_TYPE(t+"."+a,o):Array.isArray(s)&&!s.includes(c)?mu.INVALID_VALUE(t+"."+a,s):n},null)}function vD(r){var t="options.bandwidthProfile.video.renderDimensions",e=Ju(r,t);return r?e||Object.values(pT).reduce(function(n,i){return n||Ju(r[i],t+"."+i,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):e}hf.validateBandwidthProfile=hD;hf.validateLocalTrack=pD;hf.validateObject=Ju;var mD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gD=df,vT=De,yD=vT.buildLogLevels,_D=vT.valueToJSON,wD=zt.DEFAULT_LOG_LEVEL,bD=Da,xD=0,SD=function(r){mD(t,r);function t(e,n,i){var a=r.call(this)||this;i=Object.assign({logLevel:wD},i);var o=yD(i.logLevel);return Object.defineProperties(a,{_instanceId:{value:xD++},_log:{value:i.log?i.log.createLog("default",a):new bD("default",a,o,i.loggerName)},trackName:{enumerable:!0,value:e},trackSid:{enumerable:!0,value:n}}),a}return t.prototype.toJSON=function(){return _D(this)},t.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(gD),mT=SD,kD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PD=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},TD=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},ED=mT,gT=zt,CD=gT.typeErrors,LD=gT.trackPriority,OD=function(r){kD(t,r);function t(e,n,i,a){var o=r.call(this,n.name,e.sid,a)||this;return Object.defineProperties(o,{_reemitSignalingEvent:{value:function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return o.emit.apply(o,TD([s&&s.length?"warning":"warningsCleared"],PD(s)))}},_reemitTrackEvent:{value:function(){return o.emit(o.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:e},_unpublish:{value:i},isTrackEnabled:{enumerable:!0,get:function(){return this.track.kind==="data"?!0:this.track.isEnabled}},kind:{enumerable:!0,value:n.kind},priority:{enumerable:!0,get:function(){return e.updatedPriority}},track:{enumerable:!0,value:n}}),["disabled","enabled"].forEach(function(s){return n.on(s,o._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(s){return e.on(s,o._reemitSignalingEvent)}),o}return t.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype.setPriority=function(e){var n=Object.values(LD);if(!n.includes(e))throw CD.INVALID_VALUE("priority",n);return this._signaling.setPriority(e),this},t.prototype.unpublish=function(){var e=this;return["disabled","enabled"].forEach(function(n){return e.track.removeListener(n,e._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(n){return e._signaling.removeListener(n,e._reemitSignalingEvent)}),this._unpublish(this),this},t}(ED),K1=OD,AD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ND=K1,RD=function(r){AD(t,r);function t(e,n,i,a){return r.call(this,e,n,i,a)||this}return t.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(ND),jD=RD,ID=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),MD=K1,DD=function(r){ID(t,r);function t(e,n,i,a){return r.call(this,e,n,i,a)||this}return t.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(MD),FD=DD,BD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),UD=K1,$D=function(r){BD(t,r);function t(e,n,i,a){return r.call(this,e,n,i,a)||this}return t.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(UD),VD=$D,zD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),WD=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},qD=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},yT=zt,HD=yT.typeErrors,GD=yT.trackPriority,KD=Fs.isIOS,w5=U1;function QD(r){return function(t){zD(e,t);function e(n,i,a,o,s,c,l){var u=this;return l=Object.assign({workaroundWebKitBug212780:KD()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},l),u=t.call(this,i,l)||this,Object.defineProperties(u,{_isEnabled:{value:a,writable:!0},_isSwitchedOff:{value:o,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:s},_setRenderHint:{value:function(d){u._log.debug("updating render hint:",d),c(d)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:n},_workaroundWebKitBug212780:{value:l.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),u}return e.prototype.setPriority=function(n){var i=qD([null],WD(Object.values(GD)));if(!i.includes(n))throw HD.INVALID_VALUE("priority",i);return this._priority!==n&&(this._priority=n,this._setPriority(n)),this},e.prototype._setEnabled=function(n){this._isEnabled!==n&&(this._isEnabled=n,this.emit(this._isEnabled?"enabled":"disabled",this))},e.prototype._setSwitchedOff=function(n){this._isSwitchedOff!==n&&(this._isSwitchedOff=n,this.emit(n?"switchedOff":"switchedOn",this))},e.prototype.attach=function(n){var i=t.prototype.attach.call(this,n);return this.mediaStreamTrack.enabled!==!0&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||YD(this)),i},e.prototype.detach=function(n){var i=t.prototype.detach.call(this,n);return this._attachments.size===0&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),i},e}(r)}function YD(r){var t=r._log,e=r.kind;function n(i){i&&r._attachments.forEach(function(a){var o=r._elShims.get(a),s=a.paused&&o&&!o.pausedIntentionally();s&&(t.info("Playing inadvertently paused <"+e+"> element"),t.debug("Element:",a),t.debug("RemoteMediaTrack:",r),a.play().then(function(){t.info("Successfully played inadvertently paused <"+e+"> element"),t.debug("Element:",a),t.debug("RemoteMediaTrack:",r)}).catch(function(c){t.warn("Error while playing inadvertently paused <"+e+"> element:",{err:c,el:a,remoteMediaTrack:r})}))})}return w5.onVisibilityChange(2,n),function(){w5.offVisibilityChange(2,n)}}var _T=QD,JD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),XD=R3,ZD=_T,eF=ZD(XD),tF=function(r){JD(t,r);function t(e,n,i,a,o,s,c){return r.call(this,e,n,i,a,o,s,c)||this}return t.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype._start=function(){r.prototype._start.call(this),this._dummyEl&&(this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl=null)},t.prototype.setPriority=function(e){return r.prototype.setPriority.call(this,e)},t}(eF),rF=tF,nF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),iF=mT,aF=function(r){nF(t,r);function t(e,n){var i=r.call(this,e.name,e.sid,n)||this;Object.defineProperties(i,{_signaling:{value:e},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return e.isEnabled}},kind:{enumerable:!0,value:e.kind},publishPriority:{enumerable:!0,get:function(){return e.priority}},track:{enumerable:!0,get:function(){return this._track}}});var a=e.error,o=e.isEnabled,s=e.isSwitchedOff,c=e.priority;return e.on("updated",function(){if(a!==e.error){a=e.error,i.emit("subscriptionFailed",e.error);return}o!==e.isEnabled&&(o=e.isEnabled,i.track&&i.track._setEnabled(e.isEnabled),i.emit(e.isEnabled?"trackEnabled":"trackDisabled")),s!==e.isSwitchedOff&&(i._log.debug(i.trackSid+": "+(s?"OFF":"ON")+" => "+(e.isSwitchedOff?"OFF":"ON")),s=e.isSwitchedOff,i.track?(i.track._setSwitchedOff(e.isSwitchedOff),i.emit(s?"trackSwitchedOff":"trackSwitchedOn",i.track)):s&&i._log.warn("Track was not subscribed when switched Off.")),c!==e.priority&&(c=e.priority,i.emit("publishPriorityChanged",c))}),i}return t.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype._subscribed=function(e){!this._track&&e&&(this._track=e,this.emit("subscribed",e))},t.prototype._unsubscribe=function(){if(this._track){var e=this._track;this._track=null,this.emit("unsubscribed",e)}},t}(iF),Q1=aF,oF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sF=Q1,lF=function(r){oF(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(sF),cF=lF,uF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fF=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},dF=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},hF=B1,wT=zt,pF=wT.typeErrors,vF=wT.trackPriority,mF=function(r){uF(t,r);function t(e,n,i){var a=r.call(this,n.id,"data",i)||this;return Object.defineProperties(a,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:n.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:n.maxRetransmits},ordered:{enumerable:!0,value:n.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:n.maxPacketLifeTime===null&&n.maxRetransmits===null},sid:{enumerable:!0,value:e}}),n.on("message",function(o){a.emit("message",o,a)}),a}return t.prototype.setPriority=function(e){var n=dF([null],fF(Object.values(vF)));if(!n.includes(e))throw pF.INVALID_VALUE("priority",n);return this._priority=e,this},t.prototype._setEnabled=function(){},t.prototype._setSwitchedOff=function(e){this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit(e?"switchedOff":"switchedOn",this))},t}(hF),gF=mF,yF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_F=Q1,wF=function(r){yF(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(_F),bF=wF,bT=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Y1=function(){function r(t){Object.defineProperties(this,{_callback:{value:t}})}return r.prototype.observe=function(){},r.prototype.unobserve=function(){},r.prototype.makeVisible=function(t){var e=this._makeFakeEntry(t,!0);this._callback([e])},r.prototype.makeInvisible=function(t){var e=this._makeFakeEntry(t,!1);this._callback([e])},r.prototype._makeFakeEntry=function(t,e){return{target:t,isIntersecting:e}},r}();(function(r){bT(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(Y1);(function(r){bT(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.resize=function(e){var n=this._makeFakeEntry(e,!0);this._callback([n])},t})(Y1);var xF={NullObserver:Y1},SF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kF=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},PF=_T,xT=W3,b5=U1,x5=xF.NullObserver,TF=Bs,EF=PF(xT),CF=50,LF=function(r){SF(t,r);function t(e,n,i,a,o,s,c){var l=this;return c=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},c),c=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||c.clientTrackSwitchOffControl!=="auto"?x5:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||c.contentPreferencesMode!=="auto"?x5:ResizeObserver},c),l=r.call(this,e,n,i,a,o,s,c)||this,Object.defineProperties(l,{_enableDocumentVisibilityTurnOff:{value:c.enableDocumentVisibilityTurnOff===!0&&c.clientTrackSwitchOffControl==="auto"},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:c.clientTrackSwitchOffControl},_contentPreferencesMode:{value:c.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new TF(function(){l._setRenderHint({enabled:!1})},CF,!1)},_resizeObserver:{value:new c.ResizeObserver(function(u){var d=u.find(function(v){return!l._invisibleElements.has(v.target)});d&&Od(l)})},_intersectionObserver:{value:new c.IntersectionObserver(function(u){var d=!1;u.forEach(function(v){var p=!l._invisibleElements.has(v.target);p!==v.isIntersecting&&(v.isIntersecting?(l._log.debug("intersectionObserver detected: Off => On"),l._invisibleElements.delete(v.target)):(l._log.debug("intersectionObserver detected: On => Off"),l._invisibleElements.add(v.target)),d=!0)}),d&&(vl(l),Od(l))},{threshold:.25})}}),l}return t.prototype._start=function(e){var n=r.prototype._start.call(this,e);return vl(this),n},t.prototype.switchOn=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},t.prototype.switchOff=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},t.prototype.setContentPreferences=function(e){if(this._contentPreferencesMode!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return e.renderDimensions&&this._setRenderHint({renderDimensions:e.renderDimensions}),this},t.prototype._unObservePip=function(e){var n=this._elToPipCallbacks.get(e);n&&(e.removeEventListener("enterpictureinpicture",n.onEnterPip),e.removeEventListener("leavepictureinpicture",n.onLeavePip),this._elToPipCallbacks.delete(e))},t.prototype._observePip=function(e){var n=this,i=this._elToPipCallbacks.get(e);if(!i){var a=function(c){return n._onEnterPip(c,e)},o=function(c){return n._onLeavePip(c,e)},s=function(c){return n._onResizePip(c,e)};e.addEventListener("enterpictureinpicture",a),e.addEventListener("leavepictureinpicture",o),this._elToPipCallbacks.set(e,{onEnterPip:a,onLeavePip:o,onResizePip:s})}},t.prototype._onEnterPip=function(e,n){this._log.debug("onEnterPip");var i=e.pictureInPictureWindow;this._elToPipWindows.set(n,i);var a=this._elToPipCallbacks.get(n).onResizePip;i.addEventListener("resize",a),vl(this)},t.prototype._onLeavePip=function(e,n){this._log.debug("onLeavePip"),this._elToPipWindows.delete(n);var i=this._elToPipCallbacks.get(n).onResizePip,a=e.pictureInPictureWindow;a.removeEventListener("resize",i),vl(this)},t.prototype._onResizePip=function(){Od(this)},t.prototype.attach=function(e){var n=r.prototype.attach.call(this,e);return this._clientTrackSwitchOffControl==="auto"&&this._invisibleElements.add(n),this._intersectionObserver.observe(n),this._resizeObserver.observe(n),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||AF(this)),this._observePip(n),n},t.prototype.detach=function(e){var n=this,i=r.prototype.detach.call(this,e),a=Array.isArray(i)?i:[i];return a.forEach(function(o){n._intersectionObserver.unobserve(o),n._resizeObserver.unobserve(o),n._invisibleElements.delete(o),n._unObservePip(o)}),this._attachments.size===0&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),vl(this),Od(this),i},t.prototype.addProcessor=function(){return r.prototype.addProcessor.apply(this,arguments)},t.prototype.removeProcessor=function(){return r.prototype.removeProcessor.apply(this,arguments)},t.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype.setPriority=function(e){return r.prototype.setPriority.call(this,e)},t}(EF);function OF(r){if(!("documentPictureInPicture"in globalThis))return!1;var t=globalThis.documentPictureInPicture.window;if(!t)return!1;var e=new WeakSet(t.document.querySelectorAll("video"));return r._getAllAttachedElements().some(function(n){return e.has(n)})}function vl(r){if(r._clientTrackSwitchOffControl==="auto"){var t=r._getAllAttachedElements().filter(function(i){return!r._invisibleElements.has(i)}),e=r._getAllAttachedElements().filter(function(i){return r._elToPipWindows.has(i)}),n=e.length>0||OF(r)||document.visibilityState==="visible"&&t.length>0;n===!0?(r._turnOffTimer.clear(),r._setRenderHint({enabled:!0}),xT._ensureDocumentPipVideosPlaying(r)):r._turnOffTimer.isSet||r._turnOffTimer.start()}}function Od(r){if(r._contentPreferencesMode==="auto"){var t=r._getAllAttachedElements().filter(function(l){return!r._invisibleElements.has(l)}),e=r._getAllAttachedElements().map(function(l){var u=r._elToPipWindows.get(l);return u?{clientHeight:u.height,clientWidth:u.width}:{clientHeight:0,clientWidth:0}}),n=t.concat(e);if(n.length>0){var i=kF(n.sort(function(l,u){return u.clientHeight+u.clientWidth-l.clientHeight-l.clientWidth-1}),1),a=i[0],o=a.clientHeight,s=a.clientWidth,c={height:o,width:s};r._setRenderHint({renderDimensions:c})}}}function AF(r){function t(){vl(r)}return b5.onVisibilityChange(1,t),function(){b5.offVisibilityChange(1,t)}}var NF=LF,RF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jF=Q1,IF=function(r){RF(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(jF),MF=IF,DF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Xu=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},ry=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},FF=df,BF=rF,UF=cF,$F=gF,VF=bF,zF=NF,WF=MF,wa=De,qF=0,HF=function(r){DF(t,r);function t(e,n){var i=r.call(this)||this;n=Object.assign({RemoteAudioTrack:BF,RemoteAudioTrackPublication:UF,RemoteDataTrack:$F,RemoteDataTrackPublication:VF,RemoteVideoTrack:zF,RemoteVideoTrackPublication:WF,tracks:[]},n);var a=GF(n.tracks),o=n.log.createLog("default",i),s=new Map(a.audioTracks),c=new Map(a.dataTracks),l=new Map(a.tracks),u=new Map(a.videoTracks);return Object.defineProperties(i,{_RemoteAudioTrack:{value:n.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:n.RemoteAudioTrackPublication},_RemoteDataTrack:{value:n.RemoteDataTrack},_RemoteDataTrackPublication:{value:n.RemoteDataTrackPublication},_RemoteVideoTrack:{value:n.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:n.RemoteVideoTrackPublication},_audioTracks:{value:s},_dataTracks:{value:c},_instanceId:{value:++qF},_clientTrackSwitchOffControl:{value:n.clientTrackSwitchOffControl},_contentPreferencesMode:{value:n.contentPreferencesMode},_log:{value:o},_signaling:{value:e},_tracks:{value:l},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:u},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return e.identity}},networkQualityLevel:{enumerable:!0,get:function(){return e.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return e.networkQualityStats}},sid:{enumerable:!0,get:function(){return e.sid}},state:{enumerable:!0,get:function(){return e.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement}}),i._tracks.forEach(S5.bind(null,i)),e.on("networkQualityLevelChanged",function(){return i.emit("networkQualityLevelChanged",i.networkQualityLevel,i.networkQualityStats&&(i.networkQualityStats.audio||i.networkQualityStats.video)?i.networkQualityStats:null)}),KF(i,e),o.info("Created a new Participant"+(i.identity?": "+i.identity:"")),i}return t.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},t.prototype._getTrackPublicationEvents=function(){return[]},t.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},t.prototype._addTrack=function(e,n){var i=this._log;if(this._tracks.has(n))return null;this._tracks.set(n,e);var a={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind];return a.set(n,e),S5(this,e,n),i.info("Added a new "+wa.trackClass(e)+":",n),i.debug(wa.trackClass(e)+":",e),e},t.prototype._addTrackPublication=function(e){var n=this._log;if(this.tracks.has(e.trackSid))return null;this.tracks.set(e.trackSid,e);var i={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind];return i.set(e.trackSid,e),QF(this,e),n.info("Added a new "+wa.trackPublicationClass(e)+":",e.trackSid),n.debug(wa.trackPublicationClass(e)+":",e),e},t.prototype._handleTrackSignalingEvents=function(){var e=this,n=e._log,i=e._clientTrackSwitchOffControl,a=e._contentPreferencesMode,o=e._MediaStream,s=e._mapMediaElement,c=e._disposeMediaElement,l=this;if(this.state==="disconnected")return;var u=this._RemoteAudioTrack,d=this._RemoteAudioTrackPublication,v=this._RemoteVideoTrack,p=this._RemoteVideoTrackPublication,y=this._RemoteDataTrack,_=this._RemoteDataTrackPublication,S=this._signaling;function w(R){var U={audio:d,data:_,video:p}[R.kind],$=new U(R,{log:n});l._addTrackPublication($);var F=R.isSubscribed;F&&k(R),l._trackSignalingUpdatedEventCallbacks.set(R.sid,function(){if(F!==R.isSubscribed){if(F=R.isSubscribed,F){k(R);return}T(R)}}),R.on("updated",l._trackSignalingUpdatedEventCallbacks.get(R.sid))}function x(R){R.isSubscribed&&R.setTrackTransceiver(null);var U=l._trackSignalingUpdatedEventCallbacks.get(R.sid);U&&(R.removeListener("updated",U),l._trackSignalingUpdatedEventCallbacks.delete(R.sid));var $=l.tracks.get(R.sid);$&&l._removeTrackPublication($)}function k(R){var U=R.isEnabled,$=R.name,F=R.kind,M=R.sid,J=R.trackTransceiver,O=R.isSwitchedOff,N={audio:u,video:v,data:y}[F],q=l.tracks.get(M);if(!(!N||F!==J.kind)){var j={log:n,name:$,clientTrackSwitchOffControl:i,contentPreferencesMode:a,mapMediaElement:s,disposeMediaElement:c};o&&(j.MediaStream=o);var Z=function(H){return S.updateSubscriberTrackPriority(M,H)},X=function(H){R.isSubscribed&&S.updateTrackRenderHint(M,H)},se=F==="data"?new N(M,J,j):new N(M,J,U,O,Z,X,j);l._addTrack(se,q,J.id)}}function T(R){var U=Xu(Array.from(l._tracks.entries()).find(function(J){var O=Xu(J,2),N=O[1];return N.sid===R.sid}),2),$=U[0],F=U[1],M=l.tracks.get(R.sid);F&&l._removeTrack(F,M,$)}S.on("trackAdded",w),S.on("trackRemoved",x),S.tracks.forEach(w),S.on("stateChanged",function R(U){U==="disconnected"?(n.debug("Removing event listeners"),S.removeListener("stateChanged",R),S.removeListener("trackAdded",w),S.removeListener("trackRemoved",x)):U==="connected"&&(n.info("reconnected"),setTimeout(function(){return l.emit("reconnected")},0))})},t.prototype._removeTrack=function(e,n){if(!this._tracks.has(n))return null;this._tracks.delete(n);var i={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind];i.delete(n);var a=this._trackEventReemitters.get(n)||new Map;a.forEach(function(s,c){e.removeListener(c,s)});var o=this._log;return o.info("Removed a "+wa.trackClass(e)+":",n),o.debug(wa.trackClass(e)+":",e),e},t.prototype._removeTrackPublication=function(e){if(e=this.tracks.get(e.trackSid),!e)return null;this.tracks.delete(e.trackSid);var n={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind];n.delete(e.trackSid);var i=this._trackPublicationEventReemitters.get(e.trackSid)||new Map;i.forEach(function(o,s){e.removeListener(s,o)});var a=this._log;return a.info("Removed a "+wa.trackPublicationClass(e)+":",e.trackSid),a.debug(wa.trackPublicationClass(e)+":",e),e},t.prototype.toJSON=function(){return wa.valueToJSON(this)},t}(FF);function GF(r){var t=r.map(function(a){return[a.id,a]}),e=t.filter(function(a){return a[1].kind==="audio"}),n=t.filter(function(a){return a[1].kind==="video"}),i=t.filter(function(a){return a[1].kind==="data"});return{audioTracks:e,dataTracks:i,tracks:t,videoTracks:n}}function KF(r,t){var e=r._log;r.state!=="disconnected"&&t.on("stateChanged",function n(i){e.debug("Transitioned to state:",i),r.emit(i,r),i==="disconnected"&&(e.debug("Removing Track event reemitters"),t.removeListener("stateChanged",n),r._tracks.forEach(function(a){var o=r._trackEventReemitters.get(a.id);a&&o&&o.forEach(function(s,c){a.removeListener(c,s)})}),t.tracks.forEach(function(a){var o=r._tracks.get(a.id),s=r._trackEventReemitters.get(a.id);o&&s&&s.forEach(function(c,l){o.removeListener(l,c)})}),r._trackEventReemitters.clear(),r.tracks.forEach(function(a){r._trackPublicationEventReemitters.get(a.trackSid).forEach(function(o,s){a.removeListener(s,o)})}),r._trackPublicationEventReemitters.clear())})}function S5(r,t,e){var n=new Map;r.state!=="disconnected"&&(r._getTrackEvents().forEach(function(i){var a=i[0],o=i[1];n.set(a,function(){var s=[o].concat([].slice.call(arguments));return r.emit.apply(r,ry([],Xu(s)))}),t.on(a,n.get(a))}),r._trackEventReemitters.set(e,n))}function QF(r,t){var e=new Map;r.state!=="disconnected"&&(r._getTrackPublicationEvents().forEach(function(n){var i=Xu(n,2),a=i[0],o=i[1];e.set(a,function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];r.emit.apply(r,ry(ry([o],Xu(s)),[t]))}),t.on(a,e.get(a))}),r._trackPublicationEventReemitters.set(t.trackSid,e))}var ST=HF,YF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),JF=Ds.MediaStreamTrack,J1=De,XF=J1.asLocalTrack,ZF=J1.asLocalTrackPublication,ls=J1.trackClass,kT=zt,ao=kT.typeErrors,Qm=kT.trackPriority,eB=hf.validateLocalTrack,X1=Ul,tB=X1.LocalAudioTrack,rB=X1.LocalDataTrack,nB=X1.LocalVideoTrack,iB=jD,aB=FD,oB=VD,sB=ST,lB=function(r){YF(t,r);function t(e,n,i){var a=this;i=Object.assign({LocalAudioTrack:tB,LocalVideoTrack:nB,LocalDataTrack:rB,MediaStreamTrack:JF,LocalAudioTrackPublication:iB,LocalVideoTrackPublication:oB,LocalDataTrackPublication:aB,shouldStopLocalTracks:!1,tracks:n},i);var o=i.shouldStopLocalTracks?new Set(n.filter(function(s){return s.kind!=="data"})):new Set;return a=r.call(this,e,i)||this,Object.defineProperties(a,{_eventObserver:{value:i.eventObserver},_LocalAudioTrack:{value:i.LocalAudioTrack},_LocalDataTrack:{value:i.LocalDataTrack},_LocalVideoTrack:{value:i.LocalVideoTrack},_MediaStreamTrack:{value:i.MediaStreamTrack},_LocalAudioTrackPublication:{value:i.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:i.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:i.LocalVideoTrackPublication},_tracksToStop:{value:o},signalingRegion:{enumerable:!0,get:function(){return e.signalingRegion}}}),a._handleTrackSignalingEvents(),a}return t.prototype._addTrack=function(e,n,i){var a=r.prototype._addTrack.call(this,e,n);return a&&this.state!=="disconnected"&&this._addLocalTrack(e,i),a},t.prototype._addLocalTrack=function(e,n){var i,a=(i=e.noiseCancellation)===null||i===void 0?void 0:i.vendor;this._signaling.addTrack(e._trackSender,e.name,n,a),this._log.info("Added a new "+ls(e,!0)+":",e.id),this._log.debug(ls(e,!0)+":",e)},t.prototype._removeTrack=function(e,n){var i=r.prototype._removeTrack.call(this,e,n);return i&&this.state!=="disconnected"&&(this._signaling.removeTrack(e._trackSender),this._log.info("Removed a "+ls(e,!0)+":",e.id),this._log.debug(ls(e,!0)+":",e)),i},t.prototype._getTrackEvents=function(){return r.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},t.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._handleTrackSignalingEvents=function(){var e=this,n=this._log;if(this.state!=="disconnected"){var i=function(c){var l=e._signaling.getPublication(c._trackSender);l&&(l.disable(),n.debug("Disabled the "+ls(c,!0)+":",c.id))},a=function(c){var l=e._signaling.getPublication(c._trackSender);l&&(l.enable(),n.debug("Enabled the "+ls(c,!0)+":",c.id))},o=function(c){var l=e._signaling.getPublication(c._trackSender);return l&&l.stop(),l},s=function(c){n.debug("Transitioned to state:",c),c==="disconnected"?(n.debug("Removing LocalTrack event listeners"),e._signaling.removeListener("stateChanged",s),e.removeListener("trackDisabled",i),e.removeListener("trackEnabled",a),e.removeListener("trackStopped",o),e._tracks.forEach(function(l){var u=o(l);u&&l._trackSender.removeClone(u._trackTransceiver)}),n.info("LocalParticipant disconnected. Stopping "+e._tracksToStop.size+" automatically-acquired LocalTracks"),e._tracksToStop.forEach(function(l){l.stop()})):c==="connected"&&(n.info("reconnected"),setTimeout(function(){return e.emit("reconnected")},0))};this.on("trackDisabled",i),this.on("trackEnabled",a),this.on("trackStopped",o),this._signaling.on("stateChanged",s),this._tracks.forEach(function(c){e._addLocalTrack(c,Qm.PRIORITY_STANDARD),e._getOrCreateLocalTrackPublication(c).catch(function(l){n.warn("Failed to get or create LocalTrackPublication for "+c+":",l)})})}},t.prototype._getOrCreateLocalTrackPublication=function(e){var n=Ad(this.tracks,e);if(n)return Promise.resolve(n);var i=this._log,a=this,o=this._signaling.getPublication(e._trackSender);return o?new Promise(function(s,c){function l(){var u=o.error;if(u){o.removeListener("updated",l),i.warn("Failed to publish the "+ls(e,!0)+": "+u.message),a._removeTrack(e,e.id),setTimeout(function(){a.emit("trackPublicationFailed",u,e)}),c(u);return}if(!a._tracks.has(e.id)){o.removeListener("updated",l),c(new Error("The "+e+" was unpublished"));return}var d=o.sid;if(d){o.removeListener("updated",l);var v={log:i,LocalAudioTrackPublication:a._LocalAudioTrackPublication,LocalDataTrackPublication:a._LocalDataTrackPublication,LocalVideoTrackPublication:a._LocalVideoTrackPublication};n=Ad(a.tracks,e);var p=function(w){return a.emit("trackWarning",w,n)},y=function(){return a.emit("trackWarningsCleared",n)},_=function(w){n.removeListener("trackWarning",p),n.removeListener("trackWarningsCleared",y),a.unpublishTrack(w.track)};n||(n=ZF(e,o,_,v),a._addTrackPublication(n)),n.on("warning",p),n.on("warningsCleared",y);var S=a._signaling.state;(S==="connected"||S==="connecting")&&(e._processorEventObserver&&e._processorEventObserver.on("event",function(w){a._eventObserver.emit("event",{name:w.name,payload:w.data,group:"video-processor",level:"info"})}),e.processedTrack&&(e._captureFrames(),e._setSenderMediaStreamTrack(!0))),S==="connected"&&setTimeout(function(){a.emit("trackPublished",n)}),s(n)}}o.on("updated",l)}):Promise.reject(new Error("Unexpected error: The "+e+" cannot be published"))},t.prototype.publishTrack=function(e,n){var i=Ad(this.tracks,e);if(i)return Promise.resolve(i);n=Object.assign({log:this._log,priority:Qm.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},n);var a;try{a=XF(e,n)}catch(u){return Promise.reject(u)}var o=a.noiseCancellation,s=this._signaling.audioProcessors;o&&!s.includes(o.vendor)&&(this._log.warn(o.vendor+" is not supported in this room. disabling it permanently"),o.disablePermanently());var c=Object.values(Qm);if(!c.includes(n.priority))return Promise.reject(ao.INVALID_VALUE("LocalTrackPublishOptions.priority",c));var l=this._addTrack(a,a.id,n.priority)||this._tracks.get(a.id);return this._getOrCreateLocalTrackPublication(l)},t.prototype.publishTracks=function(e){if(!Array.isArray(e))throw ao.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(e.map(this.publishTrack,this))},t.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},t.prototype.setNetworkQualityConfiguration=function(e){if(typeof e!="object"||e===null)throw ao.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(n){if(n in e&&(typeof e[n]!="number"||isNaN(e[n])))throw ao.INVALID_TYPE("networkQualityConfiguration."+n,"number")}),this._signaling.setNetworkQualityConfiguration(e),this},t.prototype.setParameters=function(e){if(typeof e<"u"&&typeof e!="object")throw ao.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(e){if(this._signaling.getParameters().adaptiveSimulcast&&e.maxVideoBitrate)throw ao.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(n){if(typeof e[n]<"u"&&typeof e[n]!="number"&&e[n]!==null)throw ao.INVALID_TYPE("encodingParameters."+n,"number, null or undefined")})}else e===null&&(e={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(e),this},t.prototype.unpublishTrack=function(e){eB(e,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var n=this._tracks.get(e.id);if(!n)return null;var i=this._signaling.getPublication(n._trackSender);if(i.publishFailed(new Error("The "+n+" was unpublished")),n=this._removeTrack(n,n.id),!n)return null;var a=Ad(this.tracks,n);return a&&this._removeTrackPublication(a),a},t.prototype.unpublishTracks=function(e){var n=this;if(!Array.isArray(e))throw ao.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return e.reduce(function(i,a){var o=n.unpublishTrack(a);return o?i.concat(o):i},[])},t}(sB);function Ad(r,t){return Array.from(r.values()).find(function(e){return e.track===t||e.track.mediaStreamTrack===t})||null}var cB=lB,uB=function(){function r(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return r.prototype.connect=function(){},r.prototype.disconnect=function(){return this._connected?(this._connected=!1,!0):!1},r.prototype.publish=function(){return this._connected},r}(),fB=uB,dB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hB=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},pB=yn.EventEmitter,Z1=zt,Nd=Z1.DEFAULT_NQ_LEVEL_LOCAL,Rd=Z1.DEFAULT_NQ_LEVEL_REMOTE,k5=Z1.MAX_NQ_LEVEL,Ym=De.inRange,vB=function(r){dB(t,r);function t(e){var n=r.call(this)||this;return e=Object.assign({local:Nd,remote:Rd},e),Object.defineProperties(n,{local:{value:Ym(e.local,Nd,k5)?e.local:Nd,writable:!0},remote:{value:Ym(e.remote,Rd,k5)?e.remote:Rd,writable:!0}}),n}return t.prototype.update=function(e){var n=this;e=Object.assign({local:this.local,remote:this.remote},e),[["local",Nd,3],["remote",Rd,3]].forEach(function(i){var a=hB(i,3),o=a[0],s=a[1],c=a[2];n[o]=typeof e[o]=="number"&&Ym(e[o],s,c)?e[o]:s})},t}(pB),mB=vB,gB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yB=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},P5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},_B=ST,wB=function(r){gB(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i._handleTrackSignalingEvents(),i.once("disconnected",i._unsubscribeTracks.bind(i)),i}return t.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._addTrack=function(e,n,i){return r.prototype._addTrack.call(this,e,i)?(n._subscribed(e),this.emit("trackSubscribed",e,n),e):null},t.prototype._addTrackPublication=function(e){var n=r.prototype._addTrackPublication.call(this,e);return n?(this.emit("trackPublished",n),n):null},t.prototype._getTrackPublicationEvents=function(){return P5(P5([],yB(r.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},t.prototype._unsubscribeTracks=function(){var e=this;this.tracks.forEach(function(n){if(n.isSubscribed){var i=n.track;n._unsubscribe(),e.emit("trackUnsubscribed",i,n)}})},t.prototype._removeTrack=function(e,n,i){var a=this._tracks.get(i);return a?(r.prototype._removeTrack.call(this,a,i),n._unsubscribe(),this.emit("trackUnsubscribed",a,n),a):null},t.prototype._removeTrackPublication=function(e){this._signaling.clearTrackHint(e.trackSid);var n=r.prototype._removeTrackPublication.call(this,e);return n?(this.emit("trackUnpublished",n),n):null},t}(_B),bB=wB,xB=function(){function r(t,e){if(typeof t!="string")throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:t,enumerable:!0},trackSid:{value:e.trackSid,enumerable:!0},timestamp:{value:e.timestamp,enumerable:!0},ssrc:{value:e.ssrc,enumerable:!0},packetsLost:{value:typeof e.packetsLost=="number"?e.packetsLost:null,enumerable:!0},codec:{value:typeof e.codecName=="string"?e.codecName:null,enumerable:!0}})}return r}(),PT=xB,SB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kB=PT,PB=function(r){SB(t,r);function t(e,n,i){var a=r.call(this,e,n)||this;return Object.defineProperties(a,{bytesSent:{value:typeof n.bytesSent=="number"?n.bytesSent:i?0:null,enumerable:!0},packetsSent:{value:typeof n.packetsSent=="number"?n.packetsSent:i?0:null,enumerable:!0},roundTripTime:{value:typeof n.roundTripTime=="number"?n.roundTripTime:i?0:null,enumerable:!0}}),a}return t}(kB),TT=PB,TB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EB=TT,CB=function(r){TB(t,r);function t(e,n,i){var a=r.call(this,e,n,i)||this;return Object.defineProperties(a,{audioLevel:{value:typeof n.audioInputLevel=="number"?n.audioInputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),a}return t}(EB),LB=CB,OB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),AB=TT,NB=function(r){OB(t,r);function t(e,n,i){var a=r.call(this,e,n,i)||this,o=null;typeof n.frameWidthInput=="number"&&typeof n.frameHeightInput=="number"&&(o={},Object.defineProperties(o,{width:{value:n.frameWidthInput,enumerable:!0},height:{value:n.frameHeightInput,enumerable:!0}}));var s=null;return typeof n.frameWidthSent=="number"&&typeof n.frameHeightSent=="number"&&(s={},Object.defineProperties(s,{width:{value:n.frameWidthSent,enumerable:!0},height:{value:n.frameHeightSent,enumerable:!0}})),Object.defineProperties(a,{captureDimensions:{value:o,enumerable:!0},dimensions:{value:s,enumerable:!0},captureFrameRate:{value:typeof n.frameRateInput=="number"?n.frameRateInput:null,enumerable:!0},frameRate:{value:typeof n.frameRateSent=="number"?n.frameRateSent:null,enumerable:!0}}),a}return t}(AB),RB=NB,jB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),IB=PT,MB=function(r){jB(t,r);function t(e,n){var i=r.call(this,e,n)||this;return Object.defineProperties(i,{bytesReceived:{value:typeof n.bytesReceived=="number"?n.bytesReceived:null,enumerable:!0},packetsReceived:{value:typeof n.packetsReceived=="number"?n.packetsReceived:null,enumerable:!0}}),i}return t}(IB),ET=MB,DB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),FB=ET,BB=function(r){DB(t,r);function t(e,n){var i=r.call(this,e,n)||this;return Object.defineProperties(i,{audioLevel:{value:typeof n.audioOutputLevel=="number"?n.audioOutputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),i}return t}(FB),UB=BB,$B=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),VB=ET,zB=function(r){$B(t,r);function t(e,n){var i=r.call(this,e,n)||this,a=null;return typeof n.frameWidthReceived=="number"&&typeof n.frameHeightReceived=="number"&&(a={},Object.defineProperties(a,{width:{value:n.frameWidthReceived,enumerable:!0},height:{value:n.frameHeightReceived,enumerable:!0}})),Object.defineProperties(i,{dimensions:{value:a,enumerable:!0},frameRate:{value:typeof n.frameRateReceived=="number"?n.frameRateReceived:null,enumerable:!0}}),i}return t}(VB),WB=zB,qB=LB,HB=RB,GB=UB,KB=WB,QB=function(){function r(t,e,n){if(typeof t!="string")throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:t,enumerable:!0},localAudioTrackStats:{value:e.localAudioTrackStats.map(function(i){return new qB(i.trackId,i,n)}),enumerable:!0},localVideoTrackStats:{value:e.localVideoTrackStats.map(function(i){return new HB(i.trackId,i,n)}),enumerable:!0},remoteAudioTrackStats:{value:e.remoteAudioTrackStats.map(function(i){return new GB(i.trackId,i)}),enumerable:!0},remoteVideoTrackStats:{value:e.remoteVideoTrackStats.map(function(i){return new KB(i.trackId,i)}),enumerable:!0}})}return r}(),CT=QB,YB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zu=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},_h=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},JB=df,XB=bB,ZB=CT,LT=De,e9=LT.flatMap,t9=LT.valueToJSON,r9=0,n9=function(r){YB(t,r);function t(e,n,i){var a=r.call(this)||this,o=i.log.createLog("default",a),s=new Map;return Object.defineProperties(a,{_log:{value:o},_clientTrackSwitchOffControl:{value:i.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:i.contentPreferencesMode||"disabled"},_instanceId:{value:++r9},_options:{value:i},_participants:{value:s},_signaling:{value:n},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(n.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return n.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:n.name},participants:{enumerable:!0,value:s},sid:{enumerable:!0,value:n.sid},state:{enumerable:!0,get:function(){return n.state}},mediaRegion:{enumerable:!0,value:n.mediaRegion}}),a9(a,e),o9(a,n.recording),s9(a,n),i9(a),o.info("Created a new Room:",a.name),o.debug("Initial RemoteParticipants:",Array.from(a._participants.values())),a}return t.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},t.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},t.prototype.getStats=function(){var e=this;return this._signaling.getStats().then(function(n){return Array.from(n).map(function(i){var a=Zu(i,2),o=a[0],s=a[1];return new ZB(o,Object.assign({},s,{localAudioTrackStats:T5(e,s.localAudioTrackStats),localVideoTrackStats:T5(e,s.localVideoTrackStats)}))})})},t.prototype.refreshInactiveMedia=function(){var e=this.localParticipant.tracks,n=Array.from(e.values()).filter(function(c){var l=c.track.kind;return l!=="data"}).map(function(c){var l=c.track;return l}),i=e9(this.participants,function(c){return Array.from(c.tracks.values())}).filter(function(c){var l=c.track;return l&&l.kind!=="data"}).map(function(c){var l=c.track;return l}),a=n.concat(i),o=new Event("unmute");n.forEach(function(c){var l=c.isMuted,u=c.mediaStreamTrack;l&&u.dispatchEvent(o)});var s=new Event("pause");return a.forEach(function(c){var l=c._attachments,u=c._elShims;return l.forEach(function(d){var v=u.get(d),p=d.paused&&v&&!v.pausedIntentionally();p&&d.dispatchEvent(s)})}),this},t.prototype.toJSON=function(){return t9(this)},t}(JB);function i9(r){var t=r.localParticipant._signaling.audioProcessors;r.localParticipant.audioTracks.forEach(function(e){var n=e.track,i=n.noiseCancellation;i&&!t.includes(i.vendor)&&(r._log.warn(i.vendor+" is not supported in this room. disabling it permanently"),i.disablePermanently())})}function T5(r,t){var e=r.localParticipant._signaling;return t.reduce(function(n,i){var a=e.tracks.get(i.trackId),o=e.getSender(a);return o?[Object.assign({},i,{trackId:o.id})].concat(n):n},[])}function E5(r,t){var e=r._log,n=r._clientTrackSwitchOffControl,i=r._contentPreferencesMode,a=r._options,o=a.MediaStream,s=a.mapMediaElement,c=a.disposeMediaElement,l=new XB(t,{log:e,clientTrackSwitchOffControl:n,contentPreferencesMode:i,MediaStream:o,mapMediaElement:s,disposeMediaElement:c});e.info("A new RemoteParticipant connected:",l),r._participants.set(l.sid,l),r.emit("participantConnected",l);var u=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(d){var v=Zu(Array.isArray(d)?d:[d,d],2),p=v[0],y=v[1];function _(){var S=[].slice.call(arguments);S.unshift(y),S.push(l),r.emit.apply(r,_h([],Zu(S)))}return l.on(p,_),[p,_]});l.once("disconnected",function(){var v=r.dominantSpeaker;e.info("RemoteParticipant disconnected:",l),r._participants.delete(l.sid),u.forEach(function(p){l.removeListener(p[0],p[1])}),r.emit("participantDisconnected",l),l===v&&r.emit("dominantSpeakerChanged",r.dominantSpeaker)})}function a9(r,t){var e=["trackWarning","trackWarningsCleared"].map(function(n){return{eventName:n,handler:function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.emit.apply(r,_h([n],Zu(_h(_h([],Zu(i)),[t]))))}}});e.forEach(function(n){var i=n.eventName,a=n.handler;return t.on(i,a)}),r.once("disconnected",function(){return e.forEach(function(n){var i=n.eventName,a=n.handler;return t.removeListener(i,a)})})}function o9(r,t){t.on("updated",function(){var n=t.isEnabled;r._log.info("Recording "+(n?"started":"stopped")),r.emit("recording"+(n?"Started":"Stopped"))})}function s9(r,t){var e=r._log;e.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),t.participants.forEach(E5.bind(null,r)),e.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),t.on("participantConnected",E5.bind(null,r)),t.on("dominantSpeakerChanged",function(){return r.emit("dominantSpeakerChanged",r.dominantSpeaker)}),t.on("transcription",function(n){return r.emit("transcription",n)}),t.on("stateChanged",function n(i,a){switch(e.info("Transitioned to state:",i),i){case"disconnected":r.participants.forEach(function(o){o._unsubscribeTracks()}),r.emit(i,r,a),r.localParticipant.tracks.forEach(function(o){o.unpublish()}),t.removeListener("stateChanged",n);break;case"reconnecting":setTimeout(function(){return r.emit("reconnecting",a)},0);break;default:setTimeout(function(){return r.emit("reconnected")},0)}})}var l9=n9,c9=function(){function r(t){Object.defineProperties(this,{_min:{value:t.min||100},_max:{value:t.max||1e4},_jitter:{value:t.jitter>0&&t.jitter<=1?t.jitter:0},_factor:{value:t.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var e=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var n=Math.random(),i=Math.floor(n*this._jitter*e);e=Math.floor(n*10)&1?e+i:e-i}return Math.min(e,this._max)|0}},_timeoutID:{value:null,writable:!0}})}return r.prototype.backoff=function(t){var e=this,n=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){e._attempts++,t()},n)},r.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},r}(),OT=c9,_n={},u9=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},AT=De,Jm=AT.difference,Oa=AT.flatMap;function Xm(){var r=4294967295;return String(Math.floor(Math.random()*r))}var f9=function(){function r(t,e,n){Object.defineProperties(this,{cName:{enumerable:!0,value:n},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:e},trackId:{enumerable:!0,value:t}})}return r.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var t=[Xm(),Xm()];t.forEach(function(e){this.primarySSRCs.add(e)},this),this.rtxPairs.size&&t.forEach(function(e){this.rtxPairs.set(Xm(),e)},this)}},r.prototype.addSSRC=function(t,e,n){e?this.rtxPairs.set(t,e):this.primarySSRCs.add(t),this.isSimulcastEnabled=this.isSimulcastEnabled||n},r.prototype.toSdpLines=function(t){var e=this,n=t?[]:Array.from(this.rtxPairs.entries()).map(function(l){return l.reverse()}),i=Array.from(this.primarySSRCs.values()),a=n.length?Oa(n):i,o=Oa(a,function(l){return["a=ssrc:"+l+" cname:"+e.cName,"a=ssrc:"+l+" msid:"+e.streamId+" "+e.trackId]}),s=n.map(function(l){return"a=ssrc-group:FID "+l.join(" ")}),c=["a=ssrc-group:SIM "+i.join(" ")];return s.concat(o).concat(c)},r}();function op(r,t){var e=r.match(new RegExp(t,"gm"))||[];return e.map(function(n){var i=n.match(new RegExp(t))||[];return i.slice(1)})}function d9(r){var t="^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$";return new Set(Oa(op(r,t)))}function h9(r,t,e){var n="a=ssrc:"+t+" "+e+":(.+)";return r.match(new RegExp(n))[1]}function p9(r){var t="^a=ssrc-group:FID ([0-9]+) ([0-9]+)$";return new Map(op(r,t).map(function(e){return e.reverse()}))}function v9(r){var t=u9(Oa(op(r,"^a=msid:(.+) (.+)$")),2),e=t[0],n=t[1],i=Oa(op(r,"^a=ssrc:(.+) cname:.+$"));return i.map(function(a){return[a,e,n]})}function m9(r){var t=d9(r),e=p9(r),n=v9(r);return n.reduce(function(i,a){var o=a[0],s=a[1],c=a[2],l=i.get(c)||new f9(c,s,h9(r,o,"cname")),u=e.get(o)||null;return l.addSSRC(o,u,t.has(o)),i.set(c,l)},new Map)}function g9(r,t){var e=m9(r),n=Array.from(e.keys()),i=Array.from(t.keys()),a=Jm(n,i),o=Jm(i,n),s=Oa(a,function(y){return e.get(y)});s.forEach(function(y){y.addSimulcastSSRCs(),t.set(y.trackId,y)}),i=Array.from(t.keys());var c=Jm(i,o),l=Oa(c,function(y){return t.get(y)}),u=!r.match(/a=rtpmap:[0-9]+ rtx/),d=Oa(l,function(y){return y.toSdpLines(u)}),v=Oa(new Set(r.split(`\r
`).concat(d))),p="a=x-google-flag:conference";return r.match(p)||v.push(p),v.join(`\r
`)}var y9=g9,xs=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},C5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},NT=De,_9=NT.difference,ny=NT.flatMap,w9=y9,L5={0:"PCMU",8:"PCMA"};function uc(r){return Array.from(Yp(r)).reduce(function(t,e){var n=e[0],i=e[1],a=t.get(i)||[];return t.set(i,a.concat(n))},new Map)}function iy(r){return ia(r).reduce(function(t,e){var n=rc(e);return n?t.set(n,e):t},new Map)}function Yp(r){return pf(r).reduce(function(t,e){if(t.has(e))return t;var n=new RegExp("a=rtpmap:"+e+" ([^/]+)"),i=r.match(n),a=i?i[1].toLowerCase():L5[e]?L5[e].toLowerCase():"";return t.set(e,a)},new Map)}function sp(r,t){var e=new RegExp("^a=fmtp:"+r+" (.+)$","m"),n=t.match(e);return n&&n[1].split(";").reduce(function(i,a){var o=xs(a.split("="),2),s=o[0],c=o[1];return i[s]=isNaN(c)?c:parseInt(c,10),i},{})}function rc(r){var t=r.match(/^a=mid:(.+)$/m);return t&&t[1]}function ia(r,t,e){return r.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(function(n){return"m="+n}).filter(function(n){var i=new RegExp("m="+(t||".*"),"gm"),a=new RegExp("a="+(e||".*"),"gm");return i.test(n)&&a.test(n)})}function pf(r){var t=r.split(`\r
`)[0],e=t.match(/([0-9]+)/g);return e?e.slice(1).map(function(n){return parseInt(n,10)}):[]}function b9(r,t){t=t.map(function(a){var o=a.codec;return o.toLowerCase()});var e=ny(t,function(a){return r.get(a)||[]}),n=_9(Array.from(r.keys()),t),i=ny(n,function(a){return r.get(a)});return e.concat(i)}function e_(r,t){var e=t.split(`\r
`),n=e[0],i=e.slice(1);return n=n.replace(/([0-9]+\s?)+$/,r.join(" ")),[n].concat(i).join(`\r
`)}function x9(r,t,e){var n=ia(r),i=r.split(`\r
m=`)[0];return[i].concat(n.map(function(a){if(!/^m=(audio|video)/.test(a))return a;var o=a.match(/^m=(audio|video)/)[1],s=uc(a),c=o==="audio"?t:e,l=b9(s,c),u=e_(l,a),d=s.get("pcma")||[],v=s.get("pcmu")||[],p=o==="audio"?new Set(d.concat(v)):new Set;return p.has(l[0])?u.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):u})).join(`\r
`)}function S9(r,t){var e=ia(r),n=r.split(`\r
m=`)[0];return[n].concat(e.map(function(i){if(i=i.replace(/\r\n$/,""),!/^m=video/.test(i))return i;var a=uc(i),o=pf(i),s=new Set(a.get("vp8")||[]),c=o.some(function(l){return s.has(l)});return c?w9(i,t):i})).concat("").join(`\r
`)}function k9(r,t,e,n,i){var a=e.get(r)||[];if(a.length<=1)return a;var o=sp(t,i);if(!o)return a;var s=a.find(function(c){var l=sp(c,n);return l&&Object.keys(o).every(function(u){return o[u]===l[u]})});return typeof s=="number"?[s]:a}function P9(r,t,e){if(!/^m=(audio|video)/.test(r))return r;var n=rc(r),i=n&&t.get(n);if(!i)return r;var a=Yp(i),o=uc(r),s=ny(Array.from(a),function(p){var y=xs(p,2),_=y[0],S=y[1];return S!=="rtx"&&!e.includes(S)?k9(S,_,o,r,i):[]}),c=o.get("rtx")||[],l=c.filter(function(p){var y=sp(p,r);return y&&s.includes(y.apt)});s=Array.from(new Set(C5(C5([],xs(s)),xs(l))));var u=r.split(`\r
`).filter(function(p){var y=p.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),_=y&&y[2];return!y||_&&s.includes(parseInt(_,10))}),d=pf(r).filter(function(p){return s.includes(p)}),v=Array.from(new Set(d));return e_(v,u.join(`\r
`))}function T9(r,t){var e=ia(r),n=r.split(`\r
m=`)[0],i=iy(t);return[n].concat(e.map(function(a){return P9(a,i,[])})).join(`\r
`)}function E9(r,t,e,n){n===void 0&&(n=!1);var i=iy(e),a=iy(t),o=ia(r),s=r.split(`\r
m=`)[0];return[s].concat(o.map(function(c){if(c=c.replace(/\r\n$/,""),!/^m=video/.test(c))return c;var l=c.match(/^a=mid:(.+)$/m),u=l&&l[1];if(!u)return c;var d=i.get(u),v=Yp(d),p=pf(d),y=p.length&&v.get(p[0])==="vp8",_=n||!y;return _?a.get(u).replace(/\r\n$/,""):c})).concat("").join(`\r
`)}function C9(r,t,e){var n=Array.from(e).reduce(function(i,a){var o=xs(a,2),s=o[0],c=o[1],l=ia(r,s,"send(only|recv)"),u=l.map(rc).filter(function(d){return!t.has(d)});return u.forEach(function(d,v){return i.set(d,c[v])}),i},new Map);return RT(r,n)}function RT(r,t){var e=ia(r),n=r.split(`\r
m=`)[0];return[n].concat(e.map(function(i){if(!/^m=(audio|video)/.test(i))return i;var a=rc(i);if(!a)return i;var o=t.get(a);if(!o)return i;var s=(i.match(/^a=msid:(.+)$/m)||[])[1];if(!s)return i;var c=xs(s.split(" "),2),l=c[0],u=c[1],d=new RegExp("msid:"+l+(u?" "+u:"")+"$","gm");return i.replace(d,"msid:"+l+" "+o)})).join(`\r
`)}function L9(r,t){return r.split(`\r
`).filter(function(e){return!t.find(function(n){return new RegExp("a=ssrc:.*"+n+":","g").test(e)})}).join(`\r
`)}function O9(r){var t=ia(r),e=r.split(`\r
m=`)[0];return[e].concat(t.map(function(n){if(!/^m=video/.test(n))return n;var i=uc(n),a=i.get("rtx");if(!a)return n;var o=new Set(pf(n));a.forEach(function(u){return o.delete(u)});var s=n.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),c=s&&s[1],l=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(c?[new RegExp("^a=ssrc:"+c+" .+$")]:[]);return n=n.split(`\r
`).filter(function(u){return l.every(function(d){return!d.test(u)})}).join(`\r
`),e_(Array.from(o),n)})).join(`\r
`)}function O5(r,t){var e=Object.entries(t).map(function(n){var i=xs(n,2),a=i[0],o=i[1];return a+"="+o}).join(";");return"a=fmtp:"+r+" "+e}function A9(r,t){var e=ia(r),n=r.split(`\r
m=`)[0];return t=t||e.filter(function(i){return/^m=audio/.test(i)}).map(rc),[n].concat(e.map(function(i){if(!/^m=audio/.test(i))return i;var a=uc(i),o=a.get("opus");if(!o)return i;var s=sp(o,i);if(!s)return i;var c=O5(o,s),l=new RegExp(c),u=rc(i);t.includes(u)?s.usedtx=1:delete s.usedtx;var d=O5(o,s);return i.replace(l,d)})).join(`\r
`)}_n.addOrRewriteNewTrackIds=C9;_n.addOrRewriteTrackIds=RT;_n.createCodecMapForMediaSection=uc;_n.createPtToCodecName=Yp;_n.disableRtx=O9;_n.enableDtxForOpus=A9;_n.filterLocalCodecs=T9;_n.getMediaSections=ia;_n.removeSSRCAttributes=L9;_n.revertSimulcast=E9;_n.setCodecPreferences=x9;_n.setSimulcast=S9;var N9=function(){function r(t){t=Object.assign({getKey:function(n){return n},getValue:function(n){return n},isLessThanOrEqualTo:function(n,i){return n<=i}},t),Object.defineProperties(this,{_getKey:{value:t.getKey},_getValue:{value:t.getValue},_isLessThanOrEqualTo:{value:t.isLessThanOrEqualTo},_map:{value:new Map}})}return r.prototype.toMap=function(){return new Map(this._map)},r.prototype.updateAndFilter=function(t){return t.filter(this.update,this)},r.prototype.update=function(t){var e=this._getKey(t),n=this._getValue(t);return this._map.has(e)&&this._isLessThanOrEqualTo(n,this._map.get(e))?!1:(this._map.set(e,n),!0)},r}(),R9=N9,j9=R9,I9=function(){function r(){Object.defineProperties(this,{_filter:{value:new j9({getKey:function(e){return e.ufrag},isLessThanOrEqualTo:function(e,n){return e.revision<=n.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return r.prototype.setUfrag=function(t){this._ufrag=t;var e=this._filter.toMap().get(t);return e?e.candidates:[]},r.prototype.update=function(t){t.candidates=t.candidates||[];var e=this._filter.toMap().get(t.ufrag),n=e?e.candidates:[];return this._filter.update(t)&&this._ufrag===t.ufrag?t.candidates.slice(n.length):[]},r}(),M9=I9,jT=zt,D9=jT.ICE_ACTIVITY_CHECK_PERIOD_MS,F9=jT.ICE_INACTIVITY_THRESHOLD_MS,B9=function(){function r(t,e){e=Object.assign({activityCheckPeriodMs:D9,inactivityThresholdMs:F9},e),Object.defineProperties(this,{_activityCheckPeriodMs:{value:e.activityCheckPeriodMs},_inactivityThresholdMs:{value:e.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:t},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return r.prototype._getActivePairStat=function(t){var e=Array.from(t.values()),n=e.find(function(i){return i.type==="candidate-pair"&&i.nominated});return n||{bytesReceived:0,timestamp:Math.round(new Date().getTime())}},r.prototype._getIceConnectionStats=function(){var t=this;return this._peerConnection.getStats().then(function(e){return t._getActivePairStat(e)}).catch(function(){return null})},r.prototype._scheduleInactivityCallback=function(t){var e=this;t&&this._onIceConnectionStateChanged===null?(this._onIceConnectionStateChanged=function(){e._peerConnection.iceConnectionState==="disconnected"&&t()},this._peerConnection.addEventListener?this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=this._onIceConnectionStateChanged):!t&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener?this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=null,this._onIceConnectionStateChanged=null)},r.prototype.start=function(t){var e=this;this.stop(),this._timer=setInterval(function(){e._getIceConnectionStats().then(function(n){n&&((!e._lastActivity||e._lastActivity.bytesReceived!==n.bytesReceived)&&(e._lastActivity=n,e._scheduleInactivityCallback(null)),n.timestamp-e._lastActivity.timestamp>=e._inactivityThresholdMs&&(e._peerConnection.iceConnectionState==="disconnected"?t():e._onIceConnectionStateChanged===null&&e._scheduleInactivityCallback(t)))})},this._activityCheckPeriodMs)},r.prototype.stop=function(){this._scheduleInactivityCallback(null),this._timer!==null&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},r}(),U9=B9,$9=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),V9=yn.EventEmitter,z9=function(r){$9(t,r);function t(e){var n=r.call(this)||this;return Object.defineProperties(n,{_dataChannel:{value:e},_messageQueue:{value:[]}}),e.addEventListener("open",function(){n._messageQueue.splice(0).forEach(function(i){return n._publish(i)})}),e.addEventListener("message",function(i){var a=i.data;try{var o=JSON.parse(a);n.emit("message",o)}catch{}}),n.publish({type:"ready"}),n}return t.prototype._publish=function(e){var n=JSON.stringify(e);try{this._dataChannel.send(n)}catch{}},t.prototype.publish=function(e){var n=this._dataChannel;return n.readyState==="closing"||n.readyState==="closed"?!1:n.readyState==="connecting"?(this._messageQueue.push(e),!0):(this._publish(e),!0)},t}(V9),W9=z9,q9=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),H9=G3,G9=W9,K9=function(r){q9(t,r);function t(e){var n=r.call(this,e.label,e.maxPacketLifeTime,e.maxRetransmits,e.ordered)||this;return Object.defineProperties(n,{_dataChannel:{value:e}}),e.binaryType="arraybuffer",e.addEventListener("message",function(i){n.emit("message",i.data)}),e.addEventListener("close",function(){n.emit("close")}),n}return t.prototype.stop=function(){this._dataChannel.close(),r.prototype.stop.call(this)},t.prototype.toDataTransport=function(){return new G9(this._dataChannel)},t}(H9),Q9=K9,Y9=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),J9=F3,X9=function(r){Y9(t,r);function t(e,n){return r.call(this,e,n)||this}return t}(J9),Z9=X9,eU=_n.getMediaSections,tU=function(){function r(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return r.prototype.match=function(t){return this._midsToTrackIds.get(t.transceiver.mid)||null},r.prototype.update=function(t){var e=eU(t,"(audio|video)");this._midsToTrackIds=e.reduce(function(n,i){var a=i.match(/^a=mid:(.+)$/m)||[],o=i.match(/^a=msid:.+ (.+)$/m)||[],s=a[1],c=o[1];return s&&c?n.set(s,c):n},this._midsToTrackIds)},r}(),rU=tU,nU=Ds.RTCSessionDescription,IT=_n,iU=IT.createPtToCodecName,aU=IT.getMediaSections;function oU(r){var t={type:r.type};return r.type!=="rollback"&&(t.sdp=sU(r.sdp)),new nU(t)}function sU(r){var t=aU(r),e=r.split(`\r
m=`)[0];return[e].concat(t.map(lU)).join(`\r
`)}function lU(r){var t=iU(r);r=uU(r,t),r=cU(r);var e=fU(t),n=e.get("rtx")||new Set,i=new Set,a=dU(r,t,n,i),o=hU(a,i),s=Array.from(i),c=["h264","vp8","vp9"],l=c.reduce(function(u,d){var v=e.get(d)||new Set;return Array.from(v).reduce(function(p,y){return o.has(y)?p:p.add(y)},u)},new Set);return l.forEach(function(u){if(s.length){var d=s.shift();r=A5(r,d),r=vU(r,d,u)}}),s.forEach(function(u){r=A5(r,u),r=pU(r,u)}),r}function cU(r){for(var t=r.split(`\r
`),e=new Map,n=96,i=0;i<t.length;i++){var a=t[i].match(/^a=rtpmap:(\d+) ([^/]+)/);if(a){var o=parseInt(a[1],10),s=a[2].toLowerCase();if(e.has(o)&&e.get(o)!==s){for(;e.has(n)||n===o;)n++;var c=n;e.set(c,s),t[i]=t[i].replace("a=rtpmap:"+o,"a=rtpmap:"+c);for(var l=i+1;l<t.length;l++)t[l].match(new RegExp("^a=(fmtp|rtcp-fb):"+o+"\\b"))&&(t[l]=t[l].replace(new RegExp("^a=(fmtp|rtcp-fb):"+o+"\\b"),"a=$1:"+c))}else e.set(o,s)}}return t.join(`\r
`)}function uU(r,t){return Array.from(t.keys()).reduce(function(e,n){var i=new RegExp("^a=rtpmap:"+n+" rtx.+$","gm");return(e.match(i)||[]).slice(t.get(n)==="rtx"?1:0).reduce(function(a,o){var s=new RegExp(`\r
`+o),c=new RegExp(`\r
a=fmtp:`+n+" apt=[0-9]+");return a.replace(s,"").replace(c,"")},e)},r)}function fU(r){var t=new Map;return r.forEach(function(e,n){var i=t.get(e)||new Set;return t.set(e,i.add(n))}),t}function dU(r,t,e,n){return Array.from(e).reduce(function(i,a){var o=new RegExp("a=fmtp:"+a+" apt=(\\d+)"),s=r.match(o);if(!s)return n.add(a),i;var c=Number.parseInt(s[1]);if(!t.has(c))return n.add(a),i;var l=t.get(c);return l==="rtx"?(n.add(a),i):i.set(a,c)},new Map)}function hU(r,t){var e=Array.from(r).reduce(function(n,i){var a=i[0],o=i[1],s=n.get(o)||new Set;return n.set(o,s.add(a))},new Map);return Array.from(e).reduce(function(n,i){var a=i[0],o=Array.from(i[1]);return o.length>1?(o.forEach(function(s){t.add(s)}),n):n.set(a,o[0])},new Map)}function A5(r,t){var e=new RegExp("a=fmtp:"+t+`.*\r
`,"gm");return r.replace(e,"")}function pU(r,t){var e=new RegExp("a=rtpmap:"+t+`.*\r
`,"gm");return r.replace(e,"")}function vU(r,t,e){return r.endsWith(`\r
`)?r+"a=fmtp:"+t+" apt="+e+`\r
`:r+`\r
a=fmtp:`+t+" apt="+e}var mU=oU,gU=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yU=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},_U=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},wU=OT,Jp=Ds,bU=Jp.RTCIceCandidate,xU=Jp.RTCPeerConnection,SU=Jp.RTCSessionDescription,kU=Jp.getStats,MT=Dt,Xp=zt,PU=Xp.DEFAULT_ICE_GATHERING_TIMEOUT_MS,TU=Xp.DEFAULT_LOG_LEVEL,EU=Xp.DEFAULT_SESSION_TIMEOUT_SEC,CU=Xp.iceRestartBackoffConfig,Ni=_n,LU=Ni.addOrRewriteNewTrackIds,OU=Ni.addOrRewriteTrackIds,DT=Ni.createCodecMapForMediaSection,N5=Ni.disableRtx,jd=Ni.enableDtxForOpus,AU=Ni.filterLocalCodecs,Cu=Ni.getMediaSections,R5=Ni.removeSSRCAttributes,NU=Ni.revertSimulcast,RU=Ni.setCodecPreferences,jU=Ni.setSimulcast,IU=Bs,FT=Be,Zm=FT.MediaClientLocalDescFailedError,eg=FT.MediaClientRemoteDescFailedError,vf=De,MU=vf.buildLogLevels,DU=vf.getPlatform,FU=vf.isChromeScreenShareTrack,BU=vf.oncePerTick,UU=vf.defer,$U=M9,VU=U9,zU=Q9,WU=Z9,qU=lc,HU=Da,GU=rU,j5=mU,t_=MT.guessBrowser(),KU=DU(),QU=/android/.test(KU),YU=t_==="chrome",hs=t_==="firefox",JU=t_==="safari",XU=0,ZU={open:["closed","updating"],updating:["closed","open"],closed:[]},e$=function(r){gU(t,r);function t(e,n,i,a){var o=r.call(this,"open",ZU)||this;a=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:FU,iceServers:[],logLevel:TU,offerOptions:{},revertSimulcast:NU,sessionTimeout:EU*1e3,setCodecPreferences:RU,setSimulcast:jU,Backoff:wU,IceConnectionMonitor:VU,RTCIceCandidate:bU,RTCPeerConnection:xU,RTCSessionDescription:SU,Timeout:IU},a);var s=F5(Object.assign({},a,a.rtcConfiguration)),c=MU(a.logLevel),l=a.RTCPeerConnection;a.enableDscp===!0&&(a.chromeSpecificConstraints=a.chromeSpecificConstraints||{},a.chromeSpecificConstraints.optional=a.chromeSpecificConstraints.optional||[],a.chromeSpecificConstraints.optional.push({googDscp:!0}));var u=a.log?a.log.createLog("webrtc",o):new HU("webrtc",o,c,a.loggerName),d=new l(s,a.chromeSpecificConstraints);a.dummyAudioMediaStreamTrack&&d.addTrack(a.dummyAudioMediaStreamTrack),Object.defineProperties(o,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:a.enableDscp},_encodingParameters:{value:n},_isChromeScreenShareTrack:{value:a.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new a.Timeout(function(){return o._handleIceGatheringTimeout()},PU,!1)},_iceRestartBackoff:{value:new a.Backoff(CU)},_instanceId:{value:++XU},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:u},_eventObserver:{value:a.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new a.IceConnectionMonitor(d)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:a.offerOptions},_onEncodingParametersChanged:{value:BU(function(){o._needsAnswer||BT(o)})},_peerConnection:{value:d},_preferredAudioCodecs:{value:i.audio},_preferredVideoCodecs:{value:i.video},_shouldApplyDtx:{value:i.audio.every(function(p){var y=p.codec;return y!=="opus"})||i.audio.some(function(p){var y=p.codec,_=p.dtx;return y==="opus"&&_})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new a.Timeout(function(){u.debug("ICE reconnect timed out"),o.close()},a.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new $U},_setCodecPreferences:{value:hs&&QU&&i.video[0]&&i.video[0].codec.toLowerCase()!=="h264"?function(p){return p}:a.setCodecPreferences},_setSimulcast:{value:a.setSimulcast},_revertSimulcast:{value:a.revertSimulcast},_RTCIceCandidate:{value:a.RTCIceCandidate},_RTCPeerConnection:{value:a.RTCPeerConnection},_RTCSessionDescription:{value:a.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:e}}),n.on("changed",o._onEncodingParametersChanged),d.addEventListener("connectionstatechange",o._handleConnectionStateChange.bind(o)),d.addEventListener("datachannel",o._handleDataChannelEvent.bind(o)),d.addEventListener("icecandidate",o._handleIceCandidateEvent.bind(o)),d.addEventListener("iceconnectionstatechange",o._handleIceConnectionStateChange.bind(o)),d.addEventListener("icegatheringstatechange",o._handleIceGatheringStateChange.bind(o)),d.addEventListener("signalingstatechange",o._handleSignalingStateChange.bind(o)),d.addEventListener("track",o._handleTrackEvent.bind(o));var v=o;return o.on("stateChanged",function p(y){y==="closed"&&(v.removeListener("stateChanged",p),v._dataChannels.forEach(function(_,S){v.removeDataTrackSender(S)}))}),o}return t.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",e),this._preferredVideoCodecs.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=e)})},Object.defineProperty(t.prototype,"_shouldApplySimulcast",{get:function(){if(!YU&&!JU)return!1;var e=this._preferredVideoCodecs.some(function(n){return n.codec.toLowerCase()==="vp8"&&n.simulcast&&n.adaptiveSimulcast!==!1});return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){return this.iceConnectionState==="failed"?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&this._peerConnection.iceConnectionState==="disconnected"||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isApplicationSectionNegotiated",{get:function(){return this._peerConnection.signalingState!=="closed"?this._peerConnection.localDescription?Cu(this._peerConnection.localDescription.sdp,"application").length>0:!1:!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var e=this._preferredVideoCodecs.find(function(n){return"adaptiveSimulcast"in n});return e&&e.adaptiveSimulcast===!0},enumerable:!1,configurable:!0}),t.prototype._maybeUpdateEncodings=function(e,n,i){if(i===void 0&&(i=!1),e.kind!=="video"||e.readyState==="ended")return!1;var a=e.getSettings(),o=a.height,s=a.width;if(typeof o!="number"||typeof s!="number")return!1;var c=MT.guessBrowser();return c==="safari"||c==="chrome"&&this._isAdaptiveSimulcastEnabled?(this._updateEncodings(e,n,i),!0):!1},t.prototype._updateEncodings=function(e,n,i){if(this._isChromeScreenShareTrack(e)){var a=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];n.forEach(function(p,y){var _=a[y];_?(p.scaleResolutionDownBy=_.scaleResolutionDownBy,i&&delete p.active):(p.active=!1,delete p.scaleResolutionDownBy)})}else{var o=e.getSettings(),s=o.width,c=o.height,l=[{pixels:960*540,maxActiveLayers:3},{pixels:480*270,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}],u=s*c,d=l.find(function(p){return u>=p.pixels}),v=Math.min(n.length,d.maxActiveLayers);n.forEach(function(p,y){var _=y<v;_?(p.scaleResolutionDownBy=1<<v-y-1,i&&(p.active=!0)):(p.active=!1,delete p.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",n.map(function(p,y){var _=p.active,S=p.scaleResolutionDownBy;return"["+y+": "+_+", "+(S||0)+"]"}).join(", "))},t.prototype._addIceCandidate=function(e){var n=this;return Promise.resolve().then(function(){return e=new n._RTCIceCandidate(e),n._peerConnection.addIceCandidate(e)}).catch(function(i){n._log.warn("Failed to add RTCIceCandidate "+(e?'"'+e.candidate+'"':"null")+": "+i.message)})},t.prototype._addIceCandidates=function(e){return Promise.all(e.map(this._addIceCandidate,this)).then(function(){})},t.prototype._addOrUpdateTransceiver=function(e){var n=this,i=a$(this,e.kind);if(i&&i.sender){var a=i.sender.track?i.sender.track.id:null;return a&&this._log.warn("Reusing transceiver: "+i.mid+"] "+a+" => "+e.id),this._replaceTrackPromises.set(i,i.sender.replaceTrack(e).then(function(){i.direction="sendrecv"},function(){}).finally(function(){n._replaceTrackPromises.delete(i)})),i}return this._peerConnection.addTransceiver(e,{})},t.prototype._checkIceBox=function(e){var n=D5(e);if(!n)return Promise.resolve();var i=this._remoteCandidates.setUfrag(n);return this._addIceCandidates(i)},t.prototype._answer=function(e){var n=this;return Promise.resolve().then(function(){return n._negotiationRole||(n._negotiationRole="answerer"),n._setRemoteDescription(e)}).catch(function(){throw new eg}).then(function(){return n._peerConnection.createAnswer()}).then(function(i){hs?i=new n._RTCSessionDescription({sdp:N5(i.sdp),type:i.type}):i=j5(i);var a=R5(i.sdp,["mslabel","label"]);if(n._shouldApplySimulcast){var o=a;a=n._setSimulcast(o,n._trackIdsToAttributes),a=n._revertSimulcast(a,o,e.sdp)}return a=a.replace(/42e015/g,"42e01f"),n._setLocalDescription({type:i.type,sdp:a})}).then(function(){return n._checkIceBox(e)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription)}).catch(function(i){var a=i instanceof eg?i:new Zm;throw n._publishMediaWarning({message:"Failed to _answer",code:a.code,error:i}),a})},t.prototype._close=function(){return this._iceConnectionMonitor.stop(),this._peerConnection.signalingState!=="closed"?(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0):!1},t.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},t.prototype._handleDataChannelEvent=function(e){var n=this,i=e.channel,a=new zU(i);this._dataTrackReceivers.add(a),i.addEventListener("close",function(){n._dataTrackReceivers.delete(a)}),this.emit("trackAdded",a)},t.prototype._handleGlare=function(e){var n=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return n._trackIdsToAttributes=new Map(n._appliedTrackIdsToAttributes),n._setLocalDescription({type:"rollback"})}).then(function(){return n._needsAnswer=!1,n._answer(e)}).then(function(i){return i?Promise.resolve():n._offer()})},t.prototype._publishMediaWarning=function(e){var n=e.message,i=e.code,a=e.error,o=e.sdp;this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:n,code:i,context:JSON.stringify({error:a.message,sdp:o})}})},t.prototype._handleIceCandidateEvent=function(e){e.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(e.candidate));var n={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};e.candidate||(n.ice.complete=!0),this._isIceLite&&e.candidate||(n.ice.revision=this._localCandidatesRevision++,this.emit("candidates",n))},t.prototype._handleIceConnectionStateChange=function(){var e=this,n=this._peerConnection.iceConnectionState,i=["connected","completed"].includes(n),a=this._log;a.debug('ICE connection state is "'+n+'"'),i&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),this._lastIceConnectionState!=="failed"&&n==="failed"&&!this._shouldRestartIce&&!this._isRestartingIce?(a.warn("ICE failed"),this._initiateIceRestartBackoff()):["disconnected","failed"].includes(this._lastIceConnectionState)&&i&&a.debug("ICE reconnected"),n==="connected"?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){e._iceConnectionMonitor.stop(),!e._shouldRestartIce&&!e._isRestartingIce&&(a.warn("ICE Connection Monitor detected inactivity"),e._isIceConnectionInactive=!0,e._initiateIceRestartBackoff(),e.emit("iceConnectionStateChanged"),e.emit("connectionStateChanged"))})):["disconnected","completed"].includes(n)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=n,this.emit("iceConnectionStateChanged")},t.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},t.prototype._handleIceGatheringStateChange=function(){var e=this._peerConnection.iceGatheringState,n=this._log;n.debug('ICE gathering state is "'+e+'"');var i=this._iceGatheringTimeout,a=i.delay,o=i.isSet;e==="gathering"&&!this._didGenerateLocalCandidates&&!o&&(n.debug("Starting ICE gathering timeout: "+a),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},t.prototype._handleSignalingStateChange=function(){this._peerConnection.signalingState==="stable"&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},t.prototype._handleTrackEvent=function(e){var n=this,i=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new GU,this._trackMatcher.update(i);var a=e.track,o=this._trackMatcher.match(e)||a.id,s=new WU(o,a);this._mediaTrackReceivers.forEach(function(c){c.track.id===s.track.id&&n._mediaTrackReceivers.delete(c)}),this._mediaTrackReceivers.add(s),a.addEventListener?a.addEventListener("ended",function(){return n._mediaTrackReceivers.delete(s)}):a.onended=function(){return n._mediaTrackReceivers.delete(s)},this.emit("trackAdded",s)},t.prototype._initiateIceRestart=function(){if(this._peerConnection.signalingState!=="closed"){var e=this._log;e.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var n=this._iceReconnectTimeout,i=n.delay,a=n.isSet;a||(e.debug("Starting ICE reconnect timeout: "+i),this._iceReconnectTimeout.start()),this.offer().catch(function(o){e.error("offer failed in _initiateIceRestart with: "+o.message)})}},t.prototype._initiateIceRestartBackoff=function(){var e=this;this._peerConnection.signalingState==="closed"||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return e._initiateIceRestart()}))},t.prototype._maybeReoffer=function(e){var n=this._shouldOffer;if(e&&e.sdp){var i=this._peerConnection.getSenders().filter(function(l){return l.track});n=["audio","video"].reduce(function(l,u){var d=Cu(e.sdp,u,"(sendrecv|sendonly)"),v=i.filter(r$.bind(null,u));return l||d.length<v.length},n);var a=this._dataChannels.size>0,o=Cu(e.sdp,"application").length>0,s=a&&!o;n=n||s}var c=n?this._offer():Promise.resolve();return c.then(function(){return n})},t.prototype._offer=function(){var e=this,n=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,n.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return e._peerConnection.createOffer(n)}).catch(function(i){var a=new Zm;throw e._publishMediaWarning({message:"Failed to create offer",code:a.code,error:i}),a}).then(function(i){hs?i=new e._RTCSessionDescription({sdp:N5(i.sdp),type:i.type}):i=j5(i);var a=R5(i.sdp,["mslabel","label"]);a=e._peerConnection.remoteDescription?AU(a,e._peerConnection.remoteDescription.sdp):a;var o=e._setCodecPreferences(a,e._preferredAudioCodecs,e._preferredVideoCodecs);return e._shouldOffer=!1,e._negotiationRole||(e._negotiationRole="offerer"),e._shouldApplySimulcast&&(e._localDescriptionWithoutSimulcast={type:"offer",sdp:o},o=e._setSimulcast(o,e._trackIdsToAttributes)),e._setLocalDescription({type:"offer",sdp:o})})},t.prototype._getMediaTrackSenderId=function(e){var n=Array.from(this._rtpSenders.keys()).find(function(i){var a=i.track.id;return a===e});return n?n.id:e},t.prototype._addOrRewriteLocalTrackIds=function(e){var n=this,i=this._peerConnection.getTransceivers(),a=i.filter(function(v){var p=v.sender,y=v.stopped;return!y&&p&&p.track}),o=a.filter(function(v){var p=v.mid;return p}),s=new Map(o.map(function(v){var p=v.mid,y=v.sender;return[p,n._getMediaTrackSenderId(y.track.id)]})),c=OU(e.sdp,s),l=a.filter(function(v){var p=v.mid;return!p}),u=new Map(["audio","video"].map(function(v){return[v,l.filter(function(p){var y=p.sender;return y.track.kind===v}).map(function(p){var y=p.sender;return n._getMediaTrackSenderId(y.track.id)})]})),d=LU(c,s,u);return new this._RTCSessionDescription({sdp:d,type:e.type})},t.prototype._rollbackAndApplyOffer=function(e){var n=this;return this._setLocalDescription({type:"rollback"}).then(function(){return n._setLocalDescription(e)})},t.prototype._setLocalDescription=function(e){var n=this;return e.type!=="rollback"&&this._shouldApplyDtx&&(e=new this._RTCSessionDescription({sdp:jd(e.sdp),type:e.type})),this._peerConnection.setLocalDescription(e).catch(function(i){n._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+i.message+'".',i);var a=new Zm,o={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:a.code,error:i};throw e.sdp&&(n._log.warn("The SDP was "+e.sdp),o.sdp=e.sdp),n._publishMediaWarning(o),a}).then(function(){e.type!=="rollback"&&(n._localDescription=n._addOrRewriteLocalTrackIds(e),n._shouldApplyDtx&&(n._localDescription=new n._RTCSessionDescription({sdp:jd(n._localDescription.sdp,[]),type:n._localDescription.type})),n._localCandidates=[],e.type==="offer"?n._descriptionRevision++:e.type==="answer"&&(n._lastStableDescriptionRevision=n._descriptionRevision,B5(n)),n._localUfrag=D5(e),n.emit("description",n.getState()))})},t.prototype._setRemoteDescription=function(e){var n=this;return e.sdp&&(e.sdp=this._setCodecPreferences(e.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?e.sdp=jd(e.sdp):e.sdp=jd(e.sdp,[]),hs&&(e.sdp=n$(e.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(e.sdp))),e=new this._RTCSessionDescription(e),Promise.resolve().then(function(){if(e.type==="answer"&&n._localDescriptionWithoutSimulcast){var i=n._preferredVideoCodecs.find(function(s){return"adaptiveSimulcast"in s}),a=!!i&&i.adaptiveSimulcast===!1,o=n._revertSimulcast(n._localDescription.sdp,n._localDescriptionWithoutSimulcast.sdp,e.sdp,a);if(n._localDescriptionWithoutSimulcast=null,o!==n._localDescription.sdp)return n._rollbackAndApplyOffer({type:n._localDescription.type,sdp:o})}}).then(function(){return n._peerConnection.setRemoteDescription(e)}).then(function(){e.type==="answer"&&(n._isRestartingIce&&(n._log.debug("An ICE restart was in-progress and is now completed"),n._isRestartingIce=!1),B5(n))},function(i){throw n._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+i.message+'".',i),e.sdp&&n._log.warn("The SDP was "+e.sdp),i})},t.prototype._updateDescription=function(e){var n=this;switch(e.type){case"answer":case"pranswer":if(e.revision!==this._descriptionRevision||this._peerConnection.signalingState!=="have-local-offer")return Promise.resolve();this._descriptionRevision=e.revision;break;case"close":return this._close();case"create-offer":return e.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._offer());case"offer":return e.revision<=this._lastStableDescriptionRevision||this._peerConnection.signalingState==="closed"?Promise.resolve():this._peerConnection.signalingState==="have-local-offer"?this._needsAnswer&&this._lastStableDescriptionRevision===0?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._handleGlare(e)):(this._descriptionRevision=e.revision,this._answer(e).then(function(){}))}var i=e.revision;return Promise.resolve().then(function(){return n._setRemoteDescription(e)}).catch(function(a){var o=new eg;throw n._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:o.code,error:a,sdp:e.sdp}),o}).then(function(){return n._lastStableDescriptionRevision=i,n._needsAnswer=!1,n._checkIceBox(e)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription).then(function(){})})},t.prototype._updateIce=function(e){var n=this._remoteCandidates.update(e);return this._addIceCandidates(n)},t.prototype.addDataTrackSender=function(e){if(!this._dataChannels.has(e))try{var n={ordered:e.ordered};e.maxPacketLifeTime!==null&&(n.maxPacketLifeTime=e.maxPacketLifeTime),e.maxRetransmits!==null&&(n.maxRetransmits=e.maxRetransmits);var i=this._peerConnection.createDataChannel(e.id,n);e.addDataChannel(i),this._dataChannels.set(e,i)}catch(a){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+e.id+'": '+a.message)}},t.prototype._handleQueuedPublisherHints=function(){var e=this;this._peerConnection.signalingState==="stable"&&this._mediaTrackSenderToPublisherHints.forEach(function(n,i){var a=n.deferred,o=n.encodings;e._mediaTrackSenderToPublisherHints.delete(i),e._setPublisherHint(i,o).then(function(s){return a.resolve(s)}).catch(function(s){return a.reject(s)})})},t.prototype._setPublisherHint=function(e,n){var i=this;if(hs)return Promise.resolve("COULD_NOT_APPLY_HINT");if(this._mediaTrackSenderToPublisherHints.has(e)){var a=this._mediaTrackSenderToPublisherHints.get(e);a.deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(e)}var o=this._rtpSenders.get(e);if(!o)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if(this._peerConnection.signalingState==="closed")return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if(this._peerConnection.signalingState!=="stable"){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var s=UU();return this._mediaTrackSenderToPublisherHints.set(e,{deferred:s,encodings:n}),s.promise}var c=o.getParameters();return n!==null&&n.forEach(function(l){var u=l.enabled,d=l.layer_index;c.encodings.length>d?(i._log.debug("layer:"+d+", active:"+c.encodings[d].active+" => "+u),c.encodings[d].active=u):i._log.warn("invalid layer:"+d+", active:"+u)}),this._maybeUpdateEncodings(o.track,c.encodings,n===null),o.setParameters(c).then(function(){return"OK"}).catch(function(l){return i._log.error("Failed to apply publisher hints:",l),"COULD_NOT_APPLY_HINT"})},t.prototype.addMediaTrackSender=function(e){var n=this;if(!(this._peerConnection.signalingState==="closed"||this._rtpSenders.has(e))){var i=this._addOrUpdateTransceiver(e.track),a=i.sender;e.addSender(a,function(o){return n._setPublisherHint(e,o)}),this._rtpNewSenders.add(a),this._rtpSenders.set(e,a)}},t.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},t.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},t.prototype.getState=function(){if(!this._localDescription)return null;var e=this._localDescription.type==="answer"?this._lastStableDescriptionRevision:this._descriptionRevision,n={type:this._localDescription.type,revision:e};return this._localDescription.sdp&&(n.sdp=this._localDescription.sdp),{description:n,id:this.id}},t.prototype.offer=function(){var e=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(n){e.transition("updating",n);var i=e._needsAnswer||e._isRestartingIce?Promise.resolve():e._offer();return i.then(function(){e.tryTransition("open",n)},function(a){throw e.tryTransition("open",n),a})})},t.prototype.removeDataTrackSender=function(e){var n=this._dataChannels.get(e);n&&(e.removeDataChannel(n),this._dataChannels.delete(e),n.close())},t.prototype.removeMediaTrackSender=function(e){var n=this._rtpSenders.get(e);if(n){if(this._peerConnection.signalingState!=="closed"&&this._peerConnection.removeTrack(n),e.removeSender(n),this._mediaTrackSenderToPublisherHints.has(e)){var i=this._mediaTrackSenderToPublisherHints.get(e);i.deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(e)}this._rtpNewSenders.delete(n),this._rtpSenders.delete(e)}},t.prototype.setConfiguration=function(e){typeof this._peerConnection.setConfiguration=="function"&&this._peerConnection.setConfiguration(F5(e))},t.prototype.setIceReconnectTimeout=function(e){return this._iceReconnectTimeout.setDelay(e),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},t.prototype.update=function(e){var n=this;return this.bracket("updating",function(i){if(n.state==="closed")return Promise.resolve();n.transition("updating",i);var a=[];return e.ice&&a.push(n._updateIce(e.ice)),e.description&&a.push(n._updateDescription(e.description)),Promise.all(a).then(function(){n.tryTransition("open",i)},function(o){throw n.tryTransition("open",i),o})})},t.prototype.getStats=function(){var e=this;return kU(this._peerConnection,{log:this._log}).then(function(n){return t$(e,n)})},t}(qU);function I5(r,t){var e=r._getMediaTrackSenderId(t.trackId);return Object.assign(t,{trackId:e})}function M5(r,t){var e=_U([],yU(r._mediaTrackReceivers)).find(function(i){return i.track.id===t.trackId}),n=e?e.id:null;return Object.assign(t,{trackId:n})}function t$(r,t){return Object.assign(t,{remoteAudioTrackStats:t.remoteAudioTrackStats.map(function(e){return M5(r,e)}),remoteVideoTrackStats:t.remoteVideoTrackStats.map(function(e){return M5(r,e)}),localAudioTrackStats:t.localAudioTrackStats.map(function(e){return I5(r,e)}),localVideoTrackStats:t.localVideoTrackStats.map(function(e){return I5(r,e)})})}function D5(r){if(r.sdp){var t=r.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(t)return t[1]}return null}function F5(r){return r===void 0&&(r={}),Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},r)}function r$(r,t){var e=t.track;return e&&e.kind===r&&e.readyState!=="ended"}function n$(r){return r.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}function i$(r,t){return!r.stopped&&!t._replaceTrackPromises.has(r)&&["inactive","recvonly"].includes(r.direction)}function a$(r,t){var e={audio:r._preferredAudioCodecs.map(function(o){var s=o.codec;return s.toLowerCase()}),video:r._preferredVideoCodecs.map(function(o){var s=o.codec;return s.toLowerCase()})}[t],n=r._recycledTransceivers[t],i=e.find(function(o){return r._localCodecs.has(o)});if(!i)return n.shift();var a=n.find(function(o){var s=r._remoteCodecMaps.get(o.mid);return s&&s.has(i)});return a&&n.splice(n.indexOf(a),1),a}function o$(r){var t=r._peerConnection.localDescription;!t||!t.sdp||Cu(t.sdp).forEach(function(e){var n=DT(e);n.forEach(function(i,a){return r._localCodecs.add(a)})})}function s$(r){var t=r._peerConnection.remoteDescription;!t||!t.sdp||Cu(t.sdp).forEach(function(e){var n=e.match(/^a=mid:(.+)$/m);if(!(!n||!n[1])){var i=n[1],a=DT(e);r._remoteCodecMaps.set(i,a)}})}function l$(r){r._recycledTransceivers.audio=[],r._recycledTransceivers.video=[],r._peerConnection.getTransceivers().forEach(function(t){if(i$(t,r)){var e=t.receiver.track;r._recycledTransceivers[e.kind].push(t)}})}function B5(r){l$(r),o$(r),s$(r),BT(r).then(function(){r._handleQueuedPublisherHints()})}function BT(r){var t=r._encodingParameters,e=t.maxAudioBitrate,n=t.maxVideoBitrate,i=new Map([["audio",e],["video",n]]),a=[];return r._peerConnection.getSenders().filter(function(o){return o.track}).forEach(function(o){var s=i.get(o.track.kind),c=o.getParameters();s===null||s===0?c$(c):r._isChromeScreenShareTrack(o.track)?r._log.warn("Not setting maxBitrate for "+o.track.kind+" Track "+o.track.id+" because it appears to be screen share track: "+o.track.label):u$(c,s),!hs&&c.encodings.length>0&&(o.track.kind==="audio"?c.encodings[0].priority="high":r._isChromeScreenShareTrack(o.track)&&(c.encodings[0].priority="medium"),r._enableDscp&&(c.encodings[0].networkPriority="high"));var l=r._rtpNewSenders.has(o);r._maybeUpdateEncodings(o.track,c.encodings,l),r._rtpNewSenders.delete(o);var u=o.setParameters(c).catch(function(d){r._log.warn("Error while setting encodings parameters for "+o.track.kind+" Track "+o.track.id+": "+(d.message||d.name))});a.push(u)}),Promise.all(a)}function c$(r){Array.isArray(r.encodings)&&r.encodings.forEach(function(t){return delete t.maxBitrate})}function u$(r,t){hs?r.encodings=[{maxBitrate:t}]:r.encodings.forEach(function(e){e.maxBitrate=t})}var f$=e$,d$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),UT=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},$T=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},h$=Dt.guessBrowser,p$=f$,v$=B3,m$=M3,go=De,g$=Be.MediaConnectionError,y$=h$()==="firefox",_$=function(r){d$(t,r);function t(e,n,i){var a=r.call(this)||this;i=Object.assign({audioContextFactory:y$?Vp():null,PeerConnectionV2:p$},i);var o=i.audioContextFactory?i.audioContextFactory.getOrCreate(a):null,s=o?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(a,{_audioContextFactory:{value:i.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:go.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:o?new v$(w$(o)):null},_encodingParameters:{value:e},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:s},_peerConnections:{value:new Map},_preferredCodecs:{value:n},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:i.PeerConnectionV2}}),a}return t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._peerConnections.forEach(function(n){return n.setEffectiveAdaptiveSimulcast(e)}),this._preferredCodecs.video.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=e)})},Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._closeAbsentPeerConnections=function(e){var n=new Set(e.map(function(i){return i.id}));return this._peerConnections.forEach(function(i){n.has(i.id)||i._close()}),this},t.prototype._getConfiguration=function(){return this._configurationDeferred.promise},t.prototype._getOrCreate=function(e,n){var i=this,a=this,o=this._peerConnections.get(e);if(!o){var s=this._PeerConnectionV2,c=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},n);try{o=new s(e,this._encodingParameters,this._preferredCodecs,c)}catch{throw new g$}this._peerConnections.set(o.id,o),o.on("candidates",this.queue.bind(this,"candidates")),o.on("description",this.queue.bind(this,"description")),o.on("trackAdded",this.queue.bind(this,"trackAdded")),o.on("stateChanged",function l(u){u==="closed"&&(o.removeListener("stateChanged",l),a._dataTrackSenders.forEach(function(d){return o.removeDataTrackSender(d)}),a._mediaTrackSenders.forEach(function(d){return o.removeMediaTrackSender(d)}),a._peerConnections.delete(o.id),a._closedPeerConnectionIds.add(o.id),U5(a),Id(a))}),o.on("connectionStateChanged",function(){return U5(i)}),o.on("iceConnectionStateChanged",function(){return Id(i)}),this._dataTrackSenders.forEach(o.addDataTrackSender,o),this._mediaTrackSenders.forEach(o.addMediaTrackSender,o),Id(this)}return o},t.prototype.close=function(){return this._peerConnections.forEach(function(e){e.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),Id(this),this},t.prototype.createAndOffer=function(){var e=this;return this._getConfiguration().then(function(n){var i;do i=go.makeUUID();while(e._peerConnections.has(i));return e._getOrCreate(i,n)}).then(function(n){return n.offer()}).then(function(){return e})},t.prototype.getTrackReceivers=function(){return go.flatMap(this._peerConnections,function(e){return e.getTrackReceivers()})},t.prototype.getStates=function(){var e=[];return this._peerConnections.forEach(function(n){var i=n.getState();i&&e.push(i)}),e},t.prototype.setConfiguration=function(e){return this._configuration&&(this._configurationDeferred=go.defer(),this._peerConnections.forEach(function(n){n.setConfiguration(e)})),this._configuration=e,this._configurationDeferred.resolve(e),this},t.prototype.setIceReconnectTimeout=function(e){return this._sessionTimeout===null&&(this._peerConnections.forEach(function(n){n.setIceReconnectTimeout(e)}),this._sessionTimeout=e),this},t.prototype.setTrackSenders=function(e){var n=new Set(e.filter(function(o){return o.kind==="data"})),i=new Set(e.filter(function(o){return o&&(o.kind==="audio"||o.kind==="video")})),a=S$(this,n,i);return this._dataTrackSenders=n,this._mediaTrackSenders=i,b$(this,a),this},t.prototype.update=function(e,n){var i=this;return n===void 0&&(n=!1),n&&this._closeAbsentPeerConnections(e),this._getConfiguration().then(function(a){return Promise.all(e.map(function(o){if(i._closedPeerConnectionIds.has(o.id))return null;var s=i._getOrCreate(o.id,a);return s.update(o)}))}).then(function(){return i})},t.prototype.getStats=function(){var e=Array.from(this._peerConnections.values());return Promise.all(e.map(function(n){return n.getStats().then(function(i){return[n.id,i]})})).then(function(n){return new Map(n)})},t}(m$);function w$(r){var t=r.createMediaStreamDestination();return t.stream.getAudioTracks()[0]}function b$(r,t){(t.data.add.size||t.data.remove.size||t.media.add.size||t.media.remove.size)&&r._peerConnections.forEach(function(e){t.data.remove.forEach(e.removeDataTrackSender,e),t.media.remove.forEach(e.removeMediaTrackSender,e),t.data.add.forEach(e.addDataTrackSender,e),t.media.add.forEach(e.addMediaTrackSender,e),(t.media.add.size||t.media.remove.size||t.data.add.size&&!e.isApplicationSectionNegotiated)&&e.offer()})}function x$(r,t){var e=go.difference(t,r._dataTrackSenders),n=go.difference(r._dataTrackSenders,t);return{add:e,remove:n}}function S$(r,t,e){return{data:x$(r,t),media:k$(r,e)}}function k$(r,t){var e=go.difference(t,r._mediaTrackSenders),n=go.difference(r._mediaTrackSenders,t);return{add:e,remove:n}}var lp={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3},tg;function P$(){return Object.keys(lp).reduce(function(r,t){var e;return Object.assign(r,(e={},e[lp[t]]=t,e))},{})}function VT(r){return r.length?(tg=tg||P$(),r.reduce(function(t,e){return tg[Math.max(lp[t],lp[e])]})):"new"}function Id(r){r._lastIceConnectionState=r.iceConnectionState,r._iceConnectionState=VT($T([],UT(r._peerConnections.values())).map(function(t){return t.iceConnectionState})),r.iceConnectionState!==r._lastIceConnectionState&&r.emit("iceConnectionStateChanged")}function U5(r){r._lastConnectionState=r.connectionState,r._connectionState=VT($T([],UT(r._peerConnections.values())).map(function(t){return t.connectionState})),r.connectionState!==r._lastConnectionState&&r.emit("connectionStateChanged")}var T$=_$,E$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),C$=yn,L$=0,O$=function(r){E$(t,r);function t(e,n,i){var a=r.call(this)||this;return Object.defineProperties(a,{_instanceId:{value:L$++},channel:{value:n},_log:{value:i.log.createLog("default",a)},_getReceiver:{value:e},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),a}return Object.defineProperty(t.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},t.prototype.setup=function(e){var n=this;this._teardown(),this._log.info("setting up msp transport for id:",e);var i=this._getReceiver(e).then(function(a){if(a.kind!=="data"&&n._log.error("Expected a DataTrackReceiver"),n._receiverPromise===i){try{n._transport=a.toDataTransport(),n.emit("ready",n._transport)}catch(o){n._log.error("Failed to toDataTransport: "+o.message)}a.once("close",function(){return n._teardown()})}});this._receiverPromise=i},t.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},t}(C$),Us=O$,A$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),N$=Us,R$=function(r){A$(t,r);function t(e,n){var i=r.call(this,e,"active_speaker",n)||this;return Object.defineProperties(i,{_loudestParticipantSid:{value:null,writable:!0}}),i.on("ready",function(a){a.on("message",function(o){switch(o.type){case"active_speaker":i._setLoudestParticipantSid(o.participant);break}})}),i}return Object.defineProperty(t.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),t.prototype._setLoudestParticipantSid=function(e){this.loudestParticipantSid!==e&&(this._loudestParticipantSid=e,this.emit("updated"))},t}(N$),j$=R$,I$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),M$=Us,D$=function(r){I$(t,r);function t(e,n){var i=r.call(this,e,"extension_transcriptions",n)||this;return i.on("ready",function(a){a.on("message",function(o){switch(o.type){case"extension_transcriptions":i.emit("transcription",o);break}})}),i}return t}(M$),F$=D$,B$=function(){function r(t,e,n,i){Object.defineProperties(this,{availableSend:{enumerable:!0,value:n},recv:{enumerable:!0,value:e},rtt:{enumerable:!0,value:i},send:{enumerable:!0,value:t}})}return r.of=function(t,e){var n=(e.timestamp-t.timestamp)/1e3,i=e.bytesSent-t.bytesSent,a=e.bytesReceived-t.bytesReceived,o=n>0?i/n*8:0,s=n>0?a/n*8:0,c=e.availableOutgoingBitrate,l=e.currentRoundTripTime;return new r(o,s,c,l)},r}(),U$=B$,rg=U$,$$=function(){function r(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new rg(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return r.prototype.next=function(t){var e=this.lastStats;if(this.lastStats=t,e){var n=e.id===t.id?rg.of(e,t):new rg(0,0);this.lastReport=n}return this.lastReport},r}(),V$=$$;function z$(r){return r=r.filter(function(t){return typeof t=="number"}),r.length<1?void 0:r.reduce(function(t,e){return e+t})/r.length}var zT=z$,W$=function(){function r(t,e,n){Object.defineProperties(this,{id:{enumerable:!0,value:t},trackId:{enumerable:!0,value:e},bitrate:{enumerable:!0,value:n}})}return r}(),WT=W$;function q$(r){return r.reduce(function(t,e){return typeof e=="number"?e+t:t},0)}var qT=q$,H$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$5=zT,G$=WT,K$=qT,Q$=function(r){H$(t,r);function t(e,n,i,a,o,s,c){var l=r.call(this,e,n,i)||this,u=o>0?a/o:0;return Object.defineProperties(l,{deltaPacketsLost:{enumerable:!0,value:a},deltaPacketsReceived:{enumerable:!0,value:o},fractionLost:{enumerable:!0,value:s},jitter:{enumerable:!0,value:c},phonyFractionLost:{enumerable:!0,value:u}}),l}return t.of=function(e,n,i){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var a=(i.timestamp-n.timestamp)/1e3,o=i.bytesReceived-n.bytesReceived,s=a>0?o/a*8:0,c=Math.max(i.packetsLost-n.packetsLost,0),l=i.packetsReceived-n.packetsReceived,u=i.fractionLost,d=i.jitter;return new t(n.id,e,s,c,l,u,d)},t.summarize=function(e){var n=e.map(function(s){return s.summarize()}),i=K$(n.map(function(s){return s.bitrate})),a=$5(n.map(function(s){return s.fractionLost})),o=$5(n.map(function(s){return s.jitter}));return{bitrate:i,fractionLost:a,jitter:o}},t.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:typeof this.fractionLost=="number"?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},t}(G$),HT=Q$,Y$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),J$=zT,X$=WT,Z$=qT,eV=function(r){Y$(t,r);function t(e,n,i,a){var o=r.call(this,e,n,i)||this;return Object.defineProperties(o,{rtt:{enumerable:!0,value:a}}),o}return t.of=function(e,n,i,a){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var o=(i.timestamp-n.timestamp)/1e3,s=i.bytesSent-n.bytesSent,c=o>0?s/o*8:0,l=a&&typeof a.roundTripTime=="number"?a.roundTripTime/1e3:void 0;return new t(n.id,e,c,l)},t.summarize=function(e){var n=Z$(e.map(function(a){return a.bitrate})),i=J$(e.map(function(a){return a.rtt}));return{bitrate:n,rtt:i}},t}(X$),GT=eV,ng=HT,ig=GT,tV=function(){function r(t,e,n){Object.defineProperties(this,{ice:{enumerable:!0,value:t},audio:{enumerable:!0,value:e},video:{enumerable:!0,value:n}})}return r.prototype.summarize=function(){var t=this.audio.send.concat(this.video.send),e=ig.summarize(t),n=this.audio.recv.concat(this.video.recv),i=ng.summarize(n);return{ice:this.ice,send:e,recv:i,audio:{send:ig.summarize(this.audio.send),recv:ng.summarize(this.audio.recv)},video:{send:ig.summarize(this.video.send),recv:ng.summarize(this.video.recv)}}},r}(),rV=tV,nV=function(){function r(t,e,n){Object.defineProperties(this,{id:{enumerable:!0,value:t,writable:!0},trackId:{enumerable:!0,value:e,writable:!0},lastStats:{enumerable:!0,value:n,writable:!0}})}return r}(),KT=nV,iV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aV=HT,oV=KT,sV=function(r){iV(t,r);function t(e,n){var i=r.call(this,n.id,e,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return t.prototype.next=function(e,n){var i=this.lastStats;this.lastStats=n,this.trackId=e;var a=aV.of(e,i,n);return this.lastReport=a,a},t}(oV),lV=sV,cV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),uV=KT,fV=GT,dV=function(r){cV(t,r);function t(e,n){var i=r.call(this,n.id,e,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return t.prototype.next=function(e,n,i){var a=this.lastStats;this.lastStats=n,this.trackId=e;var o=fV.of(e,a,n,i);return this.lastReport=o,o},t}(uV),hV=dV,gu=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Md=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},ef=A&&A.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},QT=Dt.guessBrowser,pV=V$,vV=rV,mV=lV,gV=hV,yV=function(){function r(t){Object.defineProperties(this,{pc:{enumerable:!0,value:t},ice:{enumerable:!0,value:new pV},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return r.prototype.next=function(){var t=this,e=QT()==="firefox"?bV(this):xV(this);return e.then(function(){var n=Md([],gu(t.audio.send.values())),i=Md([],gu(t.video.send.values())),a=Md([],gu(t.audio.recv.values())),o=Md([],gu(t.video.recv.values())),s=new vV(t.ice.lastReport,{send:n.map(function(c){return c.lastReport}).filter(function(c){return c}),recv:a.map(function(c){return c.lastReport}).filter(function(c){return c})},{send:i.map(function(c){return c.lastReport}).filter(function(c){return c}),recv:o.map(function(c){return c.lastReport}).filter(function(c){return c})});return t.lastReport=s,s})},r}();function V5(r){return Promise.all(r.map(function(t){var e=t.track.id;return t.getStats().then(function(n){var i,a;try{for(var o=ef(n.values()),s=o.next();!s.done;s=o.next()){var c=s.value;c.type==="inbound-rtp"&&(c.id=e+"-"+c.id)}}catch(l){i={error:l}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return[e,n]})})).then(function(t){return new Map(t)})}function YT(r,t,e,n,i){var a=t[n.mediaType];if(!i){var o=e.get(n.trackId);o&&(i=o.trackIdentifier)}if(a&&i){if(a.has(n.id))return a.get(n.id);var s=new r(i,n);a.set(n.id,s)}return null}function r_(r){return{audio:r.audio.send,video:r.video.send}}function n_(r){return{audio:r.audio.recv,video:r.video.recv}}function _V(r,t,e,n){return YT(gV,r_(r),t,e,n)}function wV(r,t,e,n){return YT(mV,n_(r),t,e,n)}function JT(r){return{audio:new Set(r.audio.send.keys()),video:new Set(r.video.send.keys())}}function XT(r){return{audio:new Set(r.audio.recv.keys()),video:new Set(r.video.recv.keys())}}function ZT(r,t,e,n){var i,a;try{for(var o=ef(t.values()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c.type==="outbound-rtp"&&!c.isRemote){if(QT()!=="firefox"&&!c.trackId)continue;var l=e[c.mediaType];l&&l.delete(c.id);var u=_V(r,t,c,n);if(u){var d=t.get(c.remoteId);u.next(n||u.trackId,c,d)}}}}catch(v){i={error:v}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function eE(r,t,e,n){var i,a;try{for(var o=ef(t.values()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c.type==="inbound-rtp"&&!c.isRemote){var l=e[c.mediaType];l&&l.delete(c.id);var u=wV(r,t,c,n);u&&u.next(n||u.trackId,c)}}}catch(d){i={error:d}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function cp(r,t){var e=function(i){var a=r[i],o=t[i];o.forEach(function(s){return a.delete(s)})};for(var n in t)e(n)}function tE(r,t){var e,n,i,a,o;try{for(var s=ef(t.values()),c=s.next();!c.done;c=s.next()){var l=c.value;l.type==="transport"&&(o=t.get(l.selectedCandidatePairId))}}catch(v){e={error:v}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}if(o){r.next(o);return}try{for(var u=ef(t.values()),d=u.next();!d.done;d=u.next()){var l=d.value;l.type==="candidate-pair"&&l.nominated&&(!("selected"in l)||l.selected)&&r.next(l)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}}function bV(r){var t=r.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/send/)&&n.sender.track}).map(function(n){return n.sender}),e=r.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/recv/)}).map(function(n){return n.receiver});return Promise.all([V5(t),V5(e),r.pc.getStats()]).then(function(n){var i=gu(n,3),a=i[0],o=i[1],s=i[2],c=r_(r),l=JT(r);a.forEach(function(v,p){return ZT(r,v,l,p)}),cp(c,l);var u=n_(r),d=XT(r);o.forEach(function(v,p){return eE(r,v,d,p)}),cp(u,d),tE(r.ice,s)})}function xV(r){return r.pc.getStats().then(function(t){var e=r_(r),n=JT(r);ZT(r,t,n),cp(e,n);var i=n_(r),a=XT(r);eE(r,t,a),cp(i,a),tE(r.ice,t)})}var SV=yV,kV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PV=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},TV=yn,EV=SV,CV=function(r){kV(t,r);function t(e,n){var i=r.call(this)||this;return Object.defineProperties(i,{_factories:{value:new WeakMap},_manager:{value:e},_signaling:{value:n}}),n.on("updated",function(){return i.emit("updated")}),i}return Object.defineProperty(t.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;this.stop();var n=setTimeout(function(){e._timeout===n&&LV(e).then(function(i){if(e._timeout===n){if(i.length){var a=PV(i,1),o=a[0];e._signaling.put(o)}e.start()}})},200);this._timeout=n},t.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},t}(TV);function LV(r){var t=r._manager._peerConnections?Array.from(r._manager._peerConnections.values()):[],e=t.map(function(a){return a._peerConnection}).filter(function(a){return a.signalingState!=="closed"}),n=e.map(function(a){if(r._factories.has(a))return r._factories.get(a);var o=new EV(a);return r._factories.set(a,o),o}),i=n.map(function(a){return a.next().catch(function(){return null})});return Promise.all(i).then(function(a){return a.filter(function(o){return o}).map(function(o){return o.summarize()})})}var OV=CV,AV=De.defer,NV=function(){function r(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return r.prototype.put=function(t){this._hasValue=!0,this._value=t;var e=this._deferreds.shift();return e&&e.resolve(t),this},r.prototype.take=function(){var t=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var e=AV();return this._deferreds.push(e),e.promise.then(function(n){return t._hasValue=!1,n})},r}(),RV=NV,jV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),IV=Us,MV=RV,DV=Bs,z5=5e3,FV=function(r){jV(t,r);function t(e,n,i){var a=r.call(this,e,"network_quality",i)||this;return Object.defineProperties(a,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new MV},_resendTimer:{value:new DV(function(){a._resendTimer.setDelay(a._resendTimer.delay*1.5),a._sendNetworkQualityInputs()},z5,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:n.local,remoteReportLevel:n.remote}}}}),a.on("ready",function(o){o.on("message",function(s){switch(a._log.debug("Incoming: ",s),s.type){case"network_quality":a._handleNetworkQualityMessage(s);break}})}),a._sendNetworkQualityInputs(),a}return Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),t.prototype._handleNetworkQualityMessage=function(e){var n=this,i=!1,a=null,o=e?e.local:null;typeof o=="number"?(a=o,this._levels=null):typeof o=="object"&&o&&(this._levels=o,a=typeof o.level=="number"?o.level:Math.min(o.audio.send,o.audio.recv,o.video.send,o.video.recv)),a!==null&&this.level!==a&&(this._level=a,i=!0),this._remoteLevels=e&&e.remotes?e.remotes.reduce(function(s,c){var l=n._remoteLevels.get(c.sid)||{};return l.level!==c.level&&(i=!0),s.set(c.sid,c)},new Map):this._remoteLevels,i&&this.emit("updated"),this._resendTimer.setDelay(z5),this._resendTimer.isSet&&setTimeout(function(){return n._sendNetworkQualityInputs()},1e3)},t.prototype._sendNetworkQualityInputs=function(){var e=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(n){e._transport&&e._transport.publish(BV(n,e._networkQualityReportLevels))}).finally(function(){e._resendTimer.start()})},t.prototype.put=function(e){this._networkQualityInputs.put(e)},t}(IV);function BV(r,t){return Object.assign({type:"network_quality"},r,t)}var UV=FV,$V=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),VV=yn.EventEmitter,zV=function(r){$V(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),e}return t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return e=typeof e=="boolean"?e:!0,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},t}(VV),rE=zV,WV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qV=rE,HV=function(r){WV(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_revision:{value:1,writable:!0}}),e}return t.prototype.update=function(e){return e.revision<this._revision?this:(this._revision=e.revision,this.enable(e.is_recording))},t}(qV),GV=HV,KV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),QV=rE,YV=lc,JV=Bs,XV=De.buildLogLevels,ZV=zt.DEFAULT_LOG_LEVEL,ez=Da,i_=Be,tz=i_.MediaConnectionError,rz=i_.MediaDTLSTransportFailedError,nz=i_.SignalingConnectionDisconnectedError,iz=0,az={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},oz=function(r){KV(t,r);function t(e,n,i,a){var o=this;a=Object.assign({logLevel:ZV,RecordingSignaling:QV,Timeout:JV},a);var s=XV(a.logLevel);o=r.call(this,"connected",az)||this;var c=a.RecordingSignaling,l=new a.Timeout(function(){o._disconnect(o._reconnectingError)},a.sessionTimeout,!1);return Object.defineProperties(o,{_instanceId:{value:iz++},_log:{value:a.log?a.log.createLog("default",o):new ez("default",o,s,a.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:a},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:l},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:i},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new c},sid:{enumerable:!0,value:n}}),o.on("connectionStateChanged",function(){o.connectionState==="failed"&&!["disconnected","failed"].includes(o.iceConnectionState)&&o._disconnect(new rz)}),o.on("iceConnectionStateChanged",function(){return ag(o)}),o.on("signalingConnectionStateChanged",function(){return ag(o)}),setTimeout(function(){return ag(o)}),o}return t.prototype._disconnect=function(e){return this.state!=="disconnected"?(this.preempt("disconnected",null,[e]),!0):!1},t.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},t.prototype.connectParticipant=function(e){var n=this;return e.state==="disconnected"||this.participants.has(e.sid)?!1:(this.participants.set(e.sid,e),e.on("stateChanged",function i(a){a==="disconnected"&&(e.removeListener("stateChanged",i),n.participants.delete(e.sid),n.emit("participantDisconnected",e))}),this.emit("participantConnected",e),!0)},t.prototype.disconnect=function(){return this._disconnect()},t.prototype.setDominantSpeaker=function(e){this.dominantSpeakerSid=e,this.emit("dominantSpeakerChanged")},t}(YV);function ag(r){if(r.state==="disconnected"||r.signalingConnectionState==="disconnected"){r._sessionTimeout.clear();return}var t;r.signalingConnectionState==="reconnecting"?t=r.signalingConnectionState:r.iceConnectionState==="failed"?(r._mediaConnectionIsReconnecting=!0,t="reconnecting"):r.iceConnectionState==="new"||r.iceConnectionState==="checking"?t=r._mediaConnectionIsReconnecting?"reconnecting":"connected":(r._mediaConnectionIsReconnecting=!1,r._reconnectingError=null,r._sessionTimeout.clear(),t="connected"),t!==r.state&&(t==="reconnecting"?(r._reconnectingError=r.signalingConnectionState==="reconnecting"?new nz:new tz,r._sessionTimeout.start(),r.preempt(t,null,[r._reconnectingError])):r.preempt(t))}var nE=oz,sz=function(){function r(t){var e=t.actual,n=e===void 0?null:e,i=t.available,a=i===void 0?null:i,o=t.level,s=o===void 0?null:o;Object.defineProperties(this,{actual:{value:n,enumerable:!0},available:{value:a,enumerable:!0},level:{value:s,enumerable:!0}})}return r}(),lz=sz,cz=function(){function r(t){var e=t.fractionLost,n=e===void 0?null:e,i=t.level,a=i===void 0?null:i;Object.defineProperties(this,{fractionLost:{value:n,enumerable:!0},level:{value:a,enumerable:!0}})}return r}(),uz=cz,fz=function(){function r(t){var e=t.jitter,n=e===void 0?null:e,i=t.rtt,a=i===void 0?null:i,o=t.level,s=o===void 0?null:o;Object.defineProperties(this,{jitter:{value:n,enumerable:!0},rtt:{value:a,enumerable:!0},level:{value:s,enumerable:!0}})}return r}(),dz=fz,hz=lz,pz=uz,vz=dz,mz=function(){function r(t){var e=t.bandwidth,n=e===void 0?null:e,i=t.fractionLost,a=i===void 0?null:i,o=t.latency,s=o===void 0?null:o;Object.defineProperties(this,{bandwidth:{value:n?new hz(n):null,enumerable:!0},fractionLost:{value:a?new pz(a):null,enumerable:!0},latency:{value:s?new vz(s):null,enumerable:!0}})}return r}(),iE=mz,gz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yz=iE,_z=function(r){gz(t,r);function t(e){return r.call(this,e)||this}return t}(yz),wz=_z,bz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xz=iE,Sz=function(r){bz(t,r);function t(e){return r.call(this,e)||this}return t}(xz),kz=Sz,Pz=wz,Tz=kz,Ez=function(){function r(t){var e=t.send,n=t.recv,i=t.sendStats,a=i===void 0?null:i,o=t.recvStats,s=o===void 0?null:o;Object.defineProperties(this,{send:{value:e,enumerable:!0},recv:{value:n,enumerable:!0},sendStats:{value:a?new Pz(a):null,enumerable:!0},recvStats:{value:s?new Tz(s):null,enumerable:!0}})}return r}(),aE=Ez,Cz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lz=aE,Oz=function(r){Cz(t,r);function t(e){return r.call(this,e)||this}return t}(Lz),Az=Oz,Nz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rz=aE,jz=function(r){Nz(t,r);function t(e){return r.call(this,e)||this}return t}(Rz),Iz=jz,Mz=Az,Dz=Iz,Fz=function(){function r(t){var e=t.level,n=t.audio,i=t.video;Object.defineProperties(this,{level:{value:e,enumerable:!0},audio:{value:n?new Mz(n):null,enumerable:!0},video:{value:i?new Dz(i):null,enumerable:!0}})}return r}(),Bz=Fz,Uz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$z=lc,Vz=Bz,zz={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},Wz=function(r){Uz(t,r);function t(){var e=r.call(this,"connecting",zz)||this;return Object.defineProperties(e,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),e}return Object.defineProperty(t.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(e){return this.tracks.set(e.id||e.sid,e),this.emit("trackAdded",e),this},t.prototype.disconnect=function(){return this.state!=="disconnected"?(this.preempt("disconnected"),!0):!1},t.prototype.removeTrack=function(e){var n=this.tracks.get(e.id||e.sid);return this.tracks.delete(e.id||e.sid),n&&this.emit("trackRemoved",e),n||null},t.prototype.setNetworkQualityLevel=function(e,n){this._networkQualityLevel!==e&&(this._networkQualityLevel=e,this._networkQualityStats=n&&(n.audio||n.video)?new Vz(n):null,this.emit("networkQualityLevelChanged"))},t.prototype.connect=function(e,n){return this.state==="connecting"||this.state==="reconnecting"?(this._sid||(this._sid=e),this._identity||(this._identity=n),this.preempt("connected"),!0):!1},t.prototype.reconnecting=function(){return this.state==="connecting"||this.state==="connected"?(this.preempt("reconnecting"),!0):!1},t}($z),a_=Wz,qz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Hz=a_,Gz=function(r){qz(t,r);function t(e,n){var i=r.call(this)||this;return i.connect(e,n),i}return t}(Hz),Kz=Gz,Qz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yz=yn.EventEmitter,Jz=function(r){Qz(t,r);function t(e,n,i,a){var o=r.call(this)||this,s=null;return Object.defineProperties(o,{_error:{value:null,writable:!0},_isEnabled:{value:i,writable:!0},_priority:{value:a,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return s},set:function(c){s===null&&(s=c)}},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:e}}),o}return Object.defineProperty(t.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return e=typeof e=="boolean"?e:!0,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},t.prototype.setTrackTransceiver=function(e){return e=e||null,this.trackTransceiver!==e&&(this._trackTransceiver=e,this.emit("updated")),this},t.prototype.setSid=function(e){return this.sid===null&&(this._sid=e,this.emit("updated")),this},t}(Yz),oE=Jz,Xz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zz=oE,eW=function(r){Xz(t,r);function t(e,n,i,a,o,s){var c=r.call(this,n,i,a,o)||this;return Object.defineProperties(c,{_isSwitchedOff:{value:s,writable:!0}}),c.setSid(e),c}return Object.defineProperty(t.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),t.prototype.subscribeFailed=function(e){return this.error||(this._error=e,this.emit("updated")),this},t.prototype.setPriority=function(e){return this._priority!==e&&(this._priority=e,this.emit("updated")),this},t.prototype.setSwitchedOff=function(e){return this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit("updated")),this},t}(Zz),tW=eW,rW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),nW=tW,iW=function(r){rW(t,r);function t(e,n){return r.call(this,e.sid,e.name,e.kind,e.enabled,e.priority,n)||this}return t.prototype.update=function(e){return this.enable(e.enabled),this.setPriority(e.priority),this},t}(nW),aW=iW,oW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sW=Kz,lW=aW,cW=function(r){oW(t,r);function t(e,n,i,a,o,s){var c=r.call(this,e.sid,e.identity)||this;return s=Object.assign({RemoteTrackPublicationV2:lW},s),Object.defineProperties(c,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:s.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:n},updateSubscriberTrackPriority:{value:function(l,u){return i(l,u)}},updateTrackRenderHint:{value:function(l,u){return a(l,u)}},clearTrackHint:{value:function(l){return o(l)}},revision:{enumerable:!0,get:function(){return this._revision}}}),c.update(e)}return t.prototype._getOrCreateTrack=function(e){var n=this._RemoteTrackPublicationV2,i=this.tracks.get(e.sid);if(!i){var a=this._getInitialTrackSwitchOffState(e.sid);i=new n(e,a),this.addTrack(i)}return i},t.prototype.update=function(e){var n=this;if(this.revision!==null&&e.revision<=this.revision)return this;this._revision=e.revision;var i=new Set;switch(e.tracks.forEach(function(a){var o=n._getOrCreateTrack(a);o.update(a),i.add(o)}),this.tracks.forEach(function(a){i.has(a)||n.removeTrack(a)}),e.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity);break}return this},t}(sW),uW=cW,fW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),dW=Us,hW=function(r){fW(t,r);function t(e,n){var i=r.call(this,e,"track_priority",n)||this;return Object.defineProperties(i,{_enqueuedPriorityUpdates:{value:new Map}}),i.on("ready",function(a){Array.from(i._enqueuedPriorityUpdates.keys()).forEach(function(o){a.publish({type:"track_priority",track:o,subscribe:i._enqueuedPriorityUpdates.get(o)})})}),i}return t.prototype.sendTrackPriorityUpdate=function(e,n,i){if(n!=="subscribe")throw new Error("only subscribe priorities are supported, found: "+n);this._enqueuedPriorityUpdates.set(e,i),this._transport&&this._transport.publish({type:"track_priority",track:e,subscribe:i})},t}(dW),pW=hW,vW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mW=Us,gW=function(r){vW(t,r);function t(e,n){var i=r.call(this,e,"track_switch_off",n)||this;return i.on("ready",function(a){a.on("message",function(o){switch(o.type){case"track_switch_off":i._setTrackSwitchOffUpdates(o.off||[],o.on||[]);break}})}),i}return t.prototype._setTrackSwitchOffUpdates=function(e,n){this.emit("updated",e,n)},t}(mW),yW=gW,_W=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wW=Us,bW=Bs,xW=De.isDeepEqual,W5=2e3,SW=1,kW=function(r){_W(t,r);function t(e,n){var i=r.call(this,e,"render_hints",n)||this;return Object.defineProperties(i,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new bW(function(){i._sendAllHints(),i._responseTimer.setDelay(i._responseTimer.delay*2)},W5,!1)}}),i.on("ready",function(a){a.on("message",function(o){switch(i._log.debug("Incoming: ",o),o.type){case"render_hints":i._processHintResults(o&&o.subscriber&&o.subscriber.hints||[]);break;default:i._log.warn("Unknown message type: ",o.type);break}}),i._sendAllHints()}),i}return t.prototype._sendAllHints=function(){var e=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(n){var i=e._trackSidsToRenderHints.get(n);i.renderDimensions&&(i.isDimensionDirty=!0),"enabled"in i&&(i.isEnabledDirty=!0)}),this._sendHints()},t.prototype._processHintResults=function(e){var n=this;this._responseTimer.clear(),this._responseTimer.setDelay(W5),e.forEach(function(i){i.result!=="OK"&&n._log.debug("Server error processing hint:",i)}),this._sendHints()},t.prototype._sendHints=function(){var e=this;if(!(!this._transport||this._responseTimer.isSet)){var n=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(a){var o=e._trackSidsToRenderHints.get(a);if(o.isEnabledDirty||o.isDimensionDirty){var s={track:a};o.isEnabledDirty&&(s.enabled=o.enabled,o.isEnabledDirty=!1),o.isDimensionDirty&&(s.render_dimensions=o.renderDimensions,o.isDimensionDirty=!1),n.push(s)}}),n.length>0){var i={type:"render_hints",subscriber:{id:SW++,hints:n}};this._log.debug("Outgoing: ",i),this._transport.publish(i),this._responseTimer.start()}}},t.prototype.setTrackHint=function(e,n){var i=this._trackSidsToRenderHints.get(e)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in n&&i.enabled!==n.enabled&&(i.enabled=!!n.enabled,i.isEnabledDirty=!0),n.renderDimensions&&!xW(n.renderDimensions,i.renderDimensions)&&(i.renderDimensions=n.renderDimensions,i.isDimensionDirty=!0),this._trackSidsToRenderHints.set(e,i),this._sendHints()},t.prototype.clearTrackHint=function(e){this._trackSidsToRenderHints.delete(e)},t}(wW),PW=kW,TW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EW=Us,CW=1,LW=function(r){TW(t,r);function t(e,n){var i=r.call(this,e,"publisher_hints",n)||this;return i.on("ready",function(a){i._log.debug("publisher_hints transport ready:",a),a.on("message",function(o){switch(i._log.debug("Incoming: ",o),o.type){case"publisher_hints":o.publisher&&o.publisher.hints&&o.publisher.id&&i._processPublisherHints(o.publisher.hints,o.publisher.id);break;default:i._log.warn("Unknown message type: ",o.type);break}})}),i}return t.prototype.sendTrackReplaced=function(e){var n=e.trackSid;if(this._transport){var i={type:"client_reset",track:n,id:CW++};this._log.debug("Outgoing: ",i),this._transport.publish(i)}},t.prototype.sendHintResponse=function(e){var n=e.id,i=e.hints;if(this._transport){var a={type:"publisher_hints",id:n,hints:i};this._log.debug("Outgoing: ",a),this._transport.publish(a)}},t.prototype._processPublisherHints=function(e,n){try{this.emit("updated",e,n)}catch(i){this._log.error("error processing hints:",i)}},t}(EW),OW=LW,AW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sE=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},NW=j$,RW=F$,jW=OV,IW=UV,MW=GV,DW=nE,FW=uW,BW=CT,UW=pW,$W=yW,VW=PW,zW=OW,$s=De,WW=$s.constants.DEFAULT_SESSION_TIMEOUT_SEC,qW=$s.createBandwidthProfilePayload,HW=$s.defer,GW=$s.difference,og=$s.filterObject,o_=$s.flatMap,q5=$s.oncePerTick,up=oT,KW=Be.createTwilioError,QW=1e4,YW=function(r){AW(t,r);function t(e,n,i,a,o){var s=this;n.options=Object.assign({session_timeout:WW},n.options),o=Object.assign({DominantSpeakerSignaling:NW,TranscriptionSignaling:RW,NetworkQualityMonitor:jW,NetworkQualitySignaling:IW,RecordingSignaling:MW,RemoteParticipantV2:FW,TrackPrioritySignaling:UW,TrackSwitchOffSignaling:$W,bandwidthProfile:null,sessionTimeout:n.options.session_timeout*1e3,statsPublishIntervalMs:QW},o),e.setBandwidthProfile(o.bandwidthProfile);var c=n.options,l=c.signaling_region,u=c.audio_processors,d=u===void 0?[]:u;e.setSignalingRegion(l),d.includes("krisp")&&d.push("rnnoise"),e.setAudioProcessors(d),a.setIceReconnectTimeout(o.sessionTimeout),s=r.call(this,e,n.sid,n.name,o)||this;var v=function(y){return s._getTrackReceiver(y)},p=s._log;return Object.defineProperties(s,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:o.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:e.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:e.networkQualityConfiguration},_peerConnectionManager:{value:a},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:o.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new o.DominantSpeakerSignaling(v,{log:p})},_transcriptionSignaling:{value:new o.TranscriptionSignaling(v,{log:p})},_networkQualitySignaling:{value:new o.NetworkQualitySignaling(v,e.networkQualityConfiguration,{log:p})},_renderHintsSignaling:{value:new VW(v,{log:p})},_publisherHintsSignaling:{value:new zW(v,{log:p})},_trackPrioritySignaling:{value:new o.TrackPrioritySignaling(v,{log:p})},_trackSwitchOffSignaling:{value:new o.TrackSwitchOffSignaling(v,{log:p})},_pendingSwitchOffStates:{value:new Map},_transport:{value:i},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:n.options.media_region||null}}),s._initTrackSwitchOffSignaling(),s._initDominantSpeakerSignaling(),s._initTranscriptionSignaling(),s._initNetworkQualityMonitorSignaling(),s._initPublisherHintSignaling(),JW(s,e),XW(s,a),ZW(s,i),eq(s,i,o.statsPublishIntervalMs),s._update(n),s._peerConnectionManager.setEffectiveAdaptiveSimulcast(s._publisherHintsSignaling.isSetup),s}return Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signalingConnectionState",{get:function(){return this._transport.state==="syncing"?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._deleteTrackReceiverDeferred=function(e){return this._trackReceiverDeferreds.delete(e)},t.prototype._getOrCreateTrackReceiverDeferred=function(e){var n=this._trackReceiverDeferreds.get(e)||HW(),i=this._peerConnectionManager.getTrackReceivers(),a=i.find(function(o){return o.id===e&&o.readyState!=="ended"});return a?n.resolve(a):this._trackReceiverDeferreds.set(e,n),n},t.prototype._addTrackReceiver=function(e){var n=this._getOrCreateTrackReceiverDeferred(e.id);return n.resolve(e),this},t.prototype._disconnect=function(e){var n=r.prototype._disconnect.call(this,e);return n&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(i){i.publishFailed(e||new Error("LocalParticipant disconnected"))}),n},t.prototype._getTrackReceiver=function(e){var n=this;return this._getOrCreateTrackReceiverDeferred(e).promise.then(function(i){return n._deleteTrackReceiverDeferred(e),i})},t.prototype._getInitialTrackSwitchOffState=function(e){var n=this._pendingSwitchOffStates.get(e)||!1;return this._pendingSwitchOffStates.delete(e),n&&this._log.warn("["+e+"] was initially switched off! "),n},t.prototype._getTrackSidsToTrackSignalings=function(){var e=o_(this.participants,function(n){return Array.from(n.tracks)});return new Map(e)},t.prototype._getOrCreateRemoteParticipant=function(e){var n=this,i=this._RemoteParticipantV2,a=this.participants.get(e.sid),o=this;return a||(a=new i(e,function(s){return n._getInitialTrackSwitchOffState(s)},function(s,c){return n._trackPrioritySignaling.sendTrackPriorityUpdate(s,"subscribe",c)},function(s,c){return n._renderHintsSignaling.setTrackHint(s,c)},function(s){return n._renderHintsSignaling.clearTrackHint(s)}),a.on("stateChanged",function s(c){c==="disconnected"&&(a.removeListener("stateChanged",s),o.participants.delete(a.sid),o._disconnectedParticipantRevisions.set(a.sid,a.revision))}),this.connectParticipant(a)),a},t.prototype._getState=function(){return{participant:this.localParticipant.getState()}},t.prototype._maybeAddBandwidthProfile=function(e){var n=this.localParticipant,i=n.bandwidthProfile,a=n.bandwidthProfileRevision;return i&&this._lastBandwidthProfileRevision<a?(this._lastBandwidthProfileRevision=a,Object.assign({bandwidth_profile:qW(i)},e)):e},t.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},t.prototype._publishPeerConnectionState=function(e){this._transport.publish(Object.assign({peer_connections:[e]},this._getState()))},t.prototype._update=function(e){var n=this;if(e.subscribed&&e.subscribed.revision>this._subscribedRevision){this._subscribedRevision=e.subscribed.revision,e.subscribed.tracks.forEach(function(o){o.id?(n._subscriptionFailures.delete(o.sid),n._subscribed.set(o.sid,o.id)):o.error&&!n._subscriptionFailures.has(o.sid)&&n._subscriptionFailures.set(o.sid,o.error)});var i=new Set(e.subscribed.tracks.filter(function(o){return!!o.id}).map(function(o){return o.sid}));this._subscribed.forEach(function(o,s){i.has(s)||n._subscribed.delete(s)})}var a=new Set;return(e.participants||[]).forEach(function(o){if(o.sid!==n.localParticipant.sid){var s=n._disconnectedParticipantRevisions.get(o.sid);if(!(s&&o.revision<=s)){s&&n._disconnectedParticipantRevisions.delete(o.sid);var c=n._getOrCreateRemoteParticipant(o);c.update(o),a.add(c)}}}),e.type==="synced"&&this.participants.forEach(function(o){a.has(o)||o.disconnect()}),tq(this),e.peer_connections&&this._peerConnectionManager.update(e.peer_connections,e.type==="synced"),e.recording&&this.recording.update(e.recording),e.published&&e.published.revision>this._publishedRevision&&(this._publishedRevision=e.published.revision,e.published.tracks.forEach(function(o){o.sid&&n._published.set(o.id,o.sid)}),this.localParticipant.update(e.published)),e.participant&&this.localParticipant.connect(e.participant.sid,e.participant.identity),[this._dominantSpeakerSignaling,this._transcriptionSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(o){var s=o.channel;!o.isSetup&&e.media_signaling&&e.media_signaling[s]&&e.media_signaling[s].transport&&e.media_signaling[s].transport.type==="data-channel"&&o.setup(e.media_signaling[s].transport.label)}),e.type==="warning"&&e.states&&e.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=e.states.revision,this.localParticipant.updateMediaStates(e.states)),this},t.prototype._initPublisherHintSignaling=function(){var e=this;this._publisherHintsSignaling.on("updated",function(i,a){Promise.all(i.map(function(o){return e.localParticipant.setPublisherHint(o.track,o.encodings).then(function(s){return{track:o.track,result:s}})})).then(function(o){e._publisherHintsSignaling.sendHintResponse({id:a,hints:o})})});var n=function(i){i.kind==="video"&&i.trackTransceiver.on("replaced",function(){e._publisherHintsSignaling.sendTrackReplaced({trackSid:i.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(i){return n(i)}),this.localParticipant.on("trackAdded",function(i){return n(i)})},t.prototype._initTrackSwitchOffSignaling=function(){var e=this;this._trackSwitchOffSignaling.on("updated",function(n,i){try{e._log.debug("received trackSwitch: ",{tracksOn:i,tracksOff:n});var a=new Map;i.forEach(function(o){return a.set(o,!0)}),n.forEach(function(o){a.get(o)&&e._log.warn(o+" is DUPLICATED in both tracksOff and tracksOn list"),a.set(o,!1)}),e.participants.forEach(function(o){o.tracks.forEach(function(s){var c=a.get(s.sid);typeof c<"u"&&(s.setSwitchedOff(!c),a.delete(s.sid))})}),a.forEach(function(o,s){return e._pendingSwitchOffStates.set(s,!o)})}catch(o){e._log.error("error processing track switch off:",o)}})},t.prototype._initDominantSpeakerSignaling=function(){var e=this;this._dominantSpeakerSignaling.on("updated",function(){return e.setDominantSpeaker(e._dominantSpeakerSignaling.loudestParticipantSid)})},t.prototype._initTranscriptionSignaling=function(){var e=this;this._transcriptionSignaling.on("transcription",function(n){e.emit("transcription",n)})},t.prototype._initNetworkQualityMonitorSignaling=function(){var e=this;this._networkQualitySignaling.on("ready",function(){var n=new e._NetworkQualityMonitor(e._peerConnectionManager,e._networkQualitySignaling);e._networkQualityMonitor=n,n.on("updated",function(){e.iceConnectionState!=="failed"&&(e.localParticipant.setNetworkQualityLevel(n.level,n.levels),e.participants.forEach(function(i){var a=n.remoteLevels.get(i.sid);a&&i.setNetworkQualityLevel(a.level,a)}))}),n.start()}),this._networkQualitySignaling.on("teardown",function(){return e._teardownNetworkQualityMonitor()})},t.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},t.prototype.getStats=function(){var e=this;return this._peerConnectionManager.getStats().then(function(n){return new Map(Array.from(n).map(function(i){var a=sE(i,2),o=a[0],s=a[1];return[o,Object.assign({},s,{localAudioTrackStats:H5(e,s.localAudioTrackStats),localVideoTrackStats:H5(e,s.localVideoTrackStats),remoteAudioTrackStats:G5(e,s.remoteAudioTrackStats),remoteVideoTrackStats:G5(e,s.remoteVideoTrackStats)})]}))})},t}(DW);function lE(r,t){return t.reduce(function(e,n){var i=r.get(n.trackId);return i?[Object.assign({},n,{trackSid:i})].concat(e):e},[])}function H5(r,t){return lE(r._published,t)}function G5(r,t){var e=new Map(Array.from(r._subscribed.entries()).map(function(n){var i=sE(n,2),a=i[0],o=i[1];return[o,a]}));return lE(e,t)}function JW(r,t){var e=q5(function(){r._publishNewLocalParticipantState()}),n=q5(function(){var i=o_(t.tracks,function(a){return a.trackTransceiver});r._peerConnectionManager.setTrackSenders(i)});t.on("trackAdded",n),t.on("trackRemoved",n),t.on("updated",e),r.on("stateChanged",function i(a){a==="disconnected"&&(t.removeListener("trackAdded",n),t.removeListener("trackRemoved",n),t.removeListener("updated",e),r.removeListener("stateChanged",i),t.disconnect())}),r.on("signalingConnectionStateChanged",function(){var i=r.localParticipant,a=r.signalingConnectionState,o=i.identity,s=i.sid;switch(a){case"connected":i.connect(s,o);break;case"reconnecting":i.reconnecting();break}})}function XW(r,t){t.on("description",function(n){r._publishPeerConnectionState(n)}),t.dequeue("description"),t.on("candidates",function(n){r._publishPeerConnectionState(n)}),t.dequeue("candidates"),t.on("trackAdded",r._addTrackReceiver.bind(r)),t.dequeue("trackAdded"),t.getTrackReceivers().forEach(r._addTrackReceiver,r),t.on("connectionStateChanged",function(){r.emit("connectionStateChanged")}),t.on("iceConnectionStateChanged",function(){r.emit("iceConnectionStateChanged"),r.iceConnectionState==="failed"&&(r.localParticipant.networkQualityLevel!==null&&r.localParticipant.setNetworkQualityLevel(0),r.participants.forEach(function(e){e.networkQualityLevel!==null&&e.setNetworkQualityLevel(0)}))})}function ZW(r,t){t.on("message",r._update.bind(r)),t.on("stateChanged",function e(n,i){n==="disconnected"&&(r.state!=="disconnected"&&r._disconnect(i),t.removeListener("stateChanged",e)),r.emit("signalingConnectionStateChanged")})}function eq(r,t,e){var n=new Map,i=!1,a=setInterval(function(){r.getStats().then(function(o){i=!i,o.forEach(function(s,c){var l=new BW(c,s,!0);t.publishEvent("quality","stats-report","info",{audioTrackStats:l.remoteAudioTrackStats.map(function(p,y){return Q5(p,s.remoteAudioTrackStats[y],n)}),localAudioTrackStats:l.localAudioTrackStats.map(function(p,y){return K5(p,s.localAudioTrackStats[y],n)}),localVideoTrackStats:l.localVideoTrackStats.map(function(p,y){return K5(p,s.localVideoTrackStats[y],n)}),peerConnectionId:l.peerConnectionId,videoTrackStats:l.remoteVideoTrackStats.map(function(p,y){return Q5(p,s.remoteVideoTrackStats[y],n)})});var u=o_(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(p){return l[p].map(function(y){var _=y.ssrc,S=y.trackSid;return S+"+"+_})}),d=GW(Array.from(n.keys()),u);if(d.forEach(function(p){return n.delete(p)}),i){var v=rq(s.activeIceCandidatePair,l.peerConnectionId);t.publishEvent("quality","active-ice-candidate-pair","info",v)}})},function(){})},e);r.on("stateChanged",function o(s){s==="disconnected"&&(clearInterval(a),r.removeListener("stateChanged",o))})}function tq(r){var t=r._getTrackSidsToTrackSignalings();r._subscriptionFailures.forEach(function(e,n){var i=t.get(n);i&&(r._subscriptionFailures.delete(n),i.subscribeFailed(KW(e.code,e.message)))}),t.forEach(function(e){var n=r._subscribed.get(e.sid);(!n||e.isSubscribed&&e.trackTransceiver.id!==n)&&e.setTrackTransceiver(null),n&&r._getTrackReceiver(n).then(function(i){return e.setTrackTransceiver(i)})})}function K5(r,t,e){var n=t.framesEncoded,i=t.packetsSent,a=t.totalEncodeTime,o=t.totalPacketSendDelay,s=Object.assign({},r),c=r.trackSid+"+"+r.ssrc,l=e.get(c)||new Map;if(typeof a=="number"&&typeof n=="number"){var u=l.get("avgEncodeDelay")||new up;u.putSample(a*1e3,n),s.avgEncodeDelay=Math.round(u.get()),l.set("avgEncodeDelay",u)}if(typeof o=="number"&&typeof i=="number"){var d=l.get("avgPacketSendDelay")||new up;d.putSample(o*1e3,i),s.avgPacketSendDelay=Math.round(d.get()),l.set("avgPacketSendDelay",d)}return e.set(c,l),s}function Q5(r,t,e){var n=t.estimatedPlayoutTimestamp,i=t.framesDecoded,a=t.jitterBufferDelay,o=t.jitterBufferEmittedCount,s=t.totalDecodeTime,c=Object.assign({},r),l=r.trackSid+"+"+r.ssrc,u=e.get(l)||new Map;if(typeof n=="number"&&(c.estimatedPlayoutTimestamp=n),typeof i=="number"&&typeof s=="number"){var d=u.get("avgDecodeDelay")||new up;d.putSample(s*1e3,i),c.avgDecodeDelay=Math.round(d.get()),u.set("avgDecodeDelay",d)}if(typeof a=="number"&&typeof o=="number"){var v=u.get("avgJitterBufferDelay")||new up;v.putSample(a*1e3,o),c.avgJitterBufferDelay=Math.round(v.get()),u.set("avgJitterBufferDelay",v)}return e.set(l,u),c}function rq(r,t){return r=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:t,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},og(r||{},null)),r.localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},og(r.localCandidate||{},null)),r.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},og(r.remoteCandidate||{},null)),r}var nq=YW,iq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aq=lc,cE=nP,oq=OT,sq=zt.reconnectBackoffConfig,lq=Bs,s_=zt,cq=s_.SDK_NAME,uq=s_.SDK_VERSION,fq=s_.SDP_FORMAT,fc=De,dq=fc.createBandwidthProfilePayload,hq=fc.createMediaSignalingPayload,pq=fc.createMediaWarningsPayload,vq=fc.createSubscribePayload,mq=fc.getUserAgent,gq=fc.isNonArrayObject,Zp=Be,yq=Zp.createTwilioError,sg=Zp.RoomCompletedError,_q=Zp.SignalingConnectionError,wq=Zp.SignalingServerBusyError,bq=1,lg=2,xq={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},Sq=function(r){iq(t,r);function t(e,n,i,a,o,s){var c=this;return s=Object.assign({Backoff:oq,TwilioConnection:cE,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:mq()},s),c=r.call(this,"connecting",xq)||this,Object.defineProperties(c,{_accessToken:{value:n},_adaptiveSimulcast:{value:s.adaptiveSimulcast},_automaticSubscription:{value:s.automaticSubscription},_bandwidthProfile:{value:s.bandwidthProfile},_dominantSpeaker:{value:s.dominantSpeaker},_receiveTranscriptions:{value:s.receiveTranscriptions},_eventObserver:{value:s.eventObserver,writable:!1},_renderHints:{value:s.renderHints},_iceServersStatus:{value:Array.isArray(s.iceServers)?"overrode":"acquire"},_localParticipant:{value:i},_name:{value:e},_networkQuality:{value:gq(s.networkQuality)||s.networkQuality},_notifyWarnings:{value:s.notifyWarnings},_options:{value:s},_peerConnectionManager:{value:a},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new s.Backoff(sq)},_session:{value:null,writable:!0},_trackPriority:{value:s.trackPriority},_trackSwitchOff:{value:s.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:s.userAgent},_wsServer:{value:o}}),Pq(c),c}return t.prototype._createConnectOrSyncOrDisconnectMessage=function(){if(this.state==="connected")return null;if(this.state==="disconnected")return{session:this._session,type:"disconnect",version:lg};var e={connecting:"connect",syncing:"sync"}[this.state],n={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:e,version:lg};return n.type==="connect"?(n.ice_servers=this._iceServersStatus,n.publisher={name:cq,sdk_version:uq,user_agent:this._userAgent},this._bandwidthProfile&&(n.bandwidth_profile=dq(this._bandwidthProfile)),this._notifyWarnings&&(n.participant.media_warnings=pq(this._notifyWarnings)),n.media_signaling=hq(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints,this._receiveTranscriptions),n.subscribe=vq(this._automaticSubscription),n.format=fq,n.token=this._accessToken):n.type==="sync"?(n.session=this._session,n.token=this._accessToken):n.type==="update"&&(n.session=this._session),n},t.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:bq}},t.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var e=this._createConnectOrSyncOrDisconnectMessage();e&&this._twilioConnection.sendMessage(e)},t.prototype.disconnect=function(e){return this.state!=="disconnected"?(this.preempt("disconnected",null,[e]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0):!1},t.prototype.publish=function(e){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:lg},e)),!0;case"connecting":case"syncing":return this._updatesToSend.push(e),!0;case"disconnected":default:return!1}},t.prototype.publishEvent=function(e,n,i,a){this._eventObserver.emit("event",{group:e,name:n,level:i,payload:a})},t.prototype.sync=function(){return this.state==="connected"?(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0):!1},t.prototype._setSession=function(e,n){this._session=e,this._sessionTimeoutMS=n*1e3},t.prototype._getReconnectTimer=function(){var e=this;return this._sessionTimeoutMS===0?null:(this._sessionTimer||(this._sessionTimer=new lq(function(){e._sessionTimer&&(e._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(n){e._reconnectBackoff.backoff(n)}))},t.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},t}(aq);function Y5(r){return Array.from(r.reduce(function(t,e){var n=t.get(e.id)||e;return(!n.description&&e.description||n.description&&e.description&&e.description.revision>n.description.revision)&&(n.description=e.description),(!n.ice&&e.ice||n.ice&&e.ice&&e.ice.revision>n.ice.revision)&&(n.ice=e.ice),t.set(n.id,n),t},new Map).values())}function kq(r){return r.reduce(function(t,e){return(!t.participant&&e.participant||t.participant&&e.participant&&e.participant.revision>t.participant.revision)&&(t.participant=e.participant),!t.peer_connections&&e.peer_connections?t.peer_connections=Y5(e.peer_connections):t.peer_connections&&e.peer_connections&&(t.peer_connections=Y5(t.peer_connections.concat(e.peer_connections))),t},{})}function Pq(r){function t(){if(r.state!=="disconnected"){r._twilioConnection&&r._twilioConnection.removeListener("message",n);var c=r._iceServersStatus,l=r._options,u=r._wsServer,d=r.state,v=l.TwilioConnection,p=new v(u,Object.assign({helloBody:d==="connecting"&&c==="acquire"?r._createIceMessage():r._createConnectOrSyncOrDisconnectMessage()},l));p.once("close",function(y){y===v.CloseReason.LOCAL?e():e(new Error(y))}),p.on("message",n),r._twilioConnection=p}}function e(c){if(r.state!=="disconnected"){if(!c){r.disconnect();return}var l=r._getReconnectTimer();if(!l){var u=c.message===cE.CloseReason.BUSY?new wq:new _q;r.disconnect(u);return}r.state==="connected"&&r.preempt("syncing"),l.then(t)}}function n(c){if(r.state!=="disconnected"){if(c.type==="error"){r.disconnect(yq(c.code,c.message));return}switch(r.state){case"connected":switch(c.type){case"connected":case"synced":case"update":case"warning":r.emit("message",c);return;case"disconnected":r.disconnect(c.status==="completed"?new sg:null);return;default:return}case"connecting":switch(c.type){case"iced":r._options.onIced(c.ice_servers).then(function(){r._sendConnectOrSyncOrDisconnectMessage()});return;case"connected":r._setSession(c.session,c.options.session_timeout),r.emit("connected",c),r.preempt("connected");return;case"synced":case"update":r._updatesReceived.push(c);return;case"disconnected":r.disconnect(c.status==="completed"?new sg:null);return;default:return}case"syncing":switch(c.type){case"connected":case"update":r._updatesReceived.push(c);return;case"synced":r._clearReconnectTimer(),r.emit("message",c),r.preempt("connected");return;case"disconnected":r.disconnect(c.status==="completed"?new sg:null);return;default:return}default:return}}}r.on("stateChanged",function c(l){switch(l){case"connected":{var u=r._updatesToSend.splice(0);u.length&&r.publish(kq(u)),r._updatesReceived.splice(0).forEach(function(d){return r.emit("message",d)});return}case"disconnected":r._twilioConnection.removeListener("message",n),r.removeListener("stateChanged",c);return;case"syncing":return;default:return}});var i=r._options,a=r._iceServersStatus,o=i.iceServers,s=i.onIced;a==="overrode"?s(o).then(t):t()}var Tq=Sq,Eq=G1,Cq=T$,Lq=nq,Oq=Tq,uE=Be,Aq=uE.SignalingConnectionDisconnectedError,Nq=uE.SignalingIncomingMessageInvalidError,fE=De,Rq=fE.flatMap,jq=fE.createRoomConnectEventPayload;function Iq(r,t,e,n,i,a){a=Object.assign({PeerConnectionManager:Cq,RoomV2:Lq,Transport:Oq},a);var o=i.video[0]&&i.video[0].adaptiveSimulcast===!0,s=a.PeerConnectionManager,c=a.RoomV2,l=a.Transport,u=a.iceServers,d=a.log,v=new s(n,i,a),p=Rq(e.tracks,function(w){return[w.trackTransceiver]});v.setTrackSenders(p);var y=new Error("Canceled"),_,S=new Eq(function(w,x,k){var T=function(G){return k()?(x(y),Promise.reject(y)):(d.debug("Got ICE servers:",G),a.iceServers=G,v.setConfiguration(a),v.createAndOffer().then(function(){if(k())throw x(y),y;d.debug("createAndOffer() succeeded."),v.dequeue("description")}).catch(function(ee){throw d.error("createAndOffer() failed:",ee),x(ee),ee}))},R=a.automaticSubscription,U=a.bandwidthProfile,$=a.dominantSpeaker,F=a.receiveTranscriptions,M=a.environment,J=a.eventObserver,O=a.loggerName,N=a.logLevel,q=a.name,j=a.networkMonitor,Z=a.networkQuality,X=a.notifyWarnings,se=a.realm,H=a.sdpSemantics,ie=!!U,fe=!!U,ne=!!U&&(a.clientTrackSwitchOffControl!=="disabled"||a.contentPreferencesMode!=="disabled"),E=Object.assign({adaptiveSimulcast:o,automaticSubscription:R,dominantSpeaker:$,receiveTranscriptions:F,environment:M,eventObserver:J,loggerName:O,logLevel:N,networkMonitor:j,networkQuality:Z,notifyWarnings:X,iceServers:u,onIced:T,realm:se,renderHints:ne,sdpSemantics:H,trackPriority:ie,trackSwitchOff:fe},U?{bandwidthProfile:U}:{});_=new l(q,r,e,v,t,E);var W=jq(a);J.emit("event",W),_.once("connected",function(G){if(d.debug("Transport connected:",G),k()){x(y);return}var ee=G.participant;if(!ee){x(new Nq);return}w(new c(e,G,_,v,a))}),_.once("stateChanged",function(G,ee){G==="disconnected"?(_=null,x(ee||new Aq)):d.debug("Transport state changed:",G)})},function(){_&&(_.disconnect(),_=null)});return S.catch(function(){_&&(_.disconnect(),_=null),v.close()}),S}var Mq=Iq,Dq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fq=a_,Bq=function(r){Dq(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),e}return t.prototype.addTrack=function(e,n,i,a){a===void 0&&(a=null);var o=this._createLocalTrackPublicationSignaling(e,n,i,a);return this._trackSendersToPublications.set(e,o),this._publicationsToTrackSenders.set(o,e),r.prototype.addTrack.call(this,o),this},t.prototype.getPublication=function(e){return this._trackSendersToPublications.get(e)||null},t.prototype.getSender=function(e){return this._publicationsToTrackSenders.get(e)||null},t.prototype.removeTrack=function(e){var n=this._trackSendersToPublications.get(e);if(!n)return null;this._trackSendersToPublications.delete(e),this._publicationsToTrackSenders.delete(n);var i=r.prototype.removeTrack.call(this,n);return i&&n.stop(),n},t}(Fq),Uq=Bq,$q=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vq=oE,zq=function(r){$q(t,r);function t(e,n,i){var a=this,o=e.clone();e.kind!=="data"&&(o.track.enabled=e.track.enabled),e=o;var s=e.kind==="data"?!0:e.track.enabled;return a=r.call(this,n,e.kind,s,i)||this,a.setTrackTransceiver(e),Object.defineProperties(a,{_updatedPriority:{value:i,writable:!0},id:{enumerable:!0,value:e.id}}),a}return Object.defineProperty(t.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),t.prototype.enable=function(e){return e=typeof e=="boolean"?e:!0,this.trackTransceiver.track.enabled=e,r.prototype.enable.call(this,e)},t.prototype.publishFailed=function(e){return Wq(this,e)&&this.emit("updated"),this},t.prototype.setPriority=function(e){return this._updatedPriority!==e&&(this._updatedPriority=e,this.emit("updated")),this},t.prototype.setSid=function(e){return this._error?this:r.prototype.setSid.call(this,e)},t.prototype.stop=function(){this.trackTransceiver.stop()},t}(Vq);function Wq(r,t){return r._sid!==null||r._error?!1:(r._error=t,!0)}var qq=zq,Hq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Gq=qq,Kq=G4,Qq=Be.createTwilioError,Yq=function(r){Hq(t,r);function t(e,n,i,a,o){var s=r.call(this,e,n,i)||this;return Object.defineProperties(s,{_log:{value:o.log.createLog("default",s)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:a}}),s}return t.prototype.getState=function(){var e={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(e.audio_processor=this._noiseCancellationVendor),e},t.prototype.toString=function(){return"[LocalTrackPublicationV2: "+this.sid+"]"},t.prototype.update=function(e){switch(e.state){case"ready":this.setSid(e.sid);break;case"failed":{var n=e.error;this.publishFailed(Qq(n.code,n.message));break}}return this},t.prototype.updateMediaStates=function(e){if(!e||!e.recordings||this._mediaStates.recordings===e.recordings)return this;switch(this._mediaStates.recordings=e.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",Kq.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: "+this._mediaStates.recordings);break}return this},t}(Gq),Jq=Yq,Xq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zq=Uq,eH=Jq,tH=zt.DEFAULT_LOG_LEVEL,rH=Da,dE=De,nH=dE.buildLogLevels,iH=dE.isDeepEqual,aH=function(r){Xq(t,r);function t(e,n,i){var a=this;i=Object.assign({logLevel:tH,LocalTrackPublicationV2:eH},i),a=r.call(this)||this;var o=nH(i.logLevel);return Object.defineProperties(a,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:e},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:i.LocalTrackPublicationV2},_log:{value:i.log?i.log.createLog("default",a):new rH("default",a,o,i.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:n},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),a}return t.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},t.prototype.setSignalingRegion=function(e){this._signalingRegion||(this._signalingRegion=e)},t.prototype.setBandwidthProfile=function(e){iH(this._bandwidthProfile,e)||(this._bandwidthProfile=JSON.parse(JSON.stringify(e)),this._bandwidthProfileRevision++,this.didUpdate())},t.prototype.setAudioProcessors=function(e){this.audioProcessors=e},t.prototype.getParameters=function(){return this._encodingParameters},t.prototype.setParameters=function(e){return this._encodingParameters.update(e),this},t.prototype.update=function(e){return this._publishedRevision>=e.revision?this:(this._publishedRevision=e.revision,e.tracks.forEach(function(n){var i=this.tracks.get(n.id);i&&i.update(n)},this),this)},t.prototype.updateMediaStates=function(e){return!e||!e.tracks?this:(Array.from(this.tracks.values()).forEach(function(n){var i=e.tracks[n.sid];i&&n.updateMediaStates(i)}),this)},t.prototype._createLocalTrackPublicationSignaling=function(e,n,i,a){return new this._LocalTrackPublicationV2(e,n,i,a,{log:this._log})},t.prototype.addTrack=function(e,n,i,a){var o=this;r.prototype.addTrack.call(this,e,n,i,a);var s=this.getPublication(e),c=s.isEnabled,l=s.updatedPriority,u=function(){(c!==s.isEnabled||l!==s.updatedPriority)&&(o.didUpdate(),c=s.isEnabled,l=s.updatedPriority)};return s.on("updated",u),this._removeListener(s),this._removeListeners.set(s,function(){return s.removeListener("updated",u)}),this.didUpdate(),this},t.prototype._removeListener=function(e){var n=this._removeListeners.get(e);n&&n()},t.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(e){return e.getState()})}},t.prototype.didUpdate=function(){this._revision++,this.emit("updated")},t.prototype.removeTrack=function(e){var n=r.prototype.removeTrack.call(this,e);return n&&(e.removeClone(n.trackTransceiver),this._removeListener(n),this.didUpdate()),n},t.prototype.setNetworkQualityConfiguration=function(e){this.networkQualityConfiguration.update(e)},t.prototype.setPublisherHint=function(e,n){var i=Array.from(this.tracks.values()).find(function(a){return a.sid===e});return i?i.trackTransceiver.setPublisherHint(n):(this._log.warn("track:"+e+" not found"),Promise.resolve("UNKNOWN_TRACK"))},t}(Zq),oH=aH,sH=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),lH=a_,cH=nE,uH=lc,fH={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},dH=function(r){sH(t,r);function t(){return r.call(this,"closed",fH)||this}return t.prototype._close=function(e){return this.transition("closing",e),this.transition("closed",e),Promise.resolve(this)},t.prototype._connect=function(e,n,i,a,o){e.connect("PA00000000000000000000000000000000","test");var s="RM00000000000000000000000000000000",c=Promise.resolve(new cH(e,s,o));return c.cancel=function(){},c},t.prototype._open=function(e){return this.transition("opening",e),this.transition("open",e),Promise.resolve(this)},t.prototype.close=function(){var e=this;return this.bracket("close",function(n){switch(e.state){case"closed":return e;case"open":return e._close(n);default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},t.prototype.connect=function(e,n,i,a,o){var s=this;return this.bracket("connect",function c(l){switch(s.state){case"closed":return s._open(l).then(c.bind(null,l));case"open":return s.releaseLockCompletely(l),s._connect(e,n,i,a,o);default:throw new Error('Unexpected Signaling state "'+s.state+'"')}})},t.prototype.createLocalParticipantSignaling=function(){return new lH},t.prototype.open=function(){var e=this;return this.bracket("open",function(n){switch(e.state){case"closed":return e._open(n);case"open":return e;default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},t}(uH),hH=dH,pH=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vH=Mq,mH=oH,gH=hH,yH=function(r){pH(t,r);function t(e,n){var i=this;return n=Object.assign({createCancelableRoomSignalingPromise:vH},n),i=r.call(this)||this,Object.defineProperties(i,{_createCancelableRoomSignalingPromise:{value:n.createCancelableRoomSignalingPromise},_options:{value:n},_wsServer:{value:e}}),i}return t.prototype._connect=function(e,n,i,a,o){return o=Object.assign({},this._options,o),this._createCancelableRoomSignalingPromise.bind(null,n,this._wsServer,e,i,a,o)},t.prototype.createLocalParticipantSignaling=function(e,n){return new mH(e,n)},t}(gH),_H=yH,wH=Ds.MediaStreamTrack,l_=Dt,bH=l_.guessBrowser,xH=l_.guessBrowserVersion,SH=l_.isCodecSupported,kH=nD,PH=sD,TH=cB,EH=cT,CH=fB,c_=Ul,LH=c_.LocalAudioTrack,OH=c_.LocalDataTrack,AH=c_.LocalVideoTrack,NH=mB,RH=l9,jH=_H,ev=De,IH=ev.asLocalTrack,MH=ev.buildLogLevels,DH=ev.filterObject,J5=ev.isNonArrayObject,Fa=zt,FH=Fa.DEFAULT_ENVIRONMENT,BH=Fa.DEFAULT_LOG_LEVEL,UH=Fa.DEFAULT_LOGGER_NAME,$H=Fa.DEFAULT_REALM,VH=Fa.DEFAULT_REGION,zH=Fa.WS_SERVER,WH=Fa.SDK_NAME,qH=Fa.SDK_VERSION,Dd=Fa.typeErrors,cs=G1,HH=sT,GH=Da,KH=hf.validateBandwidthProfile,cg=bH()==="safari"&&xH(),QH=0,X5=!1,hE=!1;if(cg){var Z5=cg.major,YH=cg.minor;hE=Z5<12||Z5===12&&YH<1}var JH=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),XH=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function ZH(r,t){if(typeof t>"u"&&(t={}),!J5(t))return cs.reject(Dd.INVALID_TYPE("options","object"));var e=t.Log||GH,n=t.loggerName||UH,i=t.logLevel||BH,a=MH(i),o="[connect #"+ ++QH+"]",s;try{s=new e("default",o,a,n)}catch(U){return cs.reject(U)}eb(t,s,JH);var c=t.preferredVideoCodecs==="auto";if(c&&(t.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),t.maxVideoBitrate&&c)return s.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),cs.reject(Dd.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));t=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,receiveTranscriptions:!1,environment:FH,eventListener:null,insights:!0,LocalAudioTrack:LH,LocalDataTrack:OH,LocalParticipant:TH,LocalVideoTrack:AH,Log:e,MediaStreamTrack:wH,loggerName:n,logLevel:i,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:$H,region:VH,signaling:jH},DH(t));var l={};typeof t.wsServerInsights=="string"&&(l.gateway=t.wsServerInsights);var u=t.insights?EH:CH,d=new u(r,WH,qH,t.environment,t.realm,l),v=zH(t.environment,t.region),p=new HH(d,Date.now(),s,t.eventListener);if(t=Object.assign({eventObserver:p,wsServer:v},t),t.log=s,hE&&!X5&&s.logLevel!=="error"&&s.logLevel!=="off"&&(X5=!0,s.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),typeof r!="string")return cs.reject(Dd.INVALID_TYPE("token","string"));var y=Object.assign({},t);if(delete y.name,"tracks"in t){if(!Array.isArray(t.tracks))return cs.reject(Dd.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{t.tracks=t.tracks.map(function(U){return IH(U,y)})}catch(U){return cs.reject(U)}}var _=KH(t.bandwidthProfile);if(_)return cs.reject(_);t.clientTrackSwitchOffControl="disabled",t.contentPreferencesMode="disabled",t.bandwidthProfile&&(t.clientTrackSwitchOffControl="auto",t.contentPreferencesMode="auto",t.bandwidthProfile.video&&(eb(t.bandwidthProfile.video,s,XH),"maxTracks"in t.bandwidthProfile.video?t.clientTrackSwitchOffControl="disabled":t.bandwidthProfile.video.clientTrackSwitchOffControl==="manual"?t.clientTrackSwitchOffControl="manual":t.clientTrackSwitchOffControl="auto","renderDimensions"in t.bandwidthProfile.video?t.contentPreferencesMode="disabled":t.bandwidthProfile.video.contentPreferencesMode==="manual"?t.contentPreferencesMode="manual":t.contentPreferencesMode="auto"));var S=t.signaling,w=new S(t.wsServer,t);s.info("Connecting to a Room"),s.debug("Options:",t);var x=new PH({maxAudioBitrate:t.maxAudioBitrate,maxVideoBitrate:t.maxVideoBitrate},c),k={audio:t.preferredAudioCodecs.map(tb),video:t.preferredVideoCodecs.map(tb)},T=new NH(J5(t.networkQuality)?t.networkQuality:{});["audio","video"].forEach(function(U){return k[U].forEach(function($){var F=$.codec;return SH(F,U).then(function(M){return!M&&s.warn("The preferred "+U+' codec "'+F+'" will be ignored as it is not supported by the browser.')})})});var R=kH(nG.bind(null,t),eG.bind(null,w,s,x,T,t),rG.bind(null,r,t,w,x,k),tG.bind(null,t));return R.then(function(U){return d.connect(U.sid,U.localParticipant.sid),s.info("Connected to Room:",U.toString()),s.info("Room name:",U.name),s.debug("Room:",U),U.once("disconnected",function(){return d.disconnect()}),U},function(U){d.disconnect(),R._isCanceled?s.info("Attempt to connect to a Room was canceled"):s.info("Error while connecting to a Room:",U)}),R}function eb(r,t,e){e.forEach(function(n){var i=n.didWarn,a=n.name,o=n.newName,s=n.shouldDelete;a in r&&typeof r[a]<"u"&&(o&&s&&(r[o]=r[a]),s&&delete r[a],!i&&!["error","off"].includes(t.level)&&(t.warn('The ConnectOptions "'+a+'" is '+(o?'deprecated and scheduled for removal. Please use "'+o+'" instead.':"no longer applicable and will be ignored.")),n.didWarn=!0))})}function eG(r,t,e,n,i,a){var o=r.createLocalParticipantSignaling(e,n);return t.debug("Creating a new LocalParticipant:",o),new i.LocalParticipant(o,a,i)}function tG(r,t,e){var n=new RH(t,e,r),i=r.log;return i.debug("Creating a new Room:",n),e.on("stateChanged",function a(o){o==="disconnected"&&(i.info("Disconnected from Room:",n.toString()),e.removeListener("stateChanged",a))}),n}function rG(r,t,e,n,i,a){return t.log.debug("Creating a new RoomSignaling"),e.connect(a._signaling,r,n,i,t)}function nG(r,t){var e=r.log;return r.shouldStopLocalTracks=!r.tracks,r.shouldStopLocalTracks?e.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(e.info("Getting LocalTracks"),e.debug("Options:",r)),r.createLocalTracks(r).then(function(i){var a=t(i);return a.catch(function(){r.shouldStopLocalTracks&&(e.info("The automatically acquired LocalTracks will now be stopped"),i.forEach(function(s){s.stop()}))}),a})}function tb(r){var t=typeof r=="string"?{codec:r}:r;switch(t.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},t);case"vp8":return Object.assign({simulcast:!1},t);default:return t}}var iG=ZH,pE=zt,aG=pE.DEFAULT_LOG_LEVEL,oG=pE.DEFAULT_LOGGER_NAME;function vE(r,t){t=Object.assign({loggerName:oG,logLevel:aG},t);var e={};e.loggerName=t.loggerName,e.logLevel=t.logLevel,delete t.loggerName,delete t.logLevel;var n=["getUserMedia","enumerateDevices","MediaStream","mapMediaElement","disposeMediaElement"];n.forEach(function(a){a in t&&(e[a]=t[a],delete t[a])});var i=t.createLocalTracks;return delete t.createLocalTracks,e[r]=Object.keys(t).length>0?t:!0,i(e).then(function(a){return a[0]})}function sG(r){return vE("audio",r)}function lG(r){return vE("video",r)}var rb={audio:sG,video:lG},mE=Dt,cG=mE.guessBrowser,uG=mE.support,fG=An.getSdpFormat,mf=Fs,dG=mf.isAndroid,hG=mf.isMobile,pG=mf.isNonChromiumEdge,vG=mf.rebrandedChromeBrowser,mG=mf.mobileWebKitBrowser,gG=["crios","edg","edge","electron","headlesschrome"],yG=["chrome","firefox"],_G=["chrome","safari"],wG=[];function bG(){var r=cG();if(!r)return!1;var t=vG(r),e=mG(r),n=dG()?yG:_G;return!!r&&uG()&&fG()==="unified"&&(!t||gG.includes(t))&&!pG(r)&&(!e||wG.includes(e))&&(!hG()||n.includes(r))}var xG=bG,SG=T1.exports,tf=A&&A.__assign||function(){return tf=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},tf.apply(this,arguments)};Object.defineProperty(SG,"__esModule",{value:!0});var tv=Mp,kG=ec,Ba={connect:iG,createLocalAudioTrack:rb.audio,createLocalVideoTrack:rb.video,isSupported:xG(),version:D4.version,Logger:M4,LocalAudioTrack:Ul.LocalAudioTrack,LocalDataTrack:Ul.LocalDataTrack,LocalVideoTrack:Ul.LocalVideoTrack};function PG(r,t){var e=tf({createLocalTracks:tv.createLocalTracks},t);return Ba.connect(r,e)}function TG(r){var t=tf({createLocalTracks:tv.createLocalTracks},r);return Ba.createLocalAudioTrack(t)}function EG(r){var t=tf({createLocalTracks:tv.createLocalTracks},r);return Ba.createLocalVideoTrack(t)}var CG=Ba.isSupported,LG=Ba.version,OG=Ba.Logger,AG=Ba.LocalAudioTrack,NG=Ba.LocalVideoTrack,RG=Ba.LocalDataTrack;T1.exports={connect:PG,createLocalAudioTrack:TG,createLocalVideoTrack:EG,createLocalTracks:tv.createLocalTracks,runPreflight:kG.runPreflight,isSupported:CG,version:LG,Logger:OG,LocalAudioTrack:AG,LocalVideoTrack:NG,LocalDataTrack:RG};var jG=T1.exports;const IG=iS(jG);function gE(r,t){return function(){return r.apply(t,arguments)}}const{toString:MG}=Object.prototype,{getPrototypeOf:u_}=Object,{iterator:rv,toStringTag:yE}=Symbol,nv=(r=>t=>{const e=MG.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Ri=r=>(r=r.toLowerCase(),t=>nv(t)===r),iv=r=>t=>typeof t===r,{isArray:dc}=Array,nc=iv("undefined");function gf(r){return r!==null&&!nc(r)&&r.constructor!==null&&!nc(r.constructor)&&Ln(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const _E=Ri("ArrayBuffer");function DG(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&_E(r.buffer),t}const FG=iv("string"),Ln=iv("function"),wE=iv("number"),yf=r=>r!==null&&typeof r=="object",BG=r=>r===!0||r===!1,wh=r=>{if(nv(r)!=="object")return!1;const t=u_(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(yE in r)&&!(rv in r)},UG=r=>{if(!yf(r)||gf(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},$G=Ri("Date"),VG=Ri("File"),zG=Ri("Blob"),WG=Ri("FileList"),qG=r=>yf(r)&&Ln(r.pipe),HG=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||Ln(r.append)&&((t=nv(r))==="formdata"||t==="object"&&Ln(r.toString)&&r.toString()==="[object FormData]"))},GG=Ri("URLSearchParams"),[KG,QG,YG,JG]=["ReadableStream","Request","Response","Headers"].map(Ri),XG=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _f(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),dc(r))for(n=0,i=r.length;n<i;n++)t.call(null,r[n],n,r);else{if(gf(r))return;const a=e?Object.getOwnPropertyNames(r):Object.keys(r),o=a.length;let s;for(n=0;n<o;n++)s=a[n],t.call(null,r[s],s,r)}}function bE(r,t){if(gf(r))return null;t=t.toLowerCase();const e=Object.keys(r);let n=e.length,i;for(;n-- >0;)if(i=e[n],t===i.toLowerCase())return i;return null}const _s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xE=r=>!nc(r)&&r!==_s;function ay(){const{caseless:r,skipUndefined:t}=xE(this)&&this||{},e={},n=(i,a)=>{const o=r&&bE(e,a)||a;wh(e[o])&&wh(i)?e[o]=ay(e[o],i):wh(i)?e[o]=ay({},i):dc(i)?e[o]=i.slice():(!t||!nc(i))&&(e[o]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&_f(arguments[i],n);return e}const ZG=(r,t,e,{allOwnKeys:n}={})=>(_f(t,(i,a)=>{e&&Ln(i)?r[a]=gE(i,e):r[a]=i},{allOwnKeys:n}),r),eK=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),tK=(r,t,e,n)=>{r.prototype=Object.create(t.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},rK=(r,t,e,n)=>{let i,a,o;const s={};if(t=t||{},r==null)return t;do{for(i=Object.getOwnPropertyNames(r),a=i.length;a-- >0;)o=i[a],(!n||n(o,r,t))&&!s[o]&&(t[o]=r[o],s[o]=!0);r=e!==!1&&u_(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},nK=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const n=r.indexOf(t,e);return n!==-1&&n===e},iK=r=>{if(!r)return null;if(dc(r))return r;let t=r.length;if(!wE(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},aK=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&u_(Uint8Array)),oK=(r,t)=>{const n=(r&&r[rv]).call(r);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(r,a[0],a[1])}},sK=(r,t)=>{let e;const n=[];for(;(e=r.exec(t))!==null;)n.push(e);return n},lK=Ri("HTMLFormElement"),cK=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,i){return n.toUpperCase()+i}),nb=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),uK=Ri("RegExp"),SE=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),n={};_f(e,(i,a)=>{let o;(o=t(i,a,r))!==!1&&(n[a]=o||i)}),Object.defineProperties(r,n)},fK=r=>{SE(r,(t,e)=>{if(Ln(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=r[e];if(Ln(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},dK=(r,t)=>{const e={},n=i=>{i.forEach(a=>{e[a]=!0})};return dc(r)?n(r):n(String(r).split(t)),e},hK=()=>{},pK=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function vK(r){return!!(r&&Ln(r.append)&&r[yE]==="FormData"&&r[rv])}const mK=r=>{const t=new Array(10),e=(n,i)=>{if(yf(n)){if(t.indexOf(n)>=0)return;if(gf(n))return n;if(!("toJSON"in n)){t[i]=n;const a=dc(n)?[]:{};return _f(n,(o,s)=>{const c=e(o,i+1);!nc(c)&&(a[s]=c)}),t[i]=void 0,a}}return n};return e(r,0)},gK=Ri("AsyncFunction"),yK=r=>r&&(yf(r)||Ln(r))&&Ln(r.then)&&Ln(r.catch),kE=((r,t)=>r?setImmediate:t?((e,n)=>(_s.addEventListener("message",({source:i,data:a})=>{i===_s&&a===e&&n.length&&n.shift()()},!1),i=>{n.push(i),_s.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ln(_s.postMessage)),_K=typeof queueMicrotask<"u"?queueMicrotask.bind(_s):typeof process<"u"&&process.nextTick||kE,wK=r=>r!=null&&Ln(r[rv]),ge={isArray:dc,isArrayBuffer:_E,isBuffer:gf,isFormData:HG,isArrayBufferView:DG,isString:FG,isNumber:wE,isBoolean:BG,isObject:yf,isPlainObject:wh,isEmptyObject:UG,isReadableStream:KG,isRequest:QG,isResponse:YG,isHeaders:JG,isUndefined:nc,isDate:$G,isFile:VG,isBlob:zG,isRegExp:uK,isFunction:Ln,isStream:qG,isURLSearchParams:GG,isTypedArray:aK,isFileList:WG,forEach:_f,merge:ay,extend:ZG,trim:XG,stripBOM:eK,inherits:tK,toFlatObject:rK,kindOf:nv,kindOfTest:Ri,endsWith:nK,toArray:iK,forEachEntry:oK,matchAll:sK,isHTMLForm:lK,hasOwnProperty:nb,hasOwnProp:nb,reduceDescriptors:SE,freezeMethods:fK,toObjectSet:dK,toCamelCase:cK,noop:hK,toFiniteNumber:pK,findKey:bE,global:_s,isContextDefined:xE,isSpecCompliantForm:vK,toJSONObject:mK,isAsyncFn:gK,isThenable:yK,setImmediate:kE,asap:_K,isIterable:wK};function _t(r,t,e,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}ge.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.status}}});const PE=_t.prototype,TE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{TE[r]={value:r}});Object.defineProperties(_t,TE);Object.defineProperty(PE,"isAxiosError",{value:!0});_t.from=(r,t,e,n,i,a)=>{const o=Object.create(PE);ge.toFlatObject(r,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError");const s=r&&r.message?r.message:"Error",c=t==null&&r?r.code:t;return _t.call(o,s,c,e,n,i),r&&o.cause==null&&Object.defineProperty(o,"cause",{value:r,configurable:!0}),o.name=r&&r.name||"Error",a&&Object.assign(o,a),o};const bK=null;function oy(r){return ge.isPlainObject(r)||ge.isArray(r)}function EE(r){return ge.endsWith(r,"[]")?r.slice(0,-2):r}function ib(r,t,e){return r?r.concat(t).map(function(i,a){return i=EE(i),!e&&a?"["+i+"]":i}).join(e?".":""):t}function xK(r){return ge.isArray(r)&&!r.some(oy)}const SK=ge.toFlatObject(ge,{},null,function(t){return/^is[A-Z]/.test(t)});function av(r,t,e){if(!ge.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=ge.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,S){return!ge.isUndefined(S[_])});const n=e.metaTokens,i=e.visitor||u,a=e.dots,o=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(t);if(!ge.isFunction(i))throw new TypeError("visitor must be a function");function l(y){if(y===null)return"";if(ge.isDate(y))return y.toISOString();if(ge.isBoolean(y))return y.toString();if(!c&&ge.isBlob(y))throw new _t("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(y)||ge.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,_,S){let w=y;if(y&&!S&&typeof y=="object"){if(ge.endsWith(_,"{}"))_=n?_:_.slice(0,-2),y=JSON.stringify(y);else if(ge.isArray(y)&&xK(y)||(ge.isFileList(y)||ge.endsWith(_,"[]"))&&(w=ge.toArray(y)))return _=EE(_),w.forEach(function(k,T){!(ge.isUndefined(k)||k===null)&&t.append(o===!0?ib([_],T,a):o===null?_:_+"[]",l(k))}),!1}return oy(y)?!0:(t.append(ib(S,_,a),l(y)),!1)}const d=[],v=Object.assign(SK,{defaultVisitor:u,convertValue:l,isVisitable:oy});function p(y,_){if(!ge.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+_.join("."));d.push(y),ge.forEach(y,function(w,x){(!(ge.isUndefined(w)||w===null)&&i.call(t,w,ge.isString(x)?x.trim():x,_,v))===!0&&p(w,_?_.concat(x):[x])}),d.pop()}}if(!ge.isObject(r))throw new TypeError("data must be an object");return p(r),t}function ab(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function f_(r,t){this._pairs=[],r&&av(r,this,t)}const CE=f_.prototype;CE.append=function(t,e){this._pairs.push([t,e])};CE.toString=function(t){const e=t?function(n){return t.call(this,n,ab)}:ab;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function kK(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function LE(r,t,e){if(!t)return r;const n=e&&e.encode||kK;ge.isFunction(e)&&(e={serialize:e});const i=e&&e.serialize;let a;if(i?a=i(t,e):a=ge.isURLSearchParams(t)?t.toString():new f_(t,e).toString(n),a){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+a}return r}class ob{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ge.forEach(this.handlers,function(n){n!==null&&t(n)})}}const OE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PK=typeof URLSearchParams<"u"?URLSearchParams:f_,TK=typeof FormData<"u"?FormData:null,EK=typeof Blob<"u"?Blob:null,CK={isBrowser:!0,classes:{URLSearchParams:PK,FormData:TK,Blob:EK},protocols:["http","https","file","blob","url","data"]},d_=typeof window<"u"&&typeof document<"u",sy=typeof navigator=="object"&&navigator||void 0,LK=d_&&(!sy||["ReactNative","NativeScript","NS"].indexOf(sy.product)<0),OK=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",AK=d_&&window.location.href||"http://localhost",NK=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:d_,hasStandardBrowserEnv:LK,hasStandardBrowserWebWorkerEnv:OK,navigator:sy,origin:AK},Symbol.toStringTag,{value:"Module"})),ln={...NK,...CK};function RK(r,t){return av(r,new ln.classes.URLSearchParams,{visitor:function(e,n,i,a){return ln.isNode&&ge.isBuffer(e)?(this.append(n,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function jK(r){return ge.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function IK(r){const t={},e=Object.keys(r);let n;const i=e.length;let a;for(n=0;n<i;n++)a=e[n],t[a]=r[a];return t}function AE(r){function t(e,n,i,a){let o=e[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),c=a>=e.length;return o=!o&&ge.isArray(i)?i.length:o,c?(ge.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s):((!i[o]||!ge.isObject(i[o]))&&(i[o]=[]),t(e,n,i[o],a)&&ge.isArray(i[o])&&(i[o]=IK(i[o])),!s)}if(ge.isFormData(r)&&ge.isFunction(r.entries)){const e={};return ge.forEachEntry(r,(n,i)=>{t(jK(n),i,e,0)}),e}return null}function MK(r,t,e){if(ge.isString(r))try{return(t||JSON.parse)(r),ge.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(r)}const wf={transitional:OE,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,a=ge.isObject(t);if(a&&ge.isHTMLForm(t)&&(t=new FormData(t)),ge.isFormData(t))return i?JSON.stringify(AE(t)):t;if(ge.isArrayBuffer(t)||ge.isBuffer(t)||ge.isStream(t)||ge.isFile(t)||ge.isBlob(t)||ge.isReadableStream(t))return t;if(ge.isArrayBufferView(t))return t.buffer;if(ge.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return RK(t,this.formSerializer).toString();if((s=ge.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return av(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||i?(e.setContentType("application/json",!1),MK(t)):t}],transformResponse:[function(t){const e=this.transitional||wf.transitional,n=e&&e.forcedJSONParsing,i=this.responseType==="json";if(ge.isResponse(t)||ge.isReadableStream(t))return t;if(t&&ge.isString(t)&&(n&&!this.responseType||i)){const o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(s){if(o)throw s.name==="SyntaxError"?_t.from(s,_t.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ln.classes.FormData,Blob:ln.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],r=>{wf.headers[r]={}});const DK=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FK=r=>{const t={};let e,n,i;return r&&r.split(`
`).forEach(function(o){i=o.indexOf(":"),e=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!e||t[e]&&DK[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},sb=Symbol("internals");function au(r){return r&&String(r).trim().toLowerCase()}function bh(r){return r===!1||r==null?r:ge.isArray(r)?r.map(bh):String(r)}function BK(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(r);)t[n[1]]=n[2];return t}const UK=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function ug(r,t,e,n,i){if(ge.isFunction(n))return n.call(this,t,e);if(i&&(t=e),!!ge.isString(t)){if(ge.isString(n))return t.indexOf(n)!==-1;if(ge.isRegExp(n))return n.test(t)}}function $K(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function VK(r,t){const e=ge.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+e,{value:function(i,a,o){return this[n].call(this,t,i,a,o)},configurable:!0})})}let On=class{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function a(s,c,l){const u=au(c);if(!u)throw new Error("header name must be a non-empty string");const d=ge.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=bh(s))}const o=(s,c)=>ge.forEach(s,(l,u)=>a(l,u,c));if(ge.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(ge.isString(t)&&(t=t.trim())&&!UK(t))o(FK(t),e);else if(ge.isObject(t)&&ge.isIterable(t)){let s={},c,l;for(const u of t){if(!ge.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[l=u[0]]=(c=s[l])?ge.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(s,e)}else t!=null&&a(e,t,n);return this}get(t,e){if(t=au(t),t){const n=ge.findKey(this,t);if(n){const i=this[n];if(!e)return i;if(e===!0)return BK(i);if(ge.isFunction(e))return e.call(this,i,n);if(ge.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=au(t),t){const n=ge.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||ug(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let i=!1;function a(o){if(o=au(o),o){const s=ge.findKey(n,o);s&&(!e||ug(n,n[s],s,e))&&(delete n[s],i=!0)}}return ge.isArray(t)?t.forEach(a):a(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const a=e[n];(!t||ug(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const e=this,n={};return ge.forEach(this,(i,a)=>{const o=ge.findKey(n,a);if(o){e[o]=bh(i),delete e[a];return}const s=t?$K(a):String(a).trim();s!==a&&delete e[a],e[s]=bh(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ge.forEach(this,(n,i)=>{n!=null&&n!==!1&&(e[i]=t&&ge.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[sb]=this[sb]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=au(o);n[s]||(VK(i,o),n[s]=!0)}return ge.isArray(t)?t.forEach(a):a(t),this}};On.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(On.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(n){this[e]=n}}});ge.freezeMethods(On);function fg(r,t){const e=this||wf,n=t||e,i=On.from(n.headers);let a=n.data;return ge.forEach(r,function(s){a=s.call(e,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function NE(r){return!!(r&&r.__CANCEL__)}function hc(r,t,e){_t.call(this,r??"canceled",_t.ERR_CANCELED,t,e),this.name="CanceledError"}ge.inherits(hc,_t,{__CANCEL__:!0});function RE(r,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?r(e):t(new _t("Request failed with status code "+e.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function zK(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function WK(r,t){r=r||10;const e=new Array(r),n=new Array(r);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=n[a];o||(o=l),e[i]=c,n[i]=l;let d=a,v=0;for(;d!==i;)v+=e[d++],d=d%r;if(i=(i+1)%r,i===a&&(a=(a+1)%r),l-o<t)return;const p=u&&l-u;return p?Math.round(v*1e3/p):void 0}}function qK(r,t){let e=0,n=1e3/t,i,a;const o=(l,u=Date.now())=>{e=u,i=null,a&&(clearTimeout(a),a=null),r(...l)};return[(...l)=>{const u=Date.now(),d=u-e;d>=n?o(l,u):(i=l,a||(a=setTimeout(()=>{a=null,o(i)},n-d)))},()=>i&&o(i)]}const fp=(r,t,e=3)=>{let n=0;const i=WK(50,250);return qK(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,c=o-n,l=i(c),u=o<=s;n=o;const d={loaded:o,total:s,progress:s?o/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&u?(s-o)/l:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};r(d)},e)},lb=(r,t)=>{const e=r!=null;return[n=>t[0]({lengthComputable:e,total:r,loaded:n}),t[1]]},cb=r=>(...t)=>ge.asap(()=>r(...t)),HK=ln.hasStandardBrowserEnv?((r,t)=>e=>(e=new URL(e,ln.origin),r.protocol===e.protocol&&r.host===e.host&&(t||r.port===e.port)))(new URL(ln.origin),ln.navigator&&/(msie|trident)/i.test(ln.navigator.userAgent)):()=>!0,GK=ln.hasStandardBrowserEnv?{write(r,t,e,n,i,a){const o=[r+"="+encodeURIComponent(t)];ge.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),ge.isString(n)&&o.push("path="+n),ge.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(r){const t=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function KK(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function QK(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function jE(r,t,e){let n=!KK(t);return r&&(n||e==!1)?QK(r,t):t}const ub=r=>r instanceof On?{...r}:r;function As(r,t){t=t||{};const e={};function n(l,u,d,v){return ge.isPlainObject(l)&&ge.isPlainObject(u)?ge.merge.call({caseless:v},l,u):ge.isPlainObject(u)?ge.merge({},u):ge.isArray(u)?u.slice():u}function i(l,u,d,v){if(ge.isUndefined(u)){if(!ge.isUndefined(l))return n(void 0,l,d,v)}else return n(l,u,d,v)}function a(l,u){if(!ge.isUndefined(u))return n(void 0,u)}function o(l,u){if(ge.isUndefined(u)){if(!ge.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function s(l,u,d){if(d in t)return n(l,u);if(d in r)return n(void 0,l)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(l,u,d)=>i(ub(l),ub(u),d,!0)};return ge.forEach(Object.keys({...r,...t}),function(u){const d=c[u]||i,v=d(r[u],t[u],u);ge.isUndefined(v)&&d!==s||(e[u]=v)}),e}const IE=r=>{const t=As({},r);let{data:e,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;if(t.headers=o=On.from(o),t.url=LE(jE(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),ge.isFormData(e)){if(ln.hasStandardBrowserEnv||ln.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ge.isFunction(e.getHeaders)){const c=e.getHeaders(),l=["content-type","content-length"];Object.entries(c).forEach(([u,d])=>{l.includes(u.toLowerCase())&&o.set(u,d)})}}if(ln.hasStandardBrowserEnv&&(n&&ge.isFunction(n)&&(n=n(t)),n||n!==!1&&HK(t.url))){const c=i&&a&&GK.read(a);c&&o.set(i,c)}return t},YK=typeof XMLHttpRequest<"u",JK=YK&&function(r){return new Promise(function(e,n){const i=IE(r);let a=i.data;const o=On.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,u,d,v,p,y;function _(){p&&p(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function w(){if(!S)return;const k=On.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),R={data:!s||s==="text"||s==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:k,config:r,request:S};RE(function($){e($),_()},function($){n($),_()},R),S=null}"onloadend"in S?S.onloadend=w:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(w)},S.onabort=function(){S&&(n(new _t("Request aborted",_t.ECONNABORTED,r,S)),S=null)},S.onerror=function(T){const R=T&&T.message?T.message:"Network Error",U=new _t(R,_t.ERR_NETWORK,r,S);U.event=T||null,n(U),S=null},S.ontimeout=function(){let T=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const R=i.transitional||OE;i.timeoutErrorMessage&&(T=i.timeoutErrorMessage),n(new _t(T,R.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,r,S)),S=null},a===void 0&&o.setContentType(null),"setRequestHeader"in S&&ge.forEach(o.toJSON(),function(T,R){S.setRequestHeader(R,T)}),ge.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),s&&s!=="json"&&(S.responseType=i.responseType),l&&([v,y]=fp(l,!0),S.addEventListener("progress",v)),c&&S.upload&&([d,p]=fp(c),S.upload.addEventListener("progress",d),S.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=k=>{S&&(n(!k||k.type?new hc(null,r,S):k),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const x=zK(i.url);if(x&&ln.protocols.indexOf(x)===-1){n(new _t("Unsupported protocol "+x+":",_t.ERR_BAD_REQUEST,r));return}S.send(a||null)})},XK=(r,t)=>{const{length:e}=r=r?r.filter(Boolean):[];if(t||e){let n=new AbortController,i;const a=function(l){if(!i){i=!0,s();const u=l instanceof Error?l:this.reason;n.abort(u instanceof _t?u:new hc(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,a(new _t(`timeout ${t} of ms exceeded`,_t.ETIMEDOUT))},t);const s=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(l=>{l.unsubscribe?l.unsubscribe(a):l.removeEventListener("abort",a)}),r=null)};r.forEach(l=>l.addEventListener("abort",a));const{signal:c}=n;return c.unsubscribe=()=>ge.asap(s),c}},ZK=function*(r,t){let e=r.byteLength;if(e<t){yield r;return}let n=0,i;for(;n<e;)i=n+t,yield r.slice(n,i),n=i},eQ=async function*(r,t){for await(const e of tQ(r))yield*ZK(e,t)},tQ=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},fb=(r,t,e,n)=>{const i=eQ(r,t);let a=0,o,s=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){s(),c.close();return}let d=u.byteLength;if(e){let v=a+=d;e(v)}c.enqueue(new Uint8Array(u))}catch(l){throw s(l),l}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},db=64*1024,{isFunction:Fd}=ge,rQ=(({Request:r,Response:t})=>({Request:r,Response:t}))(ge.global),{ReadableStream:hb,TextEncoder:pb}=ge.global,vb=(r,...t)=>{try{return!!r(...t)}catch{return!1}},nQ=r=>{r=ge.merge.call({skipUndefined:!0},rQ,r);const{fetch:t,Request:e,Response:n}=r,i=t?Fd(t):typeof fetch=="function",a=Fd(e),o=Fd(n);if(!i)return!1;const s=i&&Fd(hb),c=i&&(typeof pb=="function"?(y=>_=>y.encode(_))(new pb):async y=>new Uint8Array(await new e(y).arrayBuffer())),l=a&&s&&vb(()=>{let y=!1;const _=new e(ln.origin,{body:new hb,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!_}),u=o&&s&&vb(()=>ge.isReadableStream(new n("").body)),d={stream:u&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!d[y]&&(d[y]=(_,S)=>{let w=_&&_[y];if(w)return w.call(_);throw new _t(`Response type '${y}' is not supported`,_t.ERR_NOT_SUPPORT,S)})});const v=async y=>{if(y==null)return 0;if(ge.isBlob(y))return y.size;if(ge.isSpecCompliantForm(y))return(await new e(ln.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(ge.isArrayBufferView(y)||ge.isArrayBuffer(y))return y.byteLength;if(ge.isURLSearchParams(y)&&(y=y+""),ge.isString(y))return(await c(y)).byteLength},p=async(y,_)=>{const S=ge.toFiniteNumber(y.getContentLength());return S??v(_)};return async y=>{let{url:_,method:S,data:w,signal:x,cancelToken:k,timeout:T,onDownloadProgress:R,onUploadProgress:U,responseType:$,headers:F,withCredentials:M="same-origin",fetchOptions:J}=IE(y),O=t||fetch;$=$?($+"").toLowerCase():"text";let N=XK([x,k&&k.toAbortSignal()],T),q=null;const j=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let Z;try{if(U&&l&&S!=="get"&&S!=="head"&&(Z=await p(F,w))!==0){let ne=new e(_,{method:"POST",body:w,duplex:"half"}),E;if(ge.isFormData(w)&&(E=ne.headers.get("content-type"))&&F.setContentType(E),ne.body){const[W,G]=lb(Z,fp(cb(U)));w=fb(ne.body,db,W,G)}}ge.isString(M)||(M=M?"include":"omit");const X=a&&"credentials"in e.prototype,se={...J,signal:N,method:S.toUpperCase(),headers:F.normalize().toJSON(),body:w,duplex:"half",credentials:X?M:void 0};q=a&&new e(_,se);let H=await(a?O(q,J):O(_,se));const ie=u&&($==="stream"||$==="response");if(u&&(R||ie&&j)){const ne={};["status","statusText","headers"].forEach(ee=>{ne[ee]=H[ee]});const E=ge.toFiniteNumber(H.headers.get("content-length")),[W,G]=R&&lb(E,fp(cb(R),!0))||[];H=new n(fb(H.body,db,W,()=>{G&&G(),j&&j()}),ne)}$=$||"text";let fe=await d[ge.findKey(d,$)||"text"](H,y);return!ie&&j&&j(),await new Promise((ne,E)=>{RE(ne,E,{data:fe,headers:On.from(H.headers),status:H.status,statusText:H.statusText,config:y,request:q})})}catch(X){throw j&&j(),X&&X.name==="TypeError"&&/Load failed|fetch/i.test(X.message)?Object.assign(new _t("Network Error",_t.ERR_NETWORK,y,q),{cause:X.cause||X}):_t.from(X,X&&X.code,y,q)}}},iQ=new Map,ME=r=>{let t=r?r.env:{};const{fetch:e,Request:n,Response:i}=t,a=[n,i,e];let o=a.length,s=o,c,l,u=iQ;for(;s--;)c=a[s],l=u.get(c),l===void 0&&u.set(c,l=s?new Map:nQ(t)),u=l;return l};ME();const ly={http:bK,xhr:JK,fetch:{get:ME}};ge.forEach(ly,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const mb=r=>`- ${r}`,aQ=r=>ge.isFunction(r)||r===null||r===!1,DE={getAdapter:(r,t)=>{r=ge.isArray(r)?r:[r];const{length:e}=r;let n,i;const a={};for(let o=0;o<e;o++){n=r[o];let s;if(i=n,!aQ(n)&&(i=ly[(s=String(n)).toLowerCase()],i===void 0))throw new _t(`Unknown adapter '${s}'`);if(i&&(ge.isFunction(i)||(i=i.get(t))))break;a[s||"#"+o]=i}if(!i){const o=Object.entries(a).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=e?o.length>1?`since :
`+o.map(mb).join(`
`):" "+mb(o[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i},adapters:ly};function dg(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new hc(null,r)}function gb(r){return dg(r),r.headers=On.from(r.headers),r.data=fg.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),DE.getAdapter(r.adapter||wf.adapter,r)(r).then(function(n){return dg(r),n.data=fg.call(r,r.transformResponse,n),n.headers=On.from(n.headers),n},function(n){return NE(n)||(dg(r),n&&n.response&&(n.response.data=fg.call(r,r.transformResponse,n.response),n.response.headers=On.from(n.response.headers))),Promise.reject(n)})}const FE="1.12.2",ov={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{ov[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});const yb={};ov.transitional=function(t,e,n){function i(a,o){return"[Axios v"+FE+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,s)=>{if(t===!1)throw new _t(i(o," has been removed"+(e?" in "+e:"")),_t.ERR_DEPRECATED);return e&&!yb[o]&&(yb[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,o,s):!0}};ov.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function oQ(r,t,e){if(typeof r!="object")throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const a=n[i],o=t[a];if(o){const s=r[a],c=s===void 0||o(s,a,r);if(c!==!0)throw new _t("option "+a+" must be "+c,_t.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new _t("Unknown option "+a,_t.ERR_BAD_OPTION)}}const xh={assertOptions:oQ,validators:ov},Wi=xh.validators;let Ss=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ob,response:new ob}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=As(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:a}=e;n!==void 0&&xh.assertOptions(n,{silentJSONParsing:Wi.transitional(Wi.boolean),forcedJSONParsing:Wi.transitional(Wi.boolean),clarifyTimeoutError:Wi.transitional(Wi.boolean)},!1),i!=null&&(ge.isFunction(i)?e.paramsSerializer={serialize:i}:xh.assertOptions(i,{encode:Wi.function,serialize:Wi.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),xh.assertOptions(e,{baseUrl:Wi.spelling("baseURL"),withXsrfToken:Wi.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=a&&ge.merge(a.common,a[e.method]);a&&ge.forEach(["delete","get","head","post","put","patch","common"],y=>{delete a[y]}),e.headers=On.concat(o,a);const s=[];let c=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(e)===!1||(c=c&&_.synchronous,s.unshift(_.fulfilled,_.rejected))});const l=[];this.interceptors.response.forEach(function(_){l.push(_.fulfilled,_.rejected)});let u,d=0,v;if(!c){const y=[gb.bind(this),void 0];for(y.unshift(...s),y.push(...l),v=y.length,u=Promise.resolve(e);d<v;)u=u.then(y[d++],y[d++]);return u}v=s.length;let p=e;for(;d<v;){const y=s[d++],_=s[d++];try{p=y(p)}catch(S){_.call(this,S);break}}try{u=gb.call(this,p)}catch(y){return Promise.reject(y)}for(d=0,v=l.length;d<v;)u=u.then(l[d++],l[d++]);return u}getUri(t){t=As(this.defaults,t);const e=jE(t.baseURL,t.url,t.allowAbsoluteUrls);return LE(e,t.params,t.paramsSerializer)}};ge.forEach(["delete","get","head","options"],function(t){Ss.prototype[t]=function(e,n){return this.request(As(n||{},{method:t,url:e,data:(n||{}).data}))}});ge.forEach(["post","put","patch"],function(t){function e(n){return function(a,o,s){return this.request(As(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Ss.prototype[t]=e(),Ss.prototype[t+"Form"]=e(!0)});let sQ=class BE{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{n.subscribe(s),a=s}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},t(function(a,o,s){n.reason||(n.reason=new hc(a,o,s),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new BE(function(i){t=i}),cancel:t}}};function lQ(r){return function(e){return r.apply(null,e)}}function cQ(r){return ge.isObject(r)&&r.isAxiosError===!0}const cy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cy).forEach(([r,t])=>{cy[t]=r});function UE(r){const t=new Ss(r),e=gE(Ss.prototype.request,t);return ge.extend(e,Ss.prototype,t,{allOwnKeys:!0}),ge.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return UE(As(r,i))},e}const pr=UE(wf);pr.Axios=Ss;pr.CanceledError=hc;pr.CancelToken=sQ;pr.isCancel=NE;pr.VERSION=FE;pr.toFormData=av;pr.AxiosError=_t;pr.Cancel=pr.CanceledError;pr.all=function(t){return Promise.all(t)};pr.spread=lQ;pr.isAxiosError=cQ;pr.mergeConfig=As;pr.AxiosHeaders=On;pr.formToJSON=r=>AE(ge.isHTMLForm(r)?new FormData(r):r);pr.getAdapter=DE.getAdapter;pr.HttpStatusCode=cy;pr.default=pr;const{Axios:cte,AxiosError:ute,CanceledError:fte,isCancel:dte,CancelToken:hte,VERSION:pte,all:vte,Cancel:mte,isAxiosError:gte,spread:yte,toFormData:_te,AxiosHeaders:wte,HttpStatusCode:bte,formToJSON:xte,getAdapter:Ste,mergeConfig:kte}=pr,uQ="";class fQ{constructor(){jt(this,"client");this.client=pr.create({baseURL:uQ,headers:{"Content-Type":"application/json"}})}async getVideoToken(t,e){return(await this.client.post("/api/video/token",{identity:t,roomName:e})).data.data.token}async createRoom(t,e){return(await this.client.post("/api/video/rooms",{roomName:t,type:e})).data.data}async getRoom(t){return(await this.client.get(`/api/video/rooms/${t}`)).data.data}async endRoom(t){return(await this.client.post(`/api/video/rooms/${t}/end`)).data.data}async listParticipants(t){return(await this.client.get(`/api/video/rooms/${t}/participants`)).data.data}async trackParticipantConnected(t,e,n,i){await this.client.post("/api/video/events/participant-connected",{roomName:t,identity:e,role:n,documento:i})}async trackParticipantDisconnected(t,e){await this.client.post("/api/video/events/participant-disconnected",{roomName:t,identity:e})}async sendWhatsApp(t,e){await this.client.post("/api/video/whatsapp/send",{phone:t,message:e})}async getMedicalHistory(t){return(await this.client.get(`/api/video/medical-history/${t}`)).data.data}async updateMedicalHistory(t){await this.client.post("/api/video/medical-history",t)}async generateAISuggestions(t){return(await this.client.post("/api/video/ai-suggestions",{patientData:t})).data.data.suggestions}async makeVoiceCall(t,e){await this.client.post("/api/twilio/voice-call",{phoneNumber:t,patientName:e})}}const Ji=new fQ,dQ=r=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(r);t.lang="es-ES",t.rate=1,t.pitch=1,t.volume=1,window.speechSynthesis.speak(t)}},hQ=({identity:r,roomName:t,role:e,documento:n})=>{const[i,a]=he.useState(null),[o,s]=he.useState(null),[c,l]=he.useState(new Map),[u,d]=he.useState(!1),[v,p]=he.useState(!1),[y,_]=he.useState(null),[S,w]=he.useState(!0),[x,k]=he.useState(!0),[T,R]=he.useState(null),U=he.useCallback(async()=>{var J;try{d(!0),_(null);const O=await Ji.getVideoToken(r,t),N=await IG.connect(O,{name:t,audio:!0,video:{width:640,height:480},networkQuality:{local:1,remote:1}});a(N),s(N.localParticipant),p(!0);const q=(J=Array.from(N.localParticipant.videoTracks.values())[0])==null?void 0:J.track;if(q&&R(q),e)try{await Ji.trackParticipantConnected(t,r,e,n)}catch(j){console.error("Error tracking participant connection:",j)}N.participants.forEach(j=>{l(Z=>new Map(Z).set(j.sid,j))}),N.on("participantConnected",j=>{if(console.log(`Participant connected: ${j.identity}`),l(Z=>new Map(Z).set(j.sid,j)),e==="doctor"){const Z=j.identity;dQ(`Paciente ${Z} conectado`)}}),N.on("participantDisconnected",j=>{console.log(`Participant disconnected: ${j.identity}`),l(Z=>{const X=new Map(Z);return X.delete(j.sid),X})}),N.on("disconnected",()=>{console.log("Disconnected from room"),p(!1),a(null),s(null),l(new Map)}),console.log(`Successfully connected to room: ${t}`)}catch(O){console.error("Error connecting to room:",O),_(O instanceof Error?O.message:"Failed to connect to room")}finally{d(!1)}},[r,t,e]),$=he.useCallback(()=>{if(i){if(e)try{Ji.trackParticipantDisconnected(t,r)}catch(J){console.error("Error tracking participant disconnection:",J)}i.disconnect(),a(null),s(null),l(new Map),p(!1)}},[i,e,t,r]),F=he.useCallback(()=>{o&&o.audioTracks.forEach(J=>{const O=J.track;O.isEnabled?(O.disable(),w(!1)):(O.enable(),w(!0))})},[o]),M=he.useCallback(()=>{o&&o.videoTracks.forEach(J=>{const O=J.track;O.isEnabled?(O.disable(),k(!1)):(O.enable(),k(!0))})},[o]);return he.useEffect(()=>{const J=()=>{if(i&&e){const N="/api/video/events/participant-disconnected",q=JSON.stringify({roomName:t,identity:r});navigator.sendBeacon(N,new Blob([q],{type:"application/json"})),i.disconnect()}};return window.addEventListener("beforeunload",J),()=>{if(window.removeEventListener("beforeunload",J),i){if(e)try{Ji.trackParticipantDisconnected(t,r)}catch(O){console.error("Error tracking participant disconnection:",O)}i.disconnect()}}},[i,e,t,r]),{room:i,localParticipant:o,remoteParticipants:c,isConnecting:u,isConnected:v,error:y,connectToRoom:U,disconnectFromRoom:$,toggleAudio:F,toggleVideo:M,isAudioEnabled:S,isVideoEnabled:x,localVideoTrack:T}};var uy={},sv={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.WASM_INFERENCE_DIMENSIONS=ar.TWILIO_VIRTUAL_BACKGROUND_PROCESSOR_PIPELINE_WORKER=ar.TWILIO_GAUSSIAN_BLUR_BACKGROUND_PROCESSOR_PIPELINE_WORKER=ar.TFLITE_SIMD_LOADER_NAME=ar.TFLITE_LOADER_NAME=ar.MODEL_NAME=ar.MASK_BLUR_RADIUS=ar.BLUR_FILTER_RADIUS=void 0;ar.BLUR_FILTER_RADIUS=15;ar.MASK_BLUR_RADIUS=8;ar.MODEL_NAME="selfie_segmentation_landscape.tflite";ar.TFLITE_LOADER_NAME="tflite-1-0-0.js";ar.TFLITE_SIMD_LOADER_NAME="tflite-simd-1-0-0.js";ar.TWILIO_GAUSSIAN_BLUR_BACKGROUND_PROCESSOR_PIPELINE_WORKER="twilio-gaussian-blur-background-processor-pipeline-worker.js";ar.TWILIO_VIRTUAL_BACKGROUND_PROCESSOR_PIPELINE_WORKER="twilio-virtual-background-processor-pipeline-worker.js";ar.WASM_INFERENCE_DIMENSIONS={width:256,height:144};var bf={},xf={};Object.defineProperty(xf,"__esModule",{value:!0});xf.version=void 0;xf.version="3.1.0";var lv={};Object.defineProperty(lv,"__esModule",{value:!0});lv.Processor=void 0;var pQ=function(){function r(){}return r}();lv.Processor=pQ;var cv={},pc={},Sf={},fy=A&&A.__assign||function(){return fy=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},fy.apply(this,arguments)};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.Benchmark=void 0;var vQ=function(){function r(){this._timingCache=new Map,this._timings=new Map}return r.prototype.end=function(t){var e=this._timings.get(t);e&&(e.end=Date.now(),e.delay=e.end-e.start,this._save(t,fy({},e)))},r.prototype.getAverageDelay=function(t){var e=this._timingCache.get(t);if(!(!e||!e.length))return e.map(function(n){return n.delay}).reduce(function(n,i){return n+=i},0)/e.length},r.prototype.getNames=function(){return Array.from(this._timingCache.keys())},r.prototype.getRate=function(t){var e=this._timingCache.get(t);if(!(!e||e.length<2)){var n=e[e.length-1].end-e[0].start;return e.length/n*1e3}},r.prototype.merge=function(t){var e=this,n=t._timingCache,i=t._timings;n.forEach(function(a,o){return e._timingCache.set(o,a)}),i.forEach(function(a,o){return e._timings.set(o,a)})},r.prototype.start=function(t){var e=this._timings.get(t);e||(e={},this._timings.set(t,e)),e.start=Date.now(),delete e.end,delete e.delay},r.prototype._save=function(t,e){var n=this._timingCache.get(t);n||(n=[],this._timingCache.set(t,n)),n.push(e),n.length>r.cacheSize&&n.splice(0,n.length-r.cacheSize)},r.cacheSize=41,r}();Sf.Benchmark=vQ;var ci={},ba=A&&A.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(ci,"__esModule",{value:!0});ci.isSupported=ci.isCanvasBlurSupported=ci.isChromiumImageBitmap=ci.isBrowserSupported=void 0;function $E(){return typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function mQ(){if(typeof window>"u"||typeof document>"u")return null;var r=$E();return r.getContext("webgl2")?"webgl2":r.getContext("2d")?"2d":null}function VE(){return mQ()!==null}ci.isBrowserSupported=VE;function gQ(){return/Chrome/.test(navigator.userAgent)&&typeof createImageBitmap=="function"}ci.isChromiumImageBitmap=gQ;ci.isCanvasBlurSupported=function(){var r=[0,0,0,255],t=[255,255,255,255],e=new ImageData(new Uint8ClampedArray(ba(ba(ba(ba(ba(ba(ba(ba(ba([],r,!0),r,!0),r,!0),r,!0),t,!0),r,!0),r,!0),r,!0),r,!0)),3,3),n=$E(),i=n.getContext("2d");n.width=3,n.height=3,i.putImageData(e,0,0),i.filter="blur(1px)",i.drawImage(n,0,0);var a=i.getImageData(0,0,3,3).data;return a[0]>0}();ci.isSupported=VE();var uv={},hg=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},pg=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(uv,"__esModule",{value:!0});uv.TwilioTFLite=void 0;var _b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,vg=new Set,Bd,yQ=function(){function r(){this._inputBuffer=null,this._isSimdEnabled=null,this._tflite=null}return Object.defineProperty(r.prototype,"isSimdEnabled",{get:function(){return this._isSimdEnabled},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e,n,i){return hg(this,void 0,void 0,function(){var a,o,s,c,l;return pg(this,function(u){switch(u.label){case 0:return this._tflite?[2]:(_b&&(t=""),[4,Promise.all([this._loadWasmModule(t,n,i),fetch("".concat(t).concat(e))])]);case 1:return a=u.sent(),o=a[1],s=Bd,s?[3,3]:[4,o.arrayBuffer()];case 2:s=u.sent(),u.label=3;case 3:return Bd=s,c=this._tflite,l=c._getModelBufferMemoryOffset(),c.HEAPU8.set(new Uint8Array(Bd),l),c._loadModel(Bd.byteLength),[2]}})})},r.prototype.loadInputBuffer=function(t){for(var e=this._tflite,n=e._getInputHeight(),i=e._getInputWidth(),a=i*n,o=e._getInputMemoryOffset()/4,s=0;s<a;s++){var c=o+s*3,l=s*4;e.HEAPF32[c]=t[l]/255,e.HEAPF32[c+1]=t[l+1]/255,e.HEAPF32[c+2]=t[l+2]/255}this._inputBuffer=t},r.prototype.runInference=function(){var t=this._tflite,e=t._getInputHeight(),n=t._getInputWidth(),i=n*e,a=t._getOutputMemoryOffset()/4;t._runInference();for(var o=this._inputBuffer||new Uint8ClampedArray(i*4),s=0;s<i;s++)o[s*4+3]=Math.round(t.HEAPF32[a+s]*255);return o},r.prototype._loadScript=function(t){return hg(this,void 0,void 0,function(){return pg(this,function(e){return vg.has(t)?[2]:_b?(importScripts(t),vg.add(t),[2]):[2,new Promise(function(n,i){var a=document.createElement("script");a.onload=function(){vg.add(t),n()},a.onerror=function(){i()},document.head.append(a),a.src=t})]})})},r.prototype._loadWasmModule=function(t,e,n){return hg(this,void 0,void 0,function(){var i,a;return pg(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,6]),[4,this._loadScript("".concat(t).concat(n))];case 1:return o.sent(),i=this,[4,createTwilioTFLiteSIMDModule()];case 2:return i._tflite=o.sent(),this._isSimdEnabled=!0,[3,6];case 3:return o.sent(),[4,this._loadScript("".concat(t).concat(e))];case 4:return o.sent(),a=this,[4,createTwilioTFLiteModule()];case 5:return a._tflite=o.sent(),this._isSimdEnabled=!1,[3,6];case 6:return[2]}})})},r}();uv.TwilioTFLite=yQ;var vc={},kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.Pipeline=void 0;var _Q=function(){function r(){this._stages=[]}return r.prototype.addStage=function(t){this._stages.push(t)},r.prototype.render=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._stages.forEach(function(n){n.render.apply(n,t)})},r}();kf.Pipeline=_Q;var fv={},dv={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.initBuffer=zn.createTexture=zn.compileShader=zn.createProgram=zn.createPipelineStageProgram=void 0;function wQ(r,t,e,n,i){var a=zE(r,t,e),o=r.getAttribLocation(a,"a_position");r.enableVertexAttribArray(o),r.bindBuffer(r.ARRAY_BUFFER,n),r.vertexAttribPointer(o,2,r.FLOAT,!1,0,0);var s=r.getAttribLocation(a,"a_texCoord");return r.enableVertexAttribArray(s),r.bindBuffer(r.ARRAY_BUFFER,i),r.vertexAttribPointer(s,2,r.FLOAT,!1,0,0),a}zn.createPipelineStageProgram=wQ;function zE(r,t,e){var n=r.createProgram();if(r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw new Error("Could not link WebGL program: ".concat(r.getProgramInfoLog(n)));return n}zn.createProgram=zE;function bQ(r,t,e){var n=r.createShader(t);if(r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error("Could not compile shader: ".concat(r.getShaderInfoLog(n)));return n}zn.compileShader=bQ;function xQ(r,t,e,n,i,a){i===void 0&&(i=r.NEAREST),a===void 0&&(a=r.NEAREST);var o=r.createTexture();return r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a),r.texStorage2D(r.TEXTURE_2D,1,t,e,n),o}zn.createTexture=xQ;function SQ(r,t){var e=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW),e}zn.initBuffer=SQ;Object.defineProperty(dv,"__esModule",{value:!0});dv.WebGL2PipelineInputStage=void 0;var wb=zn,kQ=function(){function r(t){this._inputTexture=null;var e=t.canvas,n=e.height,i=e.width;this._glOut=t,this._inputFrameTexture=(0,wb.createTexture)(t,t.RGBA8,i,n,t.NEAREST,t.NEAREST)}return r.prototype.cleanUp=function(){var t=this,e=t._glOut,n=t._inputFrameTexture,i=t._inputTexture;e.deleteTexture(n),e.deleteTexture(i)},r.prototype.render=function(t,e){var n=this,i=n._glOut,a=n._inputFrameTexture,o=i.canvas,s=o.height,c=o.width;if(i.viewport(0,0,c,s),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t&&(i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a),i.texSubImage2D(i.TEXTURE_2D,0,0,0,c,s,i.RGBA,i.UNSIGNED_BYTE,t)),!!e){var l=e.data,u=e.height,d=e.width;this._inputTexture||(this._inputTexture=(0,wb.createTexture)(i,i.RGBA8,d,u,i.NEAREST,i.NEAREST)),i.viewport(0,0,d,u),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,this._inputTexture),i.texSubImage2D(i.TEXTURE_2D,0,0,0,d,u,i.RGBA,i.UNSIGNED_BYTE,l)}},r}();dv.WebGL2PipelineInputStage=kQ;var hv={},bb=A&&A.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(hv,"__esModule",{value:!0});hv.WebGL2PipelineProcessingStage=void 0;var sl=zn,PQ=function(){function r(t,e){this._outputFramebuffer=null,this._outputTexture=null;var n=t.textureName,i=t.textureUnit,a=e.glOut;this._glOut=a;var o=e.fragmentShaderSource,s=e.height,c=s===void 0?a.canvas.height:s,l=e.textureUnit,u=l===void 0?i+1:l,d=e.type,v=e.uniformVars,p=v===void 0?[]:v,y=e.vertexShaderSource,_=y===void 0?`#version 300 es
        in vec2 a_position;
        in vec2 a_texCoord;

        out vec2 v_texCoord;

        void main() {
          gl_Position = vec4(a_position`.concat(d==="canvas"?" * vec2(1.0, -1.0)":"",`, 0.0, 1.0);
          v_texCoord = a_texCoord;
        }
      `):y,S=e.width,w=S===void 0?a.canvas.width:S;this._outputDimensions={height:c,width:w},this._outputTextureUnit=u,this._fragmentShader=(0,sl.compileShader)(a,a.FRAGMENT_SHADER,o),this._vertexShader=(0,sl.compileShader)(a,a.VERTEX_SHADER,_),this._positionBuffer=(0,sl.initBuffer)(a,[-1,-1,1,-1,-1,1,1,1]),this._texCoordBuffer=(0,sl.initBuffer)(a,[0,0,1,0,0,1,1,1]),d==="texture"&&(this._outputTexture=(0,sl.createTexture)(a,a.RGBA8,w,c),this._outputFramebuffer=a.createFramebuffer(),a.bindFramebuffer(a.FRAMEBUFFER,this._outputFramebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._outputTexture,0));var x=(0,sl.createPipelineStageProgram)(a,this._vertexShader,this._fragmentShader,this._positionBuffer,this._texCoordBuffer);this._program=x,this._setUniformVars(bb([{name:n,type:"int",values:[i]}],p,!0))}return r.prototype.cleanUp=function(){var t=this,e=t._fragmentShader,n=t._glOut,i=t._positionBuffer,a=t._program,o=t._texCoordBuffer,s=t._vertexShader;n.deleteProgram(a),n.deleteBuffer(o),n.deleteBuffer(i),n.deleteShader(s),n.deleteShader(e)},r.prototype.render=function(){var t=this,e=t._glOut,n=t._outputDimensions,i=n.height,a=n.width,o=t._outputFramebuffer,s=t._outputTexture,c=t._outputTextureUnit,l=t._program;e.viewport(0,0,a,i),e.useProgram(l),s&&(e.activeTexture(e.TEXTURE0+c),e.bindTexture(e.TEXTURE_2D,s)),e.bindFramebuffer(e.FRAMEBUFFER,o),e.drawArrays(e.TRIANGLE_STRIP,0,4)},r.prototype._setUniformVars=function(t){var e=this,n=e._glOut,i=e._program;n.useProgram(i),t.forEach(function(a){var o=a.name,s=a.type,c=a.values,l=n.getUniformLocation(i,o),u=s.split(":")[1]==="v";u?n["uniform1".concat(s[0],"v")](l,c):n["uniform".concat(c.length).concat(s[0])].apply(n,bb([l],c,!1))})},r}();hv.WebGL2PipelineProcessingStage=PQ;var TQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(fv,"__esModule",{value:!0});fv.WebGL2Pipeline=void 0;var EQ=kf,CQ=dv,LQ=hv,OQ=function(r){TQ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._stages=[],e}return t.prototype.cleanUp=function(){this._stages.forEach(function(e){return e.cleanUp()})},t.prototype.render=function(e,n){var i=this._stages,a=i[0],o=i.slice(1);a.render(e,n),o.forEach(function(s){return s.render()})},t.InputStage=CQ.WebGL2PipelineInputStage,t.ProcessingStage=LQ.WebGL2PipelineProcessingStage,t}(EQ.Pipeline);fv.WebGL2Pipeline=OQ;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebGL2Pipeline=r.Pipeline=void 0;var t=kf;Object.defineProperty(r,"Pipeline",{enumerable:!0,get:function(){return t.Pipeline}});var e=fv;Object.defineProperty(r,"WebGL2Pipeline",{enumerable:!0,get:function(){return e.WebGL2Pipeline}})})(vc);var pv={},AQ=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},NQ=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(pv,"__esModule",{value:!0});pv.InputFrameDowscaleStage=void 0;var RQ=function(){function r(t,e){this._inputFrameDownscaleMode=e,this._outputContext=t.getContext("2d",{willReadFrequently:!0})}return r.prototype.render=function(t){return AQ(this,void 0,void 0,function(){var e,n,i,a,o,s,c,l;return NQ(this,function(u){switch(u.label){case 0:return e=this,n=e._outputContext,i=e._inputFrameDownscaleMode,a=n.canvas,o=a.height,s=a.width,i!=="image-bitmap"?[3,2]:[4,createImageBitmap(t,{resizeWidth:s,resizeHeight:o,resizeQuality:"pixelated"})];case 1:return c=u.sent(),n.drawImage(c,0,0),c.close(),[3,3];case 2:n.drawImage(t,0,0,s,o),u.label=3;case 3:return l=n.getImageData(0,0,s,o).data,[2,l]}})})},r}();pv.InputFrameDowscaleStage=RQ;var vv={},mv={},gv={},jQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(gv,"__esModule",{value:!0});gv.SinglePassBilateralFilterStage=void 0;var IQ=vc;function MQ(r,t,e){return"0".repeat(r).split("").map(function(n,i){var a=(i+1)*e;return Math.exp(-.5*a*a/t/t)})}function DQ(r){return"0".repeat(256).split("").map(function(t,e){var n=e/255;return Math.exp(-.5*n*n/r/r)})}var FQ=function(r){jQ(t,r);function t(e,n,i,a,o,s,c){var l=this;c===void 0&&(c=s+1);var u=o.height,d=o.width;return l=r.call(this,{textureName:"u_segmentationMask",textureUnit:s},{fragmentShaderSource:`#version 300 es
          precision highp float;

          uniform sampler2D u_inputFrame;
          uniform sampler2D u_segmentationMask;
          uniform vec2 u_texelSize;
          uniform float u_direction;
          uniform float u_radius;
          uniform float u_step;
          uniform float u_spaceWeights[128];
          uniform float u_colorWeights[256];

          in vec2 v_texCoord;

          out vec4 outColor;

          float calculateColorWeight(vec2 coord, vec3 centerColor) {
            vec3 coordColor = texture(u_inputFrame, coord).rgb;
            float x = distance(centerColor, coordColor);
            return u_colorWeights[int(x * 255.0)];
          }

          float edgePixelsAverageAlpha(float outAlpha) {
            float totalAlpha = outAlpha;
            float totalPixels = 1.0;

            for (float i = -u_radius; u_radius > 0.0 && i <= u_radius; i += u_radius) {
              for (float j = -u_radius; j <= u_radius; j += u_radius * (j == 0.0 ? 2.0 : 1.0)) {
                vec2 shift = vec2(i, j) * u_texelSize;
                vec2 coord = vec2(v_texCoord + shift);
                totalAlpha += texture(u_segmentationMask, coord).a;
                totalPixels++;
              }
            }

            return totalAlpha / totalPixels;
          }

          void main() {
            vec3 centerColor = texture(u_inputFrame, v_texCoord).rgb;
            float outAlpha = texture(u_segmentationMask, v_texCoord).a;
            float averageAlpha = edgePixelsAverageAlpha(outAlpha);
            float totalWeight = 1.0;

            if (averageAlpha == 0.0 || averageAlpha == 1.0) {
              outColor = vec4(averageAlpha * centerColor, averageAlpha);
              return;
            }

            for (float i = 1.0; i <= u_radius; i += u_step) {
              float x = (1.0 - u_direction) * i;
              float y = u_direction * i;
              vec2 shift = vec2(x, y) * u_texelSize;
              vec2 coord = vec2(v_texCoord + shift);
              float spaceWeight = u_spaceWeights[int(i - 1.0)];
              float colorWeight = calculateColorWeight(coord, centerColor);
              float weight = spaceWeight * colorWeight;
              float alpha = texture(u_segmentationMask, coord).a;
              totalWeight += weight;
              outAlpha += weight * alpha;

              shift = vec2(-x, -y) * u_texelSize;
              coord = vec2(v_texCoord + shift);
              colorWeight = calculateColorWeight(coord, centerColor);
              weight = spaceWeight * colorWeight;
              alpha = texture(u_segmentationMask, coord).a;
              totalWeight += weight;
              outAlpha += weight * alpha;
            }

            outAlpha /= totalWeight;
            outColor = vec4(outAlpha * centerColor, outAlpha);
          }
        `,glOut:e,height:u,textureUnit:c,type:i,width:d,uniformVars:[{name:"u_inputFrame",type:"int",values:[0]},{name:"u_direction",type:"float",values:[n==="vertical"?1:0]},{name:"u_texelSize",type:"float",values:[1/d,1/u]}]})||this,l._direction=n,l._inputDimensions=a,l.updateSigmaColor(0),l.updateSigmaSpace(0),l}return t.prototype.updateSigmaColor=function(e){this._setUniformVars([{name:"u_colorWeights",type:"float:v",values:DQ(e)}])},t.prototype.updateSigmaSpace=function(e){var n=this._inputDimensions,i=n.height,a=n.width,o=this._outputDimensions,s=o.height,c=o.width;e*=Math.max(c/a,s/i);var l=Math.floor(.5*e/Math.log(e)),u=Math.max(1/c,1/s)*e,d=1/(this._direction==="horizontal"?c:s);this._setUniformVars([{name:"u_radius",type:"float",values:[e]},{name:"u_spaceWeights",type:"float:v",values:MQ(e,u,d)},{name:"u_step",type:"float",values:[l]}])},t}(IQ.WebGL2Pipeline.ProcessingStage);gv.SinglePassBilateralFilterStage=FQ;var BQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mv,"__esModule",{value:!0});mv.PersonMaskUpscalePipeline=void 0;var xb=vc,Sb=gv,UQ=function(r){BQ(t,r);function t(e,n,i){var a=r.call(this)||this;a._isWebGL2Supported=!0,a._outputCanvas=n,a._inputDimensions=e,a._maskBlurRadius=i;var o=n.getContext("webgl2");return o?a.initializeWebGL2Pipeline(o):(a._isWebGL2Supported=!1,console.warn("Downgraded to Canvas2D for person mask upscaling due to missing WebGL2 support.")),a}return t.prototype.initializeWebGL2Pipeline=function(e){var n={height:this._outputCanvas.height,width:this._outputCanvas.width};this.addStage(new xb.WebGL2Pipeline.InputStage(e)),this.addStage(new Sb.SinglePassBilateralFilterStage(e,"horizontal","texture",this._inputDimensions,n,1,2)),this.addStage(new Sb.SinglePassBilateralFilterStage(e,"vertical","canvas",this._inputDimensions,n,2))},t.prototype.render=function(e,n){this._isWebGL2Supported?r.prototype.render.call(this,e,n):this._renderFallback(e,n)},t.prototype._renderFallback=function(e,n){var i=new OffscreenCanvas(n.width,n.height),a=i.getContext("2d");a.putImageData(n,0,0);var o=this._outputCanvas.getContext("2d");o.save(),o.filter="blur(".concat(this._maskBlurRadius,"px)"),o.globalCompositeOperation="copy",o.drawImage(i,0,0,this._outputCanvas.width,this._outputCanvas.height),o.filter="none",o.globalCompositeOperation="source-in",o.drawImage(e,0,0,this._outputCanvas.width,this._outputCanvas.height),o.restore()},t.prototype.updateBilateralFilterConfig=function(e){var n=e.sigmaSpace;if(typeof n=="number"){if(!this._isWebGL2Supported){this._maskBlurRadius=n;return}var i=this._stages,a=i.slice(1);a.forEach(function(o){o.updateSigmaColor(.1),o.updateSigmaSpace(n)})}},t.prototype.cleanUp=function(){this._isWebGL2Supported&&r.prototype.cleanUp.call(this)},t}(xb.WebGL2Pipeline);mv.PersonMaskUpscalePipeline=UQ;Object.defineProperty(vv,"__esModule",{value:!0});vv.PostProcessingStage=void 0;var $Q=mv,VQ=function(){function r(t,e,n,i,a){this._personMaskUpscalePipeline=null,this._inputDimensions=t,this._maskBlurRadius=i,this._outputContext=n.getContext("2d"),this._webgl2Canvas=e,this._setBackground=a}return r.prototype.render=function(t,e){var n=this,i=n._outputContext,a=n._setBackground,o=n._webgl2Canvas;this._personMaskUpscalePipeline||this.resetPersonMaskUpscalePipeline(),this._personMaskUpscalePipeline.render(t,e),i.save(),i.globalCompositeOperation="copy",i.drawImage(o,0,0),i.globalCompositeOperation="destination-over",a(t),i.restore()},r.prototype.resetPersonMaskUpscalePipeline=function(){var t,e=this,n=e._inputDimensions,i=e._maskBlurRadius,a=e._webgl2Canvas;(t=this._personMaskUpscalePipeline)===null||t===void 0||t.cleanUp(),this._personMaskUpscalePipeline=new $Q.PersonMaskUpscalePipeline(n,a,i),this._personMaskUpscalePipeline.updateBilateralFilterConfig({sigmaSpace:i})},r.prototype.updateMaskBlurRadius=function(t){var e;this._maskBlurRadius!==t&&(this._maskBlurRadius=t,(e=this._personMaskUpscalePipeline)===null||e===void 0||e.updateBilateralFilterConfig({sigmaSpace:t}))},r}();vv.PostProcessingStage=VQ;var zQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ud=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},$d=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(pc,"__esModule",{value:!0});pc.BackgroundProcessorPipeline=void 0;var ll=ar,WQ=Sf,qQ=ci,HQ=uv,GQ=vc,KQ=pv,QQ=vv,YQ=function(r){zQ(t,r);function t(e,n){n===void 0&&(n=function(){});var i=r.call(this)||this;i._outputCanvas=new OffscreenCanvas(1,1),i._webgl2Canvas=new OffscreenCanvas(1,1),i._benchmark=new WQ.Benchmark,i._inferenceInputCanvas=new OffscreenCanvas(ll.WASM_INFERENCE_DIMENSIONS.width,ll.WASM_INFERENCE_DIMENSIONS.height),i._inputFrameDownscaleMode=(0,qQ.isChromiumImageBitmap)()?"image-bitmap":"canvas";var a=e.assetsPath,o=e.deferInputFrameDownscale,s=e.maskBlurRadius;return i._assetsPath=a,i._deferInputFrameDownscale=o,i._onResizeWebGL2Canvas=n,i.addStage(new KQ.InputFrameDowscaleStage(i._inferenceInputCanvas,i._inputFrameDownscaleMode)),i.addStage(new QQ.PostProcessingStage(ll.WASM_INFERENCE_DIMENSIONS,i._webgl2Canvas,i._outputCanvas,s,function(c){return i._setBackground(c)})),i}return t.prototype.loadTwilioTFLite=function(){return Ud(this,void 0,void 0,function(){var e;return $d(this,function(n){switch(n.label){case 0:return e=t._twilioTFLite,e?[3,2]:(e=new HQ.TwilioTFLite,[4,e.initialize(this._assetsPath,ll.MODEL_NAME,ll.TFLITE_LOADER_NAME,ll.TFLITE_SIMD_LOADER_NAME)]);case 1:n.sent(),t._twilioTFLite=e,n.label=2;case 2:return[2,e.isSimdEnabled]}})})},t.prototype.render=function(e){return Ud(this,void 0,void 0,function(){var n,i,a,o,s,c,l,u,d,v,p,y,_,S,w,x,k,T,R,U,$;return $d(this,function(F){switch(F.label){case 0:return t._twilioTFLite?(n=this._stages,i=n[0],a=n[1],o=this,s=o._benchmark,c=o._deferInputFrameDownscale,l=o._inferenceInputCanvas,u=l.height,d=l.width,v=o._outputCanvas,p=o._webgl2Canvas,y=t._twilioTFLite,_=typeof VideoFrame=="function"&&e instanceof VideoFrame,S=_?{height:e.displayHeight,width:e.displayWidth}:e,w=S.height,x=S.width,k=v.width!==x,T=v.height!==w,R=k||T,k&&(v.width=x,p.width=x),T&&(v.height=w,p.height=w),R&&(a.resetPersonMaskUpscalePipeline(),this._onResizeWebGL2Canvas()),s.start("inputImageResizeDelay"),U=i.render(e).then(function(M){y.loadInputBuffer(M)}),c?[3,2]:[4,U]):[2,null];case 1:F.sent(),F.label=2;case 2:return s.end("inputImageResizeDelay"),s.start("segmentationDelay"),$=new ImageData(y.runInference(),d,u),s.end("segmentationDelay"),s.start("imageCompositionDelay"),a.render(e,$),s.end("imageCompositionDelay"),(typeof VideoFrame=="function"&&e instanceof VideoFrame||typeof ImageBitmap=="function"&&e instanceof ImageBitmap)&&e.close(),[2,this._outputCanvas]}})})},t.prototype.setDeferInputFrameDownscale=function(e){return Ud(this,void 0,void 0,function(){return $d(this,function(n){return this._deferInputFrameDownscale=e,[2]})})},t.prototype.setMaskBlurRadius=function(e){return Ud(this,void 0,void 0,function(){return $d(this,function(n){return this._stages[1].updateMaskBlurRadius(e),[2]})})},t._twilioTFLite=null,t}(GQ.Pipeline);pc.BackgroundProcessorPipeline=YQ;var mc={};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h_=Symbol("Comlink.proxy"),WE=Symbol("Comlink.endpoint"),qE=Symbol("Comlink.releaseProxy"),Sh=Symbol("Comlink.finalizer"),kh=Symbol("Comlink.thrown"),HE=r=>typeof r=="object"&&r!==null||typeof r=="function",JQ={canHandle:r=>HE(r)&&r[h_],serialize(r){const{port1:t,port2:e}=new MessageChannel;return v_(r,t),[e,[e]]},deserialize(r){return r.start(),KE(r)}},XQ={canHandle:r=>HE(r)&&kh in r,serialize({value:r}){let t;return r instanceof Error?t={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:t={isError:!1,value:r},[t,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},p_=new Map([["proxy",JQ],["throw",XQ]]);function ZQ(r,t){for(const e of r)if(t===e||e==="*"||e instanceof RegExp&&e.test(t))return!0;return!1}function v_(r,t=globalThis,e=["*"]){t.addEventListener("message",function n(i){if(!i||!i.data)return;if(!ZQ(e,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:o,path:s}=Object.assign({path:[]},i.data),c=(i.data.argumentList||[]).map(ps);let l;try{const u=s.slice(0,-1).reduce((v,p)=>v[p],r),d=s.reduce((v,p)=>v[p],r);switch(o){case"GET":l=d;break;case"SET":u[s.slice(-1)[0]]=ps(i.data.value),l=!0;break;case"APPLY":l=d.apply(u,c);break;case"CONSTRUCT":{const v=new d(...c);l=XE(v)}break;case"ENDPOINT":{const{port1:v,port2:p}=new MessageChannel;v_(r,p),l=JE(v,[v])}break;case"RELEASE":l=void 0;break;default:return}}catch(u){l={value:u,[kh]:0}}Promise.resolve(l).catch(u=>({value:u,[kh]:0})).then(u=>{const[d,v]=pp(u);t.postMessage(Object.assign(Object.assign({},d),{id:a}),v),o==="RELEASE"&&(t.removeEventListener("message",n),GE(t),Sh in r&&typeof r[Sh]=="function"&&r[Sh]())}).catch(u=>{const[d,v]=pp({value:new TypeError("Unserializable return value"),[kh]:0});t.postMessage(Object.assign(Object.assign({},d),{id:a}),v)})}),t.start&&t.start()}function eY(r){return r.constructor.name==="MessagePort"}function GE(r){eY(r)&&r.close()}function KE(r,t){const e=new Map;return r.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const o=e.get(a.id);if(o)try{o(a)}finally{e.delete(a.id)}}),dy(r,e,[],t)}function Vd(r){if(r)throw new Error("Proxy has been released and is not useable")}function QE(r){return ml(r,new Map,{type:"RELEASE"}).then(()=>{GE(r)})}const dp=new WeakMap,hp="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const t=(dp.get(r)||0)-1;dp.set(r,t),t===0&&QE(r)});function tY(r,t){const e=(dp.get(t)||0)+1;dp.set(t,e),hp&&hp.register(r,t,r)}function rY(r){hp&&hp.unregister(r)}function dy(r,t,e=[],n=function(){}){let i=!1;const a=new Proxy(n,{get(o,s){if(Vd(i),s===qE)return()=>{rY(a),QE(r),t.clear(),i=!0};if(s==="then"){if(e.length===0)return{then:()=>a};const c=ml(r,t,{type:"GET",path:e.map(l=>l.toString())}).then(ps);return c.then.bind(c)}return dy(r,t,[...e,s])},set(o,s,c){Vd(i);const[l,u]=pp(c);return ml(r,t,{type:"SET",path:[...e,s].map(d=>d.toString()),value:l},u).then(ps)},apply(o,s,c){Vd(i);const l=e[e.length-1];if(l===WE)return ml(r,t,{type:"ENDPOINT"}).then(ps);if(l==="bind")return dy(r,t,e.slice(0,-1));const[u,d]=kb(c);return ml(r,t,{type:"APPLY",path:e.map(v=>v.toString()),argumentList:u},d).then(ps)},construct(o,s){Vd(i);const[c,l]=kb(s);return ml(r,t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:c},l).then(ps)}});return tY(a,r),a}function nY(r){return Array.prototype.concat.apply([],r)}function kb(r){const t=r.map(pp);return[t.map(e=>e[0]),nY(t.map(e=>e[1]))]}const YE=new WeakMap;function JE(r,t){return YE.set(r,t),r}function XE(r){return Object.assign(r,{[h_]:!0})}function iY(r,t=globalThis,e="*"){return{postMessage:(n,i)=>r.postMessage(n,e,i),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function pp(r){for(const[t,e]of p_)if(e.canHandle(r)){const[n,i]=e.serialize(r);return[{type:"HANDLER",name:t,value:n},i]}return[{type:"RAW",value:r},YE.get(r)||[]]}function ps(r){switch(r.type){case"HANDLER":return p_.get(r.name).deserialize(r.value);case"RAW":return r.value}}function ml(r,t,e,n){return new Promise(i=>{const a=aY();t.set(a,i),r.start&&r.start(),r.postMessage(Object.assign({id:a},e),n)})}function aY(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const oY=Object.freeze(Object.defineProperty({__proto__:null,createEndpoint:WE,expose:v_,finalizer:Sh,proxy:XE,proxyMarker:h_,releaseProxy:qE,transfer:JE,transferHandlers:p_,windowEndpoint:iY,wrap:KE},Symbol.toStringTag,{value:"Module"})),m_=zL(oY);var zd=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},Wd=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(mc,"__esModule",{value:!0});mc.BackgroundProcessorPipelineProxy=void 0;var sY=m_,lY=Sf,cY=function(){function r(t){this._benchmark=new lY.Benchmark,this._pipelineWorkerPromise=t}return r.prototype.loadTwilioTFLite=function(){return zd(this,void 0,void 0,function(){var t;return Wd(this,function(e){switch(e.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return t=e.sent(),[2,t.loadTwilioTFLite()]}})})},r.prototype.render=function(t){return zd(this,void 0,void 0,function(){var e,n,i,a;return Wd(this,function(o){switch(o.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return e=o.sent(),[4,e.render((0,sY.transfer)(t,[t]))];case 2:return n=o.sent(),a=(i=this._benchmark).merge,[4,e._benchmark];case 3:return a.apply(i,[o.sent()]),[2,n]}})})},r.prototype.setDeferInputFrameDownscale=function(t){return zd(this,void 0,void 0,function(){var e;return Wd(this,function(n){switch(n.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return e=n.sent(),[2,e.setDeferInputFrameDownscale(t)]}})})},r.prototype.setMaskBlurRadius=function(t){return zd(this,void 0,void 0,function(){var e;return Wd(this,function(n){switch(n.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return e=n.sent(),[2,e.setMaskBlurRadius(t)]}})})},r}();mc.BackgroundProcessorPipelineProxy=cY;var yv={},_v={},wv={},uY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wv,"__esModule",{value:!0});wv.SinglePassGaussianBlurFilterStage=void 0;var fY=vc;function dY(r){var t=1/Math.sqrt(2*Math.PI)/r;return"0".repeat(r+1).split("").map(function(e,n){return t*Math.exp(-.5*n*n/r/r)})}var hY=function(r){uY(t,r);function t(e,n,i,a,o){var s=this;o===void 0&&(o=a+1);var c=e.canvas,l=c.height,u=c.width;return s=r.call(this,{textureName:"u_inputTexture",textureUnit:a},{fragmentShaderSource:`#version 300 es
          precision highp float;

          uniform sampler2D u_inputTexture;
          uniform vec2 u_texelSize;
          uniform float u_direction;
          uniform float u_radius;
          uniform float u_gaussianBlurWeights[128];

          in vec2 v_texCoord;

          out vec4 outColor;

          void main() {
            float totalWeight = u_gaussianBlurWeights[0];
            vec3 newColor = totalWeight * texture(u_inputTexture, v_texCoord).rgb;

            for (float i = 1.0; i <= u_radius; i += 1.0) {
              float x = (1.0 - u_direction) * i;
              float y = u_direction * i;

              vec2 shift = vec2(x, y) * u_texelSize;
              vec2 coord = vec2(v_texCoord + shift);
              float weight = u_gaussianBlurWeights[int(i)];
              newColor += weight * texture(u_inputTexture, coord).rgb;
              totalWeight += weight;

              shift = vec2(-x, -y) * u_texelSize;
              coord = vec2(v_texCoord + shift);
              newColor += weight * texture(u_inputTexture, coord).rgb;
              totalWeight += weight;
            }

            newColor /= totalWeight;
            outColor = vec4(newColor, 1.0);
          }
        `,glOut:e,height:l,textureUnit:o,type:i,width:u,uniformVars:[{name:"u_direction",type:"float",values:[n==="vertical"?1:0]},{name:"u_texelSize",type:"float",values:[1/u,1/l]}]})||this,s.updateRadius(0),s}return t.prototype.updateRadius=function(e){this._setUniformVars([{name:"u_radius",type:"float",values:[e]},{name:"u_gaussianBlurWeights",type:"float:v",values:dY(e)}])},t}(fY.WebGL2Pipeline.ProcessingStage);wv.SinglePassGaussianBlurFilterStage=hY;var pY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_v,"__esModule",{value:!0});_v.GaussianBlurFilterPipeline=void 0;var vY=vc,Pb=wv,mY=function(r){pY(t,r);function t(e,n){var i=r.call(this)||this;i._isWebGL2Supported=!0,i._outputCanvas=e,i._blurFilterRadius=n;var a=e.getContext("webgl2");return a?i.initializeWebGL2Pipeline(a):(i._isWebGL2Supported=!1,console.warn("Downgraded to Canvas2D for Gaussian blur due to missing WebGL2 support.")),i}return t.prototype.render=function(){this._isWebGL2Supported?r.prototype.render.call(this):this._renderFallback()},t.prototype._renderFallback=function(){var e=this._outputCanvas.getContext("2d");e.filter="blur(".concat(this._blurFilterRadius,"px)")},t.prototype.initializeWebGL2Pipeline=function(e){this.addStage(new Pb.SinglePassGaussianBlurFilterStage(e,"horizontal","texture",0,2)),this.addStage(new Pb.SinglePassGaussianBlurFilterStage(e,"vertical","canvas",2))},t.prototype.updateRadius=function(e){this._blurFilterRadius=e,this._isWebGL2Supported&&this._stages.forEach(function(n){return n.updateRadius(e)})},t.prototype.cleanUp=function(){this._isWebGL2Supported&&r.prototype.cleanUp.call(this)},t}(vY.WebGL2Pipeline);_v.GaussianBlurFilterPipeline=mY;var gY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yY=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},_Y=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(yv,"__esModule",{value:!0});yv.GaussianBlurBackgroundProcessorPipeline=void 0;var wY=ci,bY=_v,xY=pc,SY=function(r){gY(t,r);function t(e){var n=r.call(this,e,function(){return n._resetGaussianBlurFilterPipeline()})||this;n._gaussianBlurFilterPipeline=null;var i=e.blurFilterRadius;return n._blurFilterRadius=i,n}return t.prototype.setBlurFilterRadius=function(e){var n;return yY(this,void 0,void 0,function(){return _Y(this,function(i){return this._blurFilterRadius=e,[2,(n=this._gaussianBlurFilterPipeline)===null||n===void 0?void 0:n.updateRadius(this._blurFilterRadius)]})})},t.prototype._setBackground=function(e){var n=this,i=n._blurFilterRadius,a=n._outputCanvas,o=n._webgl2Canvas,s=a.getContext("2d");if(wY.isCanvasBlurSupported){s.filter="blur(".concat(i,"px)"),s.drawImage(e,0,0),s.filter="none";return}this._gaussianBlurFilterPipeline||this._resetGaussianBlurFilterPipeline(),this._gaussianBlurFilterPipeline.render(),s.drawImage(o,0,0)},t.prototype._resetGaussianBlurFilterPipeline=function(){var e,n=this,i=n._blurFilterRadius,a=n._webgl2Canvas;(e=this._gaussianBlurFilterPipeline)===null||e===void 0||e.cleanUp(),this._gaussianBlurFilterPipeline=new bY.GaussianBlurFilterPipeline(a,i),this._gaussianBlurFilterPipeline.updateRadius(i)},t}(xY.BackgroundProcessorPipeline);yv.GaussianBlurBackgroundProcessorPipeline=SY;var bv={},Pf={},Tb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},Eb=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.CorsWorker=void 0;var kY=function(r){var t=fetch;fetch=function(e,n){return t("".concat(r).concat(e),n)}},PY=function(r){var t=importScripts;importScripts=function(e){return t("".concat(r).concat(e))}},TY=function(){function r(t){!/:\/\//.test(t)||new RegExp("^".concat(window.location.origin)).test(t)?this.workerPromise=this._loadSameOrigin(t):this.workerPromise=this._loadCrossOrigin(t)}return r.prototype._loadCrossOrigin=function(t){return Tb(this,void 0,void 0,function(){var e,n,i,a,o,s,c;return Eb(this,function(l){switch(l.label){case 0:return[4,fetch(t)];case 1:return e=l.sent(),[4,e.text()];case 2:return n=l.sent(),i="application/javascript",a="".concat(t.split("/").slice(0,-1).join("/"),"/"),o=["data:".concat(i,","),encodeURIComponent("(".concat(kY,')("').concat(a,'");')),encodeURIComponent("(".concat(PY,')("').concat(a,'");')),encodeURIComponent(n)].join(""),s=new Blob(['importScripts("'.concat(o,'")')],{type:i}),c=URL.createObjectURL(s),[2,new Worker(c)]}})})},r.prototype._loadSameOrigin=function(t){return Tb(this,void 0,void 0,function(){return Eb(this,function(e){return[2,new Worker(t)]})})},r}();Pf.CorsWorker=TY;var EY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),CY=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},LY=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(bv,"__esModule",{value:!0});bv.GaussianBlurBackgroundProcessorPipelineProxy=void 0;var OY=m_,AY=ar,NY=Pf,RY=mc,mg,jY=function(r){EY(t,r);function t(e){var n=this,i=new NY.CorsWorker("".concat(e.assetsPath).concat(AY.TWILIO_GAUSSIAN_BLUR_BACKGROUND_PROCESSOR_PIPELINE_WORKER)),a=i.workerPromise.then(function(o){return mg||(mg=(0,OY.wrap)(o)),new mg(e)});return n=r.call(this,a)||this,n._pipelineWorkerPromise=a,n}return t.prototype.setBlurFilterRadius=function(e){return CY(this,void 0,void 0,function(){var n;return LY(this,function(i){switch(i.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return n=i.sent(),[2,n.setBlurFilterRadius(e)]}})})},t}(RY.BackgroundProcessorPipelineProxy);bv.GaussianBlurBackgroundProcessorPipelineProxy=jY;var xv={},gc={};Object.defineProperty(gc,"__esModule",{value:!0});gc.ImageFit=void 0;var Cb;(function(r){r.Contain="Contain",r.Cover="Cover",r.Fill="Fill",r.None="None"})(Cb||(gc.ImageFit=Cb={}));var IY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},Ob=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(xv,"__esModule",{value:!0});xv.VirtualBackgroundProcessorPipeline=void 0;var qd=gc,MY=pc,DY=function(r){IY(t,r);function t(e){var n=r.call(this,e)||this,i=e.fitType;return n._backgroundImage=null,n._fitType=i,n}return t.prototype.setBackgroundImage=function(e){var n;return Lb(this,void 0,void 0,function(){return Ob(this,function(i){return(n=this._backgroundImage)===null||n===void 0||n.close(),this._backgroundImage=e,[2]})})},t.prototype.setFitType=function(e){return Lb(this,void 0,void 0,function(){return Ob(this,function(n){return this._fitType=e,[2]})})},t.prototype._setBackground=function(){var e=this,n=e._backgroundImage,i=e._fitType,a=e._outputCanvas;if(n){var o=a.getContext("2d"),s=n.width,c=n.height,l=a.width,u=a.height;if(i===qd.ImageFit.Fill)o.drawImage(n,0,0,s,c,0,0,l,u);else if(i===qd.ImageFit.None)o.drawImage(n,0,0,s,c);else{var d=this._getFitPosition(s,c,l,u,i),v=d.x,p=d.y,y=d.w,_=d.h;o.drawImage(n,0,0,s,c,v,p,y,_)}}},t.prototype._getFitPosition=function(e,n,i,a,o){var s=i/e,c=i,l=s*n;(o===qd.ImageFit.Contain&&l>a||o===qd.ImageFit.Cover&&a>l)&&(s=a/l,c=s*c,l=a);var u=(i-c)/2,d=(a-l)/2;return{x:u,y:d,w:c,h:l}},t}(MY.BackgroundProcessorPipeline);xv.VirtualBackgroundProcessorPipeline=DY;var Sv={},FY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ab=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},Nb=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.VirtualBackgroundProcessorPipelineProxy=void 0;var Rb=m_,BY=ar,UY=Pf,$Y=mc,gg,VY=function(r){FY(t,r);function t(e){var n=this,i=new UY.CorsWorker("".concat(e.assetsPath).concat(BY.TWILIO_VIRTUAL_BACKGROUND_PROCESSOR_PIPELINE_WORKER)),a=i.workerPromise.then(function(o){return gg||(gg=(0,Rb.wrap)(o)),new gg(e)});return n=r.call(this,a)||this,n._pipelineWorkerPromise=a,n}return t.prototype.setBackgroundImage=function(e){return Ab(this,void 0,void 0,function(){var n;return Nb(this,function(i){switch(i.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return n=i.sent(),[2,n.setBackgroundImage((0,Rb.transfer)(e,[e]))]}})})},t.prototype.setFitType=function(e){return Ab(this,void 0,void 0,function(){var n;return Nb(this,function(i){switch(i.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return n=i.sent(),[2,n.setFitType(e)]}})})},t}($Y.BackgroundProcessorPipelineProxy);Sv.VirtualBackgroundProcessorPipelineProxy=VY;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.VirtualBackgroundProcessorPipelineProxy=r.VirtualBackgroundProcessorPipeline=r.GaussianBlurBackgroundProcessorPipelineProxy=r.GaussianBlurBackgroundProcessorPipeline=r.BackgroundProcessorPipelineProxy=r.BackgroundProcessorPipeline=void 0;var t=pc;Object.defineProperty(r,"BackgroundProcessorPipeline",{enumerable:!0,get:function(){return t.BackgroundProcessorPipeline}});var e=mc;Object.defineProperty(r,"BackgroundProcessorPipelineProxy",{enumerable:!0,get:function(){return e.BackgroundProcessorPipelineProxy}});var n=yv;Object.defineProperty(r,"GaussianBlurBackgroundProcessorPipeline",{enumerable:!0,get:function(){return n.GaussianBlurBackgroundProcessorPipeline}});var i=bv;Object.defineProperty(r,"GaussianBlurBackgroundProcessorPipelineProxy",{enumerable:!0,get:function(){return i.GaussianBlurBackgroundProcessorPipelineProxy}});var a=xv;Object.defineProperty(r,"VirtualBackgroundProcessorPipeline",{enumerable:!0,get:function(){return a.VirtualBackgroundProcessorPipeline}});var o=Sv;Object.defineProperty(r,"VirtualBackgroundProcessorPipelineProxy",{enumerable:!0,get:function(){return o.VirtualBackgroundProcessorPipelineProxy}})})(cv);var zY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(r,t||[])).next())})},Ib=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(bf,"__esModule",{value:!0});bf.BackgroundProcessor=void 0;var yg=ar,WY=xf,qY=lv,HY=cv,GY=function(r){zY(t,r);function t(e,n){var i=r.call(this)||this;i._deferInputFrameDownscale=!1,i._inputFrameCanvas=new OffscreenCanvas(1,1),i._inputFrameContext=i._inputFrameCanvas.getContext("2d",{willReadFrequently:!0}),i._isSimdEnabled=null,i._maskBlurRadius=yg.MASK_BLUR_RADIUS,i._outputFrameBuffer=null,i._outputFrameBufferContext=null,i._version=WY.version;var a=n.assetsPath,o=n.deferInputFrameDownscale,s=o===void 0?i._deferInputFrameDownscale:o,c=n.maskBlurRadius,l=c===void 0?i._maskBlurRadius:c;if(typeof a!="string")throw new Error("assetsPath parameter must be a string");return i._assetsPath=a.replace(/([^/])$/,"$1/"),i._backgroundProcessorPipeline=e,i._benchmark=i._backgroundProcessorPipeline._benchmark,i.deferInputFrameDownscale=s,i.maskBlurRadius=l,i}return Object.defineProperty(t.prototype,"deferInputFrameDownscale",{get:function(){return this._deferInputFrameDownscale},set:function(e){typeof e!="boolean"&&(console.warn("Provided deferInputFrameDownscale is not a boolean."),e=this._deferInputFrameDownscale),this._deferInputFrameDownscale!==e&&(this._deferInputFrameDownscale=e,this._backgroundProcessorPipeline.setDeferInputFrameDownscale(this._deferInputFrameDownscale).catch(function(){}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskBlurRadius",{get:function(){return this._maskBlurRadius},set:function(e){(typeof e!="number"||e<0)&&(console.warn("Valid mask blur radius not found. Using ".concat(yg.MASK_BLUR_RADIUS," as default.")),e=yg.MASK_BLUR_RADIUS),this._maskBlurRadius!==e&&(this._maskBlurRadius=e,this._backgroundProcessorPipeline.setMaskBlurRadius(this._maskBlurRadius).catch(function(){}))},enumerable:!1,configurable:!0}),t.prototype.loadModel=function(){return jb(this,void 0,void 0,function(){var e;return Ib(this,function(n){switch(n.label){case 0:return e=this,[4,this._backgroundProcessorPipeline.loadTwilioTFLite()];case 1:return e._isSimdEnabled=n.sent(),[2]}})})},t.prototype.processFrame=function(e,n){return jb(this,void 0,void 0,function(){var i,a,o,s,c,l,u,d,v,p,y;return Ib(this,function(_){switch(_.label){case 0:if(!e||!n)throw new Error("Missing input or output frame buffer");return i=this,a=i._backgroundProcessorPipeline,o=i._benchmark,s=i._outputFrameBufferContext,o.end("captureFrameDelay"),o.end("totalProcessingDelay"),o.start("totalProcessingDelay"),o.start("processFrameDelay"),c=this._getFrameDimensions(e),l=c.width,u=c.height,this._outputFrameBuffer!==n&&(this._outputFrameBuffer=n,this._outputFrameBufferContext=n.getContext("2d")||n.getContext("bitmaprenderer")),this._inputFrameCanvas.width!==l&&(this._inputFrameCanvas.width=l),this._inputFrameCanvas.height!==u&&(this._inputFrameCanvas.height=u),e instanceof HTMLVideoElement?(this._inputFrameContext.drawImage(e,0,0),d=this._inputFrameCanvas):d=e,a instanceof HY.BackgroundProcessorPipeline?[4,a.render(d)]:[3,2];case 1:return p=_.sent(),[3,4];case 2:return[4,a.render(d instanceof OffscreenCanvas?d.transferToImageBitmap():d)];case 3:p=_.sent(),_.label=4;case 4:return v=p,s instanceof ImageBitmapRenderingContext?(y=v instanceof OffscreenCanvas?v.transferToImageBitmap():v,s.transferFromImageBitmap(y)):s instanceof CanvasRenderingContext2D&&v&&s.drawImage(v,0,0),o.end("processFrameDelay"),o.start("captureFrameDelay"),[2]}})})},t.prototype._getFrameDimensions=function(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e instanceof VideoFrame?{width:e.displayWidth,height:e.displayHeight}:{width:e.width,height:e.height}},t}(qY.Processor);bf.BackgroundProcessor=GY;var KY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(sv,"__esModule",{value:!0});sv.GaussianBlurBackgroundProcessor=void 0;var ou=ar,QY=bf,Mb=cv,YY=function(r){KY(t,r);function t(e){var n=this,i=e.blurFilterRadius,a=i===void 0?ou.BLUR_FILTER_RADIUS:i,o=e.deferInputFrameDownscale,s=o===void 0?!1:o,c=e.maskBlurRadius,l=c===void 0?ou.MASK_BLUR_RADIUS:c,u=e.useWebWorker,d=u===void 0?!0:u,v=e.assetsPath.replace(/([^/])$/,"$1/"),p=d?Mb.GaussianBlurBackgroundProcessorPipelineProxy:Mb.GaussianBlurBackgroundProcessorPipeline,y=new p({assetsPath:v,blurFilterRadius:a,deferInputFrameDownscale:s,maskBlurRadius:l});return n=r.call(this,y,e)||this,n._blurFilterRadius=ou.BLUR_FILTER_RADIUS,n._name="GaussianBlurBackgroundProcessor",n.blurFilterRadius=e.blurFilterRadius,n}return Object.defineProperty(t.prototype,"blurFilterRadius",{get:function(){return this._blurFilterRadius},set:function(e){e||(console.warn("Valid blur filter radius not found. Using ".concat(ou.BLUR_FILTER_RADIUS," as default.")),e=ou.BLUR_FILTER_RADIUS),this._blurFilterRadius=e,this._backgroundProcessorPipeline.setBlurFilterRadius(this._blurFilterRadius).catch(function(){})},enumerable:!1,configurable:!0}),t}(QY.BackgroundProcessor);sv.GaussianBlurBackgroundProcessor=YY;var kv={},JY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(kv,"__esModule",{value:!0});kv.VirtualBackgroundProcessor=void 0;var Hd=gc,XY=ar,ZY=bf,Db=cv,eJ=function(r){JY(t,r);function t(e){var n=this,i=e.backgroundImage,a=e.deferInputFrameDownscale,o=a===void 0?!1:a,s=e.fitType,c=s===void 0?Hd.ImageFit.Fill:s,l=e.maskBlurRadius,u=l===void 0?XY.MASK_BLUR_RADIUS:l,d=e.useWebWorker,v=d===void 0?!0:d,p=e.assetsPath.replace(/([^/])$/,"$1/"),y=v?Db.VirtualBackgroundProcessorPipelineProxy:Db.VirtualBackgroundProcessorPipeline,_=new y({assetsPath:p,deferInputFrameDownscale:o,fitType:c,maskBlurRadius:u});return n=r.call(this,_,e)||this,n._name="VirtualBackgroundProcessor",n.backgroundImage=i,n.fitType=c,n}return Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this._backgroundImage},set:function(e){var n=this;if(!e||!e.complete||!e.naturalHeight)throw new Error("Invalid image. Make sure that the image is an HTMLImageElement and has been successfully loaded");this._backgroundImage=e,createImageBitmap(this._backgroundImage).then(function(i){return n._backgroundProcessorPipeline.setBackgroundImage(i)}).catch(function(){})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fitType",{get:function(){return this._fitType},set:function(e){var n=Object.keys(Hd.ImageFit);n.includes(e)||(console.warn("Valid fitType not found. Using '".concat(Hd.ImageFit.Fill,"' as default.")),e=Hd.ImageFit.Fill),this._fitType=e,this._backgroundProcessorPipeline.setFitType(this._fitType).catch(function(){})},enumerable:!1,configurable:!0}),t}(ZY.BackgroundProcessor);kv.VirtualBackgroundProcessor=eJ;(function(r){var t=A&&A.__assign||function(){return t=Object.assign||function(s){for(var c,l=1,u=arguments.length;l<u;l++){c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])}return s},t.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.VirtualBackgroundProcessor=r.version=r.isSupported=r.ImageFit=r.GaussianBlurBackgroundProcessor=void 0;var e=sv;Object.defineProperty(r,"GaussianBlurBackgroundProcessor",{enumerable:!0,get:function(){return e.GaussianBlurBackgroundProcessor}});var n=kv;Object.defineProperty(r,"VirtualBackgroundProcessor",{enumerable:!0,get:function(){return n.VirtualBackgroundProcessor}});var i=gc;Object.defineProperty(r,"ImageFit",{enumerable:!0,get:function(){return i.ImageFit}});var a=ci;Object.defineProperty(r,"isSupported",{enumerable:!0,get:function(){return a.isSupported}});var o=xf;Object.defineProperty(r,"version",{enumerable:!0,get:function(){return o.version}}),typeof window<"u"&&(window.Twilio=window.Twilio||{},window.Twilio.VideoProcessors=t(t({},window.Twilio.VideoProcessors),{GaussianBlurBackgroundProcessor:e.GaussianBlurBackgroundProcessor,ImageFit:i.ImageFit,isSupported:a.isSupported,version:o.version,VirtualBackgroundProcessor:n.VirtualBackgroundProcessor}))})(uy);const tJ=()=>{const[r,t]=he.useState("none"),[e,n]=he.useState(!1),[i,a]=he.useState(null),o=he.useCallback(async l=>{try{n(!0),i&&(await l.removeProcessor(i),a(null)),t("none")}catch(u){console.error("Error removing background effect:",u)}finally{n(!1)}},[i]),s=he.useCallback(async l=>{try{n(!0),i&&await l.removeProcessor(i);const u=new uy.GaussianBlurBackgroundProcessor({assetsPath:"/twilio-processors",maskBlurRadius:15,blurFilterRadius:15});await u.loadModel(),await l.addProcessor(u),a(u),t("blur")}catch(u){console.error("Error applying blur effect:",u),t("none")}finally{n(!1)}},[i]),c=he.useCallback(async(l,u)=>{try{n(!0),i&&await l.removeProcessor(i);const d=new Image;d.crossOrigin="anonymous",d.src=u,await new Promise((p,y)=>{d.onload=p,d.onerror=y});const v=new uy.VirtualBackgroundProcessor({assetsPath:"/twilio-processors",backgroundImage:d,maskBlurRadius:5});await v.loadModel(),await l.addProcessor(v),a(v),t("virtual")}catch(d){console.error("Error applying virtual background:",d),t("none")}finally{n(!1)}},[i]);return{currentEffect:r,isProcessing:e,applyBlur:s,applyVirtualBackground:c,removeEffect:o}},na=Object.create(null);na.open="0";na.close="1";na.ping="2";na.pong="3";na.message="4";na.upgrade="5";na.noop="6";const Ph=Object.create(null);Object.keys(na).forEach(r=>{Ph[na[r]]=r});const hy={type:"error",data:"parser error"},ZE=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",eC=typeof ArrayBuffer=="function",tC=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,g_=({type:r,data:t},e,n)=>ZE&&t instanceof Blob?e?n(t):Fb(t,n):eC&&(t instanceof ArrayBuffer||tC(t))?e?n(t):Fb(new Blob([t]),n):n(na[r]+(t||"")),Fb=(r,t)=>{const e=new FileReader;return e.onload=function(){const n=e.result.split(",")[1];t("b"+(n||""))},e.readAsDataURL(r)};function Bb(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let _g;function rJ(r,t){if(ZE&&r.data instanceof Blob)return r.data.arrayBuffer().then(Bb).then(t);if(eC&&(r.data instanceof ArrayBuffer||tC(r.data)))return t(Bb(r.data));g_(r,!1,e=>{_g||(_g=new TextEncoder),t(_g.encode(e))})}const Ub="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<Ub.length;r++)yu[Ub.charCodeAt(r)]=r;const nJ=r=>{let t=r.length*.75,e=r.length,n,i=0,a,o,s,c;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);const l=new ArrayBuffer(t),u=new Uint8Array(l);for(n=0;n<e;n+=4)a=yu[r.charCodeAt(n)],o=yu[r.charCodeAt(n+1)],s=yu[r.charCodeAt(n+2)],c=yu[r.charCodeAt(n+3)],u[i++]=a<<2|o>>4,u[i++]=(o&15)<<4|s>>2,u[i++]=(s&3)<<6|c&63;return l},iJ=typeof ArrayBuffer=="function",y_=(r,t)=>{if(typeof r!="string")return{type:"message",data:rC(r,t)};const e=r.charAt(0);return e==="b"?{type:"message",data:aJ(r.substring(1),t)}:Ph[e]?r.length>1?{type:Ph[e],data:r.substring(1)}:{type:Ph[e]}:hy},aJ=(r,t)=>{if(iJ){const e=nJ(r);return rC(e,t)}else return{base64:!0,data:r}},rC=(r,t)=>{switch(t){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},nC="",oJ=(r,t)=>{const e=r.length,n=new Array(e);let i=0;r.forEach((a,o)=>{g_(a,!1,s=>{n[o]=s,++i===e&&t(n.join(nC))})})},sJ=(r,t)=>{const e=r.split(nC),n=[];for(let i=0;i<e.length;i++){const a=y_(e[i],t);if(n.push(a),a.type==="error")break}return n};function lJ(){return new TransformStream({transform(r,t){rJ(r,e=>{const n=e.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,n)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(e)})}})}let wg;function Gd(r){return r.reduce((t,e)=>t+e.length,0)}function Kd(r,t){if(r[0].length===t)return r.shift();const e=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)e[i]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),e}function cJ(r,t){wg||(wg=new TextDecoder);const e=[];let n=0,i=-1,a=!1;return new TransformStream({transform(o,s){for(e.push(o);;){if(n===0){if(Gd(e)<1)break;const c=Kd(e,1);a=(c[0]&128)===128,i=c[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Gd(e)<2)break;const c=Kd(e,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Gd(e)<8)break;const c=Kd(e,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){s.enqueue(hy);break}i=u*Math.pow(2,32)+l.getUint32(4),n=3}else{if(Gd(e)<i)break;const c=Kd(e,i);s.enqueue(y_(a?c:wg.decode(c),t)),n=0}if(i===0||i>r){s.enqueue(hy);break}}}})}const iC=4;function Or(r){if(r)return uJ(r)}function uJ(r){for(var t in Or.prototype)r[t]=Or.prototype[t];return r}Or.prototype.on=Or.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};Or.prototype.once=function(r,t){function e(){this.off(r,e),t.apply(this,arguments)}return e.fn=t,this.on(r,e),this};Or.prototype.off=Or.prototype.removeListener=Or.prototype.removeAllListeners=Or.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,i=0;i<e.length;i++)if(n=e[i],n===t||n.fn===t){e.splice(i,1);break}return e.length===0&&delete this._callbacks["$"+r],this};Or.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+r],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,i=e.length;n<i;++n)e[n].apply(this,t)}return this};Or.prototype.emitReserved=Or.prototype.emit;Or.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Or.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Pv=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),si=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),fJ="arraybuffer";function aC(r,...t){return t.reduce((e,n)=>(r.hasOwnProperty(n)&&(e[n]=r[n]),e),{})}const dJ=si.setTimeout,hJ=si.clearTimeout;function Tv(r,t){t.useNativeTimers?(r.setTimeoutFn=dJ.bind(si),r.clearTimeoutFn=hJ.bind(si)):(r.setTimeoutFn=si.setTimeout.bind(si),r.clearTimeoutFn=si.clearTimeout.bind(si))}const pJ=1.33;function vJ(r){return typeof r=="string"?mJ(r):Math.ceil((r.byteLength||r.size)*pJ)}function mJ(r){let t=0,e=0;for(let n=0,i=r.length;n<i;n++)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function oC(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function gJ(r){let t="";for(let e in r)r.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t}function yJ(r){let t={},e=r.split("&");for(let n=0,i=e.length;n<i;n++){let a=e[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class _J extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class __ extends Or{constructor(t){super(),this.writable=!1,Tv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new _J(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=y_(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=gJ(t);return e.length?"?"+e:""}}class wJ extends __{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};sJ(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,oJ(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=oC()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let sC=!1;try{sC=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const bJ=sC;function xJ(){}class SJ extends wJ{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}}class ra extends Or{constructor(t,e,n){super(),this.createRequest=t,Tv(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const e=aC(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=ra.requestsCount++,ra.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=xJ,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ra.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ra.requestsCount=0;ra.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$b);else if(typeof addEventListener=="function"){const r="onpagehide"in si?"pagehide":"unload";addEventListener(r,$b,!1)}}function $b(){for(let r in ra.requests)ra.requests.hasOwnProperty(r)&&ra.requests[r].abort()}const kJ=function(){const r=lC({xdomain:!1});return r&&r.responseType!==null}();class PJ extends SJ{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=kJ&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new ra(lC,this.uri(),t)}}function lC(r){const t=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||bJ))return new XMLHttpRequest}catch{}if(!t)try{return new si[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const cC=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class TJ extends __{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,n=cC?{}:aC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],i=e===t.length-1;g_(n,this.supportsBinary,a=>{try{this.doWrite(n,a)}catch{}i&&Pv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=oC()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const bg=si.WebSocket||si.MozWebSocket;class EJ extends TJ{createSocket(t,e,n){return cC?new bg(t,e,n):e?new bg(t,e):new bg(t)}doWrite(t,e){this.ws.send(e)}}class CJ extends __{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=cJ(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),i=lJ();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{n.read().then(({done:s,value:c})=>{s||(this.onPacket(c),a())}).catch(s=>{})};a();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],i=e===t.length-1;this._writer.write(n).then(()=>{i&&Pv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const LJ={websocket:EJ,webtransport:CJ,polling:PJ},OJ=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,AJ=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function py(r){if(r.length>8e3)throw"URI too long";const t=r,e=r.indexOf("["),n=r.indexOf("]");e!=-1&&n!=-1&&(r=r.substring(0,e)+r.substring(e,n).replace(/:/g,";")+r.substring(n,r.length));let i=OJ.exec(r||""),a={},o=14;for(;o--;)a[AJ[o]]=i[o]||"";return e!=-1&&n!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=NJ(a,a.path),a.queryKey=RJ(a,a.query),a}function NJ(r,t){const e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function RJ(r,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,a){i&&(e[i]=a)}),e}const vy=typeof addEventListener=="function"&&typeof removeEventListener=="function",Th=[];vy&&addEventListener("offline",()=>{Th.forEach(r=>r())},!1);class Co extends Or{constructor(t,e){if(super(),this.binaryType=fJ,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const n=py(t);e.hostname=n.host,e.secure=n.protocol==="https"||n.protocol==="wss",e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=py(e.host).host);Tv(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=yJ(this.opts.query)),vy&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Th.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=iC,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Co.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Co.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+=vJ(i)),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Pv(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,n){return this._sendPacket("message",t,e,n),this}send(t,e,n){return this._sendPacket("message",t,e,n),this}_sendPacket(t,e,n,i){if(typeof e=="function"&&(i=e,e=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const a={type:t,data:e,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Co.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),vy&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Th.indexOf(this._offlineEventListener);n!==-1&&Th.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}Co.protocol=iC;class jJ extends Co{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;Co.priorWebsocketSuccess=!1;const i=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Co.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=e.name,this.emitReserved("upgradeError",v)}}))};function a(){n||(n=!0,u(),e.close(),e=null)}const o=d=>{const v=new Error("probe error: "+d);v.transport=e.name,a(),this.emitReserved("upgradeError",v)};function s(){o("transport closed")}function c(){o("socket closed")}function l(d){e&&d.name!==e.name&&a()}const u=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",s),this.off("close",c),this.off("upgrading",l)};e.once("open",i),e.once("error",o),e.once("close",s),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}let IJ=class extends jJ{constructor(t,e={}){const n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>LJ[i]).filter(i=>!!i)),super(t,n)}};function MJ(r,t="",e){let n=r;e=e||typeof location<"u"&&location,r==null&&(r=e.protocol+"//"+e.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=e.protocol+r:r=e.host+r),/^(https?|wss?):\/\//.test(r)||(typeof e<"u"?r=e.protocol+"//"+r:r="https://"+r),n=py(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const a=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(e&&e.port===n.port?"":":"+n.port),n}const DJ=typeof ArrayBuffer=="function",FJ=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,uC=Object.prototype.toString,BJ=typeof Blob=="function"||typeof Blob<"u"&&uC.call(Blob)==="[object BlobConstructor]",UJ=typeof File=="function"||typeof File<"u"&&uC.call(File)==="[object FileConstructor]";function w_(r){return DJ&&(r instanceof ArrayBuffer||FJ(r))||BJ&&r instanceof Blob||UJ&&r instanceof File}function Eh(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let e=0,n=r.length;e<n;e++)if(Eh(r[e]))return!0;return!1}if(w_(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Eh(r.toJSON(),!0);for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&Eh(r[e]))return!0;return!1}function $J(r){const t=[],e=r.data,n=r;return n.data=my(e,t),n.attachments=t.length,{packet:n,buffers:t}}function my(r,t){if(!r)return r;if(w_(r)){const e={_placeholder:!0,num:t.length};return t.push(r),e}else if(Array.isArray(r)){const e=new Array(r.length);for(let n=0;n<r.length;n++)e[n]=my(r[n],t);return e}else if(typeof r=="object"&&!(r instanceof Date)){const e={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=my(r[n],t));return e}return r}function VJ(r,t){return r.data=gy(r.data,t),delete r.attachments,r}function gy(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=gy(r[e],t);else if(typeof r=="object")for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=gy(r[e],t));return r}const zJ=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],WJ=5;var Tt;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Tt||(Tt={}));class qJ{constructor(t){this.replacer=t}encode(t){return(t.type===Tt.EVENT||t.type===Tt.ACK)&&Eh(t)?this.encodeAsBinary({type:t.type===Tt.EVENT?Tt.BINARY_EVENT:Tt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Tt.BINARY_EVENT||t.type===Tt.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=$J(t),n=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(n),i}}function Vb(r){return Object.prototype.toString.call(r)==="[object Object]"}class b_ extends Or{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===Tt.BINARY_EVENT;n||e.type===Tt.BINARY_ACK?(e.type=n?Tt.EVENT:Tt.ACK,this.reconstructor=new HJ(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(w_(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(Tt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Tt.BINARY_EVENT||n.type===Tt.BINARY_ACK){const a=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(a,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(e+1)==="/"){const a=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(a,e)}else n.nsp="/";const i=t.charAt(e+1);if(i!==""&&Number(i)==i){const a=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}n.id=Number(t.substring(a,e+1))}if(t.charAt(++e)){const a=this.tryParse(t.substr(e));if(b_.isPayloadValid(n.type,a))n.data=a;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case Tt.CONNECT:return Vb(e);case Tt.DISCONNECT:return e===void 0;case Tt.CONNECT_ERROR:return typeof e=="string"||Vb(e);case Tt.EVENT:case Tt.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&zJ.indexOf(e[0])===-1);case Tt.ACK:case Tt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class HJ{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=VJ(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const GJ=Object.freeze(Object.defineProperty({__proto__:null,Decoder:b_,Encoder:qJ,get PacketType(){return Tt},protocol:WJ},Symbol.toStringTag,{value:"Module"}));function Ti(r,t,e){return r.on(t,e),function(){r.off(t,e)}}const KJ=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fC extends Or{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ti(t,"open",this.onopen.bind(this)),Ti(t,"packet",this.onpacket.bind(this)),Ti(t,"error",this.onerror.bind(this)),Ti(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,i,a;if(KJ.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:Tt.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const u=this.ids++,d=e.pop();this._registerAckCallback(u,d),o.id=u}const s=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!s||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[t]=e;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);e.call(this,new Error("operation has timed out"))},i),o=(...s)=>{this.io.clearTimeoutFn(a),e.apply(this,s)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((n,i)=>{const a=(o,s)=>o?i(o):n(s);a.withError=!0,e.push(a),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(i)):(this._queue.shift(),e&&e(null,...a)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Tt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Tt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tt.EVENT:case Tt.BINARY_EVENT:this.onevent(t);break;case Tt.ACK:case Tt.BINARY_ACK:this.onack(t);break;case Tt.DISCONNECT:this.ondisconnect();break;case Tt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...i){n||(n=!0,e.packet({type:Tt.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Tt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function yc(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}yc.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*r);r=Math.floor(t*10)&1?r+e:r-e}return Math.min(r,this.max)|0};yc.prototype.reset=function(){this.attempts=0};yc.prototype.setMin=function(r){this.ms=r};yc.prototype.setMax=function(r){this.max=r};yc.prototype.setJitter=function(r){this.jitter=r};class yy extends Or{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Tv(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new yc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||GJ;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new IJ(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=Ti(e,"open",function(){n.onopen(),t&&t()}),a=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),t?t(s):this.maybeReconnectOnOpen()},o=Ti(e,"error",a);if(this._timeout!==!1){const s=this._timeout,c=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),e.close()},s);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ti(t,"ping",this.onping.bind(this)),Ti(t,"data",this.ondata.bind(this)),Ti(t,"error",this.onerror.bind(this)),Ti(t,"close",this.onclose.bind(this)),Ti(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Pv(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new fC(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const su={};function Lu(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};const e=MJ(r,t.path||"/socket.io"),n=e.source,i=e.id,a=e.path,o=su[i]&&a in su[i].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return s?c=new yy(n,t):(su[i]||(su[i]=new yy(n,t)),c=su[i]),e.query&&!t.query&&(t.query=e.queryKey),c.socket(e.path,t)}Object.assign(Lu,{Manager:yy,Socket:fC,io:Lu,connect:Lu});const QJ=({roomName:r,doctorIdentity:t,role:e,enabled:n})=>{const[i,a]=he.useState(!1),[o,s]=he.useState(!1),[c,l]=he.useState(!1),[u,d]=he.useState(null),[v,p]=he.useState(null),y=he.useRef(null);he.useEffect(()=>{const x=window.location.origin;console.log("[Postural Analysis] Connecting to Socket.io:",x);const k=Lu(`${x}/telemedicine`,{transports:["websocket","polling"],reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5});return y.current=k,k.on("connect",()=>{console.log("[Postural Analysis] Connected to Socket.io"),a(!0),p(null)}),k.on("disconnect",()=>{console.log("[Postural Analysis] Disconnected from Socket.io"),a(!1),s(!1)}),k.on("connect_error",T=>{console.error("[Postural Analysis] Connection error:",T),p("Error connecting to telemedicine service")}),k.on("session-created",T=>{console.log("[Postural Analysis] Session created:",T),s(!0),l(T.patientConnected)}),k.on("session-joined",T=>{console.log("[Postural Analysis] Session joined:",T)}),k.on("patient-connected",T=>{console.log("[Postural Analysis] Patient connected:",T),l(!0)}),k.on("session-activated-by-doctor",T=>{console.log("[Postural Analysis] Session activated by doctor:",T),s(!0)}),k.on("patient-disconnected",()=>{console.log("[Postural Analysis] Patient disconnected"),l(!1)}),k.on("session-ended",T=>{console.log("[Postural Analysis] Session ended:",T),s(!1),l(!1)}),e==="doctor"&&k.on("pose-data-update",T=>{d(T)}),k.on("session-error",T=>{console.error("[Postural Analysis] Session error:",T),p(T.message)}),k.on("join-error",T=>{console.error("[Postural Analysis] Join error:",T),p(T.message)}),()=>{console.log("[Postural Analysis] Cleaning up Socket.io connection"),k.disconnect()}},[n,e]);const _=he.useCallback(()=>{if(!y.current||!i){console.warn("[Postural Analysis] Cannot start session: not connected");return}console.log("[Postural Analysis] Starting session:",r),y.current.emit("create-analysis-session",{roomName:r,doctorIdentity:t})},[i,r,t]),S=he.useCallback(()=>{if(!y.current||!i){console.warn("[Postural Analysis] Cannot end session: not connected");return}console.log("[Postural Analysis] Ending session:",r),y.current.emit("end-analysis-session",{roomName:r}),s(!1),l(!1),d(null)},[i,r]),w=he.useCallback(x=>{!y.current||!i||!o||y.current.emit("pose-data",{roomName:r,poseData:x})},[i,o,r]);return he.useEffect(()=>{var x;!i||e!=="patient"||(console.log("[Postural Analysis] Patient attempting to join session:",r),(x=y.current)==null||x.emit("join-analysis-session",{roomName:r,patientIdentity:"Patient"}))},[n,i,e,r]),{isConnected:i,sessionActive:o,patientConnected:c,latestPoseData:u,error:v,startSession:_,endSession:S,sendPoseData:w}},xg=({participant:r,isLocal:t=!1})=>{const e=he.useRef(null),n=he.useRef(null),[i,a]=he.useState(null),[o,s]=he.useState(null);return he.useEffect(()=>{if(i&&e.current){try{i.attach(e.current),console.log("Video track attached successfully for",r.identity)}catch(c){console.error("Error attaching video track:",c)}return()=>{i.detach().forEach(c=>c.remove())}}},[i,r.identity]),he.useEffect(()=>{if(o&&n.current&&!t){try{o.attach(n.current),console.log("Audio track attached successfully for",r.identity)}catch(c){console.error("Error attaching audio track:",c)}return()=>{o.detach().forEach(c=>c.remove())}}},[o,t,r.identity]),he.useEffect(()=>{const c=u=>{console.log(`Track ${u.kind} subscribed for ${r.identity}`,u),u.kind==="video"?a(u):u.kind==="audio"&&s(u)},l=u=>{console.log(`Track ${u.kind} unsubscribed for ${r.identity}`),u.kind==="video"?a(null):u.kind==="audio"&&s(null)};return console.log(`Setting up participant: ${r.identity}, tracks:`,r.tracks.size),r.tracks.forEach(u=>{if("isSubscribed"in u){const d=u;if(console.log("Publication:",d.trackName,d.isSubscribed,d.track),d.isSubscribed&&d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&c(v)}}else{const d=u;if(console.log("Publication:",d.trackName,d.track),d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&c(v)}}}),t||(r.on("trackSubscribed",c),r.on("trackUnsubscribed",l)),()=>{r.tracks.forEach(u=>{if("isSubscribed"in u){const d=u;if(d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&l(v)}}else{const d=u;if(d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&l(v)}}})}},[r,t]),m.jsxs("div",{className:`relative bg-gray-900 overflow-hidden ${t?"h-full rounded-lg":"h-full w-full"}`,children:[i?m.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:t,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:m.jsx("div",{className:`text-white font-bold ${t?"text-4xl":"text-6xl sm:text-7xl md:text-8xl"}`,children:r.identity.charAt(0).toUpperCase()})}),!t&&m.jsx("audio",{ref:n,autoPlay:!0}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/60 to-transparent p-3 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-white font-semibold text-sm sm:text-base drop-shadow-lg",children:t?"Tú":r.identity}),m.jsxs("div",{className:"flex gap-2",children:[!o&&m.jsx("span",{className:"text-red-400 text-xs sm:text-sm drop-shadow-lg",children:"🔇 Silenciado"}),!i&&m.jsx("span",{className:"text-red-400 text-xs sm:text-sm drop-shadow-lg",children:"📹 Sin video"})]})]})})]})},YJ=({onApplyBlur:r,onApplyVirtualBackground:t,onRemoveEffect:e,isProcessing:n,currentEffect:i})=>{const[a,o]=he.useState(!1),s=[{id:"office",name:"Oficina",url:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=1920&h=1080&fit=crop"},{id:"nature",name:"Naturaleza",url:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop"},{id:"abstract",name:"Abstracto",url:"https://images.unsplash.com/photo-1557683316-973673baf926?w=1920&h=1080&fit=crop"}];return m.jsxs("div",{className:"relative",children:[m.jsxs("button",{onClick:()=>o(!a),className:"bg-[#2a3942] text-white p-3 rounded-full hover:bg-[#374850] transition flex items-center gap-2",title:"Cambiar fondo",disabled:n,children:[m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),n&&m.jsx("span",{className:"text-xs",children:"..."})]}),a&&m.jsxs("div",{className:"absolute bottom-full mb-2 right-0 bg-[#1f2c34] rounded-xl shadow-2xl p-3 min-w-[250px] border border-gray-700",children:[m.jsx("h3",{className:"text-white text-sm font-semibold mb-3 px-2",children:"Efectos de fondo"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("button",{onClick:()=>{e(),o(!1)},disabled:n,className:`w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-3 ${i==="none"?"bg-[#00a884] text-white":"text-gray-300 hover:bg-[#2a3942]"} disabled:opacity-50`,children:[m.jsx("div",{className:"w-12 h-8 bg-gray-600 rounded flex items-center justify-center",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m.jsx("span",{className:"text-sm",children:"Sin efecto"})]}),m.jsxs("button",{onClick:()=>{r(),o(!1)},disabled:n,className:`w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-3 ${i==="blur"?"bg-[#00a884] text-white":"text-gray-300 hover:bg-[#2a3942]"} disabled:opacity-50`,children:[m.jsx("div",{className:"w-12 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded blur-sm"}),m.jsx("span",{className:"text-sm",children:"Desenfocar fondo"})]}),m.jsxs("div",{className:"border-t border-gray-700 my-2 pt-2",children:[m.jsx("p",{className:"text-xs text-gray-500 px-2 mb-2",children:"Fondos virtuales"}),s.map(c=>m.jsxs("button",{onClick:()=>{t(c.url),o(!1)},disabled:n,className:"w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-3 text-gray-300 hover:bg-[#2a3942] disabled:opacity-50 mb-1",children:[m.jsx("div",{className:"w-12 h-8 rounded bg-cover bg-center",style:{backgroundImage:`url(${c.url})`}}),m.jsx("span",{className:"text-sm",children:c.name})]},c.id))]})]}),m.jsx("button",{onClick:()=>o(!1),className:"w-full mt-3 text-xs text-gray-500 hover:text-white transition py-1",children:"Cerrar"})]})]})},JJ=({isAudioEnabled:r,isVideoEnabled:t,onToggleAudio:e,onToggleVideo:n,onLeave:i,showBackgroundControls:a=!1,onApplyBlur:o,onApplyVirtualBackground:s,onRemoveEffect:c,isProcessingBackground:l=!1,currentBackgroundEffect:u="none",showPosturalAnalysis:d=!1,onOpenPosturalAnalysis:v})=>m.jsxs("div",{className:"bg-gradient-to-t from-black/80 via-black/60 to-transparent pb-safe",children:[m.jsxs("div",{className:"px-6 py-6 flex items-center justify-center gap-6",children:[a&&o&&s&&c&&m.jsx(YJ,{onApplyBlur:o,onApplyVirtualBackground:s,onRemoveEffect:c,isProcessing:l,currentEffect:u}),m.jsx("button",{onClick:n,className:`w-14 h-14 rounded-full transition-all flex items-center justify-center ${t?"bg-[#374045] hover:bg-[#4a5459] text-white":"bg-white/90 hover:bg-white text-gray-800"}`,title:t?"Apagar cámara":"Encender cámara",children:t?m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}):m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"})})}),m.jsx("button",{onClick:e,className:`w-14 h-14 rounded-full transition-all flex items-center justify-center ${r?"bg-[#374045] hover:bg-[#4a5459] text-white":"bg-white/90 hover:bg-white text-gray-800"}`,title:r?"Silenciar":"Activar micrófono",children:r?m.jsxs("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),m.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}):m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"})})}),d&&v&&m.jsx("button",{onClick:v,className:"w-14 h-14 rounded-full bg-[#374045] hover:bg-[#4a5459] text-white transition-all flex items-center justify-center",title:"Análisis Postural",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),m.jsx("button",{onClick:i,className:"w-16 h-16 rounded-full bg-[#ff3b30] hover:bg-[#ff1f1f] text-white transition-all flex items-center justify-center shadow-lg",title:"Finalizar llamada",children:m.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"})})})]}),m.jsxs("div",{className:"flex items-center justify-center gap-2 pb-4 text-xs text-gray-500",children:[m.jsx("span",{children:"Powered by"}),m.jsx("span",{className:"font-medium",children:"BSL Tech. +"})]})]}),XJ="modulepreload",ZJ=function(r){return"/"+r},zb={},Sg=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(e.map(c=>{if(c=ZJ(c),c in zb)return;zb[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":XJ,l||(d.as="script"),d.crossOrigin="",d.href=c,s&&d.setAttribute("nonce",s),document.head.appendChild(d),l)return new Promise((v,p)=>{d.addEventListener("load",v),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};function Ut(r){"@babel/helpers - typeof";return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(r)}var Ai=Uint8Array,qn=Uint16Array,x_=Int32Array,S_=new Ai([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),k_=new Ai([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Wb=new Ai([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dC=function(r,t){for(var e=new qn(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var i=new x_(e[30]),n=1;n<30;++n)for(var a=e[n];a<e[n+1];++a)i[a]=a-e[n]<<5|n;return{b:e,r:i}},hC=dC(S_,2),eX=hC.b,_y=hC.r;eX[28]=258,_y[258]=28;var tX=dC(k_,0),qb=tX.r,wy=new qn(32768);for(var Zt=0;Zt<32768;++Zt){var oo=(Zt&43690)>>1|(Zt&21845)<<1;oo=(oo&52428)>>2|(oo&13107)<<2,oo=(oo&61680)>>4|(oo&3855)<<4,wy[Zt]=((oo&65280)>>8|(oo&255)<<8)>>1}var Ou=function(r,t,e){for(var n=r.length,i=0,a=new qn(t);i<n;++i)r[i]&&++a[r[i]-1];var o=new qn(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(e){s=new qn(1<<t);var c=15-t;for(i=0;i<n;++i)if(r[i])for(var l=i<<4|r[i],u=t-r[i],d=o[r[i]-1]++<<u,v=d|(1<<u)-1;d<=v;++d)s[wy[d]>>c]=l}else for(s=new qn(n),i=0;i<n;++i)r[i]&&(s[i]=wy[o[r[i]-1]++]>>15-r[i]);return s},Ns=new Ai(288);for(var Zt=0;Zt<144;++Zt)Ns[Zt]=8;for(var Zt=144;Zt<256;++Zt)Ns[Zt]=9;for(var Zt=256;Zt<280;++Zt)Ns[Zt]=7;for(var Zt=280;Zt<288;++Zt)Ns[Zt]=8;var vp=new Ai(32);for(var Zt=0;Zt<32;++Zt)vp[Zt]=5;var rX=Ou(Ns,9,0),nX=Ou(vp,5,0),pC=function(r){return(r+7)/8|0},iX=function(r,t,e){return(e==null||e>r.length)&&(e=r.length),new Ai(r.subarray(t,e))},xa=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8},lu=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},kg=function(r,t){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var i=e.length,a=e.slice();if(!i)return{t:mC,l:0};if(i==1){var o=new Ai(e[0].s+1);return o[e[0].s]=1,{t:o,l:1}}e.sort(function(R,U){return R.f-U.f}),e.push({s:-1,f:25001});var s=e[0],c=e[1],l=0,u=1,d=2;for(e[0]={s:-1,f:s.f+c.f,l:s,r:c};u!=i-1;)s=e[e[l].f<e[d].f?l++:d++],c=e[l!=u&&e[l].f<e[d].f?l++:d++],e[u++]={s:-1,f:s.f+c.f,l:s,r:c};for(var v=a[0].s,n=1;n<i;++n)a[n].s>v&&(v=a[n].s);var p=new qn(v+1),y=by(e[u-1],p,0);if(y>t){var n=0,_=0,S=y-t,w=1<<S;for(a.sort(function(U,$){return p[$.s]-p[U.s]||U.f-$.f});n<i;++n){var x=a[n].s;if(p[x]>t)_+=w-(1<<y-p[x]),p[x]=t;else break}for(_>>=S;_>0;){var k=a[n].s;p[k]<t?_-=1<<t-p[k]++-1:++n}for(;n>=0&&_;--n){var T=a[n].s;p[T]==t&&(--p[T],++_)}y=t}return{t:new Ai(p),l:y}},by=function(r,t,e){return r.s==-1?Math.max(by(r.l,t,e+1),by(r.r,t,e+1)):t[r.s]=e},Hb=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new qn(++t),n=0,i=r[0],a=1,o=function(c){e[n++]=c},s=1;s<=t;++s)if(r[s]==i&&s!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=r[s]}return{c:e.subarray(0,n),n:t}},cu=function(r,t){for(var e=0,n=0;n<t.length;++n)e+=r[n]*t[n];return e},vC=function(r,t,e){var n=e.length,i=pC(t+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var a=0;a<n;++a)r[i+a+4]=e[a];return(i+4+n)*8},Gb=function(r,t,e,n,i,a,o,s,c,l,u){xa(t,u++,e),++i[256];for(var d=kg(i,15),v=d.t,p=d.l,y=kg(a,15),_=y.t,S=y.l,w=Hb(v),x=w.c,k=w.n,T=Hb(_),R=T.c,U=T.n,$=new qn(19),F=0;F<x.length;++F)++$[x[F]&31];for(var F=0;F<R.length;++F)++$[R[F]&31];for(var M=kg($,7),J=M.t,O=M.l,N=19;N>4&&!J[Wb[N-1]];--N);var q=l+5<<3,j=cu(i,Ns)+cu(a,vp)+o,Z=cu(i,v)+cu(a,_)+o+14+3*N+cu($,J)+2*$[16]+3*$[17]+7*$[18];if(c>=0&&q<=j&&q<=Z)return vC(t,u,r.subarray(c,c+l));var X,se,H,ie;if(xa(t,u,1+(Z<j)),u+=2,Z<j){X=Ou(v,p,0),se=v,H=Ou(_,S,0),ie=_;var fe=Ou(J,O,0);xa(t,u,k-257),xa(t,u+5,U-1),xa(t,u+10,N-4),u+=14;for(var F=0;F<N;++F)xa(t,u+3*F,J[Wb[F]]);u+=3*N;for(var ne=[x,R],E=0;E<2;++E)for(var W=ne[E],F=0;F<W.length;++F){var G=W[F]&31;xa(t,u,fe[G]),u+=J[G],G>15&&(xa(t,u,W[F]>>5&127),u+=W[F]>>12)}}else X=rX,se=Ns,H=nX,ie=vp;for(var F=0;F<s;++F){var ee=n[F];if(ee>255){var G=ee>>18&31;lu(t,u,X[G+257]),u+=se[G+257],G>7&&(xa(t,u,ee>>23&31),u+=S_[G]);var oe=ee&31;lu(t,u,H[oe]),u+=ie[oe],oe>3&&(lu(t,u,ee>>5&8191),u+=k_[oe])}else lu(t,u,X[ee]),u+=se[ee]}return lu(t,u,X[256]),u+se[256]},aX=new x_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),mC=new Ai(0),oX=function(r,t,e,n,i,a){var o=a.z||r.length,s=new Ai(n+o+5*(1+Math.ceil(o/7e3))+i),c=s.subarray(n,s.length-i),l=a.l,u=(a.r||0)&7;if(t){u&&(c[0]=a.r>>3);for(var d=aX[t-1],v=d>>13,p=d&8191,y=(1<<e)-1,_=a.p||new qn(32768),S=a.h||new qn(y+1),w=Math.ceil(e/3),x=2*w,k=function(re){return(r[re]^r[re+1]<<w^r[re+2]<<x)&y},T=new x_(25e3),R=new qn(288),U=new qn(32),$=0,F=0,M=a.i||0,J=0,O=a.w||0,N=0;M+2<o;++M){var q=k(M),j=M&32767,Z=S[q];if(_[j]=Z,S[q]=j,O<=M){var X=o-M;if(($>7e3||J>24576)&&(X>423||!l)){u=Gb(r,c,0,T,R,U,F,J,N,M-N,u),J=$=F=0,N=M;for(var se=0;se<286;++se)R[se]=0;for(var se=0;se<30;++se)U[se]=0}var H=2,ie=0,fe=p,ne=j-Z&32767;if(X>2&&q==k(M-ne))for(var E=Math.min(v,X)-1,W=Math.min(32767,M),G=Math.min(258,X);ne<=W&&--fe&&j!=Z;){if(r[M+H]==r[M+H-ne]){for(var ee=0;ee<G&&r[M+ee]==r[M+ee-ne];++ee);if(ee>H){if(H=ee,ie=ne,ee>E)break;for(var oe=Math.min(ne,ee-2),ue=0,se=0;se<oe;++se){var ye=M-ne+se&32767,me=_[ye],be=ye-me&32767;be>ue&&(ue=be,Z=ye)}}}j=Z,Z=_[j],ne+=j-Z&32767}if(ie){T[J++]=268435456|_y[H]<<18|qb[ie];var Te=_y[H]&31,Re=qb[ie]&31;F+=S_[Te]+k_[Re],++R[257+Te],++U[Re],O=M+H,++$}else T[J++]=r[M],++R[r[M]]}}for(M=Math.max(M,O);M<o;++M)T[J++]=r[M],++R[r[M]];u=Gb(r,c,l,T,R,U,F,J,N,M-N,u),l||(a.r=u&7|c[u/8|0]<<3,u-=7,a.h=S,a.p=_,a.i=M,a.w=O)}else{for(var M=a.w||0;M<o+l;M+=65535){var Oe=M+65535;Oe>=o&&(c[u/8|0]=l,Oe=o),u=vC(c,u+1,r.subarray(M,Oe))}a.i=o}return iX(s,0,n+pC(u)+i)},gC=function(){var r=1,t=0;return{p:function(e){for(var n=r,i=t,a=e.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=n+=e[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,t=i},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},sX=function(r,t,e,n,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new Ai(a.length+r.length);o.set(a),o.set(r,a.length),r=o,i.w=a.length}return oX(r,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,e,n,i)},yC=function(r,t,e){for(;e;++t)r[t]=e,e>>>=8},lX=function(r,t){var e=t.level,n=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=n<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var i=gC();i.p(t.dictionary),yC(r,2,i.d())}};function xy(r,t){t||(t={});var e=gC();e.p(r);var n=sX(r,t,t.dictionary?6:2,4);return lX(n,t),yC(n,n.length-4,e.d()),n}var cX=typeof TextDecoder<"u"&&new TextDecoder,uX=0;try{cX.decode(mC,{stream:!0}),uX=1}catch{}function fX(r){if(Array.isArray(r))return r}function dX(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,a,o,s=[],c=!0,l=!1;try{if(a=(e=e.call(r)).next,t!==0)for(;!(c=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function Kb(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function hX(r,t){if(r){if(typeof r=="string")return Kb(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Kb(r,t):void 0}}function pX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qb(r,t){return fX(r)||dX(r,t)||hX(r,t)||pX()}function Yb(r,t="utf8"){return new TextDecoder(t).decode(r)}const vX=new TextEncoder;function mX(r){return vX.encode(r)}const gX=1024*8,yX=(()=>{const r=new Uint8Array(4),t=new Uint32Array(r.buffer);return!((t[0]=1)&r[0])})(),Pg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class P_{constructor(t=gX,e={}){jt(this,"buffer");jt(this,"byteLength");jt(this,"byteOffset");jt(this,"length");jt(this,"offset");jt(this,"lastWrittenByte");jt(this,"littleEndian");jt(this,"_data");jt(this,"_mark");jt(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0,a=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof P_)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const n=Pg[e].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===yX&&e!=="uint8"&&e!=="int8"){const s=new Uint8Array(this.buffer.slice(i,i+n));s.reverse();const c=new Pg[e](s.buffer);return this.offset+=n,c.reverse(),c}const o=new Pg[e](a);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let n=0;n<t;n++)e+=this.readChar();return e}readUtf8(t=1){return Yb(this.readBytes(t))}decodeText(t=1,e="utf8"){return Yb(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(mX(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function _c(r){let t=r.length;for(;--t>=0;)r[t]=0}const _X=3,wX=258,_C=29,bX=256,xX=bX+1+_C,wC=30,SX=512,kX=new Array((xX+2)*2);_c(kX);const PX=new Array(wC*2);_c(PX);const TX=new Array(SX);_c(TX);const EX=new Array(wX-_X+1);_c(EX);const CX=new Array(_C);_c(CX);const LX=new Array(wC);_c(LX);const OX=(r,t,e,n)=>{let i=r&65535|0,a=r>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do i=i+t[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var Sy=OX;const AX=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},NX=new Uint32Array(AX()),RX=(r,t,e,n)=>{const i=NX,a=n+e;r^=-1;for(let o=n;o<a;o++)r=r>>>8^i[(r^t[o])&255];return r^-1};var qi=RX,ky={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bC={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const jX=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var IX=function(r){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)jX(e,n)&&(r[n]=e[n])}}return r},MX=r=>{let t=0;for(let n=0,i=r.length;n<i;n++)t+=r[n].length;const e=new Uint8Array(t);for(let n=0,i=0,a=r.length;n<a;n++){let o=r[n];e.set(o,i),i+=o.length}return e},xC={assign:IX,flattenChunks:MX};let SC=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{SC=!1}const rf=new Uint8Array(256);for(let r=0;r<256;r++)rf[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;rf[254]=rf[254]=1;var DX=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,i,a,o=r.length,s=0;for(i=0;i<o;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),e<128?t[a++]=e:e<2048?(t[a++]=192|e>>>6,t[a++]=128|e&63):e<65536?(t[a++]=224|e>>>12,t[a++]=128|e>>>6&63,t[a++]=128|e&63):(t[a++]=240|e>>>18,t[a++]=128|e>>>12&63,t[a++]=128|e>>>6&63,t[a++]=128|e&63);return t};const FX=(r,t)=>{if(t<65534&&r.subarray&&SC)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e};var BX=(r,t)=>{const e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,i;const a=new Array(e*2);for(i=0,n=0;n<e;){let o=r[n++];if(o<128){a[i++]=o;continue}let s=rf[o];if(s>4){a[i++]=65533,n+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&n<e;)o=o<<6|r[n++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return FX(a,i)},UX=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+rf[r[e]]>t?e:t},Py={string2buf:DX,buf2string:BX,utf8border:UX};function $X(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var VX=$X;const Qd=16209,zX=16191;var WX=function(t,e){let n,i,a,o,s,c,l,u,d,v,p,y,_,S,w,x,k,T,R,U,$,F,M,J;const O=t.state;n=t.next_in,M=t.input,i=n+(t.avail_in-5),a=t.next_out,J=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),c=O.dmax,l=O.wsize,u=O.whave,d=O.wnext,v=O.window,p=O.hold,y=O.bits,_=O.lencode,S=O.distcode,w=(1<<O.lenbits)-1,x=(1<<O.distbits)-1;e:do{y<15&&(p+=M[n++]<<y,y+=8,p+=M[n++]<<y,y+=8),k=_[p&w];t:for(;;){if(T=k>>>24,p>>>=T,y-=T,T=k>>>16&255,T===0)J[a++]=k&65535;else if(T&16){R=k&65535,T&=15,T&&(y<T&&(p+=M[n++]<<y,y+=8),R+=p&(1<<T)-1,p>>>=T,y-=T),y<15&&(p+=M[n++]<<y,y+=8,p+=M[n++]<<y,y+=8),k=S[p&x];r:for(;;){if(T=k>>>24,p>>>=T,y-=T,T=k>>>16&255,T&16){if(U=k&65535,T&=15,y<T&&(p+=M[n++]<<y,y+=8,y<T&&(p+=M[n++]<<y,y+=8)),U+=p&(1<<T)-1,U>c){t.msg="invalid distance too far back",O.mode=Qd;break e}if(p>>>=T,y-=T,T=a-o,U>T){if(T=U-T,T>u&&O.sane){t.msg="invalid distance too far back",O.mode=Qd;break e}if($=0,F=v,d===0){if($+=l-T,T<R){R-=T;do J[a++]=v[$++];while(--T);$=a-U,F=J}}else if(d<T){if($+=l+d-T,T-=d,T<R){R-=T;do J[a++]=v[$++];while(--T);if($=0,d<R){T=d,R-=T;do J[a++]=v[$++];while(--T);$=a-U,F=J}}}else if($+=d-T,T<R){R-=T;do J[a++]=v[$++];while(--T);$=a-U,F=J}for(;R>2;)J[a++]=F[$++],J[a++]=F[$++],J[a++]=F[$++],R-=3;R&&(J[a++]=F[$++],R>1&&(J[a++]=F[$++]))}else{$=a-U;do J[a++]=J[$++],J[a++]=J[$++],J[a++]=J[$++],R-=3;while(R>2);R&&(J[a++]=J[$++],R>1&&(J[a++]=J[$++]))}}else if(T&64){t.msg="invalid distance code",O.mode=Qd;break e}else{k=S[(k&65535)+(p&(1<<T)-1)];continue r}break}}else if(T&64)if(T&32){O.mode=zX;break e}else{t.msg="invalid literal/length code",O.mode=Qd;break e}else{k=_[(k&65535)+(p&(1<<T)-1)];continue t}break}}while(n<i&&a<s);R=y>>3,n-=R,y-=R<<3,p&=(1<<y)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=a<s?257+(s-a):257-(a-s),O.hold=p,O.bits=y};const cl=15,Jb=852,Xb=592,Zb=0,Tg=1,ex=2,qX=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),HX=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),GX=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),KX=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),QX=(r,t,e,n,i,a,o,s)=>{const c=s.bits;let l=0,u=0,d=0,v=0,p=0,y=0,_=0,S=0,w=0,x=0,k,T,R,U,$,F=null,M;const J=new Uint16Array(cl+1),O=new Uint16Array(cl+1);let N=null,q,j,Z;for(l=0;l<=cl;l++)J[l]=0;for(u=0;u<n;u++)J[t[e+u]]++;for(p=c,v=cl;v>=1&&J[v]===0;v--);if(p>v&&(p=v),v===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(d=1;d<v&&J[d]===0;d++);for(p<d&&(p=d),S=1,l=1;l<=cl;l++)if(S<<=1,S-=J[l],S<0)return-1;if(S>0&&(r===Zb||v!==1))return-1;for(O[1]=0,l=1;l<cl;l++)O[l+1]=O[l]+J[l];for(u=0;u<n;u++)t[e+u]!==0&&(o[O[t[e+u]]++]=u);if(r===Zb?(F=N=o,M=20):r===Tg?(F=qX,N=HX,M=257):(F=GX,N=KX,M=0),x=0,u=0,l=d,$=a,y=p,_=0,R=-1,w=1<<p,U=w-1,r===Tg&&w>Jb||r===ex&&w>Xb)return 1;for(;;){q=l-_,o[u]+1<M?(j=0,Z=o[u]):o[u]>=M?(j=N[o[u]-M],Z=F[o[u]-M]):(j=96,Z=0),k=1<<l-_,T=1<<y,d=T;do T-=k,i[$+(x>>_)+T]=q<<24|j<<16|Z|0;while(T!==0);for(k=1<<l-1;x&k;)k>>=1;if(k!==0?(x&=k-1,x+=k):x=0,u++,--J[l]===0){if(l===v)break;l=t[e+o[u]]}if(l>p&&(x&U)!==R){for(_===0&&(_=p),$+=d,y=l-_,S=1<<y;y+_<v&&(S-=J[y+_],!(S<=0));)y++,S<<=1;if(w+=1<<y,r===Tg&&w>Jb||r===ex&&w>Xb)return 1;R=x&U,i[R]=p<<24|y<<16|$-a|0}}return x!==0&&(i[$+x]=l-_<<24|64<<16|0),s.bits=p,0};var Au=QX;const YX=0,kC=1,PC=2,{Z_FINISH:tx,Z_BLOCK:JX,Z_TREES:Yd,Z_OK:Rs,Z_STREAM_END:XX,Z_NEED_DICT:ZX,Z_STREAM_ERROR:hi,Z_DATA_ERROR:TC,Z_MEM_ERROR:EC,Z_BUF_ERROR:eZ,Z_DEFLATED:rx}=bC,Ev=16180,nx=16181,ix=16182,ax=16183,ox=16184,sx=16185,lx=16186,cx=16187,ux=16188,fx=16189,mp=16190,Sa=16191,Eg=16192,dx=16193,Cg=16194,hx=16195,px=16196,vx=16197,mx=16198,Jd=16199,Xd=16200,gx=16201,yx=16202,_x=16203,wx=16204,bx=16205,Lg=16206,xx=16207,Sx=16208,tr=16209,CC=16210,LC=16211,tZ=852,rZ=592,nZ=15,iZ=nZ,kx=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function aZ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Vs=r=>{if(!r)return 1;const t=r.state;return!t||t.strm!==r||t.mode<Ev||t.mode>LC?1:0},OC=r=>{if(Vs(r))return hi;const t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=Ev,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(tZ),t.distcode=t.distdyn=new Int32Array(rZ),t.sane=1,t.back=-1,Rs},AC=r=>{if(Vs(r))return hi;const t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,OC(r)},NC=(r,t)=>{let e;if(Vs(r))return hi;const n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?hi:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,AC(r))},RC=(r,t)=>{if(!r)return hi;const e=new aZ;r.state=e,e.strm=r,e.window=null,e.mode=Ev;const n=NC(r,t);return n!==Rs&&(r.state=null),n},oZ=r=>RC(r,iZ);let Px=!0,Og,Ag;const sZ=r=>{if(Px){Og=new Int32Array(512),Ag=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Au(kC,r.lens,0,288,Og,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Au(PC,r.lens,0,32,Ag,0,r.work,{bits:5}),Px=!1}r.lencode=Og,r.lenbits=9,r.distcode=Ag,r.distbits=5},jC=(r,t,e,n)=>{let i;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(e-n,e-n+i),a.wnext),n-=i,n?(a.window.set(t.subarray(e-n,e),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},lZ=(r,t)=>{let e,n,i,a,o,s,c,l,u,d,v,p,y,_,S=0,w,x,k,T,R,U,$,F;const M=new Uint8Array(4);let J,O;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Vs(r)||!r.output||!r.input&&r.avail_in!==0)return hi;e=r.state,e.mode===Sa&&(e.mode=Eg),o=r.next_out,i=r.output,c=r.avail_out,a=r.next_in,n=r.input,s=r.avail_in,l=e.hold,u=e.bits,d=s,v=c,F=Rs;e:for(;;)switch(e.mode){case Ev:if(e.wrap===0){e.mode=Eg;break}for(;u<16;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if(e.wrap&2&&l===35615){e.wbits===0&&(e.wbits=15),e.check=0,M[0]=l&255,M[1]=l>>>8&255,e.check=qi(e.check,M,2,0),l=0,u=0,e.mode=nx;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((l&255)<<8)+(l>>8))%31){r.msg="incorrect header check",e.mode=tr;break}if((l&15)!==rx){r.msg="unknown compression method",e.mode=tr;break}if(l>>>=4,u-=4,$=(l&15)+8,e.wbits===0&&(e.wbits=$),$>15||$>e.wbits){r.msg="invalid window size",e.mode=tr;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=l&512?fx:Sa,l=0,u=0;break;case nx:for(;u<16;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if(e.flags=l,(e.flags&255)!==rx){r.msg="unknown compression method",e.mode=tr;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=tr;break}e.head&&(e.head.text=l>>8&1),e.flags&512&&e.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,e.check=qi(e.check,M,2,0)),l=0,u=0,e.mode=ix;case ix:for(;u<32;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}e.head&&(e.head.time=l),e.flags&512&&e.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,M[2]=l>>>16&255,M[3]=l>>>24&255,e.check=qi(e.check,M,4,0)),l=0,u=0,e.mode=ax;case ax:for(;u<16;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}e.head&&(e.head.xflags=l&255,e.head.os=l>>8),e.flags&512&&e.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,e.check=qi(e.check,M,2,0)),l=0,u=0,e.mode=ox;case ox:if(e.flags&1024){for(;u<16;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}e.length=l,e.head&&(e.head.extra_len=l),e.flags&512&&e.wrap&4&&(M[0]=l&255,M[1]=l>>>8&255,e.check=qi(e.check,M,2,0)),l=0,u=0}else e.head&&(e.head.extra=null);e.mode=sx;case sx:if(e.flags&1024&&(p=e.length,p>s&&(p=s),p&&(e.head&&($=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(a,a+p),$)),e.flags&512&&e.wrap&4&&(e.check=qi(e.check,n,p,a)),s-=p,a+=p,e.length-=p),e.length))break e;e.length=0,e.mode=lx;case lx:if(e.flags&2048){if(s===0)break e;p=0;do $=n[a+p++],e.head&&$&&e.length<65536&&(e.head.name+=String.fromCharCode($));while($&&p<s);if(e.flags&512&&e.wrap&4&&(e.check=qi(e.check,n,p,a)),s-=p,a+=p,$)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=cx;case cx:if(e.flags&4096){if(s===0)break e;p=0;do $=n[a+p++],e.head&&$&&e.length<65536&&(e.head.comment+=String.fromCharCode($));while($&&p<s);if(e.flags&512&&e.wrap&4&&(e.check=qi(e.check,n,p,a)),s-=p,a+=p,$)break e}else e.head&&(e.head.comment=null);e.mode=ux;case ux:if(e.flags&512){for(;u<16;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if(e.wrap&4&&l!==(e.check&65535)){r.msg="header crc mismatch",e.mode=tr;break}l=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=Sa;break;case fx:for(;u<32;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}r.adler=e.check=kx(l),l=0,u=0,e.mode=mp;case mp:if(e.havedict===0)return r.next_out=o,r.avail_out=c,r.next_in=a,r.avail_in=s,e.hold=l,e.bits=u,ZX;r.adler=e.check=1,e.mode=Sa;case Sa:if(t===JX||t===Yd)break e;case Eg:if(e.last){l>>>=u&7,u-=u&7,e.mode=Lg;break}for(;u<3;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}switch(e.last=l&1,l>>>=1,u-=1,l&3){case 0:e.mode=dx;break;case 1:if(sZ(e),e.mode=Jd,t===Yd){l>>>=2,u-=2;break e}break;case 2:e.mode=px;break;case 3:r.msg="invalid block type",e.mode=tr}l>>>=2,u-=2;break;case dx:for(l>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){r.msg="invalid stored block lengths",e.mode=tr;break}if(e.length=l&65535,l=0,u=0,e.mode=Cg,t===Yd)break e;case Cg:e.mode=hx;case hx:if(p=e.length,p){if(p>s&&(p=s),p>c&&(p=c),p===0)break e;i.set(n.subarray(a,a+p),o),s-=p,a+=p,c-=p,o+=p,e.length-=p;break}e.mode=Sa;break;case px:for(;u<14;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if(e.nlen=(l&31)+257,l>>>=5,u-=5,e.ndist=(l&31)+1,l>>>=5,u-=5,e.ncode=(l&15)+4,l>>>=4,u-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=tr;break}e.have=0,e.mode=vx;case vx:for(;e.have<e.ncode;){for(;u<3;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}e.lens[N[e.have++]]=l&7,l>>>=3,u-=3}for(;e.have<19;)e.lens[N[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,J={bits:e.lenbits},F=Au(YX,e.lens,0,19,e.lencode,0,e.work,J),e.lenbits=J.bits,F){r.msg="invalid code lengths set",e.mode=tr;break}e.have=0,e.mode=mx;case mx:for(;e.have<e.nlen+e.ndist;){for(;S=e.lencode[l&(1<<e.lenbits)-1],w=S>>>24,x=S>>>16&255,k=S&65535,!(w<=u);){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if(k<16)l>>>=w,u-=w,e.lens[e.have++]=k;else{if(k===16){for(O=w+2;u<O;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if(l>>>=w,u-=w,e.have===0){r.msg="invalid bit length repeat",e.mode=tr;break}$=e.lens[e.have-1],p=3+(l&3),l>>>=2,u-=2}else if(k===17){for(O=w+3;u<O;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,$=0,p=3+(l&7),l>>>=3,u-=3}else{for(O=w+7;u<O;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,$=0,p=11+(l&127),l>>>=7,u-=7}if(e.have+p>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=tr;break}for(;p--;)e.lens[e.have++]=$}}if(e.mode===tr)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=tr;break}if(e.lenbits=9,J={bits:e.lenbits},F=Au(kC,e.lens,0,e.nlen,e.lencode,0,e.work,J),e.lenbits=J.bits,F){r.msg="invalid literal/lengths set",e.mode=tr;break}if(e.distbits=6,e.distcode=e.distdyn,J={bits:e.distbits},F=Au(PC,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,J),e.distbits=J.bits,F){r.msg="invalid distances set",e.mode=tr;break}if(e.mode=Jd,t===Yd)break e;case Jd:e.mode=Xd;case Xd:if(s>=6&&c>=258){r.next_out=o,r.avail_out=c,r.next_in=a,r.avail_in=s,e.hold=l,e.bits=u,WX(r,v),o=r.next_out,i=r.output,c=r.avail_out,a=r.next_in,n=r.input,s=r.avail_in,l=e.hold,u=e.bits,e.mode===Sa&&(e.back=-1);break}for(e.back=0;S=e.lencode[l&(1<<e.lenbits)-1],w=S>>>24,x=S>>>16&255,k=S&65535,!(w<=u);){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if(x&&!(x&240)){for(T=w,R=x,U=k;S=e.lencode[U+((l&(1<<T+R)-1)>>T)],w=S>>>24,x=S>>>16&255,k=S&65535,!(T+w<=u);){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}l>>>=T,u-=T,e.back+=T}if(l>>>=w,u-=w,e.back+=w,e.length=k,x===0){e.mode=bx;break}if(x&32){e.back=-1,e.mode=Sa;break}if(x&64){r.msg="invalid literal/length code",e.mode=tr;break}e.extra=x&15,e.mode=gx;case gx:if(e.extra){for(O=e.extra;u<O;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}e.length+=l&(1<<e.extra)-1,l>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=yx;case yx:for(;S=e.distcode[l&(1<<e.distbits)-1],w=S>>>24,x=S>>>16&255,k=S&65535,!(w<=u);){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if(!(x&240)){for(T=w,R=x,U=k;S=e.distcode[U+((l&(1<<T+R)-1)>>T)],w=S>>>24,x=S>>>16&255,k=S&65535,!(T+w<=u);){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}l>>>=T,u-=T,e.back+=T}if(l>>>=w,u-=w,e.back+=w,x&64){r.msg="invalid distance code",e.mode=tr;break}e.offset=k,e.extra=x&15,e.mode=_x;case _x:if(e.extra){for(O=e.extra;u<O;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}e.offset+=l&(1<<e.extra)-1,l>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=tr;break}e.mode=wx;case wx:if(c===0)break e;if(p=v-c,e.offset>p){if(p=e.offset-p,p>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=tr;break}p>e.wnext?(p-=e.wnext,y=e.wsize-p):y=e.wnext-p,p>e.length&&(p=e.length),_=e.window}else _=i,y=o-e.offset,p=e.length;p>c&&(p=c),c-=p,e.length-=p;do i[o++]=_[y++];while(--p);e.length===0&&(e.mode=Xd);break;case bx:if(c===0)break e;i[o++]=e.length,c--,e.mode=Xd;break;case Lg:if(e.wrap){for(;u<32;){if(s===0)break e;s--,l|=n[a++]<<u,u+=8}if(v-=c,r.total_out+=v,e.total+=v,e.wrap&4&&v&&(r.adler=e.check=e.flags?qi(e.check,i,v,o-v):Sy(e.check,i,v,o-v)),v=c,e.wrap&4&&(e.flags?l:kx(l))!==e.check){r.msg="incorrect data check",e.mode=tr;break}l=0,u=0}e.mode=xx;case xx:if(e.wrap&&e.flags){for(;u<32;){if(s===0)break e;s--,l+=n[a++]<<u,u+=8}if(e.wrap&4&&l!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=tr;break}l=0,u=0}e.mode=Sx;case Sx:F=XX;break e;case tr:F=TC;break e;case CC:return EC;case LC:default:return hi}return r.next_out=o,r.avail_out=c,r.next_in=a,r.avail_in=s,e.hold=l,e.bits=u,(e.wsize||v!==r.avail_out&&e.mode<tr&&(e.mode<Lg||t!==tx))&&jC(r,r.output,r.next_out,v-r.avail_out),d-=r.avail_in,v-=r.avail_out,r.total_in+=d,r.total_out+=v,e.total+=v,e.wrap&4&&v&&(r.adler=e.check=e.flags?qi(e.check,i,v,r.next_out-v):Sy(e.check,i,v,r.next_out-v)),r.data_type=e.bits+(e.last?64:0)+(e.mode===Sa?128:0)+(e.mode===Jd||e.mode===Cg?256:0),(d===0&&v===0||t===tx)&&F===Rs&&(F=eZ),F},cZ=r=>{if(Vs(r))return hi;let t=r.state;return t.window&&(t.window=null),r.state=null,Rs},uZ=(r,t)=>{if(Vs(r))return hi;const e=r.state;return e.wrap&2?(e.head=t,t.done=!1,Rs):hi},fZ=(r,t)=>{const e=t.length;let n,i,a;return Vs(r)||(n=r.state,n.wrap!==0&&n.mode!==mp)?hi:n.mode===mp&&(i=1,i=Sy(i,t,e,0),i!==n.check)?TC:(a=jC(r,t,e,e),a?(n.mode=CC,EC):(n.havedict=1,Rs))};var dZ=AC,hZ=NC,pZ=OC,vZ=oZ,mZ=RC,gZ=lZ,yZ=cZ,_Z=uZ,wZ=fZ,bZ="pako inflate (from Nodeca project)",Ea={inflateReset:dZ,inflateReset2:hZ,inflateResetKeep:pZ,inflateInit:vZ,inflateInit2:mZ,inflate:gZ,inflateEnd:yZ,inflateGetHeader:_Z,inflateSetDictionary:wZ,inflateInfo:bZ};function xZ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var SZ=xZ;const IC=Object.prototype.toString,{Z_NO_FLUSH:kZ,Z_FINISH:PZ,Z_OK:nf,Z_STREAM_END:Ng,Z_NEED_DICT:Rg,Z_STREAM_ERROR:TZ,Z_DATA_ERROR:Tx,Z_MEM_ERROR:EZ}=bC;function Tf(r){this.options=xC.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new VX,this.strm.avail_out=0;let e=Ea.inflateInit2(this.strm,t.windowBits);if(e!==nf)throw new Error(ky[e]);if(this.header=new SZ,Ea.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Py.string2buf(t.dictionary):IC.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Ea.inflateSetDictionary(this.strm,t.dictionary),e!==nf)))throw new Error(ky[e])}Tf.prototype.push=function(r,t){const e=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?PZ:kZ,IC.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),a=Ea.inflate(e,o),a===Rg&&i&&(a=Ea.inflateSetDictionary(e,i),a===nf?a=Ea.inflate(e,o):a===Tx&&(a=Rg));e.avail_in>0&&a===Ng&&e.state.wrap>0&&r[e.next_in]!==0;)Ea.inflateReset(e),a=Ea.inflate(e,o);switch(a){case TZ:case Tx:case Rg:case EZ:return this.onEnd(a),this.ended=!0,!1}if(s=e.avail_out,e.next_out&&(e.avail_out===0||a===Ng))if(this.options.to==="string"){let c=Py.utf8border(e.output,e.next_out),l=e.next_out-c,u=Py.buf2string(e.output,c);e.next_out=l,e.avail_out=n-l,l&&e.output.set(e.output.subarray(c,c+l),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(a===nf&&s===0)){if(a===Ng)return a=Ea.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Tf.prototype.onData=function(r){this.chunks.push(r)};Tf.prototype.onEnd=function(r){r===nf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=xC.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function CZ(r,t){const e=new Tf(t);if(e.push(r),e.err)throw e.msg||ky[e.err];return e.result}var LZ=Tf,OZ=CZ,AZ={Inflate:LZ,inflate:OZ};const{Inflate:NZ,inflate:RZ}=AZ;var Ex=NZ,jZ=RZ;const MC=[];for(let r=0;r<256;r++){let t=r;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;MC[r]=t}const Cx=4294967295;function IZ(r,t,e){let n=r;for(let i=0;i<e;i++)n=MC[(n^t[i])&255]^n>>>8;return n}function MZ(r,t){return(IZ(Cx,r,t)^Cx)>>>0}function Lx(r,t,e){const n=r.readUint32(),i=MZ(new Uint8Array(r.buffer,r.byteOffset+r.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${e}. Expected ${n}, found ${i}`)}function DC(r,t,e){for(let n=0;n<e;n++)t[n]=r[n]}function FC(r,t,e,n){let i=0;for(;i<n;i++)t[i]=r[i];for(;i<e;i++)t[i]=r[i]+t[i-n]&255}function BC(r,t,e,n){let i=0;if(e.length===0)for(;i<n;i++)t[i]=r[i];else for(;i<n;i++)t[i]=r[i]+e[i]&255}function UC(r,t,e,n,i){let a=0;if(e.length===0){for(;a<i;a++)t[a]=r[a];for(;a<n;a++)t[a]=r[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=r[a]+(e[a]>>1)&255;for(;a<n;a++)t[a]=r[a]+(t[a-i]+e[a]>>1)&255}}function $C(r,t,e,n,i){let a=0;if(e.length===0){for(;a<i;a++)t[a]=r[a];for(;a<n;a++)t[a]=r[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=r[a]+e[a]&255;for(;a<n;a++)t[a]=r[a]+DZ(t[a-i],e[a],e[a-i])&255}}function DZ(r,t,e){const n=r+t-e,i=Math.abs(n-r),a=Math.abs(n-t),o=Math.abs(n-e);return i<=a&&i<=o?r:a<=o?t:e}function FZ(r,t,e,n,i,a){switch(r){case 0:DC(t,e,i);break;case 1:FC(t,e,i,a);break;case 2:BC(t,e,n,i);break;case 3:UC(t,e,n,i,a);break;case 4:$C(t,e,n,i,a);break;default:throw new Error(`Unsupported filter: ${r}`)}}const BZ=new Uint16Array([255]),UZ=new Uint8Array(BZ.buffer),$Z=UZ[0]===255;function VZ(r){const{data:t,width:e,height:n,channels:i,depth:a}=r,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],s=Math.ceil(a/8)*i,c=new Uint8Array(n*e*s);let l=0;for(let u=0;u<7;u++){const d=o[u],v=Math.ceil((e-d.x)/d.xStep),p=Math.ceil((n-d.y)/d.yStep);if(v<=0||p<=0)continue;const y=v*s,_=new Uint8Array(y);for(let S=0;S<p;S++){const w=t[l++],x=t.subarray(l,l+y);l+=y;const k=new Uint8Array(y);FZ(w,x,k,_,y,s),_.set(k);for(let T=0;T<v;T++){const R=d.x+T*d.xStep,U=d.y+S*d.yStep;if(!(R>=e||U>=n))for(let $=0;$<s;$++)c[(U*e+R)*s+$]=k[T*s+$]}}}if(a===16){const u=new Uint16Array(c.buffer);if($Z)for(let d=0;d<u.length;d++)u[d]=zZ(u[d]);return u}else return c}function zZ(r){return(r&255)<<8|r>>8&255}const WZ=new Uint16Array([255]),qZ=new Uint8Array(WZ.buffer),HZ=qZ[0]===255,GZ=new Uint8Array(0);function Ox(r){const{data:t,width:e,height:n,channels:i,depth:a}=r,o=Math.ceil(a/8)*i,s=Math.ceil(a/8*i*e),c=new Uint8Array(n*s);let l=GZ,u=0,d,v;for(let p=0;p<n;p++){switch(d=t.subarray(u+1,u+1+s),v=c.subarray(p*s,(p+1)*s),t[u]){case 0:DC(d,v,s);break;case 1:FC(d,v,s,o);break;case 2:BC(d,v,l,s);break;case 3:UC(d,v,l,s,o);break;case 4:$C(d,v,l,s,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}l=v,u+=s+1}if(a===16){const p=new Uint16Array(c.buffer);if(HZ)for(let y=0;y<p.length;y++)p[y]=KZ(p[y]);return p}else return c}function KZ(r){return(r&255)<<8|r>>8&255}const Ch=Uint8Array.of(137,80,78,71,13,10,26,10);function Ax(r){if(!QZ(r.readBytes(Ch.length)))throw new Error("wrong PNG signature")}function QZ(r){if(r.length<Ch.length)return!1;for(let t=0;t<Ch.length;t++)if(r[t]!==Ch[t])return!1;return!0}const YZ="tEXt",JZ=0,VC=new TextDecoder("latin1");function XZ(r){if(eee(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const ZZ=/^[\u0000-\u00FF]*$/;function eee(r){if(!ZZ.test(r))throw new Error("invalid latin1 text")}function tee(r,t,e){const n=zC(t);r[n]=ree(t,e-n.length-1)}function zC(r){for(r.mark();r.readByte()!==JZ;);const t=r.offset;r.reset();const e=VC.decode(r.readBytes(t-r.offset-1));return r.skip(1),XZ(e),e}function ree(r,t){return VC.decode(r.readBytes(t))}const $n={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},jg={UNKNOWN:-1,DEFLATE:0},Nx={UNKNOWN:-1,ADAPTIVE:0},Ig={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Zd={NONE:0,BACKGROUND:1,PREVIOUS:2},Mg={SOURCE:0,OVER:1};class nee extends P_{constructor(e,n={}){super(e);jt(this,"_checkCrc");jt(this,"_inflator");jt(this,"_png");jt(this,"_apng");jt(this,"_end");jt(this,"_hasPalette");jt(this,"_palette");jt(this,"_hasTransparency");jt(this,"_transparency");jt(this,"_compressionMethod");jt(this,"_filterMethod");jt(this,"_interlaceMethod");jt(this,"_colorType");jt(this,"_isAnimated");jt(this,"_numberOfFrames");jt(this,"_numberOfPlays");jt(this,"_frames");jt(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new Ex,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=jg.UNKNOWN,this._filterMethod=Nx.UNKNOWN,this._interlaceMethod=Ig.UNKNOWN,this._colorType=$n.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Ax(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(Ax(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case YZ:tee(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Lx(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=i+e;break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Lx(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=iee(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case $n.GREYSCALE:i=1;break;case $n.TRUECOLOUR:i=3;break;case $n.INDEXED_COLOUR:i=1;break;case $n.GREYSCALE_ALPHA:i=2;break;case $n.TRUECOLOUR_ALPHA:i=4;break;case $n.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==jg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case $n.GREYSCALE:case $n.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case $n.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case $n.UNKNOWN:case $n.GREYSCALE_ALPHA:case $n.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=zC(this),i=this.readUint8();if(i!==jg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:jZ(a)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:e,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(e);if(i){if(i.data=Ox({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,i){switch(e.disposeOp){case Zd.NONE:break;case Zd.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const s=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[s+c]=0}break;case Zd.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const i=1<<this._png.depth,a=(o,s)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+s)*this._png.channels,l=(o*n.width+s)*this._png.channels;return{index:c,frameIndex:l}};switch(n.blendOp){case Mg.SOURCE:for(let o=0;o<n.height;o++)for(let s=0;s<n.width;s++){const{index:c,frameIndex:l}=a(o,s);for(let u=0;u<this._png.channels;u++)e.data[c+u]=n.data[l+u]}break;case Mg.OVER:for(let o=0;o<n.height;o++)for(let s=0;s<n.width;s++){const{index:c,frameIndex:l}=a(o,s);for(let u=0;u<this._png.channels;u++){const d=n.data[l+this._png.channels-1]/i,v=u%(this._png.channels-1)===0?1:n.data[l+u],p=Math.floor(d*v+(1-d)*e.data[c+u]);e.data[c+u]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Nx.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Ig.NO_INTERLACE)this._png.data=Ox({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Ig.ADAM7)this._png.data=VZ({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Zd.NONE,blendOp:Mg.SOURCE,data:e}),this._inflator=new Ex,this._writingDataChunks=!1}}function iee(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Rx;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Rx||(Rx={}));function aee(r,t){return new nee(r,t).decode()}var ct=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Dg(){ct.console&&typeof ct.console.log=="function"&&ct.console.log.apply(ct.console,arguments)}var Gt={log:Dg,warn:function(r){ct.console&&(typeof ct.console.warn=="function"?ct.console.warn.apply(ct.console,arguments):Dg.call(null,arguments))},error:function(r){ct.console&&(typeof ct.console.error=="function"?ct.console.error.apply(ct.console,arguments):Dg(r))}};function Fg(r,t,e){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){ds(n.response,t,e)},n.onerror=function(){Gt.error("could not download file")},n.send()}function jx(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function eh(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var ds=ct.saveAs||((typeof window>"u"?"undefined":Ut(window))!=="object"||window!==ct?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,e){var n=ct.URL||ct.webkitURL,i=document.createElement("a");t=t||r.name||"download",i.download=t,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?jx(i.href)?Fg(r,t,e):eh(i,i.target="_blank"):eh(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){eh(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,e){if(t=t||r.name||"download",typeof r=="string")if(jx(r))Fg(r,t,e);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){eh(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Ut(a)!=="object"&&(Gt.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(r,e),t)}:function(r,t,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Fg(r,t,e);var i=r.type==="application/octet-stream",a=/constructor/i.test(ct.HTMLElement)||ct.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":Ut(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var u=s.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},s.readAsDataURL(r)}else{var c=ct.URL||ct.webkitURL,l=c.createObjectURL(r);n?n.location=l:location.href=l,n=null,setTimeout(function(){c.revokeObjectURL(l)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function WC(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<e.length;n++){var i=e[n].re,a=e[n].process,o=i.exec(r);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),c=this.g.toString(16),l=this.b.toString(16);return s.length==1&&(s="0"+s),c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),"#"+s+c+l}}var Lh=ct.atob.bind(ct),Ix=ct.btoa.bind(ct);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Bg(r,t){var e=r[0],n=r[1],i=r[2],a=r[3];e=rn(e,n,i,a,t[0],7,-680876936),a=rn(a,e,n,i,t[1],12,-389564586),i=rn(i,a,e,n,t[2],17,606105819),n=rn(n,i,a,e,t[3],22,-1044525330),e=rn(e,n,i,a,t[4],7,-176418897),a=rn(a,e,n,i,t[5],12,1200080426),i=rn(i,a,e,n,t[6],17,-1473231341),n=rn(n,i,a,e,t[7],22,-45705983),e=rn(e,n,i,a,t[8],7,1770035416),a=rn(a,e,n,i,t[9],12,-1958414417),i=rn(i,a,e,n,t[10],17,-42063),n=rn(n,i,a,e,t[11],22,-1990404162),e=rn(e,n,i,a,t[12],7,1804603682),a=rn(a,e,n,i,t[13],12,-40341101),i=rn(i,a,e,n,t[14],17,-1502002290),e=nn(e,n=rn(n,i,a,e,t[15],22,1236535329),i,a,t[1],5,-165796510),a=nn(a,e,n,i,t[6],9,-1069501632),i=nn(i,a,e,n,t[11],14,643717713),n=nn(n,i,a,e,t[0],20,-373897302),e=nn(e,n,i,a,t[5],5,-701558691),a=nn(a,e,n,i,t[10],9,38016083),i=nn(i,a,e,n,t[15],14,-660478335),n=nn(n,i,a,e,t[4],20,-405537848),e=nn(e,n,i,a,t[9],5,568446438),a=nn(a,e,n,i,t[14],9,-1019803690),i=nn(i,a,e,n,t[3],14,-187363961),n=nn(n,i,a,e,t[8],20,1163531501),e=nn(e,n,i,a,t[13],5,-1444681467),a=nn(a,e,n,i,t[2],9,-51403784),i=nn(i,a,e,n,t[7],14,1735328473),e=an(e,n=nn(n,i,a,e,t[12],20,-1926607734),i,a,t[5],4,-378558),a=an(a,e,n,i,t[8],11,-2022574463),i=an(i,a,e,n,t[11],16,1839030562),n=an(n,i,a,e,t[14],23,-35309556),e=an(e,n,i,a,t[1],4,-1530992060),a=an(a,e,n,i,t[4],11,1272893353),i=an(i,a,e,n,t[7],16,-155497632),n=an(n,i,a,e,t[10],23,-1094730640),e=an(e,n,i,a,t[13],4,681279174),a=an(a,e,n,i,t[0],11,-358537222),i=an(i,a,e,n,t[3],16,-722521979),n=an(n,i,a,e,t[6],23,76029189),e=an(e,n,i,a,t[9],4,-640364487),a=an(a,e,n,i,t[12],11,-421815835),i=an(i,a,e,n,t[15],16,530742520),e=on(e,n=an(n,i,a,e,t[2],23,-995338651),i,a,t[0],6,-198630844),a=on(a,e,n,i,t[7],10,1126891415),i=on(i,a,e,n,t[14],15,-1416354905),n=on(n,i,a,e,t[5],21,-57434055),e=on(e,n,i,a,t[12],6,1700485571),a=on(a,e,n,i,t[3],10,-1894986606),i=on(i,a,e,n,t[10],15,-1051523),n=on(n,i,a,e,t[1],21,-2054922799),e=on(e,n,i,a,t[8],6,1873313359),a=on(a,e,n,i,t[15],10,-30611744),i=on(i,a,e,n,t[6],15,-1560198380),n=on(n,i,a,e,t[13],21,1309151649),e=on(e,n,i,a,t[4],6,-145523070),a=on(a,e,n,i,t[11],10,-1120210379),i=on(i,a,e,n,t[2],15,718787259),n=on(n,i,a,e,t[9],21,-343485551),r[0]=yo(e,r[0]),r[1]=yo(n,r[1]),r[2]=yo(i,r[2]),r[3]=yo(a,r[3])}function Cv(r,t,e,n,i,a){return t=yo(yo(t,r),yo(n,a)),yo(t<<i|t>>>32-i,e)}function rn(r,t,e,n,i,a,o){return Cv(t&e|~t&n,r,t,i,a,o)}function nn(r,t,e,n,i,a,o){return Cv(t&n|e&~n,r,t,i,a,o)}function an(r,t,e,n,i,a,o){return Cv(t^e^n,r,t,i,a,o)}function on(r,t,e,n,i,a,o){return Cv(e^(t|~n),r,t,i,a,o)}function qC(r){var t,e=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)Bg(n,oee(r.substring(t-64,t)));r=r.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Bg(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,Bg(n,i),n}function oee(r){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}var Mx="0123456789abcdef".split("");function see(r){for(var t="",e=0;e<4;e++)t+=Mx[r>>8*e+4&15]+Mx[r>>8*e&15];return t}function lee(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function Ty(r){return qC(r).map(lee).join("")}var cee=function(r){for(var t=0;t<r.length;t++)r[t]=see(r[t]);return r.join("")}(qC("hello"))!="5d41402abc4b2a76b9719d911017c592";function yo(r,t){if(cee){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}return r+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ey(r,t){var e,n,i,a;if(r!==e){for(var o=(i=r,a=1+(256/r.length|0),new Array(a+1).join(i)),s=[],c=0;c<256;c++)s[c]=c;var l=0;for(c=0;c<256;c++){var u=s[c];l=(l+u+o.charCodeAt(c))%256,s[c]=s[l],s[l]=u}e=r,n=s}else s=n;var d=t.length,v=0,p=0,y="";for(c=0;c<d;c++)p=(p+(u=s[v=(v+1)%256]))%256,s[v]=s[p],s[p]=u,o=s[(s[v]+s[p])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Dx={print:4,modify:8,copy:16,"annot-forms":32};function gl(r,t,e,n){this.v=1,this.r=2;var i=192;r.forEach(function(s){if(Dx.perm!==void 0)throw new Error("Invalid permission: "+s);i+=Dx[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=Ty(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Ey(this.encryptionKey,this.padding)}function yl(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",e=r.length,n=0;n<e;n++){var i=r.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return t}function Fx(r){if(Ut(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,i){if(i=i||!1,typeof e!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[n,!!i],a},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[e]){var o=t[e][a];try{o[0].apply(r,n)}catch(s){ct.console&&Gt.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function gp(r){if(!(this instanceof gp))return new gp(r);var t="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function HC(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function vs(r,t,e,n,i){if(!(this instanceof vs))return new vs(r,t,e,n,i);this.type=r==="axial"?2:3,this.coords=t,this.colors=e,HC.call(this,n,i)}function Nl(r,t,e,n,i){if(!(this instanceof Nl))return new Nl(r,t,e,n,i);this.boundingBox=r,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,HC.call(this,n,i)}function Ze(r){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,c=16,l="S",u=null;Ut(r=r||{})==="object"&&(e=r.orientation,n=r.unit||n,i=r.format||i,a=r.compress||r.compressPdf||a,(u=r.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(c=r.floatPrecision),l=r.defaultPathOperation||"S"),o=r.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",e=(""+(e||"P")).toLowerCase();var d=r.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=Fx;var y="1.3",_=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(g){y=g};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return S};var w=p.__private__.getPageFormat=function(g){return S[g]};i=i||"a4";var x="compat",k="advanced",T=x;function R(){this.saveGraphicsState(),z(new at(it,0,0,-it,0,Ko()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),l="n",T=k}function U(){this.restoreGraphicsState(),l="S",T=x}var $=p.__private__.combineFontStyleAndFontWeight=function(g,C){if(g=="bold"&&C=="normal"||g=="bold"&&C==400||g=="normal"&&C=="italic"||g=="bold"&&C=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return C&&(g=C==400||C==="normal"?g==="italic"?"italic":"normal":C!=700&&C!=="bold"||g!=="normal"?(C==700?"bold":C)+""+g:"bold"),g};p.advancedAPI=function(g){var C=T===x;return C&&R.call(this),typeof g!="function"||(g(this),C&&U.call(this)),this},p.compatAPI=function(g){var C=T===k;return C&&U.call(this),typeof g!="function"||(g(this),C&&R.call(this)),this},p.isAdvancedAPI=function(){return T===k};var F,M=function(g){if(T!==k)throw new Error(g+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},J=p.roundToPrecision=p.__private__.roundToPrecision=function(g,C){var Y=t||C;if(isNaN(g)||isNaN(Y))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return g.toFixed(Y).replace(/0+$/,"")};F=p.hpf=p.__private__.hpf=typeof c=="number"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return J(g,c)}:c==="smart"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return J(g,g>-1&&g<1?16:5)}:function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return J(g,16)};var O=p.f2=p.__private__.f2=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f2");return J(g,2)},N=p.__private__.f3=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f3");return J(g,3)},q=p.scale=p.__private__.scale=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.scale");return T===x?g*it:T===k?g:void 0},j=function(g){return q(function(C){return T===x?Ko()-C:T===k?C:void 0}(g))};p.__private__.setPrecision=p.setPrecision=function(g){typeof parseInt(g,10)=="number"&&(t=parseInt(g,10))};var Z,X="00000000000000000000000000000000",se=p.__private__.getFileId=function(){return X},H=p.__private__.setFileId=function(g){return X=g!==void 0&&/^[a-fA-F0-9]{32}$/.test(g)?g.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(gr=new gl(u.userPermissions,u.userPassword,u.ownerPassword,X)),X};p.setFileId=function(g){return H(g),this},p.getFileId=function(){return se()};var ie=p.__private__.convertDateToPDFDate=function(g){var C=g.getTimezoneOffset(),Y=C<0?"+":"-",te=Math.floor(Math.abs(C/60)),ce=Math.abs(C%60),xe=[Y,G(te),"'",G(ce),"'"].join("");return["D:",g.getFullYear(),G(g.getMonth()+1),G(g.getDate()),G(g.getHours()),G(g.getMinutes()),G(g.getSeconds()),xe].join("")},fe=p.__private__.convertPDFDateToDate=function(g){var C=parseInt(g.substr(2,4),10),Y=parseInt(g.substr(6,2),10)-1,te=parseInt(g.substr(8,2),10),ce=parseInt(g.substr(10,2),10),xe=parseInt(g.substr(12,2),10),Pe=parseInt(g.substr(14,2),10);return new Date(C,Y,te,ce,xe,Pe,0)},ne=p.__private__.setCreationDate=function(g){var C;if(g===void 0&&(g=new Date),g instanceof Date)C=ie(g);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(g))throw new Error("Invalid argument passed to jsPDF.setCreationDate");C=g}return Z=C},E=p.__private__.getCreationDate=function(g){var C=Z;return g==="jsDate"&&(C=fe(Z)),C};p.setCreationDate=function(g){return ne(g),this},p.getCreationDate=function(g){return E(g)};var W,G=p.__private__.padd2=function(g){return("0"+parseInt(g)).slice(-2)},ee=p.__private__.padd2Hex=function(g){return("00"+(g=g.toString())).substr(g.length)},oe=0,ue=[],ye=[],me=0,be=[],Te=[],Re=!1,Oe=ye;p.__private__.setCustomOutputDestination=function(g){Re=!0,Oe=g};var re=function(g){Re||(Oe=g)};p.__private__.resetCustomOutputDestination=function(){Re=!1,Oe=ye};var z=p.__private__.out=function(g){return g=g.toString(),me+=g.length+1,Oe.push(g),Oe},nt=p.__private__.write=function(g){return z(arguments.length===1?g.toString():Array.prototype.join.call(arguments," "))},Ke=p.__private__.getArrayBuffer=function(g){for(var C=g.length,Y=new ArrayBuffer(C),te=new Uint8Array(Y);C--;)te[C]=g.charCodeAt(C);return Y},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return $e};var Ee=r.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(g){return Ee=T===k?g/it:g,this};var Ie,Ne=p.__private__.getFontSize=p.getFontSize=function(){return T===x?Ee:Ee*it},st=r.R2L||!1;p.__private__.setR2L=p.setR2L=function(g){return st=g,this},p.__private__.getR2L=p.getR2L=function(){return st};var Qe,xt=p.__private__.setZoomMode=function(g){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(g))Ie=g;else if(isNaN(g)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(g)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+g+'" is not recognized.');Ie=g}else Ie=parseInt(g,10)};p.__private__.getZoomMode=function(){return Ie};var ut,dt=p.__private__.setPageMode=function(g){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(g)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+g+'" is not recognized.');Qe=g};p.__private__.getPageMode=function(){return Qe};var Ot=p.__private__.setLayoutMode=function(g){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(g)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+g+'" is not recognized.');ut=g};p.__private__.getLayoutMode=function(){return ut},p.__private__.setDisplayMode=p.setDisplayMode=function(g,C,Y){return xt(g),Ot(C),dt(Y),this};var lt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(g){if(Object.keys(lt).indexOf(g)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return lt[g]},p.__private__.getDocumentProperties=function(){return lt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(g){for(var C in lt)lt.hasOwnProperty(C)&&g[C]&&(lt[C]=g[C]);return this},p.__private__.setDocumentProperty=function(g,C){if(Object.keys(lt).indexOf(g)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return lt[g]=C};var qe,it,Je,At,St,Ve={},ot={},Nt=[],We={},ht={},je={},vr={},mr=null,Wt=0,pt=[],It=new Fx(p),Mo=r.hotfixes||[],Jr={},oa={},Mi=[],at=function g(C,Y,te,ce,xe,Pe){if(!(this instanceof g))return new g(C,Y,te,ce,xe,Pe);isNaN(C)&&(C=1),isNaN(Y)&&(Y=0),isNaN(te)&&(te=0),isNaN(ce)&&(ce=1),isNaN(xe)&&(xe=0),isNaN(Pe)&&(Pe=0),this._matrix=[C,Y,te,ce,xe,Pe]};Object.defineProperty(at.prototype,"sx",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(at.prototype,"shy",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(at.prototype,"shx",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(at.prototype,"sy",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(at.prototype,"tx",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(at.prototype,"ty",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(at.prototype,"a",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(at.prototype,"b",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(at.prototype,"c",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(at.prototype,"d",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(at.prototype,"e",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(at.prototype,"f",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(at.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(at.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(at.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(at.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),at.prototype.join=function(g){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(g)},at.prototype.multiply=function(g){var C=g.sx*this.sx+g.shy*this.shx,Y=g.sx*this.shy+g.shy*this.sy,te=g.shx*this.sx+g.sy*this.shx,ce=g.shx*this.shy+g.sy*this.sy,xe=g.tx*this.sx+g.ty*this.shx+this.tx,Pe=g.tx*this.shy+g.ty*this.sy+this.ty;return new at(C,Y,te,ce,xe,Pe)},at.prototype.decompose=function(){var g=this.sx,C=this.shy,Y=this.shx,te=this.sy,ce=this.tx,xe=this.ty,Pe=Math.sqrt(g*g+C*C),ze=(g/=Pe)*Y+(C/=Pe)*te;Y-=g*ze,te-=C*ze;var Ye=Math.sqrt(Y*Y+te*te);return ze/=Ye,g*(te/=Ye)<C*(Y/=Ye)&&(g=-g,C=-C,ze=-ze,Pe=-Pe),{scale:new at(Pe,0,0,Ye,0,0),translate:new at(1,0,0,1,ce,xe),rotate:new at(g,C,-C,g,0,0),skew:new at(1,0,ze,1,0,0)}},at.prototype.toString=function(g){return this.join(" ")},at.prototype.inversed=function(){var g=this.sx,C=this.shy,Y=this.shx,te=this.sy,ce=this.tx,xe=this.ty,Pe=1/(g*te-C*Y),ze=te*Pe,Ye=-C*Pe,ft=-Y*Pe,mt=g*Pe;return new at(ze,Ye,ft,mt,-ze*ce-ft*xe,-Ye*ce-mt*xe)},at.prototype.applyToPoint=function(g){var C=g.x*this.sx+g.y*this.shx+this.tx,Y=g.x*this.shy+g.y*this.sy+this.ty;return new Ho(C,Y)},at.prototype.applyToRectangle=function(g){var C=this.applyToPoint(g),Y=this.applyToPoint(new Ho(g.x+g.w,g.y+g.h));return new Oc(C.x,C.y,Y.x-C.x,Y.y-C.y)},at.prototype.clone=function(){var g=this.sx,C=this.shy,Y=this.shx,te=this.sy,ce=this.tx,xe=this.ty;return new at(g,C,Y,te,ce,xe)},p.Matrix=at;var sa=p.matrixMult=function(g,C){return C.multiply(g)},la=new at(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=la;var Yn=function(g,C){if(!ht[g]){var Y=(C instanceof vs?"Sh":"P")+(Object.keys(We).length+1).toString(10);C.id=Y,ht[g]=Y,We[Y]=C,It.publish("addPattern",C)}};p.ShadingPattern=vs,p.TilingPattern=Nl,p.addShadingPattern=function(g,C){return M("addShadingPattern()"),Yn(g,C),this},p.beginTilingPattern=function(g){M("beginTilingPattern()"),Ac(g.boundingBox[0],g.boundingBox[1],g.boundingBox[2]-g.boundingBox[0],g.boundingBox[3]-g.boundingBox[1],g.matrix)},p.endTilingPattern=function(g,C){M("endTilingPattern()"),C.stream=Te[W].join(`
`),Yn(g,C),It.publish("endTilingPattern",C),Mi.pop().restore()};var Jn,lr=p.__private__.newObject=function(){var g=Br();return zr(g,!0),g},Br=p.__private__.newObjectDeferred=function(){return oe++,ue[oe]=function(){return me},oe},zr=function(g,C){return C=typeof C=="boolean"&&C,ue[g]=me,C&&z(g+" 0 obj"),g},Do=p.__private__.newAdditionalObject=function(){var g={objId:Br(),content:""};return be.push(g),g},Ua=Br(),pi=Br(),Di=p.__private__.decodeColorString=function(g){var C=g.split(" ");if(C.length!==2||C[1]!=="g"&&C[1]!=="G")C.length!==5||C[4]!=="k"&&C[4]!=="K"||(C=[(1-C[0])*(1-C[3]),(1-C[1])*(1-C[3]),(1-C[2])*(1-C[3]),"r"]);else{var Y=parseFloat(C[0]);C=[Y,Y,Y,"r"]}for(var te="#",ce=0;ce<3;ce++)te+=("0"+Math.floor(255*parseFloat(C[ce])).toString(16)).slice(-2);return te},vi=p.__private__.encodeColorString=function(g){var C;typeof g=="string"&&(g={ch1:g});var Y=g.ch1,te=g.ch2,ce=g.ch3,xe=g.ch4,Pe=g.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Y=="string"&&Y.charAt(0)!=="#"){var ze=new WC(Y);if(ze.ok)Y=ze.toHex();else if(!/^\d*\.?\d*$/.test(Y))throw new Error('Invalid color "'+Y+'" passed to jsPDF.encodeColorString.')}if(typeof Y=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Y)&&(Y="#"+Y[1]+Y[1]+Y[2]+Y[2]+Y[3]+Y[3]),typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y)){var Ye=parseInt(Y.substr(1),16);Y=Ye>>16&255,te=Ye>>8&255,ce=255&Ye}if(te===void 0||xe===void 0&&Y===te&&te===ce)C=typeof Y=="string"?Y+" "+Pe[0]:g.precision===2?O(Y/255)+" "+Pe[0]:N(Y/255)+" "+Pe[0];else if(xe===void 0||Ut(xe)==="object"){if(xe&&!isNaN(xe.a)&&xe.a===0)return["1.","1.","1.",Pe[1]].join(" ");C=typeof Y=="string"?[Y,te,ce,Pe[1]].join(" "):g.precision===2?[O(Y/255),O(te/255),O(ce/255),Pe[1]].join(" "):[N(Y/255),N(te/255),N(ce/255),Pe[1]].join(" ")}else C=typeof Y=="string"?[Y,te,ce,xe,Pe[2]].join(" "):g.precision===2?[O(Y),O(te),O(ce),O(xe),Pe[2]].join(" "):[N(Y),N(te),N(ce),N(xe),Pe[2]].join(" ");return C},mi=p.__private__.getFilters=function(){return o},Xn=p.__private__.putStream=function(g){var C=(g=g||{}).data||"",Y=g.filters||mi(),te=g.alreadyAppliedFilters||[],ce=g.addLength1||!1,xe=C.length,Pe=g.objectId,ze=function(Nr){return Nr};if(u!==null&&Pe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ze=gr.encryptor(Pe,0));var Ye={};Y===!0&&(Y=["FlateEncode"]);var ft=g.additionalKeyValues||[],mt=(Ye=Ze.API.processDataByFilters!==void 0?Ze.API.processDataByFilters(C,Y):{data:C,reverseChain:[]}).reverseChain+(Array.isArray(te)?te.join(" "):te.toString());if(Ye.data.length!==0&&(ft.push({key:"Length",value:Ye.data.length}),ce===!0&&ft.push({key:"Length1",value:xe})),mt.length!=0)if(mt.split("/").length-1==1)ft.push({key:"Filter",value:mt});else{ft.push({key:"Filter",value:"["+mt+"]"});for(var Rt=0;Rt<ft.length;Rt+=1)if(ft[Rt].key==="DecodeParms"){for(var nr=[],Er=0;Er<Ye.reverseChain.split("/").length-1;Er+=1)nr.push("null");nr.push(ft[Rt].value),ft[Rt].value="["+nr.join(" ")+"]"}}z("<<");for(var Kt=0;Kt<ft.length;Kt++)z("/"+ft[Kt].key+" "+ft[Kt].value);z(">>"),Ye.data.length!==0&&(z("stream"),z(ze(Ye.data)),z("endstream"))},Fo=p.__private__.putPage=function(g){var C=g.number,Y=g.data,te=g.objId,ce=g.contentsObjId;zr(te,!0),z("<</Type /Page"),z("/Parent "+g.rootDictionaryObjId+" 0 R"),z("/Resources "+g.resourceDictionaryObjId+" 0 R"),z("/MediaBox ["+parseFloat(F(g.mediaBox.bottomLeftX))+" "+parseFloat(F(g.mediaBox.bottomLeftY))+" "+F(g.mediaBox.topRightX)+" "+F(g.mediaBox.topRightY)+"]"),g.cropBox!==null&&z("/CropBox ["+F(g.cropBox.bottomLeftX)+" "+F(g.cropBox.bottomLeftY)+" "+F(g.cropBox.topRightX)+" "+F(g.cropBox.topRightY)+"]"),g.bleedBox!==null&&z("/BleedBox ["+F(g.bleedBox.bottomLeftX)+" "+F(g.bleedBox.bottomLeftY)+" "+F(g.bleedBox.topRightX)+" "+F(g.bleedBox.topRightY)+"]"),g.trimBox!==null&&z("/TrimBox ["+F(g.trimBox.bottomLeftX)+" "+F(g.trimBox.bottomLeftY)+" "+F(g.trimBox.topRightX)+" "+F(g.trimBox.topRightY)+"]"),g.artBox!==null&&z("/ArtBox ["+F(g.artBox.bottomLeftX)+" "+F(g.artBox.bottomLeftY)+" "+F(g.artBox.topRightX)+" "+F(g.artBox.topRightY)+"]"),typeof g.userUnit=="number"&&g.userUnit!==1&&z("/UserUnit "+g.userUnit),It.publish("putPage",{objId:te,pageContext:pt[C],pageNumber:C,page:Y}),z("/Contents "+ce+" 0 R"),z(">>"),z("endobj");var xe=Y.join(`
`);return T===k&&(xe+=`
Q`),zr(ce,!0),Xn({data:xe,filters:mi(),objectId:ce}),z("endobj"),te},Fi=p.__private__.putPages=function(){var g,C,Y=[];for(g=1;g<=Wt;g++)pt[g].objId=Br(),pt[g].contentsObjId=Br();for(g=1;g<=Wt;g++)Y.push(Fo({number:g,data:Te[g],objId:pt[g].objId,contentsObjId:pt[g].contentsObjId,mediaBox:pt[g].mediaBox,cropBox:pt[g].cropBox,bleedBox:pt[g].bleedBox,trimBox:pt[g].trimBox,artBox:pt[g].artBox,userUnit:pt[g].userUnit,rootDictionaryObjId:Ua,resourceDictionaryObjId:pi}));zr(Ua,!0),z("<</Type /Pages");var te="/Kids [";for(C=0;C<Wt;C++)te+=Y[C]+" 0 R ";z(te+"]"),z("/Count "+Wt),z(">>"),z("endobj"),It.publish("postPutPages")},Bo=function(g){It.publish("putFont",{font:g,out:z,newObject:lr,putStream:Xn}),g.isAlreadyPutted!==!0&&(g.objectNumber=lr(),z("<<"),z("/Type /Font"),z("/BaseFont /"+yl(g.postScriptName)),z("/Subtype /Type1"),typeof g.encoding=="string"&&z("/Encoding /"+g.encoding),z("/FirstChar 32"),z("/LastChar 255"),z(">>"),z("endobj"))},Ws=function(g){g.objectNumber=lr();var C=[];C.push({key:"Type",value:"/XObject"}),C.push({key:"Subtype",value:"/Form"}),C.push({key:"BBox",value:"["+[F(g.x),F(g.y),F(g.x+g.width),F(g.y+g.height)].join(" ")+"]"}),C.push({key:"Matrix",value:"["+g.matrix.toString()+"]"});var Y=g.pages[1].join(`
`);Xn({data:Y,additionalKeyValues:C,objectId:g.objectNumber}),z("endobj")},qs=function(g,C){C||(C=21);var Y=lr(),te=function(Pe,ze){var Ye,ft=[],mt=1/(ze-1);for(Ye=0;Ye<1;Ye+=mt)ft.push(Ye);if(ft.push(1),Pe[0].offset!=0){var Rt={offset:0,color:Pe[0].color};Pe.unshift(Rt)}if(Pe[Pe.length-1].offset!=1){var nr={offset:1,color:Pe[Pe.length-1].color};Pe.push(nr)}for(var Er="",Kt=0,Nr=0;Nr<ft.length;Nr++){for(Ye=ft[Nr];Ye>Pe[Kt+1].offset;)Kt++;var Cr=Pe[Kt].offset,Wr=(Ye-Cr)/(Pe[Kt+1].offset-Cr),ei=Pe[Kt].color,wn=Pe[Kt+1].color;Er+=ee(Math.round((1-Wr)*ei[0]+Wr*wn[0]).toString(16))+ee(Math.round((1-Wr)*ei[1]+Wr*wn[1]).toString(16))+ee(Math.round((1-Wr)*ei[2]+Wr*wn[2]).toString(16))}return Er.trim()}(g.colors,C),ce=[];ce.push({key:"FunctionType",value:"0"}),ce.push({key:"Domain",value:"[0.0 1.0]"}),ce.push({key:"Size",value:"["+C+"]"}),ce.push({key:"BitsPerSample",value:"8"}),ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xn({data:te,additionalKeyValues:ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Y}),z("endobj"),g.objectNumber=lr(),z("<< /ShadingType "+g.type),z("/ColorSpace /DeviceRGB");var xe="/Coords ["+F(parseFloat(g.coords[0]))+" "+F(parseFloat(g.coords[1]))+" ";g.type===2?xe+=F(parseFloat(g.coords[2]))+" "+F(parseFloat(g.coords[3])):xe+=F(parseFloat(g.coords[2]))+" "+F(parseFloat(g.coords[3]))+" "+F(parseFloat(g.coords[4]))+" "+F(parseFloat(g.coords[5])),z(xe+="]"),g.matrix&&z("/Matrix ["+g.matrix.toString()+"]"),z("/Function "+Y+" 0 R"),z("/Extend [true true]"),z(">>"),z("endobj")},Hs=function(g,C){var Y=Br(),te=lr();C.push({resourcesOid:Y,objectOid:te}),g.objectNumber=te;var ce=[];ce.push({key:"Type",value:"/Pattern"}),ce.push({key:"PatternType",value:"1"}),ce.push({key:"PaintType",value:"1"}),ce.push({key:"TilingType",value:"1"}),ce.push({key:"BBox",value:"["+g.boundingBox.map(F).join(" ")+"]"}),ce.push({key:"XStep",value:F(g.xStep)}),ce.push({key:"YStep",value:F(g.yStep)}),ce.push({key:"Resources",value:Y+" 0 R"}),g.matrix&&ce.push({key:"Matrix",value:"["+g.matrix.toString()+"]"}),Xn({data:g.stream,additionalKeyValues:ce,objectId:g.objectNumber}),z("endobj")},Lv=function(g){for(var C in g.objectNumber=lr(),z("<<"),g)switch(C){case"opacity":z("/ca "+O(g[C]));break;case"stroke-opacity":z("/CA "+O(g[C]))}z(">>"),z("endobj")},wc=function(g){zr(g.resourcesOid,!0),z("<<"),z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var C in z("/Font <<"),Ve)Ve.hasOwnProperty(C)&&(d===!1||d===!0&&v.hasOwnProperty(C))&&z("/"+C+" "+Ve[C].objectNumber+" 0 R");z(">>")}(),function(){if(Object.keys(We).length>0){for(var C in z("/Shading <<"),We)We.hasOwnProperty(C)&&We[C]instanceof vs&&We[C].objectNumber>=0&&z("/"+C+" "+We[C].objectNumber+" 0 R");It.publish("putShadingPatternDict"),z(">>")}}(),function(C){if(Object.keys(We).length>0){for(var Y in z("/Pattern <<"),We)We.hasOwnProperty(Y)&&We[Y]instanceof p.TilingPattern&&We[Y].objectNumber>=0&&We[Y].objectNumber<C&&z("/"+Y+" "+We[Y].objectNumber+" 0 R");It.publish("putTilingPatternDict"),z(">>")}}(g.objectOid),function(){if(Object.keys(je).length>0){var C;for(C in z("/ExtGState <<"),je)je.hasOwnProperty(C)&&je[C].objectNumber>=0&&z("/"+C+" "+je[C].objectNumber+" 0 R");It.publish("putGStateDict"),z(">>")}}(),function(){for(var C in z("/XObject <<"),Jr)Jr.hasOwnProperty(C)&&Jr[C].objectNumber>=0&&z("/"+C+" "+Jr[C].objectNumber+" 0 R");It.publish("putXobjectDict"),z(">>")}(),z(">>"),z("endobj")},Ef=function(g){ot[g.fontName]=ot[g.fontName]||{},ot[g.fontName][g.fontStyle]=g.id},Cf=function(g,C,Y,te,ce){var xe={id:"F"+(Object.keys(Ve).length+1).toString(10),postScriptName:g,fontName:C,fontStyle:Y,encoding:te,isStandardFont:ce||!1,metadata:{}};return It.publish("addFont",{font:xe,instance:this}),Ve[xe.id]=xe,Ef(xe),xe.id},Zn=p.__private__.pdfEscape=p.pdfEscape=function(g,C){return function(Y,te){var ce,xe,Pe,ze,Ye,ft,mt,Rt,nr;if(Pe=(te=te||{}).sourceEncoding||"Unicode",Ye=te.outputEncoding,(te.autoencode||Ye)&&Ve[qe].metadata&&Ve[qe].metadata[Pe]&&Ve[qe].metadata[Pe].encoding&&(ze=Ve[qe].metadata[Pe].encoding,!Ye&&Ve[qe].encoding&&(Ye=Ve[qe].encoding),!Ye&&ze.codePages&&(Ye=ze.codePages[0]),typeof Ye=="string"&&(Ye=ze[Ye]),Ye)){for(mt=!1,ft=[],ce=0,xe=Y.length;ce<xe;ce++)(Rt=Ye[Y.charCodeAt(ce)])?ft.push(String.fromCharCode(Rt)):ft.push(Y[ce]),ft[ce].charCodeAt(0)>>8&&(mt=!0);Y=ft.join("")}for(ce=Y.length;mt===void 0&&ce!==0;)Y.charCodeAt(ce-1)>>8&&(mt=!0),ce--;if(!mt)return Y;for(ft=te.noBOM?[]:[254,255],ce=0,xe=Y.length;ce<xe;ce++){if((nr=(Rt=Y.charCodeAt(ce))>>8)>>8)throw new Error("Character at position "+ce+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ft.push(nr),ft.push(Rt-(nr<<8))}return String.fromCharCode.apply(void 0,ft)}(g,C).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bc=p.__private__.beginPage=function(g){Te[++Wt]=[],pt[Wt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(g[0]),topRightY:Number(g[1])}},Of(Wt),re(Te[W])},Lf=function(g,C){var Y,te,ce;switch(e=C||e,typeof g=="string"&&(Y=w(g.toLowerCase()),Array.isArray(Y)&&(te=Y[0],ce=Y[1])),Array.isArray(g)&&(te=g[0]*it,ce=g[1]*it),isNaN(te)&&(te=i[0],ce=i[1]),(te>14400||ce>14400)&&(Gt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),te=Math.min(14400,te),ce=Math.min(14400,ce)),i=[te,ce],e.substr(0,1)){case"l":ce>te&&(i=[ce,te]);break;case"p":te>ce&&(i=[ce,te])}bc(i),Fv(Tc),z(Ks),Cc!==0&&z(Cc+" J"),Lc!==0&&z(Lc+" j"),It.publish("addPage",{pageNumber:Wt})},xc=function(g){g>0&&g<=Wt&&(Te.splice(g,1),pt.splice(g,1),Wt--,W>Wt&&(W=Wt),this.setPage(W))},Of=function(g){g>0&&g<=Wt&&(W=g)},Af=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Te.length-1},Nf=function(g,C,Y){var te,ce=void 0;return Y=Y||{},g=g!==void 0?g:Ve[qe].fontName,C=C!==void 0?C:Ve[qe].fontStyle,te=g.toLowerCase(),ot[te]!==void 0&&ot[te][C]!==void 0?ce=ot[te][C]:ot[g]!==void 0&&ot[g][C]!==void 0?ce=ot[g][C]:Y.disableWarning===!1&&Gt.warn("Unable to look up font label for font '"+g+"', '"+C+"'. Refer to getFontList() for available fonts."),ce||Y.noFallback||(ce=ot.times[C])==null&&(ce=ot.times.normal),ce},Gs=p.__private__.putInfo=function(){var g=lr(),C=function(te){return te};for(var Y in u!==null&&(C=gr.encryptor(g,0)),z("<<"),z("/Producer ("+Zn(C("jsPDF "+Ze.version))+")"),lt)lt.hasOwnProperty(Y)&&lt[Y]&&z("/"+Y.substr(0,1).toUpperCase()+Y.substr(1)+" ("+Zn(C(lt[Y]))+")");z("/CreationDate ("+Zn(C(Z))+")"),z(">>"),z("endobj")},Ov=p.__private__.putCatalog=function(g){var C=(g=g||{}).rootDictionaryObjId||Ua;switch(lr(),z("<<"),z("/Type /Catalog"),z("/Pages "+C+" 0 R"),Ie||(Ie="fullwidth"),Ie){case"fullwidth":z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":z("/OpenAction [3 0 R /Fit]");break;case"original":z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Y=""+Ie;Y.substr(Y.length-1)==="%"&&(Ie=parseInt(Ie)/100),typeof Ie=="number"&&z("/OpenAction [3 0 R /XYZ null null "+O(Ie)+"]")}switch(ut||(ut="continuous"),ut){case"continuous":z("/PageLayout /OneColumn");break;case"single":z("/PageLayout /SinglePage");break;case"two":case"twoleft":z("/PageLayout /TwoColumnLeft");break;case"tworight":z("/PageLayout /TwoColumnRight")}Qe&&z("/PageMode /"+Qe),It.publish("putCatalog"),z(">>"),z("endobj")},Tr=p.__private__.putTrailer=function(){z("trailer"),z("<<"),z("/Size "+(oe+1)),z("/Root "+oe+" 0 R"),z("/Info "+(oe-1)+" 0 R"),u!==null&&z("/Encrypt "+gr.oid+" 0 R"),z("/ID [ <"+X+"> <"+X+"> ]"),z(">>")},Rf=p.__private__.putHeader=function(){z("%PDF-"+y),z("%ºß¬à")},jf=p.__private__.putXRef=function(){var g="0000000000";z("xref"),z("0 "+(oe+1)),z("0000000000 65535 f ");for(var C=1;C<=oe;C++)typeof ue[C]=="function"?z((g+ue[C]()).slice(-10)+" 00000 n "):ue[C]!==void 0?z((g+ue[C]).slice(-10)+" 00000 n "):z("0000000000 00000 n ")},ca=p.__private__.buildDocument=function(){var g;oe=0,me=0,ye=[],ue=[],be=[],Ua=Br(),pi=Br(),re(ye),It.publish("buildDocument"),Rf(),Fi(),function(){It.publish("putAdditionalObjects");for(var Y=0;Y<be.length;Y++){var te=be[Y];zr(te.objId,!0),z(te.content),z("endobj")}It.publish("postPutAdditionalObjects")}(),g=[],function(){for(var Y in Ve)Ve.hasOwnProperty(Y)&&(d===!1||d===!0&&v.hasOwnProperty(Y))&&Bo(Ve[Y])}(),function(){var Y;for(Y in je)je.hasOwnProperty(Y)&&Lv(je[Y])}(),function(){for(var Y in Jr)Jr.hasOwnProperty(Y)&&Ws(Jr[Y])}(),function(Y){var te;for(te in We)We.hasOwnProperty(te)&&(We[te]instanceof vs?qs(We[te]):We[te]instanceof Nl&&Hs(We[te],Y))}(g),It.publish("putResources"),g.forEach(wc),wc({resourcesOid:pi,objectOid:Number.MAX_SAFE_INTEGER}),It.publish("postPutResources"),u!==null&&(gr.oid=lr(),z("<<"),z("/Filter /Standard"),z("/V "+gr.v),z("/R "+gr.r),z("/U <"+gr.toHexString(gr.U)+">"),z("/O <"+gr.toHexString(gr.O)+">"),z("/P "+gr.P),z(">>"),z("endobj")),Gs(),Ov();var C=me;return jf(),Tr(),z("startxref"),z(""+C),z("%%EOF"),re(Te[W]),ye.join(`
`)},Uo=p.__private__.getBlob=function(g){return new Blob([Ke(g)],{type:"application/pdf"})},gi=p.output=p.__private__.output=(Jn=function(g,C){switch(typeof(C=C||{})=="string"?C={filename:C}:C.filename=C.filename||"generated.pdf",g){case void 0:return ca();case"save":p.save(C.filename);break;case"arraybuffer":return Ke(ca());case"blob":return Uo(ca());case"bloburi":case"bloburl":if(ct.URL!==void 0&&typeof ct.URL.createObjectURL=="function")return ct.URL&&ct.URL.createObjectURL(Uo(ca()))||void 0;Gt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Y="",te=ca();try{Y=Ix(te)}catch{Y=Ix(unescape(encodeURIComponent(te)))}return"data:application/pdf;filename="+C.filename+";base64,"+Y;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ct)==="[object Window]"){var ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';C.pdfObjectUrl&&(ce=C.pdfObjectUrl,xe="");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ce+'"'+xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(C)+");<\/script></body></html>",ze=ct.open();return ze!==null&&ze.document.write(Pe),ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ct)==="[object Window]"){var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(C.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+C.filename+'" width="500px" height="400px" /></body></html>',ft=ct.open();if(ft!==null){ft.document.write(Ye);var mt=this;ft.document.documentElement.querySelector("#pdfViewer").onload=function(){ft.document.title=C.filename,ft.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mt.output("bloburl"))}}return ft}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ct)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",C)+'"></iframe></body></html>',nr=ct.open();if(nr!==null&&(nr.document.write(Rt),nr.document.title=C.filename),nr||typeof safari>"u")return nr;break;case"datauri":case"dataurl":return ct.document.location.href=this.output("datauristring",C);default:return null}},Jn.foo=function(){try{return Jn.apply(this,arguments)}catch(Y){var g=Y.stack||"";~g.indexOf(" at ")&&(g=g.split(" at ")[1]);var C="Error in function "+g.split(`
`)[0].split("<")[0]+": "+Y.message;if(!ct.console)throw new Error(C);ct.console.error(C,Y),ct.alert&&alert(C)}},Jn.foo.bar=Jn,Jn.foo),$o=function(g){return Array.isArray(Mo)===!0&&Mo.indexOf(g)>-1};switch(n){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=$o("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);it=n}var gr=null;ne(),H();var Sc=p.__private__.getPageInfo=p.getPageInfo=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pt[g].objId,pageNumber:g,pageContext:pt[g]}},Av=p.__private__.getPageInfoByObjId=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var C in pt)if(pt[C].objId===g)break;return Sc(C)},Nv=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:pt[W].objId,pageNumber:W,pageContext:pt[W]}};p.addPage=function(){return Lf.apply(this,arguments),this},p.setPage=function(){return Of.apply(this,arguments),re.call(this,Te[W]),this},p.insertPage=function(g){return this.addPage(),this.movePage(W,g),this},p.movePage=function(g,C){var Y,te;if(g>C){Y=Te[g],te=pt[g];for(var ce=g;ce>C;ce--)Te[ce]=Te[ce-1],pt[ce]=pt[ce-1];Te[C]=Y,pt[C]=te,this.setPage(C)}else if(g<C){Y=Te[g],te=pt[g];for(var xe=g;xe<C;xe++)Te[xe]=Te[xe+1],pt[xe]=pt[xe+1];Te[C]=Y,pt[C]=te,this.setPage(C)}return this},p.deletePage=function(){return xc.apply(this,arguments),this},p.__private__.text=p.text=function(g,C,Y,te,ce){var xe,Pe,ze,Ye,ft,mt,Rt,nr,Er,Kt=(te=te||{}).scope||this;if(typeof g=="number"&&typeof C=="number"&&(typeof Y=="string"||Array.isArray(Y))){var Nr=Y;Y=C,C=g,g=Nr}if(arguments[3]instanceof at==0?(ze=arguments[4],Ye=arguments[5],Ut(Rt=arguments[3])==="object"&&Rt!==null||(typeof ze=="string"&&(Ye=ze,ze=null),typeof Rt=="string"&&(Ye=Rt,Rt=null),typeof Rt=="number"&&(ze=Rt,Rt=null),te={flags:Rt,angle:ze,align:Ye})):(M("The transform parameter of text() with a Matrix value"),Er=ce),isNaN(C)||isNaN(Y)||g==null)throw new Error("Invalid arguments passed to jsPDF.text");if(g.length===0)return Kt;var Cr,Wr="",ei=typeof te.lineHeightFactor=="number"?te.lineHeightFactor:zo,wn=Kt.internal.scaleFactor;function Vf(Mt){return Mt=Mt.split("	").join(Array(te.TabLen||9).join(" ")),Zn(Mt,Rt)}function Xs(Mt){for(var qt,_r=Mt.concat(),Rr=[],ma=_r.length;ma--;)typeof(qt=_r.shift())=="string"?Rr.push(qt):Array.isArray(Mt)&&(qt.length===1||qt[1]===void 0&&qt[2]===void 0)?Rr.push(qt[0]):Rr.push([qt[0],qt[1],qt[2]]);return Rr}function Qo(Mt,qt){var _r;if(typeof Mt=="string")_r=qt(Mt)[0];else if(Array.isArray(Mt)){for(var Rr,ma,$c=Mt.concat(),tl=[],qf=$c.length;qf--;)typeof(Rr=$c.shift())=="string"?tl.push(qt(Rr)[0]):Array.isArray(Rr)&&typeof Rr[0]=="string"&&(ma=qt(Rr[0],Rr[1],Rr[2]),tl.push([ma[0],ma[1],ma[2]]));_r=tl}return _r}var za=!1,Yo=!0;if(typeof g=="string")za=!0;else if(Array.isArray(g)){var Jo=g.concat();Pe=[];for(var Xo,Xr=Jo.length;Xr--;)(typeof(Xo=Jo.shift())!="string"||Array.isArray(Xo)&&typeof Xo[0]!="string")&&(Yo=!1);za=Yo}if(za===!1)throw new Error('Type of text must be string or Array. "'+g+'" is not recognized.');typeof g=="string"&&(g=g.match(/[\r?\n]/)?g.split(/\r\n|\r|\n/g):[g]);var Zo=Ee/Kt.internal.scaleFactor,es=Zo*(ei-1);switch(te.baseline){case"bottom":Y-=es;break;case"top":Y+=Zo-es;break;case"hanging":Y+=Zo-2*es;break;case"middle":Y+=Zo/2-es}if((mt=te.maxWidth||0)>0&&(typeof g=="string"?g=Kt.splitTextToSize(g,mt):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(Mt,qt){return Mt.concat(Kt.splitTextToSize(qt,mt))},[]))),xe={text:g,x:C,y:Y,options:te,mutex:{pdfEscape:Zn,activeFontKey:qe,fonts:Ve,activeFontSize:Ee}},It.publish("preProcessText",xe),g=xe.text,ze=(te=xe.options).angle,Er instanceof at==0&&ze&&typeof ze=="number"){ze*=Math.PI/180,te.rotationDirection===0&&(ze=-ze),T===k&&(ze=-ze);var Nc=Math.cos(ze),Rc=Math.sin(ze);Er=new at(Nc,Rc,-Rc,Nc,0,0)}else ze&&ze instanceof at&&(Er=ze);T!==k||Er||(Er=la),(ft=te.charSpace||Ys)!==void 0&&(Wr+=F(q(ft))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(nr=te.horizontalScale)!==void 0&&(Wr+=F(100*nr)+` Tz
`),te.lang;var cr=-1,pa=te.renderingMode!==void 0?te.renderingMode:te.stroke,Zs=Kt.internal.getCurrentPageInfo().pageContext;switch(pa){case 0:case!1:case"fill":cr=0;break;case 1:case!0:case"stroke":cr=1;break;case 2:case"fillThenStroke":cr=2;break;case 3:case"invisible":cr=3;break;case 4:case"fillAndAddForClipping":cr=4;break;case 5:case"strokeAndAddPathForClipping":cr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":cr=6;break;case 7:case"addToPathForClipping":cr=7}var zf=Zs.usedRenderingMode!==void 0?Zs.usedRenderingMode:-1;cr!==-1?Wr+=cr+` Tr
`:zf!==-1&&(Wr+=`0 Tr
`),cr!==-1&&(Zs.usedRenderingMode=cr),Ye=te.align||"left";var ti,ts=Ee*ei,jc=Kt.internal.pageSize.getWidth(),Ic=Ve[qe];ft=te.charSpace||Ys,mt=te.maxWidth||0,Rt=Object.assign({autoencode:!0,noBOM:!0},te.flags);var Wa=[],rs=function(Mt){return Kt.getStringUnitWidth(Mt,{font:Ic,charSpace:ft,fontSize:Ee,doKerning:!1})*Ee/wn};if(Object.prototype.toString.call(g)==="[object Array]"){var Rn;Pe=Xs(g),Ye!=="left"&&(ti=Pe.map(rs));var jn,qa=0;if(Ye==="right"){C-=ti[0],g=[],Xr=Pe.length;for(var va=0;va<Xr;va++)va===0?(jn=ua(C),Rn=fa(Y)):(jn=q(qa-ti[va]),Rn=-ts),g.push([Pe[va],jn,Rn]),qa=ti[va]}else if(Ye==="center"){C-=ti[0]/2,g=[],Xr=Pe.length;for(var Ha=0;Ha<Xr;Ha++)Ha===0?(jn=ua(C),Rn=fa(Y)):(jn=q((qa-ti[Ha])/2),Rn=-ts),g.push([Pe[Ha],jn,Rn]),qa=ti[Ha]}else if(Ye==="left"){g=[],Xr=Pe.length;for(var Mc=0;Mc<Xr;Mc++)g.push(Pe[Mc])}else if(Ye==="justify"&&Ic.encoding==="Identity-H"){g=[],Xr=Pe.length,mt=mt!==0?mt:jc;for(var el=0,yr=0;yr<Xr;yr++)if(Rn=yr===0?fa(Y):-ts,jn=yr===0?ua(C):el,yr<Xr-1){var Wf=q((mt-ti[yr])/(Pe[yr].split(" ").length-1)),Ui=Pe[yr].split(" ");g.push([Ui[0]+" ",jn,Rn]),el=0;for(var $i=1;$i<Ui.length;$i++){var Dc=(rs(Ui[$i-1]+" "+Ui[$i])-rs(Ui[$i]))*wn+Wf;$i==Ui.length-1?g.push([Ui[$i],Dc,0]):g.push([Ui[$i]+" ",Dc,0]),el-=Dc}}else g.push([Pe[yr],jn,Rn]);g.push(["",el,0])}else{if(Ye!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(g=[],Xr=Pe.length,mt=mt!==0?mt:jc,yr=0;yr<Xr;yr++){Rn=yr===0?fa(Y):-ts,jn=yr===0?ua(C):0;var Fc=Pe[yr].split(" ").length-1,Bc=Fc>0?(mt-ti[yr])/Fc:0;yr<Xr-1?Wa.push(F(q(Bc))):Wa.push(0),g.push([Pe[yr],jn,Rn])}}}(typeof te.R2L=="boolean"?te.R2L:st)===!0&&(g=Qo(g,function(Mt,qt,_r){return[Mt.split("").reverse().join(""),qt,_r]})),xe={text:g,x:C,y:Y,options:te,mutex:{pdfEscape:Zn,activeFontKey:qe,fonts:Ve,activeFontSize:Ee}},It.publish("postProcessText",xe),g=xe.text,Cr=xe.mutex.isHex||!1;var Uc=Ve[qe].encoding;Uc!=="WinAnsiEncoding"&&Uc!=="StandardEncoding"||(g=Qo(g,function(Mt,qt,_r){return[Vf(Mt),qt,_r]})),Pe=Xs(g),g=[];for(var Ga,Ka,Qa,ns=Array.isArray(Pe[0])?1:0,Ya="",is=function(Mt,qt,_r){var Rr="";return _r instanceof at?(_r=typeof te.angle=="number"?sa(_r,new at(1,0,0,1,Mt,qt)):sa(new at(1,0,0,1,Mt,qt),_r),T===k&&(_r=sa(new at(1,0,0,-1,0,0),_r)),Rr=_r.join(" ")+` Tm
`):Rr=F(Mt)+" "+F(qt)+` Td
`,Rr},ri=0;ri<Pe.length;ri++){switch(Ya="",ns){case 1:Qa=(Cr?"<":"(")+Pe[ri][0]+(Cr?">":")"),Ga=parseFloat(Pe[ri][1]),Ka=parseFloat(Pe[ri][2]);break;case 0:Qa=(Cr?"<":"(")+Pe[ri]+(Cr?">":")"),Ga=ua(C),Ka=fa(Y)}Wa!==void 0&&Wa[ri]!==void 0&&(Ya=Wa[ri]+` Tw
`),ri===0?g.push(Ya+is(Ga,Ka,Er)+Qa):ns===0?g.push(Ya+Qa):ns===1&&g.push(Ya+is(Ga,Ka,Er)+Qa)}g=ns===0?g.join(` Tj
T* `):g.join(` Tj
`),g+=` Tj
`;var Vi=`BT
/`;return Vi+=qe+" "+Ee+` Tf
`,Vi+=F(Ee*ei)+` TL
`,Vi+=Wo+`
`,Vi+=Wr,Vi+=g,z(Vi+="ET"),v[qe]=!0,Kt};var Rv=p.__private__.clip=p.clip=function(g){return z(g==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Rv("evenodd")},p.__private__.discardPath=p.discardPath=function(){return z("n"),this};var Bi=p.__private__.isValidStyle=function(g){var C=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(g)!==-1&&(C=!0),C};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(g){return Bi(g)&&(l=g),this};var If=p.__private__.getStyle=p.getStyle=function(g){var C=l;switch(g){case"D":case"S":C="S";break;case"F":C="f";break;case"FD":case"DF":C="B";break;case"f":case"f*":case"B":case"B*":C=g}return C},Mf=p.close=function(){return z("h"),this};p.stroke=function(){return z("S"),this},p.fill=function(g){return $a("f",g),this},p.fillEvenOdd=function(g){return $a("f*",g),this},p.fillStroke=function(g){return $a("B",g),this},p.fillStrokeEvenOdd=function(g){return $a("B*",g),this};var $a=function(g,C){Ut(C)==="object"?Iv(C,g):z(g)},kc=function(g){g===null||T===k&&g===void 0||(g=If(g),z(g))};function jv(g,C,Y,te,ce){var xe=new Nl(C||this.boundingBox,Y||this.xStep,te||this.yStep,this.gState,ce||this.matrix);xe.stream=this.stream;var Pe=g+"$$"+this.cloneIndex+++"$$";return Yn(Pe,xe),xe}var Iv=function(g,C){var Y=ht[g.key],te=We[Y];if(te instanceof vs)z("q"),z(Mv(C)),te.gState&&p.setGState(te.gState),z(g.matrix.toString()+" cm"),z("/"+Y+" sh"),z("Q");else if(te instanceof Nl){var ce=new at(1,0,0,-1,0,Ko());g.matrix&&(ce=ce.multiply(g.matrix||la),Y=jv.call(te,g.key,g.boundingBox,g.xStep,g.yStep,ce).id),z("q"),z("/Pattern cs"),z("/"+Y+" scn"),te.gState&&p.setGState(te.gState),z(C),z("Q")}},Mv=function(g){switch(g){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Pc=p.moveTo=function(g,C){return z(F(q(g))+" "+F(j(C))+" m"),this},Vo=p.lineTo=function(g,C){return z(F(q(g))+" "+F(j(C))+" l"),this},Va=p.curveTo=function(g,C,Y,te,ce,xe){return z([F(q(g)),F(j(C)),F(q(Y)),F(j(te)),F(q(ce)),F(j(xe)),"c"].join(" ")),this};p.__private__.line=p.line=function(g,C,Y,te,ce){if(isNaN(g)||isNaN(C)||isNaN(Y)||isNaN(te)||!Bi(ce))throw new Error("Invalid arguments passed to jsPDF.line");return T===x?this.lines([[Y-g,te-C]],g,C,[1,1],ce||"S"):this.lines([[Y-g,te-C]],g,C,[1,1]).stroke()},p.__private__.lines=p.lines=function(g,C,Y,te,ce,xe){var Pe,ze,Ye,ft,mt,Rt,nr,Er,Kt,Nr,Cr,Wr;if(typeof g=="number"&&(Wr=Y,Y=C,C=g,g=Wr),te=te||[1,1],xe=xe||!1,isNaN(C)||isNaN(Y)||!Array.isArray(g)||!Array.isArray(te)||!Bi(ce)||typeof xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pc(C,Y),Pe=te[0],ze=te[1],ft=g.length,Nr=C,Cr=Y,Ye=0;Ye<ft;Ye++)(mt=g[Ye]).length===2?(Nr=mt[0]*Pe+Nr,Cr=mt[1]*ze+Cr,Vo(Nr,Cr)):(Rt=mt[0]*Pe+Nr,nr=mt[1]*ze+Cr,Er=mt[2]*Pe+Nr,Kt=mt[3]*ze+Cr,Nr=mt[4]*Pe+Nr,Cr=mt[5]*ze+Cr,Va(Rt,nr,Er,Kt,Nr,Cr));return xe&&Mf(),kc(ce),this},p.path=function(g){for(var C=0;C<g.length;C++){var Y=g[C],te=Y.c;switch(Y.op){case"m":Pc(te[0],te[1]);break;case"l":Vo(te[0],te[1]);break;case"c":Va.apply(this,te);break;case"h":Mf()}}return this},p.__private__.rect=p.rect=function(g,C,Y,te,ce){if(isNaN(g)||isNaN(C)||isNaN(Y)||isNaN(te)||!Bi(ce))throw new Error("Invalid arguments passed to jsPDF.rect");return T===x&&(te=-te),z([F(q(g)),F(j(C)),F(q(Y)),F(q(te)),"re"].join(" ")),kc(ce),this},p.__private__.triangle=p.triangle=function(g,C,Y,te,ce,xe,Pe){if(isNaN(g)||isNaN(C)||isNaN(Y)||isNaN(te)||isNaN(ce)||isNaN(xe)||!Bi(Pe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Y-g,te-C],[ce-Y,xe-te],[g-ce,C-xe]],g,C,[1,1],Pe,!0),this},p.__private__.roundedRect=p.roundedRect=function(g,C,Y,te,ce,xe,Pe){if(isNaN(g)||isNaN(C)||isNaN(Y)||isNaN(te)||isNaN(ce)||isNaN(xe)||!Bi(Pe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ze=4/3*(Math.SQRT2-1);return ce=Math.min(ce,.5*Y),xe=Math.min(xe,.5*te),this.lines([[Y-2*ce,0],[ce*ze,0,ce,xe-xe*ze,ce,xe],[0,te-2*xe],[0,xe*ze,-ce*ze,xe,-ce,xe],[2*ce-Y,0],[-ce*ze,0,-ce,-xe*ze,-ce,-xe],[0,2*xe-te],[0,-xe*ze,ce*ze,-xe,ce,-xe]],g+ce,C,[1,1],Pe,!0),this},p.__private__.ellipse=p.ellipse=function(g,C,Y,te,ce){if(isNaN(g)||isNaN(C)||isNaN(Y)||isNaN(te)||!Bi(ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xe=4/3*(Math.SQRT2-1)*Y,Pe=4/3*(Math.SQRT2-1)*te;return Pc(g+Y,C),Va(g+Y,C-Pe,g+xe,C-te,g,C-te),Va(g-xe,C-te,g-Y,C-Pe,g-Y,C),Va(g-Y,C+Pe,g-xe,C+te,g,C+te),Va(g+xe,C+te,g+Y,C+Pe,g+Y,C),kc(ce),this},p.__private__.circle=p.circle=function(g,C,Y,te){if(isNaN(g)||isNaN(C)||isNaN(Y)||!Bi(te))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(g,C,Y,Y,te)},p.setFont=function(g,C,Y){return Y&&(C=$(C,Y)),qe=Nf(g,C,{disableWarning:!1}),this};var Dv=p.__private__.getFont=p.getFont=function(){return Ve[Nf.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var g,C,Y={};for(g in ot)if(ot.hasOwnProperty(g))for(C in Y[g]=[],ot[g])ot[g].hasOwnProperty(C)&&Y[g].push(C);return Y},p.addFont=function(g,C,Y,te,ce){var xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xe.indexOf(arguments[3])!==-1?ce=arguments[3]:arguments[3]&&xe.indexOf(arguments[3])==-1&&(Y=$(Y,te)),Cf.call(this,g,C,Y,ce=ce||"Identity-H")};var zo,Tc=r.lineWidth||.200025,vt=p.__private__.getLineWidth=p.getLineWidth=function(){return Tc},Fv=p.__private__.setLineWidth=p.setLineWidth=function(g){return Tc=g,z(F(q(g))+" w"),this};p.__private__.setLineDash=Ze.API.setLineDash=Ze.API.setLineDashPattern=function(g,C){if(g=g||[],C=C||0,isNaN(C)||!Array.isArray(g))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return g=g.map(function(Y){return F(q(Y))}).join(" "),C=F(q(C)),z("["+g+"] "+C+" d"),this};var Bv=p.__private__.getLineHeight=p.getLineHeight=function(){return Ee*zo};p.__private__.getLineHeight=p.getLineHeight=function(){return Ee*zo};var Uv=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(g){return typeof(g=g||1.15)=="number"&&(zo=g),this},$v=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return zo};Uv(r.lineHeight);var ua=p.__private__.getHorizontalCoordinate=function(g){return q(g)},fa=p.__private__.getVerticalCoordinate=function(g){return T===k?g:pt[W].mediaBox.topRightY-pt[W].mediaBox.bottomLeftY-q(g)},Vv=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(g){return F(ua(g))},zv=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(g){return F(fa(g))},Ks=r.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Di(Ks)},p.__private__.setStrokeColor=p.setDrawColor=function(g,C,Y,te){return Ks=vi({ch1:g,ch2:C,ch3:Y,ch4:te,pdfColorType:"draw",precision:2}),z(Ks),this};var Ec=r.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Di(Ec)},p.__private__.setFillColor=p.setFillColor=function(g,C,Y,te){return Ec=vi({ch1:g,ch2:C,ch3:Y,ch4:te,pdfColorType:"fill",precision:2}),z(Ec),this};var Wo=r.textColor||"0 g",Qs=p.__private__.getTextColor=p.getTextColor=function(){return Di(Wo)};p.__private__.setTextColor=p.setTextColor=function(g,C,Y,te){return Wo=vi({ch1:g,ch2:C,ch3:Y,ch4:te,pdfColorType:"text",precision:3}),this};var Ys=r.charSpace,Wv=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ys||0)};p.__private__.setCharSpace=p.setCharSpace=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ys=g,this};var Cc=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(g){var C=p.CapJoinStyles[g];if(C===void 0)throw new Error("Line cap style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cc=C,z(C+" J"),this};var Lc=0;p.__private__.setLineJoin=p.setLineJoin=function(g){var C=p.CapJoinStyles[g];if(C===void 0)throw new Error("Line join style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Lc=C,z(C+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(g){if(g=g||0,isNaN(g))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return z(F(q(g))+" M"),this},p.GState=gp,p.setGState=function(g){(g=typeof g=="string"?je[vr[g]]:qo(null,g)).equals(mr)||(z("/"+g.id+" gs"),mr=g)};var qo=function(g,C){if(!g||!vr[g]){var Y=!1;for(var te in je)if(je.hasOwnProperty(te)&&je[te].equals(C)){Y=!0;break}if(Y)C=je[te];else{var ce="GS"+(Object.keys(je).length+1).toString(10);je[ce]=C,C.id=ce}return g&&(vr[g]=C.id),It.publish("addGState",C),C}};p.addGState=function(g,C){return qo(g,C),this},p.saveGraphicsState=function(){return z("q"),Nt.push({key:qe,size:Ee,color:Wo}),this},p.restoreGraphicsState=function(){z("Q");var g=Nt.pop();return qe=g.key,Ee=g.size,Wo=g.color,mr=null,this},p.setCurrentTransformationMatrix=function(g){return z(g.toString()+" cm"),this},p.comment=function(g){return z("#"+g),this};var Ho=function(g,C){var Y=g||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Y},set:function(xe){isNaN(xe)||(Y=parseFloat(xe))}});var te=C||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return te},set:function(xe){isNaN(xe)||(te=parseFloat(xe))}});var ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ce},set:function(xe){ce=xe.toString()}}),this},Oc=function(g,C,Y,te){Ho.call(this,g,C),this.type="rect";var ce=Y||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ce},set:function(Pe){isNaN(Pe)||(ce=parseFloat(Pe))}});var xe=te||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xe},set:function(Pe){isNaN(Pe)||(xe=parseFloat(Pe))}}),this},Js=function(){this.page=Wt,this.currentPage=W,this.pages=Te.slice(0),this.pagesContext=pt.slice(0),this.x=Je,this.y=At,this.matrix=St,this.width=Df(W),this.height=da(W),this.outputDestination=Oe,this.id="",this.objectNumber=-1};Js.prototype.restore=function(){Wt=this.page,W=this.currentPage,pt=this.pagesContext,Te=this.pages,Je=this.x,At=this.y,St=this.matrix,Ff(W,this.width),ha(W,this.height),Oe=this.outputDestination};var Ac=function(g,C,Y,te,ce){Mi.push(new Js),Wt=W=0,Te=[],Je=g,At=C,St=ce,bc([Y,te])};for(var Go in p.beginFormObject=function(g,C,Y,te,ce){return Ac(g,C,Y,te,ce),this},p.endFormObject=function(g){return function(C){if(oa[C])Mi.pop().restore();else{var Y=new Js,te="Xo"+(Object.keys(Jr).length+1).toString(10);Y.id=te,oa[C]=te,Jr[te]=Y,It.publish("addFormObject",Y),Mi.pop().restore()}}(g),this},p.doFormObject=function(g,C){var Y=Jr[oa[g]];return z("q"),z(C.toString()+" cm"),z("/"+Y.id+" Do"),z("Q"),this},p.getFormObject=function(g){var C=Jr[oa[g]];return{x:C.x,y:C.y,width:C.width,height:C.height,matrix:C.matrix}},p.save=function(g,C){return g=g||"generated.pdf",(C=C||{}).returnPromise=C.returnPromise||!1,C.returnPromise===!1?(ds(Uo(ca()),g),typeof ds.unload=="function"&&ct.setTimeout&&setTimeout(ds.unload,911),this):new Promise(function(Y,te){try{var ce=ds(Uo(ca()),g);typeof ds.unload=="function"&&ct.setTimeout&&setTimeout(ds.unload,911),Y(ce)}catch(xe){te(xe.message)}})},Ze.API)Ze.API.hasOwnProperty(Go)&&(Go==="events"&&Ze.API.events.length?function(g,C){var Y,te,ce;for(ce=C.length-1;ce!==-1;ce--)Y=C[ce][0],te=C[ce][1],g.subscribe.apply(g,[Y].concat(typeof te=="function"?[te]:te))}(It,Ze.API.events):p[Go]=Ze.API[Go]);function Df(g){return pt[g].mediaBox.topRightX-pt[g].mediaBox.bottomLeftX}function Ff(g,C){pt[g].mediaBox.topRightX=C+pt[g].mediaBox.bottomLeftX}function da(g){return pt[g].mediaBox.topRightY-pt[g].mediaBox.bottomLeftY}function ha(g,C){pt[g].mediaBox.topRightY=C+pt[g].mediaBox.bottomLeftY}var Bf=p.getPageWidth=function(g){return Df(g=g||W)/it},Uf=p.setPageWidth=function(g,C){Ff(g,C*it)},Ko=p.getPageHeight=function(g){return da(g=g||W)/it},$f=p.setPageHeight=function(g,C){ha(g,C*it)};return p.internal={pdfEscape:Zn,getStyle:If,getFont:Dv,getFontSize:Ne,getCharSpace:Wv,getTextColor:Qs,getLineHeight:Bv,getLineHeightFactor:$v,getLineWidth:vt,write:nt,getHorizontalCoordinate:ua,getVerticalCoordinate:fa,getCoordinateString:Vv,getVerticalCoordinateString:zv,collections:{},newObject:lr,newAdditionalObject:Do,newObjectDeferred:Br,newObjectDeferredBegin:zr,getFilters:mi,putStream:Xn,events:It,scaleFactor:it,pageSize:{getWidth:function(){return Bf(W)},setWidth:function(g){Uf(W,g)},getHeight:function(){return Ko(W)},setHeight:function(g){$f(W,g)}},encryptionOptions:u,encryption:gr,getEncryptor:function(g){return u!==null?gr.encryptor(g,0):function(C){return C}},output:gi,getNumberOfPages:Af,pages:Te,out:z,f2:O,f3:N,getPageInfo:Sc,getPageInfoByObjId:Av,getCurrentPageInfo:Nv,getPDFVersion:_,Point:Ho,Rectangle:Oc,Matrix:at,hasHotfix:$o},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Bf(W)},set:function(g){Uf(W,g)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ko(W)},set:function(g){$f(W,g)},enumerable:!0,configurable:!0}),(function(g){for(var C=0,Y=$e.length;C<Y;C++){var te=Cf.call(this,g[C][0],g[C][1],g[C][2],$e[C][3],!0);d===!1&&(v[te]=!0);var ce=g[C][0].split("-");Ef({id:te,fontName:ce[0],fontStyle:ce[1]||""})}It.publish("addFonts",{fonts:Ve,dictionary:ot})}).call(p,$e),qe="F1",Lf(i,e),It.publish("initialized"),p}gl.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},gl.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gl.prototype.hexToBytes=function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return t.join("")},gl.prototype.processOwnerPassword=function(r,t){return Ey(Ty(t).substr(0,5),r)},gl.prototype.encryptor=function(r,t){var e=Ty(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Ey(e,n)}},gp.prototype.equals=function(r){var t,e="id,objectNumber,equals";if(!r||Ut(r)!==Ut(this))return!1;var n=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;n++}for(t in r)r.hasOwnProperty(t)&&e.indexOf(t)<0&&n--;return n===0},Ze.API={events:[]},Ze.version="3.0.3";var dr=Ze.API,T_=1,zs=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ul=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},gt=function(r){return r.toFixed(2)},so=function(r){return r.toFixed(5)};dr.__acroform__={};var Nn=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},Bx=function(r){return r*T_},Hi=function(r){var t=new KC,e=Ue.internal.getHeight(r)||0,n=Ue.internal.getWidth(r)||0;return t.BBox=[0,0,Number(gt(n)),Number(gt(e))],t},uee=dr.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<t},fee=dr.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<t)},dee=dr.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<t?1:0},Sr=dr.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return dee(r,t-1)},kr=dr.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uee(r,t-1)},Pr=dr.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fee(r,t-1)},hee=dr.__acroform__.calculateCoordinates=function(r,t){var e=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=r[0],a=r[1],o=r[2],s=r[3],c={};return c.lowerLeft_X=e(i)||0,c.lowerLeft_Y=n(a+s)||0,c.upperRight_X=e(i+o)||0,c.upperRight_Y=n(a)||0,[Number(gt(c.lowerLeft_X)),Number(gt(c.lowerLeft_Y)),Number(gt(c.upperRight_X)),Number(gt(c.upperRight_Y))]},pee=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],e=r._V||r.DV,n=Cy(r,e),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+i+" "+gt(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=Hi(r);return a.scope=r.scope,a.stream=t.join(`
`),a}},Cy=function(r,t){var e=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=r.multiline?i.map(function(O){return O.split(`
`)}):i.map(function(O){return[O]});var a=e,o=Ue.internal.getHeight(r)||0;o=o<0?-o:o;var s=Ue.internal.getWidth(r)||0;s=s<0?-s:s;var c=function(O,N,q){if(O+1<i.length){var j=N+" "+i[O+1][0];return th(j,r,q).width<=s-4}return!1};a++;e:for(;a>0;){t="",a--;var l,u,d=th("3",r,a).height,v=r.multiline?o-a:(o-d)/2,p=v+=2,y=0,_=0,S=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+th(t,r,a=12).width+", FieldWidth:"+s+`
`;break}for(var w="",x=0,k=0;k<i.length;k++)if(i.hasOwnProperty(k)){var T=!1;if(i[k].length!==1&&S!==i[k].length-1){if((d+2)*(x+2)+2>o)continue e;w+=i[k][S],T=!0,_=k,k--}else{w=(w+=i[k][S]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var R=parseInt(k),U=c(R,w,a),$=k>=i.length-1;if(U&&!$){w+=" ",S=0;continue}if(U||$){if($)_=R;else if(r.multiline&&(d+2)*(x+2)+2>o)continue e}else{if(!r.multiline||(d+2)*(x+2)+2>o)continue e;_=R}}for(var F="",M=y;M<=_;M++){var J=i[M];if(r.multiline){if(M===_){F+=J[S]+" ",S=(S+1)%J.length;continue}if(M===y){F+=J[J.length-1]+" ";continue}}F+=J[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,u=th(F,r,a).width,r.textAlign){case"right":l=s-u-2;break;case"center":l=(s-u)/2;break;default:l=2}t+=gt(l)+" "+gt(p)+` Td
`,t+="("+zs(F)+`) Tj
`,t+=-gt(l)+` 0 Td
`,p=-(a+2),u=0,y=T?_:_+1,x++,w=""}break}return n.text=t,n.fontSize=a,n},th=function(r,t,e){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},vee={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},mee=function(r,t){var e={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===e.type&&n.object===e.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(e)},gee=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(ji.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(vee)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");T_=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new QC,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&mee(a,e)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(e){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var s=n[o],c=[],l=s.Rect;if(s.Rect&&(s.Rect=hee(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Ue.createDefaultAppearanceStream(s),Ut(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(c=s.getKeyValueListForStream()),s.Rect=l,s.hasAppearanceStream&&!s.appearanceStreamContent){var u=pee(s);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(s.appearanceStreamContent){var d="";for(var v in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(v)){var p=s.appearanceStreamContent[v];if(d+="/"+v+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:s.objId}),i.internal.out("endobj")}a&&function(_,S){for(var w in _)if(_.hasOwnProperty(w)){var x=w,k=_[w];S.internal.newObjectDeferredBegin(k.objId,!0),Ut(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete _[x]}}(i.internal.acroformPlugin.xForms,i)})(e,r)}),r.internal.acroformPlugin.isInitialized=!0}},GC=dr.__acroform__.arrayToPdfArray=function(r,t,e){var n=function(o){return o};if(Array.isArray(r)){for(var i="[",a=0;a<r.length;a++)switch(a!==0&&(i+=" "),Ut(r[a])){case"boolean":case"number":case"object":i+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(t!==void 0&&e&&(n=e.internal.getEncryptor(t)),i+="("+zs(n(r[a].toString()))+")"):i+=r[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ug=function(r,t,e){var n=function(i){return i};return t!==void 0&&e&&(n=e.internal.getEncryptor(t)),(r=r||"").toString(),"("+zs(n(r))+")"},Xi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xi.prototype.toString=function(){return this.objId+" 0 R"},Xi.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Xi.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var n=t[e],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:GC(i,this.objId,this.scope)}):i instanceof Xi?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var KC=function(){Xi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};Nn(KC,Xi);var QC=function(){Xi.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+zs(e(r))+")"}},set:function(e){r=e}})};Nn(QC,Xi);var ji=function r(){Xi.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');t=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Sr(t,3)},set:function(w){w?this.F=kr(t,3):this.F=Pr(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');e=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof yp)return;a="FieldObject"+r.FieldNum++}var w=function(x){return x};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+zs(w(a))+")"},set:function(w){a=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(w){a=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(w){s=w}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return l===void 0?50/T_:l},set:function(w){l=w}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof yp||this instanceof ks))return Ug(d,this.objId,this.scope)},set:function(w){w=w.toString(),d=w}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof $r==0?Ug(v,this.objId,this.scope):v},set:function(w){w=w.toString(),v=this instanceof $r==0?w.substr(0,1)==="("?ul(w.substr(1,w.length-2)):ul(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $r==1?ul(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof $r==1?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof $r==0?Ug(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof $r==0?w.substr(0,1)==="("?ul(w.substr(1,w.length-2)):ul(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $r==1?ul(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof $r==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(w){w=!!w,_=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(w){y=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,1)},set:function(w){w?this.Ff=kr(this.Ff,1):this.Ff=Pr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,2)},set:function(w){w?this.Ff=kr(this.Ff,2):this.Ff=Pr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,3)},set:function(w){w?this.Ff=kr(this.Ff,3):this.Ff=Pr(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');S=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(S){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};Nn(ji,Xi);var $l=function(){ji.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return GC(t,this.objId,this.scope)},set:function(e){var n,i;i=[],typeof(n=e)=="string"&&(i=function(a,o,s){s||(s=1);for(var c,l=[];c=o.exec(a);)l.push(c[s]);return l}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,18)},set:function(e){e?this.Ff=kr(this.Ff,18):this.Ff=Pr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=kr(this.Ff,19):this.Ff=Pr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,20)},set:function(e){e?(this.Ff=kr(this.Ff,20),t.sort()):this.Ff=Pr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,22)},set:function(e){e?this.Ff=kr(this.Ff,22):this.Ff=Pr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,23)},set:function(e){e?this.Ff=kr(this.Ff,23):this.Ff=Pr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,27)},set:function(e){e?this.Ff=kr(this.Ff,27):this.Ff=Pr(this.Ff,27)}}),this.hasAppearanceStream=!1};Nn($l,ji);var Vl=function(){$l.call(this),this.fontName="helvetica",this.combo=!1};Nn(Vl,$l);var zl=function(){Vl.call(this),this.combo=!0};Nn(zl,Vl);var Oh=function(){zl.call(this),this.edit=!0};Nn(Oh,zl);var $r=function(){ji.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,15)},set:function(e){e?this.Ff=kr(this.Ff,15):this.Ff=Pr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,16)},set:function(e){e?this.Ff=kr(this.Ff,16):this.Ff=Pr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,17)},set:function(e){e?this.Ff=kr(this.Ff,17):this.Ff=Pr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,26)},set:function(e){e?this.Ff=kr(this.Ff,26):this.Ff=Pr(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(a){return a};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+zs(e(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){Ut(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}})};Nn($r,ji);var Ah=function(){$r.call(this),this.pushButton=!0};Nn(Ah,$r);var Wl=function(){$r.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};Nn(Wl,$r);var yp=function(){var r,t;ji.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+zs(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ut(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ue.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Nn(yp,ji),Wl.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},Wl.prototype.createOption=function(r){var t=new yp;return t.Parent=this,t.optionName=r,this.Kids.push(t),yee.call(this.scope,t),t};var Nh=function(){$r.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ue.CheckBox.createAppearanceStream()};Nn(Nh,$r);var ks=function(){ji.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,13)},set:function(t){t?this.Ff=kr(this.Ff,13):this.Ff=Pr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,21)},set:function(t){t?this.Ff=kr(this.Ff,21):this.Ff=Pr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,23)},set:function(t){t?this.Ff=kr(this.Ff,23):this.Ff=Pr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,24)},set:function(t){t?this.Ff=kr(this.Ff,24):this.Ff=Pr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,25)},set:function(t){t?this.Ff=kr(this.Ff,25):this.Ff=Pr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,26)},set:function(t){t?this.Ff=kr(this.Ff,26):this.Ff=Pr(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Nn(ks,ji);var Rh=function(){ks.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,14)},set:function(r){r?this.Ff=kr(this.Ff,14):this.Ff=Pr(this.Ff,14)}}),this.password=!0};Nn(Rh,ks);var Ue={CheckBox:{createAppearanceStream:function(){return{N:{On:Ue.CheckBox.YesNormal},D:{On:Ue.CheckBox.YesPushDown,Off:Ue.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),a=Cy(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+gt(Ue.internal.getWidth(r))+" "+gt(Ue.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+gt(a.fontSize)+" Tf "+i),e.push("BT"),e.push(a.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(r){var t=Hi(r);t.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],a=Ue.internal.getHeight(r),o=Ue.internal.getWidth(r),s=Cy(r,r.caption);return i.push("1 g"),i.push("0 0 "+gt(o)+" "+gt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+gt(o-1)+" "+gt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+gt(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+gt(Ue.internal.getWidth(r))+" "+gt(Ue.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:Ue.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=Ue.RadioButton.Circle.YesNormal,t.D[r]=Ue.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=Ue.internal.getWidth(r)<=Ue.internal.getHeight(r)?Ue.internal.getWidth(r)/4:Ue.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Ue.internal.Bezier_C,a=Number((n*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+so(Ue.internal.getWidth(r)/2)+" "+so(Ue.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),e.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),e.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),e.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=Ue.internal.getWidth(r)<=Ue.internal.getHeight(r)?Ue.internal.getWidth(r)/4:Ue.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Ue.internal.Bezier_C).toFixed(5)),o=Number((n*Ue.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+so(Ue.internal.getWidth(r)/2)+" "+so(Ue.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+so(Ue.internal.getWidth(r)/2)+" "+so(Ue.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),e.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),e.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),e.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=Ue.internal.getWidth(r)<=Ue.internal.getHeight(r)?Ue.internal.getWidth(r)/4:Ue.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Ue.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+so(Ue.internal.getWidth(r)/2)+" "+so(Ue.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:Ue.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=Ue.RadioButton.Cross.YesNormal,t.D[r]=Ue.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=Ue.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+gt(Ue.internal.getWidth(r)-2)+" "+gt(Ue.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(gt(n.x1.x)+" "+gt(n.x1.y)+" m"),e.push(gt(n.x2.x)+" "+gt(n.x2.y)+" l"),e.push(gt(n.x4.x)+" "+gt(n.x4.y)+" m"),e.push(gt(n.x3.x)+" "+gt(n.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=Ue.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+gt(Ue.internal.getWidth(r))+" "+gt(Ue.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+gt(Ue.internal.getWidth(r)-2)+" "+gt(Ue.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(gt(e.x1.x)+" "+gt(e.x1.y)+" m"),n.push(gt(e.x2.x)+" "+gt(e.x2.y)+" l"),n.push(gt(e.x4.x)+" "+gt(e.x4.y)+" m"),n.push(gt(e.x3.x)+" "+gt(e.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+gt(Ue.internal.getWidth(r))+" "+gt(Ue.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+e}};Ue.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=Ue.internal.getWidth(r),e=Ue.internal.getHeight(r),n=Math.min(t,e);return{x1:{x:(t-n)/2,y:(e-n)/2+n},x2:{x:(t-n)/2+n,y:(e-n)/2},x3:{x:(t-n)/2,y:(e-n)/2},x4:{x:(t-n)/2+n,y:(e-n)/2+n}}}},Ue.internal.getWidth=function(r){var t=0;return Ut(r)==="object"&&(t=Bx(r.Rect[2])),t},Ue.internal.getHeight=function(r){var t=0;return Ut(r)==="object"&&(t=Bx(r.Rect[3])),t};var yee=dr.addField=function(r){if(gee(this,r),!(r instanceof ji))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};dr.AcroFormChoiceField=$l,dr.AcroFormListBox=Vl,dr.AcroFormComboBox=zl,dr.AcroFormEditBox=Oh,dr.AcroFormButton=$r,dr.AcroFormPushButton=Ah,dr.AcroFormRadioButton=Wl,dr.AcroFormCheckBox=Nh,dr.AcroFormTextField=ks,dr.AcroFormPasswordField=Rh,dr.AcroFormAppearance=Ue,dr.AcroForm={ChoiceField:$l,ListBox:Vl,ComboBox:zl,EditBox:Oh,Button:$r,PushButton:Ah,RadioButton:Wl,CheckBox:Nh,TextField:ks,PasswordField:Rh,Appearance:Ue},Ze.AcroForm={ChoiceField:$l,ListBox:Vl,ComboBox:zl,EditBox:Oh,Button:$r,PushButton:Ah,RadioButton:Wl,CheckBox:Nh,TextField:ks,PasswordField:Rh,Appearance:Ue};Ze.AcroForm;function YC(r){return r.reduce(function(t,e,n){return t[e]=n,t},{})}(function(r){var t="addImage_";r.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(O,N){var q,j,Z,X,se,H=e;if((N=N||e)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(U(O))for(se in n)for(Z=n[se],q=0;q<Z.length;q+=1){for(X=!0,j=0;j<Z[q].length;j+=1)if(Z[q][j]!==void 0&&Z[q][j]!==O[j]){X=!1;break}if(X===!0){H=se;break}}else for(se in n)for(Z=n[se],q=0;q<Z.length;q+=1){for(X=!0,j=0;j<Z[q].length;j+=1)if(Z[q][j]!==void 0&&Z[q][j]!==O.charCodeAt(j)){X=!1;break}if(X===!0){H=se;break}}return H===e&&N!==e&&(H=N),H},a=function O(N){for(var q=this.internal.write,j=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:N.width}),X.push({key:"Height",value:N.height}),N.colorSpace===w.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===w.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)&&N.transparency.length>0){for(var se="",H=0,ie=N.transparency.length;H<ie;H++)se+=N.transparency[H]+" "+N.transparency[H]+" ";X.push({key:"Mask",value:"["+se+"]"})}N.sMask!==void 0&&X.push({key:"SMask",value:N.objectId+1+" 0 R"});var fe=N.filter!==void 0?["/"+N.filter]:void 0;if(j({data:N.data,additionalKeyValues:X,alreadyAppliedFilters:fe,objectId:N.objectId}),q("endobj"),"sMask"in N&&N.sMask!==void 0){var ne,E=(ne=N.sMaskBitsPerComponent)!==null&&ne!==void 0?ne:N.bitsPerComponent,W={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:E,data:N.sMask};"filter"in N&&(W.decodeParameters="/Predictor ".concat(N.predictor," /Colors 1 /BitsPerComponent ").concat(E," /Columns ").concat(N.width),W.filter=N.filter),O.call(this,W)}if(N.colorSpace===w.INDEXED){var G=this.internal.newObject();j({data:F(new Uint8Array(N.palette)),objectId:G}),q("endobj")}},o=function(){var O=this.internal.collections[t+"images"];for(var N in O)a.call(this,O[N])},s=function(){var O,N=this.internal.collections[t+"images"],q=this.internal.write;for(var j in N)q("/I"+(O=N[j]).index,O.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var O=this.internal.collections[t+"images"];return c.call(this),O},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},d=function(O){return typeof r["process"+O.toUpperCase()]=="function"},v=function(O){return Ut(O)==="object"&&O.nodeType===1},p=function(O,N){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var q=""+O.getAttribute("src");if(q.indexOf("data:image/")===0)return Lh(unescape(q).split("base64,").pop());var j=r.loadFile(q,!0);if(j!==void 0)return j}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var Z;switch(N){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return Lh(O.toDataURL(Z,1).split("base64,").pop())}},y=function(O){var N=this.internal.collections[t+"images"];if(N){for(var q in N)if(O===N[q].alias)return N[q]}},_=function(O,N,q){return O||N||(O=-96,N=-96),O<0&&(O=-1*q.width*72/O/this.internal.scaleFactor),N<0&&(N=-1*q.height*72/N/this.internal.scaleFactor),O===0&&(O=N*q.width/q.height),N===0&&(N=O*q.height/q.width),[O,N]},S=function(O,N,q,j,Z,X){var se=_.call(this,q,j,Z),H=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,fe=l.call(this);if(q=se[0],j=se[1],fe[Z.index]=Z,X){X*=Math.PI/180;var ne=Math.cos(X),E=Math.sin(X),W=function(ee){return ee.toFixed(4)},G=[W(ne),W(E),W(-1*E),W(ne),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,H(O),ie(N+j),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([H(q),"0","0",H(j),"0","0","cm"].join(" "))):this.internal.write([H(q),"0","0",H(j),H(O),ie(N+j),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},w=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=r.__addimage__.sHashCode=function(O){var N,q,j=0;if(typeof O=="string")for(q=O.length,N=0;N<q;N++)j=(j<<5)-j+O.charCodeAt(N),j|=0;else if(U(O))for(q=O.byteLength/2,N=0;N<q;N++)j=(j<<5)-j+O[N],j|=0;return j},T=r.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var N=!0;return O.length===0&&(N=!1),O.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(N=!1),N},R=r.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var N=O.indexOf(",");return N<0?null:O.substring(0,N).trim().endsWith("base64")?O.substring(N+1):null};r.__addimage__.isArrayBuffer=function(O){return O instanceof ArrayBuffer};var U=r.__addimage__.isArrayBufferView=function(O){return O instanceof Int8Array||O instanceof Uint8Array||O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array},$=r.__addimage__.binaryStringToUint8Array=function(O){for(var N=O.length,q=new Uint8Array(N),j=0;j<N;j++)q[j]=O.charCodeAt(j);return q},F=r.__addimage__.arrayBufferToBinaryString=function(O){for(var N="",q=U(O)?O:new Uint8Array(O),j=0;j<q.length;j+=8192)N+=String.fromCharCode.apply(null,q.subarray(j,j+8192));return N};r.addImage=function(){var O,N,q,j,Z,X,se,H,ie;if(typeof arguments[1]=="number"?(N=e,q=arguments[1],j=arguments[2],Z=arguments[3],X=arguments[4],se=arguments[5],H=arguments[6],ie=arguments[7]):(N=arguments[1],q=arguments[2],j=arguments[3],Z=arguments[4],X=arguments[5],se=arguments[6],H=arguments[7],ie=arguments[8]),Ut(O=arguments[0])==="object"&&!v(O)&&"imageData"in O){var fe=O;O=fe.imageData,N=fe.format||N||e,q=fe.x||q||0,j=fe.y||j||0,Z=fe.w||fe.width||Z,X=fe.h||fe.height||X,se=fe.alias||se,H=fe.compression||H,ie=fe.rotation||fe.angle||ie}var ne=this.internal.getFilters();if(H===void 0&&ne.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(q)||isNaN(j))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var E=M.call(this,O,N,se,H);return S.call(this,q,j,Z,X,E,ie),this};var M=function(O,N,q,j){var Z,X,se;if(typeof O=="string"&&i(O)===e){O=unescape(O);var H=J(O,!1);(H!==""||(H=r.loadFile(O,!0))!==void 0)&&(O=H)}if(v(O)&&(O=p(O,N)),N=i(O,N),!d(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((se=q)==null||se.length===0)&&(q=function(ie){return typeof ie=="string"||U(ie)?k(ie):U(ie.data)?k(ie.data):null}(O)),(Z=y.call(this,q))||(O instanceof Uint8Array||N==="RGBA"||(X=O,O=$(O)),Z=this["process"+N.toUpperCase()](O,u.call(this),q,function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in r.image_compression?ie:x.NONE}(j),X)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},J=r.__addimage__.convertBase64ToBinaryString=function(O,N){N=typeof N!="boolean"||N;var q,j="";if(typeof O=="string"){var Z;q=(Z=R(O))!==null&&Z!==void 0?Z:O;try{j=Lh(q)}catch(X){if(N)throw T(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return j};r.getImageProperties=function(O){var N,q,j="";if(v(O)&&(O=p(O)),typeof O=="string"&&i(O)===e&&((j=J(O,!1))===""&&(j=r.loadFile(O)||""),O=j),q=i(O),!d(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(O instanceof Uint8Array||(O=$(O)),!(N=this["process"+q.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=q,N}})(Ze.API),function(r){var t=function(e){if(e!==void 0&&e!="")return!0};Ze.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var n,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,u=!1,d=0;d<l.length&&!u;d++)switch((n=l[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var v=0;v<l.length;v++){n=l[v];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(_.objId),x=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+p(w(n.contents))+")",a+=" /Popup "+S.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+p(w(x))+") >>",_.content=a;var k=_.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+k,n.open&&(a+=" /Open true"),a+=" >>",S.content=a,this.internal.write(_.objId,"0 R",S.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var T=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(y(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var R=this.annotations._nameMap[n.options.name];n.options.pageNumber=R.page,n.options.top=R.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var U=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+U+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},r.link=function(e,n,i,a,o){var s=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:c(e),y:l(n),w:c(e+i),h:l(n+a)},options:o,type:"link"})},r.textWithLink=function(e,n,i,a){var o,s,c=this.getTextWidth(e),l=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var u=this.splitTextToSize(e,s).length;o=Math.ceil(l*u)}else s=c,o=l;return this.text(e,n,i,a),i+=.2*l,a.align==="center"&&(n-=c/2),a.align==="right"&&(n-=c),this.link(n,i-l,s,o,a),c},r.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}}(Ze.API),function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(_){return t[_.charCodeAt(0)]!==void 0},o=r.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},s=r.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length<=2},c=r.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&i.indexOf(_.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length>=1};var l=r.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length>=3};var u=r.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length==4},d=r.__arabicParser__.resolveLigatures=function(_){var S=0,w=e,x="",k=0;for(S=0;S<_.length;S+=1)w[_.charCodeAt(S)]!==void 0?(k++,typeof(w=w[_.charCodeAt(S)])=="number"&&(x+=String.fromCharCode(w),w=e,k=0),S===_.length-1&&(w=e,x+=_.charAt(S-(k-1)),S-=k-1,k=0)):(w=e,x+=_.charAt(S-k),S-=k,k=0);return x};r.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&n[_.charCodeAt(0)]!==void 0};var v=r.__arabicParser__.getCorrectForm=function(_,S,w){return o(_)?a(_)===!1?-1:!l(_)||!o(S)&&!o(w)||!o(w)&&s(S)||s(_)&&!o(S)||s(_)&&c(S)||s(_)&&s(S)?0:u(_)&&o(S)&&!s(S)&&o(w)&&l(w)?3:s(_)||!o(w)?1:2:-1},p=function(_){var S=0,w=0,x=0,k="",T="",R="",U=(_=_||"").split("\\s+"),$=[];for(S=0;S<U.length;S+=1){for($.push(""),w=0;w<U[S].length;w+=1)k=U[S][w],T=U[S][w-1],R=U[S][w+1],o(k)?(x=v(k,T,R),$[S]+=x!==-1?String.fromCharCode(t[k.charCodeAt(0)][x]):k):$[S]+=k;$[S]=d($[S])}return $.join(" ")},y=r.__arabicParser__.processArabic=r.processArabic=function(){var _,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(S)){var x=0;for(w=[],x=0;x<S.length;x+=1)Array.isArray(S[x])?w.push([p(S[x][0]),S[x][1],S[x][2]]):w.push([p(S[x])]);_=w}else _=p(S);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};r.events.push(["preProcessText",y])}(Ze.API),Ze.API.autoPrint=function(r){var t;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(r){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(s){e=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,n){var i;if((e=e||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ze.API),function(r){var t={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var l=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(_){u=_}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(_){v=_}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(_){y=_}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},r.getTextDimensions=function(c,l){n.call(this);var u=(l=l||{}).fontSize||this.getFontSize(),d=l.font||this.getFont(),v=l.scaleFactor||this.internal.scaleFactor,p=0,y=0,_=0,S=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var w=l.maxWidth;w>0?typeof c=="string"?c=this.splitTextToSize(c,w):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(k,T){return k.concat(S.splitTextToSize(T,w))},[])):c=Array.isArray(c)?c:[c];for(var x=0;x<c.length;x++)p<(_=this.getStringUnitWidth(c[x],{font:d})*u)&&(p=_);return p!==0&&(y=c.length),{w:p/=v,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/v,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=r.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var l=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return l.lineNumber!==void 0&&(l.lineNumber===c.lineNumber?(c.x=(l.x||0)+(l.width||0),c.y=l.y||0):l.y+l.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,p&&v&&(this.printHeaderRow(c.lineNumber,!0),c.y+=v[0].height)):c.y=l.y+l.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,e===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};r.table=function(c,l,u,d,v){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,y,_,S,w=[],x=[],k=[],T={},R={},U=[],$=[],F=(v=v||{}).autoSize||!1,M=v.printHeaders!==!1,J=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,O=v.margins||Object.assign({width:this.getPageWidth()},t),N=typeof v.padding=="number"?v.padding:3,q=v.headerBackgroundColor||"#c8c8c8",j=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=j,this.setFontSize(J),d==null)x=w=Object.keys(u[0]),k=w.map(function(){return"left"});else if(Array.isArray(d)&&Ut(d[0])==="object")for(w=d.map(function(fe){return fe.name}),x=d.map(function(fe){return fe.prompt||fe.name||""}),k=d.map(function(fe){return fe.align||"left"}),p=0;p<d.length;p+=1)R[d[p].name]=.7499990551181103*d[p].width;else Array.isArray(d)&&typeof d[0]=="string"&&(x=w=d,k=w.map(function(){return"left"}));if(F||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<w.length;p+=1){for(T[S=w[p]]=u.map(function(fe){return fe[S]}),this.setFont(void 0,"bold"),U.push(this.getTextDimensions(x[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=T[S],this.setFont(void 0,"normal"),_=0;_<y.length;_+=1)U.push(this.getTextDimensions(y[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[S]=Math.max.apply(null,U)+N+N,U=[]}if(M){var Z={};for(p=0;p<w.length;p+=1)Z[w[p]]={},Z[w[p]].text=x[p],Z[w[p]].align=k[p];var X=s.call(this,Z,R);$=w.map(function(fe){return new a(c,l,R[fe],X,Z[fe].text,void 0,Z[fe].align)}),this.setTableHeaderRow($),this.printHeaderRow(1,!1)}var se=d.reduce(function(fe,ne){return fe[ne.name]=ne.align,fe},{});for(p=0;p<u.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:u[p]},this);var H=s.call(this,u[p],R);for(_=0;_<w.length;_+=1){var ie=u[p][w[_]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:_,data:ie},this),o.call(this,new a(c,l,R[w[_]],H,ie,p+2,se[w[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=l,this};var s=function(c,l){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(c).map(function(p){var y=c[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,l[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/v+u+u},this).reduce(function(p,y){return Math.max(p,y)},0)};r.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},r.printHeaderRow=function(c,l){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),l&&(u.y=this.internal.__cell__.margins.top||0,v.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),e=!1}}(Ze.API);var JC={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},XC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ly=YC(XC),ZC=[100,200,300,400,500,600,700,800,900],_ee=YC(ZC);function $g(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),e=function(a){return JC[a=a||"normal"]?a:"normal"}(r.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(r.weight),i=function(a){return typeof Ly[a=a||"normal"]=="number"?a:"normal"}(r.stretch);return{family:t,style:e,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:t,style:[i,e,n].join(" ")}}}function Ux(r,t,e,n){var i;for(i=e;i>=0&&i<t.length;i+=n)if(r[t[i]])return r[t[i]];for(i=e;i>=0&&i<t.length;i-=n)if(r[t[i]])return r[t[i]]}var wee={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$x={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Vx(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function zx(r){return r.trimLeft()}function bee(r,t){for(var e=0;e<r.length;){if(r.charAt(e)===t)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function xee(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var rh,Wx,qx,fl,nh,Hx,Gx,Kx,Vg=["times"];function Qx(r,t,e,n,i){var a=4,o=Jx;switch(i){case Ze.API.image_compression.FAST:a=1,o=Yx;break;case Ze.API.image_compression.MEDIUM:a=6,o=Xx;break;case Ze.API.image_compression.SLOW:a=9,o=Zx}r=function(c,l,u,d){for(var v,p=c.length/l,y=new Uint8Array(c.length+p),_=[See,Yx,Jx,Xx,Zx],S=0;S<p;S+=1){var w=S*l,x=c.subarray(w,w+l);if(d)y.set(d(x,u,v),w+S);else{for(var k=_.length,T=[],R=0;R<k;R+=1)T[R]=_[R](x,u,v);var U=Pee(T.concat());y.set(T[U],w+S)}v=x}return y}(r,t,Math.ceil(e*n/8),o);var s=xy(r,{level:a});return Ze.API.__addimage__.arrayBufferToBinaryString(s)}function See(r){var t=Array.apply([],r);return t.unshift(0),t}function Yx(r,t){var e=r.length,n=[];n[0]=1;for(var i=0;i<e;i+=1){var a=r[i-t]||0;n[i+1]=r[i]-a+256&255}return n}function Jx(r,t,e){var n=r.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var o=e&&e[a]||0;i[a+1]=r[a]-o+256&255}return i}function Xx(r,t,e){var n=r.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var o=r[a-t]||0,s=e&&e[a]||0;i[a+1]=r[a]+256-(o+s>>>1)&255}return i}function Zx(r,t,e){var n=r.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var o=kee(r[a-t]||0,e&&e[a]||0,e&&e[a-t]||0);i[a+1]=r[a]-o+256&255}return i}function kee(r,t,e){if(r===t&&t===e)return r;var n=Math.abs(t-e),i=Math.abs(r-e),a=Math.abs(r+t-e-e);return n<=i&&n<=a?r:i<=a?t:e}function Pee(r){var t=r.map(function(e){return e.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function zg(r,t,e){var n=t*e,i=Math.floor(n/8),a=16-(n-8*i+e),o=(1<<e)-1;return eL(r,i)>>a&o}function eS(r,t,e,n){var i=e*n,a=Math.floor(i/8),o=16-(i-8*a+n),s=(1<<n)-1,c=(t&s)<<o;(function(l,u,d){if(u+1<l.byteLength)l.setUint16(u,d,!1);else{var v=d>>8&255;l.setUint8(u,v)}})(r,a,eL(r,a)&~(s<<o)&65535|c)}function eL(r,t){return t+1<r.byteLength?r.getUint16(t,!1):r.getUint8(t)<<8}function Tee(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[t++]|r[t++]<<8,n=r[t++]|r[t++]<<8,i=r[t++],a=i>>7,o=1<<1+(7&i);r[t++],r[t++];var s=null,c=null;a&&(s=t,c=o,t+=3*o);var l=!0,u=[],d=0,v=null,p=0,y=null;for(this.width=e,this.height=n;l&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,y=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((O=r[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var _=r[t++];d=r[t++]|r[t++]<<8,v=r[t++],1&_||(v=null),p=_>>2&7,t++;break;case 254:for(;;){if(!((O=r[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var S=r[t++]|r[t++]<<8,w=r[t++]|r[t++]<<8,x=r[t++]|r[t++]<<8,k=r[t++]|r[t++]<<8,T=r[t++],R=T>>6&1,U=1<<1+(7&T),$=s,F=c,M=!1;T>>7&&(M=!0,$=t,F=U,t+=3*U);var J=t;for(t++;;){var O;if(!((O=r[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}u.push({x:S,y:w,width:x,height:k,has_local_palette:M,palette_offset:$,palette_size:F,data_offset:J,data_length:t-J,transparent_index:v,interlaced:!!R,delay:d,disposal:p});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(N){if(N<0||N>=u.length)throw new Error("Frame index out of range.");return u[N]},this.decodeAndBlitFrameBGRA=function(N,q){var j=this.frameInfo(N),Z=j.width*j.height,X=new Uint8Array(Z);tS(r,j.data_offset,X,Z);var se=j.palette_offset,H=j.transparent_index;H===null&&(H=256);var ie=j.width,fe=e-ie,ne=ie,E=4*(j.y*e+j.x),W=4*((j.y+j.height)*e+j.x),G=E,ee=4*fe;j.interlaced===!0&&(ee+=4*e*7);for(var oe=8,ue=0,ye=X.length;ue<ye;++ue){var me=X[ue];if(ne===0&&(ne=ie,(G+=ee)>=W&&(ee=4*fe+4*e*(oe-1),G=E+(ie+fe)*(oe<<1),oe>>=1)),me===H)G+=4;else{var be=r[se+3*me],Te=r[se+3*me+1],Re=r[se+3*me+2];q[G++]=Re,q[G++]=Te,q[G++]=be,q[G++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(N,q){var j=this.frameInfo(N),Z=j.width*j.height,X=new Uint8Array(Z);tS(r,j.data_offset,X,Z);var se=j.palette_offset,H=j.transparent_index;H===null&&(H=256);var ie=j.width,fe=e-ie,ne=ie,E=4*(j.y*e+j.x),W=4*((j.y+j.height)*e+j.x),G=E,ee=4*fe;j.interlaced===!0&&(ee+=4*e*7);for(var oe=8,ue=0,ye=X.length;ue<ye;++ue){var me=X[ue];if(ne===0&&(ne=ie,(G+=ee)>=W&&(ee=4*fe+4*e*(oe-1),G=E+(ie+fe)*(oe<<1),oe>>=1)),me===H)G+=4;else{var be=r[se+3*me],Te=r[se+3*me+1],Re=r[se+3*me+2];q[G++]=be,q[G++]=Te,q[G++]=Re,q[G++]=255}--ne}}}function tS(r,t,e,n){for(var i=r[t++],a=1<<i,o=a+1,s=o+1,c=i+1,l=(1<<c)-1,u=0,d=0,v=0,p=r[t++],y=new Int32Array(4096),_=null;;){for(;u<16&&p!==0;)d|=r[t++]<<u,u+=8,p===1?p=r[t++]:--p;if(u<c)break;var S=d&l;if(d>>=c,u-=c,S!==a){if(S===o)break;for(var w=S<s?S:_,x=0,k=w;k>a;)k=y[k]>>8,++x;var T=k;if(v+x+(w!==S?1:0)>n)return void Gt.log("Warning, gif stream longer than expected.");e[v++]=T;var R=v+=x;for(w!==S&&(e[v++]=T),k=w;x--;)k=y[k],e[--R]=255&k,k>>=8;_!==null&&s<4096&&(y[s++]=_<<8|T,s>=l+1&&c<12&&(++c,l=l<<1|1)),_=S}else s=o+1,l=(1<<(c=i+1))-1,_=null}return v!==n&&Gt.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Wg(r){var t,e,n,i,a,o=Math.floor,s=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),d=new Array(65535),v=new Array(65535),p=new Array(64),y=new Array(64),_=[],S=0,w=7,x=new Array(64),k=new Array(64),T=new Array(64),R=new Array(256),U=new Array(2048),$=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(E,W){for(var G=0,ee=0,oe=new Array,ue=1;ue<=16;ue++){for(var ye=1;ye<=E[ue];ye++)oe[W[ee]]=[],oe[W[ee]][0]=G,oe[W[ee]][1]=ue,ee++,G++;G*=2}return oe}function se(E){for(var W=E[0],G=E[1]-1;G>=0;)W&1<<G&&(S|=1<<w),G--,--w<0&&(S==255?(H(255),H(0)):H(S),w=7,S=0)}function H(E){_.push(E)}function ie(E){H(E>>8&255),H(255&E)}function fe(E,W,G,ee,oe){for(var ue,ye=oe[0],me=oe[240],be=function(Ee,Ie){var Ne,st,Qe,xt,ut,dt,Ot,lt,qe,it,Je=0;for(qe=0;qe<8;++qe){Ne=Ee[Je],st=Ee[Je+1],Qe=Ee[Je+2],xt=Ee[Je+3],ut=Ee[Je+4],dt=Ee[Je+5],Ot=Ee[Je+6];var At=Ne+(lt=Ee[Je+7]),St=Ne-lt,Ve=st+Ot,ot=st-Ot,Nt=Qe+dt,We=Qe-dt,ht=xt+ut,je=xt-ut,vr=At+ht,mr=At-ht,Wt=Ve+Nt,pt=Ve-Nt;Ee[Je]=vr+Wt,Ee[Je+4]=vr-Wt;var It=.707106781*(pt+mr);Ee[Je+2]=mr+It,Ee[Je+6]=mr-It;var Mo=.382683433*((vr=je+We)-(pt=ot+St)),Jr=.5411961*vr+Mo,oa=1.306562965*pt+Mo,Mi=.707106781*(Wt=We+ot),at=St+Mi,sa=St-Mi;Ee[Je+5]=sa+Jr,Ee[Je+3]=sa-Jr,Ee[Je+1]=at+oa,Ee[Je+7]=at-oa,Je+=8}for(Je=0,qe=0;qe<8;++qe){Ne=Ee[Je],st=Ee[Je+8],Qe=Ee[Je+16],xt=Ee[Je+24],ut=Ee[Je+32],dt=Ee[Je+40],Ot=Ee[Je+48];var la=Ne+(lt=Ee[Je+56]),Yn=Ne-lt,Jn=st+Ot,lr=st-Ot,Br=Qe+dt,zr=Qe-dt,Do=xt+ut,Ua=xt-ut,pi=la+Do,Di=la-Do,vi=Jn+Br,mi=Jn-Br;Ee[Je]=pi+vi,Ee[Je+32]=pi-vi;var Xn=.707106781*(mi+Di);Ee[Je+16]=Di+Xn,Ee[Je+48]=Di-Xn;var Fo=.382683433*((pi=Ua+zr)-(mi=lr+Yn)),Fi=.5411961*pi+Fo,Bo=1.306562965*mi+Fo,Ws=.707106781*(vi=zr+lr),qs=Yn+Ws,Hs=Yn-Ws;Ee[Je+40]=Hs+Fi,Ee[Je+24]=Hs-Fi,Ee[Je+8]=qs+Bo,Ee[Je+56]=qs-Bo,Je++}for(qe=0;qe<64;++qe)it=Ee[qe]*Ie[qe],p[qe]=it>0?it+.5|0:it-.5|0;return p}(E,W),Te=0;Te<64;++Te)y[$[Te]]=be[Te];var Re=y[0]-G;G=y[0],Re==0?se(ee[0]):(se(ee[v[ue=32767+Re]]),se(d[ue]));for(var Oe=63;Oe>0&&y[Oe]==0;)Oe--;if(Oe==0)return se(ye),G;for(var re,z=1;z<=Oe;){for(var nt=z;y[z]==0&&z<=Oe;)++z;var Ke=z-nt;if(Ke>=16){re=Ke>>4;for(var $e=1;$e<=re;++$e)se(me);Ke&=15}ue=32767+y[z],se(oe[(Ke<<4)+v[ue]]),se(d[ue]),z++}return Oe!=63&&se(ye),G}function ne(E){E=Math.min(Math.max(E,1),100),a!=E&&(function(W){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var oe=o((G[ee]*W+50)/100);oe=Math.min(Math.max(oe,1),255),s[$[ee]]=oe}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var me=o((ue[ye]*W+50)/100);me=Math.min(Math.max(me,1),255),c[$[ye]]=me}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,Re=0;Re<8;Re++)for(var Oe=0;Oe<8;Oe++)l[Te]=1/(s[$[Te]]*be[Re]*be[Oe]*8),u[Te]=1/(c[$[Te]]*be[Re]*be[Oe]*8),Te++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),a=E)}this.encode=function(E,W){W&&ne(W),_=new Array,S=0,w=7,ie(65496),ie(65504),ie(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),ie(1),ie(1),H(0),H(0),function(){ie(65499),ie(132),H(0);for(var st=0;st<64;st++)H(s[st]);H(1);for(var Qe=0;Qe<64;Qe++)H(c[Qe])}(),function(st,Qe){ie(65472),ie(17),H(8),ie(Qe),ie(st),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(E.width,E.height),function(){ie(65476),ie(418),H(0);for(var st=0;st<16;st++)H(F[st+1]);for(var Qe=0;Qe<=11;Qe++)H(M[Qe]);H(16);for(var xt=0;xt<16;xt++)H(J[xt+1]);for(var ut=0;ut<=161;ut++)H(O[ut]);H(1);for(var dt=0;dt<16;dt++)H(N[dt+1]);for(var Ot=0;Ot<=11;Ot++)H(q[Ot]);H(17);for(var lt=0;lt<16;lt++)H(j[lt+1]);for(var qe=0;qe<=161;qe++)H(Z[qe])}(),ie(65498),ie(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var G=0,ee=0,oe=0;S=0,w=7,this.encode.displayName="_encode_";for(var ue,ye,me,be,Te,Re,Oe,re,z,nt=E.data,Ke=E.width,$e=E.height,Ee=4*Ke,Ie=0;Ie<$e;){for(ue=0;ue<Ee;){for(Te=Ee*Ie+ue,Oe=-1,re=0,z=0;z<64;z++)Re=Te+(re=z>>3)*Ee+(Oe=4*(7&z)),Ie+re>=$e&&(Re-=Ee*(Ie+1+re-$e)),ue+Oe>=Ee&&(Re-=ue+Oe-Ee+4),ye=nt[Re++],me=nt[Re++],be=nt[Re++],x[z]=(U[ye]+U[me+256|0]+U[be+512|0]>>16)-128,k[z]=(U[ye+768|0]+U[me+1024|0]+U[be+1280|0]>>16)-128,T[z]=(U[ye+1280|0]+U[me+1536|0]+U[be+1792|0]>>16)-128;G=fe(x,l,G,t,n),ee=fe(k,u,ee,e,i),oe=fe(T,u,oe,e,i),ue+=32}Ie+=8}if(w>=0){var Ne=[];Ne[1]=w+1,Ne[0]=(1<<w+1)-1,se(Ne)}return ie(65497),new Uint8Array(_)},r=r||50,function(){for(var E=String.fromCharCode,W=0;W<256;W++)R[W]=E(W)}(),t=X(F,M),e=X(N,q),n=X(J,O),i=X(j,Z),function(){for(var E=1,W=2,G=1;G<=15;G++){for(var ee=E;ee<W;ee++)v[32767+ee]=G,d[32767+ee]=[],d[32767+ee][1]=G,d[32767+ee][0]=ee;for(var oe=-(W-1);oe<=-E;oe++)v[32767+oe]=G,d[32767+oe]=[],d[32767+oe][1]=G,d[32767+oe][0]=W-1+oe;E<<=1,W<<=1}}(),function(){for(var E=0;E<256;E++)U[E]=19595*E,U[E+256|0]=38470*E,U[E+512|0]=7471*E+32768,U[E+768|0]=-11059*E,U[E+1024|0]=-21709*E,U[E+1280|0]=32768*E+8421375,U[E+1536|0]=-27439*E,U[E+1792|0]=-5329*E}(),ne(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xi(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function rS(r){function t(M){if(!M)throw Error("assert :P")}function e(M,J,O){for(var N=0;4>N;N++)if(M[J+N]!=O.charCodeAt(N))return!0;return!1}function n(M,J,O,N,q){for(var j=0;j<q;j++)M[J+j]=O[N+j]}function i(M,J,O,N){for(var q=0;q<N;q++)M[J+q]=O}function a(M){return new Int32Array(M)}function o(M,J){for(var O=[],N=0;N<M;N++)O.push(new J);return O}function s(M,J){var O=[];return function N(q,j,Z){for(var X=Z[j],se=0;se<X&&(q.push(Z.length>j+1?[]:new J),!(Z.length<j+1));se++)N(q[se],j+1,Z)}(O,0,M),O}var c=function(){var M=this;function J(f,h){for(var b=1<<h-1>>>0;f&b;)b>>>=1;return b?(f&b-1)+b:f}function O(f,h,b,P,L){t(!(P%b));do f[h+(P-=b)]=L;while(0<P)}function N(f,h,b,P,L){if(t(2328>=L),512>=L)var I=a(512);else if((I=a(L))==null)return 0;return function(D,B,V,K,ae,ve){var Q,le,de=B,_e=1<<V,pe=a(16),we=a(16);for(t(ae!=0),t(K!=null),t(D!=null),t(0<V),le=0;le<ae;++le){if(15<K[le])return 0;++pe[K[le]]}if(pe[0]==ae)return 0;for(we[1]=0,Q=1;15>Q;++Q){if(pe[Q]>1<<Q)return 0;we[Q+1]=we[Q]+pe[Q]}for(le=0;le<ae;++le)Q=K[le],0<K[le]&&(ve[we[Q]++]=le);if(we[15]==1)return(K=new q).g=0,K.value=ve[0],O(D,de,1,_e,K),_e;var Se,Ce=-1,ke=_e-1,Xe=0,Fe=1,wt=1,He=1<<V;for(le=0,Q=1,ae=2;Q<=V;++Q,ae<<=1){if(Fe+=wt<<=1,0>(wt-=pe[Q]))return 0;for(;0<pe[Q];--pe[Q])(K=new q).g=Q,K.value=ve[le++],O(D,de+Xe,ae,He,K),Xe=J(Xe,Q)}for(Q=V+1,ae=2;15>=Q;++Q,ae<<=1){if(Fe+=wt<<=1,0>(wt-=pe[Q]))return 0;for(;0<pe[Q];--pe[Q]){if(K=new q,(Xe&ke)!=Ce){for(de+=He,Se=1<<(Ce=Q)-V;15>Ce&&!(0>=(Se-=pe[Ce]));)++Ce,Se<<=1;_e+=He=1<<(Se=Ce-V),D[B+(Ce=Xe&ke)].g=Se+V,D[B+Ce].value=de-B-Ce}K.g=Q-V,K.value=ve[le++],O(D,de+(Xe>>V),ae,He,K),Xe=J(Xe,Q)}}return Fe!=2*we[15]-1?0:_e}(f,h,b,P,L,I)}function q(){this.value=this.g=0}function j(){this.value=this.g=0}function Z(){this.G=o(5,q),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(rs,j)}function X(f,h,b,P){t(f!=null),t(h!=null),t(2147483648>P),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=h,f.pa=b,f.Jd=h,f.Yc=b+P,f.Zc=4<=P?b+P-4+1:b,ye(f)}function se(f,h){for(var b=0;0<h--;)b|=be(f,128)<<h;return b}function H(f,h){var b=se(f,h);return me(f)?-b:b}function ie(f,h,b,P){var L,I=0;for(t(f!=null),t(h!=null),t(4294967288>P),f.Sb=P,f.Ra=0,f.u=0,f.h=0,4<P&&(P=4),L=0;L<P;++L)I+=h[b+L]<<8*L;f.Ra=I,f.bb=P,f.oa=h,f.pa=b}function fe(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<qa-8>>>0,++f.bb,f.u-=8;ee(f)&&(f.h=1,f.u=0)}function ne(f,h){if(t(0<=h),!f.h&&h<=jn){var b=G(f)&Rn[h];return f.u+=h,fe(f),b}return f.h=1,f.u=0}function E(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(f){return f.Ra>>>(f.u&qa-1)>>>0}function ee(f){return t(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>qa}function oe(f,h){f.u=h,f.h=ee(f)}function ue(f){f.u>=va&&(t(f.u>=va),fe(f))}function ye(f){t(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(t(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function me(f){return se(f,1)}function be(f,h){var b=f.Ca;0>f.b&&ye(f);var P=f.b,L=b*h>>>8,I=(f.I>>>P>L)+0;for(I?(b-=L,f.I-=L+1<<P>>>0):b=L+1,P=b,L=0;256<=P;)L+=8,P>>=8;return P=7^L+Ha[P],f.b-=P,f.Ca=(b<<P)-1,I}function Te(f,h,b){f[h+0]=b>>24&255,f[h+1]=b>>16&255,f[h+2]=b>>8&255,f[h+3]=255&b}function Re(f,h){return f[h+0]|f[h+1]<<8}function Oe(f,h){return Re(f,h)|f[h+2]<<16}function re(f,h){return Re(f,h)|Re(f,h+2)<<16}function z(f,h){var b=1<<h;return t(f!=null),t(0<h),f.X=a(b),f.X==null?0:(f.Mb=32-h,f.Xa=h,1)}function nt(f,h){t(f!=null),t(h!=null),t(f.Xa==h.Xa),n(h.X,0,f.X,0,1<<h.Xa)}function Ke(){this.X=[],this.Xa=this.Mb=0}function $e(f,h,b,P){t(b!=null),t(P!=null);var L=b[0],I=P[0];return L==0&&(L=(f*I+h/2)/h),I==0&&(I=(h*L+f/2)/f),0>=L||0>=I?0:(b[0]=L,P[0]=I,1)}function Ee(f,h){return f+(1<<h)-1>>>h}function Ie(f,h){return((4278255360&f)+(4278255360&h)>>>0&4278255360)+((16711935&f)+(16711935&h)>>>0&16711935)>>>0}function Ne(f,h){M[h]=function(b,P,L,I,D,B,V){var K;for(K=0;K<D;++K){var ae=M[f](B[V+K-1],L,I+K);B[V+K]=Ie(b[P+K],ae)}}}function st(){this.ud=this.hd=this.jd=0}function Qe(f,h){return((4278124286&(f^h))>>>1)+(f&h)>>>0}function xt(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function ut(f,h){return xt(f+(f-h+.5>>1))}function dt(f,h,b){return Math.abs(h-b)-Math.abs(f-b)}function Ot(f,h,b,P,L,I,D){for(P=I[D-1],b=0;b<L;++b)I[D+b]=P=Ie(f[h+b],P)}function lt(f,h,b,P,L){var I;for(I=0;I<b;++I){var D=f[h+I],B=D>>8&255,V=16711935&(V=(V=16711935&D)+((B<<16)+B));P[L+I]=(4278255360&D)+V>>>0}}function qe(f,h){h.jd=255&f,h.hd=f>>8&255,h.ud=f>>16&255}function it(f,h,b,P,L,I){var D;for(D=0;D<P;++D){var B=h[b+D],V=B>>>8,K=B,ae=255&(ae=(ae=B>>>16)+((f.jd<<24>>24)*(V<<24>>24)>>>5));K=255&(K=(K+=(f.hd<<24>>24)*(V<<24>>24)>>>5)+((f.ud<<24>>24)*(ae<<24>>24)>>>5)),L[I+D]=(4278255360&B)+(ae<<16)+K}}function Je(f,h,b,P,L){M[h]=function(I,D,B,V,K,ae,ve,Q,le){for(V=ve;V<Q;++V)for(ve=0;ve<le;++ve)K[ae++]=L(B[P(I[D++])])},M[f]=function(I,D,B,V,K,ae,ve){var Q=8>>I.b,le=I.Ea,de=I.K[0],_e=I.w;if(8>Q)for(I=(1<<I.b)-1,_e=(1<<Q)-1;D<B;++D){var pe,we=0;for(pe=0;pe<le;++pe)pe&I||(we=P(V[K++])),ae[ve++]=L(de[we&_e]),we>>=Q}else M["VP8LMapColor"+b](V,K,de,_e,ae,ve,D,B,le)}}function At(f,h,b,P,L){for(b=h+b;h<b;){var I=f[h++];P[L++]=I>>16&255,P[L++]=I>>8&255,P[L++]=255&I}}function St(f,h,b,P,L){for(b=h+b;h<b;){var I=f[h++];P[L++]=I>>16&255,P[L++]=I>>8&255,P[L++]=255&I,P[L++]=I>>24&255}}function Ve(f,h,b,P,L){for(b=h+b;h<b;){var I=(D=f[h++])>>16&240|D>>12&15,D=240&D|D>>28&15;P[L++]=I,P[L++]=D}}function ot(f,h,b,P,L){for(b=h+b;h<b;){var I=(D=f[h++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;P[L++]=I,P[L++]=D}}function Nt(f,h,b,P,L){for(b=h+b;h<b;){var I=f[h++];P[L++]=255&I,P[L++]=I>>8&255,P[L++]=I>>16&255}}function We(f,h,b,P,L,I){if(I==0)for(b=h+b;h<b;)Te(P,((I=f[h++])[0]>>24|I[1]>>8&65280|I[2]<<8&16711680|I[3]<<24)>>>0),L+=32;else n(P,L,f,h,b)}function ht(f,h){M[h][0]=M[f+"0"],M[h][1]=M[f+"1"],M[h][2]=M[f+"2"],M[h][3]=M[f+"3"],M[h][4]=M[f+"4"],M[h][5]=M[f+"5"],M[h][6]=M[f+"6"],M[h][7]=M[f+"7"],M[h][8]=M[f+"8"],M[h][9]=M[f+"9"],M[h][10]=M[f+"10"],M[h][11]=M[f+"11"],M[h][12]=M[f+"12"],M[h][13]=M[f+"13"],M[h][14]=M[f+"0"],M[h][15]=M[f+"0"]}function je(f){return f==Gv||f==Kv||f==Jf||f==Qv}function vr(){this.eb=[],this.size=this.A=this.fb=0}function mr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vr,this.f.kb=new mr,this.sd=null}function pt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Mo(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Jr(f,h){var b=f.T,P=h.ba.f.RGBA,L=P.eb,I=P.fb+f.ka*P.A,D=ii[h.ba.S],B=f.y,V=f.O,K=f.f,ae=f.N,ve=f.ea,Q=f.W,le=h.cc,de=h.dc,_e=h.Mc,pe=h.Nc,we=f.ka,Se=f.ka+f.T,Ce=f.U,ke=Ce+1>>1;for(we==0?D(B,V,null,null,K,ae,ve,Q,K,ae,ve,Q,L,I,null,null,Ce):(D(h.ec,h.fc,B,V,le,de,_e,pe,K,ae,ve,Q,L,I-P.A,L,I,Ce),++b);we+2<Se;we+=2)le=K,de=ae,_e=ve,pe=Q,ae+=f.Rc,Q+=f.Rc,I+=2*P.A,D(B,(V+=2*f.fa)-f.fa,B,V,le,de,_e,pe,K,ae,ve,Q,L,I-P.A,L,I,Ce);return V+=f.fa,f.j+Se<f.o?(n(h.ec,h.fc,B,V,Ce),n(h.cc,h.dc,K,ae,ke),n(h.Mc,h.Nc,ve,Q,ke),b--):1&Se||D(B,V,null,null,K,ae,ve,Q,K,ae,ve,Q,L,I+P.A,null,null,Ce),b}function oa(f,h,b){var P=f.F,L=[f.J];if(P!=null){var I=f.U,D=h.ba.S,B=D==Yf||D==Jf;h=h.ba.f.RGBA;var V=[0],K=f.ka;V[0]=f.T,f.Kb&&(K==0?--V[0]:(--K,L[0]-=f.width),f.j+f.ka+f.T==f.o&&(V[0]=f.o-f.j-K));var ae=h.eb;K=h.fb+K*h.A,f=I_(P,L[0],f.width,I,V,ae,K+(B?0:3),h.A),t(b==V),f&&je(D)&&Vc(ae,K,B,I,V,h.A)}return 0}function Mi(f){var h=f.ma,b=h.ba.S,P=11>b,L=b==Kf||b==Qf||b==Yf||b==Hv||b==12||je(b);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!jc(h.Oa,f,L?11:12))return 0;if(L&&je(b)&&Vf(),f.da)alert("todo:use_scaling");else{if(P){if(h.Ib=Mo,f.Kb){if(b=f.U+1>>1,h.memory=a(f.U+2*b),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+f.U,h.Mc=h.cc,h.Nc=h.dc+b,h.Ib=Jr,Vf()}}else alert("todo:EmitYUV");L&&(h.Jb=oa,P&&ei())}if(P&&!J_){for(f=0;256>f;++f)bL[f]=89858*(f-128)+Zf>>Xf,kL[f]=-22014*(f-128)+Zf,SL[f]=-45773*(f-128),xL[f]=113618*(f-128)+Zf>>Xf;for(f=Wc;f<Xv;++f)h=76283*(f-16)+Zf>>Xf,PL[f-Wc]=cr(h,255),TL[f-Wc]=cr(h+8>>4,15);J_=1}return 1}function at(f){var h=f.ma,b=f.U,P=f.T;return t(!(1&f.ka)),0>=b||0>=P?0:(b=h.Ib(f,h),h.Jb!=null&&h.Jb(f,h,b),h.Dc+=b,1)}function sa(f){f.ma.memory=null}function la(f,h,b,P){return ne(f,8)!=47?0:(h[0]=ne(f,14)+1,b[0]=ne(f,14)+1,P[0]=ne(f,1),ne(f,3)!=0?0:!f.h)}function Yn(f,h){if(4>f)return f+1;var b=f-2>>1;return(2+(1&f)<<b)+ne(h,b)+1}function Jn(f,h){return 120<h?h-120:1<=(b=((b=sL[h-1])>>4)*f+(8-(15&b)))?b:1;var b}function lr(f,h,b){var P=G(b),L=f[h+=255&P].g-8;return 0<L&&(oe(b,b.u+8),P=G(b),h+=f[h].value,h+=P&(1<<L)-1),oe(b,b.u+f[h].g),f[h].value}function Br(f,h,b){return b.g+=f.g,b.value+=f.value<<h>>>0,t(8>=b.g),f.g}function zr(f,h,b){var P=f.xc;return t((h=P==0?0:f.vc[f.md*(b>>P)+(h>>P)])<f.Wb),f.Ya[h]}function Do(f,h,b,P){var L=f.ab,I=f.c*h,D=f.C;h=D+h;var B=b,V=P;for(P=f.Ta,b=f.Ua;0<L--;){var K=f.gc[L],ae=D,ve=h,Q=B,le=V,de=(V=P,B=b,K.Ea);switch(t(ae<ve),t(ve<=K.nc),K.hc){case 2:yr(Q,le,(ve-ae)*de,V,B);break;case 0:var _e=ae,pe=ve,we=V,Se=B,Ce=(He=K).Ea;_e==0&&(Mc(Q,le,null,null,1,we,Se),Ot(Q,le+1,0,0,Ce-1,we,Se+1),le+=Ce,Se+=Ce,++_e);for(var ke=1<<He.b,Xe=ke-1,Fe=Ee(Ce,He.b),wt=He.K,He=He.w+(_e>>He.b)*Fe;_e<pe;){var Pt=wt,jr=He,bt=1;for(el(Q,le,we,Se-Ce,1,we,Se);bt<Ce;){var Ge=(bt&~Xe)+ke;Ge>Ce&&(Ge=Ce),(0,Fc[Pt[jr++]>>8&15])(Q,le+ +bt,we,Se+bt-Ce,Ge-bt,we,Se+bt),bt=Ge}le+=Ce,Se+=Ce,++_e&Xe||(He+=Fe)}ve!=K.nc&&n(V,B-de,V,B+(ve-ae-1)*de,de);break;case 1:for(de=Q,pe=le,Ce=(Q=K.Ea)-(Se=Q&~(we=(le=1<<K.b)-1)),_e=Ee(Q,K.b),ke=K.K,K=K.w+(ae>>K.b)*_e;ae<ve;){for(Xe=ke,Fe=K,wt=new st,He=pe+Se,Pt=pe+Q;pe<He;)qe(Xe[Fe++],wt),Bc(wt,de,pe,le,V,B),pe+=le,B+=le;pe<Pt&&(qe(Xe[Fe++],wt),Bc(wt,de,pe,Ce,V,B),pe+=Ce,B+=Ce),++ae&we||(K+=_e)}break;case 3:if(Q==V&&le==B&&0<K.b){for(pe=V,Q=de=B+(ve-ae)*de-(Se=(ve-ae)*Ee(K.Ea,K.b)),le=V,we=B,_e=[],Se=(Ce=Se)-1;0<=Se;--Se)_e[Se]=le[we+Se];for(Se=Ce-1;0<=Se;--Se)pe[Q+Se]=_e[Se];Wf(K,ae,ve,V,de,V,B)}else Wf(K,ae,ve,Q,le,V,B)}B=P,V=b}V!=b&&n(P,b,B,V,I)}function Ua(f,h){var b=f.V,P=f.Ba+f.c*f.C,L=h-f.C;if(t(h<=f.l.o),t(16>=L),0<L){var I=f.l,D=f.Ta,B=f.Ua,V=I.width;if(Do(f,L,b,P),L=B=[B],t((b=f.C)<(P=h)),t(I.v<I.va),P>I.o&&(P=I.o),b<I.j){var K=I.j-b;b=I.j,L[0]+=K*V}if(b>=P?b=0:(L[0]+=4*I.v,I.ka=b-I.j,I.U=I.va-I.v,I.T=P-b,b=1),b){if(B=B[0],11>(b=f.ca).S){var ae=b.f.RGBA,ve=(P=b.S,L=I.U,I=I.T,K=ae.eb,ae.A),Q=I;for(ae=ae.fb+f.Ma*ae.A;0<Q--;){var le=D,de=B,_e=L,pe=K,we=ae;switch(P){case Gf:Uc(le,de,_e,pe,we);break;case Kf:Ga(le,de,_e,pe,we);break;case Gv:Ga(le,de,_e,pe,we),Vc(pe,we,0,_e,1,0);break;case V_:ns(le,de,_e,pe,we);break;case Qf:We(le,de,_e,pe,we,1);break;case Kv:We(le,de,_e,pe,we,1),Vc(pe,we,0,_e,1,0);break;case Yf:We(le,de,_e,pe,we,0);break;case Jf:We(le,de,_e,pe,we,0),Vc(pe,we,1,_e,1,0);break;case Hv:Ka(le,de,_e,pe,we);break;case Qv:Ka(le,de,_e,pe,we),j_(pe,we,_e,1,0);break;case z_:Qa(le,de,_e,pe,we);break;default:t(0)}B+=V,ae+=ve}f.Ma+=I}else alert("todo:EmitRescaledRowsYUVA");t(f.Ma<=b.height)}}f.C=h,t(f.C<=f.i)}function pi(f){var h;if(0<f.ua)return 0;for(h=0;h<f.Wb;++h){var b=f.Ya[h].G,P=f.Ya[h].H;if(0<b[1][P[1]+0].g||0<b[2][P[2]+0].g||0<b[3][P[3]+0].g)return 0}return 1}function Di(f,h,b,P,L,I){if(f.Z!=0){var D=f.qd,B=f.rd;for(t(Xa[f.Z]!=null);h<b;++h)Xa[f.Z](D,B,P,L,P,L,I),D=P,B=L,L+=I;f.qd=D,f.rd=B}}function vi(f,h){var b=f.l.ma,P=b.Z==0||b.Z==1?f.l.j:f.C;if(P=f.C<P?P:f.C,t(h<=f.l.o),h>P){var L=f.l.width,I=b.ca,D=b.tb+L*P,B=f.V,V=f.Ba+f.c*P,K=f.gc;t(f.ab==1),t(K[0].hc==3),$i(K[0],P,h,B,V,I,D),Di(b,P,h,I,D,L)}f.C=f.Ma=h}function mi(f,h,b,P,L,I,D){var B=f.$/P,V=f.$%P,K=f.m,ae=f.s,ve=b+f.$,Q=ve;L=b+P*L;var le=b+P*I,de=280+ae.ua,_e=f.Pb?B:16777216,pe=0<ae.ua?ae.Wa:null,we=ae.wc,Se=ve<le?zr(ae,V,B):null;t(f.C<I),t(le<=L);var Ce=!1;e:for(;;){for(;Ce||ve<le;){var ke=0;if(B>=_e){var Xe=ve-b;t((_e=f).Pb),_e.wd=_e.m,_e.xd=Xe,0<_e.s.ua&&nt(_e.s.Wa,_e.s.vb),_e=B+cL}if(V&we||(Se=zr(ae,V,B)),t(Se!=null),Se.Qb&&(h[ve]=Se.qb,Ce=!0),!Ce)if(ue(K),Se.jc){ke=K,Xe=h;var Fe=ve,wt=Se.pd[G(ke)&rs-1];t(Se.jc),256>wt.g?(oe(ke,ke.u+wt.g),Xe[Fe]=wt.value,ke=0):(oe(ke,ke.u+wt.g-256),t(256<=wt.value),ke=wt.value),ke==0&&(Ce=!0)}else ke=lr(Se.G[0],Se.H[0],K);if(K.h)break;if(Ce||256>ke){if(!Ce)if(Se.nd)h[ve]=(Se.qb|ke<<8)>>>0;else{if(ue(K),Ce=lr(Se.G[1],Se.H[1],K),ue(K),Xe=lr(Se.G[2],Se.H[2],K),Fe=lr(Se.G[3],Se.H[3],K),K.h)break;h[ve]=(Fe<<24|Ce<<16|ke<<8|Xe)>>>0}if(Ce=!1,++ve,++V>=P&&(V=0,++B,D!=null&&B<=I&&!(B%16)&&D(f,B),pe!=null))for(;Q<ve;)ke=h[Q++],pe.X[(506832829*ke&4294967295)>>>pe.Mb]=ke}else if(280>ke){if(ke=Yn(ke-256,K),Xe=lr(Se.G[4],Se.H[4],K),ue(K),Xe=Jn(P,Xe=Yn(Xe,K)),K.h)break;if(ve-b<Xe||L-ve<ke)break e;for(Fe=0;Fe<ke;++Fe)h[ve+Fe]=h[ve+Fe-Xe];for(ve+=ke,V+=ke;V>=P;)V-=P,++B,D!=null&&B<=I&&!(B%16)&&D(f,B);if(t(ve<=L),V&we&&(Se=zr(ae,V,B)),pe!=null)for(;Q<ve;)ke=h[Q++],pe.X[(506832829*ke&4294967295)>>>pe.Mb]=ke}else{if(!(ke<de))break e;for(Ce=ke-280,t(pe!=null);Q<ve;)ke=h[Q++],pe.X[(506832829*ke&4294967295)>>>pe.Mb]=ke;ke=ve,t(!(Ce>>>(Xe=pe).Xa)),h[ke]=Xe.X[Ce],Ce=!0}Ce||t(K.h==ee(K))}if(f.Pb&&K.h&&ve<L)t(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&nt(f.s.vb,f.s.Wa);else{if(K.h)break e;D!=null&&D(f,B>I?I:B),f.a=0,f.$=ve-b}return 1}return f.a=3,0}function Xn(f){t(f!=null),f.vc=null,f.yc=null,f.Ya=null;var h=f.Wa;h!=null&&(h.X=null),f.vb=null,t(f!=null)}function Fo(){var f=new Ye;return f==null?null:(f.a=0,f.xb=H_,ht("Predictor","VP8LPredictors"),ht("Predictor","VP8LPredictors_C"),ht("PredictorAdd","VP8LPredictorsAdd"),ht("PredictorAdd","VP8LPredictorsAdd_C"),yr=lt,Bc=it,Uc=At,Ga=St,Ka=Ve,Qa=ot,ns=Nt,M.VP8LMapColor32b=Ui,M.VP8LMapColor8b=Dc,f)}function Fi(f,h,b,P,L){var I=1,D=[f],B=[h],V=P.m,K=P.s,ae=null,ve=0;e:for(;;){if(b)for(;I&&ne(V,1);){var Q=D,le=B,de=P,_e=1,pe=de.m,we=de.gc[de.ab],Se=ne(pe,2);if(de.Oc&1<<Se)I=0;else{switch(de.Oc|=1<<Se,we.hc=Se,we.Ea=Q[0],we.nc=le[0],we.K=[null],++de.ab,t(4>=de.ab),Se){case 0:case 1:we.b=ne(pe,3)+2,_e=Fi(Ee(we.Ea,we.b),Ee(we.nc,we.b),0,de,we.K),we.K=we.K[0];break;case 3:var Ce,ke=ne(pe,8)+1,Xe=16<ke?0:4<ke?1:2<ke?2:3;if(Q[0]=Ee(we.Ea,Xe),we.b=Xe,Ce=_e=Fi(ke,1,0,de,we.K)){var Fe,wt=ke,He=we,Pt=1<<(8>>He.b),jr=a(Pt);if(jr==null)Ce=0;else{var bt=He.K[0],Ge=He.w;for(jr[0]=He.K[0][0],Fe=1;Fe<1*wt;++Fe)jr[Fe]=Ie(bt[Ge+Fe],jr[Fe-1]);for(;Fe<4*Pt;++Fe)jr[Fe]=0;He.K[0]=null,He.K[0]=jr,Ce=1}}_e=Ce;break;case 2:break;default:t(0)}I=_e}}if(D=D[0],B=B[0],I&&ne(V,1)&&!(I=1<=(ve=ne(V,4))&&11>=ve)){P.a=3;break e}var Ae;if(Ae=I)t:{var wr,yt,Et,Jt=P,qr=D,un=B,ur=ve,Zr=b,fn=Jt.m,Ir=Jt.s,Ct=[null],Ft=1,fr=0,Bt=lL[ur];r:for(;;){if(Zr&&ne(fn,1)){var Hr=ne(fn,3)+2,_i=Ee(qr,Hr),br=Ee(un,Hr),bn=_i*br;if(!Fi(_i,br,0,Jt,Ct))break r;for(Ct=Ct[0],Ir.xc=Hr,wr=0;wr<bn;++wr){var Ht=Ct[wr]>>8&65535;Ct[wr]=Ht,Ht>=Ft&&(Ft=Ht+1)}}if(fn.h)break r;for(yt=0;5>yt;++yt){var Mr=W_[yt];!yt&&0<ur&&(Mr+=1<<ur),fr<Mr&&(fr=Mr)}var Mn=o(Ft*Bt,q),dn=Ft,Dn=o(dn,Z);if(Dn==null)var Fn=null;else t(65536>=dn),Fn=Dn;var xn=a(fr);if(Fn==null||xn==null||Mn==null){Jt.a=1;break r}var Bn=Mn;for(wr=Et=0;wr<Ft;++wr){var Qt=Fn[wr],Un=Qt.G,wi=Qt.H,as=0,ya=1,Gr=0;for(yt=0;5>yt;++yt){Mr=W_[yt],Un[yt]=Bn,wi[yt]=Et,!yt&&0<ur&&(Mr+=1<<ur);i:{var td,Zv=Mr,rd=Jt,qc=xn,LL=Bn,OL=Et,em=0,Za=rd.m,AL=ne(Za,1);if(i(qc,0,0,Zv),AL){var NL=ne(Za,1)+1,RL=ne(Za,1),e2=ne(Za,RL==0?1:8);qc[e2]=1,NL==2&&(qc[e2=ne(Za,8)]=1);var nd=1}else{var t2=a(19),r2=ne(Za,4)+4;if(19<r2){rd.a=3;var id=0;break i}for(td=0;td<r2;++td)t2[oL[td]]=ne(Za,3);var tm=void 0,Hc=void 0,n2=rd,jL=t2,ad=Zv,i2=qc,rm=0,eo=n2.m,a2=8,o2=o(128,q);n:for(;N(o2,0,7,jL,19);){if(ne(eo,1)){var IL=2+2*ne(eo,3);if((tm=2+ne(eo,IL))>ad)break n}else tm=ad;for(Hc=0;Hc<ad&&tm--;){ue(eo);var s2=o2[0+(127&G(eo))];oe(eo,eo.u+s2.g);var rl=s2.value;if(16>rl)i2[Hc++]=rl,rl!=0&&(a2=rl);else{var ML=rl==16,l2=rl-16,DL=iL[l2],c2=ne(eo,nL[l2])+DL;if(Hc+c2>ad)break n;for(var FL=ML?a2:0;0<c2--;)i2[Hc++]=FL}}rm=1;break n}rm||(n2.a=3),nd=rm}(nd=nd&&!Za.h)&&(em=N(LL,OL,8,qc,Zv)),nd&&em!=0?id=em:(rd.a=3,id=0)}if(id==0)break r;if(ya&&aL[yt]==1&&(ya=Bn[Et].g==0),as+=Bn[Et].g,Et+=id,3>=yt){var Gc,nm=xn[0];for(Gc=1;Gc<Mr;++Gc)xn[Gc]>nm&&(nm=xn[Gc]);Gr+=nm}}if(Qt.nd=ya,Qt.Qb=0,ya&&(Qt.qb=(Un[3][wi[3]+0].value<<24|Un[1][wi[1]+0].value<<16|Un[2][wi[2]+0].value)>>>0,as==0&&256>Un[0][wi[0]+0].value&&(Qt.Qb=1,Qt.qb+=Un[0][wi[0]+0].value<<8)),Qt.jc=!Qt.Qb&&6>Gr,Qt.jc){var od,_a=Qt;for(od=0;od<rs;++od){var to=od,ro=_a.pd[to],sd=_a.G[0][_a.H[0]+to];256<=sd.value?(ro.g=sd.g+256,ro.value=sd.value):(ro.g=0,ro.value=0,to>>=Br(sd,8,ro),to>>=Br(_a.G[1][_a.H[1]+to],16,ro),to>>=Br(_a.G[2][_a.H[2]+to],0,ro),Br(_a.G[3][_a.H[3]+to],24,ro))}}}Ir.vc=Ct,Ir.Wb=Ft,Ir.Ya=Fn,Ir.yc=Mn,Ae=1;break t}Ae=0}if(!(I=Ae)){P.a=3;break e}if(0<ve){if(K.ua=1<<ve,!z(K.Wa,ve)){P.a=1,I=0;break e}}else K.ua=0;var im=P,u2=D,BL=B,am=im.s,om=am.xc;if(im.c=u2,im.i=BL,am.md=Ee(u2,om),am.wc=om==0?-1:(1<<om)-1,b){P.xb=mL;break e}if((ae=a(D*B))==null){P.a=1,I=0;break e}I=(I=mi(P,ae,0,D,B,B,null))&&!V.h;break e}return I?(L!=null?L[0]=ae:(t(ae==null),t(b)),P.$=0,b||Xn(K)):Xn(K),I}function Bo(f,h){var b=f.c*f.i,P=b+h+16*h;return t(f.c<=h),f.V=a(P),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+b+h,1)}function Ws(f,h){var b=f.C,P=h-b,L=f.V,I=f.Ba+f.c*b;for(t(h<=f.l.o);0<P;){var D=16<P?16:P,B=f.l.ma,V=f.l.width,K=V*D,ae=B.ca,ve=B.tb+V*b,Q=f.Ta,le=f.Ua;Do(f,D,L,I),M_(Q,le,ae,ve,K),Di(B,b,b+D,ae,ve,V),P-=D,L+=D*f.c,b+=D}t(b==h),f.C=f.Ma=h}function qs(){this.ub=this.yd=this.td=this.Rb=0}function Hs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Lv(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function wc(){this.Yb=function(){var f=[];return function h(b,P,L){for(var I=L[P],D=0;D<I&&(b.push(L.length>P+1?[]:0),!(L.length<P+1));D++)h(b[D],P+1,L)}(f,0,[3,11]),f}()}function Ef(){this.jb=a(3),this.Wc=s([4,8],wc),this.Xc=s([4,17],wc)}function Cf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Zn(){this.ld=this.La=this.dd=this.tc=0}function bc(){this.Na=this.la=0}function Lf(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xc(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Of(){this.uc=this.M=this.Nb=0,this.wa=Array(new Zn),this.Y=0,this.ya=Array(new xc),this.aa=0,this.l=new Gs}function Af(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Nf(){this.cb=this.a=0,this.sc="",this.m=new E,this.Od=new qs,this.Kc=new Hs,this.ed=new Cf,this.Qa=new Lv,this.Ic=this.$c=this.Aa=0,this.D=new Of,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,E),this.ia=0,this.pb=o(4,Lf),this.Pa=new Ef,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Af),this.Hd=0,this.rb=Array(new bc),this.sb=0,this.wa=Array(new Zn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xc),this.L=this.aa=0,this.gd=s([4,2],Zn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Gs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ov(){var f=new Nf;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,zc||(zc=ca)),f}function Tr(f,h,b){return f.a==0&&(f.a=h,f.sc=b,f.cb=0),0}function Rf(f,h,b){return 3<=b&&f[h+0]==157&&f[h+1]==1&&f[h+2]==42}function jf(f,h){if(f==null)return 0;if(f.a=0,f.sc="OK",h==null)return Tr(f,2,"null VP8Io passed to VP8GetHeaders()");var b=h.data,P=h.w,L=h.ha;if(4>L)return Tr(f,7,"Truncated header.");var I=b[P+0]|b[P+1]<<8|b[P+2]<<16,D=f.Od;if(D.Rb=!(1&I),D.td=I>>1&7,D.yd=I>>4&1,D.ub=I>>5,3<D.td)return Tr(f,3,"Incorrect keyframe parameters.");if(!D.yd)return Tr(f,4,"Frame not displayable.");P+=3,L-=3;var B=f.Kc;if(D.Rb){if(7>L)return Tr(f,7,"cannot parse picture header");if(!Rf(b,P,L))return Tr(f,3,"Bad code word");B.c=16383&(b[P+4]<<8|b[P+3]),B.Td=b[P+4]>>6,B.i=16383&(b[P+6]<<8|b[P+5]),B.Ud=b[P+6]>>6,P+=7,L-=7,f.za=B.c+15>>4,f.Ub=B.i+15>>4,h.width=B.c,h.height=B.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((I=f.Pa).jb,0,255,I.jb.length),t((I=f.Qa)!=null),I.Cb=0,I.Bb=0,I.Fb=1,i(I.Zb,0,0,I.Zb.length),i(I.Lb,0,0,I.Lb)}if(D.ub>L)return Tr(f,7,"bad partition length");X(I=f.m,b,P,D.ub),P+=D.ub,L-=D.ub,D.Rb&&(B.Ld=me(I),B.Kd=me(I)),B=f.Qa;var V,K=f.Pa;if(t(I!=null),t(B!=null),B.Cb=me(I),B.Cb){if(B.Bb=me(I),me(I)){for(B.Fb=me(I),V=0;4>V;++V)B.Zb[V]=me(I)?H(I,7):0;for(V=0;4>V;++V)B.Lb[V]=me(I)?H(I,6):0}if(B.Bb)for(V=0;3>V;++V)K.jb[V]=me(I)?se(I,8):255}else B.Bb=0;if(I.Ka)return Tr(f,3,"cannot parse segment header");if((B=f.ed).zd=me(I),B.Tb=se(I,6),B.wb=se(I,3),B.Pc=me(I),B.Pc&&me(I)){for(K=0;4>K;++K)me(I)&&(B.vd[K]=H(I,6));for(K=0;4>K;++K)me(I)&&(B.od[K]=H(I,6))}if(f.L=B.Tb==0?0:B.zd?1:2,I.Ka)return Tr(f,3,"cannot parse filter header");var ae=L;if(L=V=P,P=V+ae,B=ae,f.Xb=(1<<se(f.m,2))-1,ae<3*(K=f.Xb))b=7;else{for(V+=3*K,B-=3*K,ae=0;ae<K;++ae){var ve=b[L+0]|b[L+1]<<8|b[L+2]<<16;ve>B&&(ve=B),X(f.Jc[+ae],b,V,ve),V+=ve,B-=ve,L+=3}X(f.Jc[+K],b,V,B),b=V<P?0:5}if(b!=0)return Tr(f,b,"cannot parse partitions");for(b=se(V=f.m,7),L=me(V)?H(V,4):0,P=me(V)?H(V,4):0,B=me(V)?H(V,4):0,K=me(V)?H(V,4):0,V=me(V)?H(V,4):0,ae=f.Qa,ve=0;4>ve;++ve){if(ae.Cb){var Q=ae.Zb[ve];ae.Fb||(Q+=b)}else{if(0<ve){f.pb[ve]=f.pb[0];continue}Q=b}var le=f.pb[ve];le.Sc[0]=Yv[cr(Q+L,127)],le.Sc[1]=Jv[cr(Q+0,127)],le.Eb[0]=2*Yv[cr(Q+P,127)],le.Eb[1]=101581*Jv[cr(Q+B,127)]>>16,8>le.Eb[1]&&(le.Eb[1]=8),le.Qc[0]=Yv[cr(Q+K,117)],le.Qc[1]=Jv[cr(Q+V,127)],le.lc=Q+V}if(!D.Rb)return Tr(f,4,"Not a key frame.");for(me(I),D=f.Pa,b=0;4>b;++b){for(L=0;8>L;++L)for(P=0;3>P;++P)for(B=0;11>B;++B)K=be(I,pL[b][L][P][B])?se(I,8):dL[b][L][P][B],D.Wc[b][L].Yb[P][B]=K;for(L=0;17>L;++L)D.Xc[b][L]=D.Wc[b][vL[L]]}return f.kc=me(I),f.kc&&(f.Bd=se(I,8)),f.cb=1}function ca(f,h,b,P,L,I,D){var B=h[L].Yb[b];for(b=0;16>L;++L){if(!be(f,B[b+0]))return L;for(;!be(f,B[b+1]);)if(B=h[++L].Yb[0],b=0,L==16)return 16;var V=h[L+1].Yb;if(be(f,B[b+2])){var K=f,ae=0;if(be(K,(Q=B)[(ve=b)+3]))if(be(K,Q[ve+6])){for(B=0,ve=2*(ae=be(K,Q[ve+8]))+(Q=be(K,Q[ve+9+ae])),ae=0,Q=uL[ve];Q[B];++B)ae+=ae+be(K,Q[B]);ae+=3+(8<<ve)}else be(K,Q[ve+7])?(ae=7+2*be(K,165),ae+=be(K,145)):ae=5+be(K,159);else ae=be(K,Q[ve+4])?3+be(K,Q[ve+5]):2;B=V[2]}else ae=1,B=V[1];V=D+fL[L],0>(K=f).b&&ye(K);var ve,Q=K.b,le=(ve=K.Ca>>1)-(K.I>>Q)>>31;--K.b,K.Ca+=le,K.Ca|=1,K.I-=(ve+1&le)<<Q,I[V]=((ae^le)-le)*P[(0<L)+0]}return 16}function Uo(f){var h=f.rb[f.sb-1];h.la=0,h.Na=0,i(f.zc,0,0,f.zc.length),f.ja=0}function gi(f,h,b,P,L){L=f[h+b+32*P]+(L>>3),f[h+b+32*P]=-256&L?0>L?0:255:L}function $o(f,h,b,P,L,I){gi(f,h,0,b,P+L),gi(f,h,1,b,P+I),gi(f,h,2,b,P-I),gi(f,h,3,b,P-L)}function gr(f){return(20091*f>>16)+f}function Sc(f,h,b,P){var L,I=0,D=a(16);for(L=0;4>L;++L){var B=f[h+0]+f[h+8],V=f[h+0]-f[h+8],K=(35468*f[h+4]>>16)-gr(f[h+12]),ae=gr(f[h+4])+(35468*f[h+12]>>16);D[I+0]=B+ae,D[I+1]=V+K,D[I+2]=V-K,D[I+3]=B-ae,I+=4,h++}for(L=I=0;4>L;++L)B=(f=D[I+0]+4)+D[I+8],V=f-D[I+8],K=(35468*D[I+4]>>16)-gr(D[I+12]),gi(b,P,0,0,B+(ae=gr(D[I+4])+(35468*D[I+12]>>16))),gi(b,P,1,0,V+K),gi(b,P,2,0,V-K),gi(b,P,3,0,B-ae),I++,P+=32}function Av(f,h,b,P){var L=f[h+0]+4,I=35468*f[h+4]>>16,D=gr(f[h+4]),B=35468*f[h+1]>>16;$o(b,P,0,L+D,f=gr(f[h+1]),B),$o(b,P,1,L+I,f,B),$o(b,P,2,L-I,f,B),$o(b,P,3,L-D,f,B)}function Nv(f,h,b,P,L){Sc(f,h,b,P),L&&Sc(f,h+16,b,P+4)}function Rv(f,h,b,P){is(f,h+0,b,P,1),is(f,h+32,b,P+128,1)}function Bi(f,h,b,P){var L;for(f=f[h+0]+4,L=0;4>L;++L)for(h=0;4>h;++h)gi(b,P,h,L,f)}function If(f,h,b,P){f[h+0]&&Mt(f,h+0,b,P),f[h+16]&&Mt(f,h+16,b,P+4),f[h+32]&&Mt(f,h+32,b,P+128),f[h+48]&&Mt(f,h+48,b,P+128+4)}function Mf(f,h,b,P){var L,I=a(16);for(L=0;4>L;++L){var D=f[h+0+L]+f[h+12+L],B=f[h+4+L]+f[h+8+L],V=f[h+4+L]-f[h+8+L],K=f[h+0+L]-f[h+12+L];I[0+L]=D+B,I[8+L]=D-B,I[4+L]=K+V,I[12+L]=K-V}for(L=0;4>L;++L)D=(f=I[0+4*L]+3)+I[3+4*L],B=I[1+4*L]+I[2+4*L],V=I[1+4*L]-I[2+4*L],K=f-I[3+4*L],b[P+0]=D+B>>3,b[P+16]=K+V>>3,b[P+32]=D-B>>3,b[P+48]=K-V>>3,P+=64}function $a(f,h,b){var P,L=h-32,I=In,D=255-f[L-1];for(P=0;P<b;++P){var B,V=I,K=D+f[h-1];for(B=0;B<b;++B)f[h+B]=V[K+f[L+B]];h+=32}}function kc(f,h){$a(f,h,4)}function jv(f,h){$a(f,h,8)}function Iv(f,h){$a(f,h,16)}function Mv(f,h){var b;for(b=0;16>b;++b)n(f,h+32*b,f,h-32,16)}function Pc(f,h){var b;for(b=16;0<b;--b)i(f,h,f[h-1],16),h+=32}function Vo(f,h,b){var P;for(P=0;16>P;++P)i(h,b+32*P,f,16)}function Va(f,h){var b,P=16;for(b=0;16>b;++b)P+=f[h-1+32*b]+f[h+b-32];Vo(P>>5,f,h)}function Dv(f,h){var b,P=8;for(b=0;16>b;++b)P+=f[h-1+32*b];Vo(P>>4,f,h)}function zo(f,h){var b,P=8;for(b=0;16>b;++b)P+=f[h+b-32];Vo(P>>4,f,h)}function Tc(f,h){Vo(128,f,h)}function vt(f,h,b){return f+2*h+b+2>>2}function Fv(f,h){var b,P=h-32;for(P=new Uint8Array([vt(f[P-1],f[P+0],f[P+1]),vt(f[P+0],f[P+1],f[P+2]),vt(f[P+1],f[P+2],f[P+3]),vt(f[P+2],f[P+3],f[P+4])]),b=0;4>b;++b)n(f,h+32*b,P,0,P.length)}function Bv(f,h){var b=f[h-1],P=f[h-1+32],L=f[h-1+64],I=f[h-1+96];Te(f,h+0,16843009*vt(f[h-1-32],b,P)),Te(f,h+32,16843009*vt(b,P,L)),Te(f,h+64,16843009*vt(P,L,I)),Te(f,h+96,16843009*vt(L,I,I))}function Uv(f,h){var b,P=4;for(b=0;4>b;++b)P+=f[h+b-32]+f[h-1+32*b];for(P>>=3,b=0;4>b;++b)i(f,h+32*b,P,4)}function $v(f,h){var b=f[h-1+0],P=f[h-1+32],L=f[h-1+64],I=f[h-1-32],D=f[h+0-32],B=f[h+1-32],V=f[h+2-32],K=f[h+3-32];f[h+0+96]=vt(P,L,f[h-1+96]),f[h+1+96]=f[h+0+64]=vt(b,P,L),f[h+2+96]=f[h+1+64]=f[h+0+32]=vt(I,b,P),f[h+3+96]=f[h+2+64]=f[h+1+32]=f[h+0+0]=vt(D,I,b),f[h+3+64]=f[h+2+32]=f[h+1+0]=vt(B,D,I),f[h+3+32]=f[h+2+0]=vt(V,B,D),f[h+3+0]=vt(K,V,B)}function ua(f,h){var b=f[h+1-32],P=f[h+2-32],L=f[h+3-32],I=f[h+4-32],D=f[h+5-32],B=f[h+6-32],V=f[h+7-32];f[h+0+0]=vt(f[h+0-32],b,P),f[h+1+0]=f[h+0+32]=vt(b,P,L),f[h+2+0]=f[h+1+32]=f[h+0+64]=vt(P,L,I),f[h+3+0]=f[h+2+32]=f[h+1+64]=f[h+0+96]=vt(L,I,D),f[h+3+32]=f[h+2+64]=f[h+1+96]=vt(I,D,B),f[h+3+64]=f[h+2+96]=vt(D,B,V),f[h+3+96]=vt(B,V,V)}function fa(f,h){var b=f[h-1+0],P=f[h-1+32],L=f[h-1+64],I=f[h-1-32],D=f[h+0-32],B=f[h+1-32],V=f[h+2-32],K=f[h+3-32];f[h+0+0]=f[h+1+64]=I+D+1>>1,f[h+1+0]=f[h+2+64]=D+B+1>>1,f[h+2+0]=f[h+3+64]=B+V+1>>1,f[h+3+0]=V+K+1>>1,f[h+0+96]=vt(L,P,b),f[h+0+64]=vt(P,b,I),f[h+0+32]=f[h+1+96]=vt(b,I,D),f[h+1+32]=f[h+2+96]=vt(I,D,B),f[h+2+32]=f[h+3+96]=vt(D,B,V),f[h+3+32]=vt(B,V,K)}function Vv(f,h){var b=f[h+0-32],P=f[h+1-32],L=f[h+2-32],I=f[h+3-32],D=f[h+4-32],B=f[h+5-32],V=f[h+6-32],K=f[h+7-32];f[h+0+0]=b+P+1>>1,f[h+1+0]=f[h+0+64]=P+L+1>>1,f[h+2+0]=f[h+1+64]=L+I+1>>1,f[h+3+0]=f[h+2+64]=I+D+1>>1,f[h+0+32]=vt(b,P,L),f[h+1+32]=f[h+0+96]=vt(P,L,I),f[h+2+32]=f[h+1+96]=vt(L,I,D),f[h+3+32]=f[h+2+96]=vt(I,D,B),f[h+3+64]=vt(D,B,V),f[h+3+96]=vt(B,V,K)}function zv(f,h){var b=f[h-1+0],P=f[h-1+32],L=f[h-1+64],I=f[h-1+96];f[h+0+0]=b+P+1>>1,f[h+2+0]=f[h+0+32]=P+L+1>>1,f[h+2+32]=f[h+0+64]=L+I+1>>1,f[h+1+0]=vt(b,P,L),f[h+3+0]=f[h+1+32]=vt(P,L,I),f[h+3+32]=f[h+1+64]=vt(L,I,I),f[h+3+64]=f[h+2+64]=f[h+0+96]=f[h+1+96]=f[h+2+96]=f[h+3+96]=I}function Ks(f,h){var b=f[h-1+0],P=f[h-1+32],L=f[h-1+64],I=f[h-1+96],D=f[h-1-32],B=f[h+0-32],V=f[h+1-32],K=f[h+2-32];f[h+0+0]=f[h+2+32]=b+D+1>>1,f[h+0+32]=f[h+2+64]=P+b+1>>1,f[h+0+64]=f[h+2+96]=L+P+1>>1,f[h+0+96]=I+L+1>>1,f[h+3+0]=vt(B,V,K),f[h+2+0]=vt(D,B,V),f[h+1+0]=f[h+3+32]=vt(b,D,B),f[h+1+32]=f[h+3+64]=vt(P,b,D),f[h+1+64]=f[h+3+96]=vt(L,P,b),f[h+1+96]=vt(I,L,P)}function Ec(f,h){var b;for(b=0;8>b;++b)n(f,h+32*b,f,h-32,8)}function Wo(f,h){var b;for(b=0;8>b;++b)i(f,h,f[h-1],8),h+=32}function Qs(f,h,b){var P;for(P=0;8>P;++P)i(h,b+32*P,f,8)}function Ys(f,h){var b,P=8;for(b=0;8>b;++b)P+=f[h+b-32]+f[h-1+32*b];Qs(P>>4,f,h)}function Wv(f,h){var b,P=4;for(b=0;8>b;++b)P+=f[h+b-32];Qs(P>>3,f,h)}function Cc(f,h){var b,P=4;for(b=0;8>b;++b)P+=f[h-1+32*b];Qs(P>>3,f,h)}function Lc(f,h){Qs(128,f,h)}function qo(f,h,b){var P=f[h-b],L=f[h+0],I=3*(L-P)+qv[1020+f[h-2*b]-f[h+b]],D=Hf[112+(I+4>>3)];f[h-b]=In[255+P+Hf[112+(I+3>>3)]],f[h+0]=In[255+L-D]}function Ho(f,h,b,P){var L=f[h+0],I=f[h+b];return ni[255+f[h-2*b]-f[h-b]]>P||ni[255+I-L]>P}function Oc(f,h,b,P){return 4*ni[255+f[h-b]-f[h+0]]+ni[255+f[h-2*b]-f[h+b]]<=P}function Js(f,h,b,P,L){var I=f[h-3*b],D=f[h-2*b],B=f[h-b],V=f[h+0],K=f[h+b],ae=f[h+2*b],ve=f[h+3*b];return 4*ni[255+B-V]+ni[255+D-K]>P?0:ni[255+f[h-4*b]-I]<=L&&ni[255+I-D]<=L&&ni[255+D-B]<=L&&ni[255+ve-ae]<=L&&ni[255+ae-K]<=L&&ni[255+K-V]<=L}function Ac(f,h,b,P){var L=2*P+1;for(P=0;16>P;++P)Oc(f,h+P,b,L)&&qo(f,h+P,b)}function Go(f,h,b,P){var L=2*P+1;for(P=0;16>P;++P)Oc(f,h+P*b,1,L)&&qo(f,h+P*b,1)}function Df(f,h,b,P){var L;for(L=3;0<L;--L)Ac(f,h+=4*b,b,P)}function Ff(f,h,b,P){var L;for(L=3;0<L;--L)Go(f,h+=4,b,P)}function da(f,h,b,P,L,I,D,B){for(I=2*I+1;0<L--;){if(Js(f,h,b,I,D))if(Ho(f,h,b,B))qo(f,h,b);else{var V=f,K=h,ae=b,ve=V[K-2*ae],Q=V[K-ae],le=V[K+0],de=V[K+ae],_e=V[K+2*ae],pe=27*(Se=qv[1020+3*(le-Q)+qv[1020+ve-de]])+63>>7,we=18*Se+63>>7,Se=9*Se+63>>7;V[K-3*ae]=In[255+V[K-3*ae]+Se],V[K-2*ae]=In[255+ve+we],V[K-ae]=In[255+Q+pe],V[K+0]=In[255+le-pe],V[K+ae]=In[255+de-we],V[K+2*ae]=In[255+_e-Se]}h+=P}}function ha(f,h,b,P,L,I,D,B){for(I=2*I+1;0<L--;){if(Js(f,h,b,I,D))if(Ho(f,h,b,B))qo(f,h,b);else{var V=f,K=h,ae=b,ve=V[K-ae],Q=V[K+0],le=V[K+ae],de=Hf[112+(4+(_e=3*(Q-ve))>>3)],_e=Hf[112+(_e+3>>3)],pe=de+1>>1;V[K-2*ae]=In[255+V[K-2*ae]+pe],V[K-ae]=In[255+ve+_e],V[K+0]=In[255+Q-de],V[K+ae]=In[255+le-pe]}h+=P}}function Bf(f,h,b,P,L,I){da(f,h,b,1,16,P,L,I)}function Uf(f,h,b,P,L,I){da(f,h,1,b,16,P,L,I)}function Ko(f,h,b,P,L,I){var D;for(D=3;0<D;--D)ha(f,h+=4*b,b,1,16,P,L,I)}function $f(f,h,b,P,L,I){var D;for(D=3;0<D;--D)ha(f,h+=4,1,b,16,P,L,I)}function g(f,h,b,P,L,I,D,B){da(f,h,L,1,8,I,D,B),da(b,P,L,1,8,I,D,B)}function C(f,h,b,P,L,I,D,B){da(f,h,1,L,8,I,D,B),da(b,P,1,L,8,I,D,B)}function Y(f,h,b,P,L,I,D,B){ha(f,h+4*L,L,1,8,I,D,B),ha(b,P+4*L,L,1,8,I,D,B)}function te(f,h,b,P,L,I,D,B){ha(f,h+4,1,L,8,I,D,B),ha(b,P+4,1,L,8,I,D,B)}function ce(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function xe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Pe(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ze(){this.ua=0,this.Wa=new Ke,this.vb=new Ke,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new q}function Ye(){this.xb=this.a=0,this.l=new Gs,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ze,this.ab=0,this.gc=o(4,Pe),this.Oc=0}function ft(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Gs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mt(f,h,b,P,L,I,D){for(f=f==null?0:f[h+0],h=0;h<D;++h)L[I+h]=f+b[P+h]&255,f=L[I+h]}function Rt(f,h,b,P,L,I,D){var B;if(f==null)mt(null,null,b,P,L,I,D);else for(B=0;B<D;++B)L[I+B]=f[h+B]+b[P+B]&255}function nr(f,h,b,P,L,I,D){if(f==null)mt(null,null,b,P,L,I,D);else{var B,V=f[h+0],K=V,ae=V;for(B=0;B<D;++B)K=ae+(V=f[h+B])-K,ae=b[P+B]+(-256&K?0>K?0:255:K)&255,K=V,L[I+B]=ae}}function Er(f,h,b,P){var L=h.width,I=h.o;if(t(f!=null&&h!=null),0>b||0>=P||b+P>I)return null;if(!f.Cc){if(f.ga==null){var D;if(f.ga=new ft,(D=f.ga==null)||(D=h.width*h.o,t(f.Gb.length==0),f.Gb=a(D),f.Uc=0,f.Gb==null?D=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,D=1),D=!D),!D){D=f.ga;var B=f.Fa,V=f.P,K=f.qc,ae=f.mb,ve=f.nb,Q=V+1,le=K-1,de=D.l;if(t(B!=null&&ae!=null&&h!=null),Xa[0]=null,Xa[1]=mt,Xa[2]=Rt,Xa[3]=nr,D.ca=ae,D.tb=ve,D.c=h.width,D.i=h.height,t(0<D.c&&0<D.i),1>=K)h=0;else if(D.$a=3&B[V+0],D.Z=B[V+0]>>2&3,D.Lc=B[V+0]>>4&3,V=B[V+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||V)h=0;else if(de.put=at,de.ac=Mi,de.bc=sa,de.ma=D,de.width=h.width,de.height=h.height,de.Da=h.Da,de.v=h.v,de.va=h.va,de.j=h.j,de.o=h.o,D.$a)e:{t(D.$a==1),h=Fo();t:for(;;){if(h==null){h=0;break e}if(t(D!=null),D.mc=h,h.c=D.c,h.i=D.i,h.l=D.l,h.l.ma=D,h.l.width=D.c,h.l.height=D.i,h.a=0,ie(h.m,B,Q,le),!Fi(D.c,D.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&pi(h.s)?(D.ic=1,B=h.c*h.i,h.Ta=null,h.Ua=0,h.V=a(B),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(D.ic=0,h=Bo(h,D.c)),!h))break t;h=1;break e}D.mc=null,h=0}else h=le>=D.c*D.i;D=!h}if(D)return null;f.ga.Lc!=1?f.Ga=0:P=I-b}t(f.ga!=null),t(b+P<=I);e:{if(h=(B=f.ga).c,I=B.l.o,B.$a==0){if(Q=f.rc,le=f.Vc,de=f.Fa,V=f.P+1+b*h,K=f.mb,ae=f.nb+b*h,t(V<=f.P+f.qc),B.Z!=0)for(t(Xa[B.Z]!=null),D=0;D<P;++D)Xa[B.Z](Q,le,de,V,K,ae,h),Q=K,le=ae,ae+=h,V+=h;else for(D=0;D<P;++D)n(K,ae,de,V,h),Q=K,le=ae,ae+=h,V+=h;f.rc=Q,f.Vc=le}else{if(t(B.mc!=null),h=b+P,t((D=B.mc)!=null),t(h<=D.i),D.C>=h)h=1;else if(B.ic||ei(),B.ic){B=D.V,Q=D.Ba,le=D.c;var _e=D.i,pe=(de=1,V=D.$/le,K=D.$%le,ae=D.m,ve=D.s,D.$),we=le*_e,Se=le*h,Ce=ve.wc,ke=pe<Se?zr(ve,K,V):null;t(pe<=we),t(h<=_e),t(pi(ve));t:for(;;){for(;!ae.h&&pe<Se;){if(K&Ce||(ke=zr(ve,K,V)),t(ke!=null),ue(ae),256>(_e=lr(ke.G[0],ke.H[0],ae)))B[Q+pe]=_e,++pe,++K>=le&&(K=0,++V<=h&&!(V%16)&&vi(D,V));else{if(!(280>_e)){de=0;break t}_e=Yn(_e-256,ae);var Xe,Fe=lr(ke.G[4],ke.H[4],ae);if(ue(ae),!(pe>=(Fe=Jn(le,Fe=Yn(Fe,ae)))&&we-pe>=_e)){de=0;break t}for(Xe=0;Xe<_e;++Xe)B[Q+pe+Xe]=B[Q+pe+Xe-Fe];for(pe+=_e,K+=_e;K>=le;)K-=le,++V<=h&&!(V%16)&&vi(D,V);pe<Se&&K&Ce&&(ke=zr(ve,K,V))}t(ae.h==ee(ae))}vi(D,V>h?h:V);break t}!de||ae.h&&pe<we?(de=0,D.a=ae.h?5:3):D.$=pe,h=de}else h=mi(D,D.V,D.Ba,D.c,D.i,h,Ws);if(!h){P=0;break e}}b+P>=I&&(f.Cc=1),P=1}if(!P)return null;if(f.Cc&&((P=f.ga)!=null&&(P.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+b*L}function Kt(f,h,b,P,L,I){for(;0<L--;){var D,B=f,V=h+(b?1:0),K=f,ae=h+(b?0:3);for(D=0;D<P;++D){var ve=K[ae+4*D];ve!=255&&(ve*=32897,B[V+4*D+0]=B[V+4*D+0]*ve>>23,B[V+4*D+1]=B[V+4*D+1]*ve>>23,B[V+4*D+2]=B[V+4*D+2]*ve>>23)}h+=I}}function Nr(f,h,b,P,L){for(;0<P--;){var I;for(I=0;I<b;++I){var D=f[h+2*I+0],B=15&(K=f[h+2*I+1]),V=4369*B,K=(240&K|K>>4)*V>>16;f[h+2*I+0]=(240&D|D>>4)*V>>16&240|(15&D|D<<4)*V>>16>>4&15,f[h+2*I+1]=240&K|B}h+=L}}function Cr(f,h,b,P,L,I,D,B){var V,K,ae=255;for(K=0;K<L;++K){for(V=0;V<P;++V){var ve=f[h+V];I[D+4*V]=ve,ae&=ve}h+=b,D+=B}return ae!=255}function Wr(f,h,b,P,L){var I;for(I=0;I<L;++I)b[P+I]=f[h+I]>>8}function ei(){Vc=Kt,j_=Nr,I_=Cr,M_=Wr}function wn(f,h,b){M[f]=function(P,L,I,D,B,V,K,ae,ve,Q,le,de,_e,pe,we,Se,Ce){var ke,Xe=Ce-1>>1,Fe=B[V+0]|K[ae+0]<<16,wt=ve[Q+0]|le[de+0]<<16;t(P!=null);var He=3*Fe+wt+131074>>2;for(h(P[L+0],255&He,He>>16,_e,pe),I!=null&&(He=3*wt+Fe+131074>>2,h(I[D+0],255&He,He>>16,we,Se)),ke=1;ke<=Xe;++ke){var Pt=B[V+ke]|K[ae+ke]<<16,jr=ve[Q+ke]|le[de+ke]<<16,bt=Fe+Pt+wt+jr+524296,Ge=bt+2*(Pt+wt)>>3;He=Ge+Fe>>1,Fe=(bt=bt+2*(Fe+jr)>>3)+Pt>>1,h(P[L+2*ke-1],255&He,He>>16,_e,pe+(2*ke-1)*b),h(P[L+2*ke-0],255&Fe,Fe>>16,_e,pe+(2*ke-0)*b),I!=null&&(He=bt+wt>>1,Fe=Ge+jr>>1,h(I[D+2*ke-1],255&He,He>>16,we,Se+(2*ke-1)*b),h(I[D+2*ke+0],255&Fe,Fe>>16,we,Se+(2*ke+0)*b)),Fe=Pt,wt=jr}1&Ce||(He=3*Fe+wt+131074>>2,h(P[L+Ce-1],255&He,He>>16,_e,pe+(Ce-1)*b),I!=null&&(He=3*wt+Fe+131074>>2,h(I[D+Ce-1],255&He,He>>16,we,Se+(Ce-1)*b)))}}function Vf(){ii[Gf]=gL,ii[Kf]=G_,ii[V_]=yL,ii[Qf]=K_,ii[Yf]=Q_,ii[Hv]=Y_,ii[z_]=_L,ii[Gv]=G_,ii[Kv]=K_,ii[Jf]=Q_,ii[Qv]=Y_}function Xs(f){return f&-16384?0>f?0:255:f>>wL}function Qo(f,h){return Xs((19077*f>>8)+(26149*h>>8)-14234)}function za(f,h,b){return Xs((19077*f>>8)-(6419*h>>8)-(13320*b>>8)+8708)}function Yo(f,h){return Xs((19077*f>>8)+(33050*h>>8)-17685)}function Jo(f,h,b,P,L){P[L+0]=Qo(f,b),P[L+1]=za(f,h,b),P[L+2]=Yo(f,h)}function Xo(f,h,b,P,L){P[L+0]=Yo(f,h),P[L+1]=za(f,h,b),P[L+2]=Qo(f,b)}function Xr(f,h,b,P,L){var I=za(f,h,b);h=I<<3&224|Yo(f,h)>>3,P[L+0]=248&Qo(f,b)|I>>5,P[L+1]=h}function Zo(f,h,b,P,L){var I=240&Yo(f,h)|15;P[L+0]=240&Qo(f,b)|za(f,h,b)>>4,P[L+1]=I}function es(f,h,b,P,L){P[L+0]=255,Jo(f,h,b,P,L+1)}function Nc(f,h,b,P,L){Xo(f,h,b,P,L),P[L+3]=255}function Rc(f,h,b,P,L){Jo(f,h,b,P,L),P[L+3]=255}function cr(f,h){return 0>f?0:f>h?h:f}function pa(f,h,b){M[f]=function(P,L,I,D,B,V,K,ae,ve){for(var Q=ae+(-2&ve)*b;ae!=Q;)h(P[L+0],I[D+0],B[V+0],K,ae),h(P[L+1],I[D+0],B[V+0],K,ae+b),L+=2,++D,++V,ae+=2*b;1&ve&&h(P[L+0],I[D+0],B[V+0],K,ae)}}function Zs(f,h,b){return b==0?f==0?h==0?6:5:h==0?4:0:b}function zf(f,h,b,P,L){switch(f>>>30){case 3:is(h,b,P,L,0);break;case 2:ri(h,b,P,L);break;case 1:Mt(h,b,P,L)}}function ti(f,h){var b,P,L=h.M,I=h.Nb,D=f.oc,B=f.pc+40,V=f.oc,K=f.pc+584,ae=f.oc,ve=f.pc+600;for(b=0;16>b;++b)D[B+32*b-1]=129;for(b=0;8>b;++b)V[K+32*b-1]=129,ae[ve+32*b-1]=129;for(0<L?D[B-1-32]=V[K-1-32]=ae[ve-1-32]=129:(i(D,B-32-1,127,21),i(V,K-32-1,127,9),i(ae,ve-32-1,127,9)),P=0;P<f.za;++P){var Q=h.ya[h.aa+P];if(0<P){for(b=-1;16>b;++b)n(D,B+32*b-4,D,B+32*b+12,4);for(b=-1;8>b;++b)n(V,K+32*b-4,V,K+32*b+4,4),n(ae,ve+32*b-4,ae,ve+32*b+4,4)}var le=f.Gd,de=f.Hd+P,_e=Q.ad,pe=Q.Hc;if(0<L&&(n(D,B-32,le[de].y,0,16),n(V,K-32,le[de].f,0,8),n(ae,ve-32,le[de].ea,0,8)),Q.Za){var we=D,Se=B-32+16;for(0<L&&(P>=f.za-1?i(we,Se,le[de].y[15],4):n(we,Se,le[de+1].y,0,4)),b=0;4>b;b++)we[Se+128+b]=we[Se+256+b]=we[Se+384+b]=we[Se+0+b];for(b=0;16>b;++b,pe<<=2)we=D,Se=B+X_[b],yi[Q.Ob[b]](we,Se),zf(pe,_e,16*+b,we,Se)}else if(we=Zs(P,L,Q.Ob[0]),Ja[we](D,B),pe!=0)for(b=0;16>b;++b,pe<<=2)zf(pe,_e,16*+b,D,B+X_[b]);for(b=Q.Gc,we=Zs(P,L,Q.Dd),ga[we](V,K),ga[we](ae,ve),pe=_e,we=V,Se=K,255&(Q=0|b)&&(170&Q?Vi(pe,256,we,Se):qt(pe,256,we,Se)),Q=ae,pe=ve,255&(b>>=8)&&(170&b?Vi(_e,320,Q,pe):qt(_e,320,Q,pe)),L<f.Ub-1&&(n(le[de].y,0,D,B+480,16),n(le[de].f,0,V,K+224,8),n(le[de].ea,0,ae,ve+224,8)),b=8*I*f.B,le=f.sa,de=f.ta+16*P+16*I*f.R,_e=f.qa,Q=f.ra+8*P+b,pe=f.Ha,we=f.Ia+8*P+b,b=0;16>b;++b)n(le,de+b*f.R,D,B+32*b,16);for(b=0;8>b;++b)n(_e,Q+b*f.B,V,K+32*b,8),n(pe,we+b*f.B,ae,ve+32*b,8)}}function ts(f,h,b,P,L,I,D,B,V){var K=[0],ae=[0],ve=0,Q=V!=null?V.kd:0,le=V??new xe;if(f==null||12>b)return 7;le.data=f,le.w=h,le.ha=b,h=[h],b=[b],le.gb=[le.gb];e:{var de=h,_e=b,pe=le.gb;if(t(f!=null),t(_e!=null),t(pe!=null),pe[0]=0,12<=_e[0]&&!e(f,de[0],"RIFF")){if(e(f,de[0]+8,"WEBP")){pe=3;break e}var we=re(f,de[0]+4);if(12>we||4294967286<we){pe=3;break e}if(Q&&we>_e[0]-8){pe=7;break e}pe[0]=we,de[0]+=12,_e[0]-=12}pe=0}if(pe!=0)return pe;for(we=0<le.gb[0],b=b[0];;){e:{var Se=f;_e=h,pe=b;var Ce=K,ke=ae,Xe=de=[0];if((He=ve=[ve])[0]=0,8>pe[0])pe=7;else{if(!e(Se,_e[0],"VP8X")){if(re(Se,_e[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var Fe=re(Se,_e[0]+8),wt=1+Oe(Se,_e[0]+12);if(2147483648<=wt*(Se=1+Oe(Se,_e[0]+15))){pe=3;break e}Xe!=null&&(Xe[0]=Fe),Ce!=null&&(Ce[0]=wt),ke!=null&&(ke[0]=Se),_e[0]+=18,pe[0]-=18,He[0]=1}pe=0}}if(ve=ve[0],de=de[0],pe!=0)return pe;if(_e=!!(2&de),!we&&ve)return 3;if(I!=null&&(I[0]=!!(16&de)),D!=null&&(D[0]=_e),B!=null&&(B[0]=0),D=K[0],de=ae[0],ve&&_e&&V==null){pe=0;break}if(4>b){pe=7;break}if(we&&ve||!we&&!ve&&!e(f,h[0],"ALPH")){b=[b],le.na=[le.na],le.P=[le.P],le.Sa=[le.Sa];e:{Fe=f,pe=h,we=b;var He=le.gb;Ce=le.na,ke=le.P,Xe=le.Sa,wt=22,t(Fe!=null),t(we!=null),Se=pe[0];var Pt=we[0];for(t(Ce!=null),t(Xe!=null),Ce[0]=null,ke[0]=null,Xe[0]=0;;){if(pe[0]=Se,we[0]=Pt,8>Pt){pe=7;break e}var jr=re(Fe,Se+4);if(4294967286<jr){pe=3;break e}var bt=8+jr+1&-2;if(wt+=bt,0<He&&wt>He){pe=3;break e}if(!e(Fe,Se,"VP8 ")||!e(Fe,Se,"VP8L")){pe=0;break e}if(Pt[0]<bt){pe=7;break e}e(Fe,Se,"ALPH")||(Ce[0]=Fe,ke[0]=Se+8,Xe[0]=jr),Se+=bt,Pt-=bt}}if(b=b[0],le.na=le.na[0],le.P=le.P[0],le.Sa=le.Sa[0],pe!=0)break}b=[b],le.Ja=[le.Ja],le.xa=[le.xa];e:if(He=f,pe=h,we=b,Ce=le.gb[0],ke=le.Ja,Xe=le.xa,Fe=pe[0],Se=!e(He,Fe,"VP8 "),wt=!e(He,Fe,"VP8L"),t(He!=null),t(we!=null),t(ke!=null),t(Xe!=null),8>we[0])pe=7;else{if(Se||wt){if(He=re(He,Fe+4),12<=Ce&&He>Ce-12){pe=3;break e}if(Q&&He>we[0]-8){pe=7;break e}ke[0]=He,pe[0]+=8,we[0]-=8,Xe[0]=wt}else Xe[0]=5<=we[0]&&He[Fe+0]==47&&!(He[Fe+4]>>5),ke[0]=we[0];pe=0}if(b=b[0],le.Ja=le.Ja[0],le.xa=le.xa[0],h=h[0],pe!=0)break;if(4294967286<le.Ja)return 3;if(B==null||_e||(B[0]=le.xa?2:1),D=[D],de=[de],le.xa){if(5>b){pe=7;break}B=D,Q=de,_e=I,f==null||5>b?f=0:5<=b&&f[h+0]==47&&!(f[h+4]>>5)?(we=[0],He=[0],Ce=[0],ie(ke=new W,f,h,b),la(ke,we,He,Ce)?(B!=null&&(B[0]=we[0]),Q!=null&&(Q[0]=He[0]),_e!=null&&(_e[0]=Ce[0]),f=1):f=0):f=0}else{if(10>b){pe=7;break}B=de,f==null||10>b||!Rf(f,h+3,b-3)?f=0:(Q=f[h+0]|f[h+1]<<8|f[h+2]<<16,_e=16383&(f[h+7]<<8|f[h+6]),f=16383&(f[h+9]<<8|f[h+8]),1&Q||3<(Q>>1&7)||!(Q>>4&1)||Q>>5>=le.Ja||!_e||!f?f=0:(D&&(D[0]=_e),B&&(B[0]=f),f=1))}if(!f||(D=D[0],de=de[0],ve&&(K[0]!=D||ae[0]!=de)))return 3;V!=null&&(V[0]=le,V.offset=h-V.w,t(4294967286>h-V.w),t(V.offset==V.ha-b));break}return pe==0||pe==7&&ve&&V==null?(I!=null&&(I[0]|=le.na!=null&&0<le.na.length),P!=null&&(P[0]=D),L!=null&&(L[0]=de),0):pe}function jc(f,h,b){var P=h.width,L=h.height,I=0,D=0,B=P,V=L;if(h.Da=f!=null&&0<f.Da,h.Da&&(B=f.cd,V=f.bd,I=f.v,D=f.j,11>b||(I&=-2,D&=-2),0>I||0>D||0>=B||0>=V||I+B>P||D+V>L))return 0;if(h.v=I,h.j=D,h.va=I+B,h.o=D+V,h.U=B,h.T=V,h.da=f!=null&&0<f.da,h.da){if(!$e(B,V,b=[f.ib],I=[f.hb]))return 0;h.ib=b[0],h.hb=I[0]}return h.ob=f!=null&&f.ob,h.Kb=f==null||!f.Sd,h.da&&(h.ob=h.ib<3*P/4&&h.hb<3*L/4,h.Kb=0),1}function Ic(f){if(f==null)return 2;if(11>f.S){var h=f.f.RGBA;h.fb+=(f.height-1)*h.A,h.A=-h.A}else h=f.f.kb,f=f.height,h.O+=(f-1)*h.fa,h.fa=-h.fa,h.N+=(f-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(f-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(f-1)*h.lb,h.lb=-h.lb);return 0}function Wa(f,h,b,P){if(P==null||0>=f||0>=h)return 2;if(b!=null){if(b.Da){var L=b.cd,I=b.bd,D=-2&b.v,B=-2&b.j;if(0>D||0>B||0>=L||0>=I||D+L>f||B+I>h)return 2;f=L,h=I}if(b.da){if(!$e(f,h,L=[b.ib],I=[b.hb]))return 2;f=L[0],h=I[0]}}P.width=f,P.height=h;e:{var V=P.width,K=P.height;if(f=P.S,0>=V||0>=K||!(f>=Gf&&13>f))f=2;else{if(0>=P.Rd&&P.sd==null){D=I=L=h=0;var ae=(B=V*Z_[f])*K;if(11>f||(I=(K+1)/2*(h=(V+1)/2),f==12&&(D=(L=V)*K)),(K=a(ae+2*I+D))==null){f=1;break e}P.sd=K,11>f?((V=P.f.RGBA).eb=K,V.fb=0,V.A=B,V.size=ae):((V=P.f.kb).y=K,V.O=0,V.fa=B,V.Fd=ae,V.f=K,V.N=0+ae,V.Ab=h,V.Cd=I,V.ea=K,V.W=0+ae+I,V.Db=h,V.Ed=I,f==12&&(V.F=K,V.J=0+ae+2*I),V.Tc=D,V.lb=L)}if(h=1,L=P.S,I=P.width,D=P.height,L>=Gf&&13>L)if(11>L)f=P.f.RGBA,h&=(B=Math.abs(f.A))*(D-1)+I<=f.size,h&=B>=I*Z_[L],h&=f.eb!=null;else{f=P.f.kb,B=(I+1)/2,ae=(D+1)/2,V=Math.abs(f.fa),K=Math.abs(f.Ab);var ve=Math.abs(f.Db),Q=Math.abs(f.lb),le=Q*(D-1)+I;h&=V*(D-1)+I<=f.Fd,h&=K*(ae-1)+B<=f.Cd,h=(h&=ve*(ae-1)+B<=f.Ed)&V>=I&K>=B&ve>=B,h&=f.y!=null,h&=f.f!=null,h&=f.ea!=null,L==12&&(h&=Q>=I,h&=le<=f.Tc,h&=f.F!=null)}else h=0;f=h?0:2}}return f!=0||b!=null&&b.fd&&(f=Ic(P)),f}var rs=64,Rn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jn=24,qa=32,va=8,Ha=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ne("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(f){return f},M.Predictor2=function(f,h,b){return h[b+0]},M.Predictor3=function(f,h,b){return h[b+1]},M.Predictor4=function(f,h,b){return h[b-1]},M.Predictor5=function(f,h,b){return Qe(Qe(f,h[b+1]),h[b+0])},M.Predictor6=function(f,h,b){return Qe(f,h[b-1])},M.Predictor7=function(f,h,b){return Qe(f,h[b+0])},M.Predictor8=function(f,h,b){return Qe(h[b-1],h[b+0])},M.Predictor9=function(f,h,b){return Qe(h[b+0],h[b+1])},M.Predictor10=function(f,h,b){return Qe(Qe(f,h[b-1]),Qe(h[b+0],h[b+1]))},M.Predictor11=function(f,h,b){var P=h[b+0];return 0>=dt(P>>24&255,f>>24&255,(h=h[b-1])>>24&255)+dt(P>>16&255,f>>16&255,h>>16&255)+dt(P>>8&255,f>>8&255,h>>8&255)+dt(255&P,255&f,255&h)?P:f},M.Predictor12=function(f,h,b){var P=h[b+0];return(xt((f>>24&255)+(P>>24&255)-((h=h[b-1])>>24&255))<<24|xt((f>>16&255)+(P>>16&255)-(h>>16&255))<<16|xt((f>>8&255)+(P>>8&255)-(h>>8&255))<<8|xt((255&f)+(255&P)-(255&h)))>>>0},M.Predictor13=function(f,h,b){var P=h[b-1];return(ut((f=Qe(f,h[b+0]))>>24&255,P>>24&255)<<24|ut(f>>16&255,P>>16&255)<<16|ut(f>>8&255,P>>8&255)<<8|ut(255&f,255&P))>>>0};var Mc=M.PredictorAdd0;M.PredictorAdd1=Ot,Ne("Predictor2","PredictorAdd2"),Ne("Predictor3","PredictorAdd3"),Ne("Predictor4","PredictorAdd4"),Ne("Predictor5","PredictorAdd5"),Ne("Predictor6","PredictorAdd6"),Ne("Predictor7","PredictorAdd7"),Ne("Predictor8","PredictorAdd8"),Ne("Predictor9","PredictorAdd9"),Ne("Predictor10","PredictorAdd10"),Ne("Predictor11","PredictorAdd11"),Ne("Predictor12","PredictorAdd12"),Ne("Predictor13","PredictorAdd13");var el=M.PredictorAdd2;Je("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Je("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var yr,Wf=M.ColorIndexInverseTransform,Ui=M.MapARGB,$i=M.VP8LColorIndexInverseTransformAlpha,Dc=M.MapAlpha,Fc=M.VP8LPredictorsAdd=[];Fc.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var Bc,Uc,Ga,Ka,Qa,ns,Ya,is,ri,Vi,Mt,qt,_r,Rr,ma,$c,tl,qf,C_,L_,O_,A_,N_,R_,Vc,j_,I_,M_,D_=a(511),F_=a(2041),B_=a(225),U_=a(767),$_=0,qv=F_,Hf=B_,In=U_,ni=D_,Gf=0,Kf=1,V_=2,Qf=3,Yf=4,Hv=5,z_=6,Gv=7,Kv=8,Jf=9,Qv=10,nL=[2,3,7],iL=[3,3,11],W_=[280,256,256,256,40],aL=[0,1,1,1,0],oL=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sL=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],lL=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],cL=8,Yv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Jv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],zc=null,uL=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fL=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],q_=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dL=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hL=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pL=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vL=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ja=[],yi=[],ga=[],mL=1,H_=2,Xa=[],ii=[];wn("UpsampleRgbLinePair",Jo,3),wn("UpsampleBgrLinePair",Xo,3),wn("UpsampleRgbaLinePair",Rc,4),wn("UpsampleBgraLinePair",Nc,4),wn("UpsampleArgbLinePair",es,4),wn("UpsampleRgba4444LinePair",Zo,2),wn("UpsampleRgb565LinePair",Xr,2);var gL=M.UpsampleRgbLinePair,yL=M.UpsampleBgrLinePair,G_=M.UpsampleRgbaLinePair,K_=M.UpsampleBgraLinePair,Q_=M.UpsampleArgbLinePair,Y_=M.UpsampleRgba4444LinePair,_L=M.UpsampleRgb565LinePair,Xf=16,Zf=1<<Xf-1,Wc=-227,Xv=482,wL=6,J_=0,bL=a(256),xL=a(256),SL=a(256),kL=a(256),PL=a(Xv-Wc),TL=a(Xv-Wc);pa("YuvToRgbRow",Jo,3),pa("YuvToBgrRow",Xo,3),pa("YuvToRgbaRow",Rc,4),pa("YuvToBgraRow",Nc,4),pa("YuvToArgbRow",es,4),pa("YuvToRgba4444Row",Zo,2),pa("YuvToRgb565Row",Xr,2);var X_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ed=[0,2,8],EL=[8,7,6,4,4,2,2,2,1,1,1,1],CL=1;this.WebPDecodeRGBA=function(f,h,b,P,L){var I=Kf,D=new ce,B=new Wt;D.ba=B,B.S=I,B.width=[B.width],B.height=[B.height];var V=B.width,K=B.height,ae=new pt;if(ae==null||f==null)var ve=2;else t(ae!=null),ve=ts(f,h,b,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(ve!=0?V=0:(V!=null&&(V[0]=ae.width[0]),K!=null&&(K[0]=ae.height[0]),V=1),V){B.width=B.width[0],B.height=B.height[0],P!=null&&(P[0]=B.width),L!=null&&(L[0]=B.height);e:{if(P=new Gs,(L=new xe).data=f,L.w=h,L.ha=b,L.kd=1,h=[0],t(L!=null),((f=ts(L.data,L.w,L.ha,null,null,null,h,null,L))==0||f==7)&&h[0]&&(f=4),(h=f)==0){if(t(D!=null),P.data=L.data,P.w=L.w+L.offset,P.ha=L.ha-L.offset,P.put=at,P.ac=Mi,P.bc=sa,P.ma=D,L.xa){if((f=Fo())==null){D=1;break e}if(function(Q,le){var de=[0],_e=[0],pe=[0];t:for(;;){if(Q==null)return 0;if(le==null)return Q.a=2,0;if(Q.l=le,Q.a=0,ie(Q.m,le.data,le.w,le.ha),!la(Q.m,de,_e,pe)){Q.a=3;break t}if(Q.xb=H_,le.width=de[0],le.height=_e[0],!Fi(de[0],_e[0],1,Q,null))break t;return 1}return t(Q.a!=0),0}(f,P)){if(P=(h=Wa(P.width,P.height,D.Oa,D.ba))==0){t:{P=f;r:for(;;){if(P==null){P=0;break t}if(t(P.s.yc!=null),t(P.s.Ya!=null),t(0<P.s.Wb),t((b=P.l)!=null),t((L=b.ma)!=null),P.xb!=0){if(P.ca=L.ba,P.tb=L.tb,t(P.ca!=null),!jc(L.Oa,b,Qf)){P.a=2;break r}if(!Bo(P,b.width)||b.da)break r;if((b.da||je(P.ca.S))&&ei(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&ei()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!z(P.s.vb,P.s.Wa.Xa)){P.a=1;break r}P.xb=0}if(!mi(P,P.V,P.Ba,P.c,P.i,b.o,Ua))break r;L.Dc=P.Ma,P=1;break t}t(P.a!=0),P=0}P=!P}P&&(h=f.a)}else h=f.a}else{if((f=new Ov)==null){D=1;break e}if(f.Fa=L.na,f.P=L.P,f.qc=L.Sa,jf(f,P)){if((h=Wa(P.width,P.height,D.Oa,D.ba))==0){if(f.Aa=0,b=D.Oa,t((L=f)!=null),b!=null){if(0<(V=0>(V=b.Md)?0:100<V?255:255*V/100)){for(K=ae=0;4>K;++K)12>(ve=L.pb[K]).lc&&(ve.ia=V*EL[0>ve.lc?0:ve.lc]>>3),ae|=ve.ia;ae&&(alert("todo:VP8InitRandom"),L.ia=1)}L.Ga=b.Id,100<L.Ga?L.Ga=100:0>L.Ga&&(L.Ga=0)}(function(Q,le){if(Q==null)return 0;if(le==null)return Tr(Q,2,"NULL VP8Io parameter in VP8Decode().");if(!Q.cb&&!jf(Q,le))return 0;if(t(Q.cb),le.ac==null||le.ac(le)){le.ob&&(Q.L=0);var de=ed[Q.L];if(Q.L==2?(Q.yb=0,Q.zb=0):(Q.yb=le.v-de>>4,Q.zb=le.j-de>>4,0>Q.yb&&(Q.yb=0),0>Q.zb&&(Q.zb=0)),Q.Va=le.o+15+de>>4,Q.Hb=le.va+15+de>>4,Q.Hb>Q.za&&(Q.Hb=Q.za),Q.Va>Q.Ub&&(Q.Va=Q.Ub),0<Q.L){var _e=Q.ed;for(de=0;4>de;++de){var pe;if(Q.Qa.Cb){var we=Q.Qa.Lb[de];Q.Qa.Fb||(we+=_e.Tb)}else we=_e.Tb;for(pe=0;1>=pe;++pe){var Se=Q.gd[de][pe],Ce=we;if(_e.Pc&&(Ce+=_e.vd[0],pe&&(Ce+=_e.od[0])),0<(Ce=0>Ce?0:63<Ce?63:Ce)){var ke=Ce;0<_e.wb&&(ke=4<_e.wb?ke>>2:ke>>1)>9-_e.wb&&(ke=9-_e.wb),1>ke&&(ke=1),Se.dd=ke,Se.tc=2*Ce+ke,Se.ld=40<=Ce?2:15<=Ce?1:0}else Se.tc=0;Se.La=pe}}}de=0}else Tr(Q,6,"Frame setup failed"),de=Q.a;if(de=de==0){if(de){Q.$c=0,0<Q.Aa||(Q.Ic=CL);t:{de=Q.Ic,_e=4*(ke=Q.za);var Xe=32*ke,Fe=ke+1,wt=0<Q.L?ke*(0<Q.Aa?2:1):0,He=(Q.Aa==2?2:1)*ke;if((Se=_e+832+(pe=3*(16*de+ed[Q.L])/2*Xe)+(we=Q.Fa!=null&&0<Q.Fa.length?Q.Kc.c*Q.Kc.i:0))!=Se)de=0;else{if(Se>Q.Vb){if(Q.Vb=0,Q.Ec=a(Se),Q.Fc=0,Q.Ec==null){de=Tr(Q,1,"no memory during frame initialization.");break t}Q.Vb=Se}Se=Q.Ec,Ce=Q.Fc,Q.Ac=Se,Q.Bc=Ce,Ce+=_e,Q.Gd=o(Xe,Af),Q.Hd=0,Q.rb=o(Fe+1,bc),Q.sb=1,Q.wa=wt?o(wt,Zn):null,Q.Y=0,Q.D.Nb=0,Q.D.wa=Q.wa,Q.D.Y=Q.Y,0<Q.Aa&&(Q.D.Y+=ke),t(!0),Q.oc=Se,Q.pc=Ce,Ce+=832,Q.ya=o(He,xc),Q.aa=0,Q.D.ya=Q.ya,Q.D.aa=Q.aa,Q.Aa==2&&(Q.D.aa+=ke),Q.R=16*ke,Q.B=8*ke,ke=(Xe=ed[Q.L])*Q.R,Xe=Xe/2*Q.B,Q.sa=Se,Q.ta=Ce+ke,Q.qa=Q.sa,Q.ra=Q.ta+16*de*Q.R+Xe,Q.Ha=Q.qa,Q.Ia=Q.ra+8*de*Q.B+Xe,Q.$c=0,Ce+=pe,Q.mb=we?Se:null,Q.nb=we?Ce:null,t(Ce+we<=Q.Fc+Q.Vb),Uo(Q),i(Q.Ac,Q.Bc,0,_e),de=1}}if(de){if(le.ka=0,le.y=Q.sa,le.O=Q.ta,le.f=Q.qa,le.N=Q.ra,le.ea=Q.Ha,le.Vd=Q.Ia,le.fa=Q.R,le.Rc=Q.B,le.F=null,le.J=0,!$_){for(de=-255;255>=de;++de)D_[255+de]=0>de?-de:de;for(de=-1020;1020>=de;++de)F_[1020+de]=-128>de?-128:127<de?127:de;for(de=-112;112>=de;++de)B_[112+de]=-16>de?-16:15<de?15:de;for(de=-255;510>=de;++de)U_[255+de]=0>de?0:255<de?255:de;$_=1}Ya=Mf,is=Nv,Vi=Rv,Mt=Bi,qt=If,ri=Av,_r=Bf,Rr=Uf,ma=g,$c=C,tl=Ko,qf=$f,C_=Y,L_=te,O_=Ac,A_=Go,N_=Df,R_=Ff,yi[0]=Uv,yi[1]=kc,yi[2]=Fv,yi[3]=Bv,yi[4]=$v,yi[5]=fa,yi[6]=ua,yi[7]=Vv,yi[8]=Ks,yi[9]=zv,Ja[0]=Va,Ja[1]=Iv,Ja[2]=Mv,Ja[3]=Pc,Ja[4]=Dv,Ja[5]=zo,Ja[6]=Tc,ga[0]=Ys,ga[1]=jv,ga[2]=Ec,ga[3]=Wo,ga[4]=Cc,ga[5]=Wv,ga[6]=Lc,de=1}else de=0}de&&(de=function(Pt,jr){for(Pt.M=0;Pt.M<Pt.Va;++Pt.M){var bt,Ge=Pt.Jc[Pt.M&Pt.Xb],Ae=Pt.m,wr=Pt;for(bt=0;bt<wr.za;++bt){var yt=Ae,Et=wr,Jt=Et.Ac,qr=Et.Bc+4*bt,un=Et.zc,ur=Et.ya[Et.aa+bt];if(Et.Qa.Bb?ur.$b=be(yt,Et.Pa.jb[0])?2+be(yt,Et.Pa.jb[2]):be(yt,Et.Pa.jb[1]):ur.$b=0,Et.kc&&(ur.Ad=be(yt,Et.Bd)),ur.Za=!be(yt,145)+0,ur.Za){var Zr=ur.Ob,fn=0;for(Et=0;4>Et;++Et){var Ir,Ct=un[0+Et];for(Ir=0;4>Ir;++Ir){Ct=hL[Jt[qr+Ir]][Ct];for(var Ft=q_[be(yt,Ct[0])];0<Ft;)Ft=q_[2*Ft+be(yt,Ct[Ft])];Ct=-Ft,Jt[qr+Ir]=Ct}n(Zr,fn,Jt,qr,4),fn+=4,un[0+Et]=Ct}}else Ct=be(yt,156)?be(yt,128)?1:3:be(yt,163)?2:0,ur.Ob[0]=Ct,i(Jt,qr,Ct,4),i(un,0,Ct,4);ur.Dd=be(yt,142)?be(yt,114)?be(yt,183)?1:3:2:0}if(wr.m.Ka)return Tr(Pt,7,"Premature end-of-partition0 encountered.");for(;Pt.ja<Pt.za;++Pt.ja){if(wr=Ge,yt=(Ae=Pt).rb[Ae.sb-1],Jt=Ae.rb[Ae.sb+Ae.ja],bt=Ae.ya[Ae.aa+Ae.ja],qr=Ae.kc?bt.Ad:0)yt.la=Jt.la=0,bt.Za||(yt.Na=Jt.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var fr,Bt;if(yt=Jt,Jt=wr,qr=Ae.Pa.Xc,un=Ae.ya[Ae.aa+Ae.ja],ur=Ae.pb[un.$b],Et=un.ad,Zr=0,fn=Ae.rb[Ae.sb-1],Ct=Ir=0,i(Et,Zr,0,384),un.Za)var Hr=0,_i=qr[3];else{Ft=a(16);var br=yt.Na+fn.Na;if(br=zc(Jt,qr[1],br,ur.Eb,0,Ft,0),yt.Na=fn.Na=(0<br)+0,1<br)Ya(Ft,0,Et,Zr);else{var bn=Ft[0]+3>>3;for(Ft=0;256>Ft;Ft+=16)Et[Zr+Ft]=bn}Hr=1,_i=qr[0]}var Ht=15&yt.la,Mr=15&fn.la;for(Ft=0;4>Ft;++Ft){var Mn=1&Mr;for(bn=Bt=0;4>bn;++bn)Ht=Ht>>1|(Mn=(br=zc(Jt,_i,br=Mn+(1&Ht),ur.Sc,Hr,Et,Zr))>Hr)<<7,Bt=Bt<<2|(3<br?3:1<br?2:Et[Zr+0]!=0),Zr+=16;Ht>>=4,Mr=Mr>>1|Mn<<7,Ir=(Ir<<8|Bt)>>>0}for(_i=Ht,Hr=Mr>>4,fr=0;4>fr;fr+=2){for(Bt=0,Ht=yt.la>>4+fr,Mr=fn.la>>4+fr,Ft=0;2>Ft;++Ft){for(Mn=1&Mr,bn=0;2>bn;++bn)br=Mn+(1&Ht),Ht=Ht>>1|(Mn=0<(br=zc(Jt,qr[2],br,ur.Qc,0,Et,Zr)))<<3,Bt=Bt<<2|(3<br?3:1<br?2:Et[Zr+0]!=0),Zr+=16;Ht>>=2,Mr=Mr>>1|Mn<<5}Ct|=Bt<<4*fr,_i|=Ht<<4<<fr,Hr|=(240&Mr)<<fr}yt.la=_i,fn.la=Hr,un.Hc=Ir,un.Gc=Ct,un.ia=43690&Ct?0:ur.ia,qr=!(Ir|Ct)}if(0<Ae.L&&(Ae.wa[Ae.Y+Ae.ja]=Ae.gd[bt.$b][bt.Za],Ae.wa[Ae.Y+Ae.ja].La|=!qr),wr.Ka)return Tr(Pt,7,"Premature end-of-file encountered.")}if(Uo(Pt),Ae=jr,wr=1,bt=(Ge=Pt).D,yt=0<Ge.L&&Ge.M>=Ge.zb&&Ge.M<=Ge.Va,Ge.Aa==0)t:{if(bt.M=Ge.M,bt.uc=yt,ti(Ge,bt),wr=1,bt=(Bt=Ge.D).Nb,yt=(Ct=ed[Ge.L])*Ge.R,Jt=Ct/2*Ge.B,Ft=16*bt*Ge.R,bn=8*bt*Ge.B,qr=Ge.sa,un=Ge.ta-yt+Ft,ur=Ge.qa,Et=Ge.ra-Jt+bn,Zr=Ge.Ha,fn=Ge.Ia-Jt+bn,Mr=(Ht=Bt.M)==0,Ir=Ht>=Ge.Va-1,Ge.Aa==2&&ti(Ge,Bt),Bt.uc)for(Mn=(br=Ge).D.M,t(br.D.uc),Bt=br.yb;Bt<br.Hb;++Bt){Hr=Bt,_i=Mn;var dn=(Dn=(Gr=br).D).Nb;fr=Gr.R;var Dn=Dn.wa[Dn.Y+Hr],Fn=Gr.sa,xn=Gr.ta+16*dn*fr+16*Hr,Bn=Dn.dd,Qt=Dn.tc;if(Qt!=0)if(t(3<=Qt),Gr.L==1)0<Hr&&A_(Fn,xn,fr,Qt+4),Dn.La&&R_(Fn,xn,fr,Qt),0<_i&&O_(Fn,xn,fr,Qt+4),Dn.La&&N_(Fn,xn,fr,Qt);else{var Un=Gr.B,wi=Gr.qa,as=Gr.ra+8*dn*Un+8*Hr,ya=Gr.Ha,Gr=Gr.Ia+8*dn*Un+8*Hr;dn=Dn.ld,0<Hr&&(Rr(Fn,xn,fr,Qt+4,Bn,dn),$c(wi,as,ya,Gr,Un,Qt+4,Bn,dn)),Dn.La&&(qf(Fn,xn,fr,Qt,Bn,dn),L_(wi,as,ya,Gr,Un,Qt,Bn,dn)),0<_i&&(_r(Fn,xn,fr,Qt+4,Bn,dn),ma(wi,as,ya,Gr,Un,Qt+4,Bn,dn)),Dn.La&&(tl(Fn,xn,fr,Qt,Bn,dn),C_(wi,as,ya,Gr,Un,Qt,Bn,dn))}}if(Ge.ia&&alert("todo:DitherRow"),Ae.put!=null){if(Bt=16*Ht,Ht=16*(Ht+1),Mr?(Ae.y=Ge.sa,Ae.O=Ge.ta+Ft,Ae.f=Ge.qa,Ae.N=Ge.ra+bn,Ae.ea=Ge.Ha,Ae.W=Ge.Ia+bn):(Bt-=Ct,Ae.y=qr,Ae.O=un,Ae.f=ur,Ae.N=Et,Ae.ea=Zr,Ae.W=fn),Ir||(Ht-=Ct),Ht>Ae.o&&(Ht=Ae.o),Ae.F=null,Ae.J=null,Ge.Fa!=null&&0<Ge.Fa.length&&Bt<Ht&&(Ae.J=Er(Ge,Ae,Bt,Ht-Bt),Ae.F=Ge.mb,Ae.F==null&&Ae.F.length==0)){wr=Tr(Ge,3,"Could not decode alpha data.");break t}Bt<Ae.j&&(Ct=Ae.j-Bt,Bt=Ae.j,t(!(1&Ct)),Ae.O+=Ge.R*Ct,Ae.N+=Ge.B*(Ct>>1),Ae.W+=Ge.B*(Ct>>1),Ae.F!=null&&(Ae.J+=Ae.width*Ct)),Bt<Ht&&(Ae.O+=Ae.v,Ae.N+=Ae.v>>1,Ae.W+=Ae.v>>1,Ae.F!=null&&(Ae.J+=Ae.v),Ae.ka=Bt-Ae.j,Ae.U=Ae.va-Ae.v,Ae.T=Ht-Bt,wr=Ae.put(Ae))}bt+1!=Ge.Ic||Ir||(n(Ge.sa,Ge.ta-yt,qr,un+16*Ge.R,yt),n(Ge.qa,Ge.ra-Jt,ur,Et+8*Ge.B,Jt),n(Ge.Ha,Ge.Ia-Jt,Zr,fn+8*Ge.B,Jt))}if(!wr)return Tr(Pt,6,"Output aborted.")}return 1}(Q,le)),le.bc!=null&&le.bc(le),de&=1}return de?(Q.cb=0,de):0})(f,P)||(h=f.a)}}else h=f.a}h==0&&D.Oa!=null&&D.Oa.fd&&(h=Ic(D.ba))}D=h}I=D!=0?null:11>I?B.f.RGBA.eb:B.f.kb.y}else I=null;return I};var Z_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(M,J){for(var O="",N=0;N<4;N++)O+=String.fromCharCode(M[J++]);return O}function u(M,J){return M[J+0]|M[J+1]<<8}function d(M,J){return(M[J+0]|M[J+1]<<8|M[J+2]<<16)>>>0}function v(M,J){return(M[J+0]|M[J+1]<<8|M[J+2]<<16|M[J+3]<<24)>>>0}new c;var p=[0],y=[0],_=[],S=new c,w=r,x=function(M,J){var O={},N=0,q=!1,j=0,Z=0;if(O.frames=[],!function(E,W){for(var G=0;G<4;G++)if(E[W+G]!="RIFF".charCodeAt(G))return!0;return!1}(M,J)){for(v(M,J+=4),J+=8;J<M.length;){var X=l(M,J),se=v(M,J+=4);J+=4;var H=se+(1&se);switch(X){case"VP8 ":case"VP8L":O.frames[N]===void 0&&(O.frames[N]={}),(ne=O.frames[N]).src_off=q?Z:J-8,ne.src_size=j+se+8,N++,q&&(q=!1,j=0,Z=0);break;case"VP8X":(ne=O.header={}).feature_flags=M[J];var ie=J+4;ne.canvas_width=1+d(M,ie),ie+=3,ne.canvas_height=1+d(M,ie),ie+=3;break;case"ALPH":q=!0,j=H+8,Z=J-8;break;case"ANIM":(ne=O.header).bgcolor=v(M,J),ie=J+4,ne.loop_count=u(M,ie),ie+=2;break;case"ANMF":var fe,ne;(ne=O.frames[N]={}).offset_x=2*d(M,J),J+=3,ne.offset_y=2*d(M,J),J+=3,ne.width=1+d(M,J),J+=3,ne.height=1+d(M,J),J+=3,ne.duration=d(M,J),J+=3,fe=M[J++],ne.dispose=1&fe,ne.blend=fe>>1&1}X!="ANMF"&&(J+=H)}return O}}(w,0);x.response=w,x.rgbaoutput=!0,x.dataurl=!1;var k=x.header?x.header:null,T=x.frames?x.frames:null;if(k){k.loop_counter=k.loop_count,p=[k.canvas_height],y=[k.canvas_width];for(var R=0;R<T.length&&T[R].blend!=0;R++);}var U=T[0],$=S.WebPDecodeRGBA(w,U.src_off,U.src_size,y,p);U.rgba=$,U.imgwidth=y[0],U.imgheight=p[0];for(var F=0;F<y[0]*p[0]*4;F++)_[F]=$[F];return this.width=y,this.height=p,this.data=_,this}(function(r){var t,e,n,i,a,o,s,c,l,u=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new c,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new o,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new o,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var d=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=E;Object.defineProperty(this,"pdf",{get:function(){return W}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(re){G=!!re}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(re){ee=!!re}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(re){isNaN(re)||(oe=re)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(re){isNaN(re)||(ue=re)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(re){var z;typeof re=="number"?z=[re,re,re,re]:((z=new Array(4))[0]=re[0],z[1]=re.length>=2?re[1]:z[0],z[2]=re.length>=3?re[2]:z[0],z[3]=re.length>=4?re[3]:z[1]),l.margin=z}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(re){ye=re}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(re){me=re}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(re){be=re}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(re){re instanceof u&&(l=re)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(re){l.path=re}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(re){Te=re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(re){var z;z=v(re),this.ctx.fillStyle=z.style,this.ctx.isFillTransparent=z.a===0,this.ctx.fillOpacity=z.a,this.pdf.setFillColor(z.r,z.g,z.b,{a:z.a}),this.pdf.setTextColor(z.r,z.g,z.b,{a:z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(re){var z=v(re);this.ctx.strokeStyle=z.style,this.ctx.isStrokeTransparent=z.a===0,this.ctx.strokeOpacity=z.a,z.a===0?this.pdf.setDrawColor(255,255,255):(z.a,this.pdf.setDrawColor(z.r,z.g,z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(re){["butt","round","square"].indexOf(re)!==-1&&(this.ctx.lineCap=re,this.pdf.setLineCap(re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(re){isNaN(re)||(this.ctx.lineWidth=re,this.pdf.setLineWidth(re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(re){["bevel","round","miter"].indexOf(re)!==-1&&(this.ctx.lineJoin=re,this.pdf.setLineJoin(re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(re){isNaN(re)||(this.ctx.miterLimit=re,this.pdf.setMiterLimit(re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(re){this.ctx.textBaseline=re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(re){["right","end","center","left","start"].indexOf(re)!==-1&&(this.ctx.textAlign=re)}});var Re=null,Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(re){Re=null,Oe=re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(re){var z;if(this.ctx.font=re,(z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(re))!==null){var nt=z[1];z[2];var Ke=z[3],$e=z[4];z[5];var Ee=z[6],Ie=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(Ie==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:Ie==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var Ne=function(it){var Je,At,St=[],Ve=it.trim();if(Ve==="")return Vg;if(Ve in $x)return[$x[Ve]];for(;Ve!=="";){switch(At=null,Je=(Ve=zx(Ve)).charAt(0)){case'"':case"'":At=bee(Ve.substring(1),Je);break;default:At=xee(Ve)}if(At===null||(St.push(At[0]),(Ve=zx(At[1]))!==""&&Ve.charAt(0)!==","))return Vg;Ve=Ve.replace(/^,/,"")}return St}(Ee);if(this.fontFaces){var st=function(it,Je){if(Re===null){var At=function(St){var Ve=[];return Object.keys(St).forEach(function(ot){St[ot].forEach(function(Nt){var We=null;switch(Nt){case"bold":We={family:ot,weight:"bold"};break;case"italic":We={family:ot,style:"italic"};break;case"bolditalic":We={family:ot,weight:"bold",style:"italic"};break;case"":case"normal":We={family:ot}}We!==null&&(We.ref={name:ot,style:Nt},Ve.push(We))})}),Ve}(it.getFontList());Re=function(St){for(var Ve={},ot=0;ot<St.length;++ot){var Nt=$g(St[ot]),We=Nt.family,ht=Nt.stretch,je=Nt.style,vr=Nt.weight;Ve[We]=Ve[We]||{},Ve[We][ht]=Ve[We][ht]||{},Ve[We][ht][je]=Ve[We][ht][je]||{},Ve[We][ht][je][vr]=Nt}return Ve}(At.concat(Je))}return Re}(this.pdf,this.fontFaces),Qe=Ne.map(function(it){return{family:it,stretch:"normal",weight:Ke,style:nt}}),xt=function(it,Je,At){for(var St=(At=At||{}).defaultFontFamily||"times",Ve=Object.assign({},wee,At.genericFontFamilies||{}),ot=null,Nt=null,We=0;We<Je.length;++We)if(Ve[(ot=$g(Je[We])).family]&&(ot.family=Ve[ot.family]),it.hasOwnProperty(ot.family)){Nt=it[ot.family];break}if(!(Nt=Nt||it[St]))throw new Error("Could not find a font-family for the rule '"+Vx(ot)+"' and default family '"+St+"'.");if(Nt=function(ht,je){if(je[ht])return je[ht];var vr=Ly[ht],mr=vr<=Ly.normal?-1:1,Wt=Ux(je,XC,vr,mr);if(!Wt)throw new Error("Could not find a matching font-stretch value for "+ht);return Wt}(ot.stretch,Nt),Nt=function(ht,je){if(je[ht])return je[ht];for(var vr=JC[ht],mr=0;mr<vr.length;++mr)if(je[vr[mr]])return je[vr[mr]];throw new Error("Could not find a matching font-style for "+ht)}(ot.style,Nt),!(Nt=function(ht,je){if(je[ht])return je[ht];if(ht===400&&je[500])return je[500];if(ht===500&&je[400])return je[400];var vr=_ee[ht],mr=Ux(je,ZC,vr,ht<400?-1:1);if(!mr)throw new Error("Could not find a matching font-weight for value "+ht);return mr}(ot.weight,Nt)))throw new Error("Failed to resolve a font for the rule '"+Vx(ot)+"'.");return Nt}(st,Qe);this.pdf.setFont(xt.ref.name,xt.ref.style)}else{var ut="";(Ke==="bold"||parseInt(Ke,10)>=700||nt==="bold")&&(ut="bold"),nt==="italic"&&(ut+="italic"),ut.length===0&&(ut="normal");for(var dt="",Ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<Ne.length;lt++){if(this.pdf.internal.getFont(Ne[lt],ut,{noFallback:!0,disableWarning:!0})!==void 0){dt=Ne[lt];break}if(ut==="bolditalic"&&this.pdf.internal.getFont(Ne[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)dt=Ne[lt],ut="bold";else if(this.pdf.internal.getFont(Ne[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){dt=Ne[lt],ut="normal";break}}if(dt===""){for(var qe=0;qe<Ne.length;qe++)if(Ot[Ne[qe]]){dt=Ot[Ne[qe]];break}}dt=dt===""?"Times":dt,this.pdf.setFont(dt,ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(re){this.ctx.globalCompositeOperation=re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(re){this.ctx.globalAlpha=re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(re){this.ctx.lineDashOffset=re,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(re){this.ctx.lineDash=re,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(re){this.ctx.ignoreClearRect=!!re}})};d.prototype.setLineDash=function(E){this.lineDash=E},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){T.call(this,"fill",!1)},d.prototype.stroke=function(){T.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(E,W){if(isNaN(E)||isNaN(W))throw Gt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(E,W));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(E,W)},d.prototype.closePath=function(){var E=new o(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Ut(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){E=new o(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(E.x,E.y)},d.prototype.lineTo=function(E,W){if(isNaN(E)||isNaN(W))throw Gt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(E,W));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},d.prototype.quadraticCurveTo=function(E,W,G,ee){if(isNaN(G)||isNaN(ee)||isNaN(E)||isNaN(W))throw Gt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new o(G,ee)),ue=this.ctx.transform.applyToPoint(new o(E,W));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},d.prototype.bezierCurveTo=function(E,W,G,ee,oe,ue){if(isNaN(oe)||isNaN(ue)||isNaN(E)||isNaN(W)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new o(oe,ue)),me=this.ctx.transform.applyToPoint(new o(E,W)),be=this.ctx.transform.applyToPoint(new o(G,ee));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:be.x,y2:be.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new o(ye.x,ye.y)},d.prototype.arc=function(E,W,G,ee,oe,ue){if(isNaN(E)||isNaN(W)||isNaN(G)||isNaN(ee)||isNaN(oe))throw Gt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new o(E,W));E=ye.x,W=ye.y;var me=this.ctx.transform.applyToPoint(new o(0,G)),be=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(me.x-be.x,2)+Math.pow(me.y-be.y,2))}Math.abs(oe-ee)>=2*Math.PI&&(ee=0,oe=2*Math.PI),this.path.push({type:"arc",x:E,y:W,radius:G,startAngle:ee,endAngle:oe,counterclockwise:ue})},d.prototype.arcTo=function(E,W,G,ee,oe){throw new Error("arcTo not implemented.")},d.prototype.rect=function(E,W,G,ee){if(isNaN(E)||isNaN(W)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,W),this.lineTo(E+G,W),this.lineTo(E+G,W+ee),this.lineTo(E,W+ee),this.lineTo(E,W),this.lineTo(E+G,W),this.lineTo(E,W)},d.prototype.fillRect=function(E,W,G,ee){if(isNaN(E)||isNaN(W)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,W,G,ee),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},d.prototype.strokeRect=function(E,W,G,ee){if(isNaN(E)||isNaN(W)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(E,W,G,ee),this.stroke())},d.prototype.clearRect=function(E,W,G,ee){if(isNaN(E)||isNaN(W)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,W,G,ee))},d.prototype.save=function(E){E=typeof E!="boolean"||E;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},d.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(W),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(E){var W,G,ee,oe;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))W=0,G=0,ee=0,oe=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(ue!==null)W=parseInt(ue[1]),G=parseInt(ue[2]),ee=parseInt(ue[3]),oe=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)W=parseInt(ue[1]),G=parseInt(ue[2]),ee=parseInt(ue[3]),oe=parseFloat(ue[4]);else{if(oe=1,typeof E=="string"&&E.charAt(0)!=="#"){var ye=new WC(E);E=ye.ok?ye.toHex():"#000000"}E.length===4?(W=E.substring(1,2),W+=W,G=E.substring(2,3),G+=G,ee=E.substring(3,4),ee+=ee):(W=E.substring(1,3),G=E.substring(3,5),ee=E.substring(5,7)),W=parseInt(W,16),G=parseInt(G,16),ee=parseInt(ee,16)}}return{r:W,g:G,b:ee,a:oe,style:E}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(E,W,G,ee){if(isNaN(W)||isNaN(G)||typeof E!="string")throw Gt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var oe=H(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;N.call(this,{text:E,x:W,y:G,scale:ue,angle:oe,align:this.textAlign,maxWidth:ee})}},d.prototype.strokeText=function(E,W,G,ee){if(isNaN(W)||isNaN(G)||typeof E!="string")throw Gt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){ee=isNaN(ee)?void 0:ee;var oe=H(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;N.call(this,{text:E,x:W,y:G,scale:ue,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:ee})}},d.prototype.measureText=function(E){if(typeof E!="string")throw Gt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,G=this.pdf.internal.scaleFactor,ee=W.internal.getFontSize(),oe=W.getStringUnitWidth(E)*ee/W.internal.scaleFactor;return new function(ue){var ye=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this}({width:oe*=Math.round(96*G/72*1e4)/1e4})},d.prototype.scale=function(E,W){if(isNaN(E)||isNaN(W))throw Gt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(E,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},d.prototype.rotate=function(E){if(isNaN(E))throw Gt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new c(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},d.prototype.translate=function(E,W){if(isNaN(E)||isNaN(W))throw Gt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,E,W);this.ctx.transform=this.ctx.transform.multiply(G)},d.prototype.transform=function(E,W,G,ee,oe,ue){if(isNaN(E)||isNaN(W)||isNaN(G)||isNaN(ee)||isNaN(oe)||isNaN(ue))throw Gt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new c(E,W,G,ee,oe,ue);this.ctx.transform=this.ctx.transform.multiply(ye)},d.prototype.setTransform=function(E,W,G,ee,oe,ue){E=isNaN(E)?1:E,W=isNaN(W)?0:W,G=isNaN(G)?0:G,ee=isNaN(ee)?1:ee,oe=isNaN(oe)?0:oe,ue=isNaN(ue)?0:ue,this.ctx.transform=new c(E,W,G,ee,oe,ue)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(E,W,G,ee,oe,ue,ye,me,be){var Te=this.pdf.getImageProperties(E),Re=1,Oe=1,re=1,z=1;ee!==void 0&&me!==void 0&&(re=me/ee,z=be/oe,Re=Te.width/ee*me/ee,Oe=Te.height/oe*be/oe),ue===void 0&&(ue=W,ye=G,W=0,G=0),ee!==void 0&&me===void 0&&(me=ee,be=oe),ee===void 0&&me===void 0&&(me=Te.width,be=Te.height);for(var nt,Ke=this.ctx.transform.decompose(),$e=H(Ke.rotate.shx),Ee=new c,Ie=(Ee=(Ee=(Ee=Ee.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new s(ue-W*re,ye-G*z,ee*Re,oe*Oe)),Ne=S.call(this,Ie),st=[],Qe=0;Qe<Ne.length;Qe+=1)st.indexOf(Ne[Qe])===-1&&st.push(Ne[Qe]);if(k(st),this.autoPaging)for(var xt=st[0],ut=st[st.length-1],dt=xt;dt<ut+1;dt++){this.pdf.setPage(dt);var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],lt=dt===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=dt===1?0:qe+(dt-2)*it;if(this.ctx.clip_path.length!==0){var At=this.path;nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(nt,this.posX+this.margin[3],-Je+lt+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=At}var St=JSON.parse(JSON.stringify(Ie));St=x([St],this.posX+this.margin[3],-Je+lt+this.ctx.prevPageLastElemOffset)[0];var Ve=(dt>xt||dt<ut)&&_.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,it,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",St.x,St.y,St.w,St.h,null,null,$e),Ve&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,$e)};var S=function(E,W,G){var ee=[];W=W||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":ee.push(Math.floor((E.y+oe)/G)+1);break;case"arc":ee.push(Math.floor((E.y+oe-E.radius)/G)+1),ee.push(Math.floor((E.y+oe+E.radius)/G)+1);break;case"qct":var ue=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);ee.push(Math.floor((ue.y+oe)/G)+1),ee.push(Math.floor((ue.y+ue.h+oe)/G)+1);break;case"bct":var ye=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);ee.push(Math.floor((ye.y+oe)/G)+1),ee.push(Math.floor((ye.y+ye.h+oe)/G)+1);break;case"rect":ee.push(Math.floor((E.y+oe)/G)+1),ee.push(Math.floor((E.y+E.h+oe)/G)+1)}for(var me=0;me<ee.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<ee[me];)w.call(this);return ee},w=function(){var E=this.fillStyle,W=this.strokeStyle,G=this.font,ee=this.lineCap,oe=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=W,this.font=G,this.lineCap=ee,this.lineWidth=oe,this.lineJoin=ue},x=function(E,W,G){for(var ee=0;ee<E.length;ee++)switch(E[ee].type){case"bct":E[ee].x2+=W,E[ee].y2+=G;case"qct":E[ee].x1+=W,E[ee].y1+=G;default:E[ee].x+=W,E[ee].y+=G}return E},k=function(E){return E.sort(function(W,G){return W-G})},T=function(E,W){for(var G,ee,oe=this.fillStyle,ue=this.strokeStyle,ye=this.lineCap,me=this.lineWidth,be=Math.abs(me*this.ctx.transform.scaleX),Te=this.lineJoin,Re=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),re=[],z=0;z<Oe.length;z++)if(Oe[z].x!==void 0)for(var nt=S.call(this,Oe[z]),Ke=0;Ke<nt.length;Ke+=1)re.indexOf(nt[Ke])===-1&&re.push(nt[Ke]);for(var $e=0;$e<re.length;$e++)for(;this.pdf.internal.getNumberOfPages()<re[$e];)w.call(this);if(k(re),this.autoPaging)for(var Ee=re[0],Ie=re[re.length-1],Ne=Ee;Ne<Ie+1;Ne++){this.pdf.setPage(Ne),this.fillStyle=oe,this.strokeStyle=ue,this.lineCap=ye,this.lineWidth=be,this.lineJoin=Te;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qe=Ne===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=Ne===1?0:xt+(Ne-2)*ut;if(this.ctx.clip_path.length!==0){var Ot=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(G,this.posX+this.margin[3],-dt+Qe+this.ctx.prevPageLastElemOffset),R.call(this,E,!0),this.path=Ot}if(ee=JSON.parse(JSON.stringify(Re)),this.path=x(ee,this.posX+this.margin[3],-dt+Qe+this.ctx.prevPageLastElemOffset),W===!1||Ne===0){var lt=(Ne>Ee||Ne<Ie)&&_.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,ut,null).clip().discardPath()),R.call(this,E,W),lt&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=be,R.call(this,E,W),this.lineWidth=me;this.path=Re},R=function(E,W){if((E!=="stroke"||W||!y.call(this))&&(E==="stroke"||W||!p.call(this))){for(var G,ee,oe=[],ue=this.path,ye=0;ye<ue.length;ye++){var me=ue[ye];switch(me.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:me,deltas:[],abs:[]});break;case"lt":var be=oe.length;if(ue[ye-1]&&!isNaN(ue[ye-1].x)&&(G=[me.x-ue[ye-1].x,me.y-ue[ye-1].y],be>0)){for(;be>=0;be--)if(oe[be-1].close!==!0&&oe[be-1].begin!==!0){oe[be-1].deltas.push(G),oe[be-1].abs.push(me);break}}break;case"bct":G=[me.x1-ue[ye-1].x,me.y1-ue[ye-1].y,me.x2-ue[ye-1].x,me.y2-ue[ye-1].y,me.x-ue[ye-1].x,me.y-ue[ye-1].y],oe[oe.length-1].deltas.push(G);break;case"qct":var Te=ue[ye-1].x+2/3*(me.x1-ue[ye-1].x),Re=ue[ye-1].y+2/3*(me.y1-ue[ye-1].y),Oe=me.x+2/3*(me.x1-me.x),re=me.y+2/3*(me.y1-me.y),z=me.x,nt=me.y;G=[Te-ue[ye-1].x,Re-ue[ye-1].y,Oe-ue[ye-1].x,re-ue[ye-1].y,z-ue[ye-1].x,nt-ue[ye-1].y],oe[oe.length-1].deltas.push(G);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(me)}}ee=W?null:E==="stroke"?"stroke":"fill";for(var Ke=!1,$e=0;$e<oe.length;$e++)if(oe[$e].arc)for(var Ee=oe[$e].abs,Ie=0;Ie<Ee.length;Ie++){var Ne=Ee[Ie];Ne.type==="arc"?F.call(this,Ne.x,Ne.y,Ne.radius,Ne.startAngle,Ne.endAngle,Ne.counterclockwise,void 0,W,!Ke):q.call(this,Ne.x,Ne.y),Ke=!0}else if(oe[$e].close===!0)this.pdf.internal.out("h"),Ke=!1;else if(oe[$e].begin!==!0){var st=oe[$e].start.x,Qe=oe[$e].start.y;j.call(this,oe[$e].deltas,st,Qe),Ke=!0}ee&&M.call(this,ee),W&&J.call(this)}},U=function(E){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-G;case"top":return E+W-G;case"hanging":return E+W-2*G;case"middle":return E+W/2-G;default:return E}},$=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(W,G){this.colorStops.push([W,G])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(E,W,G,ee,oe,ue,ye,me,be){for(var Te=X.call(this,G,ee,oe,ue),Re=0;Re<Te.length;Re++){var Oe=Te[Re];Re===0&&(be?O.call(this,Oe.x1+E,Oe.y1+W):q.call(this,Oe.x1+E,Oe.y1+W)),Z.call(this,E,W,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}me?J.call(this):M.call(this,ye)},M=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(E,W){this.pdf.internal.out(e(E)+" "+n(W)+" m")},N=function(E){var W;switch(E.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var G=this.pdf.getTextDimensions(E.text),ee=U.call(this,E.y),oe=$.call(this,ee)-G.h,ue=this.ctx.transform.applyToPoint(new o(E.x,ee)),ye=this.ctx.transform.decompose(),me=new c;me=(me=(me=me.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale);for(var be,Te,Re,Oe=this.ctx.transform.applyToRectangle(new s(E.x,ee,G.w,G.h)),re=me.applyToRectangle(new s(E.x,oe,G.w,G.h)),z=S.call(this,re),nt=[],Ke=0;Ke<z.length;Ke+=1)nt.indexOf(z[Ke])===-1&&nt.push(z[Ke]);if(k(nt),this.autoPaging)for(var $e=nt[0],Ee=nt[nt.length-1],Ie=$e;Ie<Ee+1;Ie++){this.pdf.setPage(Ie);var Ne=Ie===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qe=this.pdf.internal.pageSize.height-this.margin[2],xt=Qe-this.margin[0],ut=this.pdf.internal.pageSize.width-this.margin[1],dt=ut-this.margin[3],Ot=Ie===1?0:st+(Ie-2)*xt;if(this.ctx.clip_path.length!==0){var lt=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(be,this.posX+this.margin[3],-1*Ot+Ne),R.call(this,"fill",!0),this.path=lt}var qe=x([JSON.parse(JSON.stringify(re))],this.posX+this.margin[3],-Ot+Ne+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*E.scale),Re=this.lineWidth,this.lineWidth=Re*E.scale);var it=this.autoPaging!=="text";if(it||qe.y+qe.h<=Qe){if(it||qe.y>=Ne&&qe.x<=ut){var Je=it?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||ut-qe.x)[0],At=x([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Ot+Ne+this.ctx.prevPageLastElemOffset)[0],St=it&&(Ie>$e||Ie<Ee)&&_.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,xt,null).clip().discardPath()),this.pdf.text(Je,At.x,At.y,{angle:E.angle,align:W,renderingMode:E.renderingMode}),St&&this.pdf.restoreGraphicsState()}}else qe.y<Qe&&(this.ctx.prevPageLastElemOffset+=Qe-qe.y);E.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Re)}else E.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*E.scale),Re=this.lineWidth,this.lineWidth=Re*E.scale),this.pdf.text(E.text,ue.x+this.posX,ue.y+this.posY,{angle:E.angle,align:W,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Re)},q=function(E,W,G,ee){G=G||0,ee=ee||0,this.pdf.internal.out(e(E+G)+" "+n(W+ee)+" l")},j=function(E,W,G){return this.pdf.lines(E,W,G,null,null)},Z=function(E,W,G,ee,oe,ue,ye,me){this.pdf.internal.out([t(i(G+E)),t(a(ee+W)),t(i(oe+E)),t(a(ue+W)),t(i(ye+E)),t(a(me+W)),"c"].join(" "))},X=function(E,W,G,ee){for(var oe=2*Math.PI,ue=Math.PI/2;W>G;)W-=oe;var ye=Math.abs(G-W);ye<oe&&ee&&(ye=oe-ye);for(var me=[],be=ee?-1:1,Te=W;ye>1e-5;){var Re=Te+be*Math.min(ye,ue);me.push(se.call(this,E,Te,Re)),ye-=Math.abs(Re-Te),Te=Re}return me},se=function(E,W,G){var ee=(G-W)/2,oe=E*Math.cos(ee),ue=E*Math.sin(ee),ye=oe,me=-ue,be=ye*ye+me*me,Te=be+ye*oe+me*ue,Re=4/3*(Math.sqrt(2*be*Te)-Te)/(ye*ue-me*oe),Oe=ye-Re*me,re=me+Re*ye,z=Oe,nt=-re,Ke=ee+W,$e=Math.cos(Ke),Ee=Math.sin(Ke);return{x1:E*Math.cos(W),y1:E*Math.sin(W),x2:Oe*$e-re*Ee,y2:Oe*Ee+re*$e,x3:z*$e-nt*Ee,y3:z*Ee+nt*$e,x4:E*Math.cos(G),y4:E*Math.sin(G)}},H=function(E){return 180*E/Math.PI},ie=function(E,W,G,ee,oe,ue){var ye=E+.5*(G-E),me=W+.5*(ee-W),be=oe+.5*(G-oe),Te=ue+.5*(ee-ue),Re=Math.min(E,oe,ye,be),Oe=Math.max(E,oe,ye,be),re=Math.min(W,ue,me,Te),z=Math.max(W,ue,me,Te);return new s(Re,re,Oe-Re,z-re)},fe=function(E,W,G,ee,oe,ue,ye,me){var be,Te,Re,Oe,re,z,nt,Ke,$e,Ee,Ie,Ne,st,Qe,xt=G-E,ut=ee-W,dt=oe-G,Ot=ue-ee,lt=ye-oe,qe=me-ue;for(Te=0;Te<41;Te++)$e=(nt=(Re=E+(be=Te/40)*xt)+be*((re=G+be*dt)-Re))+be*(re+be*(oe+be*lt-re)-nt),Ee=(Ke=(Oe=W+be*ut)+be*((z=ee+be*Ot)-Oe))+be*(z+be*(ue+be*qe-z)-Ke),Te==0?(Ie=$e,Ne=Ee,st=$e,Qe=Ee):(Ie=Math.min(Ie,$e),Ne=Math.min(Ne,Ee),st=Math.max(st,$e),Qe=Math.max(Qe,Ee));return new s(Math.round(Ie),Math.round(Ne),Math.round(st-Ie),Math.round(Qe-Ne))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,W,G=(E=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:W}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(Ze.API),function(r){var t=function(o){var s,c,l,u,d,v,p,y,_,S;for(c=[],l=0,u=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;u>l;l+=4)(d=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(v=(d=((d=((d=((d=(d-(S=d%85))/85)-(_=d%85))/85)-(y=d%85))/85)-(p=d%85))/85)%85,c.push(v+33,p+33,y+33,_+33,S+33)):c.push(122);return function(w,x){for(var k=x;k>0;k--)w.pop()}(c,s.length),String.fromCharCode.apply(String,c)+"~>"},e=function(o){var s,c,l,u,d,v=String,p="length",y=255,_="charCodeAt",S="slice",w="replace";for(o[S](-2),o=o[S](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),l=[],u=0,d=(o+=s="uuuuu"[S](o[p]%5||5))[p];d>u;u+=5)c=52200625*(o[_](u)-33)+614125*(o[_](u+1)-33)+7225*(o[_](u+2)-33)+85*(o[_](u+3)-33)+(o[_](u+4)-33),l.push(y&c>>24,y&c>>16,y&c>>8,y&c);return function(x,k){for(var T=k;T>0;T--)x.pop()}(l,s[p]),v.fromCharCode.apply(v,l)},n=function(o){return o.split("").map(function(s){return("0"+s.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var c="",l=0;l<o.length;l+=2)c+=String.fromCharCode("0x"+(o[l]+o[l+1]));return c},a=function(o){for(var s=new Uint8Array(o.length),c=o.length;c--;)s[c]=o.charCodeAt(c);return(s=xy(s)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};r.processDataByFilters=function(o,s){var c=0,l=o||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),c=0;c<s.length;c+=1)switch(s[c]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=n(l),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[c]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Ze.API),function(r){r.loadFile=function(t,e,n){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(c,l,u){var d=new XMLHttpRequest,v=0,p=function(y){var _=y.length,S=[],w=String.fromCharCode;for(v=0;v<_;v+=1)S.push(w(255&y.charCodeAt(v)));return S.join("")};if(d.open("GET",c,!l),d.overrideMimeType("text/plain; charset=x-user-defined"),l===!1&&(d.onload=function(){d.status===200?u(p(this.responseText)):u(void 0)}),d.send(null),l&&d.status===200)return p(d.responseText)}(i,a,o)}catch{}return s}(t,e,n)},r.loadImageFile=r.loadFile}(Ze.API),function(r){function t(){return(ct.html2canvas?Promise.resolve(ct.html2canvas):Sg(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function e(){return(ct.DOMPurify?Promise.resolve(ct.DOMPurify):Sg(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var n=function(s){var c=Ut(s);return c==="undefined"?"undefined":c==="string"||s instanceof String?"string":c==="number"||s instanceof Number?"number":c==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(s,c){var l=document.createElement(s);for(var u in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[u]=c.style[u];return l},a=function s(c,l){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),d=c.firstChild;d;d=d.nextSibling)l!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(s(d,l));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},o=function s(c){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),l);return(u=u.setProgress(1,s,1,[s])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,c){return s.__proto__=c||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,c){return this.then(function(){switch(c=c||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s),c){case"string":return this.then(e).then(function(l){return this.set({src:i("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(c){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var y=u[p],_=y.src.find(function(S){return S.format==="truetype"});_&&l.addFont(_.url,y.ref.name,y.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,l.context2d.save(!0),c(this.prop.container,v)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,c):this.outputPdf(s,c)},o.prototype.outputPdf=function(s,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,c)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(n(s)!=="object")return this;var c=Object.keys(s||{}).map(function(l){if(l in o.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(s,c){return this.then(function(){var l=s in o.template.prop?this.prop[s]:this.opt[s];return c?c(l):l})},o.prototype.setMargin=function(s){return this.then(function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function c(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(s=s||Ze.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:c(s.inner.width,s.k),height:c(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,c,l,u){return s!=null&&(this.progress.val=s),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,c,l,u){return this.setProgress(s?this.progress.val+s:null,c||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(s,c){var l=this;return this.thenCore(s,c,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(v){return l.updateProgress(null,u),v}).then(u,d).then(function(v){return l.updateProgress(1),v})})},o.prototype.thenCore=function(s,c,l){l=l||Promise.prototype.then;var u=this;s&&(s=s.bind(u)),c&&(c=c.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),v=l.call(d,s,c);return o.convert(v,u.__proto__)},o.prototype.thenExternal=function(s,c){return Promise.prototype.then.call(this,s,c)},o.prototype.thenList=function(s){var c=this;return s.forEach(function(l){c=c.thenCore(l)}),c},o.prototype.catch=function(s){s&&(s=s.bind(this));var c=Promise.prototype.catch.call(this,s);return o.convert(c,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Ze.getPageSize=function(s,c,l){if(Ut(s)==="object"){var u=s;s=u.orientation,c=u.unit||c,l=u.format||l}c=c||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var d,v=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+c}var y,_=0,S=0;if(p.hasOwnProperty(v))_=p[v][1]/d,S=p[v][0]/d;else try{_=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",S>_&&(y=S,S=_,_=y);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",_>S&&(y=S,S=_,_=y)}return{width:S,height:_,unit:c,k:d,orientation:s}},r.html=function(s,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map($g):null;var l=new o(c);return c.worker?l:l.from(s).doCallback()}}(Ze.API),Ze.API.addJS=function(r){return qx=r,this.internal.events.subscribe("postPutResources",function(){rh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Wx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+qx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rh!==void 0&&Wx!==void 0&&this.internal.out("/Names <</JavaScript "+rh+" 0 R>>")}),this},function(r){var t;r.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=n.exec(o);if(s!=null){var c=s[1];e.internal.newObjectDeferredBegin(c,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,u=[];for(a=0;a<l;a++){var d=e.internal.newObject();u.push(d);var v=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<u.length;a++)e.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+p+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var c=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var l=0;l<n.children.length;l++)this.renderItems(n.children[l])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(Ze.API),function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,n,i,a,o,s){var c,l=this.decode.DCT_DECODE,u=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,c=function(d){for(var v,p=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,_={width:0,height:0,numcomponents:1},S=4;S<y;S+=2){if(S+=p,t.indexOf(d.charCodeAt(S+1))!==-1){v=256*d.charCodeAt(S+5)+d.charCodeAt(S+6),_={width:256*d.charCodeAt(S+7)+d.charCodeAt(S+8),height:v,numcomponents:d.charCodeAt(S+9)};break}p=256*d.charCodeAt(S+2)+d.charCodeAt(S+3)}return _}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),c.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}u={data:e,width:c.width,height:c.height,colorSpace:s,bitsPerComponent:8,filter:l,index:n,alias:i}}return u}}(Ze.API),Ze.API.processPNG=function(r,t,e,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,a=aee(r,{checkCrc:!0}),o=a.width,s=a.height,c=a.channels,l=a.palette,u=a.depth;i=l&&c===1?function(F){for(var M=F.width,J=F.height,O=F.data,N=F.palette,q=F.depth,j=!1,Z=[],X=[],se=void 0,H=!1,ie=0,fe=0;fe<N.length;fe++){var ne=Qb(N[fe],4),E=ne[0],W=ne[1],G=ne[2],ee=ne[3];Z.push(E,W,G),ee!=null&&(ee===0?(ie++,X.length<1&&X.push(fe)):ee<255&&(H=!0))}if(H||ie>1){j=!0,X=void 0;var oe=M*J;se=new Uint8Array(oe);for(var ue=new DataView(O.buffer),ye=0;ye<oe;ye++){var me=zg(ue,ye,q),be=Qb(N[me],4)[3];se[ye]=be}}else ie===0&&(X=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:j?8:void 0,colorBytes:O,alphaBytes:se,needSMask:j,palette:Z,mask:X}}(a):c===2||c===4?function(F){for(var M=F.data,J=F.width,O=F.height,N=F.channels,q=F.depth,j=N===2?"DeviceGray":"DeviceRGB",Z=N-1,X=J*O,se=Z,H=X*se,ie=1*X,fe=Math.ceil(H*q/8),ne=Math.ceil(ie*q/8),E=new Uint8Array(fe),W=new Uint8Array(ne),G=new DataView(M.buffer),ee=new DataView(E.buffer),oe=new DataView(W.buffer),ue=!1,ye=0;ye<X;ye++){for(var me=ye*N,be=0;be<se;be++)eS(ee,zg(G,me+be,q),ye*se+be,q);var Te=zg(G,me+se,q);Te<(1<<q)-1&&(ue=!0),eS(oe,Te,1*ye,q)}return{colorSpace:j,colorsPerPixel:Z,sMaskBitsPerComponent:ue?q:void 0,colorBytes:E,alphaBytes:W,needSMask:ue}}(a):function(F){var M=F.data,J=F.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:J,colorsPerPixel:J==="DeviceGray"?1:3,colorBytes:M instanceof Uint16Array?function(O){for(var N=O.length,q=new Uint8Array(2*N),j=new DataView(q.buffer,q.byteOffset,q.byteLength),Z=0;Z<N;Z++)j.setUint16(2*Z,O[Z],!1);return q}(M):M,needSMask:!1}}(a);var d,v,p,y=i,_=y.colorSpace,S=y.colorsPerPixel,w=y.sMaskBitsPerComponent,x=y.colorBytes,k=y.alphaBytes,T=y.needSMask,R=y.palette,U=y.mask,$=null;return n!==Ze.API.image_compression.NONE&&typeof xy=="function"?($=function(F){var M;switch(F){case Ze.API.image_compression.FAST:M=11;break;case Ze.API.image_compression.MEDIUM:M=13;break;case Ze.API.image_compression.SLOW:M=14;break;default:M=12}return M}(n),d=this.decode.FLATE_DECODE,v="/Predictor ".concat($," /Colors ").concat(S," /BitsPerComponent ").concat(u," /Columns ").concat(o),r=Qx(x,Math.ceil(o*S*u/8),S,u,n),T&&(p=Qx(k,Math.ceil(o*w/8),1,w,n))):(d=void 0,v=void 0,r=x,T&&(p=k)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:e,data:r,index:t,filter:d,decodeParameters:v,transparency:U,palette:R,sMask:p,predictor:$,width:o,height:s,bitsPerComponent:u,sMaskBitsPerComponent:w,colorSpace:_}}},function(r){r.processGIF89A=function(t,e,n,i){var a=new Tee(t),o=a.width,s=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:o,height:s},u=new Wg(100).encode(l,100);return r.processJPEG.call(this,u,e,n,i)},r.processGIF87A=r.processGIF89A}(Ze.API),xi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:e,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xi.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[r]()}catch(e){Gt.log("bit decode error:"+e)}},xi.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),e=t%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var c=this.palette[a>>7-s&1];this.data[o+4*s]=c.blue,this.data[o+4*s+1]=c.green,this.data[o+4*s+2]=c.red,this.data[o+4*s+3]=255}e!==0&&(this.pos+=4-e)}},xi.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<r;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,s=a>>4,c=15&a,l=this.palette[s];if(this.data[o]=l.blue,this.data[o+1]=l.green,this.data[o+2]=l.red,this.data[o+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[o+4]=l.blue,this.data[o+4+1]=l.green,this.data[o+4+2]=l.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},xi.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},xi.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,s=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,l=a>>15?255:0,u=n*this.width*4+4*i;this.data[u]=c,this.data[u+1]=s,this.data[u+2]=o,this.data[u+3]=l}this.pos+=r}},xi.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,c=(o>>5&e)/e*255|0,l=(o>>11)/t*255|0,u=i*this.width*4+4*a;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=s,this.data[u+3]=255}this.pos+=r}},xi.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},xi.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*e;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=o}},xi.prototype.getData=function(){return this.data},function(r){r.processBMP=function(t,e,n,i){var a=new xi(t,!1),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},l=new Wg(100).encode(c,100);return r.processJPEG.call(this,l,e,n,i)}}(Ze.API),rS.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(t,e,n,i){var a=new rS(t),o=a.width,s=a.height,c={data:a.getData(),width:o,height:s},l=new Wg(100).encode(c,100);return r.processJPEG.call(this,l,e,n,i)}}(Ze.API),Ze.API.processRGBA=function(r,t,e){for(var n=r.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,c=0,l=0;l<i;l+=4){var u=n[l],d=n[l+1],v=n[l+2],p=n[l+3];a[s++]=u,a[s++]=d,a[s++]=v,o[c++]=p}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Ze.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fl=Ze.API,nh=fl.getCharWidthsArray=function(r,t){var e,n,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,c=s.fof?s.fof:1,l=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=l.fof?l.fof:1,d=t.doKerning!==!1,v=0,p=r.length,y=0,_=s[0]||c,S=[];for(e=0;e<p;e++)n=r.charCodeAt(e),typeof i.metadata.widthOfString=="function"?S.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(v=d&&Ut(l[n])==="object"&&!isNaN(parseInt(l[n][y],10))?l[n][y]/u:0,S.push((s[n]||_)/c+v)),y=n;return S},Hx=fl.getStringUnitWidth=function(r,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return fl.processArabic&&(r=fl.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,e,i)/e:nh.apply(this,arguments).reduce(function(a,o){return a+o},0)},Gx=function(r,t,e,n){for(var i=[],a=0,o=r.length,s=0;a!==o&&s+t[a]<e;)s+=t[a],a++;i.push(r.slice(0,a));var c=a;for(s=0;a!==o;)s+t[a]>n&&(i.push(r.slice(c,a)),s=0,c=a),s+=t[a],a++;return c!==a&&i.push(r.slice(c,a)),i},Kx=function(r,t,e){e||(e={});var n,i,a,o,s,c,l,u=[],d=[u],v=e.textIndent||0,p=0,y=0,_=r.split(" "),S=nh.apply(this,[" ",e])[0];if(c=e.lineIndent===-1?_[0].length+2:e.lineIndent||0){var w=Array(c).join(" "),x=[];_.map(function(T){(T=T.split(/\s*\n/)).length>1?x=x.concat(T.map(function(R,U){return(U&&R.length?`
`:"")+R})):x.push(T[0])}),_=x,c=Hx.apply(this,[w,e])}for(a=0,o=_.length;a<o;a++){var k=0;if(n=_[a],c&&n[0]==`
`&&(n=n.substr(1),k=1),v+p+(y=(i=nh.apply(this,[n,e])).reduce(function(T,R){return T+R},0))>t||k){if(y>t){for(s=Gx.apply(this,[n,i,t-(v+p),t]),u.push(s.shift()),u=[s.pop()];s.length;)d.push([s.shift()]);y=i.slice(n.length-(u[0]?u[0].length:0)).reduce(function(T,R){return T+R},0)}else u=[n];d.push(u),v=y+c,p=S}else u.push(n),v+=p+y,p=S}return l=c?function(T,R){return(R?w:"")+T.join(" ")}:function(T){return T.join(" ")},d.map(l)},fl.splitTextToSize=function(r,t,e){var n,i=(e=e||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),v="Unicode";return d.metadata[v]?{widths:d.metadata[v].widths||{0:1},kerning:d.metadata[v].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;a.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=e.lineIndent;var s,c,l=[];for(s=0,c=n.length;s<c;s++)l=l.concat(Kx.apply(this,[n[s],o,a]));return l},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[e[a]]=t[a],i[t[a]]=e[a];var o=function(v){return"0x"+parseInt(v,10).toString(16)},s=r.__fontmetrics__.compress=function(v){var p,y,_,S,w=["{"];for(var x in v){if(p=v[x],isNaN(parseInt(x,10))?y="'"+x+"'":(x=parseInt(x,10),y=(y=o(x).slice(2)).slice(0,-1)+i[y.slice(-1)]),typeof p=="number")p<0?(_=o(p).slice(3),S="-"):(_=o(p).slice(2),S=""),_=S+_.slice(0,-1)+i[_.slice(-1)];else{if(Ut(p)!=="object")throw new Error("Don't know what to do with value type "+Ut(p)+".");_=s(p)}w.push(y+_)}return w.push("}"),w.join("")},c=r.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,y,_,S,w={},x=1,k=w,T=[],R="",U="",$=v.length-1,F=1;F<$;F+=1)(S=v[F])=="'"?p?(_=p.join(""),p=void 0):p=[]:p?p.push(S):S=="{"?(T.push([k,_]),k={},_=void 0):S=="}"?((y=T.pop())[0][y[1]]=k,_=void 0,k=y[0]):S=="-"?x=-1:_===void 0?n.hasOwnProperty(S)?(R+=n[S],_=parseInt(R,16)*x,x=1,R=""):R+=S:n.hasOwnProperty(S)?(U+=n[S],k[_]=parseInt(U,16)*x,x=1,_=void 0,U=""):U+=S;return w},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(v){var p=v.font,y=d.Unicode[p.postScriptName];y&&(p.metadata.Unicode={},p.metadata.Unicode.widths=y.widths,p.metadata.Unicode.kerning=y.kerning);var _=u.Unicode[p.postScriptName];_&&(p.metadata.Unicode.encoding=_,p.encoding=_.codePages[0])}])}(Ze.API),function(r){var t=function(e){for(var n=e.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=e.charCodeAt(a);return i};r.API.events.push(["addFont",function(e){var n=void 0,i=e.font,a=e.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(Lh(s)),o.metadata=r.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(Ze),Ze.API.addSvgAsImage=function(r,t,e,n,i,a,o,s){if(isNaN(t)||isNaN(e))throw Gt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Gt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var l=c.getContext("2d");l.fillStyle="#fff",l.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(ct.canvg?Promise.resolve(ct.canvg):Sg(()=>import("./index.es-PJ04gT7l.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(l,r,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(u)}).then(function(){d.addImage(c.toDataURL("image/jpeg",1),t,e,n,i,o,s)})},Ze.API.putTotalPages=function(r){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,e);return this},Ze.API.viewerPreferences=function(r,t){var e;r=r||{},t=t||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),c=[],l=0,u=0,d=0;function v(y,_){var S,w=!1;for(S=0;S<y.length;S+=1)y[S]===_&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var p=s.length;for(d=0;d<p;d+=1)e[s[d]].value=e[s[d]].defaultValue,e[s[d]].explicitSet=!1}if(Ut(r)==="object"){for(i in r)if(a=r[i],v(s,i)&&a!==void 0){if(e[i].type==="boolean"&&typeof a=="boolean")e[i].value=a;else if(e[i].type==="name"&&v(e[i].valueSet,a))e[i].value=a;else if(e[i].type==="integer"&&Number.isInteger(a))e[i].value=a;else if(e[i].type==="array"){for(l=0;l<a.length;l+=1)if(n=!0,a[l].length===1&&typeof a[l][0]=="number")c.push(String(a[l]-1));else if(a[l].length>1){for(u=0;u<a[l].length;u+=1)typeof a[l][u]!="number"&&(n=!1);n===!0&&c.push([a[l][0]-1,a[l][1]-1].join(" "))}e[i].value="["+c.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,_=[];for(y in e)e[y].explicitSet===!0&&(e[y].type==="name"?_.push("/"+y+" /"+e[y].value):_.push("/"+y+" "+e[y].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(r){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=a.length+o.length+s.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+c),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(Ze.API),function(r){var t=r.API,e=t.pdfEscape16=function(a,o){for(var s,c=o.metadata.Unicode.widths,l=["","0","00","000","0000"],u=[""],d=0,v=a.length;d<v;++d){if(s=o.metadata.characterToGlyph(a.charCodeAt(d)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(d),c.indexOf(s)==-1&&(c.push(s),c.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return u.join("");s=s.toString(16),u.push(l[4-s.length],s)}return u.join("")},n=function(a){var o,s,c,l,u,d,v;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,v=(s=Object.keys(a).sort(function(p,y){return p-y})).length;d<v;d++)o=s[d],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(l=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+l+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,l=o.newObject,u=o.putStream;if(s.metadata instanceof r.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,v=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),p="",y=0;y<v.length;y++)p+=String.fromCharCode(v[y]);var _=l();u({data:p,addLength1:!0,objectId:_}),c("endobj");var S=l();u({data:n(s.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var w=l();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+yl(s.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+r.API.PDFObject.convert(s.metadata.bbox)),c("/Flags "+s.metadata.flags),c("/StemV "+s.metadata.stemV),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c(">>"),c("endobj");var x=l();c("<<"),c("/Type /Font"),c("/BaseFont /"+yl(s.fontName)),c("/FontDescriptor "+w+" 0 R"),c("/W "+r.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+s.encoding+")"),c(">>"),c(">>"),c("endobj"),s.objectNumber=l(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+S+" 0 R"),c("/BaseFont /"+yl(s.fontName)),c("/Encoding /"+s.encoding),c("/DescendantFonts ["+x+" 0 R]"),c(">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(o){var s=o.font,c=o.out,l=o.newObject,u=o.putStream;if(s.metadata instanceof r.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,v="",p=0;p<d.length;p++)v+=String.fromCharCode(d[p]);var y=l();u({data:v,addLength1:!0,objectId:y}),c("endobj");var _=l();u({data:n(s.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var S=l();c("<<"),c("/Descent "+s.metadata.decender),c("/CapHeight "+s.metadata.capHeight),c("/StemV "+s.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+r.API.PDFObject.convert(s.metadata.bbox)),c("/FontName /"+yl(s.fontName)),c("/ItalicAngle "+s.metadata.italicAngle),c("/Ascent "+s.metadata.ascender),c(">>"),c("endobj"),s.objectNumber=l();for(var w=0;w<s.metadata.hmtx.widths.length;w++)s.metadata.hmtx.widths[w]=parseInt(s.metadata.hmtx.widths[w]*(1e3/s.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+yl(s.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),c("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",c=a.x,l=a.y,u=a.options||{},d=a.mutex||{},v=d.pdfEscape,p=d.activeFontKey,y=d.fonts,_=p,S="",w=0,x="",k=y[_].encoding;if(y[_].encoding!=="Identity-H")return{text:s,x:c,y:l,options:u,mutex:d};for(x=s,_=p,Array.isArray(s)&&(x=s[0]),w=0;w<x.length;w+=1)y[_].metadata.hasOwnProperty("cmap")&&(o=y[_].metadata.cmap.unicode.codeMap[x[w].charCodeAt(0)]),o||x[w].charCodeAt(0)<256&&y[_].metadata.hasOwnProperty("Unicode")?S+=x[w]:S+="";var T="";return parseInt(_.slice(1))<14||k==="WinAnsiEncoding"?T=v(S,_).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(T=e(S,y[_])),d.isHex=!0,{text:T,x:c,y:l,options:u,mutex:d}};t.events.push(["postProcessText",function(a){var o=a.text||"",s=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var l=0;for(l=0;l<o.length;l+=1)Array.isArray(o[l])&&o[l].length===3?s.push([i(Object.assign({},c,{text:o[l][0]})).text,o[l][1],o[l][2]]):s.push(i(Object.assign({},c,{text:o[l]})).text);a.text=s}else a.text=i(Object.assign({},c,{text:o})).text}])}(Ze),function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},r.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Ze.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,a,o,s,c,l,u,d=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,k=0;this.__bidiEngine__={};var T=function(O){var N=O.charCodeAt(),q=N>>8,j=_[q];return j!==void 0?d[256*j+(255&N)]:q===252||q===253?"AL":w.test(q)?"L":q===8?"R":"N"},R=function(O){for(var N,q=0;q<O.length;q++){if((N=T(O.charAt(q)))==="L")return!1;if(N==="R")return!0}return!1},U=function(O,N,q,j){var Z,X,se,H,ie=N[j];switch(ie){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"N":case"AN":break;case"EN":x&&(ie="AN");break;case"AL":x=!0,ie="R";break;case"WS":case"BN":ie="N";break;case"CS":j<1||j+1>=N.length||(Z=q[j-1])!=="EN"&&Z!=="AN"||(X=N[j+1])!=="EN"&&X!=="AN"?ie="N":x&&(X="AN"),ie=X===Z?X:"N";break;case"ES":ie=(Z=j>0?q[j-1]:"B")==="EN"&&j+1<N.length&&N[j+1]==="EN"?"EN":"N";break;case"ET":if(j>0&&q[j-1]==="EN"){ie="EN";break}if(x){ie="N";break}for(se=j+1,H=N.length;se<H&&N[se]==="ET";)se++;ie=se<H&&N[se]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(H=N.length,se=j+1;se<H&&N[se]==="NSM";)se++;if(se<H){var fe=O[j],ne=fe>=1425&&fe<=2303||fe===64286;if(Z=N[se],ne&&(Z==="R"||Z==="AL")){ie="R";break}}}ie=j<1||(Z=N[j-1])==="B"?"N":q[j-1];break;case"B":x=!1,i=!0,ie=k;break;case"S":a=!0,ie="N"}return ie},$=function(O,N,q){var j=O.split("");return q&&F(j,q,{hiLevel:k}),j.reverse(),N&&N.reverse(),j.join("")},F=function(O,N,q){var j,Z,X,se,H,ie=-1,fe=O.length,ne=0,E=[],W=k?p:v,G=[];for(x=!1,i=!1,a=!1,Z=0;Z<fe;Z++)G[Z]=T(O[Z]);for(X=0;X<fe;X++){if(H=ne,E[X]=U(O,G,E,X),j=240&(ne=W[H][y[E[X]]]),ne&=15,N[X]=se=W[ne][5],j>0)if(j===16){for(Z=ie;Z<X;Z++)N[Z]=1;ie=-1}else ie=-1;if(W[ne][6])ie===-1&&(ie=X);else if(ie>-1){for(Z=ie;Z<X;Z++)N[Z]=se;ie=-1}G[X]==="B"&&(N[X]=0),q.hiLevel|=se}a&&function(ee,oe,ue){for(var ye=0;ye<ue;ye++)if(ee[ye]==="S"){oe[ye]=k;for(var me=ye-1;me>=0&&ee[me]==="WS";me--)oe[me]=k}}(G,N,fe)},M=function(O,N,q,j,Z){if(!(Z.hiLevel<O)){if(O===1&&k===1&&!i)return N.reverse(),void(q&&q.reverse());for(var X,se,H,ie,fe=N.length,ne=0;ne<fe;){if(j[ne]>=O){for(H=ne+1;H<fe&&j[H]>=O;)H++;for(ie=ne,se=H-1;ie<se;ie++,se--)X=N[ie],N[ie]=N[se],N[se]=X,q&&(X=q[ie],q[ie]=q[se],q[se]=X);ne=H}ne++}}},J=function(O,N,q){var j=O.split(""),Z={hiLevel:k};return q||(q=[]),F(j,q,Z),function(X,se,H){if(H.hiLevel!==0&&u)for(var ie,fe=0;fe<X.length;fe++)se[fe]===1&&(ie=S.indexOf(X[fe]))>=0&&(X[fe]=S[ie+1])}(j,q,Z),M(2,j,N,q,Z),M(1,j,N,q,Z),j.join("")};return this.__bidiEngine__.doBidiReorder=function(O,N,q){if(function(Z,X){if(X)for(var se=0;se<Z.length;se++)X[se]=se;s===void 0&&(s=R(Z)),l===void 0&&(l=R(Z))}(O,N),o||!c||l)if(o&&c&&s^l)k=s?1:0,O=$(O,N,q);else if(!o&&c&&l)k=s?1:0,O=J(O,N,q),O=$(O,N);else if(!o||s||c||l){if(o&&!c&&s^l)O=$(O,N),s?(k=0,O=J(O,N,q)):(k=1,O=J(O,N,q),O=$(O,N));else if(o&&s&&!c&&l)k=1,O=J(O,N,q),O=$(O,N);else if(!o&&!c&&s^l){var j=u;s?(k=1,O=J(O,N,q),k=0,u=!1,O=J(O,N,q),u=j):(k=0,O=J(O,N,q),O=$(O,N),k=1,u=!1,O=J(O,N,q),u=j,O=$(O,N))}}else k=0,O=J(O,N,q);else k=s?1:0,O=J(O,N,q);return O},this.__bidiEngine__.setOptions=function(O){O&&(o=O.isInputVisual,c=O.isOutputVisual,s=O.isInputRtl,l=O.isOutputRtl,u=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,e.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([e.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([e.doBidiReorder(i[s])]);n.text=o}else n.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])}(Ze),Ze.API.TTFFont=function(){function r(t){var e;if(this.rawData=t,e=this.contents=new Ao(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new $ee(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new Eee(this.contents),this.head=new Lee(this),this.name=new jee(this),this.cmap=new tL(this),this.toUnicode={},this.hhea=new Oee(this),this.maxp=new Iee(this),this.hmtx=new Mee(this),this.post=new Nee(this),this.os2=new Aee(this),this.loca=new Uee(this),this.glyf=new Dee(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,e,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,c,l;for(l=[],o=0,s=(c=this.bbox).length;o<s;o++)t=c[o],l.push(Math.round(t*this.scaleFactor));return l}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},r.prototype.widthOfString=function(t,e,n){var i,a,o,s;for(o=0,a=0,s=(t=""+t).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=t.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return o*(e/1e3)},r.prototype.lineHeight=function(t,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},r}();var Ii,Ao=function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,e,n,i,a,o,s,c;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^c)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*a+65536*o+256*s+c},r.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},r.prototype.write=function(t){var e,n,i,a;for(a=[],n=0,i=t.length;n<i;n++)e=t[n],a.push(this.writeByte(e));return a},r}(),Eee=function(){var r;function t(e){var n,i,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(e){var n,i,a,o,s,c,l,u,d,v,p,y,_;for(_ in p=Object.keys(e).length,c=Math.log(2),d=16*Math.floor(Math.log(p)/c),o=Math.floor(d/c),u=16*p-d,(i=new Ao).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(o),i.writeShort(u),a=16*p,l=i.pos+a,s=null,y=[],e)for(v=e[_],i.writeString(_),i.writeInt(r(v)),i.writeInt(l),i.writeInt(v.length),y=y.concat(v),_==="head"&&(s=l),l+=v.length;l%4;)y.push(0),l++;return i.write(y),n=2981146554-r(i.data),i.pos=s+8,i.writeUInt32(n),i.data},r=function(e){var n,i,a,o;for(e=rL.call(e);e.length%4;)e.push(0);for(a=new Ao(e),i=0,n=0,o=e.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},t}(),Cee={}.hasOwnProperty,aa=function(r,t){for(var e in t)Cee.call(t,e)&&(r[e]=t[e]);function n(){this.constructor=r}return n.prototype=t.prototype,r.prototype=new n,r.__super__=t.prototype,r};Ii=function(){function r(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var Lee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="head",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},r.prototype.encode=function(t){var e;return(e=new Ao).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},r}(),nS=function(){function r(t,e){var n,i,a,o,s,c,l,u,d,v,p,y,_,S,w,x,k;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),v=p/2,t.pos+=6,a=function(){var T,R;for(R=[],c=T=0;0<=v?T<v:T>v;c=0<=v?++T:--T)R.push(t.readUInt16());return R}(),t.pos+=2,_=function(){var T,R;for(R=[],c=T=0;0<=v?T<v:T>v;c=0<=v?++T:--T)R.push(t.readUInt16());return R}(),l=function(){var T,R;for(R=[],c=T=0;0<=v?T<v:T>v;c=0<=v?++T:--T)R.push(t.readUInt16());return R}(),u=function(){var T,R;for(R=[],c=T=0;0<=v?T<v:T>v;c=0<=v?++T:--T)R.push(t.readUInt16());return R}(),i=(this.length-t.pos+this.offset)/2,s=function(){var T,R;for(R=[],c=T=0;0<=i?T<i:T>i;c=0<=i?++T:--T)R.push(t.readUInt16());return R}(),c=w=0,k=a.length;w<k;c=++w)for(S=a[c],n=x=y=_[c];y<=S?x<=S:x>=S;n=y<=S?++x:--x)u[c]===0?o=n+l[c]:(o=s[u[c]/2+(n-y)-(v-c)]||0)!==0&&(o+=l[c]),this.codeMap[n]=65535&o}t.pos=d}return r.encode=function(t,e){var n,i,a,o,s,c,l,u,d,v,p,y,_,S,w,x,k,T,R,U,$,F,M,J,O,N,q,j,Z,X,se,H,ie,fe,ne,E,W,G,ee,oe,ue,ye,me,be,Te,Re;switch(j=new Ao,o=Object.keys(t).sort(function(Oe,re){return Oe-re}),e){case"macroman":for(_=0,S=function(){var Oe=[];for(y=0;y<256;++y)Oe.push(0);return Oe}(),x={0:0},a={},Z=0,ie=o.length;Z<ie;Z++)x[me=t[i=o[Z]]]==null&&(x[me]=++_),a[i]={old:t[i],new:x[t[i]]},S[i]=x[t[i]];return j.writeUInt16(1),j.writeUInt16(0),j.writeUInt32(12),j.writeUInt16(0),j.writeUInt16(262),j.writeUInt16(0),j.write(S),{charMap:a,subtable:j.data,maxGlyphID:_+1};case"unicode":for(N=[],d=[],k=0,x={},n={},w=l=null,X=0,fe=o.length;X<fe;X++)x[R=t[i=o[X]]]==null&&(x[R]=++k),n[i]={old:R,new:x[R]},s=x[R]-i,w!=null&&s===l||(w&&d.push(w),N.push(i),l=s),w=i;for(w&&d.push(w),d.push(65535),N.push(65535),J=2*(M=N.length),F=2*Math.pow(Math.log(M)/Math.LN2,2),v=Math.log(F/2)/Math.LN2,$=2*M-F,c=[],U=[],p=[],y=se=0,ne=N.length;se<ne;y=++se){if(O=N[y],u=d[y],O===65535){c.push(0),U.push(0);break}if(O-(q=n[O].new)>=32768)for(c.push(0),U.push(2*(p.length+M-y)),i=H=O;O<=u?H<=u:H>=u;i=O<=u?++H:--H)p.push(n[i].new);else c.push(q-O),U.push(0)}for(j.writeUInt16(3),j.writeUInt16(1),j.writeUInt32(12),j.writeUInt16(4),j.writeUInt16(16+8*M+2*p.length),j.writeUInt16(0),j.writeUInt16(J),j.writeUInt16(F),j.writeUInt16(v),j.writeUInt16($),ue=0,E=d.length;ue<E;ue++)i=d[ue],j.writeUInt16(i);for(j.writeUInt16(0),ye=0,W=N.length;ye<W;ye++)i=N[ye],j.writeUInt16(i);for(be=0,G=c.length;be<G;be++)s=c[be],j.writeUInt16(s);for(Te=0,ee=U.length;Te<ee;Te++)T=U[Te],j.writeUInt16(T);for(Re=0,oe=p.length;Re<oe;Re++)_=p[Re],j.writeUInt16(_);return{charMap:n,subtable:j.data,maxGlyphID:k+1}}},r}(),tL=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="cmap",r.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e=new nS(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},r.encode=function(t,e){var n,i;return e==null&&(e="macroman"),n=nS.encode(t,e),(i=new Ao).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r}(),Oee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="hhea",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},r}(),Aee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="OS/2",r.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},r}(),Nee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="post",r.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,s,c;for(c=[],a=o=0,s=this.file.maxp.numGlyphs;0<=s?o<s:o>s;a=0<=s?++o:--o)c.push(t.readUInt32());return c}).call(this)}},r}(),Ree=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},jee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="name",r.prototype.parse=function(t){var e,n,i,a,o,s,c,l,u,d,v;for(t.pos=this.offset,t.readShort(),e=t.readShort(),s=t.readShort(),n=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(c={},a=u=0,d=n.length;u<d;a=++u)i=n[a],t.pos=i.offset,l=t.readString(i.length),o=new Ree(l,i),c[v=i.nameID]==null&&(c[v]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},r}(),Iee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="maxp",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},r}(),Mee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="hmtx",r.prototype.parse=function(t){var e,n,i,a,o,s,c;for(t.pos=this.offset,this.metrics=[],e=0,s=this.file.hhea.numberOfMetrics;0<=s?e<s:e>s;e=0<=s?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var l,u;for(u=[],e=l=0;0<=i?l<i:l>i;e=0<=i?++l:--l)u.push(t.readInt16());return u}(),this.widths=(function(){var l,u,d,v;for(v=[],l=0,u=(d=this.metrics).length;l<u;l++)a=d[l],v.push(a.advance);return v}).call(this),n=this.widths[this.widths.length-1],c=[],e=o=0;0<=i?o<i:o>i;e=0<=i?++o:--o)c.push(this.widths.push(n));return c},r.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},r}(),rL=[].slice,Dee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(t){var e,n,i,a,o,s,c,l,u,d;return t in this.cache?this.cache[t]:(a=this.file.loca,e=this.file.contents,n=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+n,o=(s=new Ao(e.read(i))).readShort(),l=s.readShort(),d=s.readShort(),c=s.readShort(),u=s.readShort(),this.cache[t]=o===-1?new Bee(s,l,d,c,u):new Fee(s,o,l,d,c,u),this.cache[t]))},r.prototype.encode=function(t,e,n){var i,a,o,s,c;for(o=[],a=[],s=0,c=e.length;s<c;s++)i=t[e[s]],a.push(o.length),i&&(o=o.concat(i.encode(n)));return a.push(o.length),{table:o,offsets:a}},r}(),Fee=function(){function r(t,e,n,i,a,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),Bee=function(){function r(t,e,n,i,a){var o,s;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return r.prototype.encode=function(){var t,e,n;for(e=new Ao(rL.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},r}(),Uee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="loca",r.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(t.readUInt32());return a}).call(this)},r.prototype.indexOf=function(t){return this.offsets[t]},r.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},r.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<n.length;++o)if(n[o]=i,a<e.length&&e[a]==o){++a,n[o]=i;var s=this.offsets[o],c=this.offsets[o+1]-s;c>0&&(i+=c)}for(var l=new Array(4*n.length),u=0;u<n.length;++u)l[4*u+3]=255&n[u],l[4*u+2]=(65280&n[u])>>8,l[4*u+1]=(16711680&n[u])>>16,l[4*u]=(4278190080&n[u])>>24;return l},r}(),$ee=function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,e,n,i,a;for(e in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)n=a[e],t[e]=i[n];return t},r.prototype.glyphsFor=function(t){var e,n,i,a,o,s,c;for(i={},o=0,s=t.length;o<s;o++)i[a=t[o]]=this.font.glyf.glyphFor(a);for(a in e=[],i)(n=i[a])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(a in c=this.glyphsFor(e))n=c[a],i[a]=n;return i},r.prototype.encode=function(t,e){var n,i,a,o,s,c,l,u,d,v,p,y,_,S,w;for(i in n=tL.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},w=n.charMap)p[(c=w[i]).old]=c.new;for(y in v=n.maxGlyphID,o)y in p||(p[y]=v++);return u=function(x){var k,T;for(k in T={},x)T[x[k]]=k;return T}(p),d=Object.keys(u).sort(function(x,k){return x-k}),_=function(){var x,k,T;for(T=[],x=0,k=d.length;x<k;x++)s=d[x],T.push(u[s]);return T}(),a=this.font.glyf.encode(o,_,p),l=this.font.loca.encode(a.offsets,_),S={cmap:this.font.cmap.raw(),glyf:a.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},r}();Ze.API.PDFObject=function(){var r;function t(){}return r=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},t.convert=function(e){var n,i,a,o;if(Array.isArray(e))return"["+function(){var s,c,l;for(l=[],s=0,c=e.length;s<c;s++)n=e[s],l.push(t.convert(n));return l}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in a=["<<"],e)o=e[i],a.push("/"+i+" "+t.convert(o));return a.push(">>"),a.join(`
`)}return""+e},t}();const Vee=({poseData:r})=>{const t=he.useRef(null);he.useEffect(()=>{if(!t.current||!r||!r.landmarks)return;const n=t.current,i=n.getContext("2d");i&&(i.clearRect(0,0,n.width,n.height),i.fillStyle="#0b141a",i.fillRect(0,0,n.width,n.height),e(i,r.landmarks,n.width,n.height))},[r]);const e=(n,i,a,o)=>{const s=[[11,12],[11,23],[12,24],[23,24],[11,13],[13,15],[12,14],[14,16],[23,25],[25,27],[24,26],[26,28],[0,1],[0,4]];n.strokeStyle="#00ff00",n.lineWidth=3,s.forEach(([c,l])=>{const u=i[c],d=i[l];u&&d&&u.visibility>.5&&d.visibility>.5&&(n.beginPath(),n.moveTo(u.x*a,u.y*o),n.lineTo(d.x*a,d.y*o),n.stroke())}),i.forEach((c,l)=>{if(c.visibility>.5){let u="#ff0000";l===0?u="#ffff00":l>=11&&l<=16?u="#ff00ff":l>=23&&l<=28&&(u="#00ffff"),n.fillStyle=u,n.beginPath(),n.arc(c.x*a,c.y*o,6,0,2*Math.PI),n.fill(),n.strokeStyle="#ffffff",n.lineWidth=2,n.stroke()}}),n.fillStyle="#00ff00",n.font="12px monospace",n.fillText(`FPS: ${(1e3/66.67).toFixed(1)}`,10,20),n.fillText(`Landmarks: ${i.length}`,10,40)};return m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#0b141a] rounded-lg",children:m.jsx("canvas",{ref:t,width:640,height:480,className:"max-w-full max-h-full border border-gray-700 rounded-lg"})})},zee=({isOpen:r,onClose:t,roomName:e,sessionActive:n,patientConnected:i,latestPoseData:a,onStartSession:o,onEndSession:s})=>{var v,p,y;const[c,l]=he.useState([]),u=()=>{if(!a){alert("No hay datos de pose disponibles para capturar");return}l(_=>[..._,a]),console.log("[Capture] Snapshot captured:",a)},d=()=>{if(c.length===0){alert("No hay datos capturados para generar el PDF");return}try{const _=new Ze,S=_.internal.pageSize.getWidth(),w=_.internal.pageSize.getHeight();_.setFontSize(24),_.setTextColor(0,0,0),_.text("Análisis Postural",S/2,30,{align:"center"}),_.setFontSize(12),_.text(`Sala: ${e}`,20,50),_.text(`Fecha: ${new Date().toLocaleString("es-CO")}`,20,60),_.text(`Snapshots capturados: ${c.length}`,20,70);let x=90;c.forEach((R,U)=>{x>w-60&&(_.addPage(),x=20),_.setFontSize(16),_.setTextColor(0,100,200),_.text(`Snapshot ${U+1}`,20,x),x+=10,_.setFontSize(10),_.setTextColor(0,0,0),_.text(`Timestamp: ${new Date(R.timestamp).toLocaleTimeString("es-CO")}`,25,x),x+=10,R.metrics.posture&&(_.setFontSize(12),_.setTextColor(50,50,50),_.text("Postura:",25,x),x+=7,_.setFontSize(10),_.text(`  Ángulo del Trunco: ${R.metrics.posture.trunkAngle}°`,30,x),x+=6,_.text(`  Alineación: ${R.metrics.posture.alignment}`,30,x),x+=10),R.metrics.joints&&(_.setFontSize(12),_.setTextColor(50,50,50),_.text("Ángulos Articulares:",25,x),x+=7,_.setFontSize(10),_.text(`  Codo Izquierdo: ${R.metrics.joints.leftElbow}°`,30,x),x+=6,_.text(`  Codo Derecho: ${R.metrics.joints.rightElbow}°`,30,x),x+=6,_.text(`  Rodilla Izquierda: ${R.metrics.joints.leftKnee}°`,30,x),x+=6,_.text(`  Rodilla Derecha: ${R.metrics.joints.rightKnee}°`,30,x),x+=10),R.metrics.symmetry&&(_.setFontSize(12),_.setTextColor(50,50,50),_.text("Simetría Corporal:",25,x),x+=7,_.setFontSize(10),_.text(`  Hombros: ${R.metrics.symmetry.shoulders} (${R.metrics.symmetry.shoulderDiff}%)`,30,x),x+=6,_.text(`  Caderas: ${R.metrics.symmetry.hips} (${R.metrics.symmetry.hipDiff}%)`,30,x),x+=15)});const k=_.getNumberOfPages();for(let R=1;R<=k;R++)_.setPage(R),_.setFontSize(8),_.setTextColor(128,128,128),_.text("BSL Consulta Video - Análisis Postural",S/2,w-10,{align:"center"}),_.text(`Página ${R} de ${k}`,S-20,w-10,{align:"right"});const T=`analisis-postural-${e}-${Date.now()}.pdf`;_.save(T),console.log("[PDF] Generated successfully:",T),alert(`PDF generado exitosamente: ${T}`)}catch(_){console.error("[PDF] Error generating PDF:",_),alert("Error al generar el PDF. Ver consola para detalles.")}};return r?m.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 pointer-events-auto",children:m.jsxs("div",{className:"bg-[#1a2730] rounded-lg shadow-2xl w-[90%] max-w-6xl h-[85vh] flex flex-col border border-gray-700",children:[m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-700",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-white",children:"Análisis Postural"}),m.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Sala: ",e]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-green-500 animate-pulse":"bg-gray-500"}`}),m.jsx("span",{className:"text-sm text-gray-300",children:n?"Sesión Activa":"Sesión Inactiva"})]}),n&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-3 h-3 rounded-full ${i?"bg-blue-500 animate-pulse":"bg-yellow-500"}`}),m.jsx("span",{className:"text-sm text-gray-300",children:i?"Paciente Conectado":"Esperando Paciente..."})]}),m.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Cerrar",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),m.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[m.jsx("div",{className:"flex-1 bg-[#0b141a] relative p-4",children:n?i?m.jsx(Vee,{poseData:a||null}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mb-6",children:m.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"})}),m.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"Esperando Paciente..."}),m.jsx("p",{className:"text-sm text-gray-500",children:"El paciente debe estar en la videollamada para continuar"})]})}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mb-6",children:m.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),m.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"Análisis Postural No Iniciado"}),m.jsx("p",{className:"text-sm text-gray-500 mb-6",children:'Haz clic en "Iniciar Análisis" para comenzar'}),m.jsx("button",{onClick:o,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Iniciar Análisis"})]})})}),m.jsxs("div",{className:"w-full lg:w-80 bg-[#15202b] border-t lg:border-t-0 lg:border-l border-gray-700 flex flex-col",children:[m.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Métricas en Tiempo Real"}),n&&i?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-[#1a2730] rounded-lg p-4 border border-gray-700",children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase mb-3",children:"Postura"}),(v=a==null?void 0:a.metrics)!=null&&v.posture?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-sm text-gray-400",children:"Ángulo del Tronco:"}),m.jsxs("span",{className:"text-lg font-semibold text-white",children:[a.metrics.posture.trunkAngle,"°"]})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-400",children:"Alineación:"}),m.jsx("span",{className:`text-sm font-semibold ${a.metrics.posture.alignment==="Buena"?"text-green-400":"text-yellow-400"}`,children:a.metrics.posture.alignment})]})]}):m.jsx("p",{className:"text-sm text-gray-400",children:"Esperando datos..."})]}),m.jsxs("div",{className:"bg-[#1a2730] rounded-lg p-4 border border-gray-700",children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase mb-3",children:"Ángulos Articulares"}),(p=a==null?void 0:a.metrics)!=null&&p.joints?m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Codo Izq:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.leftElbow,"°"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Codo Der:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.rightElbow,"°"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Rodilla Izq:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.leftKnee,"°"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Rodilla Der:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.rightKnee,"°"]})]})]}):m.jsx("p",{className:"text-sm text-gray-400",children:"Esperando datos..."})]}),m.jsxs("div",{className:"bg-[#1a2730] rounded-lg p-4 border border-gray-700",children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase mb-3",children:"Simetría Corporal"}),(y=a==null?void 0:a.metrics)!=null&&y.symmetry?m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-gray-400",children:"Hombros:"}),m.jsx("span",{className:`font-semibold ${a.metrics.symmetry.shoulders==="Simétrico"?"text-green-400":"text-yellow-400"}`,children:a.metrics.symmetry.shoulders})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-gray-400",children:"Diferencia:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.symmetry.shoulderDiff,"%"]})]}),m.jsxs("div",{className:"flex justify-between items-center mt-3",children:[m.jsx("span",{className:"text-gray-400",children:"Caderas:"}),m.jsx("span",{className:`font-semibold ${a.metrics.symmetry.hips==="Simétrico"?"text-green-400":"text-yellow-400"}`,children:a.metrics.symmetry.hips})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-gray-400",children:"Diferencia:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.symmetry.hipDiff,"%"]})]})]}):m.jsx("p",{className:"text-sm text-gray-400",children:"Esperando datos..."})]})]}):m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-sm text-gray-500",children:"Las métricas aparecerán aquí cuando el análisis esté activo"})})]}),m.jsxs("div",{className:"p-4 border-t border-gray-700 space-y-3",children:[n&&i&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:u,disabled:!a,className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Capturar Snapshot (",c.length,")"]}),m.jsxs("button",{onClick:d,disabled:c.length===0,className:"w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Generar PDF"]})]}),n&&m.jsx("button",{onClick:s,className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Finalizar Análisis"})]})]})]}),m.jsx("div",{className:"px-6 py-3 border-t border-gray-700 bg-[#15202b]",children:m.jsx("p",{className:"text-xs text-gray-500 text-center",children:"El análisis postural se realiza en tiempo real mientras la videollamada continúa"})})]})}):null};let uu=null;async function Wee(){return uu?(console.log("[MediaPipe] Returning cached MediaPipe instance"),uu):(console.log("[MediaPipe] Loading MediaPipe from CDN..."),uu=(async()=>{try{const t=await import("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15");return console.log("[MediaPipe] Successfully loaded from CDN"),{PoseLandmarker:t.PoseLandmarker,FilesetResolver:t.FilesetResolver}}catch(r){throw console.error("[MediaPipe] Error loading from CDN:",r),uu=null,new Error("Failed to load MediaPipe Vision tasks")}})(),uu)}async function qee(){console.log("[MediaPipe] Creating PoseLandmarker...");const{PoseLandmarker:r,FilesetResolver:t}=await Wee(),e=await t.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15/wasm"),n=await r.createFromOptions(e,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1,minPoseDetectionConfidence:.5,minPosePresenceConfidence:.5,minTrackingConfidence:.5});return console.log("[MediaPipe] PoseLandmarker created successfully"),n}function Hee(r){if(!r||r.length===0)return{posture:null,joints:null,symmetry:null};const t=(y,_,S)=>{const w={x:y.x-_.x,y:y.y-_.y},x={x:S.x-_.x,y:S.y-_.y},k=w.x*x.x+w.y*x.y,T=w.x*x.y-w.y*x.x;return Math.atan2(T,k)*180/Math.PI},e=11,n=12,i=13,a=14,o=15,s=16,c=23,l=24,u=25,d=26,v=27,p=28;try{const y={x:(r[e].x+r[n].x)/2,y:(r[e].y+r[n].y)/2,z:(r[e].z+r[n].z)/2},_={x:(r[c].x+r[l].x)/2,y:(r[c].y+r[l].y)/2,z:(r[c].z+r[l].z)/2},S=Math.abs(Math.atan2(y.y-_.y,y.x-_.x)*(180/Math.PI)),w=Math.abs(t(r[e],r[i],r[o])),x=Math.abs(t(r[n],r[a],r[s])),k=Math.abs(t(r[c],r[u],r[v])),T=Math.abs(t(r[l],r[d],r[p])),R=Math.abs(r[e].y-r[n].y)*100,U=Math.abs(r[c].y-r[l].y)*100;return{posture:{trunkAngle:S.toFixed(1),alignment:S>85&&S<95?"Buena":"Revisar"},joints:{leftElbow:w.toFixed(1),rightElbow:x.toFixed(1),leftKnee:k.toFixed(1),rightKnee:T.toFixed(1)},symmetry:{shoulders:R<5?"Simétrico":"Asimétrico",shoulderDiff:R.toFixed(2),hips:U<5?"Simétrico":"Asimétrico",hipDiff:U.toFixed(2)}}}catch(y){return console.error("[MediaPipe] Error calculating metrics:",y),{posture:null,joints:null,symmetry:null}}}const Gee=({onPoseData:r,isActive:t})=>{const e=he.useRef(null),n=he.useRef(null),[i,a]=he.useState("Inicializando..."),[o,s]=he.useState(!1),c=he.useRef(null),l=he.useRef(null),u=he.useRef(null);he.useEffect(()=>{if(!t)return;let y=!0;return(async()=>{try{a("Accediendo a cámara...");const S=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1});if(!y){S.getTracks().forEach(x=>x.stop());return}u.current=S,e.current&&(e.current.srcObject=S,await e.current.play()),a("Cargando modelo de análisis...");const w=await qee();if(!y){w.close();return}c.current=w,a("Analizando postura..."),s(!0),d()}catch(S){console.error("[Postural Analysis Patient] Initialization error:",S),a("Error: No se pudo acceder a la cámara")}})(),()=>{y=!1,p()}},[t]);const d=()=>{if(!e.current||!n.current||!c.current)return;const y=e.current,_=n.current,S=_.getContext("2d");if(!S)return;_.width=y.videoWidth||640,_.height=y.videoHeight||480;let w=0;const x=1e3/15,k=()=>{const T=performance.now();if(T-w<x){l.current=requestAnimationFrame(k);return}if(w=T,y.readyState>=2)try{const R=c.current.detectForVideo(y,T);if(S.clearRect(0,0,_.width,_.height),S.drawImage(y,0,0,_.width,_.height),R.landmarks&&R.landmarks.length>0){const U=R.landmarks[0];v(S,U,_.width,_.height);const $=Hee(U);r({landmarks:U,metrics:$,timestamp:T})}}catch(R){console.error("[Postural Analysis Patient] Detection error:",R)}l.current=requestAnimationFrame(k)};k()},v=(y,_,S,w)=>{const x=[[11,12],[11,13],[13,15],[12,14],[14,16],[11,23],[12,24],[23,24],[23,25],[25,27],[24,26],[26,28]];y.strokeStyle="#00ff00",y.lineWidth=2,x.forEach(([k,T])=>{const R=_[k],U=_[T];R&&U&&(y.beginPath(),y.moveTo(R.x*S,R.y*w),y.lineTo(U.x*S,U.y*w),y.stroke())}),y.fillStyle="#ff0000",_.forEach(k=>{y.beginPath(),y.arc(k.x*S,k.y*w,4,0,2*Math.PI),y.fill()})},p=()=>{l.current&&cancelAnimationFrame(l.current),u.current&&u.current.getTracks().forEach(y=>y.stop()),c.current&&c.current.close(),s(!1)};return t?m.jsx("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center",children:m.jsxs("div",{className:"bg-[#1a2730] rounded-lg shadow-2xl p-6 max-w-4xl w-full mx-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Análisis Postural del Paciente"}),m.jsx("div",{className:"flex items-center gap-2",children:o?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-sm text-gray-300",children:i})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-sm text-gray-300",children:i})]})})]}),m.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[m.jsx("video",{ref:e,className:"hidden",playsInline:!0,muted:!0,autoPlay:!0}),m.jsx("canvas",{ref:n,className:"w-full h-auto"})]}),m.jsx("div",{className:"mt-4 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:m.jsx("p",{className:"text-sm text-blue-300 text-center",children:"Manténgase de pie frente a la cámara. El doctor está visualizando su postura en tiempo real."})})]})}):null},Kee=({historiaId:r})=>{const[t,e]=he.useState(!0),[n,i]=he.useState(!1),[a,o]=he.useState(null),[s,c]=he.useState(null),[l,u]=he.useState(""),[d,v]=he.useState(""),[p,y]=he.useState(""),[_,S]=he.useState(""),[w,x]=he.useState(""),[k,T]=he.useState(""),[R,U]=he.useState(""),[$,F]=he.useState(""),[M,J]=he.useState(""),[O,N]=he.useState(""),[q,j]=he.useState(""),[Z,X]=he.useState(!1);he.useEffect(()=>{ie()},[r]),he.useEffect(()=>{if($&&M){const E=parseFloat($),W=parseFloat(M);if(!isNaN(E)&&!isNaN(W)&&E>0){const G=E/100,ee=W/(G*G);N(ee.toFixed(2))}else N("")}else N("")},[$,M]);const se=()=>{const E=parseFloat(O);return isNaN(E)?"text-gray-400":E>=25?"text-red-500":"text-green-400"},H=()=>{const E=parseFloat(O);return isNaN(E)?"":E<18.5?"Bajo peso":E<25?"Normal":E<30?"Sobrepeso":"Obesidad"},ie=async()=>{try{e(!0),o(null);const E=await Ji.getMedicalHistory(r);c(E),u(E.mdAntecedentes||""),v(E.mdObsParaMiDocYa||""),y(E.mdObservacionesCertificado||""),S(E.mdRecomendacionesMedicasAdicionales||""),x(E.mdConceptoFinal||""),T(E.mdDx1||""),U(E.mdDx2||""),F(E.talla||""),J(E.peso||"")}catch(E){o(E.message||"Error al cargar historia clínica"),console.error("Error loading medical history:",E)}finally{e(!1)}},fe=async()=>{if(s)try{X(!0),o(null);const E={edad:s.edad,genero:s.genero,estadoCivil:s.estadoCivil,hijos:s.hijos,ejercicio:s.ejercicio,codEmpresa:s.codEmpresa,cargo:s.cargo,tipoExamen:s.tipoExamen,antecedentesFamiliares:s.antecedentesFamiliares,encuestaSalud:s.encuestaSalud,empresa1:s.empresa1},W=await Ji.generateAISuggestions(E);j(W)}catch(E){o(E.message||"Error al generar sugerencias con IA"),console.error("Error generating AI suggestions:",E),alert("Error al generar sugerencias con IA")}finally{X(!1)}},ne=async()=>{if(s)try{i(!0),o(null);const E=q?`${q}

${_}`.trim():_;let W=l;if(O){const G=`IMC: ${O} (${H()})`;W=l?`${l}

${G}`:G}await Ji.updateMedicalHistory({historiaId:s.historiaId,mdAntecedentes:W,mdObsParaMiDocYa:d,mdObservacionesCertificado:p,mdRecomendacionesMedicasAdicionales:E,mdConceptoFinal:w,mdDx1:k,mdDx2:R,talla:$,peso:M,cargo:s.cargo}),alert("Historia clínica guardada exitosamente")}catch(E){o(E.message||"Error al guardar historia clínica"),console.error("Error saving medical history:",E),alert("Error al guardar historia clínica")}finally{i(!1)}};if(t)return m.jsx("div",{className:"bg-[#1f2c34] rounded-xl p-6 text-white",children:m.jsxs("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00a884]"}),m.jsx("span",{className:"ml-3",children:"Cargando historia clínica..."})]})});if(a||!s){const E=a&&a.includes("Error al obtener historia clínica");return m.jsxs("div",{className:"h-full flex flex-col bg-[#1f2c34] text-white p-6",children:[m.jsx("div",{className:"mb-4",children:m.jsx("h2",{className:"text-xl font-bold text-red-400",children:"Error al Cargar Historia Clínica"})}),m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-4 mb-4",children:[m.jsx("p",{className:"text-red-400 mb-3",children:a||"No se encontró historia clínica para este paciente"}),E&&m.jsxs("div",{className:"mt-4 border-l-4 border-yellow-500 pl-4",children:[m.jsx("p",{className:"text-yellow-400 font-semibold mb-2",children:"⚠️ Configuración Pendiente"}),m.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Las funciones HTTP de Wix no están configuradas. Para activar esta funcionalidad:"}),m.jsxs("ol",{className:"text-sm text-gray-300 space-y-1 list-decimal list-inside",children:[m.jsx("li",{children:"Abre tu sitio de Wix (www.bsl.com.co)"}),m.jsx("li",{children:"Activa el Developer Mode (Velo)"}),m.jsx("li",{children:"Ve a Backend → http-functions.js"}),m.jsxs("li",{children:["Copia las funciones de: ",m.jsx("code",{className:"bg-gray-700 px-1 rounded",children:"backend/wix-backend-medical-history.js"})]}),m.jsx("li",{children:"Publica el sitio"})]}),m.jsxs("p",{className:"text-sm text-gray-400 mt-3",children:["ID de Historia: ",m.jsx("span",{className:"text-white font-mono",children:r})]})]})]})]})}return m.jsxs("div",{className:"h-full flex flex-col bg-[#1f2c34] text-white",children:[m.jsx("div",{className:"flex items-center p-4 border-b border-gray-700 bg-[#1f2c34] sticky top-0 z-10",children:m.jsx("h2",{className:"text-lg font-bold text-[#00a884]",children:"Historia Clínica"})}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2 text-[#00a884]",children:"Datos del Paciente"}),m.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Nombre:"}),m.jsxs("span",{className:"text-white ml-2",children:[s.primerNombre," ",s.segundoNombre," ",s.primerApellido," ",s.segundoApellido]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Documento:"}),m.jsx("span",{className:"text-white ml-2",children:s.numeroId})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Edad:"}),m.jsx("span",{className:"text-white ml-2",children:s.edad||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Género:"}),m.jsx("span",{className:"text-white ml-2",children:s.genero||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Celular:"}),m.jsx("span",{className:"text-white ml-2",children:s.celular})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Email:"}),m.jsx("span",{className:"text-white ml-2",children:s.email||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Estado Civil:"}),m.jsx("span",{className:"text-white ml-2",children:s.estadoCivil||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Hijos:"}),m.jsx("span",{className:"text-white ml-2",children:s.hijos||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Ejercicio:"}),m.jsx("span",{className:"text-white ml-2",children:s.ejercicio||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Empresa:"}),m.jsx("span",{className:"text-white ml-2",children:s.codEmpresa||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Cargo:"}),m.jsx("span",{className:"text-white ml-2",children:s.cargo||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Tipo Examen:"}),m.jsx("span",{className:"text-white ml-2",children:s.tipoExamen||"N/A"})]})]})]}),(s.antecedentesFamiliares||s.encuestaSalud||s.empresa1)&&m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2 text-[#00a884]",children:"Antecedentes"}),m.jsxs("div",{className:"space-y-2 text-xs",children:[s.antecedentesFamiliares&&m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Antecedentes Familiares:"}),m.jsx("p",{className:"text-white mt-1 whitespace-pre-wrap",children:s.antecedentesFamiliares})]}),s.encuestaSalud&&m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Encuesta de Salud:"}),m.jsx("p",{className:"text-white mt-1 whitespace-pre-wrap",children:s.encuestaSalud})]}),s.empresa1&&m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Cargo Anterior:"}),m.jsx("p",{className:"text-white mt-1",children:s.empresa1})]})]})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2 text-[#00a884]",children:"Medidas Físicas"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Talla (cm)"}),m.jsx("input",{type:"text",value:$,onChange:E=>F(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",placeholder:"170"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Peso (kg)"}),m.jsx("input",{type:"text",value:M,onChange:E=>J(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",placeholder:"70"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"IMC"}),m.jsx("input",{type:"text",value:O?`${O} (${H()})`:"",readOnly:!0,className:`w-full bg-[#2a3942] ${se()} text-sm px-2 py-2 rounded border border-gray-600 cursor-not-allowed font-semibold`,placeholder:"Auto"})]})]})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-3 text-[#00a884]",children:"Evaluación Médica"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Antecedentes"}),m.jsx("textarea",{value:l,onChange:E=>u(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Antecedentes médicos relevantes..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Obs. Certificado"}),m.jsx("textarea",{value:p,onChange:E=>y(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Observaciones para el certificado..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Recomendaciones Médicas Adicionales"}),m.jsx("textarea",{value:_,onChange:E=>S(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Recomendaciones médicas adicionales..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Observaciones privadas para la empresa"}),m.jsx("textarea",{value:d,onChange:E=>v(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Observaciones privadas para la empresa..."})]}),m.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Diagnóstico 1 (Principal)"}),m.jsxs("select",{value:k,onChange:E=>T(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",children:[m.jsx("option",{value:"",children:"Seleccione diagnóstico"}),m.jsx("option",{value:"Asma ocupacional",children:"Asma ocupacional"}),m.jsx("option",{value:"Bronquitis crónica por polvos inorgánicos",children:"Bronquitis crónica por polvos inorgánicos"}),m.jsx("option",{value:"Bursitis de codo",children:"Bursitis de codo"}),m.jsx("option",{value:"Bursitis de hombro",children:"Bursitis de hombro"}),m.jsx("option",{value:"Bursitis de rodilla",children:"Bursitis de rodilla"}),m.jsx("option",{value:"Cervicalgia",children:"Cervicalgia"}),m.jsx("option",{value:"Dermatitis alérgica de contacto",children:"Dermatitis alérgica de contacto"}),m.jsx("option",{value:"Dermatitis irritativa de contacto",children:"Dermatitis irritativa de contacto"}),m.jsx("option",{value:"Dorsalgia",children:"Dorsalgia"}),m.jsx("option",{value:"Epicondilitis lateral (codo de tenista)",children:"Epicondilitis lateral (codo de tenista)"}),m.jsx("option",{value:"Epicondilitis medial",children:"Epicondilitis medial"}),m.jsx("option",{value:"Escoliosis",children:"Escoliosis"}),m.jsx("option",{value:"Espondiloartrosis cervical",children:"Espondiloartrosis cervical"}),m.jsx("option",{value:"Espondiloartrosis lumbar",children:"Espondiloartrosis lumbar"}),m.jsx("option",{value:"Espondilosis cervical",children:"Espondilosis cervical"}),m.jsx("option",{value:"Espondilosis lumbar",children:"Espondilosis lumbar"}),m.jsx("option",{value:"Estrés postraumático",children:"Estrés postraumático"}),m.jsx("option",{value:"Gonalgia (dolor de rodilla)",children:"Gonalgia (dolor de rodilla)"}),m.jsx("option",{value:"Hernia discal cervical",children:"Hernia discal cervical"}),m.jsx("option",{value:"Hernia discal lumbar",children:"Hernia discal lumbar"}),m.jsx("option",{value:"Hipoacusia neurosensorial bilateral",children:"Hipoacusia neurosensorial bilateral"}),m.jsx("option",{value:"Lumbalgia",children:"Lumbalgia"}),m.jsx("option",{value:"Mialgia",children:"Mialgia"}),m.jsx("option",{value:"Obesidad",children:"Obesidad"}),m.jsx("option",{value:"Onicomicosis",children:"Onicomicosis"}),m.jsx("option",{value:"Pérdida auditiva inducida por ruido",children:"Pérdida auditiva inducida por ruido"}),m.jsx("option",{value:"Presbiacusia",children:"Presbiacusia"}),m.jsx("option",{value:"Síndrome de Burnout",children:"Síndrome de Burnout"}),m.jsx("option",{value:"Síndrome de túnel carpiano",children:"Síndrome de túnel carpiano"}),m.jsx("option",{value:"Síndrome del manguito rotador",children:"Síndrome del manguito rotador"}),m.jsx("option",{value:"Sinovitis de muñeca",children:"Sinovitis de muñeca"}),m.jsx("option",{value:"Sobrepeso",children:"Sobrepeso"}),m.jsx("option",{value:"Tenosinovitis de De Quervain",children:"Tenosinovitis de De Quervain"}),m.jsx("option",{value:"Tendinitis de hombro",children:"Tendinitis de hombro"}),m.jsx("option",{value:"Tendinitis del manguito rotador",children:"Tendinitis del manguito rotador"}),m.jsx("option",{value:"Trastorno adaptativo con ansiedad",children:"Trastorno adaptativo con ansiedad"}),m.jsx("option",{value:"Trastorno de ansiedad generalizada",children:"Trastorno de ansiedad generalizada"}),m.jsx("option",{value:"Trastorno depresivo",children:"Trastorno depresivo"}),m.jsx("option",{value:"Trastornos del sueño",children:"Trastornos del sueño"}),m.jsx("option",{value:"Trauma acústico agudo",children:"Trauma acústico agudo"}),m.jsx("option",{value:"Vértigo posicional",children:"Vértigo posicional"}),m.jsx("option",{value:"Vitiligo",children:"Vitiligo"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Diagnóstico 2 (Secundario)"}),m.jsxs("select",{value:R,onChange:E=>U(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",children:[m.jsx("option",{value:"",children:"Seleccione diagnóstico"}),m.jsx("option",{value:"Asma ocupacional",children:"Asma ocupacional"}),m.jsx("option",{value:"Bronquitis crónica por polvos inorgánicos",children:"Bronquitis crónica por polvos inorgánicos"}),m.jsx("option",{value:"Bursitis de codo",children:"Bursitis de codo"}),m.jsx("option",{value:"Bursitis de hombro",children:"Bursitis de hombro"}),m.jsx("option",{value:"Bursitis de rodilla",children:"Bursitis de rodilla"}),m.jsx("option",{value:"Cervicalgia",children:"Cervicalgia"}),m.jsx("option",{value:"Dermatitis alérgica de contacto",children:"Dermatitis alérgica de contacto"}),m.jsx("option",{value:"Dermatitis irritativa de contacto",children:"Dermatitis irritativa de contacto"}),m.jsx("option",{value:"Dorsalgia",children:"Dorsalgia"}),m.jsx("option",{value:"Epicondilitis lateral (codo de tenista)",children:"Epicondilitis lateral (codo de tenista)"}),m.jsx("option",{value:"Epicondilitis medial",children:"Epicondilitis medial"}),m.jsx("option",{value:"Escoliosis",children:"Escoliosis"}),m.jsx("option",{value:"Espondiloartrosis cervical",children:"Espondiloartrosis cervical"}),m.jsx("option",{value:"Espondiloartrosis lumbar",children:"Espondiloartrosis lumbar"}),m.jsx("option",{value:"Espondilosis cervical",children:"Espondilosis cervical"}),m.jsx("option",{value:"Espondilosis lumbar",children:"Espondilosis lumbar"}),m.jsx("option",{value:"Estrés postraumático",children:"Estrés postraumático"}),m.jsx("option",{value:"Gonalgia (dolor de rodilla)",children:"Gonalgia (dolor de rodilla)"}),m.jsx("option",{value:"Hernia discal cervical",children:"Hernia discal cervical"}),m.jsx("option",{value:"Hernia discal lumbar",children:"Hernia discal lumbar"}),m.jsx("option",{value:"Hipoacusia neurosensorial bilateral",children:"Hipoacusia neurosensorial bilateral"}),m.jsx("option",{value:"Lumbalgia",children:"Lumbalgia"}),m.jsx("option",{value:"Mialgia",children:"Mialgia"}),m.jsx("option",{value:"Obesidad",children:"Obesidad"}),m.jsx("option",{value:"Onicomicosis",children:"Onicomicosis"}),m.jsx("option",{value:"Pérdida auditiva inducida por ruido",children:"Pérdida auditiva inducida por ruido"}),m.jsx("option",{value:"Presbiacusia",children:"Presbiacusia"}),m.jsx("option",{value:"Síndrome de Burnout",children:"Síndrome de Burnout"}),m.jsx("option",{value:"Síndrome de túnel carpiano",children:"Síndrome de túnel carpiano"}),m.jsx("option",{value:"Síndrome del manguito rotador",children:"Síndrome del manguito rotador"}),m.jsx("option",{value:"Sinovitis de muñeca",children:"Sinovitis de muñeca"}),m.jsx("option",{value:"Sobrepeso",children:"Sobrepeso"}),m.jsx("option",{value:"Tenosinovitis de De Quervain",children:"Tenosinovitis de De Quervain"}),m.jsx("option",{value:"Tendinitis de hombro",children:"Tendinitis de hombro"}),m.jsx("option",{value:"Tendinitis del manguito rotador",children:"Tendinitis del manguito rotador"}),m.jsx("option",{value:"Trastorno adaptativo con ansiedad",children:"Trastorno adaptativo con ansiedad"}),m.jsx("option",{value:"Trastorno de ansiedad generalizada",children:"Trastorno de ansiedad generalizada"}),m.jsx("option",{value:"Trastorno depresivo",children:"Trastorno depresivo"}),m.jsx("option",{value:"Trastornos del sueño",children:"Trastornos del sueño"}),m.jsx("option",{value:"Trauma acústico agudo",children:"Trauma acústico agudo"}),m.jsx("option",{value:"Vértigo posicional",children:"Vértigo posicional"}),m.jsx("option",{value:"Vitiligo",children:"Vitiligo"})]})]})]}),m.jsxs("div",{className:"border-2 border-blue-500/30 rounded-lg p-3 bg-blue-900/10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"block text-xs text-blue-400 font-semibold",children:"Sugerencias IA"}),m.jsx("button",{onClick:fe,disabled:Z,className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-1",children:Z?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generando..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Generar con IA"]})})]}),m.jsx("textarea",{value:q,onChange:E=>j(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-blue-500/30 focus:border-blue-400 focus:outline-none",rows:5,placeholder:"Haz clic en 'Generar con IA' para obtener recomendaciones médicas personalizadas basadas en los datos del paciente..."}),m.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:"Estas sugerencias se concatenarán automáticamente con las recomendaciones médicas adicionales al guardar"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Concepto Final"}),m.jsxs("select",{value:w,onChange:E=>x(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",children:[m.jsx("option",{value:"",children:"Seleccione una opción"}),m.jsx("option",{value:"ELEGIBLE PARA EL CARGO SIN RECOMENDACIONES LABORALES",children:"ELEGIBLE PARA EL CARGO SIN RECOMENDACIONES LABORALES"}),m.jsx("option",{value:"ELEGIBLE PARA EL CARGO CON RECOMENDACIONES LABORALES",children:"ELEGIBLE PARA EL CARGO CON RECOMENDACIONES LABORALES"}),m.jsx("option",{value:"NO ELEGIBLE PARA EL CARGO POR FUERA DEL PROFESIOGRAMA",children:"NO ELEGIBLE PARA EL CARGO POR FUERA DEL PROFESIOGRAMA"}),m.jsx("option",{value:"PENDIENTE",children:"PENDIENTE"}),m.jsx("option",{value:"NO PRESENTA DETERIORO FÍSICO POR ACTIVIDAD LABORAL",children:"NO PRESENTA DETERIORO FÍSICO POR ACTIVIDAD LABORAL"}),m.jsx("option",{value:"Puede realizar actividades escolares y grupales",children:"Puede realizar actividades escolares y grupales"})]})]})]})]})]}),m.jsx("div",{className:"border-t border-gray-700 p-4 bg-[#1f2c34]",children:m.jsx("button",{onClick:ne,disabled:n,className:"w-full bg-[#00a884] text-white px-6 py-3 rounded-lg hover:bg-[#008f6f] transition font-semibold disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg",children:n?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):"Guardar Historia Clínica"})})]})},E_=({identity:r,roomName:t,role:e,historiaId:n,documento:i,onLeave:a})=>{const[o,s]=he.useState(!1),{localParticipant:c,remoteParticipants:l,isConnecting:u,isConnected:d,error:v,connectToRoom:p,disconnectFromRoom:y,toggleAudio:_,toggleVideo:S,isAudioEnabled:w,isVideoEnabled:x,localVideoTrack:k}=hQ({identity:r,roomName:t,role:e,documento:i}),{currentEffect:T,isProcessing:R,applyBlur:U,applyVirtualBackground:$,removeEffect:F}=tJ(),M=QJ({roomName:t,doctorIdentity:r,role:e||"patient",enabled:!0}),{sessionActive:J,patientConnected:O,latestPoseData:N,startSession:q,endSession:j,sendPoseData:Z}=M,X=()=>{y(),a==null||a()},se=()=>{k&&U(k)},H=W=>{k&&$(k,W)},ie=()=>{k&&F(k)},fe=()=>{s(!0)},ne=()=>{J&&j(),s(!1)};if(v)return m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsx("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h2",{className:"text-2xl font-semibold text-white mb-3",children:"Error de Conexión"}),m.jsx("p",{className:"text-gray-400 mb-8",children:v}),m.jsx("button",{onClick:p,className:"w-full bg-[#00a884] text-white px-6 py-3 rounded-xl hover:bg-[#008f6f] transition font-semibold",children:"Reintentar"})]})})});if(!d)return m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsx("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-white mb-6",children:"Consulta Video"}),m.jsxs("div",{className:"space-y-3 mb-8",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3 text-left",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Sala"}),m.jsx("p",{className:"text-white font-medium",children:t})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3 text-left",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Usuario"}),m.jsx("p",{className:"text-white font-medium",children:r})]})]}),m.jsx("button",{onClick:p,disabled:u,className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition disabled:bg-gray-600 disabled:cursor-not-allowed font-semibold shadow-lg",children:u?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Conectando..."]}):"Unirse a la Llamada"}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Conexión segura end-to-end"})]})})]})})});const E=Array.from(l.values());return m.jsxs("div",{className:"min-h-screen bg-[#0b141a] flex",children:[e==="doctor"&&n&&m.jsx("div",{className:"fixed top-0 right-0 h-full bg-[#1f2c34] shadow-2xl z-50",style:{width:"450px",maxWidth:"90vw"},children:m.jsx(Kee,{historiaId:n})}),m.jsxs("div",{className:"flex-1 flex flex-col",children:[m.jsxs("div",{className:"bg-[#1f2c34] px-4 py-3 flex items-center justify-between shadow-lg",children:[m.jsx("button",{onClick:X,className:"text-white p-2 hover:bg-white/10 rounded-full transition","aria-label":"Volver",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[m.jsx("img",{src:"/logoBlanco.png",alt:"BSL",className:"h-8 w-auto"}),m.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"End-to-end Encrypted"})]})]}),m.jsx("button",{className:"text-white p-2 hover:bg-white/10 rounded-full transition","aria-label":"Información",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),m.jsxs("div",{className:"flex-1 relative overflow-hidden bg-[#0b141a]",children:[E.length>0?m.jsx("div",{className:"absolute inset-0 w-full h-full",children:m.jsx(xg,{participant:E[0]})}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#0b141a]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("img",{src:"/logoBlanco.png",alt:"BSL",className:"h-16 w-auto mx-auto mb-4 opacity-50"}),m.jsx("p",{className:"text-gray-500",children:"Esperando participantes..."})]})}),c&&m.jsx("div",{className:"absolute top-3 right-3 w-36 h-48 sm:w-40 sm:h-56 md:w-32 md:h-48 rounded-2xl overflow-hidden shadow-2xl border-2 border-white/30 z-10",children:m.jsx(xg,{participant:c,isLocal:!0})}),E.length>1&&m.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4 z-10",children:m.jsx("div",{className:"flex gap-2 justify-center overflow-x-auto pb-2",children:E.slice(1).map(W=>m.jsx("div",{className:"w-24 h-32 rounded-lg overflow-hidden flex-shrink-0 border-2 border-gray-700",children:m.jsx(xg,{participant:W})},W.sid))})})]}),m.jsx(JJ,{isAudioEnabled:w,isVideoEnabled:x,onToggleAudio:_,onToggleVideo:S,onLeave:X,showBackgroundControls:e==="doctor"&&!!k,onApplyBlur:se,onApplyVirtualBackground:H,onRemoveEffect:ie,isProcessingBackground:R,currentBackgroundEffect:T,showPosturalAnalysis:e==="doctor",onOpenPosturalAnalysis:fe}),e==="doctor"&&m.jsx(zee,{isOpen:o,onClose:ne,roomName:t,sessionActive:J,patientConnected:O,latestPoseData:N,onStartSession:q,onEndSession:j}),e==="patient"&&J&&m.jsx(Gee,{onPoseData:Z,isActive:J})]})]})},Qee=()=>{const r=Date.now().toString(36),t=Math.random().toString(36).substring(2,7);return`consulta-${r}-${t}`},Yee=r=>`${window.location.origin}/patient/${r}`,Jee=async r=>{try{return await navigator.clipboard.writeText(r),!0}catch(t){return console.error("Error al copiar al clipboard:",t),!1}},Xee=()=>{const[r,t]=he.useState(""),[e,n]=he.useState(""),[i,a]=he.useState(""),[o,s]=he.useState(!1),[c,l]=he.useState(!1),u=()=>{if(!r.trim())return;const y=Qee(),_=Yee(y);n(y),a(_)},d=async()=>{await Jee(i)&&(l(!0),setTimeout(()=>l(!1),2e3))},v=()=>{s(!0)},p=()=>{s(!1),n(""),a(""),t("")};return o?m.jsx(E_,{identity:r,roomName:e,role:"doctor",onLeave:p}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Panel del Médico"})]}),i?m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4 border border-gray-600",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Link para el Paciente"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"text",value:i,readOnly:!0,className:"flex-1 bg-[#1f2c34] text-white px-3 py-2 rounded-lg text-sm border border-gray-700"}),m.jsx("button",{onClick:d,className:"bg-[#00a884] text-white px-4 py-2 rounded-lg hover:bg-[#008f6f] transition text-sm font-medium whitespace-nowrap",children:c?"✓ Copiado":"Copiar"})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Comparte este link con tu paciente por WhatsApp, email o mensaje de texto"})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Sala"}),m.jsx("p",{className:"text-white font-medium text-sm",children:e})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Médico"}),m.jsx("p",{className:"text-white font-medium text-sm",children:r})]}),m.jsx("button",{onClick:v,className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg",children:"Iniciar Consulta"}),m.jsx("button",{onClick:()=>{n(""),a("")},className:"w-full bg-transparent text-gray-400 px-6 py-2 rounded-xl hover:text-white transition text-sm",children:"Cancelar"})]}):m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"doctorName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Tu Nombre (Médico)"}),m.jsx("input",{type:"text",id:"doctorName",value:r,onChange:y=>t(y.target.value),placeholder:"Ej: Dr. Juan Pérez",className:"w-full px-4 py-3 bg-[#2a3942] text-white border border-gray-600 rounded-xl focus:ring-2 focus:ring-[#00a884] focus:border-[#00a884] outline-none transition placeholder-gray-500",required:!0})]}),m.jsx("button",{onClick:u,disabled:!r.trim(),className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Crear Sala de Consulta"})]})]})})},Zee=()=>{const{roomName:r}=E4(),[t]=N4(),[e,n]=he.useState(""),[i,a]=he.useState(!1),o=t.get("doctor"),s=t.get("documento"),c=t.get("paciente");he.useEffect(()=>{o&&n(o)},[o]);const l=()=>{e.trim()&&a(!0)},u=()=>{a(!1)};return i&&r?m.jsx(E_,{identity:`Dr. ${e}`,roomName:r,role:"doctor",historiaId:s||void 0,onLeave:u}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Panel del Médico"})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4 mb-6 border border-gray-600 space-y-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Sala de Consulta"}),m.jsx("p",{className:"text-white font-medium text-sm break-all",children:r})]}),c&&m.jsxs("div",{className:"pt-3 border-t border-gray-600",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Paciente"}),m.jsx("p",{className:"text-white font-semibold text-base",children:c})]})]}),m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"doctorName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Código de Médico"}),m.jsx("input",{type:"text",id:"doctorName",value:e,onChange:d=>n(d.target.value),placeholder:"Ingresa tu código",className:"w-full px-4 py-3 bg-[#2a3942] text-white border border-gray-600 rounded-xl focus:ring-2 focus:ring-[#00a884] focus:border-[#00a884] outline-none transition placeholder-gray-500",required:!0})]}),m.jsx("button",{onClick:l,disabled:!e.trim(),className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Unirse a la Consulta"}),m.jsx("div",{className:"bg-[#2a3942] rounded-xl p-4 border border-gray-600",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("svg",{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-300 font-medium mb-1",children:"Información"}),m.jsx("p",{className:"text-xs text-gray-400",children:"Tu paciente se conectará automáticamente a esta sala cuando abra el link que le enviaste por WhatsApp."})]})]})})]}),m.jsx("div",{className:"mt-8 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Conexión segura end-to-end"})]})})]})})},ete=()=>{const{roomName:r}=E4(),[t]=N4(),[e,n]=he.useState(""),[i,a]=he.useState(!1),o=t.get("nombre"),s=t.get("apellido"),c=t.get("doctor"),l=t.get("documento");he.useEffect(()=>{if(o&&s){const v=`${o} ${s}`;n(v)}},[o,s]);const u=()=>{e.trim()&&a(!0)},d=()=>{a(!1),n("")};return i&&r?m.jsx(E_,{identity:e,roomName:r,role:"patient",documento:l||void 0,onLeave:d}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Unirse a la Consulta"})]}),m.jsxs("div",{className:"space-y-5",children:[c&&m.jsx("div",{className:"bg-[#00a884]/10 border border-[#00a884]/30 rounded-xl px-4 py-3",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("svg",{className:"w-4 h-4 text-[#00a884]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-400",children:"Conectándose con"}),m.jsxs("p",{className:"text-white font-medium text-sm",children:["Dr. ",c]})]})]})}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Sala de Consulta"}),m.jsx("p",{className:"text-white font-medium text-sm break-all",children:r})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"patientName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Tu Nombre"}),m.jsx("input",{type:"text",id:"patientName",value:e,onChange:v=>n(v.target.value),placeholder:"Ej: María González",className:"w-full px-4 py-3 bg-[#2a3942] text-white border border-gray-600 rounded-xl focus:ring-2 focus:ring-[#00a884] focus:border-[#00a884] outline-none transition placeholder-gray-500",onKeyDown:v=>{v.key==="Enter"&&u()},autoFocus:!0,required:!0})]}),m.jsx("button",{onClick:u,disabled:!e.trim(),className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Unirse a la Consulta"}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Asegúrate de permitir el acceso a tu cámara y micrófono"})]})})]})]})})},tte="";class rte{constructor(){jt(this,"client");this.client=pr.create({baseURL:tte,headers:{"Content-Type":"application/json"}})}async getDailyStats(t){return(await this.client.get(`/api/medical-panel/stats/${t}`)).data}async getPendingPatients(t,e=0,n=10){return(await this.client.get(`/api/medical-panel/patients/pending/${t}`,{params:{page:e,pageSize:n}})).data}async searchPatientByDocument(t,e){return(await this.client.get(`/api/medical-panel/patients/search/${t}`,{params:e?{medicoCode:e}:{}})).data}async getPatientDetails(t){return(await this.client.get(`/api/medical-panel/patients/details/${t}`)).data}async markAsNoAnswer(t){await this.client.patch(`/api/medical-panel/patients/${t}/no-answer`)}generateWhatsAppLink(t,e){return`https://api.whatsapp.com/send?phone=${this.formatPhoneNumber(t)}&text=${encodeURIComponent(e)}`}formatPhoneNumber(t){let e=t.replace(/[\s\(\)\+\-]/g,"");if(e.startsWith("57")&&e.length>=10)return"+"+e;if(e.length===10&&e.startsWith("3"))return"+57"+e;const n=["1","52","54","55","34","44","49","33"];for(const i of n)if(e.startsWith(i))return"+"+e;return"+57"+e}generateRoomName(){const t=Date.now().toString(36),e=Math.random().toString(36).substring(2,7);return`consulta-${t}-${e}`}}const ka=new rte;function nte(){const[r,t]=he.useState(""),[e,n]=he.useState(!1),[i,a]=he.useState(!1),[o,s]=he.useState(null),[c,l]=he.useState([]),[u,d]=he.useState(0),[v,p]=he.useState(0),[y,_]=he.useState({}),[S,w]=he.useState(""),[x,k]=he.useState(null),[T,R]=he.useState(!1),[U,$]=he.useState(null),[F,M]=he.useState(null),[J,O]=he.useState(null),[N,q]=he.useState(null),[j,Z]=he.useState(null),[X,se]=he.useState(new Set),[H,ie]=he.useState({}),fe=10,ne=async()=>{if(!r){M("Por favor ingrese el código de médico");return}a(!0),M(null);try{const re=await ka.getDailyStats(r);s(re);const z=await ka.getPendingPatients(r,u,fe);l(z.patients),p(z.totalPages),n(!0)}catch(re){console.error("Error cargando datos:",re),M("Error al cargar los datos. Verifique el código de médico.")}finally{a(!1)}},E=async re=>{re.preventDefault(),await ne()},W=async()=>{await ne()},G=async re=>{re<0||re>=v||d(re)};he.useEffect(()=>{e&&r&&ne()},[u]),he.useEffect(()=>{if(!e)return;const re=window.location.origin;console.log("[MedicalPanel] Connecting to Socket.io at:",re);const z=Lu(re,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});return z.on("connect",()=>{console.log("[MedicalPanel] Socket.io connected")}),z.on("disconnect",()=>{console.log("[MedicalPanel] Socket.io disconnected")}),z.on("patient-connected",nt=>{console.log("[MedicalPanel] Patient connected:",nt),se(Ke=>{const $e=new Set(Ke);return $e.add(nt.documento),$e})}),z.on("patient-disconnected",nt=>{console.log("[MedicalPanel] Patient disconnected:",nt),se(Ke=>{const $e=new Set(Ke);return $e.delete(nt.documento),$e})}),()=>{console.log("[MedicalPanel] Disconnecting Socket.io"),z.disconnect()}},[e]);const ee=async re=>{try{await ka.markAsNoAnswer(re),_({...y,[re]:!0}),await ne()}catch(z){console.error("Error marcando como no contesta:",z)}},oe=re=>{let z=re.replace(/[\s\(\)\-]/g,"");return z.startsWith("+")?z:/^(1|52|57|54|55|34|44|49|33)\d{10,}/.test(z)?`+${z}`:/^3\d{9}$/.test(z)?`+57${z}`:(console.warn(`⚠️ Número telefónico con formato desconocido: ${z}`),z)},ue=async re=>{q(re._id);try{const z=ka.generateRoomName();ie(st=>({...st,[re._id]:z}));const nt=`${window.location.origin}/patient/${z}`,Ke=new URLSearchParams({nombre:re.primerNombre,apellido:re.primerApellido,documento:re._id,doctor:r}),$e=`${nt}?${Ke.toString()}`,Ee=`Hola ${re.primerNombre}. Te escribimos de BSL. Tienes una cita médica programada conmigo

Conéctate al link:

${$e}`,Ie=oe(re.celular),Ne=Ie.substring(1);await Ji.sendWhatsApp(Ne,Ee),console.log("WhatsApp enviado exitosamente");try{console.log(`📞 Iniciando llamada a: ${Ie}`),await Ji.makeVoiceCall(Ie,re.primerNombre),console.log("✅ Llamada telefónica iniciada exitosamente")}catch(st){console.error("❌ Error realizando llamada telefónica:",st)}alert(`✅ Mensaje de WhatsApp enviado y llamada iniciada a ${re.primerNombre}`)}catch(z){console.error("Error al contactar paciente:",z),alert("Error al contactar paciente. Inténtalo nuevamente.")}finally{q(null)}},ye=async re=>{Z(re._id);try{const z=oe(re.celular);console.log(`📞 Rellamando a: ${z}`),await Ji.makeVoiceCall(z,re.primerNombre),console.log("✅ Rellamada iniciada exitosamente"),alert(`✅ Llamada iniciada a ${re.primerNombre}`)}catch(z){console.error("❌ Error al rellamar paciente:",z),alert("Error al realizar la llamada. Inténtalo nuevamente.")}finally{Z(null)}},me=async re=>{O(re._id);try{let z=H[re._id];z||(z=ka.generateRoomName(),ie(Ke=>({...Ke,[re._id]:z})));const nt=`${window.location.origin}/doctor/${z}?doctor=${r}&documento=${re._id}&paciente=${encodeURIComponent(re.nombres)}`;window.open(nt,"_blank")}catch(z){console.error("Error al atender paciente:",z),alert("Error al abrir sala de consulta. Inténtalo nuevamente.")}finally{O(null)}},be=re=>{_({...y,[re]:!y[re]})},Te=async re=>{if(re.preventDefault(),!S.trim()){$("Por favor ingrese un documento o celular");return}R(!0),$(null),k(null);try{const z=await ka.searchPatientByDocument(S.trim());z?k(z):$("No se encontró paciente con ese documento o celular")}catch(z){console.error("Error buscando paciente:",z),$("Error al buscar paciente")}finally{R(!1)}},Re=()=>{w(""),k(null),$(null)},Oe=(re,z=!1)=>{if(!z)return`Hola ${re.primerNombre}. Te escribimos de BSL. Tienes una cita médica programada conmigo`;const nt=ka.generateRoomName(),Ke=`${window.location.origin}/patient/${nt}?nombre=${re.primerNombre}&apellido=${re.primerApellido}`;return`Hola ${re.primerNombre}. Te escribimos de BSL. Tienes una cita médica programada conmigo

Conéctate al link:

${Ke}`};return e?m.jsx("div",{className:"min-h-screen bg-[#0b141a] p-4",children:m.jsxs("div",{className:"max-w-7xl mx-auto",children:[m.jsxs("div",{className:"bg-[#1f2c34] rounded-2xl shadow-xl p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-12 w-auto"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-white",children:"Panel Médico"}),m.jsxs("p",{className:"text-gray-400 text-sm",children:["Código: ",r]})]})]}),m.jsx("button",{onClick:W,disabled:i,className:"bg-[#00a884] text-white px-4 py-2 rounded-xl hover:bg-[#008f6f] transition font-semibold disabled:opacity-50",children:i?"⟳":"↻ Actualizar"})]}),o&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4",children:[m.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Programados Hoy"}),m.jsx("div",{className:"text-3xl font-bold text-white",children:o.programadosHoy})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4",children:[m.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Atendidos Hoy"}),m.jsx("div",{className:"text-3xl font-bold text-[#00a884]",children:o.atendidosHoy})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4",children:[m.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Restantes Hoy"}),m.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:o.restantesHoy})]})]})]}),m.jsxs("div",{className:"bg-[#1f2c34] rounded-2xl shadow-xl p-6 mb-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Buscar Paciente"}),m.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",placeholder:"Buscar por documento o celular...",value:S,onChange:re=>w(re.target.value),className:"flex-1 px-4 py-3 bg-[#2a3942] border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-[#00a884] transition"}),m.jsx("button",{type:"submit",disabled:T||!S.trim(),className:"bg-[#00a884] text-white px-6 py-3 rounded-xl hover:bg-[#008f6f] transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:T?"🔍":"🔎 Buscar"}),(x||U)&&m.jsx("button",{type:"button",onClick:Re,className:"bg-gray-600 text-white px-4 py-3 rounded-xl hover:bg-gray-700 transition font-semibold",children:"✕ Limpiar"})]}),U&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-3 text-red-400 text-sm",children:U}),x&&m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4 mt-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:"✅ Paciente encontrado"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{className:"col-span-2 flex items-center gap-3 mb-2",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Nombre:"}),m.jsxs("span",{className:"text-white ml-2 font-semibold",children:[x.nombres,x.tipoExamen&&m.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-400",children:["(",x.tipoExamen,")"]})]})]}),X.has(x._id)&&m.jsxs("div",{className:"flex items-center gap-2 bg-green-500/20 px-3 py-1 rounded-full border border-green-500/50",children:[m.jsxs("div",{className:"relative flex items-center justify-center w-2 h-2",children:[m.jsx("div",{className:"absolute w-2 h-2 bg-green-500 rounded-full animate-ping"}),m.jsx("div",{className:"relative w-2 h-2 bg-green-500 rounded-full"})]}),m.jsx("span",{className:"text-green-400 text-xs font-medium uppercase tracking-wide",children:"Conectado"})]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Doc:"}),m.jsx("span",{className:"text-white ml-2",children:x.numeroId})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:"Celular:"}),m.jsx("span",{className:"text-white ml-2",children:x.celular||"NO REGISTRA"}),x.celular&&m.jsx("a",{href:ka.generateWhatsAppLink(x.celular,Oe(x,!1)),target:"_blank",rel:"noopener noreferrer",className:"text-[#25D366] hover:text-[#1da851] transition",title:"Enviar WhatsApp",children:m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Empresa:"}),m.jsx("span",{className:"text-white ml-2",children:x.empresaListado==="SANITHELP-JJ"?"PARTICULAR":x.empresaListado})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Fecha atención:"}),m.jsx("span",{className:"text-white ml-2",children:new Date(x.fechaAtencion).toLocaleString()})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Estado:"}),m.jsx("span",{className:"text-white ml-2",children:x.estado})]})]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>ue(x),disabled:N===x._id,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:N===x._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Contactando..."]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M20 10.999h2C22 5.869 18.127 2 12.99 2v2C17.052 4 20 6.943 20 10.999z"}),m.jsx("path",{d:"M13 8c2.103 0 3 .897 3 3h2c0-3.225-1.775-5-5-5v2zm3.422 5.443a1.001 1.001 0 0 0-1.391.043l-2.393 2.461c-.576-.11-1.734-.471-2.926-1.66-1.192-1.193-1.553-2.354-1.66-2.926l2.459-2.394a1 1 0 0 0 .043-1.391L6.859 3.513a1 1 0 0 0-1.391-.087l-2.17 1.861a1 1 0 0 0-.29.649c-.015.25-.301 6.172 4.291 10.766C11.305 20.707 16.323 21 17.705 21c.202 0 .326-.006.359-.008a.992.992 0 0 0 .648-.291l1.86-2.171a.997.997 0 0 0-.086-1.391l-4.064-3.696z"})]}),"Contactar"]})}),m.jsx("button",{onClick:()=>ye(x),disabled:j===x._id,className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:j===x._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Llamando..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"})}),"Rellamar"]})})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>me(x),disabled:J===x._id,className:"bg-[#00a884] text-white px-4 py-2 rounded-lg hover:bg-[#008f6f] transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:J===x._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Abriendo sala..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}),"Atender"]})}),m.jsx("button",{onClick:()=>ee(x._id),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm font-medium flex items-center gap-2",children:"No Contesta"})]})]})]})]})]})]}),m.jsxs("div",{className:"bg-[#1f2c34] rounded-2xl shadow-xl p-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Pacientes Pendientes"}),i?m.jsx("div",{className:"text-center py-8 text-gray-400",children:"Cargando pacientes..."}):c.length===0?m.jsx("div",{className:"text-center py-8 text-gray-400",children:"No hay pacientes pendientes"}):m.jsx("div",{className:"space-y-4",children:c.map(re=>m.jsx("div",{className:`bg-[#2a3942] rounded-xl overflow-hidden transition-all ${y[re._id]?"opacity-50":""}`,children:m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsxs("h3",{className:"text-lg font-semibold text-white",children:[re.nombres,re.tipoExamen&&m.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-400",children:["(",re.tipoExamen,")"]})]}),X.has(re._id)&&m.jsxs("div",{className:"flex items-center gap-2 bg-green-500/20 px-3 py-1 rounded-full border border-green-500/50",children:[m.jsxs("div",{className:"relative flex items-center justify-center w-2 h-2",children:[m.jsx("div",{className:"absolute w-2 h-2 bg-green-500 rounded-full animate-ping"}),m.jsx("div",{className:"relative w-2 h-2 bg-green-500 rounded-full"})]}),m.jsx("span",{className:"text-green-400 text-xs font-medium uppercase tracking-wide",children:"Conectado"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Doc:"}),m.jsx("span",{className:"text-white ml-2",children:re.numeroId})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:"Celular:"}),m.jsx("span",{className:"text-white ml-2",children:re.celular||"NO REGISTRA"}),re.celular&&m.jsx("a",{href:ka.generateWhatsAppLink(re.celular,Oe(re,!1)),target:"_blank",rel:"noopener noreferrer",className:"text-[#25D366] hover:text-[#1da851] transition",title:"Enviar WhatsApp",children:m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Empresa:"}),m.jsx("span",{className:"text-white ml-2",children:re.empresaListado==="SANITHELP-JJ"?"PARTICULAR":re.empresaListado})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Fecha:"}),m.jsx("span",{className:"text-white ml-2",children:new Date(re.fechaAtencion).toLocaleString()})]})]})]}),m.jsx("button",{onClick:()=>be(re._id),className:"text-gray-400 hover:text-white ml-4",children:y[re._id]?"▼":"▲"})]}),!y[re._id]&&m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>ue(re),disabled:N===re._id,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:N===re._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Contactando..."]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M20 10.999h2C22 5.869 18.127 2 12.99 2v2C17.052 4 20 6.943 20 10.999z"}),m.jsx("path",{d:"M13 8c2.103 0 3 .897 3 3h2c0-3.225-1.775-5-5-5v2zm3.422 5.443a1.001 1.001 0 0 0-1.391.043l-2.393 2.461c-.576-.11-1.734-.471-2.926-1.66-1.192-1.193-1.553-2.354-1.66-2.926l2.459-2.394a1 1 0 0 0 .043-1.391L6.859 3.513a1 1 0 0 0-1.391-.087l-2.17 1.861a1 1 0 0 0-.29.649c-.015.25-.301 6.172 4.291 10.766C11.305 20.707 16.323 21 17.705 21c.202 0 .326-.006.359-.008a.992.992 0 0 0 .648-.291l1.86-2.171a.997.997 0 0 0-.086-1.391l-4.064-3.696z"})]}),"Contactar"]})}),m.jsx("button",{onClick:()=>ye(re),disabled:j===re._id,className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:j===re._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Llamando..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"})}),"Rellamar"]})})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>me(re),disabled:J===re._id,className:"bg-[#00a884] text-white px-4 py-2 rounded-lg hover:bg-[#008f6f] transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:J===re._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Abriendo sala..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}),"Atender"]})}),m.jsx("button",{onClick:()=>ee(re._id),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm font-medium flex items-center gap-2",children:"No Contesta"})]})]})]})},re._id))}),v>1&&m.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:()=>G(u-1),disabled:u===0,className:"px-4 py-2 bg-[#2a3942] text-white rounded-lg hover:bg-[#3a4952] transition disabled:opacity-30 disabled:cursor-not-allowed",children:"← Anterior"}),m.jsxs("span",{className:"text-gray-400",children:["Página ",u+1," de ",v]}),m.jsx("button",{onClick:()=>G(u+1),disabled:u>=v-1,className:"px-4 py-2 bg-[#2a3942] text-white rounded-lg hover:bg-[#3a4952] transition disabled:opacity-30 disabled:cursor-not-allowed",children:"Siguiente →"})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Panel Médico"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Gestión de consultas y pacientes"})]}),m.jsxs("form",{onSubmit:E,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"codEmpresa",className:"block text-sm font-medium text-gray-300 mb-2",children:"Código de Médico"}),m.jsx("input",{type:"text",id:"codEmpresa",value:r,onChange:re=>t(re.target.value),className:"w-full px-4 py-3 bg-[#2a3942] border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-[#00a884] transition",placeholder:"Ingrese su código",required:!0})]}),F&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-3 text-red-400 text-sm",children:F}),m.jsx("button",{type:"submit",disabled:i,className:"w-full bg-[#00a884] text-white px-6 py-3 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Cargando...":"Entrar"})]}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:m.jsxs("a",{href:"https://api.whatsapp.com/send?phone=573014152706&text=Hola",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-sm text-gray-400 hover:text-[#00a884] transition",children:[m.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Soporte técnico"]})})]})})}function ite(){return m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-10",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Videollamadas seguras y profesionales"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(yN,{to:"/doctor",children:m.jsxs("button",{className:"w-full bg-[#00a884] text-white px-6 py-4 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg",children:[m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),m.jsx("span",{children:"Soy Médico"})]}),m.jsx("p",{className:"text-xs text-white/70 mt-2",children:"Crear sala y generar link para paciente"})]})}),m.jsx("div",{className:"bg-[#2a3942] rounded-xl p-4 border border-gray-600",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("svg",{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-300 font-medium mb-1",children:"¿Eres paciente?"}),m.jsx("p",{className:"text-xs text-gray-400",children:"Solicita el link de la consulta a tu médico y ábrelo en tu navegador para unirte automáticamente"})]})]})})]}),m.jsx("div",{className:"mt-8 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Conexión segura end-to-end"})]})})]})})}function ate(){return m.jsx(vN,{children:m.jsxs(sN,{children:[m.jsx(dl,{path:"/",element:m.jsx(ite,{})}),m.jsx(dl,{path:"/doctor",element:m.jsx(Xee,{})}),m.jsx(dl,{path:"/doctor/:roomName",element:m.jsx(Zee,{})}),m.jsx(dl,{path:"/patient/:roomName",element:m.jsx(ete,{})}),m.jsx(dl,{path:"/panel-medico",element:m.jsx(nte,{})})]})})}qg.createRoot(document.getElementById("root")).render(m.jsx(vS.StrictMode,{children:m.jsx(ate,{})}));export{Ut as _,A as c,iS as g};
