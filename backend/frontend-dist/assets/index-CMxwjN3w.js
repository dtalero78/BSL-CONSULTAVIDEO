var UL=Object.defineProperty;var $L=(r,t,e)=>t in r?UL(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var jt=(r,t,e)=>$L(r,typeof t!="symbol"?t+"":t,e);function VL(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ix(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function zL(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),e}var ax={exports:{}},_p={},ox={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af=Symbol.for("react.element"),WL=Symbol.for("react.portal"),qL=Symbol.for("react.fragment"),HL=Symbol.for("react.strict_mode"),GL=Symbol.for("react.profiler"),KL=Symbol.for("react.provider"),QL=Symbol.for("react.context"),YL=Symbol.for("react.forward_ref"),JL=Symbol.for("react.suspense"),XL=Symbol.for("react.memo"),ZL=Symbol.for("react.lazy"),f2=Symbol.iterator;function eO(r){return r===null||typeof r!="object"?null:(r=f2&&r[f2]||r["@@iterator"],typeof r=="function"?r:null)}var sx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cx=Object.assign,lx={};function il(r,t,e){this.props=r,this.context=t,this.refs=lx,this.updater=e||sx}il.prototype.isReactComponent={};il.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};il.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function ux(){}ux.prototype=il.prototype;function Oy(r,t,e){this.props=r,this.context=t,this.refs=lx,this.updater=e||sx}var Ay=Oy.prototype=new ux;Ay.constructor=Oy;cx(Ay,il.prototype);Ay.isPureReactComponent=!0;var d2=Array.isArray,fx=Object.prototype.hasOwnProperty,Ny={current:null},dx={key:!0,ref:!0,__self:!0,__source:!0};function hx(r,t,e){var n,i={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)fx.call(t,n)&&!dx.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=e;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(r&&r.defaultProps)for(n in s=r.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:af,type:r,key:a,ref:o,props:i,_owner:Ny.current}}function tO(r,t){return{$$typeof:af,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function Ry(r){return typeof r=="object"&&r!==null&&r.$$typeof===af}function rO(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(e){return t[e]})}var h2=/\/+/g;function sm(r,t){return typeof r=="object"&&r!==null&&r.key!=null?rO(""+r.key):t.toString(36)}function ih(r,t,e,n,i){var a=typeof r;(a==="undefined"||a==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case af:case WL:o=!0}}if(o)return o=r,i=i(o),r=n===""?"."+sm(o,0):n,d2(i)?(e="",r!=null&&(e=r.replace(h2,"$&/")+"/"),ih(i,t,e,"",function(c){return c})):i!=null&&(Ry(i)&&(i=tO(i,e+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(h2,"$&/")+"/")+r)),t.push(i)),1;if(o=0,n=n===""?".":n+":",d2(r))for(var s=0;s<r.length;s++){a=r[s];var l=n+sm(a,s);o+=ih(a,t,e,l,i)}else if(l=eO(r),typeof l=="function")for(r=l.call(r),s=0;!(a=r.next()).done;)a=a.value,l=n+sm(a,s++),o+=ih(a,t,e,l,i);else if(a==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function cd(r,t,e){if(r==null)return r;var n=[],i=0;return ih(r,n,"","",function(a){return t.call(e,a,i++)}),n}function nO(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(e){(r._status===0||r._status===-1)&&(r._status=1,r._result=e)},function(e){(r._status===0||r._status===-1)&&(r._status=2,r._result=e)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var mn={current:null},ah={transition:null},iO={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:ah,ReactCurrentOwner:Ny};function px(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:cd,forEach:function(r,t,e){cd(r,function(){t.apply(this,arguments)},e)},count:function(r){var t=0;return cd(r,function(){t++}),t},toArray:function(r){return cd(r,function(t){return t})||[]},only:function(r){if(!Ry(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};kt.Component=il;kt.Fragment=qL;kt.Profiler=GL;kt.PureComponent=Oy;kt.StrictMode=HL;kt.Suspense=JL;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iO;kt.act=px;kt.cloneElement=function(r,t,e){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=cx({},r.props),i=r.key,a=r.ref,o=r._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Ny.current),t.key!==void 0&&(i=""+t.key),r.type&&r.type.defaultProps)var s=r.type.defaultProps;for(l in t)fx.call(t,l)&&!dx.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=e;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];n.children=s}return{$$typeof:af,type:r.type,key:i,ref:a,props:n,_owner:o}};kt.createContext=function(r){return r={$$typeof:QL,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:KL,_context:r},r.Consumer=r};kt.createElement=hx;kt.createFactory=function(r){var t=hx.bind(null,r);return t.type=r,t};kt.createRef=function(){return{current:null}};kt.forwardRef=function(r){return{$$typeof:YL,render:r}};kt.isValidElement=Ry;kt.lazy=function(r){return{$$typeof:ZL,_payload:{_status:-1,_result:r},_init:nO}};kt.memo=function(r,t){return{$$typeof:XL,type:r,compare:t===void 0?null:t}};kt.startTransition=function(r){var t=ah.transition;ah.transition={};try{r()}finally{ah.transition=t}};kt.unstable_act=px;kt.useCallback=function(r,t){return mn.current.useCallback(r,t)};kt.useContext=function(r){return mn.current.useContext(r)};kt.useDebugValue=function(){};kt.useDeferredValue=function(r){return mn.current.useDeferredValue(r)};kt.useEffect=function(r,t){return mn.current.useEffect(r,t)};kt.useId=function(){return mn.current.useId()};kt.useImperativeHandle=function(r,t,e){return mn.current.useImperativeHandle(r,t,e)};kt.useInsertionEffect=function(r,t){return mn.current.useInsertionEffect(r,t)};kt.useLayoutEffect=function(r,t){return mn.current.useLayoutEffect(r,t)};kt.useMemo=function(r,t){return mn.current.useMemo(r,t)};kt.useReducer=function(r,t,e){return mn.current.useReducer(r,t,e)};kt.useRef=function(r){return mn.current.useRef(r)};kt.useState=function(r){return mn.current.useState(r)};kt.useSyncExternalStore=function(r,t,e){return mn.current.useSyncExternalStore(r,t,e)};kt.useTransition=function(){return mn.current.useTransition()};kt.version="18.3.1";ox.exports=kt;var he=ox.exports;const vx=ix(he),aO=VL({__proto__:null,default:vx},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO=he,sO=Symbol.for("react.element"),cO=Symbol.for("react.fragment"),lO=Object.prototype.hasOwnProperty,uO=oO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fO={key:!0,ref:!0,__self:!0,__source:!0};function mx(r,t,e){var n,i={},a=null,o=null;e!==void 0&&(a=""+e),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)lO.call(t,n)&&!fO.hasOwnProperty(n)&&(i[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:sO,type:r,key:a,ref:o,props:i,_owner:uO.current}}_p.Fragment=cO;_p.jsx=mx;_p.jsxs=mx;ax.exports=_p;var m=ax.exports,qg={},gx={exports:{}},Kn={},yx={exports:{}},_x={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(q,re){var fe=q.length;q.push(re);e:for(;0<fe;){var ne=fe-1>>>1,E=q[ne];if(0<i(E,re))q[ne]=re,q[fe]=E,fe=ne;else break e}}function e(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var re=q[0],fe=q.pop();if(fe!==re){q[0]=fe;e:for(var ne=0,E=q.length,z=E>>>1;ne<z;){var H=2*(ne+1)-1,ee=q[H],ae=H+1,ue=q[ae];if(0>i(ee,fe))ae<E&&0>i(ue,ee)?(q[ne]=ue,q[ae]=fe,ne=ae):(q[ne]=ee,q[H]=fe,ne=H);else if(ae<E&&0>i(ue,fe))q[ne]=ue,q[ae]=fe,ne=ae;else break e}}return re}function i(q,re){var fe=q.sortIndex-re.sortIndex;return fe!==0?fe:q.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();r.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,v=3,p=!1,y=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(q){for(var re=e(c);re!==null;){if(re.callback===null)n(c);else if(re.startTime<=q)n(c),re.sortIndex=re.expirationTime,t(l,re);else break;re=e(c)}}function T(q){if(_=!1,k(q),!y)if(e(l)!==null)y=!0,X(R);else{var re=e(c);re!==null&&oe(T,re.startTime-q)}}function R(q,re){y=!1,_&&(_=!1,w(F),F=-1),p=!0;var fe=v;try{for(k(re),d=e(l);d!==null&&(!(d.expirationTime>re)||q&&!O());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,v=d.priorityLevel;var E=ne(d.expirationTime<=re);re=r.unstable_now(),typeof E=="function"?d.callback=E:d===e(l)&&n(l),k(re)}else n(l);d=e(l)}if(d!==null)var z=!0;else{var H=e(c);H!==null&&oe(T,H.startTime-re),z=!1}return z}finally{d=null,v=fe,p=!1}}var U=!1,$=null,F=-1,M=5,Y=-1;function O(){return!(r.unstable_now()-Y<M)}function N(){if($!==null){var q=r.unstable_now();Y=q;var re=!0;try{re=$(!0,q)}finally{re?W():(U=!1,$=null)}}else U=!1}var W;if(typeof S=="function")W=function(){S(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Z=j.port2;j.port1.onmessage=N,W=function(){Z.postMessage(null)}}else W=function(){x(N,0)};function X(q){$=q,U||(U=!0,W())}function oe(q,re){F=x(function(){q(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_continueExecution=function(){y||p||(y=!0,X(R))},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return e(l)},r.unstable_next=function(q){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var fe=v;v=re;try{return q()}finally{v=fe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(q,re){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var fe=v;v=q;try{return re()}finally{v=fe}},r.unstable_scheduleCallback=function(q,re,fe){var ne=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ne+fe:ne):fe=ne,q){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=fe+E,q={id:u++,callback:re,priorityLevel:q,startTime:fe,expirationTime:E,sortIndex:-1},fe>ne?(q.sortIndex=fe,t(c,q),e(l)===null&&q===e(c)&&(_?(w(F),F=-1):_=!0,oe(T,fe-ne))):(q.sortIndex=E,t(l,q),y||p||(y=!0,X(R))),q},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(q){var re=v;return function(){var fe=v;v=re;try{return q.apply(this,arguments)}finally{v=fe}}}})(_x);yx.exports=_x;var dO=yx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hO=he,Gn=dO;function Oe(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wx=new Set,Nu={};function js(r,t){qc(r,t),qc(r+"Capture",t)}function qc(r,t){for(Nu[r]=t,r=0;r<t.length;r++)wx.add(t[r])}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hg=Object.prototype.hasOwnProperty,pO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p2={},v2={};function vO(r){return Hg.call(v2,r)?!0:Hg.call(p2,r)?!1:pO.test(r)?v2[r]=!0:(p2[r]=!0,!1)}function mO(r,t,e,n){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function gO(r,t,e,n){if(t===null||typeof t>"u"||mO(r,t,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gn(r,t,e,n,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=r,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Yr[r]=new gn(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];Yr[t]=new gn(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Yr[r]=new gn(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Yr[r]=new gn(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Yr[r]=new gn(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Yr[r]=new gn(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Yr[r]=new gn(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Yr[r]=new gn(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Yr[r]=new gn(r,5,!1,r.toLowerCase(),null,!1,!1)});var jy=/[\-:]([a-z])/g;function Iy(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(jy,Iy);Yr[t]=new gn(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(jy,Iy);Yr[t]=new gn(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(jy,Iy);Yr[t]=new gn(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Yr[r]=new gn(r,1,!1,r.toLowerCase(),null,!1,!1)});Yr.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Yr[r]=new gn(r,1,!1,r.toLowerCase(),null,!0,!0)});function My(r,t,e,n){var i=Yr.hasOwnProperty(t)?Yr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gO(t,e,i,n)&&(e=null),n||i===null?vO(t)&&(e===null?r.removeAttribute(t):r.setAttribute(t,""+e)):i.mustUseProperty?r[i.propertyName]=e===null?i.type===3?!1:"":e:(t=i.attributeName,n=i.attributeNamespace,e===null?r.removeAttribute(t):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,n?r.setAttributeNS(n,t,e):r.setAttribute(t,e))))}var Ma=hO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ld=Symbol.for("react.element"),_c=Symbol.for("react.portal"),wc=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),Gg=Symbol.for("react.profiler"),bx=Symbol.for("react.provider"),Sx=Symbol.for("react.context"),Fy=Symbol.for("react.forward_ref"),Kg=Symbol.for("react.suspense"),Qg=Symbol.for("react.suspense_list"),By=Symbol.for("react.memo"),lo=Symbol.for("react.lazy"),xx=Symbol.for("react.offscreen"),m2=Symbol.iterator;function Kl(r){return r===null||typeof r!="object"?null:(r=m2&&r[m2]||r["@@iterator"],typeof r=="function"?r:null)}var sr=Object.assign,cm;function fu(r){if(cm===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);cm=t&&t[1]||""}return`
`+cm+r}var lm=!1;function um(r,t){if(!r||lm)return"";lm=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(r,[],t)}else{try{t.call()}catch(c){n=c}r.call(t.prototype)}else{try{throw Error()}catch(c){n=c}r()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=o&&0<=s);break}}}finally{lm=!1,Error.prepareStackTrace=e}return(r=r?r.displayName||r.name:"")?fu(r):""}function yO(r){switch(r.tag){case 5:return fu(r.type);case 16:return fu("Lazy");case 13:return fu("Suspense");case 19:return fu("SuspenseList");case 0:case 2:case 15:return r=um(r.type,!1),r;case 11:return r=um(r.type.render,!1),r;case 1:return r=um(r.type,!0),r;default:return""}}function Yg(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case wc:return"Fragment";case _c:return"Portal";case Gg:return"Profiler";case Dy:return"StrictMode";case Kg:return"Suspense";case Qg:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Sx:return(r.displayName||"Context")+".Consumer";case bx:return(r._context.displayName||"Context")+".Provider";case Fy:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case By:return t=r.displayName||null,t!==null?t:Yg(r.type)||"Memo";case lo:t=r._payload,r=r._init;try{return Yg(r(t))}catch{}}return null}function _O(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yg(t);case 8:return t===Dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Lo(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function kx(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wO(r){var t=kx(r)?"checked":"value",e=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),n=""+r[t];if(!r.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,a=e.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(r,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function ud(r){r._valueTracker||(r._valueTracker=wO(r))}function Px(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return r&&(n=kx(r)?r.checked?"true":"false":r.value),r=n,r!==e?(t.setValue(r),!0):!1}function jh(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Jg(r,t){var e=t.checked;return sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??r._wrapperState.initialChecked})}function g2(r,t){var e=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;e=Lo(t.value!=null?t.value:e),r._wrapperState={initialChecked:n,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tx(r,t){t=t.checked,t!=null&&My(r,"checked",t,!1)}function Xg(r,t){Tx(r,t);var e=Lo(t.value),n=t.type;if(e!=null)n==="number"?(e===0&&r.value===""||r.value!=e)&&(r.value=""+e):r.value!==""+e&&(r.value=""+e);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?Zg(r,t.type,e):t.hasOwnProperty("defaultValue")&&Zg(r,t.type,Lo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function y2(r,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,e||t===r.value||(r.value=t),r.defaultValue=t}e=r.name,e!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,e!==""&&(r.name=e)}function Zg(r,t,e){(t!=="number"||jh(r.ownerDocument)!==r)&&(e==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+e&&(r.defaultValue=""+e))}var du=Array.isArray;function Rc(r,t,e,n){if(r=r.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<r.length;e++)i=t.hasOwnProperty("$"+r[e].value),r[e].selected!==i&&(r[e].selected=i),i&&n&&(r[e].defaultSelected=!0)}else{for(e=""+Lo(e),t=null,i=0;i<r.length;i++){if(r[i].value===e){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}t!==null||r[i].disabled||(t=r[i])}t!==null&&(t.selected=!0)}}function e0(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return sr({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function _2(r,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(Oe(92));if(du(e)){if(1<e.length)throw Error(Oe(93));e=e[0]}t=e}t==null&&(t=""),e=t}r._wrapperState={initialValue:Lo(e)}}function Ex(r,t){var e=Lo(t.value),n=Lo(t.defaultValue);e!=null&&(e=""+e,e!==r.value&&(r.value=e),t.defaultValue==null&&r.defaultValue!==e&&(r.defaultValue=e)),n!=null&&(r.defaultValue=""+n)}function w2(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function Cx(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function t0(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?Cx(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var fd,Lx=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return r(t,e,n,i)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(fd=fd||document.createElement("div"),fd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fd.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function Ru(r,t){if(t){var e=r.firstChild;if(e&&e===r.lastChild&&e.nodeType===3){e.nodeValue=t;return}}r.textContent=t}var _u={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bO=["Webkit","ms","Moz","O"];Object.keys(_u).forEach(function(r){bO.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),_u[t]=_u[r]})});function Ox(r,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||_u.hasOwnProperty(r)&&_u[r]?(""+t).trim():t+"px"}function Ax(r,t){r=r.style;for(var e in t)if(t.hasOwnProperty(e)){var n=e.indexOf("--")===0,i=Ox(e,t[e],n);e==="float"&&(e="cssFloat"),n?r.setProperty(e,i):r[e]=i}}var SO=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r0(r,t){if(t){if(SO[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Oe(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Oe(62))}}function n0(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var i0=null;function Uy(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var a0=null,jc=null,Ic=null;function b2(r){if(r=cf(r)){if(typeof a0!="function")throw Error(Oe(280));var t=r.stateNode;t&&(t=kp(t),a0(r.stateNode,r.type,t))}}function Nx(r){jc?Ic?Ic.push(r):Ic=[r]:jc=r}function Rx(){if(jc){var r=jc,t=Ic;if(Ic=jc=null,b2(r),t)for(r=0;r<t.length;r++)b2(t[r])}}function jx(r,t){return r(t)}function Ix(){}var fm=!1;function Mx(r,t,e){if(fm)return r(t,e);fm=!0;try{return jx(r,t,e)}finally{fm=!1,(jc!==null||Ic!==null)&&(Ix(),Rx())}}function ju(r,t){var e=r.stateNode;if(e===null)return null;var n=kp(e);if(n===null)return null;e=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(e&&typeof e!="function")throw Error(Oe(231,t,typeof e));return e}var o0=!1;if(Na)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){o0=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{o0=!1}function xO(r,t,e,n,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(e,c)}catch(u){this.onError(u)}}var wu=!1,Ih=null,Mh=!1,s0=null,kO={onError:function(r){wu=!0,Ih=r}};function PO(r,t,e,n,i,a,o,s,l){wu=!1,Ih=null,xO.apply(kO,arguments)}function TO(r,t,e,n,i,a,o,s,l){if(PO.apply(this,arguments),wu){if(wu){var c=Ih;wu=!1,Ih=null}else throw Error(Oe(198));Mh||(Mh=!0,s0=c)}}function Is(r){var t=r,e=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(e=t.return),r=t.return;while(r)}return t.tag===3?e:null}function Dx(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function S2(r){if(Is(r)!==r)throw Error(Oe(188))}function EO(r){var t=r.alternate;if(!t){if(t=Is(r),t===null)throw Error(Oe(188));return t!==r?null:r}for(var e=r,n=t;;){var i=e.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){e=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===e)return S2(i),r;if(a===n)return S2(i),t;a=a.sibling}throw Error(Oe(188))}if(e.return!==n.return)e=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===e){o=!0,e=i,n=a;break}if(s===n){o=!0,n=i,e=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===e){o=!0,e=a,n=i;break}if(s===n){o=!0,n=a,e=i;break}s=s.sibling}if(!o)throw Error(Oe(189))}}if(e.alternate!==n)throw Error(Oe(190))}if(e.tag!==3)throw Error(Oe(188));return e.stateNode.current===e?r:t}function Fx(r){return r=EO(r),r!==null?Bx(r):null}function Bx(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=Bx(r);if(t!==null)return t;r=r.sibling}return null}var Ux=Gn.unstable_scheduleCallback,x2=Gn.unstable_cancelCallback,CO=Gn.unstable_shouldYield,LO=Gn.unstable_requestPaint,Sr=Gn.unstable_now,OO=Gn.unstable_getCurrentPriorityLevel,$y=Gn.unstable_ImmediatePriority,$x=Gn.unstable_UserBlockingPriority,Dh=Gn.unstable_NormalPriority,AO=Gn.unstable_LowPriority,Vx=Gn.unstable_IdlePriority,wp=null,Xi=null;function NO(r){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(wp,r,void 0,(r.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:IO,RO=Math.log,jO=Math.LN2;function IO(r){return r>>>=0,r===0?32:31-(RO(r)/jO|0)|0}var dd=64,hd=4194304;function hu(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Fh(r,t){var e=r.pendingLanes;if(e===0)return 0;var n=0,i=r.suspendedLanes,a=r.pingedLanes,o=e&268435455;if(o!==0){var s=o&~i;s!==0?n=hu(s):(a&=o,a!==0&&(n=hu(a)))}else o=e&~i,o!==0?n=hu(o):a!==0&&(n=hu(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=e&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=n;0<t;)e=31-Ci(t),i=1<<e,n|=r[e],t&=~i;return n}function MO(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DO(r,t){for(var e=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,a=r.pendingLanes;0<a;){var o=31-Ci(a),s=1<<o,l=i[o];l===-1?(!(s&e)||s&n)&&(i[o]=MO(s,t)):l<=t&&(r.expiredLanes|=s),a&=~s}}function c0(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function zx(){var r=dd;return dd<<=1,!(dd&4194240)&&(dd=64),r}function dm(r){for(var t=[],e=0;31>e;e++)t.push(r);return t}function of(r,t,e){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-Ci(t),r[t]=e}function FO(r,t){var e=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<e;){var i=31-Ci(e),a=1<<i;t[i]=0,n[i]=-1,r[i]=-1,e&=~a}}function Vy(r,t){var e=r.entangledLanes|=t;for(r=r.entanglements;e;){var n=31-Ci(e),i=1<<n;i&t|r[n]&t&&(r[n]|=t),e&=~i}}var $t=0;function Wx(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var qx,zy,Hx,Gx,Kx,l0=!1,pd=[],_o=null,wo=null,bo=null,Iu=new Map,Mu=new Map,fo=[],BO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function k2(r,t){switch(r){case"focusin":case"focusout":_o=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":Iu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(t.pointerId)}}function Yl(r,t,e,n,i,a){return r===null||r.nativeEvent!==a?(r={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=cf(t),t!==null&&zy(t)),r):(r.eventSystemFlags|=n,t=r.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),r)}function UO(r,t,e,n,i){switch(t){case"focusin":return _o=Yl(_o,r,t,e,n,i),!0;case"dragenter":return wo=Yl(wo,r,t,e,n,i),!0;case"mouseover":return bo=Yl(bo,r,t,e,n,i),!0;case"pointerover":var a=i.pointerId;return Iu.set(a,Yl(Iu.get(a)||null,r,t,e,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Mu.set(a,Yl(Mu.get(a)||null,r,t,e,n,i)),!0}return!1}function Qx(r){var t=ms(r.target);if(t!==null){var e=Is(t);if(e!==null){if(t=e.tag,t===13){if(t=Dx(e),t!==null){r.blockedOn=t,Kx(r.priority,function(){Hx(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){r.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}r.blockedOn=null}function oh(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var e=u0(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(e===null){e=r.nativeEvent;var n=new e.constructor(e.type,e);i0=n,e.target.dispatchEvent(n),i0=null}else return t=cf(e),t!==null&&zy(t),r.blockedOn=e,!1;t.shift()}return!0}function P2(r,t,e){oh(r)&&e.delete(t)}function $O(){l0=!1,_o!==null&&oh(_o)&&(_o=null),wo!==null&&oh(wo)&&(wo=null),bo!==null&&oh(bo)&&(bo=null),Iu.forEach(P2),Mu.forEach(P2)}function Jl(r,t){r.blockedOn===t&&(r.blockedOn=null,l0||(l0=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,$O)))}function Du(r){function t(i){return Jl(i,r)}if(0<pd.length){Jl(pd[0],r);for(var e=1;e<pd.length;e++){var n=pd[e];n.blockedOn===r&&(n.blockedOn=null)}}for(_o!==null&&Jl(_o,r),wo!==null&&Jl(wo,r),bo!==null&&Jl(bo,r),Iu.forEach(t),Mu.forEach(t),e=0;e<fo.length;e++)n=fo[e],n.blockedOn===r&&(n.blockedOn=null);for(;0<fo.length&&(e=fo[0],e.blockedOn===null);)Qx(e),e.blockedOn===null&&fo.shift()}var Mc=Ma.ReactCurrentBatchConfig,Bh=!0;function VO(r,t,e,n){var i=$t,a=Mc.transition;Mc.transition=null;try{$t=1,Wy(r,t,e,n)}finally{$t=i,Mc.transition=a}}function zO(r,t,e,n){var i=$t,a=Mc.transition;Mc.transition=null;try{$t=4,Wy(r,t,e,n)}finally{$t=i,Mc.transition=a}}function Wy(r,t,e,n){if(Bh){var i=u0(r,t,e,n);if(i===null)Sm(r,t,n,Uh,e),k2(r,n);else if(UO(i,r,t,e,n))n.stopPropagation();else if(k2(r,n),t&4&&-1<BO.indexOf(r)){for(;i!==null;){var a=cf(i);if(a!==null&&qx(a),a=u0(r,t,e,n),a===null&&Sm(r,t,n,Uh,e),a===i)break;i=a}i!==null&&n.stopPropagation()}else Sm(r,t,n,null,e)}}var Uh=null;function u0(r,t,e,n){if(Uh=null,r=Uy(n),r=ms(r),r!==null)if(t=Is(r),t===null)r=null;else if(e=t.tag,e===13){if(r=Dx(t),r!==null)return r;r=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return Uh=r,null}function Yx(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OO()){case $y:return 1;case $x:return 4;case Dh:case AO:return 16;case Vx:return 536870912;default:return 16}default:return 16}}var po=null,qy=null,sh=null;function Jx(){if(sh)return sh;var r,t=qy,e=t.length,n,i="value"in po?po.value:po.textContent,a=i.length;for(r=0;r<e&&t[r]===i[r];r++);var o=e-r;for(n=1;n<=o&&t[e-n]===i[a-n];n++);return sh=i.slice(r,1<n?1-n:void 0)}function ch(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function vd(){return!0}function T2(){return!1}function Qn(r){function t(e,n,i,a,o){this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in r)r.hasOwnProperty(s)&&(e=r[s],this[s]=e?e(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?vd:T2,this.isPropagationStopped=T2,this}return sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=vd)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=vd)},persist:function(){},isPersistent:vd}),t}var al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hy=Qn(al),sf=sr({},al,{view:0,detail:0}),WO=Qn(sf),hm,pm,Xl,bp=sr({},sf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gy,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Xl&&(Xl&&r.type==="mousemove"?(hm=r.screenX-Xl.screenX,pm=r.screenY-Xl.screenY):pm=hm=0,Xl=r),hm)},movementY:function(r){return"movementY"in r?r.movementY:pm}}),E2=Qn(bp),qO=sr({},bp,{dataTransfer:0}),HO=Qn(qO),GO=sr({},sf,{relatedTarget:0}),vm=Qn(GO),KO=sr({},al,{animationName:0,elapsedTime:0,pseudoElement:0}),QO=Qn(KO),YO=sr({},al,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),JO=Qn(YO),XO=sr({},al,{data:0}),C2=Qn(XO),ZO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rA(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=tA[r])?!!t[r]:!1}function Gy(){return rA}var nA=sr({},sf,{key:function(r){if(r.key){var t=ZO[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=ch(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?eA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gy,charCode:function(r){return r.type==="keypress"?ch(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ch(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),iA=Qn(nA),aA=sr({},bp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L2=Qn(aA),oA=sr({},sf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gy}),sA=Qn(oA),cA=sr({},al,{propertyName:0,elapsedTime:0,pseudoElement:0}),lA=Qn(cA),uA=sr({},bp,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),fA=Qn(uA),dA=[9,13,27,32],Ky=Na&&"CompositionEvent"in window,bu=null;Na&&"documentMode"in document&&(bu=document.documentMode);var hA=Na&&"TextEvent"in window&&!bu,Xx=Na&&(!Ky||bu&&8<bu&&11>=bu),O2=" ",A2=!1;function Zx(r,t){switch(r){case"keyup":return dA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ek(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var bc=!1;function pA(r,t){switch(r){case"compositionend":return ek(t);case"keypress":return t.which!==32?null:(A2=!0,O2);case"textInput":return r=t.data,r===O2&&A2?null:r;default:return null}}function vA(r,t){if(bc)return r==="compositionend"||!Ky&&Zx(r,t)?(r=Jx(),sh=qy=po=null,bc=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xx&&t.locale!=="ko"?null:t.data;default:return null}}var mA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N2(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!mA[r.type]:t==="textarea"}function tk(r,t,e,n){Nx(n),t=$h(t,"onChange"),0<t.length&&(e=new Hy("onChange","change",null,e,n),r.push({event:e,listeners:t}))}var Su=null,Fu=null;function gA(r){dk(r,0)}function Sp(r){var t=kc(r);if(Px(t))return r}function yA(r,t){if(r==="change")return t}var rk=!1;if(Na){var mm;if(Na){var gm="oninput"in document;if(!gm){var R2=document.createElement("div");R2.setAttribute("oninput","return;"),gm=typeof R2.oninput=="function"}mm=gm}else mm=!1;rk=mm&&(!document.documentMode||9<document.documentMode)}function j2(){Su&&(Su.detachEvent("onpropertychange",nk),Fu=Su=null)}function nk(r){if(r.propertyName==="value"&&Sp(Fu)){var t=[];tk(t,Fu,r,Uy(r)),Mx(gA,t)}}function _A(r,t,e){r==="focusin"?(j2(),Su=t,Fu=e,Su.attachEvent("onpropertychange",nk)):r==="focusout"&&j2()}function wA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Sp(Fu)}function bA(r,t){if(r==="click")return Sp(t)}function SA(r,t){if(r==="input"||r==="change")return Sp(t)}function xA(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var Oi=typeof Object.is=="function"?Object.is:xA;function Bu(r,t){if(Oi(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var e=Object.keys(r),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var i=e[n];if(!Hg.call(t,i)||!Oi(r[i],t[i]))return!1}return!0}function I2(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function M2(r,t){var e=I2(r);r=0;for(var n;e;){if(e.nodeType===3){if(n=r+e.textContent.length,r<=t&&n>=t)return{node:e,offset:t-r};r=n}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=I2(e)}}function ik(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?ik(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function ak(){for(var r=window,t=jh();t instanceof r.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)r=t.contentWindow;else break;t=jh(r.document)}return t}function Qy(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function kA(r){var t=ak(),e=r.focusedElem,n=r.selectionRange;if(t!==e&&e&&e.ownerDocument&&ik(e.ownerDocument.documentElement,e)){if(n!==null&&Qy(e)){if(t=n.start,r=n.end,r===void 0&&(r=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(r,e.value.length);else if(r=(t=e.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var i=e.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!r.extend&&a>n&&(i=n,n=a,a=i),i=M2(e,a);var o=M2(e,n);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),r.removeAllRanges(),a>n?(r.addRange(t),r.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),r.addRange(t)))}}for(t=[],r=e;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)r=t[e],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var PA=Na&&"documentMode"in document&&11>=document.documentMode,Sc=null,f0=null,xu=null,d0=!1;function D2(r,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;d0||Sc==null||Sc!==jh(n)||(n=Sc,"selectionStart"in n&&Qy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xu&&Bu(xu,n)||(xu=n,n=$h(f0,"onSelect"),0<n.length&&(t=new Hy("onSelect","select",null,t,e),r.push({event:t,listeners:n}),t.target=Sc)))}function md(r,t){var e={};return e[r.toLowerCase()]=t.toLowerCase(),e["Webkit"+r]="webkit"+t,e["Moz"+r]="moz"+t,e}var xc={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},ym={},ok={};Na&&(ok=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function xp(r){if(ym[r])return ym[r];if(!xc[r])return r;var t=xc[r],e;for(e in t)if(t.hasOwnProperty(e)&&e in ok)return ym[r]=t[e];return r}var sk=xp("animationend"),ck=xp("animationiteration"),lk=xp("animationstart"),uk=xp("transitionend"),fk=new Map,F2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function No(r,t){fk.set(r,t),js(t,[r])}for(var _m=0;_m<F2.length;_m++){var wm=F2[_m],TA=wm.toLowerCase(),EA=wm[0].toUpperCase()+wm.slice(1);No(TA,"on"+EA)}No(sk,"onAnimationEnd");No(ck,"onAnimationIteration");No(lk,"onAnimationStart");No("dblclick","onDoubleClick");No("focusin","onFocus");No("focusout","onBlur");No(uk,"onTransitionEnd");qc("onMouseEnter",["mouseout","mouseover"]);qc("onMouseLeave",["mouseout","mouseover"]);qc("onPointerEnter",["pointerout","pointerover"]);qc("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CA=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function B2(r,t,e){var n=r.type||"unknown-event";r.currentTarget=e,TO(n,t,void 0,r),r.currentTarget=null}function dk(r,t){t=(t&4)!==0;for(var e=0;e<r.length;e++){var n=r[e],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;B2(i,s,c),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;B2(i,s,c),a=l}}}if(Mh)throw r=s0,Mh=!1,s0=null,r}function Xt(r,t){var e=t[g0];e===void 0&&(e=t[g0]=new Set);var n=r+"__bubble";e.has(n)||(hk(t,r,2,!1),e.add(n))}function bm(r,t,e){var n=0;t&&(n|=4),hk(e,r,n,t)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Uu(r){if(!r[gd]){r[gd]=!0,wx.forEach(function(e){e!=="selectionchange"&&(CA.has(e)||bm(e,!1,r),bm(e,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[gd]||(t[gd]=!0,bm("selectionchange",!1,t))}}function hk(r,t,e,n){switch(Yx(t)){case 1:var i=VO;break;case 4:i=zO;break;default:i=Wy}e=i.bind(null,t,e,r),i=void 0,!o0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(t,e,{capture:!0,passive:i}):r.addEventListener(t,e,!0):i!==void 0?r.addEventListener(t,e,{passive:i}):r.addEventListener(t,e,!1)}function Sm(r,t,e,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=ms(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}Mx(function(){var c=a,u=Uy(e),d=[];e:{var v=fk.get(r);if(v!==void 0){var p=Hy,y=r;switch(r){case"keypress":if(ch(e)===0)break e;case"keydown":case"keyup":p=iA;break;case"focusin":y="focus",p=vm;break;case"focusout":y="blur",p=vm;break;case"beforeblur":case"afterblur":p=vm;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=E2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=HO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=sA;break;case sk:case ck:case lk:p=QO;break;case uk:p=lA;break;case"scroll":p=WO;break;case"wheel":p=fA;break;case"copy":case"cut":case"paste":p=JO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=L2}var _=(t&4)!==0,x=!_&&r==="scroll",w=_?v!==null?v+"Capture":null:v;_=[];for(var S=c,k;S!==null;){k=S;var T=k.stateNode;if(k.tag===5&&T!==null&&(k=T,w!==null&&(T=ju(S,w),T!=null&&_.push($u(S,T,k)))),x)break;S=S.return}0<_.length&&(v=new p(v,y,null,e,u),d.push({event:v,listeners:_}))}}if(!(t&7)){e:{if(v=r==="mouseover"||r==="pointerover",p=r==="mouseout"||r==="pointerout",v&&e!==i0&&(y=e.relatedTarget||e.fromElement)&&(ms(y)||y[Ra]))break e;if((p||v)&&(v=u.window===u?u:(v=u.ownerDocument)?v.defaultView||v.parentWindow:window,p?(y=e.relatedTarget||e.toElement,p=c,y=y?ms(y):null,y!==null&&(x=Is(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(_=E2,T="onMouseLeave",w="onMouseEnter",S="mouse",(r==="pointerout"||r==="pointerover")&&(_=L2,T="onPointerLeave",w="onPointerEnter",S="pointer"),x=p==null?v:kc(p),k=y==null?v:kc(y),v=new _(T,S+"leave",p,e,u),v.target=x,v.relatedTarget=k,T=null,ms(u)===c&&(_=new _(w,S+"enter",y,e,u),_.target=k,_.relatedTarget=x,T=_),x=T,p&&y)t:{for(_=p,w=y,S=0,k=_;k;k=nc(k))S++;for(k=0,T=w;T;T=nc(T))k++;for(;0<S-k;)_=nc(_),S--;for(;0<k-S;)w=nc(w),k--;for(;S--;){if(_===w||w!==null&&_===w.alternate)break t;_=nc(_),w=nc(w)}_=null}else _=null;p!==null&&U2(d,v,p,_,!1),y!==null&&x!==null&&U2(d,x,y,_,!0)}}e:{if(v=c?kc(c):window,p=v.nodeName&&v.nodeName.toLowerCase(),p==="select"||p==="input"&&v.type==="file")var R=yA;else if(N2(v))if(rk)R=SA;else{R=wA;var U=_A}else(p=v.nodeName)&&p.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(R=bA);if(R&&(R=R(r,c))){tk(d,R,e,u);break e}U&&U(r,v,c),r==="focusout"&&(U=v._wrapperState)&&U.controlled&&v.type==="number"&&Zg(v,"number",v.value)}switch(U=c?kc(c):window,r){case"focusin":(N2(U)||U.contentEditable==="true")&&(Sc=U,f0=c,xu=null);break;case"focusout":xu=f0=Sc=null;break;case"mousedown":d0=!0;break;case"contextmenu":case"mouseup":case"dragend":d0=!1,D2(d,e,u);break;case"selectionchange":if(PA)break;case"keydown":case"keyup":D2(d,e,u)}var $;if(Ky)e:{switch(r){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else bc?Zx(r,e)&&(F="onCompositionEnd"):r==="keydown"&&e.keyCode===229&&(F="onCompositionStart");F&&(Xx&&e.locale!=="ko"&&(bc||F!=="onCompositionStart"?F==="onCompositionEnd"&&bc&&($=Jx()):(po=u,qy="value"in po?po.value:po.textContent,bc=!0)),U=$h(c,F),0<U.length&&(F=new C2(F,r,null,e,u),d.push({event:F,listeners:U}),$?F.data=$:($=ek(e),$!==null&&(F.data=$)))),($=hA?pA(r,e):vA(r,e))&&(c=$h(c,"onBeforeInput"),0<c.length&&(u=new C2("onBeforeInput","beforeinput",null,e,u),d.push({event:u,listeners:c}),u.data=$))}dk(d,t)})}function $u(r,t,e){return{instance:r,listener:t,currentTarget:e}}function $h(r,t){for(var e=t+"Capture",n=[];r!==null;){var i=r,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ju(r,e),a!=null&&n.unshift($u(r,a,i)),a=ju(r,t),a!=null&&n.push($u(r,a,i))),r=r.return}return n}function nc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function U2(r,t,e,n,i){for(var a=t._reactName,o=[];e!==null&&e!==n;){var s=e,l=s.alternate,c=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&c!==null&&(s=c,i?(l=ju(e,a),l!=null&&o.unshift($u(e,l,s))):i||(l=ju(e,a),l!=null&&o.push($u(e,l,s)))),e=e.return}o.length!==0&&r.push({event:t,listeners:o})}var LA=/\r\n?/g,OA=/\u0000|\uFFFD/g;function $2(r){return(typeof r=="string"?r:""+r).replace(LA,`
`).replace(OA,"")}function yd(r,t,e){if(t=$2(t),$2(r)!==t&&e)throw Error(Oe(425))}function Vh(){}var h0=null,p0=null;function v0(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var m0=typeof setTimeout=="function"?setTimeout:void 0,AA=typeof clearTimeout=="function"?clearTimeout:void 0,V2=typeof Promise=="function"?Promise:void 0,NA=typeof queueMicrotask=="function"?queueMicrotask:typeof V2<"u"?function(r){return V2.resolve(null).then(r).catch(RA)}:m0;function RA(r){setTimeout(function(){throw r})}function xm(r,t){var e=t,n=0;do{var i=e.nextSibling;if(r.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(n===0){r.removeChild(i),Du(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=i}while(e);Du(t)}function So(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function z2(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return r;t--}else e==="/$"&&t++}r=r.previousSibling}return null}var ol=Math.random().toString(36).slice(2),Qi="__reactFiber$"+ol,Vu="__reactProps$"+ol,Ra="__reactContainer$"+ol,g0="__reactEvents$"+ol,jA="__reactListeners$"+ol,IA="__reactHandles$"+ol;function ms(r){var t=r[Qi];if(t)return t;for(var e=r.parentNode;e;){if(t=e[Ra]||e[Qi]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(r=z2(r);r!==null;){if(e=r[Qi])return e;r=z2(r)}return t}r=e,e=r.parentNode}return null}function cf(r){return r=r[Qi]||r[Ra],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function kc(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Oe(33))}function kp(r){return r[Vu]||null}var y0=[],Pc=-1;function Ro(r){return{current:r}}function er(r){0>Pc||(r.current=y0[Pc],y0[Pc]=null,Pc--)}function Yt(r,t){Pc++,y0[Pc]=r.current,r.current=t}var Oo={},ln=Ro(Oo),Tn=Ro(!1),Ps=Oo;function Hc(r,t){var e=r.type.contextTypes;if(!e)return Oo;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in e)i[a]=t[a];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=i),i}function En(r){return r=r.childContextTypes,r!=null}function zh(){er(Tn),er(ln)}function W2(r,t,e){if(ln.current!==Oo)throw Error(Oe(168));Yt(ln,t),Yt(Tn,e)}function pk(r,t,e){var n=r.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Oe(108,_O(r)||"Unknown",i));return sr({},e,n)}function Wh(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Oo,Ps=ln.current,Yt(ln,r),Yt(Tn,Tn.current),!0}function q2(r,t,e){var n=r.stateNode;if(!n)throw Error(Oe(169));e?(r=pk(r,t,Ps),n.__reactInternalMemoizedMergedChildContext=r,er(Tn),er(ln),Yt(ln,r)):er(Tn),Yt(Tn,e)}var Pa=null,Pp=!1,km=!1;function vk(r){Pa===null?Pa=[r]:Pa.push(r)}function MA(r){Pp=!0,vk(r)}function jo(){if(!km&&Pa!==null){km=!0;var r=0,t=$t;try{var e=Pa;for($t=1;r<e.length;r++){var n=e[r];do n=n(!0);while(n!==null)}Pa=null,Pp=!1}catch(i){throw Pa!==null&&(Pa=Pa.slice(r+1)),Ux($y,jo),i}finally{$t=t,km=!1}}return null}var Tc=[],Ec=0,qh=null,Hh=0,ai=[],oi=0,Ts=null,Ea=1,Ca="";function us(r,t){Tc[Ec++]=Hh,Tc[Ec++]=qh,qh=r,Hh=t}function mk(r,t,e){ai[oi++]=Ea,ai[oi++]=Ca,ai[oi++]=Ts,Ts=r;var n=Ea;r=Ca;var i=32-Ci(n)-1;n&=~(1<<i),e+=1;var a=32-Ci(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ea=1<<32-Ci(t)+i|e<<i|n,Ca=a+r}else Ea=1<<a|e<<i|n,Ca=r}function Yy(r){r.return!==null&&(us(r,1),mk(r,1,0))}function Jy(r){for(;r===qh;)qh=Tc[--Ec],Tc[Ec]=null,Hh=Tc[--Ec],Tc[Ec]=null;for(;r===Ts;)Ts=ai[--oi],ai[oi]=null,Ca=ai[--oi],ai[oi]=null,Ea=ai[--oi],ai[oi]=null}var Hn=null,Wn=null,rr=!1,Ei=null;function gk(r,t){var e=ci(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=r,t=r.deletions,t===null?(r.deletions=[e],r.flags|=16):t.push(e)}function H2(r,t){switch(r.tag){case 5:var e=r.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Hn=r,Wn=So(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Hn=r,Wn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Ts!==null?{id:Ea,overflow:Ca}:null,r.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=ci(18,null,null,0),e.stateNode=t,e.return=r,r.child=e,Hn=r,Wn=null,!0):!1;default:return!1}}function _0(r){return(r.mode&1)!==0&&(r.flags&128)===0}function w0(r){if(rr){var t=Wn;if(t){var e=t;if(!H2(r,t)){if(_0(r))throw Error(Oe(418));t=So(e.nextSibling);var n=Hn;t&&H2(r,t)?gk(n,e):(r.flags=r.flags&-4097|2,rr=!1,Hn=r)}}else{if(_0(r))throw Error(Oe(418));r.flags=r.flags&-4097|2,rr=!1,Hn=r}}}function G2(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Hn=r}function _d(r){if(r!==Hn)return!1;if(!rr)return G2(r),rr=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!v0(r.type,r.memoizedProps)),t&&(t=Wn)){if(_0(r))throw yk(),Error(Oe(418));for(;t;)gk(r,t),t=So(t.nextSibling)}if(G2(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Oe(317));e:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="/$"){if(t===0){Wn=So(r.nextSibling);break e}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}r=r.nextSibling}Wn=null}}else Wn=Hn?So(r.stateNode.nextSibling):null;return!0}function yk(){for(var r=Wn;r;)r=So(r.nextSibling)}function Gc(){Wn=Hn=null,rr=!1}function Xy(r){Ei===null?Ei=[r]:Ei.push(r)}var DA=Ma.ReactCurrentBatchConfig;function Zl(r,t,e){if(r=e.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(Oe(309));var n=e.stateNode}if(!n)throw Error(Oe(147,r));var i=n,a=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},t._stringRef=a,t)}if(typeof r!="string")throw Error(Oe(284));if(!e._owner)throw Error(Oe(290,r))}return r}function wd(r,t){throw r=Object.prototype.toString.call(t),Error(Oe(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function K2(r){var t=r._init;return t(r._payload)}function _k(r){function t(w,S){if(r){var k=w.deletions;k===null?(w.deletions=[S],w.flags|=16):k.push(S)}}function e(w,S){if(!r)return null;for(;S!==null;)t(w,S),S=S.sibling;return null}function n(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function i(w,S){return w=To(w,S),w.index=0,w.sibling=null,w}function a(w,S,k){return w.index=k,r?(k=w.alternate,k!==null?(k=k.index,k<S?(w.flags|=2,S):k):(w.flags|=2,S)):(w.flags|=1048576,S)}function o(w){return r&&w.alternate===null&&(w.flags|=2),w}function s(w,S,k,T){return S===null||S.tag!==6?(S=Am(k,w.mode,T),S.return=w,S):(S=i(S,k),S.return=w,S)}function l(w,S,k,T){var R=k.type;return R===wc?u(w,S,k.props.children,T,k.key):S!==null&&(S.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===lo&&K2(R)===S.type)?(T=i(S,k.props),T.ref=Zl(w,S,k),T.return=w,T):(T=vh(k.type,k.key,k.props,null,w.mode,T),T.ref=Zl(w,S,k),T.return=w,T)}function c(w,S,k,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==k.containerInfo||S.stateNode.implementation!==k.implementation?(S=Nm(k,w.mode,T),S.return=w,S):(S=i(S,k.children||[]),S.return=w,S)}function u(w,S,k,T,R){return S===null||S.tag!==7?(S=bs(k,w.mode,T,R),S.return=w,S):(S=i(S,k),S.return=w,S)}function d(w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Am(""+S,w.mode,k),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ld:return k=vh(S.type,S.key,S.props,null,w.mode,k),k.ref=Zl(w,null,S),k.return=w,k;case _c:return S=Nm(S,w.mode,k),S.return=w,S;case lo:var T=S._init;return d(w,T(S._payload),k)}if(du(S)||Kl(S))return S=bs(S,w.mode,k,null),S.return=w,S;wd(w,S)}return null}function v(w,S,k,T){var R=S!==null?S.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return R!==null?null:s(w,S,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ld:return k.key===R?l(w,S,k,T):null;case _c:return k.key===R?c(w,S,k,T):null;case lo:return R=k._init,v(w,S,R(k._payload),T)}if(du(k)||Kl(k))return R!==null?null:u(w,S,k,T,null);wd(w,k)}return null}function p(w,S,k,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return w=w.get(k)||null,s(S,w,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ld:return w=w.get(T.key===null?k:T.key)||null,l(S,w,T,R);case _c:return w=w.get(T.key===null?k:T.key)||null,c(S,w,T,R);case lo:var U=T._init;return p(w,S,k,U(T._payload),R)}if(du(T)||Kl(T))return w=w.get(k)||null,u(S,w,T,R,null);wd(S,T)}return null}function y(w,S,k,T){for(var R=null,U=null,$=S,F=S=0,M=null;$!==null&&F<k.length;F++){$.index>F?(M=$,$=null):M=$.sibling;var Y=v(w,$,k[F],T);if(Y===null){$===null&&($=M);break}r&&$&&Y.alternate===null&&t(w,$),S=a(Y,S,F),U===null?R=Y:U.sibling=Y,U=Y,$=M}if(F===k.length)return e(w,$),rr&&us(w,F),R;if($===null){for(;F<k.length;F++)$=d(w,k[F],T),$!==null&&(S=a($,S,F),U===null?R=$:U.sibling=$,U=$);return rr&&us(w,F),R}for($=n(w,$);F<k.length;F++)M=p($,w,F,k[F],T),M!==null&&(r&&M.alternate!==null&&$.delete(M.key===null?F:M.key),S=a(M,S,F),U===null?R=M:U.sibling=M,U=M);return r&&$.forEach(function(O){return t(w,O)}),rr&&us(w,F),R}function _(w,S,k,T){var R=Kl(k);if(typeof R!="function")throw Error(Oe(150));if(k=R.call(k),k==null)throw Error(Oe(151));for(var U=R=null,$=S,F=S=0,M=null,Y=k.next();$!==null&&!Y.done;F++,Y=k.next()){$.index>F?(M=$,$=null):M=$.sibling;var O=v(w,$,Y.value,T);if(O===null){$===null&&($=M);break}r&&$&&O.alternate===null&&t(w,$),S=a(O,S,F),U===null?R=O:U.sibling=O,U=O,$=M}if(Y.done)return e(w,$),rr&&us(w,F),R;if($===null){for(;!Y.done;F++,Y=k.next())Y=d(w,Y.value,T),Y!==null&&(S=a(Y,S,F),U===null?R=Y:U.sibling=Y,U=Y);return rr&&us(w,F),R}for($=n(w,$);!Y.done;F++,Y=k.next())Y=p($,w,F,Y.value,T),Y!==null&&(r&&Y.alternate!==null&&$.delete(Y.key===null?F:Y.key),S=a(Y,S,F),U===null?R=Y:U.sibling=Y,U=Y);return r&&$.forEach(function(N){return t(w,N)}),rr&&us(w,F),R}function x(w,S,k,T){if(typeof k=="object"&&k!==null&&k.type===wc&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case ld:e:{for(var R=k.key,U=S;U!==null;){if(U.key===R){if(R=k.type,R===wc){if(U.tag===7){e(w,U.sibling),S=i(U,k.props.children),S.return=w,w=S;break e}}else if(U.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===lo&&K2(R)===U.type){e(w,U.sibling),S=i(U,k.props),S.ref=Zl(w,U,k),S.return=w,w=S;break e}e(w,U);break}else t(w,U);U=U.sibling}k.type===wc?(S=bs(k.props.children,w.mode,T,k.key),S.return=w,w=S):(T=vh(k.type,k.key,k.props,null,w.mode,T),T.ref=Zl(w,S,k),T.return=w,w=T)}return o(w);case _c:e:{for(U=k.key;S!==null;){if(S.key===U)if(S.tag===4&&S.stateNode.containerInfo===k.containerInfo&&S.stateNode.implementation===k.implementation){e(w,S.sibling),S=i(S,k.children||[]),S.return=w,w=S;break e}else{e(w,S);break}else t(w,S);S=S.sibling}S=Nm(k,w.mode,T),S.return=w,w=S}return o(w);case lo:return U=k._init,x(w,S,U(k._payload),T)}if(du(k))return y(w,S,k,T);if(Kl(k))return _(w,S,k,T);wd(w,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,S!==null&&S.tag===6?(e(w,S.sibling),S=i(S,k),S.return=w,w=S):(e(w,S),S=Am(k,w.mode,T),S.return=w,w=S),o(w)):e(w,S)}return x}var Kc=_k(!0),wk=_k(!1),Gh=Ro(null),Kh=null,Cc=null,Zy=null;function e1(){Zy=Cc=Kh=null}function t1(r){var t=Gh.current;er(Gh),r._currentValue=t}function b0(r,t,e){for(;r!==null;){var n=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),r===e)break;r=r.return}}function Dc(r,t){Kh=r,Zy=Cc=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(Pn=!0),r.firstContext=null)}function fi(r){var t=r._currentValue;if(Zy!==r)if(r={context:r,memoizedValue:t,next:null},Cc===null){if(Kh===null)throw Error(Oe(308));Cc=r,Kh.dependencies={lanes:0,firstContext:r}}else Cc=Cc.next=r;return t}var gs=null;function r1(r){gs===null?gs=[r]:gs.push(r)}function bk(r,t,e,n){var i=t.interleaved;return i===null?(e.next=e,r1(t)):(e.next=i.next,i.next=e),t.interleaved=e,ja(r,n)}function ja(r,t){r.lanes|=t;var e=r.alternate;for(e!==null&&(e.lanes|=t),e=r,r=r.return;r!==null;)r.childLanes|=t,e=r.alternate,e!==null&&(e.childLanes|=t),e=r,r=r.return;return e.tag===3?e.stateNode:null}var uo=!1;function n1(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sk(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Aa(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function xo(r,t,e){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Lt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,ja(r,e)}return i=n.interleaved,i===null?(t.next=t,r1(n)):(t.next=i.next,i.next=t),n.interleaved=t,ja(r,e)}function lh(r,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var n=t.lanes;n&=r.pendingLanes,e|=n,t.lanes=e,Vy(r,e)}}function Q2(r,t){var e=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var i=null,a=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};a===null?i=a=o:a=a.next=o,e=e.next}while(e!==null);a===null?i=a=t:a=a.next=t}else i=a=t;e={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},r.updateQueue=e;return}r=e.lastBaseUpdate,r===null?e.firstBaseUpdate=t:r.next=t,e.lastBaseUpdate=t}function Qh(r,t,e,n){var i=r.updateQueue;uo=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,o===null?a=c:o.next=c,o=l;var u=r.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;o=0,u=c=l=null,s=a;do{var v=s.lane,p=s.eventTime;if((n&v)===v){u!==null&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=r,_=s;switch(v=t,p=e,_.tag){case 1:if(y=_.payload,typeof y=="function"){d=y.call(p,d,v);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,v=typeof y=="function"?y.call(p,d,v):y,v==null)break e;d=sr({},d,v);break e;case 2:uo=!0}}s.callback!==null&&s.lane!==0&&(r.flags|=64,v=i.effects,v===null?i.effects=[s]:v.push(s))}else p={eventTime:p,lane:v,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=v;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;v=s,s=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Cs|=o,r.lanes=o,r.memoizedState=d}}function Y2(r,t,e){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var n=r[t],i=n.callback;if(i!==null){if(n.callback=null,n=e,typeof i!="function")throw Error(Oe(191,i));i.call(n)}}}var lf={},Zi=Ro(lf),zu=Ro(lf),Wu=Ro(lf);function ys(r){if(r===lf)throw Error(Oe(174));return r}function i1(r,t){switch(Yt(Wu,t),Yt(zu,r),Yt(Zi,lf),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:t0(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=t0(t,r)}er(Zi),Yt(Zi,t)}function Qc(){er(Zi),er(zu),er(Wu)}function xk(r){ys(Wu.current);var t=ys(Zi.current),e=t0(t,r.type);t!==e&&(Yt(zu,r),Yt(Zi,e))}function a1(r){zu.current===r&&(er(Zi),er(zu))}var ir=Ro(0);function Yh(r){for(var t=r;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pm=[];function o1(){for(var r=0;r<Pm.length;r++)Pm[r]._workInProgressVersionPrimary=null;Pm.length=0}var uh=Ma.ReactCurrentDispatcher,Tm=Ma.ReactCurrentBatchConfig,Es=0,or=null,Dr=null,Ur=null,Jh=!1,ku=!1,qu=0,FA=0;function en(){throw Error(Oe(321))}function s1(r,t){if(t===null)return!1;for(var e=0;e<t.length&&e<r.length;e++)if(!Oi(r[e],t[e]))return!1;return!0}function c1(r,t,e,n,i,a){if(Es=a,or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uh.current=r===null||r.memoizedState===null?VA:zA,r=e(n,i),ku){a=0;do{if(ku=!1,qu=0,25<=a)throw Error(Oe(301));a+=1,Ur=Dr=null,t.updateQueue=null,uh.current=WA,r=e(n,i)}while(ku)}if(uh.current=Xh,t=Dr!==null&&Dr.next!==null,Es=0,Ur=Dr=or=null,Jh=!1,t)throw Error(Oe(300));return r}function l1(){var r=qu!==0;return qu=0,r}function Gi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?or.memoizedState=Ur=r:Ur=Ur.next=r,Ur}function di(){if(Dr===null){var r=or.alternate;r=r!==null?r.memoizedState:null}else r=Dr.next;var t=Ur===null?or.memoizedState:Ur.next;if(t!==null)Ur=t,Dr=r;else{if(r===null)throw Error(Oe(310));Dr=r,r={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Ur===null?or.memoizedState=Ur=r:Ur=Ur.next=r}return Ur}function Hu(r,t){return typeof t=="function"?t(r):t}function Em(r){var t=di(),e=t.queue;if(e===null)throw Error(Oe(311));e.lastRenderedReducer=r;var n=Dr,i=n.baseQueue,a=e.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,e.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,c=a;do{var u=c.lane;if((Es&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:r(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,or.lanes|=u,Cs|=u}c=c.next}while(c!==null&&c!==a);l===null?o=n:l.next=s,Oi(n,t.memoizedState)||(Pn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,e.lastRenderedState=n}if(r=e.interleaved,r!==null){i=r;do a=i.lane,or.lanes|=a,Cs|=a,i=i.next;while(i!==r)}else i===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function Cm(r){var t=di(),e=t.queue;if(e===null)throw Error(Oe(311));e.lastRenderedReducer=r;var n=e.dispatch,i=e.pending,a=t.memoizedState;if(i!==null){e.pending=null;var o=i=i.next;do a=r(a,o.action),o=o.next;while(o!==i);Oi(a,t.memoizedState)||(Pn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),e.lastRenderedState=a}return[a,n]}function kk(){}function Pk(r,t){var e=or,n=di(),i=t(),a=!Oi(n.memoizedState,i);if(a&&(n.memoizedState=i,Pn=!0),n=n.queue,u1(Ck.bind(null,e,n,r),[r]),n.getSnapshot!==t||a||Ur!==null&&Ur.memoizedState.tag&1){if(e.flags|=2048,Gu(9,Ek.bind(null,e,n,i,t),void 0,null),Vr===null)throw Error(Oe(349));Es&30||Tk(e,t,i)}return i}function Tk(r,t,e){r.flags|=16384,r={getSnapshot:t,value:e},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.stores=[r]):(e=t.stores,e===null?t.stores=[r]:e.push(r))}function Ek(r,t,e,n){t.value=e,t.getSnapshot=n,Lk(t)&&Ok(r)}function Ck(r,t,e){return e(function(){Lk(t)&&Ok(r)})}function Lk(r){var t=r.getSnapshot;r=r.value;try{var e=t();return!Oi(r,e)}catch{return!0}}function Ok(r){var t=ja(r,1);t!==null&&Li(t,r,1,-1)}function J2(r){var t=Gi();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:r},t.queue=r,r=r.dispatch=$A.bind(null,or,r),[t.memoizedState,r]}function Gu(r,t,e,n){return r={tag:r,create:t,destroy:e,deps:n,next:null},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.lastEffect=r.next=r):(e=t.lastEffect,e===null?t.lastEffect=r.next=r:(n=e.next,e.next=r,r.next=n,t.lastEffect=r)),r}function Ak(){return di().memoizedState}function fh(r,t,e,n){var i=Gi();or.flags|=r,i.memoizedState=Gu(1|t,e,void 0,n===void 0?null:n)}function Tp(r,t,e,n){var i=di();n=n===void 0?null:n;var a=void 0;if(Dr!==null){var o=Dr.memoizedState;if(a=o.destroy,n!==null&&s1(n,o.deps)){i.memoizedState=Gu(t,e,a,n);return}}or.flags|=r,i.memoizedState=Gu(1|t,e,a,n)}function X2(r,t){return fh(8390656,8,r,t)}function u1(r,t){return Tp(2048,8,r,t)}function Nk(r,t){return Tp(4,2,r,t)}function Rk(r,t){return Tp(4,4,r,t)}function jk(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function Ik(r,t,e){return e=e!=null?e.concat([r]):null,Tp(4,4,jk.bind(null,t,r),e)}function f1(){}function Mk(r,t){var e=di();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&s1(t,n[1])?n[0]:(e.memoizedState=[r,t],r)}function Dk(r,t){var e=di();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&s1(t,n[1])?n[0]:(r=r(),e.memoizedState=[r,t],r)}function Fk(r,t,e){return Es&21?(Oi(e,t)||(e=zx(),or.lanes|=e,Cs|=e,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,Pn=!0),r.memoizedState=e)}function BA(r,t){var e=$t;$t=e!==0&&4>e?e:4,r(!0);var n=Tm.transition;Tm.transition={};try{r(!1),t()}finally{$t=e,Tm.transition=n}}function Bk(){return di().memoizedState}function UA(r,t,e){var n=Po(r);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},Uk(r))$k(t,e);else if(e=bk(r,t,e,n),e!==null){var i=vn();Li(e,r,n,i),Vk(e,t,n)}}function $A(r,t,e){var n=Po(r),i={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(Uk(r))$k(t,i);else{var a=r.alternate;if(r.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,e);if(i.hasEagerState=!0,i.eagerState=s,Oi(s,o)){var l=t.interleaved;l===null?(i.next=i,r1(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}e=bk(r,t,i,n),e!==null&&(i=vn(),Li(e,r,n,i),Vk(e,t,n))}}function Uk(r){var t=r.alternate;return r===or||t!==null&&t===or}function $k(r,t){ku=Jh=!0;var e=r.pending;e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t}function Vk(r,t,e){if(e&4194240){var n=t.lanes;n&=r.pendingLanes,e|=n,t.lanes=e,Vy(r,e)}}var Xh={readContext:fi,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},VA={readContext:fi,useCallback:function(r,t){return Gi().memoizedState=[r,t===void 0?null:t],r},useContext:fi,useEffect:X2,useImperativeHandle:function(r,t,e){return e=e!=null?e.concat([r]):null,fh(4194308,4,jk.bind(null,t,r),e)},useLayoutEffect:function(r,t){return fh(4194308,4,r,t)},useInsertionEffect:function(r,t){return fh(4,2,r,t)},useMemo:function(r,t){var e=Gi();return t=t===void 0?null:t,r=r(),e.memoizedState=[r,t],r},useReducer:function(r,t,e){var n=Gi();return t=e!==void 0?e(t):t,n.memoizedState=n.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},n.queue=r,r=r.dispatch=UA.bind(null,or,r),[n.memoizedState,r]},useRef:function(r){var t=Gi();return r={current:r},t.memoizedState=r},useState:J2,useDebugValue:f1,useDeferredValue:function(r){return Gi().memoizedState=r},useTransition:function(){var r=J2(!1),t=r[0];return r=BA.bind(null,r[1]),Gi().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,e){var n=or,i=Gi();if(rr){if(e===void 0)throw Error(Oe(407));e=e()}else{if(e=t(),Vr===null)throw Error(Oe(349));Es&30||Tk(n,t,e)}i.memoizedState=e;var a={value:e,getSnapshot:t};return i.queue=a,X2(Ck.bind(null,n,a,r),[r]),n.flags|=2048,Gu(9,Ek.bind(null,n,a,e,t),void 0,null),e},useId:function(){var r=Gi(),t=Vr.identifierPrefix;if(rr){var e=Ca,n=Ea;e=(n&~(1<<32-Ci(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=qu++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=FA++,t=":"+t+"r"+e.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},zA={readContext:fi,useCallback:Mk,useContext:fi,useEffect:u1,useImperativeHandle:Ik,useInsertionEffect:Nk,useLayoutEffect:Rk,useMemo:Dk,useReducer:Em,useRef:Ak,useState:function(){return Em(Hu)},useDebugValue:f1,useDeferredValue:function(r){var t=di();return Fk(t,Dr.memoizedState,r)},useTransition:function(){var r=Em(Hu)[0],t=di().memoizedState;return[r,t]},useMutableSource:kk,useSyncExternalStore:Pk,useId:Bk,unstable_isNewReconciler:!1},WA={readContext:fi,useCallback:Mk,useContext:fi,useEffect:u1,useImperativeHandle:Ik,useInsertionEffect:Nk,useLayoutEffect:Rk,useMemo:Dk,useReducer:Cm,useRef:Ak,useState:function(){return Cm(Hu)},useDebugValue:f1,useDeferredValue:function(r){var t=di();return Dr===null?t.memoizedState=r:Fk(t,Dr.memoizedState,r)},useTransition:function(){var r=Cm(Hu)[0],t=di().memoizedState;return[r,t]},useMutableSource:kk,useSyncExternalStore:Pk,useId:Bk,unstable_isNewReconciler:!1};function xi(r,t){if(r&&r.defaultProps){t=sr({},t),r=r.defaultProps;for(var e in r)t[e]===void 0&&(t[e]=r[e]);return t}return t}function S0(r,t,e,n){t=r.memoizedState,e=e(n,t),e=e==null?t:sr({},t,e),r.memoizedState=e,r.lanes===0&&(r.updateQueue.baseState=e)}var Ep={isMounted:function(r){return(r=r._reactInternals)?Is(r)===r:!1},enqueueSetState:function(r,t,e){r=r._reactInternals;var n=vn(),i=Po(r),a=Aa(n,i);a.payload=t,e!=null&&(a.callback=e),t=xo(r,a,i),t!==null&&(Li(t,r,i,n),lh(t,r,i))},enqueueReplaceState:function(r,t,e){r=r._reactInternals;var n=vn(),i=Po(r),a=Aa(n,i);a.tag=1,a.payload=t,e!=null&&(a.callback=e),t=xo(r,a,i),t!==null&&(Li(t,r,i,n),lh(t,r,i))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var e=vn(),n=Po(r),i=Aa(e,n);i.tag=2,t!=null&&(i.callback=t),t=xo(r,i,n),t!==null&&(Li(t,r,n,e),lh(t,r,n))}};function Z2(r,t,e,n,i,a,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!Bu(e,n)||!Bu(i,a):!0}function zk(r,t,e){var n=!1,i=Oo,a=t.contextType;return typeof a=="object"&&a!==null?a=fi(a):(i=En(t)?Ps:ln.current,n=t.contextTypes,a=(n=n!=null)?Hc(r,i):Oo),t=new t(e,a),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ep,r.stateNode=t,t._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=a),t}function ew(r,t,e,n){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==r&&Ep.enqueueReplaceState(t,t.state,null)}function x0(r,t,e,n){var i=r.stateNode;i.props=e,i.state=r.memoizedState,i.refs={},n1(r);var a=t.contextType;typeof a=="object"&&a!==null?i.context=fi(a):(a=En(t)?Ps:ln.current,i.context=Hc(r,a)),i.state=r.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(S0(r,t,a,e),i.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ep.enqueueReplaceState(i,i.state,null),Qh(r,e,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function Yc(r,t){try{var e="",n=t;do e+=yO(n),n=n.return;while(n);var i=e}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:r,source:t,stack:i,digest:null}}function Lm(r,t,e){return{value:r,source:null,stack:e??null,digest:t??null}}function k0(r,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var qA=typeof WeakMap=="function"?WeakMap:Map;function Wk(r,t,e){e=Aa(-1,e),e.tag=3,e.payload={element:null};var n=t.value;return e.callback=function(){ep||(ep=!0,j0=n),k0(r,t)},e}function qk(r,t,e){e=Aa(-1,e),e.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;e.payload=function(){return n(i)},e.callback=function(){k0(r,t)}}var a=r.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){k0(r,t),typeof n!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function tw(r,t,e){var n=r.pingCache;if(n===null){n=r.pingCache=new qA;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(e)||(i.add(e),r=a6.bind(null,r,t,e),t.then(r,r))}function rw(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function nw(r,t,e,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===t?r.flags|=65536:(r.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Aa(-1,1),t.tag=2,xo(e,t,1))),e.lanes|=1),r)}var HA=Ma.ReactCurrentOwner,Pn=!1;function hn(r,t,e,n){t.child=r===null?wk(t,null,e,n):Kc(t,r.child,e,n)}function iw(r,t,e,n,i){e=e.render;var a=t.ref;return Dc(t,i),n=c1(r,t,e,n,a,i),e=l1(),r!==null&&!Pn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Ia(r,t,i)):(rr&&e&&Yy(t),t.flags|=1,hn(r,t,n,i),t.child)}function aw(r,t,e,n,i){if(r===null){var a=e.type;return typeof a=="function"&&!_1(a)&&a.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=a,Hk(r,t,a,n,i)):(r=vh(e.type,null,n,t,t.mode,i),r.ref=t.ref,r.return=t,t.child=r)}if(a=r.child,!(r.lanes&i)){var o=a.memoizedProps;if(e=e.compare,e=e!==null?e:Bu,e(o,n)&&r.ref===t.ref)return Ia(r,t,i)}return t.flags|=1,r=To(a,n),r.ref=t.ref,r.return=t,t.child=r}function Hk(r,t,e,n,i){if(r!==null){var a=r.memoizedProps;if(Bu(a,n)&&r.ref===t.ref)if(Pn=!1,t.pendingProps=n=a,(r.lanes&i)!==0)r.flags&131072&&(Pn=!0);else return t.lanes=r.lanes,Ia(r,t,i)}return P0(r,t,e,n,i)}function Gk(r,t,e){var n=t.pendingProps,i=n.children,a=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Oc,Vn),Vn|=e;else{if(!(e&1073741824))return r=a!==null?a.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,Yt(Oc,Vn),Vn|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:e,Yt(Oc,Vn),Vn|=n}else a!==null?(n=a.baseLanes|e,t.memoizedState=null):n=e,Yt(Oc,Vn),Vn|=n;return hn(r,t,i,e),t.child}function Kk(r,t){var e=t.ref;(r===null&&e!==null||r!==null&&r.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function P0(r,t,e,n,i){var a=En(e)?Ps:ln.current;return a=Hc(t,a),Dc(t,i),e=c1(r,t,e,n,a,i),n=l1(),r!==null&&!Pn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Ia(r,t,i)):(rr&&n&&Yy(t),t.flags|=1,hn(r,t,e,i),t.child)}function ow(r,t,e,n,i){if(En(e)){var a=!0;Wh(t)}else a=!1;if(Dc(t,i),t.stateNode===null)dh(r,t),zk(t,e,n),x0(t,e,n,i),n=!0;else if(r===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=e.contextType;typeof c=="object"&&c!==null?c=fi(c):(c=En(e)?Ps:ln.current,c=Hc(t,c));var u=e.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==c)&&ew(t,o,n,c),uo=!1;var v=t.memoizedState;o.state=v,Qh(t,n,o,i),l=t.memoizedState,s!==n||v!==l||Tn.current||uo?(typeof u=="function"&&(S0(t,e,u,n),l=t.memoizedState),(s=uo||Z2(t,e,s,n,v,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Sk(r,t),s=t.memoizedProps,c=t.type===t.elementType?s:xi(t.type,s),o.props=c,d=t.pendingProps,v=o.context,l=e.contextType,typeof l=="object"&&l!==null?l=fi(l):(l=En(e)?Ps:ln.current,l=Hc(t,l));var p=e.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||v!==l)&&ew(t,o,n,l),uo=!1,v=t.memoizedState,o.state=v,Qh(t,n,o,i);var y=t.memoizedState;s!==d||v!==y||Tn.current||uo?(typeof p=="function"&&(S0(t,e,p,n),y=t.memoizedState),(c=uo||Z2(t,e,c,n,v,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=1024),n=!1)}return T0(r,t,e,n,a,i)}function T0(r,t,e,n,i,a){Kk(r,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&q2(t,e,!1),Ia(r,t,a);n=t.stateNode,HA.current=t;var s=o&&typeof e.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,r!==null&&o?(t.child=Kc(t,r.child,null,a),t.child=Kc(t,null,s,a)):hn(r,t,s,a),t.memoizedState=n.state,i&&q2(t,e,!0),t.child}function Qk(r){var t=r.stateNode;t.pendingContext?W2(r,t.pendingContext,t.pendingContext!==t.context):t.context&&W2(r,t.context,!1),i1(r,t.containerInfo)}function sw(r,t,e,n,i){return Gc(),Xy(i),t.flags|=256,hn(r,t,e,n),t.child}var E0={dehydrated:null,treeContext:null,retryLane:0};function C0(r){return{baseLanes:r,cachePool:null,transitions:null}}function Yk(r,t,e){var n=t.pendingProps,i=ir.current,a=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=r!==null&&r.memoizedState===null?!1:(i&2)!==0),s?(a=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),Yt(ir,i&1),r===null)return w0(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,r=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Op(o,n,0,null),r=bs(r,n,e,null),a.return=t,r.return=t,a.sibling=r,t.child=a,t.child.memoizedState=C0(e),t.memoizedState=E0,r):d1(t,o));if(i=r.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return GA(r,t,o,n,s,i,e);if(a){a=n.fallback,o=t.mode,i=r.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=To(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=To(s,a):(a=bs(a,o,e,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=r.child.memoizedState,o=o===null?C0(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=r.childLanes&~e,t.memoizedState=E0,n}return a=r.child,r=a.sibling,n=To(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=e),n.return=t,n.sibling=null,r!==null&&(e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)),t.child=n,t.memoizedState=null,n}function d1(r,t){return t=Op({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function bd(r,t,e,n){return n!==null&&Xy(n),Kc(t,r.child,null,e),r=d1(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function GA(r,t,e,n,i,a,o){if(e)return t.flags&256?(t.flags&=-257,n=Lm(Error(Oe(422))),bd(r,t,o,n)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Op({mode:"visible",children:n.children},i,0,null),a=bs(a,i,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Kc(t,r.child,null,o),t.child.memoizedState=C0(o),t.memoizedState=E0,a);if(!(t.mode&1))return bd(r,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(Oe(419)),n=Lm(a,n,void 0),bd(r,t,o,n)}if(s=(o&r.childLanes)!==0,Pn||s){if(n=Vr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ja(r,i),Li(n,r,i,-1))}return y1(),n=Lm(Error(Oe(421))),bd(r,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=r.child,t=o6.bind(null,r),i._reactRetry=t,null):(r=a.treeContext,Wn=So(i.nextSibling),Hn=t,rr=!0,Ei=null,r!==null&&(ai[oi++]=Ea,ai[oi++]=Ca,ai[oi++]=Ts,Ea=r.id,Ca=r.overflow,Ts=t),t=d1(t,n.children),t.flags|=4096,t)}function cw(r,t,e){r.lanes|=t;var n=r.alternate;n!==null&&(n.lanes|=t),b0(r.return,t,e)}function Om(r,t,e,n,i){var a=r.memoizedState;a===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=e,a.tailMode=i)}function Jk(r,t,e){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(hn(r,t,n.children,e),n=ir.current,n&2)n=n&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&cw(r,e,t);else if(r.tag===19)cw(r,e,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Yt(ir,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(e=t.child,i=null;e!==null;)r=e.alternate,r!==null&&Yh(r)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),Om(t,!1,i,e,a);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(r=i.alternate,r!==null&&Yh(r)===null){t.child=i;break}r=i.sibling,i.sibling=e,e=i,i=r}Om(t,!0,e,null,a);break;case"together":Om(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dh(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function Ia(r,t,e){if(r!==null&&(t.dependencies=r.dependencies),Cs|=t.lanes,!(e&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(Oe(153));if(t.child!==null){for(r=t.child,e=To(r,r.pendingProps),t.child=e,e.return=t;r.sibling!==null;)r=r.sibling,e=e.sibling=To(r,r.pendingProps),e.return=t;e.sibling=null}return t.child}function KA(r,t,e){switch(t.tag){case 3:Qk(t),Gc();break;case 5:xk(t);break;case 1:En(t.type)&&Wh(t);break;case 4:i1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Yt(Gh,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Yt(ir,ir.current&1),t.flags|=128,null):e&t.child.childLanes?Yk(r,t,e):(Yt(ir,ir.current&1),r=Ia(r,t,e),r!==null?r.sibling:null);Yt(ir,ir.current&1);break;case 19:if(n=(e&t.childLanes)!==0,r.flags&128){if(n)return Jk(r,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yt(ir,ir.current),n)break;return null;case 22:case 23:return t.lanes=0,Gk(r,t,e)}return Ia(r,t,e)}var Xk,L0,Zk,e4;Xk=function(r,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)r.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};L0=function(){};Zk=function(r,t,e,n){var i=r.memoizedProps;if(i!==n){r=t.stateNode,ys(Zi.current);var a=null;switch(e){case"input":i=Jg(r,i),n=Jg(r,n),a=[];break;case"select":i=sr({},i,{value:void 0}),n=sr({},n,{value:void 0}),a=[];break;case"textarea":i=e0(r,i),n=e0(r,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Vh)}r0(e,n);var o;e=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Nu.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(s=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(e||(e={}),e[o]=l[o])}else e||(a||(a=[]),a.push(c,e)),e=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Nu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Xt("scroll",r),a||s===l||(a=[])):(a=a||[]).push(c,l))}e&&(a=a||[]).push("style",e);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};e4=function(r,t,e,n){e!==n&&(t.flags|=4)};function eu(r,t){if(!rr)switch(r.tailMode){case"hidden":t=r.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?r.tail=null:e.sibling=null;break;case"collapsed":e=r.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function tn(r){var t=r.alternate!==null&&r.alternate.child===r.child,e=0,n=0;if(t)for(var i=r.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=e,t}function QA(r,t,e){var n=t.pendingProps;switch(Jy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(t),null;case 1:return En(t.type)&&zh(),tn(t),null;case 3:return n=t.stateNode,Qc(),er(Tn),er(ln),o1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(_d(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ei!==null&&(D0(Ei),Ei=null))),L0(r,t),tn(t),null;case 5:a1(t);var i=ys(Wu.current);if(e=t.type,r!==null&&t.stateNode!=null)Zk(r,t,e,n,i),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Oe(166));return tn(t),null}if(r=ys(Zi.current),_d(t)){n=t.stateNode,e=t.type;var a=t.memoizedProps;switch(n[Qi]=t,n[Vu]=a,r=(t.mode&1)!==0,e){case"dialog":Xt("cancel",n),Xt("close",n);break;case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(i=0;i<pu.length;i++)Xt(pu[i],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"details":Xt("toggle",n);break;case"input":g2(n,a),Xt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Xt("invalid",n);break;case"textarea":_2(n,a),Xt("invalid",n)}r0(e,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&yd(n.textContent,s,r),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&yd(n.textContent,s,r),i=["children",""+s]):Nu.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Xt("scroll",n)}switch(e){case"input":ud(n),y2(n,a,!0);break;case"textarea":ud(n),w2(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Vh)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Cx(e)),r==="http://www.w3.org/1999/xhtml"?e==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(e,{is:n.is}):(r=o.createElement(e),e==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,e),r[Qi]=t,r[Vu]=n,Xk(r,t,!1,!1),t.stateNode=r;e:{switch(o=n0(e,n),e){case"dialog":Xt("cancel",r),Xt("close",r),i=n;break;case"iframe":case"object":case"embed":Xt("load",r),i=n;break;case"video":case"audio":for(i=0;i<pu.length;i++)Xt(pu[i],r);i=n;break;case"source":Xt("error",r),i=n;break;case"img":case"image":case"link":Xt("error",r),Xt("load",r),i=n;break;case"details":Xt("toggle",r),i=n;break;case"input":g2(r,n),i=Jg(r,n),Xt("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=sr({},n,{value:void 0}),Xt("invalid",r);break;case"textarea":_2(r,n),i=e0(r,n),Xt("invalid",r);break;default:i=n}r0(e,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?Ax(r,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Lx(r,l)):a==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&Ru(r,l):typeof l=="number"&&Ru(r,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Nu.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Xt("scroll",r):l!=null&&My(r,a,l,o))}switch(e){case"input":ud(r),y2(r,n,!1);break;case"textarea":ud(r),w2(r);break;case"option":n.value!=null&&r.setAttribute("value",""+Lo(n.value));break;case"select":r.multiple=!!n.multiple,a=n.value,a!=null?Rc(r,!!n.multiple,a,!1):n.defaultValue!=null&&Rc(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Vh)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tn(t),null;case 6:if(r&&t.stateNode!=null)e4(r,t,r.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Oe(166));if(e=ys(Wu.current),ys(Zi.current),_d(t)){if(n=t.stateNode,e=t.memoizedProps,n[Qi]=t,(a=n.nodeValue!==e)&&(r=Hn,r!==null))switch(r.tag){case 3:yd(n.nodeValue,e,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&yd(n.nodeValue,e,(r.mode&1)!==0)}a&&(t.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[Qi]=t,t.stateNode=n}return tn(t),null;case 13:if(er(ir),n=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(rr&&Wn!==null&&t.mode&1&&!(t.flags&128))yk(),Gc(),t.flags|=98560,a=!1;else if(a=_d(t),n!==null&&n.dehydrated!==null){if(r===null){if(!a)throw Error(Oe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Oe(317));a[Qi]=t}else Gc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tn(t),a=!1}else Ei!==null&&(D0(Ei),Ei=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(r===null||ir.current&1?Fr===0&&(Fr=3):y1())),t.updateQueue!==null&&(t.flags|=4),tn(t),null);case 4:return Qc(),L0(r,t),r===null&&Uu(t.stateNode.containerInfo),tn(t),null;case 10:return t1(t.type._context),tn(t),null;case 17:return En(t.type)&&zh(),tn(t),null;case 19:if(er(ir),a=t.memoizedState,a===null)return tn(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)eu(a,!1);else{if(Fr!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(o=Yh(r),o!==null){for(t.flags|=128,eu(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=e,e=t.child;e!==null;)a=e,r=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e=e.sibling;return Yt(ir,ir.current&1|2),t.child}r=r.sibling}a.tail!==null&&Sr()>Jc&&(t.flags|=128,n=!0,eu(a,!1),t.lanes=4194304)}else{if(!n)if(r=Yh(o),r!==null){if(t.flags|=128,n=!0,e=r.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),eu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!rr)return tn(t),null}else 2*Sr()-a.renderingStartTime>Jc&&e!==1073741824&&(t.flags|=128,n=!0,eu(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(e=a.last,e!==null?e.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Sr(),t.sibling=null,e=ir.current,Yt(ir,n?e&1|2:e&1),t):(tn(t),null);case 22:case 23:return g1(),n=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Vn&1073741824&&(tn(t),t.subtreeFlags&6&&(t.flags|=8192)):tn(t),null;case 24:return null;case 25:return null}throw Error(Oe(156,t.tag))}function YA(r,t){switch(Jy(t),t.tag){case 1:return En(t.type)&&zh(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return Qc(),er(Tn),er(ln),o1(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return a1(t),null;case 13:if(er(ir),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(Oe(340));Gc()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return er(ir),null;case 4:return Qc(),null;case 10:return t1(t.type._context),null;case 22:case 23:return g1(),null;case 24:return null;default:return null}}var Sd=!1,sn=!1,JA=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Lc(r,t){var e=r.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){hr(r,t,n)}else e.current=null}function O0(r,t,e){try{e()}catch(n){hr(r,t,n)}}var lw=!1;function XA(r,t){if(h0=Bh,r=ak(),Qy(r)){if("selectionStart"in r)var e={start:r.selectionStart,end:r.selectionEnd};else e:{e=(e=r.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{e.nodeType,a.nodeType}catch{e=null;break e}var o=0,s=-1,l=-1,c=0,u=0,d=r,v=null;t:for(;;){for(var p;d!==e||i!==0&&d.nodeType!==3||(s=o+i),d!==a||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)v=d,d=p;for(;;){if(d===r)break t;if(v===e&&++c===i&&(s=o),v===a&&++u===n&&(l=o),(p=d.nextSibling)!==null)break;d=v,v=d.parentNode}d=p}e=s===-1||l===-1?null:{start:s,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(p0={focusedElem:r,selectionRange:e},Bh=!1,Ie=t;Ie!==null;)if(t=Ie,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,Ie=r;else for(;Ie!==null;){t=Ie;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,x=y.memoizedState,w=t.stateNode,S=w.getSnapshotBeforeUpdate(t.elementType===t.type?_:xi(t.type,_),x);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(T){hr(t,t.return,T)}if(r=t.sibling,r!==null){r.return=t.return,Ie=r;break}Ie=t.return}return y=lw,lw=!1,y}function Pu(r,t,e){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var a=i.destroy;i.destroy=void 0,a!==void 0&&O0(t,e,a)}i=i.next}while(i!==n)}}function Cp(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&r)===r){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}}function A0(r){var t=r.ref;if(t!==null){var e=r.stateNode;switch(r.tag){case 5:r=e;break;default:r=e}typeof t=="function"?t(r):t.current=r}}function t4(r){var t=r.alternate;t!==null&&(r.alternate=null,t4(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[Qi],delete t[Vu],delete t[g0],delete t[jA],delete t[IA])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function r4(r){return r.tag===5||r.tag===3||r.tag===4}function uw(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||r4(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function N0(r,t,e){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(r,t):e.insertBefore(r,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(r,e)):(t=e,t.appendChild(r)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Vh));else if(n!==4&&(r=r.child,r!==null))for(N0(r,t,e),r=r.sibling;r!==null;)N0(r,t,e),r=r.sibling}function R0(r,t,e){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?e.insertBefore(r,t):e.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(R0(r,t,e),r=r.sibling;r!==null;)R0(r,t,e),r=r.sibling}var Kr=null,ki=!1;function no(r,t,e){for(e=e.child;e!==null;)n4(r,t,e),e=e.sibling}function n4(r,t,e){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(wp,e)}catch{}switch(e.tag){case 5:sn||Lc(e,t);case 6:var n=Kr,i=ki;Kr=null,no(r,t,e),Kr=n,ki=i,Kr!==null&&(ki?(r=Kr,e=e.stateNode,r.nodeType===8?r.parentNode.removeChild(e):r.removeChild(e)):Kr.removeChild(e.stateNode));break;case 18:Kr!==null&&(ki?(r=Kr,e=e.stateNode,r.nodeType===8?xm(r.parentNode,e):r.nodeType===1&&xm(r,e),Du(r)):xm(Kr,e.stateNode));break;case 4:n=Kr,i=ki,Kr=e.stateNode.containerInfo,ki=!0,no(r,t,e),Kr=n,ki=i;break;case 0:case 11:case 14:case 15:if(!sn&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&O0(e,t,o),i=i.next}while(i!==n)}no(r,t,e);break;case 1:if(!sn&&(Lc(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(s){hr(e,t,s)}no(r,t,e);break;case 21:no(r,t,e);break;case 22:e.mode&1?(sn=(n=sn)||e.memoizedState!==null,no(r,t,e),sn=n):no(r,t,e);break;default:no(r,t,e)}}function fw(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var e=r.stateNode;e===null&&(e=r.stateNode=new JA),t.forEach(function(n){var i=s6.bind(null,r,n);e.has(n)||(e.add(n),n.then(i,i))})}}function bi(r,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];try{var a=r,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Kr=s.stateNode,ki=!1;break e;case 3:Kr=s.stateNode.containerInfo,ki=!0;break e;case 4:Kr=s.stateNode.containerInfo,ki=!0;break e}s=s.return}if(Kr===null)throw Error(Oe(160));n4(a,o,i),Kr=null,ki=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){hr(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)i4(t,r),t=t.sibling}function i4(r,t){var e=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bi(t,r),zi(r),n&4){try{Pu(3,r,r.return),Cp(3,r)}catch(_){hr(r,r.return,_)}try{Pu(5,r,r.return)}catch(_){hr(r,r.return,_)}}break;case 1:bi(t,r),zi(r),n&512&&e!==null&&Lc(e,e.return);break;case 5:if(bi(t,r),zi(r),n&512&&e!==null&&Lc(e,e.return),r.flags&32){var i=r.stateNode;try{Ru(i,"")}catch(_){hr(r,r.return,_)}}if(n&4&&(i=r.stateNode,i!=null)){var a=r.memoizedProps,o=e!==null?e.memoizedProps:a,s=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&Tx(i,a),n0(s,o);var c=n0(s,a);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Ax(i,d):u==="dangerouslySetInnerHTML"?Lx(i,d):u==="children"?Ru(i,d):My(i,u,d,c)}switch(s){case"input":Xg(i,a);break;case"textarea":Ex(i,a);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Rc(i,!!a.multiple,p,!1):v!==!!a.multiple&&(a.defaultValue!=null?Rc(i,!!a.multiple,a.defaultValue,!0):Rc(i,!!a.multiple,a.multiple?[]:"",!1))}i[Vu]=a}catch(_){hr(r,r.return,_)}}break;case 6:if(bi(t,r),zi(r),n&4){if(r.stateNode===null)throw Error(Oe(162));i=r.stateNode,a=r.memoizedProps;try{i.nodeValue=a}catch(_){hr(r,r.return,_)}}break;case 3:if(bi(t,r),zi(r),n&4&&e!==null&&e.memoizedState.isDehydrated)try{Du(t.containerInfo)}catch(_){hr(r,r.return,_)}break;case 4:bi(t,r),zi(r);break;case 13:bi(t,r),zi(r),i=r.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(v1=Sr())),n&4&&fw(r);break;case 22:if(u=e!==null&&e.memoizedState!==null,r.mode&1?(sn=(c=sn)||u,bi(t,r),sn=c):bi(t,r),zi(r),n&8192){if(c=r.memoizedState!==null,(r.stateNode.isHidden=c)&&!u&&r.mode&1)for(Ie=r,u=r.child;u!==null;){for(d=Ie=u;Ie!==null;){switch(v=Ie,p=v.child,v.tag){case 0:case 11:case 14:case 15:Pu(4,v,v.return);break;case 1:Lc(v,v.return);var y=v.stateNode;if(typeof y.componentWillUnmount=="function"){n=v,e=v.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(_){hr(n,e,_)}}break;case 5:Lc(v,v.return);break;case 22:if(v.memoizedState!==null){hw(d);continue}}p!==null?(p.return=v,Ie=p):hw(d)}u=u.sibling}e:for(u=null,d=r;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=Ox("display",o))}catch(_){hr(r,r.return,_)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(_){hr(r,r.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===r)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bi(t,r),zi(r),n&4&&fw(r);break;case 21:break;default:bi(t,r),zi(r)}}function zi(r){var t=r.flags;if(t&2){try{e:{for(var e=r.return;e!==null;){if(r4(e)){var n=e;break e}e=e.return}throw Error(Oe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ru(i,""),n.flags&=-33);var a=uw(r);R0(r,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=uw(r);N0(r,s,o);break;default:throw Error(Oe(161))}}catch(l){hr(r,r.return,l)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function ZA(r,t,e){Ie=r,a4(r)}function a4(r,t,e){for(var n=(r.mode&1)!==0;Ie!==null;){var i=Ie,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Sd;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||sn;s=Sd;var c=sn;if(Sd=o,(sn=l)&&!c)for(Ie=i;Ie!==null;)o=Ie,l=o.child,o.tag===22&&o.memoizedState!==null?pw(i):l!==null?(l.return=o,Ie=l):pw(i);for(;a!==null;)Ie=a,a4(a),a=a.sibling;Ie=i,Sd=s,sn=c}dw(r)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ie=a):dw(r)}}function dw(r){for(;Ie!==null;){var t=Ie;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sn||Cp(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!sn)if(e===null)n.componentDidMount();else{var i=t.elementType===t.type?e.memoizedProps:xi(t.type,e.memoizedProps);n.componentDidUpdate(i,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Y2(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Y2(t,o,e)}break;case 5:var s=t.stateNode;if(e===null&&t.flags&4){e=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Du(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}sn||t.flags&512&&A0(t)}catch(v){hr(t,t.return,v)}}if(t===r){Ie=null;break}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}}function hw(r){for(;Ie!==null;){var t=Ie;if(t===r){Ie=null;break}var e=t.sibling;if(e!==null){e.return=t.return,Ie=e;break}Ie=t.return}}function pw(r){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Cp(4,t)}catch(l){hr(t,e,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){hr(t,i,l)}}var a=t.return;try{A0(t)}catch(l){hr(t,a,l)}break;case 5:var o=t.return;try{A0(t)}catch(l){hr(t,o,l)}}}catch(l){hr(t,t.return,l)}if(t===r){Ie=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ie=s;break}Ie=t.return}}var e6=Math.ceil,Zh=Ma.ReactCurrentDispatcher,h1=Ma.ReactCurrentOwner,ui=Ma.ReactCurrentBatchConfig,Lt=0,Vr=null,Lr=null,Qr=0,Vn=0,Oc=Ro(0),Fr=0,Ku=null,Cs=0,Lp=0,p1=0,Tu=null,kn=null,v1=0,Jc=1/0,ka=null,ep=!1,j0=null,ko=null,xd=!1,vo=null,tp=0,Eu=0,I0=null,hh=-1,ph=0;function vn(){return Lt&6?Sr():hh!==-1?hh:hh=Sr()}function Po(r){return r.mode&1?Lt&2&&Qr!==0?Qr&-Qr:DA.transition!==null?(ph===0&&(ph=zx()),ph):(r=$t,r!==0||(r=window.event,r=r===void 0?16:Yx(r.type)),r):1}function Li(r,t,e,n){if(50<Eu)throw Eu=0,I0=null,Error(Oe(185));of(r,e,n),(!(Lt&2)||r!==Vr)&&(r===Vr&&(!(Lt&2)&&(Lp|=e),Fr===4&&ho(r,Qr)),Cn(r,n),e===1&&Lt===0&&!(t.mode&1)&&(Jc=Sr()+500,Pp&&jo()))}function Cn(r,t){var e=r.callbackNode;DO(r,t);var n=Fh(r,r===Vr?Qr:0);if(n===0)e!==null&&x2(e),r.callbackNode=null,r.callbackPriority=0;else if(t=n&-n,r.callbackPriority!==t){if(e!=null&&x2(e),t===1)r.tag===0?MA(vw.bind(null,r)):vk(vw.bind(null,r)),NA(function(){!(Lt&6)&&jo()}),e=null;else{switch(Wx(n)){case 1:e=$y;break;case 4:e=$x;break;case 16:e=Dh;break;case 536870912:e=Vx;break;default:e=Dh}e=h4(e,o4.bind(null,r))}r.callbackPriority=t,r.callbackNode=e}}function o4(r,t){if(hh=-1,ph=0,Lt&6)throw Error(Oe(327));var e=r.callbackNode;if(Fc()&&r.callbackNode!==e)return null;var n=Fh(r,r===Vr?Qr:0);if(n===0)return null;if(n&30||n&r.expiredLanes||t)t=rp(r,n);else{t=n;var i=Lt;Lt|=2;var a=c4();(Vr!==r||Qr!==t)&&(ka=null,Jc=Sr()+500,ws(r,t));do try{n6();break}catch(s){s4(r,s)}while(!0);e1(),Zh.current=a,Lt=i,Lr!==null?t=0:(Vr=null,Qr=0,t=Fr)}if(t!==0){if(t===2&&(i=c0(r),i!==0&&(n=i,t=M0(r,i))),t===1)throw e=Ku,ws(r,0),ho(r,n),Cn(r,Sr()),e;if(t===6)ho(r,n);else{if(i=r.current.alternate,!(n&30)&&!t6(i)&&(t=rp(r,n),t===2&&(a=c0(r),a!==0&&(n=a,t=M0(r,a))),t===1))throw e=Ku,ws(r,0),ho(r,n),Cn(r,Sr()),e;switch(r.finishedWork=i,r.finishedLanes=n,t){case 0:case 1:throw Error(Oe(345));case 2:fs(r,kn,ka);break;case 3:if(ho(r,n),(n&130023424)===n&&(t=v1+500-Sr(),10<t)){if(Fh(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){vn(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=m0(fs.bind(null,r,kn,ka),t);break}fs(r,kn,ka);break;case 4:if(ho(r,n),(n&4194240)===n)break;for(t=r.eventTimes,i=-1;0<n;){var o=31-Ci(n);a=1<<o,o=t[o],o>i&&(i=o),n&=~a}if(n=i,n=Sr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*e6(n/1960))-n,10<n){r.timeoutHandle=m0(fs.bind(null,r,kn,ka),n);break}fs(r,kn,ka);break;case 5:fs(r,kn,ka);break;default:throw Error(Oe(329))}}}return Cn(r,Sr()),r.callbackNode===e?o4.bind(null,r):null}function M0(r,t){var e=Tu;return r.current.memoizedState.isDehydrated&&(ws(r,t).flags|=256),r=rp(r,t),r!==2&&(t=kn,kn=e,t!==null&&D0(t)),r}function D0(r){kn===null?kn=r:kn.push.apply(kn,r)}function t6(r){for(var t=r;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var i=e[n],a=i.getSnapshot;i=i.value;try{if(!Oi(a(),i))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ho(r,t){for(t&=~p1,t&=~Lp,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var e=31-Ci(t),n=1<<e;r[e]=-1,t&=~n}}function vw(r){if(Lt&6)throw Error(Oe(327));Fc();var t=Fh(r,0);if(!(t&1))return Cn(r,Sr()),null;var e=rp(r,t);if(r.tag!==0&&e===2){var n=c0(r);n!==0&&(t=n,e=M0(r,n))}if(e===1)throw e=Ku,ws(r,0),ho(r,t),Cn(r,Sr()),e;if(e===6)throw Error(Oe(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,fs(r,kn,ka),Cn(r,Sr()),null}function m1(r,t){var e=Lt;Lt|=1;try{return r(t)}finally{Lt=e,Lt===0&&(Jc=Sr()+500,Pp&&jo())}}function Ls(r){vo!==null&&vo.tag===0&&!(Lt&6)&&Fc();var t=Lt;Lt|=1;var e=ui.transition,n=$t;try{if(ui.transition=null,$t=1,r)return r()}finally{$t=n,ui.transition=e,Lt=t,!(Lt&6)&&jo()}}function g1(){Vn=Oc.current,er(Oc)}function ws(r,t){r.finishedWork=null,r.finishedLanes=0;var e=r.timeoutHandle;if(e!==-1&&(r.timeoutHandle=-1,AA(e)),Lr!==null)for(e=Lr.return;e!==null;){var n=e;switch(Jy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&zh();break;case 3:Qc(),er(Tn),er(ln),o1();break;case 5:a1(n);break;case 4:Qc();break;case 13:er(ir);break;case 19:er(ir);break;case 10:t1(n.type._context);break;case 22:case 23:g1()}e=e.return}if(Vr=r,Lr=r=To(r.current,null),Qr=Vn=t,Fr=0,Ku=null,p1=Lp=Cs=0,kn=Tu=null,gs!==null){for(t=0;t<gs.length;t++)if(e=gs[t],n=e.interleaved,n!==null){e.interleaved=null;var i=n.next,a=e.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}e.pending=n}gs=null}return r}function s4(r,t){do{var e=Lr;try{if(e1(),uh.current=Xh,Jh){for(var n=or.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Jh=!1}if(Es=0,Ur=Dr=or=null,ku=!1,qu=0,h1.current=null,e===null||e.return===null){Fr=1,Ku=t,Lr=null;break}e:{var a=r,o=e.return,s=e,l=t;if(t=Qr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var v=u.alternate;v?(u.updateQueue=v.updateQueue,u.memoizedState=v.memoizedState,u.lanes=v.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=rw(o);if(p!==null){p.flags&=-257,nw(p,o,s,a,t),p.mode&1&&tw(a,c,t),t=p,l=c;var y=t.updateQueue;if(y===null){var _=new Set;_.add(l),t.updateQueue=_}else y.add(l);break e}else{if(!(t&1)){tw(a,c,t),y1();break e}l=Error(Oe(426))}}else if(rr&&s.mode&1){var x=rw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),nw(x,o,s,a,t),Xy(Yc(l,s));break e}}a=l=Yc(l,s),Fr!==4&&(Fr=2),Tu===null?Tu=[a]:Tu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=Wk(a,l,t);Q2(a,w);break e;case 1:s=l;var S=a.type,k=a.stateNode;if(!(a.flags&128)&&(typeof S.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(ko===null||!ko.has(k)))){a.flags|=65536,t&=-t,a.lanes|=t;var T=qk(a,s,t);Q2(a,T);break e}}a=a.return}while(a!==null)}u4(e)}catch(R){t=R,Lr===e&&e!==null&&(Lr=e=e.return);continue}break}while(!0)}function c4(){var r=Zh.current;return Zh.current=Xh,r===null?Xh:r}function y1(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Vr===null||!(Cs&268435455)&&!(Lp&268435455)||ho(Vr,Qr)}function rp(r,t){var e=Lt;Lt|=2;var n=c4();(Vr!==r||Qr!==t)&&(ka=null,ws(r,t));do try{r6();break}catch(i){s4(r,i)}while(!0);if(e1(),Lt=e,Zh.current=n,Lr!==null)throw Error(Oe(261));return Vr=null,Qr=0,Fr}function r6(){for(;Lr!==null;)l4(Lr)}function n6(){for(;Lr!==null&&!CO();)l4(Lr)}function l4(r){var t=d4(r.alternate,r,Vn);r.memoizedProps=r.pendingProps,t===null?u4(r):Lr=t,h1.current=null}function u4(r){var t=r;do{var e=t.alternate;if(r=t.return,t.flags&32768){if(e=YA(e,t),e!==null){e.flags&=32767,Lr=e;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Fr=6,Lr=null;return}}else if(e=QA(e,t,Vn),e!==null){Lr=e;return}if(t=t.sibling,t!==null){Lr=t;return}Lr=t=r}while(t!==null);Fr===0&&(Fr=5)}function fs(r,t,e){var n=$t,i=ui.transition;try{ui.transition=null,$t=1,i6(r,t,e,n)}finally{ui.transition=i,$t=n}return null}function i6(r,t,e,n){do Fc();while(vo!==null);if(Lt&6)throw Error(Oe(327));e=r.finishedWork;var i=r.finishedLanes;if(e===null)return null;if(r.finishedWork=null,r.finishedLanes=0,e===r.current)throw Error(Oe(177));r.callbackNode=null,r.callbackPriority=0;var a=e.lanes|e.childLanes;if(FO(r,a),r===Vr&&(Lr=Vr=null,Qr=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||xd||(xd=!0,h4(Dh,function(){return Fc(),null})),a=(e.flags&15990)!==0,e.subtreeFlags&15990||a){a=ui.transition,ui.transition=null;var o=$t;$t=1;var s=Lt;Lt|=4,h1.current=null,XA(r,e),i4(e,r),kA(p0),Bh=!!h0,p0=h0=null,r.current=e,ZA(e),LO(),Lt=s,$t=o,ui.transition=a}else r.current=e;if(xd&&(xd=!1,vo=r,tp=i),a=r.pendingLanes,a===0&&(ko=null),NO(e.stateNode),Cn(r,Sr()),t!==null)for(n=r.onRecoverableError,e=0;e<t.length;e++)i=t[e],n(i.value,{componentStack:i.stack,digest:i.digest});if(ep)throw ep=!1,r=j0,j0=null,r;return tp&1&&r.tag!==0&&Fc(),a=r.pendingLanes,a&1?r===I0?Eu++:(Eu=0,I0=r):Eu=0,jo(),null}function Fc(){if(vo!==null){var r=Wx(tp),t=ui.transition,e=$t;try{if(ui.transition=null,$t=16>r?16:r,vo===null)var n=!1;else{if(r=vo,vo=null,tp=0,Lt&6)throw Error(Oe(331));var i=Lt;for(Lt|=4,Ie=r.current;Ie!==null;){var a=Ie,o=a.child;if(Ie.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Ie=c;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:Pu(8,u,a)}var d=u.child;if(d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;var v=u.sibling,p=u.return;if(t4(u),u===c){Ie=null;break}if(v!==null){v.return=p,Ie=v;break}Ie=p}}}var y=a.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}Ie=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ie=o;else e:for(;Ie!==null;){if(a=Ie,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Pu(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Ie=w;break e}Ie=a.return}}var S=r.current;for(Ie=S;Ie!==null;){o=Ie;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,Ie=k;else e:for(o=S;Ie!==null;){if(s=Ie,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Cp(9,s)}}catch(R){hr(s,s.return,R)}if(s===o){Ie=null;break e}var T=s.sibling;if(T!==null){T.return=s.return,Ie=T;break e}Ie=s.return}}if(Lt=i,jo(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(wp,r)}catch{}n=!0}return n}finally{$t=e,ui.transition=t}}return!1}function mw(r,t,e){t=Yc(e,t),t=Wk(r,t,1),r=xo(r,t,1),t=vn(),r!==null&&(of(r,1,t),Cn(r,t))}function hr(r,t,e){if(r.tag===3)mw(r,r,e);else for(;t!==null;){if(t.tag===3){mw(t,r,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ko===null||!ko.has(n))){r=Yc(e,r),r=qk(t,r,1),t=xo(t,r,1),r=vn(),t!==null&&(of(t,1,r),Cn(t,r));break}}t=t.return}}function a6(r,t,e){var n=r.pingCache;n!==null&&n.delete(t),t=vn(),r.pingedLanes|=r.suspendedLanes&e,Vr===r&&(Qr&e)===e&&(Fr===4||Fr===3&&(Qr&130023424)===Qr&&500>Sr()-v1?ws(r,0):p1|=e),Cn(r,t)}function f4(r,t){t===0&&(r.mode&1?(t=hd,hd<<=1,!(hd&130023424)&&(hd=4194304)):t=1);var e=vn();r=ja(r,t),r!==null&&(of(r,t,e),Cn(r,e))}function o6(r){var t=r.memoizedState,e=0;t!==null&&(e=t.retryLane),f4(r,e)}function s6(r,t){var e=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(e=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Oe(314))}n!==null&&n.delete(t),f4(r,e)}var d4;d4=function(r,t,e){if(r!==null)if(r.memoizedProps!==t.pendingProps||Tn.current)Pn=!0;else{if(!(r.lanes&e)&&!(t.flags&128))return Pn=!1,KA(r,t,e);Pn=!!(r.flags&131072)}else Pn=!1,rr&&t.flags&1048576&&mk(t,Hh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;dh(r,t),r=t.pendingProps;var i=Hc(t,ln.current);Dc(t,e),i=c1(null,t,n,r,i,e);var a=l1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,En(n)?(a=!0,Wh(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,n1(t),i.updater=Ep,t.stateNode=i,i._reactInternals=t,x0(t,n,r,e),t=T0(null,t,n,!0,a,e)):(t.tag=0,rr&&a&&Yy(t),hn(null,t,i,e),t=t.child),t;case 16:n=t.elementType;e:{switch(dh(r,t),r=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=l6(n),r=xi(n,r),i){case 0:t=P0(null,t,n,r,e);break e;case 1:t=ow(null,t,n,r,e);break e;case 11:t=iw(null,t,n,r,e);break e;case 14:t=aw(null,t,n,xi(n.type,r),e);break e}throw Error(Oe(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:xi(n,i),P0(r,t,n,i,e);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:xi(n,i),ow(r,t,n,i,e);case 3:e:{if(Qk(t),r===null)throw Error(Oe(387));n=t.pendingProps,a=t.memoizedState,i=a.element,Sk(r,t),Qh(t,n,null,e);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Yc(Error(Oe(423)),t),t=sw(r,t,n,e,i);break e}else if(n!==i){i=Yc(Error(Oe(424)),t),t=sw(r,t,n,e,i);break e}else for(Wn=So(t.stateNode.containerInfo.firstChild),Hn=t,rr=!0,Ei=null,e=wk(t,null,n,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Gc(),n===i){t=Ia(r,t,e);break e}hn(r,t,n,e)}t=t.child}return t;case 5:return xk(t),r===null&&w0(t),n=t.type,i=t.pendingProps,a=r!==null?r.memoizedProps:null,o=i.children,v0(n,i)?o=null:a!==null&&v0(n,a)&&(t.flags|=32),Kk(r,t),hn(r,t,o,e),t.child;case 6:return r===null&&w0(t),null;case 13:return Yk(r,t,e);case 4:return i1(t,t.stateNode.containerInfo),n=t.pendingProps,r===null?t.child=Kc(t,null,n,e):hn(r,t,n,e),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:xi(n,i),iw(r,t,n,i,e);case 7:return hn(r,t,t.pendingProps,e),t.child;case 8:return hn(r,t,t.pendingProps.children,e),t.child;case 12:return hn(r,t,t.pendingProps.children,e),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Yt(Gh,n._currentValue),n._currentValue=o,a!==null)if(Oi(a.value,o)){if(a.children===i.children&&!Tn.current){t=Ia(r,t,e);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Aa(-1,e&-e),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=e,l=a.alternate,l!==null&&(l.lanes|=e),b0(a.return,e,t),s.lanes|=e;break}l=l.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Oe(341));o.lanes|=e,s=o.alternate,s!==null&&(s.lanes|=e),b0(o,e,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}hn(r,t,i.children,e),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Dc(t,e),i=fi(i),n=n(i),t.flags|=1,hn(r,t,n,e),t.child;case 14:return n=t.type,i=xi(n,t.pendingProps),i=xi(n.type,i),aw(r,t,n,i,e);case 15:return Hk(r,t,t.type,t.pendingProps,e);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:xi(n,i),dh(r,t),t.tag=1,En(n)?(r=!0,Wh(t)):r=!1,Dc(t,e),zk(t,n,i),x0(t,n,i,e),T0(null,t,n,!0,r,e);case 19:return Jk(r,t,e);case 22:return Gk(r,t,e)}throw Error(Oe(156,t.tag))};function h4(r,t){return Ux(r,t)}function c6(r,t,e,n){this.tag=r,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(r,t,e,n){return new c6(r,t,e,n)}function _1(r){return r=r.prototype,!(!r||!r.isReactComponent)}function l6(r){if(typeof r=="function")return _1(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Fy)return 11;if(r===By)return 14}return 2}function To(r,t){var e=r.alternate;return e===null?(e=ci(r.tag,t,r.key,r.mode),e.elementType=r.elementType,e.type=r.type,e.stateNode=r.stateNode,e.alternate=r,r.alternate=e):(e.pendingProps=t,e.type=r.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=r.flags&14680064,e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=r.sibling,e.index=r.index,e.ref=r.ref,e}function vh(r,t,e,n,i,a){var o=2;if(n=r,typeof r=="function")_1(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case wc:return bs(e.children,i,a,t);case Dy:o=8,i|=8;break;case Gg:return r=ci(12,e,t,i|2),r.elementType=Gg,r.lanes=a,r;case Kg:return r=ci(13,e,t,i),r.elementType=Kg,r.lanes=a,r;case Qg:return r=ci(19,e,t,i),r.elementType=Qg,r.lanes=a,r;case xx:return Op(e,i,a,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case bx:o=10;break e;case Sx:o=9;break e;case Fy:o=11;break e;case By:o=14;break e;case lo:o=16,n=null;break e}throw Error(Oe(130,r==null?r:typeof r,""))}return t=ci(o,e,t,i),t.elementType=r,t.type=n,t.lanes=a,t}function bs(r,t,e,n){return r=ci(7,r,n,t),r.lanes=e,r}function Op(r,t,e,n){return r=ci(22,r,n,t),r.elementType=xx,r.lanes=e,r.stateNode={isHidden:!1},r}function Am(r,t,e){return r=ci(6,r,null,t),r.lanes=e,r}function Nm(r,t,e){return t=ci(4,r.children!==null?r.children:[],r.key,t),t.lanes=e,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function u6(r,t,e,n,i){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dm(0),this.expirationTimes=dm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dm(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function w1(r,t,e,n,i,a,o,s,l){return r=new u6(r,t,e,s,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ci(3,null,null,t),r.current=a,a.stateNode=r,a.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},n1(a),r}function f6(r,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_c,key:n==null?null:""+n,children:r,containerInfo:t,implementation:e}}function p4(r){if(!r)return Oo;r=r._reactInternals;e:{if(Is(r)!==r||r.tag!==1)throw Error(Oe(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(En(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Oe(171))}if(r.tag===1){var e=r.type;if(En(e))return pk(r,e,t)}return t}function v4(r,t,e,n,i,a,o,s,l){return r=w1(e,n,!0,r,i,a,o,s,l),r.context=p4(null),e=r.current,n=vn(),i=Po(e),a=Aa(n,i),a.callback=t??null,xo(e,a,i),r.current.lanes=i,of(r,i,n),Cn(r,n),r}function Ap(r,t,e,n){var i=t.current,a=vn(),o=Po(i);return e=p4(e),t.context===null?t.context=e:t.pendingContext=e,t=Aa(a,o),t.payload={element:r},n=n===void 0?null:n,n!==null&&(t.callback=n),r=xo(i,t,o),r!==null&&(Li(r,i,o,a),lh(r,i,o)),o}function np(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function gw(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var e=r.retryLane;r.retryLane=e!==0&&e<t?e:t}}function b1(r,t){gw(r,t),(r=r.alternate)&&gw(r,t)}function d6(){return null}var m4=typeof reportError=="function"?reportError:function(r){console.error(r)};function S1(r){this._internalRoot=r}Np.prototype.render=S1.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(Oe(409));Ap(r,t,null,null)};Np.prototype.unmount=S1.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;Ls(function(){Ap(null,r,null,null)}),t[Ra]=null}};function Np(r){this._internalRoot=r}Np.prototype.unstable_scheduleHydration=function(r){if(r){var t=Gx();r={blockedOn:null,target:r,priority:t};for(var e=0;e<fo.length&&t!==0&&t<fo[e].priority;e++);fo.splice(e,0,r),e===0&&Qx(r)}};function x1(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Rp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function yw(){}function h6(r,t,e,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var c=np(o);a.call(c)}}var o=v4(t,n,r,0,null,!1,!1,"",yw);return r._reactRootContainer=o,r[Ra]=o.current,Uu(r.nodeType===8?r.parentNode:r),Ls(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var c=np(l);s.call(c)}}var l=w1(r,0,!1,null,null,!1,!1,"",yw);return r._reactRootContainer=l,r[Ra]=l.current,Uu(r.nodeType===8?r.parentNode:r),Ls(function(){Ap(t,l,e,n)}),l}function jp(r,t,e,n,i){var a=e._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=np(o);s.call(l)}}Ap(t,o,r,i)}else o=h6(e,t,r,i,n);return np(o)}qx=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var e=hu(t.pendingLanes);e!==0&&(Vy(t,e|1),Cn(t,Sr()),!(Lt&6)&&(Jc=Sr()+500,jo()))}break;case 13:Ls(function(){var n=ja(r,1);if(n!==null){var i=vn();Li(n,r,1,i)}}),b1(r,1)}};zy=function(r){if(r.tag===13){var t=ja(r,134217728);if(t!==null){var e=vn();Li(t,r,134217728,e)}b1(r,134217728)}};Hx=function(r){if(r.tag===13){var t=Po(r),e=ja(r,t);if(e!==null){var n=vn();Li(e,r,t,n)}b1(r,t)}};Gx=function(){return $t};Kx=function(r,t){var e=$t;try{return $t=r,t()}finally{$t=e}};a0=function(r,t,e){switch(t){case"input":if(Xg(r,e),t=e.name,e.type==="radio"&&t!=null){for(e=r;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==r&&n.form===r.form){var i=kp(n);if(!i)throw Error(Oe(90));Px(n),Xg(n,i)}}}break;case"textarea":Ex(r,e);break;case"select":t=e.value,t!=null&&Rc(r,!!e.multiple,t,!1)}};jx=m1;Ix=Ls;var p6={usingClientEntryPoint:!1,Events:[cf,kc,kp,Nx,Rx,m1]},tu={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v6={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ma.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Fx(r),r===null?null:r.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||d6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{wp=kd.inject(v6),Xi=kd}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p6;Kn.createPortal=function(r,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x1(t))throw Error(Oe(200));return f6(r,t,null,e)};Kn.createRoot=function(r,t){if(!x1(r))throw Error(Oe(299));var e=!1,n="",i=m4;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=w1(r,1,!1,null,null,e,!1,n,i),r[Ra]=t.current,Uu(r.nodeType===8?r.parentNode:r),new S1(t)};Kn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(Oe(188)):(r=Object.keys(r).join(","),Error(Oe(268,r)));return r=Fx(t),r=r===null?null:r.stateNode,r};Kn.flushSync=function(r){return Ls(r)};Kn.hydrate=function(r,t,e){if(!Rp(t))throw Error(Oe(200));return jp(null,r,t,!0,e)};Kn.hydrateRoot=function(r,t,e){if(!x1(r))throw Error(Oe(405));var n=e!=null&&e.hydratedSources||null,i=!1,a="",o=m4;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=v4(t,null,r,1,e??null,i,!1,a,o),r[Ra]=t.current,Uu(r),n)for(r=0;r<n.length;r++)e=n[r],i=e._getVersion,i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i);return new Np(t)};Kn.render=function(r,t,e){if(!Rp(t))throw Error(Oe(200));return jp(null,r,t,!1,e)};Kn.unmountComponentAtNode=function(r){if(!Rp(r))throw Error(Oe(40));return r._reactRootContainer?(Ls(function(){jp(null,null,r,!1,function(){r._reactRootContainer=null,r[Ra]=null})}),!0):!1};Kn.unstable_batchedUpdates=m1;Kn.unstable_renderSubtreeIntoContainer=function(r,t,e,n){if(!Rp(e))throw Error(Oe(200));if(r==null||r._reactInternals===void 0)throw Error(Oe(38));return jp(r,t,e,!1,n)};Kn.version="18.3.1-next-f1338f8080-20240426";function g4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g4)}catch(r){console.error(r)}}g4(),gx.exports=Kn;var m6=gx.exports,_w=m6;qg.createRoot=_w.createRoot,qg.hydrateRoot=_w.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qu(){return Qu=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Qu.apply(this,arguments)}var mo;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(mo||(mo={}));const ww="popstate";function g6(r){r===void 0&&(r={});function t(n,i){let{pathname:a,search:o,hash:s}=n.location;return F0("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(n,i){return typeof i=="string"?i:ip(i)}return _6(t,e,null,r)}function Ar(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function y4(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function y6(){return Math.random().toString(36).substr(2,8)}function bw(r,t){return{usr:r.state,key:r.key,idx:t}}function F0(r,t,e,n){return e===void 0&&(e=null),Qu({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?sl(t):t,{state:e,key:t&&t.key||n||y6()})}function ip(r){let{pathname:t="/",search:e="",hash:n=""}=r;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sl(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substr(e),r=r.substr(0,e));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function _6(r,t,e,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s=mo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Qu({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){s=mo.Pop;let x=u(),w=x==null?null:x-c;c=x,l&&l({action:s,location:_.location,delta:w})}function v(x,w){s=mo.Push;let S=F0(_.location,x,w);c=u()+1;let k=bw(S,c),T=_.createHref(S);try{o.pushState(k,"",T)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(T)}a&&l&&l({action:s,location:_.location,delta:1})}function p(x,w){s=mo.Replace;let S=F0(_.location,x,w);c=u();let k=bw(S,c),T=_.createHref(S);o.replaceState(k,"",T),a&&l&&l({action:s,location:_.location,delta:0})}function y(x){let w=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof x=="string"?x:ip(x);return S=S.replace(/ $/,"%20"),Ar(w,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,w)}let _={get action(){return s},get location(){return r(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ww,d),l=x,()=>{i.removeEventListener(ww,d),l=null}},createHref(x){return t(i,x)},createURL:y,encodeLocation(x){let w=y(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:p,go(x){return o.go(x)}};return _}var Sw;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Sw||(Sw={}));function w6(r,t,e){return e===void 0&&(e="/"),b6(r,t,e)}function b6(r,t,e,n){let i=typeof t=="string"?sl(t):t,a=k1(i.pathname||"/",e);if(a==null)return null;let o=_4(r);S6(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=j6(a);s=A6(o[l],c)}return s}function _4(r,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(Ar(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Eo([n,l.relativePath]),u=e.concat(l);a.children&&a.children.length>0&&(Ar(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_4(a.children,t,u,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:L6(c,a.index),routesMeta:u})};return r.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of w4(a.path))i(a,o,l)}),t}function w4(r){let t=r.split("/");if(t.length===0)return[];let[e,...n]=t,i=e.endsWith("?"),a=e.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=w4(n.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>r.startsWith("/")&&l===""?"/":l)}function S6(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:O6(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const x6=/^:[\w-]+$/,k6=3,P6=2,T6=1,E6=10,C6=-2,xw=r=>r==="*";function L6(r,t){let e=r.split("/"),n=e.length;return e.some(xw)&&(n+=C6),t&&(n+=P6),e.filter(i=>!xw(i)).reduce((i,a)=>i+(x6.test(a)?k6:a===""?T6:E6),n)}function O6(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function A6(r,t,e){let{routesMeta:n}=r,i={},a="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],c=s===n.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=N6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),v=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Eo([a,d.pathname]),pathnameBase:F6(Eo([a,d.pathnameBase])),route:v}),d.pathnameBase!=="/"&&(a=Eo([a,d.pathnameBase]))}return o}function N6(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,n]=R6(r.path,r.caseSensitive,r.end),i=t.match(e);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((c,u,d)=>{let{paramName:v,isOptional:p}=u;if(v==="*"){let _=s[d]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const y=s[d];return p&&!y?c[v]=void 0:c[v]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:r}}function R6(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),y4(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function j6(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return y4(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function k1(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=r.charAt(e);return n&&n!=="/"?null:r.slice(e)||"/"}function I6(r,t){t===void 0&&(t="/");let{pathname:e,search:n="",hash:i=""}=typeof r=="string"?sl(r):r;return{pathname:e?e.startsWith("/")?e:M6(e,t):t,search:B6(n),hash:U6(i)}}function M6(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function Rm(r,t,e,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function D6(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function b4(r,t){let e=D6(r);return t?e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):e.map(n=>n.pathnameBase)}function S4(r,t,e,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=sl(r):(i=Qu({},r),Ar(!i.pathname||!i.pathname.includes("?"),Rm("?","pathname","search",i)),Ar(!i.pathname||!i.pathname.includes("#"),Rm("#","pathname","hash",i)),Ar(!i.search||!i.search.includes("#"),Rm("#","search","hash",i)));let a=r===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=e;else{let d=t.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),d-=1;i.pathname=v.join("/")}s=d>=0?t[d]:"/"}let l=I6(i,s),c=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Eo=r=>r.join("/").replace(/\/\/+/g,"/"),F6=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),B6=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,U6=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function $6(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const x4=["post","put","patch","delete"];new Set(x4);const V6=["get",...x4];new Set(V6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yu(){return Yu=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Yu.apply(this,arguments)}const P1=he.createContext(null),z6=he.createContext(null),Ms=he.createContext(null),Ip=he.createContext(null),Io=he.createContext({outlet:null,matches:[],isDataRoute:!1}),k4=he.createContext(null);function W6(r,t){let{relative:e}=t===void 0?{}:t;uf()||Ar(!1);let{basename:n,navigator:i}=he.useContext(Ms),{hash:a,pathname:o,search:s}=C4(r,{relative:e}),l=o;return n!=="/"&&(l=o==="/"?n:Eo([n,o])),i.createHref({pathname:l,search:s,hash:a})}function uf(){return he.useContext(Ip)!=null}function ff(){return uf()||Ar(!1),he.useContext(Ip).location}function P4(r){he.useContext(Ms).static||he.useLayoutEffect(r)}function T4(){let{isDataRoute:r}=he.useContext(Io);return r?nN():q6()}function q6(){uf()||Ar(!1);let r=he.useContext(P1),{basename:t,future:e,navigator:n}=he.useContext(Ms),{matches:i}=he.useContext(Io),{pathname:a}=ff(),o=JSON.stringify(b4(i,e.v7_relativeSplatPath)),s=he.useRef(!1);return P4(()=>{s.current=!0}),he.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){n.go(c);return}let d=S4(c,JSON.parse(o),a,u.relative==="path");r==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Eo([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,o,a,r])}function E4(){let{matches:r}=he.useContext(Io),t=r[r.length-1];return t?t.params:{}}function C4(r,t){let{relative:e}=t===void 0?{}:t,{future:n}=he.useContext(Ms),{matches:i}=he.useContext(Io),{pathname:a}=ff(),o=JSON.stringify(b4(i,n.v7_relativeSplatPath));return he.useMemo(()=>S4(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function H6(r,t){return G6(r,t)}function G6(r,t,e,n){uf()||Ar(!1);let{navigator:i}=he.useContext(Ms),{matches:a}=he.useContext(Io),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ff(),u;if(t){var d;let x=typeof t=="string"?sl(t):t;l==="/"||(d=x.pathname)!=null&&d.startsWith(l)||Ar(!1),u=x}else u=c;let v=u.pathname||"/",p=v;if(l!=="/"){let x=l.replace(/^\//,"").split("/");p="/"+v.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=w6(r,{pathname:p}),_=X6(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},s,x.params),pathname:Eo([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Eo([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,e,n);return t&&_?he.createElement(Ip.Provider,{value:{location:Yu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:mo.Pop}},_):_}function K6(){let r=rN(),t=$6(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},t),e?he.createElement("pre",{style:i},e):null,null)}const Q6=he.createElement(K6,null);class Y6 extends he.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?he.createElement(Io.Provider,{value:this.props.routeContext},he.createElement(k4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J6(r){let{routeContext:t,match:e,children:n}=r,i=he.useContext(P1);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),he.createElement(Io.Provider,{value:t},n)}function X6(r,t,e,n){var i;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),r==null){var a;if(!e)return null;if(e.errors)r=e.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let o=r,s=(i=e)==null?void 0:i.errors;if(s!=null){let u=o.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||Ar(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(e&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:v,errors:p}=e,y=d.route.loader&&v[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,v)=>{let p,y=!1,_=null,x=null;e&&(p=s&&d.route.id?s[d.route.id]:void 0,_=d.route.errorElement||Q6,l&&(c<0&&v===0?(iN("route-fallback"),y=!0,x=null):c===v&&(y=!0,x=d.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,v+1)),S=()=>{let k;return p?k=_:y?k=x:d.route.Component?k=he.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=u,he.createElement(J6,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:e!=null},children:k})};return e&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?he.createElement(Y6,{location:e.location,revalidation:e.revalidation,component:_,error:p,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}var L4=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(L4||{}),O4=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(O4||{});function Z6(r){let t=he.useContext(P1);return t||Ar(!1),t}function eN(r){let t=he.useContext(z6);return t||Ar(!1),t}function tN(r){let t=he.useContext(Io);return t||Ar(!1),t}function A4(r){let t=tN(),e=t.matches[t.matches.length-1];return e.route.id||Ar(!1),e.route.id}function rN(){var r;let t=he.useContext(k4),e=eN(),n=A4();return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function nN(){let{router:r}=Z6(L4.UseNavigateStable),t=A4(O4.UseNavigateStable),e=he.useRef(!1);return P4(()=>{e.current=!0}),he.useCallback(function(i,a){a===void 0&&(a={}),e.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,Yu({fromRouteId:t},a)))},[r,t])}const kw={};function iN(r,t,e){kw[r]||(kw[r]=!0)}function aN(r,t){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function dc(r){Ar(!1)}function oN(r){let{basename:t="/",children:e=null,location:n,navigationType:i=mo.Pop,navigator:a,static:o=!1,future:s}=r;uf()&&Ar(!1);let l=t.replace(/^\/*/,"/"),c=he.useMemo(()=>({basename:l,navigator:a,static:o,future:Yu({v7_relativeSplatPath:!1},s)}),[l,s,a,o]);typeof n=="string"&&(n=sl(n));let{pathname:u="/",search:d="",hash:v="",state:p=null,key:y="default"}=n,_=he.useMemo(()=>{let x=k1(u,l);return x==null?null:{location:{pathname:x,search:d,hash:v,state:p,key:y},navigationType:i}},[l,u,d,v,p,y,i]);return _==null?null:he.createElement(Ms.Provider,{value:c},he.createElement(Ip.Provider,{children:e,value:_}))}function sN(r){let{children:t,location:e}=r;return H6(B0(t),e)}new Promise(()=>{});function B0(r,t){t===void 0&&(t=[]);let e=[];return he.Children.forEach(r,(n,i)=>{if(!he.isValidElement(n))return;let a=[...t,i];if(n.type===he.Fragment){e.push.apply(e,B0(n.props.children,a));return}n.type!==dc&&Ar(!1),!n.props.index||!n.props.children||Ar(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=B0(n.props.children,a)),e.push(o)}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function U0(){return U0=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},U0.apply(this,arguments)}function cN(r,t){if(r==null)return{};var e={},n=Object.keys(r),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}function lN(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function uN(r,t){return r.button===0&&(!t||t==="_self")&&!lN(r)}function $0(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,e)=>{let n=r[e];return t.concat(Array.isArray(n)?n.map(i=>[e,i]):[[e,n]])},[]))}function fN(r,t){let e=$0(r);return t&&t.forEach((n,i)=>{e.has(i)||t.getAll(i).forEach(a=>{e.append(i,a)})}),e}const dN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hN="6";try{window.__reactRouterVersion=hN}catch{}const pN="startTransition",Pw=aO[pN];function vN(r){let{basename:t,children:e,future:n,window:i}=r,a=he.useRef();a.current==null&&(a.current=g6({window:i,v5Compat:!0}));let o=a.current,[s,l]=he.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},u=he.useCallback(d=>{c&&Pw?Pw(()=>l(d)):l(d)},[l,c]);return he.useLayoutEffect(()=>o.listen(u),[o,u]),he.useEffect(()=>aN(n),[n]),he.createElement(oN,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o,future:n})}const mN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yN=he.forwardRef(function(t,e){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d}=t,v=cN(t,dN),{basename:p}=he.useContext(Ms),y,_=!1;if(typeof c=="string"&&gN.test(c)&&(y=c,mN))try{let k=new URL(window.location.href),T=c.startsWith("//")?new URL(k.protocol+c):new URL(c),R=k1(T.pathname,p);T.origin===k.origin&&R!=null?c=R+T.search+T.hash:_=!0}catch{}let x=W6(c,{relative:i}),w=_N(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:i,viewTransition:d});function S(k){n&&n(k),k.defaultPrevented||w(k)}return he.createElement("a",U0({},v,{href:y||x,onClick:_||a?n:S,ref:e,target:l}))});var Tw;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Tw||(Tw={}));var Ew;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Ew||(Ew={}));function _N(r,t){let{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:s}=t===void 0?{}:t,l=T4(),c=ff(),u=C4(r,{relative:o});return he.useCallback(d=>{if(uN(d,e)){d.preventDefault();let v=n!==void 0?n:ip(c)===ip(u);l(r,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:s})}},[c,l,u,n,i,e,r,a,o,s])}function N4(r){let t=he.useRef($0(r)),e=he.useRef(!1),n=ff(),i=he.useMemo(()=>fN(n.search,e.current?null:t.current),[n.search]),a=T4(),o=he.useCallback((s,l)=>{const c=$0(typeof s=="function"?s(i):s);e.current=!0,a("?"+c,l)},[a,i]);return[i,o]}var T1={exports:{}},Mp={},Xc={},Dp={},wN=function(r){var t=r.location,e=r.URL;return[t,e].some(function(n){return!n})?function(i){return Promise.reject(new Error("Failed to import: "+i+": dynamicImport is not supported"))}:(r.__twilioVideoImportedModules={},function(i){return i in r.__twilioVideoImportedModules?Promise.resolve(r.__twilioVideoImportedModules[i]):new Function("scope","return import('"+new e(i,t)+"').then(m => scope.__twilioVideoImportedModules['"+i+"'] = m);")(r)})}(globalThis),R4=function(){},Yi="undefined",bN=typeof window!==Yi&&typeof window.navigator!==Yi&&/Trident\/|MSIE /.test(window.navigator.userAgent),V0=["trace","debug","info","warn","error"];function Cw(r,t){var e=r[t];if(typeof e.bind=="function")return e.bind(r);try{return Function.prototype.bind.call(e,r)}catch{return function(){return Function.prototype.apply.apply(e,[r,arguments])}}}function SN(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function xN(r){return r==="debug"&&(r="log"),typeof console===Yi?!1:r==="trace"&&bN?SN:console[r]!==void 0?Cw(console,r):console.log!==void 0?Cw(console,"log"):R4}function j4(r,t){for(var e=0;e<V0.length;e++){var n=V0[e];this[n]=e<r?R4:this.methodFactory(n,r,t)}this.log=this.debug}function kN(r,t,e){return function(){typeof console!==Yi&&(j4.call(this,t,e),this[r].apply(this,arguments))}}function PN(r,t,e){return xN(r)||kN.apply(this,arguments)}function I4(r,t,e){var n=this,i,a="loglevel";typeof r=="string"?a+=":"+r:typeof r=="symbol"&&(a=void 0);function o(c){var u=(V0[c]||"silent").toUpperCase();if(!(typeof window===Yi||!a)){try{window.localStorage[a]=u;return}catch{}try{window.document.cookie=encodeURIComponent(a)+"="+u+";"}catch{}}}function s(){var c;if(!(typeof window===Yi||!a)){try{c=window.localStorage[a]}catch{}if(typeof c===Yi)try{var u=window.document.cookie,d=u.indexOf(encodeURIComponent(a)+"=");d!==-1&&(c=/^([^;]+)/.exec(u.slice(d))[1])}catch{}return n.levels[c]===void 0&&(c=void 0),c}}n.name=r,n.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},n.methodFactory=e||PN,n.getLevel=function(){return i},n.setLevel=function(c,u){if(typeof c=="string"&&n.levels[c.toUpperCase()]!==void 0&&(c=n.levels[c.toUpperCase()]),typeof c=="number"&&c>=0&&c<=n.levels.SILENT){if(i=c,u!==!1&&o(c),j4.call(n,c,r),typeof console===Yi&&c<n.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+c},n.setDefaultLevel=function(c){s()||n.setLevel(c,!1)},n.enableAll=function(c){n.setLevel(n.levels.TRACE,c)},n.disableAll=function(c){n.setLevel(n.levels.SILENT,c)};var l=s();l==null&&(l=t??"WARN"),n.setLevel(l,!1)}var ea=new I4,z0={};ea.getLogger=function(t){if(typeof t!="symbol"&&typeof t!="string"||t==="")throw new TypeError("You must supply a name when creating a logger.");var e=z0[t];return e||(e=z0[t]=new I4(t,ea.getLevel(),ea.methodFactory)),e};var TN=typeof window!==Yi?window.log:void 0;ea.noConflict=function(){return typeof window!==Yi&&window.log===ea&&(window.log=TN),ea};ea.getLoggers=function(){return z0};ea.default=ea;var M4=ea,E1={exports:{}};const EN="twilio-video",CN="2.32.1",D4={name:EN,version:CN};E1.exports;(function(r){var t=D4;r.exports.SDK_NAME=t.name+".js",r.exports.SDK_VERSION=t.version,r.exports.SDP_FORMAT="unified",r.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},r.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},r.exports.DEFAULT_ENVIRONMENT="prod",r.exports.DEFAULT_REALM="us1",r.exports.DEFAULT_REGION="gll",r.exports.DEFAULT_LOG_LEVEL="warn",r.exports.DEFAULT_LOGGER_NAME="twilio-video",r.exports.WS_SERVER=function(n,i){return i=i==="gll"?"global":encodeURIComponent(i),n==="prod"?"wss://"+i+".vss.twilio.com/signaling":"wss://"+i+".vss."+n+".twilio.com/signaling"},r.exports.PUBLISH_MAX_ATTEMPTS=5,r.exports.PUBLISH_BACKOFF_JITTER=10,r.exports.PUBLISH_BACKOFF_MS=20;function e(n){return["a","e","i","o","u"].includes(n.toLowerCase()[0])?"an":"a"}r.exports.typeErrors={ILLEGAL_INVOKE:function(n,i){return new TypeError("Illegal call to "+n+": "+i)},INVALID_TYPE:function(n,i){return new TypeError(n+" must be "+e(i)+" "+i)},INVALID_VALUE:function(n,i){return new RangeError(n+" must be one of "+i.join(", "))},REQUIRED_ARGUMENT:function(n){return new TypeError(n+" must be specified")}},r.exports.DEFAULT_FRAME_RATE=24,r.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,r.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,r.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,r.exports.DEFAULT_NQ_LEVEL_LOCAL=1,r.exports.DEFAULT_NQ_LEVEL_REMOTE=0,r.exports.MAX_NQ_LEVEL=3,r.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,r.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,r.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:r.exports.DEFAULT_SESSION_TIMEOUT_SEC*1e3,jitter:1},r.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},r.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},r.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},r.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},r.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},r.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}})(E1);var zt=E1.exports,LN=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},ON=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},AN=M4.getLogger,F4=zt,Lw=F4.DEFAULT_LOG_LEVEL,NN=F4.DEFAULT_LOGGER_NAME,mh=zt.typeErrors,ru;function RN(r){if(ru=ru||new Map,ru.has(r))return ru.get(r);var t=new Set;return ru.set(r,t),t}var C1=function(){function r(t,e,n,i,a){if(typeof t!="string")throw mh.INVALID_TYPE("moduleName","string");if(!e)throw mh.REQUIRED_ARGUMENT("component");typeof n!="object"&&(n={}),a=a||AN,Ow(n),Object.defineProperties(this,{_component:{value:e},_logLevels:{value:n},_warnings:{value:new Set},_loggerName:{get:function(){var s=i&&typeof i=="string"?i:NN;return this._logLevelsEqual||(s=s+"-"+t),s}},_logger:{get:function(){var s=a(this._loggerName),l=this._logLevels[t]||Lw;return l=l==="off"?"silent":l,s.setDefaultLevel(l),s}},_logLevelsEqual:{get:function(){return new Set(Object.values(this._logLevels)).size===1}},logLevel:{get:function(){return r.getLevelByName(n[t]||Lw)}},name:{get:e.toString.bind(e)}})}return r.getLevelByName=function(t){return isNaN(t)?(t=t.toUpperCase(),$4(t),r[t]):parseInt(t,10)},r.prototype.createLog=function(t,e){var n=this._loggerName;return this._logLevelsEqual||(n=n.substring(0,n.lastIndexOf("-"))),new r(t,e,this._logLevels,n)},r.prototype.setLevels=function(t){return Ow(t),Object.assign(this._logLevels,t),this},r.prototype.log=function(t,e){var n=r._levels[t];if(!n)throw mh.INVALID_VALUE("logLevel",U4);n=n.toLowerCase();var i=[new Date().toISOString(),n,this.name];return(this._logger[n]||function(){}).apply(void 0,ON([],LN(i.concat(e)))),this},r.prototype.debug=function(){return this.log(r.DEBUG,[].slice.call(arguments))},r.prototype.deprecated=function(t){var e=RN(this._component.constructor);return e.has(t)?this:(e.add(t),this.warn(t))},r.prototype.info=function(){return this.log(r.INFO,[].slice.call(arguments))},r.prototype.warn=function(){return this.log(r.WARN,[].slice.call(arguments))},r.prototype.warnOnce=function(t){return this._warnings.has(t)?this:(this._warnings.add(t),this.warn(t))},r.prototype.error=function(){return this.log(r.ERROR,[].slice.call(arguments))},r.prototype.throw=function(t,e){throw t.clone&&(t=t.clone(e)),this.log(r.ERROR,t),t},r}();Object.defineProperties(C1,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var B4={},U4=[],jN=C1._levels.map(function(r,t){return B4[r]=!0,U4.push(t),r});function $4(r){if(!(r in B4))throw mh.INVALID_VALUE("level",jN)}function Ow(r){Object.keys(r).forEach(function(t){$4(r[t].toUpperCase())})}var Da=C1,IN=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},MN=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Dp,"__esModule",{value:!0});Dp.createNoiseCancellationAudioProcessor=void 0;var DN=wN,FN={krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}},BN=function(r){var t=r.supportedVersion,e=r.plugin,n=r.log;if(!e.getVersion||!e.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var i=e.getVersion();n.debug("Plugin Version = "+i);var a=t.split(".").map(function(c){return Number(c)}),o=i.split(".").map(function(c){return Number(c)});if(a.length!==3||o.length!==3)throw new Error("Unsupported Plugin version format: "+t+", "+i);if(a[0]!==o[0])throw new Error("Major version mismatch: [Plugin version "+i+"],  [Supported Version "+t+"]");if(o[1]<a[1])throw new Error("Minor version mismatch: [Plugin version "+i+"] < [Supported Version "+t+"]");var s=new AudioContext,l=e.isSupported(s);if(s.close(),!l)throw new Error("Noise Cancellation plugin is not supported on your browser")},Aw=new Map;function UN(r,t){return IN(this,void 0,void 0,function(){var e,n,i,a,o,s,l,c,u;return MN(this,function(d){switch(d.label){case 0:if(e=Aw.get(r.vendor),e)return[3,6];if(n=FN[r.vendor],!n)throw new Error("Unsupported NoiseCancellationOptions.vendor: "+r.vendor);i=n.supportedVersion,a=n.pluginFile,o=r.sdkAssetsPath,s=o+"/"+a,d.label=1;case 1:return d.trys.push([1,5,,6]),t.debug("loading noise cancellation sdk: ",s),[4,DN(s)];case 2:return l=d.sent(),t.debug("Loaded noise cancellation sdk:",l),c=l.default,BN({supportedVersion:i,plugin:c,log:t}),c.isInitialized()?[3,4]:(t.debug("initializing noise cancellation sdk: ",o),[4,c.init({rootDir:o})]);case 3:d.sent(),t.debug("noise cancellation sdk initialized!"),d.label=4;case 4:return e={vendor:r.vendor,isInitialized:function(){return c.isInitialized()},isConnected:function(){return c.isConnected()},isEnabled:function(){return c.isEnabled()},disconnect:function(){return c.disconnect()},enable:function(){return c.enable()},disable:function(){return c.disable()},destroy:function(){return c.destroy()},setLogging:function(v){return c.setLogging(v)},connect:function(v){t.debug("connect: ",v.id),c.isConnected()&&c.disconnect();var p=c.connect(new MediaStream([v]));if(!p)throw new Error("Error connecting with noise cancellation sdk");var y=p.getAudioTracks()[0];if(!y)throw new Error("Error getting clean track from noise cancellation sdk");return c.enable(),y}},Aw.set(r.vendor,e),[3,6];case 5:throw u=d.sent(),t.error("Error loading noise cancellation sdk:"+s,u),u;case 6:return[2,e]}})})}Dp.createNoiseCancellationAudioProcessor=UN;var V4=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},z4=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.applyNoiseCancellation=Xc.NoiseCancellationImpl=void 0;var $N=Dp,W4=function(){function r(t,e){this._processor=t,this._sourceTrack=e,this._disabledPermanent=!1}return Object.defineProperty(r.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),r.prototype.enable=function(){if(this._disabledPermanent)throw new Error(this.vendor+" noise cancellation is disabled permanently for this track");return this._processor.enable(),Promise.resolve()},r.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},r.prototype.reacquireTrack=function(t){return V4(this,void 0,void 0,function(){var e,n,i;return z4(this,function(a){switch(a.label){case 0:return e=this._processor.isEnabled(),this._processor.disconnect(),[4,t()];case 1:return n=a.sent(),this._sourceTrack=n,[4,this._processor.connect(n)];case 2:return i=a.sent(),e?this._processor.enable():this._processor.disable(),[2,i]}})})},r.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},r.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},r}();Xc.NoiseCancellationImpl=W4;function VN(r,t,e){return V4(this,void 0,void 0,function(){var n,i,a,o;return z4(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,$N.createNoiseCancellationAudioProcessor(t,e)];case 1:return n=s.sent(),i=n.connect(r),a=new W4(n,r),[2,{cleanTrack:i,noiseCancellation:a}];case 2:return o=s.sent(),e.warn("Failed to create noise cancellation. Returning normal audio track: "+o),[2,{cleanTrack:r}];case 3:return[2]}})})}Xc.applyNoiseCancellation=VN;var Me={},Dt={},q4=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},zN=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};function WN(){var r={};return r.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),r}function qN(r,t,e,n){if(!(n in t)&&!n.match(/^on[a-z]+$/)){var i=!1;try{var a=Object.getOwnPropertyDescriptor(r,n);i=a&&!!a.get}catch{}if(!i){var o;try{o=typeof r[n]}catch{}o==="function"&&(t[n]=function(){return this[e][n].apply(this[e],arguments)})}}}function HN(r,t,e){for(var n in r)qN(r,t,e,n)}function GN(r,t){r=Array.isArray(r)?new Set(r):new Set(r.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var e=new Set;return r.forEach(function(n){t.has(n)||e.add(n)}),e}function KN(r,t){var e=r instanceof Map||r instanceof Set?Array.from(r.values()):r;return e.reduce(function(n,i){return n.concat(t(i))},[])}function L1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:null}function O1(r){return typeof r>"u"&&(r=L1()),/Chrome|CriOS/.test(r)?"chrome":/Firefox|FxiOS/.test(r)?"firefox":/Safari|iPhone|iPad|iPod/.test(r)?"safari":null}function QN(r){typeof r>"u"&&(r=L1());var t={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[O1(r)];if(!t)return null;var e=new RegExp("("+t+")/([^\\s]+)"),n=q4(r.match(e)||[],3),i=n[2];if(!i)return null;var a=i.split(".").map(Number);return{major:isNaN(a[0])?null:a[0],minor:isNaN(a[1])?null:a[1]}}function YN(r){return typeof r>"u"&&(r=L1()),/Mobi/.test(r)&&O1()==="chrome"&&/iPad|iPhone|iPod/.test(r)}function JN(r,t){var e=null;Object.defineProperty(r,"on"+t,{get:function(){return e},set:function(n){e&&this.removeEventListener(t,e),typeof n=="function"?(e=n,this.addEventListener(t,e)):e=null}})}function XN(r,t,e){return t?r.then(t,e):r}function ZN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=Math.random()*16|0,e=r==="x"?t:t&3|8;return e.toString(16)})}function eR(r,t,e){Object.getOwnPropertyNames(r).forEach(function(n){tR(r,t,e,n)})}function tR(r,t,e,n){if(!(n in t)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(t,n,{value:null,writable:!0}),e.addEventListener(n.slice(2),function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return t.dispatchEvent.apply(t,zN([],q4(i)))});return}Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}}function rR(){return typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"&&typeof RTCPeerConnection=="function"}function nR(r){if(typeof RTCRtpSender<"u"&&typeof RTCRtpSender.getCapabilities=="function")return Promise.resolve(new Set(RTCRtpSender.getCapabilities(r).codecs.map(function(e){var n=e.mimeType;return n.split("/")[1].toLowerCase()})));if(typeof RTCPeerConnection>"u"||typeof RTCPeerConnection.prototype>"u"||typeof RTCPeerConnection.prototype.addTransceiver!="function"||typeof RTCPeerConnection.prototype.close!="function"||typeof RTCPeerConnection.prototype.createOffer!="function")return Promise.resolve(new Set);var t=new RTCPeerConnection;return t.addTransceiver(r),t.createOffer().then(function(e){var n=e.sdp;return t.close(),new Set((n.match(/^a=rtpmap:.+$/gm)||[]).map(function(i){return i.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()}))},function(){return t.close(),new Set})}var W0=new Map;function iR(r,t){var e=W0.get(t);return e?Promise.resolve(e.has(r.toLowerCase())):nR(t).then(function(n){return W0.set(t,n),n.has(r.toLowerCase())})}function aR(){W0.clear()}Dt.clearCachedSupportedCodecs=aR;Dt.defer=WN;Dt.delegateMethods=HN;Dt.difference=GN;Dt.flatMap=KN;Dt.guessBrowser=O1;Dt.guessBrowserVersion=QN;Dt.isCodecSupported=iR;Dt.isIOSChrome=YN;Dt.interceptEvent=JN;Dt.legacyPromise=XN;Dt.makeUUID=ZN;Dt.proxyProperties=eR;Dt.support=rR;var Fp={},Nw="1234567890abcdef",oR=32;function H4(r){for(var t="",e=0;e<oR;e++)t+=Nw.charAt(Math.floor(Math.random()*Nw.length));return""+r+t}Fp.sessionSID=H4("SS");Fp.createSID=H4;var sR={recordingMediaLost:"recording-media-lost"},G4=sR,cR=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pn=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Os=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},A1=zt,lR=A1.typeErrors,jm=A1.trackPriority,uR=Dt,fR=Fp.sessionSID,dR=G4;function hR(r,t){if(r instanceof t.LocalAudioTrack||r instanceof t.LocalVideoTrack||r instanceof t.LocalDataTrack)return r;if(r instanceof t.MediaStreamTrack)return r.kind==="audio"?new t.LocalAudioTrack(r,t):new t.LocalVideoTrack(r,t);throw lR.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function pR(r,t,e,n){var i={audio:n.LocalAudioTrackPublication,video:n.LocalVideoTrackPublication,data:n.LocalDataTrackPublication}[r.kind];return new i(t,r,e,n)}function vR(r){return r[0].toUpperCase()+r.slice(1)}function mR(r,t,e,n){var i=new Set;t.on("newListener",function a(o){e.has(o)&&!i.has(o)&&(n.deprecated(r+"#"+o+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(e.get(o)?" Use "+r+"#"+e.get(o)+" instead.":"")),i.add(o)),i.size>=e.size&&t.removeListener("newListener",a)})}function gR(r,t){r=Array.isArray(r)?new Set(r):new Set(r.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var e=new Set;return r.forEach(function(n){t.has(n)||e.add(n)}),e}function yR(r,t){return Object.keys(r).reduce(function(e,n){return r[n]!==t&&(e[n]=r[n]),e},{})}function _R(r,t){var e=r instanceof Map||r instanceof Set?Array.from(r.values()):r;return t=t||function(i){return i},e.reduce(function(n,i){var a=t(i);return n.concat(a)},[])}function K4(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function wR(){var r=K4(),t=pn(r.match(/\(([^)]+)\)/)||[],2),e=t[1],n=e===void 0?"unknown":e,i=pn(n.split(";").map(function(o){return o.trim()}),1),a=i[0];return a.toLowerCase()}function bR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=Math.random()*16|0,e=r==="x"?t:t&3|8;return e.toString(16)})}function SR(r){var t=null;function e(){t=null,r()}return function(){t&&clearTimeout(t),t=setTimeout(e)}}function xR(r,t,e,n){return new Promise(function(i,a){function o(){var l=[].slice.call(arguments);n&&t.removeListener(n,s),i.apply(void 0,Os([],pn(l)))}function s(){var l=[].slice.call(arguments);t.removeListener(e,o),a.apply(void 0,Os([],pn(l)))}t.once(e,o),n&&t.once(n,s),r()})}function kR(r,t){return t.split(".").reduce(function(e,n){return e?e[n]:null},r)}function PR(){var r={};return r.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),r}function TR(r,t,e,n){if(!(n in t)&&!n.match(/^on[a-z]+$/)){var i;try{i=typeof r[n]}catch{}i==="function"&&(t[n]=function(){for(var a,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return(a=this[e])[n].apply(a,Os([],pn(o)))})}}function ER(r,t,e){for(var n in r)TR(r,t,e,n)}function gh(r,t){if(r===t)return!0;if(typeof r!=typeof t)return!1;if(r===null)return t===null;if(t===null)return!1;if(Array.isArray(r))return Array.isArray(t)&&r.length===t.length&&r.every(function(i,a){return gh(i,t[a])});if(typeof r=="object"){var e=Object.keys(r).sort(),n=Object.keys(t).sort();return!Array.isArray(t)&&gh(e,n)&&e.every(function(i){return gh(r[i],t[i])})}return!1}function Q4(r){return typeof r=="object"&&!Array.isArray(r)}function CR(r,t,e){Object.getOwnPropertyNames(r).forEach(function(n){LR(r,t,e,n)})}function LR(r,t,e,n){if(!(n in t)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(t,n,{value:null,writable:!0}),e.addEventListener(n.slice(2),function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];t.dispatchEvent.apply(t,Os([],pn(i)))});return}Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}}function OR(r,t,e){return t?r.then(function(n){t(n)},function(n){e(n)}):r}function AR(r){return typeof r=="string"?{default:r,media:r,signaling:r,webrtc:r}:r}function NR(r,t){return t=t?"Local":"",t+(r.kind||"").replace(/\w{1}/,function(e){return e.toUpperCase()})+"Track"}function RR(r,t){return t=t?"Local":"",t+(r.kind||"").replace(/\w{1}/,function(e){return e.toUpperCase()})+"TrackPublication"}function Y4(r){Object.getOwnPropertyNames(r).forEach(function(t){t.startsWith("_")&&J4(r,t)})}function jR(r,t){return function(e){cR(n,e);function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e.apply(this,Os([],pn(i)))||this;return Y4(o),IR(o,t),o}return n}(r)}function J4(r,t){var e=Object.getOwnPropertyDescriptor(r,t);e.enumerable=!1,Object.defineProperty(r,t,e)}function IR(r,t){t===void 0&&(t=[]),t.forEach(function(e){r.hasOwnProperty(e)&&J4(r,e)})}function X4(r){return r.map(Bp)}function MR(r){return X4(Os([],pn(r)))}function DR(r){return Os([],pn(r.entries())).reduce(function(t,e){var n,i=pn(e,2),a=i[0],o=i[1];return Object.assign((n={},n[a]=Bp(o),n),t)},{})}function FR(r){return Object.entries(r).reduce(function(t,e){var n,i=pn(e,2),a=i[0],o=i[1];return Object.assign((n={},n[a]=Bp(o),n),t)},{})}function Bp(r){return Array.isArray(r)?X4(r):r instanceof Set?MR(r):r instanceof Map?DR(r):r&&typeof r=="object"?FR(r):r}function BR(r){function t(a){return a?"true":"false"}var e={sessionSID:fR,iceServers:(r.iceServers||[]).length,audioTracks:(r.tracks||[]).filter(function(a){return a.kind==="audio"}).length,videoTracks:(r.tracks||[]).filter(function(a){return a.kind==="video"}).length,dataTracks:(r.tracks||[]).filter(function(a){return a.kind==="data"}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(a){var o=pn(a,2),s=o[0],l=o[1];l=l||s,e[l]=t(!!r[s])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(a){var o=pn(a,2),s=o[0],l=o[1];l=l||s,typeof r[s]=="number"?e[l]=r[s]:isNaN(Number(r[s]))||(e[l]=Number(r[s]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(a){var o=pn(a,2),s=o[0],l=o[1];l=l||s,typeof r[s]=="string"?e[l]=r[s]:typeof r[s]=="number"&&s==="name"&&(e[l]=r[s].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(a){a in r&&(e[a]=JSON.stringify(r[a]))}),"networkQuality"in r&&(e.networkQualityConfiguration={},Q4(r.networkQuality)?["local","remote"].forEach(function(a){typeof r.networkQuality[a]=="number"&&(e.networkQualityConfiguration[a]=r.networkQuality[a])}):(e.networkQualityConfiguration.remote=0,e.networkQualityConfiguration.local=r.networkQuality?1:0)),r.bandwidthProfile&&r.bandwidthProfile.video){var n=r.bandwidthProfile.video||{};e.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(a){typeof n[a]=="number"||typeof n[a]=="string"?e.bandwidthProfileOptions[a]=n[a]:typeof n[a]=="boolean"?e.bandwidthProfileOptions[a]=t(n[a]):typeof n[a]=="object"&&(e.bandwidthProfileOptions[a]=JSON.stringify(n[a]))})}var i={RTCPeerConnection:"customRTCPeerConnectionImpl",MediaStream:"customMediaStreamImpl",getUserMedia:"customGetUserMediaImpl",enumerateDevices:"customEnumerateDevicesImpl"};return Object.entries(i).forEach(function(a){var o=pn(a,2),s=o[0],l=o[1];e[l]=t(typeof r[s]<"u")}),{group:"room",name:"connect",level:"info",payload:e}}function UR(r){return Up(r,[{prop:"video",type:"object",transform:$R}])}function $R(r){return Up(r,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:zR},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function VR(r,t,e,n,i,a,o){var s={transports:[{type:"data-channel"}]};return Object.assign(r?{active_speaker:s}:{},t?{network_quality:s}:{},a?{render_hints:s}:{},i?{publisher_hints:s}:{},e?{track_priority:s}:{},n?{track_switch_off:s}:{},o?{extension_transcriptions:s}:{})}function Im(r){return Up(r,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function zR(r){var t=jm.PRIORITY_HIGH,e=jm.PRIORITY_LOW,n=jm.PRIORITY_STANDARD;return Up(r,[{prop:t,type:"object",transform:Im},{prop:e,type:"object",transform:Im},{prop:n,type:"object",transform:Im}])}function Up(r,t){return t.reduce(function(e,n){var i,a=n.prop,o=n.type,s=n.payloadProp,l=s===void 0?a:s,c=n.transform,u=c===void 0?function(d){return d}:c;return typeof r[a]===o?Object.assign((i={},i[l]=u(r[a]),i),e):e},{})}function WR(r){return{rules:[{type:r?"include":"exclude",all:!0}],revision:1}}function qR(r){var t,e=(t={},t[dR.recordingMediaLost]="recordings",t);return r.map(function(n){return e[n]}).filter(function(n){return!!n})}function HR(r,t){var e=Math.random();return r-t+Math.floor(2*t*e+.5)}function GR(r,t,e){return t<=r&&r<=e}function KR(r){return uR.guessBrowser()==="chrome"&&r.kind==="video"&&"displaySurface"in r.getSettings()}function QR(r){return r===void 0&&(r=10),new Promise(function(t){return setTimeout(t,r)})}function YR(r,t){return new Promise(function(e){r.addEventListener(t,function n(i){r.removeEventListener(t,n),e(i)})})}Me.constants=A1;Me.createBandwidthProfilePayload=UR;Me.createMediaSignalingPayload=VR;Me.createMediaWarningsPayload=qR;Me.createRoomConnectEventPayload=BR;Me.createSubscribePayload=WR;Me.asLocalTrack=hR;Me.asLocalTrackPublication=pR;Me.capitalize=vR;Me.deprecateEvents=mR;Me.difference=gR;Me.filterObject=yR;Me.flatMap=_R;Me.getPlatform=wR;Me.getUserAgent=K4;Me.hidePrivateProperties=Y4;Me.hidePrivateAndCertainPublicPropertiesInClass=jR;Me.isDeepEqual=gh;Me.isNonArrayObject=Q4;Me.inRange=GR;Me.makeUUID=bR;Me.oncePerTick=SR;Me.promiseFromEvents=xR;Me.getOrNull=kR;Me.defer=PR;Me.delegateMethods=ER;Me.proxyProperties=CR;Me.legacyPromise=OR;Me.buildLogLevels=AR;Me.trackClass=NR;Me.trackPublicationClass=RR;Me.valueToJSON=Bp;Me.withJitter=HR;Me.isChromeScreenShareTrack=KR;Me.waitForSometime=QR;Me.waitForEvent=YR;var An={},Z4=Dt,JR=Z4.flatMap,XR=Z4.guessBrowser,os=null;function ZR(){if(typeof os=="boolean")return os;if(typeof RTCPeerConnection>"u")return os=!1,os;try{new RTCPeerConnection({sdpSemantics:"foo"}),os=!1}catch{os=!0}return os}var hc=null;function e8(){hc=null}function t8(){if(!hc)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype){var r=new RTCPeerConnection;try{r.addTransceiver("audio"),hc="unified"}catch{hc="planb"}r.close()}else hc="planb";return hc}function r8(r){return!r||!ZR()?t8():{"plan-b":"planb","unified-plan":"unified"}[r]}function n8(){return typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}function i8(r){return{chrome:r8(r),firefox:"unified",safari:n8()}[XR()]||null}function N1(r,t){var e=t.match(new RegExp(r,"gm"))||[];return e.reduce(function(n,i){var a=i.match(new RegExp(r));return a?n.add(a[1]):n},new Set)}function e3(r,t){return N1(r,t)}function t3(r){return e3("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",r)}function r3(r){return e3("^a=msid:.+ +(.+) *$",r)}function n3(r,t){var e="^a=ssrc:([0-9]+) +msid:[^ ]+ +"+t+" *$";return N1(e,r)}function i3(r,t,e){return t===void 0&&(t=".*"),e===void 0&&(e=".*"),r.split(`\r
m=`).slice(1).map(function(n){return"m="+n}).filter(function(n){var i=new RegExp("m="+t,"gm"),a=new RegExp("a="+e,"gm");return i.test(n)&&a.test(n)})}function a8(r){return Array.from(N1("^a=ssrc:([0-9]+) +.*$",r))}function a3(r,t){var e=i3(r),n=new RegExp("^a=msid:[^ ]+ +"+t+" *$","gm"),i=e.filter(function(a){return a.match(n)});return new Set(JR(i,a8))}function o3(r,t,e){return new Map(Array.from(r(e)).map(function(n){return[n,t(e,n)]}))}function o8(r){return o3(t3,n3,r)}function s8(r){return o3(r3,a3,r)}function s3(r,t,e){var n=r(e),i=new Map;n.forEach(function(s,l){if(!t.has(l)){t.set(l,s);return}var c=Array.from(t.get(l)),u=Array.from(s);c.forEach(function(d,v){var p=u[v];i.set(p,d);var y="^a=ssrc:"+p+" (.*)$",_="a=ssrc:"+d+" $1";e=e.replace(new RegExp(y,"gm"),_)})});var a="^(a=ssrc-group:[^ ]+ +)(.*)$",o=e.match(new RegExp(a,"gm"))||[];return o.forEach(function(s){var l=s.match(new RegExp(a));if(l){var c=l[1],u=l[2],d=u.split(" ").map(function(v){var p=i.get(v);return p||v}).join(" ");e=e.replace(l[0],c+d)}}),e}function c8(r,t){return s3(o8,r,t)}function l8(r,t){return s3(s8,r,t)}An.clearChromeCachedSdpFormat=e8;An.getSdpFormat=i8;An.getMediaSections=i3;An.getPlanBTrackIds=t3;An.getUnifiedPlanTrackIds=r3;An.getPlanBSSRCs=n3;An.getUnifiedPlanSSRCs=a3;An.updatePlanBTrackIdsToSSRCs=c8;An.updateUnifiedPlanTrackIdsToSSRCs=l8;var xn=A&&A.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},co=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},R1=Dt,c3=R1.flatMap,u8=R1.guessBrowser,f8=R1.guessBrowserVersion,d8=An.getSdpFormat,j1=u8(),h8=f8(),I1=j1==="chrome",l3=j1==="firefox",u3=j1==="safari",Rw=I1?h8.major:null,p8=32767;function Zc(r,t){return typeof r.get=="function"?r.get(t):r.find(function(e){return e.id===t})}function v8(r,t,e){var n,i,a,o,s,l,c,u,d,v,p,y,_,x,w,S,k,T,R,U,$,F;e===void 0&&(e=!1);var M;if(Array.isArray(r))M=new Map(r.map(function(je){return[je.id||String(Math.random()),je]}));else if(r instanceof Map)M=r;else if(typeof r=="object"&&r!==null){var Y=new Map;Object.keys(r).forEach(function(je){Y.set(je,r[je])}),M=Y}else return new Map;if(!M||!t)return new Map;var O=new Map,N=t.id,W=t.kind,j=null,Z=null,X=null;try{for(var oe=xn(M),q=oe.next();!q.done;q=oe.next()){var re=co(q.value,2),fe=re[0],ne=re[1];if(e&&ne.type==="inbound-rtp"&&ne.trackIdentifier===N){j=ne,Z=fe,X=ne.ssrc;break}else if(!e&&ne.type==="media-source"&&ne.trackIdentifier===N){j=ne,Z=fe;break}else ne.type==="track"&&ne.trackIdentifier===N&&(j||(j=ne,Z=fe))}}catch(je){n={error:je}}finally{try{q&&!q.done&&(i=oe.return)&&i.call(oe)}finally{if(n)throw n.error}}if(!j)if(e){var E=[];try{for(var z=xn(M),H=z.next();!H.done;H=z.next()){var ee=co(H.value,2),fe=ee[0],ne=ee[1];ne.type==="inbound-rtp"&&(ne.kind===W||ne.mediaType===W)&&E.push({id:fe,stat:ne})}}catch(je){a={error:je}}finally{try{H&&!H.done&&(o=z.return)&&o.call(z)}finally{if(a)throw a.error}}(E.length===1||E.length>1)&&(j=E[0].stat,Z=E[0].id,X=j.ssrc)}else try{for(var ae=xn(M),ue=ae.next();!ue.done;ue=ae.next()){var _e=co(ue.value,2),fe=_e[0],ne=_e[1];if(ne.type==="media-source"&&ne.kind===W){j=ne,Z=fe;break}}}catch(je){s={error:je}}finally{try{ue&&!ue.done&&(l=ae.return)&&l.call(ae)}finally{if(s)throw s.error}}if(!j)return O;O.set(Z,j);var me=new Set;if(e){if(j.codecId&&me.add(j.codecId),j.transportId&&me.add(j.transportId),j.remoteId&&me.add(j.remoteId),X)try{for(var be=xn(M),le=be.next();!le.done;le=be.next()){var Pe=co(le.value,2),fe=Pe[0],ne=Pe[1];ne.type==="remote-outbound-rtp"&&ne.ssrc===X&&me.add(fe)}}catch(je){c={error:je}}finally{try{le&&!le.done&&(u=be.return)&&u.call(be)}finally{if(c)throw c.error}}try{for(var Ae=xn(me),ge=Ae.next();!ge.done;ge=Ae.next()){var J=ge.value;M.has(J)&&O.set(J,M.get(J))}}catch(je){d={error:je}}finally{try{ge&&!ge.done&&(v=Ae.return)&&v.call(Ae)}finally{if(d)throw d.error}}try{for(var gt=xn(M),nt=gt.next();!nt.done;nt=gt.next()){var et=co(nt.value,2),fe=et[0],ne=et[1];ne.type==="track"&&ne.trackIdentifier===N&&O.set(fe,ne)}}catch(je){p={error:je}}finally{try{nt&&!nt.done&&(y=gt.return)&&y.call(gt)}finally{if(p)throw p.error}}}else{try{for(var Ce=xn(M),Ve=Ce.next();!Ve.done;Ve=Ce.next()){var Re=co(Ve.value,2),fe=Re[0],ne=Re[1];if(ne.type==="outbound-rtp"&&ne.mediaSourceId===Z){O.set(fe,ne),ne.codecId&&me.add(ne.codecId),ne.transportId&&me.add(ne.transportId);var pt=fe;try{for(var Ge=(w=void 0,xn(M)),St=Ge.next();!St.done;St=Ge.next()){var ct=co(St.value,2),ut=ct[0],Ot=ct[1];Ot.type==="remote-inbound-rtp"&&Ot.localId===pt&&O.set(ut,Ot)}}catch(mr){w={error:mr}}finally{try{St&&!St.done&&(S=Ge.return)&&S.call(Ge)}finally{if(w)throw w.error}}}}}catch(je){_={error:je}}finally{try{Ve&&!Ve.done&&(x=Ce.return)&&x.call(Ce)}finally{if(_)throw _.error}}try{for(var ot=xn(me),We=ot.next();!We.done;We=ot.next()){var J=We.value;M.has(J)&&O.set(J,M.get(J))}}catch(je){k={error:je}}finally{try{We&&!We.done&&(T=ot.return)&&T.call(ot)}finally{if(k)throw k.error}}}var rt=null,Qe=new Set;try{for(var At=xn(O.values()),xt=At.next();!xt.done;xt=At.next()){var ne=xt.value;ne.transportId&&Qe.add(ne.transportId)}}catch(je){R={error:je}}finally{try{xt&&!xt.done&&(U=At.return)&&U.call(At)}finally{if(R)throw R.error}}try{for(var Ue=xn(Qe),at=Ue.next();!at.done;at=Ue.next()){var Nt=at.value;if(M.has(Nt)){var ze=M.get(Nt);O.set(Nt,ze),ze.selectedCandidatePairId&&(rt=ze.selectedCandidatePairId),ze.localCertificateId&&M.has(ze.localCertificateId)&&O.set(ze.localCertificateId,M.get(ze.localCertificateId)),ze.remoteCertificateId&&M.has(ze.remoteCertificateId)&&O.set(ze.remoteCertificateId,M.get(ze.remoteCertificateId))}}}catch(je){$={error:je}}finally{try{at&&!at.done&&(F=Ue.return)&&F.call(Ue)}finally{if($)throw $.error}}if(rt&&M.has(rt)){var ft=M.get(rt);O.set(rt,ft),ft.localCandidateId&&M.has(ft.localCandidateId)&&O.set(ft.localCandidateId,M.get(ft.localCandidateId)),ft.remoteCandidateId&&M.has(ft.remoteCandidateId)&&O.set(ft.remoteCandidateId,M.get(ft.remoteCandidateId))}return O}function m8(r,t){return r&&typeof r.getStats=="function"?g8(r,t):Promise.reject(new Error("Given PeerConnection does not support getStats"))}function g8(r,t){var e=Pd(r,"audio","local"),n=Pd(r,"video","local"),i=Pd(r,"audio"),a=Pd(r,"video"),o={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},s=c3([[e,"localAudioTrackStats",!1],[n,"localVideoTrackStats",!1],[i,"remoteAudioTrackStats",!0],[a,"remoteVideoTrackStats",!0]],function(l){var c=co(l,3),u=c[0],d=c[1],v=c[2];return u.map(function(p){return S8(r,p,Object.assign({isRemote:v},t)).then(function(y){y.forEach(function(_){_.trackId=p.id,o[d].push(_)})})})});return Promise.all(s).then(function(){return y8(r,t)}).then(function(l){return o.activeIceCandidatePair=l,o})}function y8(r,t){return t===void 0&&(t={}),typeof t.testForChrome<"u"||I1||typeof t.testForSafari<"u"||u3?r.getStats().then(_8):typeof t.testForFirefox<"u"||l3?r.getStats().then(w8):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function _8(r){var t=Array.from(r.values()).find(function(l){var c=l.nominated,u=l.type;return u==="candidate-pair"&&c});if(!t)return null;var e=Zc(r,t.localCandidateId),n=Zc(r,t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],a=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),o=e?a.reduce(function(l,c){var u=c.key,d=c.type;return l[u]=typeof e[u]===d?e[u]:u==="deleted"?!1:null,l},{}):null,s=n?i.reduce(function(l,c){var u=c.key,d=c.type;return l[u]=typeof n[u]===d?n[u]:null,l},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(l){return l==="inprogress"?"in-progress":l}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(l,c){var u=c.key,d=c.type,v=c.fixup;return l[u]=typeof t[u]===d?v?v(t[u]):t[u]:null,l},{localCandidate:o,remoteCandidate:s})}function w8(r){var t=Array.from(r.values()).find(function(c){var u=c.nominated,d=c.type;return d==="candidate-pair"&&u});if(!t)return null;var e=Zc(r,t.localCandidateId),n=Zc(r,t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],a=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),o={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},s=e?a.reduce(function(c,u){var d=u.ffKeys,v=u.key,p=u.type,y=d&&d.find(function(_){return _ in e})||v;return c[v]=typeof e[y]===p?y==="candidateType"&&o[e[y]]||e[y]:y==="deleted"?!1:null,c},{}):null,l=n?i.reduce(function(c,u){var d=u.ffKeys,v=u.key,p=u.type,y=d&&d.find(function(_){return _ in n})||v;return c[v]=typeof n[y]===p?y==="candidateType"&&o[n[y]]||n[y]:null,c},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(c,u){var d=u.key,v=u.type;return c[d]=typeof t[d]===v?t[d]:null,c},{localCandidate:s,remoteCandidate:l})}function Pd(r,t,e){var n=e==="local"?"getSenders":"getReceivers";if(r[n])return r[n]().map(function(o){var s=o.track;return s}).filter(function(o){return o&&o.kind===t});var i=e==="local"?"getLocalStreams":"getRemoteStreams",a=t==="audio"?"getAudioTracks":"getVideoTracks";return c3(r[i](),function(o){return o[a]()})}function b8(r,t){var e,n,i,a,o,s;if(!r||!t)return!1;if(r.getReceivers){var l=r.getReceivers();try{for(var c=xn(l),u=c.next();!u.done;u=c.next()){var d=u.value;if(d.track&&d.track.id===t.id)return!0}}catch(T){e={error:T}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}}if(r.getRemoteStreams){var v=r.getRemoteStreams();try{for(var p=xn(v),y=p.next();!y.done;y=p.next()){var _=y.value,x=_.getTracks();try{for(var w=(o=void 0,xn(x)),S=w.next();!S.done;S=w.next()){var k=S.value;if(k.id===t.id)return!0}}catch(T){o={error:T}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}}}catch(T){i={error:T}}finally{try{y&&!y.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return!1}function S8(r,t,e){return e===void 0&&(e={}),typeof e.testForChrome<"u"||I1?jw(r,t,e):typeof e.testForFirefox<"u"||l3?x8(r,t,e):typeof e.testForSafari<"u"||u3?typeof e.testForSafari<"u"||d8()==="unified"?jw(r,t,e):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function jw(r,t,e){var n=e.log;return Rw&&Rw<67?new Promise(function(i,a){r.getStats(function(o){i([k8(o,t)])},null,a)}):r.getStats(t).then(function(i){return n.info("getStats by track successful"),Iw(i,e)}).catch(function(){return n.warn("getStats by track failed. Getting default stats"),r.getStats().then(function(i){n.info("getStats by default successful");var a=b8(r,t);n.info("Starting filtering stats for "+(a?"remote":"local")+" track");var o=v8(i,t,a);return n.info("Completed filtering stats for "+(a?"remote":"local")+" track"),Iw(o,e)})})}function x8(r,t,e){return r.getStats(t).then(function(n){return[P8(n,e)]})}function k8(r,t){var e=r.result().find(function(i){return i.type==="ssrc"&&i.stat("googTrackId")===t.id}),n={};return e&&(n.timestamp=Math.round(Number(e.timestamp)),n=e.names().reduce(function(i,a){switch(a){case"googCodecName":i.codecName=e.stat(a);break;case"googRtt":i.roundTripTime=Number(e.stat(a));break;case"googJitterReceived":i.jitter=Number(e.stat(a));break;case"googFrameWidthInput":i.frameWidthInput=Number(e.stat(a));break;case"googFrameHeightInput":i.frameHeightInput=Number(e.stat(a));break;case"googFrameWidthSent":i.frameWidthSent=Number(e.stat(a));break;case"googFrameHeightSent":i.frameHeightSent=Number(e.stat(a));break;case"googFrameWidthReceived":i.frameWidthReceived=Number(e.stat(a));break;case"googFrameHeightReceived":i.frameHeightReceived=Number(e.stat(a));break;case"googFrameRateInput":i.frameRateInput=Number(e.stat(a));break;case"googFrameRateSent":i.frameRateSent=Number(e.stat(a));break;case"googFrameRateReceived":i.frameRateReceived=Number(e.stat(a));break;case"ssrc":i[a]=e.stat(a);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":i[a]=Number(e.stat(a));break}return i},n)),n}function Iw(r,t){var e=t.simulateExceptionWhileStandardizingStats,n=e===void 0?!1:e;if(n)throw new Error("Error while gathering stats");var i=null,a=[],o=null,s=null,l=null,c=null,u=null;r.forEach(function(_){var x=_.type;switch(x){case"inbound-rtp":i=_;break;case"outbound-rtp":a.push(_);break;case"media-source":u=_;break;case"track":l=_;break;case"codec":c=_;break;case"remote-inbound-rtp":o=_;break;case"remote-outbound-rtp":s=_;break}});var d=l?l.remoteSource:!u,v=d?[i]:a,p=[],y=d?s:o;return v.forEach(function(_){var x={},w=[_,u,l,c,y&&y.ssrc===_.ssrc?y:null];function S(ee){var ae=w.find(function(ue){return ue&&typeof ue[ee]<"u"})||null;return ae?ae[ee]:null}var k=S("ssrc");typeof k=="number"&&(x.ssrc=String(k));var T=S("timestamp");x.timestamp=Math.round(T);var R=S("mimeType");typeof R=="string"&&(R=R.split("/"),x.codecName=R[R.length-1]);var U=S("roundTripTime");typeof U=="number"&&(x.roundTripTime=Math.round(U*1e3));var $=S("jitter");typeof $=="number"&&(x.jitter=Math.round($*1e3));var F=S("frameWidth");typeof F=="number"&&(d?x.frameWidthReceived=F:(x.frameWidthSent=F,x.frameWidthInput=l?l.frameWidth:u.width));var M=S("frameHeight");typeof M=="number"&&(d?x.frameHeightReceived=M:(x.frameHeightSent=M,x.frameHeightInput=l?l.frameHeight:u.height));var Y=S("framesPerSecond");typeof Y=="number"&&(x[d?"frameRateReceived":"frameRateSent"]=Y);var O=S("bytesReceived");typeof O=="number"&&(x.bytesReceived=O);var N=S("bytesSent");typeof N=="number"&&(x.bytesSent=N);var W=S("packetsLost");typeof W=="number"&&(x.packetsLost=W);var j=S("packetsReceived");typeof j=="number"&&(x.packetsReceived=j);var Z=S("packetsSent");typeof Z=="number"&&(x.packetsSent=Z);var X=S("audioLevel");typeof X=="number"&&(X=Math.round(X*p8),d?x.audioOutputLevel=X:x.audioInputLevel=X);var oe=S("totalPacketSendDelay");typeof oe=="number"&&(x.totalPacketSendDelay=oe);var q=S("totalEncodeTime");typeof q=="number"&&(x.totalEncodeTime=q);var re=S("framesEncoded");typeof re=="number"&&(x.framesEncoded=re);var fe=S("estimatedPlayoutTimestamp");typeof fe=="number"&&(x.estimatedPlayoutTimestamp=fe);var ne=S("totalDecodeTime");typeof ne=="number"&&(x.totalDecodeTime=ne);var E=S("framesDecoded");typeof E=="number"&&(x.framesDecoded=E);var z=S("jitterBufferDelay");typeof z=="number"&&(x.jitterBufferDelay=z);var H=S("jitterBufferEmittedCount");typeof H=="number"&&(x.jitterBufferEmittedCount=H),p.push(x)}),p}function P8(r,t){r===void 0&&(r=new Map);var e=t.isRemote,n=t.simulateExceptionWhileStandardizingStats,i=n===void 0?!1:n;if(i)throw new Error("Error while gathering stats");var a=null,o=null;r.forEach(function(j){var Z=j.isRemote,X=j.remoteId,oe=j.type;if(!Z)switch(oe){case"inbound-rtp":a=j,o=Zc(r,X);break;case"outbound-rtp":o=j,a=Zc(r,X);break}});var s=e?a:o,l=e?o:a;function c(j){return s&&typeof s[j]<"u"?s[j]:l&&typeof l[j]<"u"?l[j]:null}var u={},d=c("timestamp");u.timestamp=Math.round(d);var v=c("ssrc");typeof v=="number"&&(u.ssrc=String(v));var p=c("bytesSent");typeof p=="number"&&(u.bytesSent=p);var y=c("packetsLost");typeof y=="number"&&(u.packetsLost=y);var _=c("packetsSent");typeof _=="number"&&(u.packetsSent=_);var x=c("roundTripTime");typeof x=="number"&&(u.roundTripTime=Math.round(x*1e3));var w=c("jitter");typeof w=="number"&&(u.jitter=Math.round(w*1e3));var S=c("framerateMean");typeof S=="number"&&(u.frameRateSent=Math.round(S));var k=c("bytesReceived");typeof k=="number"&&(u.bytesReceived=k);var T=c("packetsReceived");typeof T=="number"&&(u.packetsReceived=T);var R=c("framerateMean");typeof R=="number"&&(u.frameRateReceived=Math.round(R));var U=c("totalPacketSendDelay");typeof U=="number"&&(u.totalPacketSendDelay=U);var $=c("totalEncodeTime");typeof $=="number"&&(u.totalEncodeTime=$);var F=c("framesEncoded");typeof F=="number"&&(u.framesEncoded=F);var M=c("estimatedPlayoutTimestamp");typeof M=="number"&&(u.estimatedPlayoutTimestamp=M);var Y=c("totalDecodeTime");typeof Y=="number"&&(u.totalDecodeTime=Y);var O=c("framesDecoded");typeof O=="number"&&(u.framesDecoded=O);var N=c("jitterBufferDelay");typeof N=="number"&&(u.jitterBufferDelay=N);var W=c("jitterBufferEmittedCount");return typeof W=="number"&&(u.jitterBufferEmittedCount=W),u}var T8=m8;function E8(r){return r===void 0&&(r={audio:!0,video:!0}),typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(r):Promise.reject(new Error("getUserMedia is not supported"))}var C8=E8,q0={exports:{}};typeof MediaStream=="function"?q0.exports=MediaStream:q0.exports=function(){throw new Error("MediaStream is not supported")};var f3=q0.exports,H0={exports:{}};typeof MediaStreamTrack=="function"?H0.exports=MediaStreamTrack:H0.exports=function(){throw new Error("MediaStreamTrack is not supported")};var L8=H0.exports,G0={exports:{}};typeof RTCIceCandidate=="function"?G0.exports=RTCIceCandidate:G0.exports=function(){throw new Error("RTCIceCandidate is not supported")};var O8=G0.exports,pc={exports:{}},Mm,Mw;function d3(){if(Mw)return Mm;Mw=1;var r=function(){function t(e){this.descriptionInitDict=e;var n=e&&e.type==="rollback"?null:new RTCSessionDescription(e);Object.defineProperties(this,{_description:{get:function(){return n}}})}return Object.defineProperty(t.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),t}();return Mm=r,Mm}var M1={exports:{}},Bc=typeof Reflect=="object"?Reflect:null,Dw=Bc&&typeof Bc.apply=="function"?Bc.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},yh;Bc&&typeof Bc.ownKeys=="function"?yh=Bc.ownKeys:Object.getOwnPropertySymbols?yh=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:yh=function(t){return Object.getOwnPropertyNames(t)};function A8(r){console&&console.warn&&console.warn(r)}var h3=Number.isNaN||function(t){return t!==t};function Vt(){Vt.init.call(this)}M1.exports=Vt;M1.exports.once=I8;Vt.EventEmitter=Vt;Vt.prototype._events=void 0;Vt.prototype._eventsCount=0;Vt.prototype._maxListeners=void 0;var Fw=10;function $p(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Vt,"defaultMaxListeners",{enumerable:!0,get:function(){return Fw},set:function(r){if(typeof r!="number"||r<0||h3(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Fw=r}});Vt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Vt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||h3(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function p3(r){return r._maxListeners===void 0?Vt.defaultMaxListeners:r._maxListeners}Vt.prototype.getMaxListeners=function(){return p3(this)};Vt.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")Dw(l,this,e);else for(var c=l.length,u=_3(l,c),n=0;n<c;++n)Dw(u[n],this,e);return!0};function v3(r,t,e,n){var i,a,o;if($p(e),a=r._events,a===void 0?(a=r._events=Object.create(null),r._eventsCount=0):(a.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),a=r._events),o=a[t]),o===void 0)o=a[t]=e,++r._eventsCount;else if(typeof o=="function"?o=a[t]=n?[e,o]:[o,e]:n?o.unshift(e):o.push(e),i=p3(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=r,s.type=t,s.count=o.length,A8(s)}return r}Vt.prototype.addListener=function(t,e){return v3(this,t,e,!1)};Vt.prototype.on=Vt.prototype.addListener;Vt.prototype.prependListener=function(t,e){return v3(this,t,e,!0)};function N8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m3(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},i=N8.bind(n);return i.listener=e,n.wrapFn=i,i}Vt.prototype.once=function(t,e){return $p(e),this.on(t,m3(this,t,e)),this};Vt.prototype.prependOnceListener=function(t,e){return $p(e),this.prependListener(t,m3(this,t,e)),this};Vt.prototype.removeListener=function(t,e){var n,i,a,o,s;if($p(e),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():R8(n,a),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,s||e)}return this};Vt.prototype.off=Vt.prototype.removeListener;Vt.prototype.removeAllListeners=function(t){var e,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function g3(r,t,e){var n=r._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?j8(i):_3(i,i.length)}Vt.prototype.listeners=function(t){return g3(this,t,!0)};Vt.prototype.rawListeners=function(t){return g3(this,t,!1)};Vt.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):y3.call(r,t)};Vt.prototype.listenerCount=y3;function y3(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}Vt.prototype.eventNames=function(){return this._eventsCount>0?yh(this._events):[]};function _3(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function R8(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function j8(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function I8(r,t){return new Promise(function(e,n){function i(o){r.removeListener(t,a),n(o)}function a(){typeof r.removeListener=="function"&&r.removeListener("error",i),e([].slice.call(arguments))}w3(r,t,a,{once:!0}),t!=="error"&&M8(r,i,{once:!0})})}function M8(r,t,e){typeof r.on=="function"&&w3(r,"error",t,e)}function w3(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function i(a){n.once&&r.removeEventListener(t,i),e(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var yn=M1.exports,Dm,Bw;function D1(){if(Bw)return Dm;Bw=1;var r=A&&A.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var s=o.call(i),l,c=[],u;try{for(;(a===void 0||a-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(d){u={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(u)throw u.error}}return c},t=A&&A.__spreadArray||function(i,a){for(var o=0,s=a.length,l=i.length;o<s;o++,l++)i[l]=a[o];return i},e=yn.EventEmitter,n=function(){function i(){Object.defineProperties(this,{_eventEmitter:{value:new e}})}return i.prototype.dispatchEvent=function(a){return this._eventEmitter.emit(a.type,a)},i.prototype.addEventListener=function(){var a;return(a=this._eventEmitter).addListener.apply(a,t([],r(arguments)))},i.prototype.removeEventListener=function(){var a;return(a=this._eventEmitter).removeListener.apply(a,t([],r(arguments)))},i}();return Dm=n,Dm}var Fm,Uw;function b3(){if(Uw)return Fm;Uw=1;var r=Dt.defer,t={high:new Set(["low"]),low:new Set(["high"])},e=function(){function i(a){a===void 0&&(a="low");var o=a;Object.defineProperties(this,{_state:{set:function(s){var l=this;if(o!==s){o=s;var c=this._whenDeferreds.get(o);c.forEach(function(u){return u.resolve(l)}),c.clear()}},get:function(){return o}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),i.prototype.lower=function(){return this.transition("low")},i.prototype.raise=function(){return this.transition("high")},i.prototype.transition=function(a){if(!t[this.state].has(a))throw n(this.state,a);return this._state=a,this},i.prototype.when=function(a){if(this.state===a)return Promise.resolve(this);if(!t[this.state].has(a))return Promise.reject(n(this.state,a));var o=r();return this._whenDeferreds.get(a).add(o),o.promise},i}();function n(i,a){return new Error('Cannot transition from "'+i+'" to "'+a+'"')}return Fm=e,Fm}var Bm,$w;function D8(){if($w)return Bm;$w=1;var r=function(){function t(e){Object.defineProperties(this,{track:{enumerable:!0,value:e,writable:!0}})}return t}();return Bm=r,Bm}var Um,Vw;function F8(){if(Vw)return Um;Vw=1;var r=A&&A.__extends||function(){var N=function(W,j){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,X){Z.__proto__=X}||function(Z,X){for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(Z[oe]=X[oe])},N(W,j)};return function(W,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");N(W,j);function Z(){this.constructor=W}W.prototype=j===null?Object.create(j):(Z.prototype=j.prototype,new Z)}}(),t=A&&A.__read||function(N,W){var j=typeof Symbol=="function"&&N[Symbol.iterator];if(!j)return N;var Z=j.call(N),X,oe=[],q;try{for(;(W===void 0||W-- >0)&&!(X=Z.next()).done;)oe.push(X.value)}catch(re){q={error:re}}finally{try{X&&!X.done&&(j=Z.return)&&j.call(Z)}finally{if(q)throw q.error}}return oe},e=A&&A.__spreadArray||function(N,W){for(var j=0,Z=W.length,X=N.length;j<Z;j++,X++)N[X]=W[j];return N},n=d3(),i=D1(),a=b3(),o=f3,s=D8(),l=An,c=l.getSdpFormat,u=l.updatePlanBTrackIdsToSSRCs,d=l.updateUnifiedPlanTrackIdsToSSRCs,v=Dt,p=v.delegateMethods,y=v.interceptEvent,_=v.isIOSChrome,x=v.legacyPromise,w=v.proxyProperties,S=c()==="unified",k=function(N){r(W,N);function W(j,Z){j===void 0&&(j={});var X=N.call(this)||this,oe=Object.assign(j.iceTransportPolicy?{iceTransports:j.iceTransportPolicy}:{},j);y(X,"datachannel"),y(X,"signalingstatechange");var q=c(oe.sdpSemantics),re=new RTCPeerConnection(oe,Z);return Object.defineProperties(X,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new o},_peerConnection:{value:re},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:q},_senders:{value:new Map},_signalingStateLatch:{value:new a},_tracksToSSRCs:{value:new Map,writable:!0}}),re.addEventListener("datachannel",function(fe){Y(fe.channel),X.dispatchEvent(fe)}),re.addEventListener("signalingstatechange",function(){for(var fe=[],ne=0;ne<arguments.length;ne++)fe[ne]=arguments[ne];re.signalingState==="stable"&&(X._appliedTracksToSSRCs=new Map(X._tracksToSSRCs)),!X._pendingLocalOffer&&!X._pendingRemoteOffer&&X.dispatchEvent.apply(X,e([],t(fe)))}),re.ontrack=function(){},typeof re.addTrack!="function"&&re.addStream(X._localStream),w(RTCPeerConnection.prototype,X,re),X}return Object.defineProperty(W.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),W.prototype.addTrack=function(j){for(var Z,X=[],oe=1;oe<arguments.length;oe++)X[oe-1]=arguments[oe];if(typeof this._peerConnection.addTrack=="function")return(Z=this._peerConnection).addTrack.apply(Z,e([j],t(X)));if(this._peerConnection.signalingState==="closed")throw new Error("Cannot add MediaStreamTrack ["+j.id+`, 
        `+j.kind+"]: RTCPeerConnection is closed");var q=this._senders.get(j);if(q&&q.track)throw new Error("Cannot add MediaStreamTrack ['"+j.id+`, 
        `+j.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(j),this._peerConnection.addStream(this._localStream),q=new s(j),this._senders.set(j,q),q},W.prototype.removeTrack=function(j){if(this._peerConnection.signalingState==="closed")throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if(typeof this._peerConnection.addTrack=="function")try{return this._peerConnection.removeTrack(j)}catch{}else{var Z=j.track;if(!Z)return;j=this._senders.get(Z),j&&j.track&&(j.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(Z),this._peerConnection.addStream(this._localStream))}},W.prototype.getSenders=function(){return typeof this._peerConnection.addTrack=="function"?this._peerConnection.getSenders():Array.from(this._senders.values())},W.prototype.addIceCandidate=function(j){for(var Z=this,X=[],oe=1;oe<arguments.length;oe++)X[oe-1]=arguments[oe];var q;return this.signalingState==="have-remote-offer"?q=this._signalingStateLatch.when("low").then(function(){return Z._peerConnection.addIceCandidate(j)}):q=this._peerConnection.addIceCandidate(j),X.length>0?x.apply(void 0,e([q],t(X))):q},W.prototype.close=function(){this.signalingState!=="closed"&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},W.prototype.createAnswer=function(){for(var j=this,Z=[],X=0;X<arguments.length;X++)Z[X]=arguments[X];var oe;return this._pendingRemoteOffer?oe=this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return j._signalingStateLatch.lower(),j._peerConnection.createAnswer()}).then(function(q){return j._pendingRemoteOffer=null,j._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:O(j._sdpFormat,j._tracksToSSRCs,q.sdp)})},function(q){throw j._pendingRemoteOffer=null,q}):oe=this._peerConnection.createAnswer().then(function(q){return j._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:O(j._sdpFormat,j._tracksToSSRCs,q.sdp)})}),Z.length>1?x.apply(void 0,e([oe],t(Z))):oe},W.prototype.createOffer=function(){for(var j=this,Z=[],X=0;X<arguments.length;X++)Z[X]=arguments[X];var oe=t(Z,3),q=oe[0],re=oe[1],fe=oe[2],ne=fe||q||{};if(_()){if(ne.offerToReceiveVideo&&!this._audioTransceiver&&!(S&&U(this,"audio"))){delete ne.offerToReceiveAudio;try{this._audioTransceiver=S?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(z){return Promise.reject(z)}}if(ne.offerToReceiveVideo&&!this._videoTransceiver&&!(S&&U(this,"video"))){delete ne.offerToReceiveVideo;try{this._videoTransceiver=S?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(z){return Promise.reject(z)}}}var E=this._peerConnection.createOffer(ne).then(function(z){return j._rolledBackTracksToSSRCs.clear(),new n({type:z.type,sdp:O(j._sdpFormat,j._tracksToSSRCs,z.sdp)})});return Z.length>1?x(E,q,re):E},W.prototype.createDataChannel=function(j,Z){Z=M(Z);var X=this._peerConnection.createDataChannel(j,Z);return Y(X),X},W.prototype.setLocalDescription=function(){for(var j=[],Z=0;Z<arguments.length;Z++)j[Z]=arguments[Z];var X=t(j,3),oe=X[0],q=X[1],re=X[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var fe=T(this,!0,oe);return j.length>1?x(fe,q,re):fe},W.prototype.setRemoteDescription=function(){for(var j=[],Z=0;Z<arguments.length;Z++)j[Z]=arguments[Z];var X=t(j,3),oe=X[0],q=X[1],re=X[2];this._rolledBackTracksToSSRCs.clear();var fe=T(this,!1,oe);return j.length>1?x(fe,q,re):fe},W}(i);p(RTCPeerConnection.prototype,k.prototype,"_peerConnection");function T(N,W,j){function Z(z){W?N._pendingLocalOffer=z:N._pendingRemoteOffer=z}function X(){W?N._pendingLocalOffer=null:N._pendingRemoteOffer=null}var oe=W?N._pendingLocalOffer:N._pendingRemoteOffer,q=W?N._pendingRemoteOffer:N._pendingLocalOffer,re=W?"have-local-offer":"have-remote-offer",fe=W?"setLocalDescription":"setRemoteDescription",ne;if(!W&&q&&j.type==="answer")ne=R(N,j);else if(j.type==="offer"){if(N.signalingState!==re&&N.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+(W?"local":"remote")+" offer in state "+N.signalingState));!oe&&N._signalingStateLatch.state==="low"&&N._signalingStateLatch.raise();var E=N.signalingState;Z($(j)),ne=Promise.resolve(),N.signalingState!==E&&ne.then(function(){return N.dispatchEvent(new Event("signalingstatechange"))})}else j.type==="rollback"&&(N.signalingState!==re?ne=Promise.reject(new Error("Cannot rollback "+(W?"local":"remote")+" description in "+N.signalingState)):(X(),N._rolledBackTracksToSSRCs=new Map(N._tracksToSSRCs),N._tracksToSSRCs=new Map(N._appliedTracksToSSRCs),ne=Promise.resolve(),ne.then(function(){return N.dispatchEvent(new Event("signalingstatechange"))})));return ne||N._peerConnection[fe]($(j))}function R(N,W){var j=N._pendingLocalOffer;return N._peerConnection.setLocalDescription(j).then(function(){return N._pendingLocalOffer=null,N.setRemoteDescription(W)}).then(function(){N._signalingStateLatch.lower()})}function U(N,W){return!!N.getTransceivers().find(function(j){var Z=j.receiver,X=Z===void 0?{}:Z,oe=X.track,q=oe===void 0?{}:oe;return q.kind===W})}function $(N){return N instanceof n&&N._description?N._description:new RTCSessionDescription(N)}function F(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function M(N){return N=Object.assign({},N),F()&&"maxPacketLifeTime"in N&&(N.maxRetransmitTime=N.maxPacketLifeTime),N}function Y(N){return Object.defineProperty(N,"maxRetransmits",{value:N.maxRetransmits===65535?null:N.maxRetransmits}),F()&&Object.defineProperty(N,"maxPacketLifeTime",{value:N.maxRetransmitTime===65535?null:N.maxRetransmitTime}),N}function O(N,W,j){return N==="unified"?d(W,j):u(W,j)}return Um=k,Um}var $m,zw;function S3(){return zw||(zw=1,$m=RTCSessionDescription),$m}var Vm,Ww;function B8(){if(Ww)return Vm;Ww=1;var r=A&&A.__extends||function(){var _=function(x,w){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,k){S.__proto__=k}||function(S,k){for(var T in k)Object.prototype.hasOwnProperty.call(k,T)&&(S[T]=k[T])},_(x,w)};return function(x,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");_(x,w);function S(){this.constructor=x}x.prototype=w===null?Object.create(w):(S.prototype=w.prototype,new S)}}(),t=A&&A.__read||function(_,x){var w=typeof Symbol=="function"&&_[Symbol.iterator];if(!w)return _;var S=w.call(_),k,T=[],R;try{for(;(x===void 0||x-- >0)&&!(k=S.next()).done;)T.push(k.value)}catch(U){R={error:U}}finally{try{k&&!k.done&&(w=S.return)&&w.call(S)}finally{if(R)throw R.error}}return T},e=A&&A.__spreadArray||function(_,x){for(var w=0,S=x.length,k=_.length;w<S;w++,k++)_[k]=x[w];return _},n=D1(),i=S3(),a=An.updateUnifiedPlanTrackIdsToSSRCs,o=Dt,s=o.delegateMethods,l=o.interceptEvent,c=o.legacyPromise,u=o.proxyProperties,d=function(_){r(x,_);function x(w){var S=_.call(this)||this;l(S,"signalingstatechange");var k=new RTCPeerConnection(w);Object.defineProperties(S,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:k},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}});var T;return k.addEventListener("signalingstatechange",function(){for(var R=[],U=0;U<arguments.length;U++)R[U]=arguments[U];!S._rollingBack&&S.signalingState!==T&&(T=S.signalingState,S._isClosed?setTimeout(function(){return S.dispatchEvent.apply(S,e([],t(R)))}):S.dispatchEvent.apply(S,e([],t(R))))}),u(RTCPeerConnection.prototype,S,k),S}return Object.defineProperty(x.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"localDescription",{get:function(){return y(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),x.prototype.createAnswer=function(){for(var w=this,S=[],k=0;k<arguments.length;k++)S[k]=arguments[k];var T;return T=this._peerConnection.createAnswer().then(function(R){return p(w,R),y(R,w._initiallyNegotiatedDtlsRole)}),typeof S[0]=="function"?c.apply(void 0,e([T],t(S))):T},x.prototype.createOffer=function(){for(var w=this,S=[],k=0;k<arguments.length;k++)S[k]=arguments[k];var T=t(S,3),R=T[0],U=T[1],$=T[2],F=$||R||{},M;if(this.signalingState==="have-local-offer"||this.signalingState==="have-remote-offer"){var Y=this.signalingState==="have-local-offer";M=v(this,Y,function(){return w.createOffer(F)})}else M=this._peerConnection.createOffer(F);return M=M.then(function(O){return new i({type:O.type,sdp:a(w._tracksToSSRCs,O.sdp)})}),S.length>1?c(M,R,U):M},x.prototype.setLocalDescription=function(){for(var w,S=[],k=0;k<arguments.length;k++)S[k]=arguments[k];var T=t(S),R=T[0],U=T.slice(1),$;return R&&R.type==="answer"&&this.signalingState==="have-local-offer"&&($=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),$?S.length>1?c.apply(void 0,e([$],t(U))):$:(w=this._peerConnection).setLocalDescription.apply(w,e([],t(S)))},x.prototype.setRemoteDescription=function(){for(var w=this,S=[],k=0;k<arguments.length;k++)S[k]=arguments[k];var T=t(S),R=T[0],U=T.slice(1),$;return R&&this.signalingState==="have-remote-offer"&&(R.type==="answer"?$=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):R.type==="offer"&&($=v(this,!1,function(){return w._peerConnection.setRemoteDescription(R)}))),$||($=this._peerConnection.setRemoteDescription(R)),$=$.then(function(){return p(w,R,!0)}),S.length>1?c.apply(void 0,e([$],t(U))):$},x.prototype.close=function(){this.signalingState!=="closed"&&(this._isClosed=!0,this._peerConnection.close())},x}(n);s(RTCPeerConnection.prototype,d.prototype,"_peerConnection");function v(_,x,w){var S=x?"setLocalDescription":"setRemoteDescription";return _._rollingBack=!0,_._peerConnection[S](new i({type:"rollback"})).then(w).then(function(k){return _._rollingBack=!1,k},function(k){throw _._rollingBack=!1,k})}function p(_,x,w){if(!(_._initiallyNegotiatedDtlsRole||x.type==="offer")){var S=x.sdp.match(/a=setup:([a-z]+)/);if(S){var k=S[1];_._initiallyNegotiatedDtlsRole=w?{active:"passive",passive:"active"}[k]:k}}}function y(_,x){return _&&_.type==="answer"&&x?new i({type:_.type,sdp:_.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+x)}):_}return Vm=d,Vm}var zm,qw;function U8(){if(qw)return zm;qw=1;var r=A&&A.__extends||function(){var T=function(R,U){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,F){$.__proto__=F}||function($,F){for(var M in F)Object.prototype.hasOwnProperty.call(F,M)&&($[M]=F[M])},T(R,U)};return function(R,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");T(R,U);function $(){this.constructor=R}R.prototype=U===null?Object.create(U):($.prototype=U.prototype,new $)}}(),t=A&&A.__read||function(T,R){var U=typeof Symbol=="function"&&T[Symbol.iterator];if(!U)return T;var $=U.call(T),F,M=[],Y;try{for(;(R===void 0||R-- >0)&&!(F=$.next()).done;)M.push(F.value)}catch(O){Y={error:O}}finally{try{F&&!F.done&&(U=$.return)&&U.call($)}finally{if(Y)throw Y.error}}return M},e=A&&A.__spreadArray||function(T,R){for(var U=0,$=R.length,F=T.length;U<$;U++,F++)T[F]=R[U];return T},n=D1(),i=b3(),a=An,o=a.getSdpFormat,s=a.updatePlanBTrackIdsToSSRCs,l=a.updateUnifiedPlanTrackIdsToSSRCs,c=Dt,u=c.delegateMethods,d=c.interceptEvent,v=c.proxyProperties,p=o()==="unified",y=p?l:s,_=function(T){r(R,T);function R(U){var $=T.call(this)||this;d($,"datachannel"),d($,"iceconnectionstatechange"),d($,"signalingstatechange"),d($,"track");var F=new RTCPeerConnection(U);return Object.defineProperties($,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:F},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new i},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),F.addEventListener("datachannel",function(M){k(M.channel),$.dispatchEvent(M)}),F.addEventListener("iceconnectionstatechange",function(){for(var M=[],Y=0;Y<arguments.length;Y++)M[Y]=arguments[Y];$._isClosed||$.dispatchEvent.apply($,e([],t(M)))}),F.addEventListener("signalingstatechange",function(){for(var M=[],Y=0;Y<arguments.length;Y++)M[Y]=arguments[Y];$._isClosed||(F.signalingState==="stable"&&($._appliedTracksToSSRCs=new Map($._tracksToSSRCs)),!$._pendingLocalOffer&&!$._pendingRemoteOffer&&$.dispatchEvent.apply($,e([],t(M))))}),F.addEventListener("track",function(M){$._pendingRemoteOffer=null,$.dispatchEvent(M)}),v(RTCPeerConnection.prototype,$,F),$}return Object.defineProperty(R.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),R.prototype.addIceCandidate=function(U){var $=this;return this.signalingState==="have-remote-offer"?this._signalingStateLatch.when("low").then(function(){return $._peerConnection.addIceCandidate(U)}):this._peerConnection.addIceCandidate(U)},R.prototype.createOffer=function(U){var $=this;if(U=Object.assign({},U),U.offerToReceiveVideo&&!this._audioTransceiver&&!(p&&S(this,"audio"))){delete U.offerToReceiveAudio;try{this._audioTransceiver=p?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(F){return Promise.reject(F)}}if(U.offerToReceiveVideo&&!this._videoTransceiver&&!(p&&S(this,"video"))){delete U.offerToReceiveVideo;try{this._videoTransceiver=p?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(F){return Promise.reject(F)}}return this._peerConnection.createOffer(U).then(function(F){return $._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:F.type,sdp:y($._tracksToSSRCs,F.sdp)})})},R.prototype.createAnswer=function(U){var $=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return $._signalingStateLatch.lower(),$._peerConnection.createAnswer()}).then(function(F){return $._pendingRemoteOffer=null,$._rolledBackTracksToSSRCs.clear(),p?new RTCSessionDescription({type:F.type,sdp:y($._tracksToSSRCs,F.sdp)}):F},function(F){throw $._pendingRemoteOffer=null,F}):this._peerConnection.createAnswer(U).then(function(F){return $._rolledBackTracksToSSRCs.clear(),p?new RTCSessionDescription({type:F.type,sdp:y($._tracksToSSRCs,F.sdp)}):F})},R.prototype.createDataChannel=function(U,$){var F=this._peerConnection.createDataChannel(U,$);return k(F),F},R.prototype.removeTrack=function(U){U.replaceTrack(null),this._peerConnection.removeTrack(U)},R.prototype.setLocalDescription=function(U){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),x(this,!0,U)},R.prototype.setRemoteDescription=function(U){return this._rolledBackTracksToSSRCs.clear(),x(this,!1,U)},R.prototype.close=function(){var U=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout(function(){U.dispatchEvent(new Event("iceconnectionstatechange")),U.dispatchEvent(new Event("signalingstatechange"))}))},R}(n);u(RTCPeerConnection.prototype,_.prototype,"_peerConnection");function x(T,R,U){function $(j){R?T._pendingLocalOffer=j:T._pendingRemoteOffer=j}function F(){R?T._pendingLocalOffer=null:T._pendingRemoteOffer=null}var M=R?T._pendingLocalOffer:T._pendingRemoteOffer,Y=R?T._pendingRemoteOffer:T._pendingLocalOffer,O=R?"have-local-offer":"have-remote-offer",N=R?"setLocalDescription":"setRemoteDescription";if(!R&&Y&&U.type==="answer")return w(T,U);if(U.type==="offer"){if(T.signalingState!==O&&T.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+(R?"local":"remote")+`
        offer in state `+T.signalingState));!M&&T._signalingStateLatch.state==="low"&&T._signalingStateLatch.raise();var W=T.signalingState;return $(U),T.signalingState!==W?Promise.resolve().then(function(){return T.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}else if(U.type==="rollback")return T.signalingState!==O?Promise.reject(new Error(`Cannot rollback 
        `+(R?"local":"remote")+" description in "+T.signalingState)):(F(),T._rolledBackTracksToSSRCs=new Map(T._tracksToSSRCs),T._tracksToSSRCs=new Map(T._appliedTracksToSSRCs),Promise.resolve().then(function(){return T.dispatchEvent(new Event("signalingstatechange"))}));return T._peerConnection[N](U)}function w(T,R){var U=T._pendingLocalOffer;return T._peerConnection.setLocalDescription(U).then(function(){return T._pendingLocalOffer=null,T.setRemoteDescription(R)}).then(function(){return T._signalingStateLatch.lower()})}function S(T,R){return!!T.getTransceivers().find(function(U){var $=U.receiver,F=$===void 0?{}:$,M=F.track,Y=M===void 0?{}:M;return Y.kind===R})}function k(T){return Object.defineProperties(T,{maxPacketLifeTime:{value:T.maxPacketLifeTime===65535?null:T.maxPacketLifeTime},maxRetransmits:{value:T.maxRetransmits===65535?null:T.maxRetransmits}})}return zm=_,zm}if(typeof RTCPeerConnection=="function"){var $8=Dt.guessBrowser;switch($8()){case"chrome":pc.exports=F8();break;case"firefox":pc.exports=B8();break;case"safari":pc.exports=U8();break;default:pc.exports=RTCPeerConnection;break}}else pc.exports=function(){throw new Error("RTCPeerConnection is not supported")};var V8=pc.exports,vu={exports:{}};if(typeof RTCSessionDescription=="function"){var z8=Dt.guessBrowser;switch(z8()){case"chrome":vu.exports=d3();break;case"firefox":vu.exports=S3();break;default:vu.exports=RTCSessionDescription;break}}else vu.exports=function(){throw new Error("RTCSessionDescription is not supported")};var W8=vu.exports,x3={};Object.defineProperties(x3,{getStats:{enumerable:!0,value:T8},getUserMedia:{enumerable:!0,value:C8},MediaStream:{enumerable:!0,value:f3},MediaStreamTrack:{enumerable:!0,value:L8},RTCIceCandidate:{enumerable:!0,value:O8},RTCPeerConnection:{enumerable:!0,value:V8},RTCSessionDescription:{enumerable:!0,value:W8}});var Ds=x3,F1=function(t,e){if(t&&e)if(t.super_=e,typeof Object.create=="function")t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{var n=function(){function i(){}return i}();n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},q8=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};function H8(){return/Android/.test(navigator.userAgent)}function k3(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function P3(){return k3()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function T3(){return k3()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}function G8(){return P3()||T3()}function K8(){return/Mobi/.test(navigator.userAgent)}function Q8(r){return r==="chrome"&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")}function Y8(r){if(r!=="chrome")return null;if("brave"in navigator)return"brave";var t=X8(navigator.userAgent),e=t.reduce(function(o,s){return o.replace(s,"")},navigator.userAgent),n=e.match(/[^\s]+/g)||[],i=q8(n.map(function(o){return o.split("/")[0].toLowerCase()})),a=i.slice(2);return a.find(function(o){return!["chrome","mobile","safari"].includes(o)})||null}function J8(r){return r!=="safari"?null:"brave"in navigator?"brave":["edge","edg"].find(function(t){return navigator.userAgent.toLowerCase().includes(t)})||null}function X8(r){for(var t=[],e=[],n=0;n<r.length;n++)if(r[n]==="(")t.push(n);else if(r[n]===")"&&t.length>0){var i=t.pop();t.length===0&&e.push(r.substring(i,n+1))}return e}var Fs={isAndroid:H8,isIOS:G8,isIpad:P3,isIphone:T3,isMobile:K8,isNonChromiumEdge:Q8,mobileWebKitBrowser:J8,rebrandedChromeBrowser:Y8};function Z8(r){return r=typeof r=="number"?r:0,new Promise(function(t){return setTimeout(t,r)})}function ej(r,t,e){e=typeof e=="number"?e:250;var n=r.createMediaStreamSource(t),i=r.createAnalyser();i.fftSize=2048,n.connect(i);var a=new Uint8Array(i.fftSize),o=!1;setTimeout(function(){o=!0},e);function s(){return o?Promise.resolve(!0):(i.getByteTimeDomainData(a),a.some(function(l){return l!==128&&l!==0})?Promise.resolve(!1):Z8().then(s))}return s().then(function(l){return n.disconnect(),l},function(l){throw n.disconnect(),l})}var E3=ej,Wm,Hw;function Vp(){if(Hw)return Wm;Hw=1;var r=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,t=function(){function e(n){n=Object.assign({AudioContext:r},n),Object.defineProperties(this,{_AudioContext:{value:n.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:e}})}return e.prototype.getOrCreate=function(n){if(!this._holders.has(n)&&(this._holders.add(n),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},e.prototype.release=function(n){this._holders.has(n)&&(this._holders.delete(n),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},e}();return Wm=new t,Wm}var tj=E3,rj=3,nj=250;function ij(r){var t=Vp(),e={},n=t.getOrCreate(e),i=rj;function a(){return i--,tj(n,r.srcObject,nj).then(function(o){return o?i>0?a():!0:!1}).catch(function(){return!0})}return a().finally(function(){t.release(e)})}var C3=ij,Td=Me.defer,aj=function(){function r(){Object.defineProperties(this,{_audio:{value:Td(),writable:!0},_video:{value:Td(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return r.prototype.resolveDeferred=function(t){t==="audio"?this._audio.resolve():this._video.resolve()},r.prototype.startDeferred=function(t){t==="audio"?this._audio=Td():this._video=Td()},r.prototype.whenResolved=function(t){return t==="audio"?this._audio.promise:this._video.promise},r}(),L3=new aj,oj=yn.EventEmitter,sj=Me.hidePrivateAndCertainPublicPropertiesInClass,df=sj(oj,["domain"]),cj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),lj=df,O3=Me,uj=O3.buildLogLevels,fj=O3.valueToJSON,dj=zt.DEFAULT_LOG_LEVEL,hj=Da,pj=0,vj=function(r){cj(t,r);function t(e,n,i){var a=this;i=Object.assign({name:e,log:null,logLevel:dj},i),a=r.call(this)||this;var o=String(i.name),s=uj(i.logLevel),l=i.log?i.log.createLog("media",a):new hj("media",a,s,i.loggerName);return Object.defineProperties(a,{_instanceId:{value:++pj},_log:{value:l},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:o}}),a}return t.prototype.toJSON=function(){return fj(this)},t}(lj),B1=vj,mj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gj=Fs.isIOS,yj=Ds.MediaStream,A3=Me,_j=A3.waitForEvent,wj=A3.waitForSometime,bj=L3,Sj=B1,xj=function(r){mj(t,r);function t(e,n){var i=this;n=Object.assign({playPausedElementsIfNotBackgrounded:gj()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},n),i=r.call(this,e.id,e.kind,n)||this;var a=!1;if(n=Object.assign({MediaStream:yj},n),typeof n.MediaStream!="function")throw new Error("MediaTrack received an invalid MediaStream constructor: "+n.MediaStream);return Object.defineProperties(i,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return a},set:function(o){a=o}},_playPausedElementsIfNotBackgrounded:{value:n.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:n.workaroundWebKitBug212780||n.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement},isStarted:{enumerable:!0,get:function(){return a}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||e.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),i._initialize(),i}return t.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},t.prototype._initialize=function(){var e=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack&&this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("ended",function n(){e._end(),e.mediaStreamTrack.removeEventListener("ended",n)}):this.mediaStreamTrack&&(this.mediaStreamTrack.onended=function(){e._end(),e.mediaStreamTrack.onended=null}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},t.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},t.prototype.attach=function(e){var n=this;if(typeof e=="string"?e=this._selectElement(e):e||(e=this._createElement()),this._log.debug("Attempting to attach to element:",e),e=this._attach(e),this._shouldShimAttachedElements&&!this._elShims.has(e)){var i=this._playPausedElementsIfNotBackgrounded?function(){return kj(e,n._log)}:null;this._elShims.set(e,Pj(e,i))}return e},t.prototype._attach=function(e,n){n===void 0&&(n=this.processedTrack||this.mediaStreamTrack);var i=e.srcObject;i instanceof this._MediaStream||(i=new this._MediaStream);var a=n.kind==="audio"?"getAudioTracks":"getVideoTracks";return i[a]().forEach(function(o){i.removeTrack(o)}),i.addTrack(n),this._mapMediaElement&&(this._log.debug("Mapping element using mapMediaElement before attaching media to element"),this._mapMediaElement(e)),e.srcObject=i,e.autoplay=!0,e.playsInline=!0,this._attachments.has(e)||this._attachments.add(e),e},t.prototype._selectElement=function(e){var n=document.querySelector(e);if(!n)throw new Error("Selector matched no element: "+e);return n},t.prototype._updateElementsMediaStreamTrack=function(){var e=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(n){return e._attach(n)})},t.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},t.prototype.detach=function(e){var n;return typeof e=="string"?n=[this._selectElement(e)]:e?n=[e]:n=this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",n),this._detachElements(n),e?n[0]:n},t.prototype._detachElements=function(e){return e.map(this._detachElement.bind(this))},t.prototype._detachElement=function(e){if(!this._attachments.has(e))return e;var n=e.srcObject;if(n instanceof this._MediaStream&&n.removeTrack(this.processedTrack||this.mediaStreamTrack),this._disposeMediaElement&&(this._log.debug("Disposing element using disposeMediaElement after removing media from element"),this._disposeMediaElement(e)),this._attachments.delete(e),this._shouldShimAttachedElements&&this._elShims.has(e)){var i=this._elShims.get(e);i.unShim(),this._elShims.delete(e)}return e},t.prototype._getAllAttachedElements=function(){var e=[];return this._attachments.forEach(function(n){e.push(n)}),e},t}(Sj);function kj(r,t){var e=r.tagName.toLowerCase();t.warn("Unintentionally paused:",r),Promise.race([_j(document,"visibilitychange"),wj(1e3)]).then(function(){document.visibilityState==="visible"&&bj.whenResolved("audio").then(function(){return t.info("Playing unintentionally paused <"+e+"> element"),t.debug("Element:",r),r.play()}).then(function(){t.info("Successfully played unintentionally paused <"+e+"> element"),t.debug("Element:",r)}).catch(function(n){t.warn("Error while playing unintentionally paused <"+e+"> element:",{error:n,el:r})})})}function Pj(r,t){t===void 0&&(t=null);var e=r.pause,n=r.play,i=!1;r.pause=function(){return i=!0,e.call(r)},r.play=function(){return i=!1,n.call(r)};var a=t?function(){i||t()}:null;return a&&r.addEventListener("pause",a),{pausedIntentionally:function(){return i},unShim:function(){r.pause=e,r.play=n,a&&r.removeEventListener("pause",a)}}}var N3=xj,Tj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ej=N3,Cj=function(r){Tj(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.attach=function(){return r.prototype.attach.apply(this,arguments)},t.prototype.detach=function(){return r.prototype.detach.apply(this,arguments)},t}(Ej),R3=Cj,K0=null,Lj=3,Gw=50,Kw=250,Qw=50;function Oj(r){try{var t=K0.getContext("2d");t.drawImage(r,0,0,Qw,Gw);var e=t.getImageData(0,0,Qw,Gw),n=e.data.filter(function(a,o){return(o+1)%4}),i=Math.max.apply(Math,n);return i===0}catch(a){return console.log("Error checking silence: ",a),!1}}function Aj(r){return K0=K0||document.createElement("canvas"),new Promise(function(t){var e=Lj;setTimeout(function n(){return e--,Oj(r)?e>0?setTimeout(n,Kw):t(!0):t(!1)},Kw)})}var j3=Aj,Nj=function(){function r(t){var e=this;t===void 0&&(t=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){e._emitVisible(document.visibilityState==="visible")}}});for(var n=0;n<t;n++)this._listeners.push([])}return r.prototype.clear=function(){for(var t=this._listeners.length,e=0;e<t;e++)this._listeners[e]=[]},r.prototype._listenerCount=function(){return this._listeners.reduce(function(t,e){return t+e.length},0)},r.prototype._emitVisible=function(t){for(var e=this,n=Promise.resolve(),i=function(o){n=n.then(function(){return e._emitVisiblePhase(o,t)})},a=1;a<=this._listeners.length;a++)i(a);return n},r.prototype._emitVisiblePhase=function(t,e){var n=this._listeners[t-1];return Promise.all(n.map(function(i){var a=i(e);return a instanceof Promise?a:Promise.resolve(a)}))},r.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},r.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},r.prototype.onVisibilityChange=function(t,e){if(typeof t!="number"||t<=0||t>this._listeners.length)throw new Error("invalid phase: ",t);var n=this._listeners[t-1];return n.push(e),this._listenerCount()===1&&this._start(),this},r.prototype.offVisibilityChange=function(t,e){if(typeof t!="number"||t<=0||t>this._listeners.length)throw new Error("invalid phase: ",t);var n=this._listeners[t-1],i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this._listenerCount()===0&&this._stop()),this},r}(),U1=new Nj(2),Rj=E3;function jj(r,t,e,n,i){n=typeof n=="number"?n:3;var a=0,o=Vp(),s={},l=o.getOrCreate(s);function c(){return t(e).then(function(u){var d=e.audio?Rj(l,u,i).catch(function(v){return r.warn("Encountered an error while detecting silence",v),!0}):Promise.resolve(!1);return d.then(function(v){if(v){if(n<=0)return r.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),u}else return r.info("Got a non-silent audio MediaStreamTrack; returning it."),u;return r.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++a+"."),u.getTracks().forEach(function(p){return p.stop()}),n--,c()})})}return c().then(function(u){return o.release(s),u},function(u){throw o.release(s),u})}var I3=jj,Ij=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yw=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Jw=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},Mj=yn.EventEmitter,Dj=function(r){Ij(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_queuedEvents:{value:new Map}}),e}return t.prototype.dequeue=function(e){var n=this,i=!0;if(!e)return this._queuedEvents.forEach(function(o,s){i=this.dequeue(s)&&i},this),i;var a=this._queuedEvents.get(e)||[];return this._queuedEvents.delete(e),a.reduce(function(o,s){return n.emit.apply(n,Jw([],Yw([e].concat(s))))&&o},i)},t.prototype.queue=function(){var e=[].slice.call(arguments);if(this.emit.apply(this,Jw([],Yw(e))))return!0;var n=e[0];return this._queuedEvents.has(n)||this._queuedEvents.set(n,[]),this._queuedEvents.get(n).push(e.slice(1)),!1},t}(Mj),M3=Dj,Fj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bj=M3,Uj=function(r){Fj(t,r);function t(e,n){var i=r.call(this)||this;return Object.defineProperties(i,{id:{enumerable:!0,value:e},kind:{enumerable:!0,value:n}}),i}return t.prototype.stop=function(){this.emit("stopped")},t}(Bj),D3=Uj,$j=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vj=D3,zj=function(r){$j(t,r);function t(e,n){var i=r.call(this,e,n.kind)||this;return Object.defineProperties(i,{_track:{value:n,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),i}return t.prototype.stop=function(){this.track.stop(),r.prototype.stop.call(this)},t}(Vj),F3=zj,Wj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qj=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Hj=F3,Gj=function(r){Wj(t,r);function t(e){var n=r.call(this,e.id,e)||this;return Object.defineProperties(n,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return n.queue("muted")}],["unmute",function(){return n.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),n._reemitMediaStreamTrackEvents(),n}return t.prototype._reemitMediaStreamTrackEvents=function(e){e===void 0&&(e=this._track);var n=this,i=n._eventsToReemitters,a=n._track;if(e.addEventListener?i.forEach(function(s,l){return e.addEventListener(l,s)}):i.forEach(function(s,l){e["on"+l]=s}),a!==e&&(i.forEach(function(s,l){return a.removeEventListener(l,s)}),a.muted!==e.muted)){var o=i.get(e.muted?"mute":"unmute");o()}},t.prototype.clone=function(){var e=new t(this.track.clone());return this._clones.add(e),e},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.setMediaStreamTrack=function(e){var n=this,i=Array.from(this._clones),a=Array.from(this._senders);return Promise.all(i.map(function(o){return o.setMediaStreamTrack(e.clone())}).concat(a.map(function(o){return n._replaceTrack(o,e)}))).finally(function(){n._reemitMediaStreamTrackEvents(e),n._track=e})},t.prototype.addSender=function(e,n){return this._senders.add(e),n&&this._senderToPublisherHintCallbacks.set(e,n),this},t.prototype.removeSender=function(e){return this._senders.delete(e),this._senderToPublisherHintCallbacks.delete(e),this},t.prototype.setPublisherHint=function(e){var n=qj(Array.from(this._senderToPublisherHintCallbacks.values()),1),i=n[0];return i?i(e):Promise.resolve("COULD_NOT_APPLY_HINT")},t.prototype._replaceTrack=function(e,n){var i=this;return e.replaceTrack(n).then(function(a){return i.setPublisherHint(null).catch(function(){}),i.emit("replaced"),a})},t}(Hj),B3=Gj,Kj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qj=Ds.getUserMedia,Yj=Fs.isIOS,zp=Me,Xw=zp.capitalize,Jj=zp.defer,Xj=zp.waitForSometime,Zj=zp.waitForEvent,eI=zt.typeErrors.ILLEGAL_INVOKE,tI=C3,rI=j3,Zw=U1,e5=L3,nI=I3,iI=B3;function aI(r){return function(t){Kj(e,t);function e(n,i){var a=this,o=Yj()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string";i=Object.assign({getUserMedia:Qj,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:o,gUMSilentTrackWorkaround:nI},i);var s=new iI(n),l=s.kind;return a=t.call(this,s,i)||this,Object.defineProperties(a,{_constraints:{value:typeof i[l]=="object"?i[l]:{},writable:!0},_getUserMedia:{value:i.getUserMedia},_gUMSilentTrackWorkaround:{value:i.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return a.emit("muted",a)}],["unmuted",function(){return a.emit("unmuted",a)}]])},_workaroundWebKitBug1208516:{value:i.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:i.isCreatedByCreateLocalTracks},_noiseCancellation:{value:i.noiseCancellation||null},_trackSender:{value:s},id:{enumerable:!0,value:s.id},isEnabled:{enumerable:!0,get:function(){return s.enabled}},isMuted:{enumerable:!0,get:function(){return s.muted}},isStopped:{enumerable:!0,get:function(){return s.readyState==="ended"}}}),a._workaroundWebKitBug1208516&&(a._workaroundWebKitBug1208516Cleanup=t5(a)),a._reemitTrackSenderEvents(),a}return e.prototype._end=function(){var n=this;this._didCallEnd||(t.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach(function(i,a){return n._trackSender.removeListener(a,i)}),this.emit("stopped",this))},e.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),t.prototype._initialize.call(this)},e.prototype._reacquireTrack=function(n){var i,a=this,o=a._getUserMedia,s=a._gUMSilentTrackWorkaround,l=a._log,c=a.mediaStreamTrack.kind;l.info("Re-acquiring the MediaStreamTrack"),l.debug("Constraints:",n);var u=Object.assign({audio:!1,video:!1},(i={},i[c]=n,i)),d=this._workaroundWebKitBug1208516Cleanup?s(l,o,u):o(u);return d.then(function(v){return v.getTracks()[0]})},e.prototype._reemitTrackSenderEvents=function(){var n=this;this._eventsToReemitters.forEach(function(i,a){return n._trackSender.on(a,i)}),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},e.prototype._restart=function(n){var i=this,a=this._log;return n=n||this._constraints,this._stop(),this._reacquireTrack(n).catch(function(o){throw a.error("Failed to re-acquire the MediaStreamTrack:",{error:o,constraints:n}),o}).then(function(o){return a.info("Re-acquired the MediaStreamTrack"),a.debug("MediaStreamTrack:",o),i._constraints=Object.assign({},n),i._setMediaStreamTrack(o)})},e.prototype._setMediaStreamTrack=function(n){var i=this;return n.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){i._unprocessedTrack=n}):this._trackSender.setMediaStreamTrack(n).catch(function(a){i._log.warn("setMediaStreamTrack failed:",{error:a,mediaStreamTrack:n})})).then(function(){i._initialize(),i._getAllAttachedElements().forEach(function(a){return i._attach(a)})})},e.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},e.prototype.enable=function(n){return n=typeof n=="boolean"?n:!0,n!==this.mediaStreamTrack.enabled&&(this._log.info((n?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=n,this.emit(n?"enabled":"disabled",this)),this},e.prototype.disable=function(){return this.enable(!1)},e.prototype.restart=function(n){var i=this,a=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(eI("restart","can only be called on a"+(" Local"+Xw(a)+"Track that is created using createLocalTracks")+(" or createLocal"+Xw(a)+"Track.")));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var o=this._restart(n);return this._workaroundWebKitBug1208516&&(o=o.finally(function(){i._workaroundWebKitBug1208516Cleanup=t5(i)})),o},e.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},e}(r)}function t5(r){var t=r._log,e=r.kind,n=r._noiseCancellation,i={audio:tI,video:rI}[e],a=function(){return n?n.sourceTrack:r.mediaStreamTrack},o=r._dummyEl,s=a(),l=null;function c(){return o.play().then(function(){return i(o)}).then(function(x){return x?t.warn("Silence detected"):t.info("Non-silence detected"),x}).catch(function(x){t.warn("Failed to detect silence:",x)}).finally(function(){r.processedTrack||o.pause()})}function u(){var x=r._workaroundWebKitBug1208516Cleanup,w=r.isStopped,S=w&&!!x,k=a().muted;return Promise.resolve().then(function(){return document.visibilityState==="visible"&&!l&&(k||S||c())})}function d(){return Promise.race([Zj(s,"unmute"),Xj(50)]).then(function(){return u()}).then(function(x){x&&!l&&(l=Jj(),r._restart().finally(function(){o=r._dummyEl,y(),s=a(),p(),l.resolve(),l=null}).catch(function(S){t.error("failed to restart track: ",S)}));var w=l&&l.promise||Promise.resolve();return w.finally(function(){return e5.resolveDeferred(e)})}).catch(function(x){t.error("error in maybeRestart: "+x.message)})}function v(){var x=r._log,w=r.kind;x.info("Muted"),x.debug("LocalMediaTrack:",r),e5.startDeferred(w)}function p(){s.addEventListener?(s.addEventListener("ended",d),s.addEventListener("mute",v),s.addEventListener("unmute",d)):(s.onended=d,s.onmute=v,s.onunmute=d)}function y(){s.removeEventListener?(s.removeEventListener("ended",d),s.removeEventListener("mute",v),s.removeEventListener("unmute",d)):(s.onended=null,s.onmute=null,s.onunmute=null)}var _=function(x){return x?d():!1};return Zw.onVisibilityChange(1,_),p(),function(){Zw.offVisibilityChange(1,_),y()}}var U3=aI,oI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sI=Fs.isIOS,cI=C3,lI=Dt.isIOSChrome,uI=R3,fI=U3,dI=fI(uI),hI=function(r){oI(t,r);function t(e,n){var i=this,a=(n==null?void 0:n.noiseCancellation)||null;i=r.call(this,e,n)||this;var o=i._log,s=e.label,l=s===void 0?"":s,c=e.getSettings(),u=c.deviceId,d=u===void 0?"":u,v=c.groupId,p=v===void 0?"":v;return Object.defineProperties(i,{_currentDefaultDeviceInfo:{value:{deviceId:d,groupId:p,label:l},writable:!0},_enumerateDevices:{value:typeof(n==null?void 0:n.enumerateDevices)=="function"?n.enumerateDevices:navigator.mediaDevices.enumerateDevices},_defaultDeviceCaptureMode:{value:(!sI()||a)&&i._isCreatedByCreateLocalTracks&&typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.addEventListener=="function"&&(typeof(n==null?void 0:n.enumerateDevices)=="function"||typeof navigator.mediaDevices.enumerateDevices=="function")?(n==null?void 0:n.defaultDeviceCaptureMode)||"auto":"manual"},_onDeviceChange:{value:function(){i._enumerateDevices().then(function(y){var _=y.find(function(x){var w=x.deviceId,S=x.kind;return S==="audioinput"&&w!=="default"});_&&["deviceId","groupId"].some(function(x){return _[x]!==i._currentDefaultDeviceInfo[x]})&&(o.info("Default device changed, restarting the LocalAudioTrack"),o.debug('Old default device: "'+i._currentDefaultDeviceInfo.deviceId+'" => "'+i._currentDefaultDeviceInfo.label+'"'),o.debug('New default device: "'+_.deviceId+'" => "'+_.label+'"'),i._currentDefaultDeviceInfo=_,i._restartDefaultDevice().catch(function(x){return o.warn("Failed to restart: "+x.message)}))},function(y){o.warn("Failed to run enumerateDevices(): "+y.message)})}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:a,writable:!1}}),o.debug("defaultDeviceCaptureMode:",i._defaultDeviceCaptureMode),i._maybeRestartOnDefaultDeviceChange(),i}return t.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},t.prototype.attach=function(e){return e=r.prototype.attach.call(this,e),e.muted=!0,e},t.prototype._end=function(){return r.prototype._end.apply(this,arguments)},t.prototype._maybeRestartOnDefaultDeviceChange=function(){var e=this,n=this,i=n._constraints,a=n._defaultDeviceCaptureMode,o=n._log,s=this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack,l=s.getSettings().deviceId,c=function(d){return d!==l||d==="default"},u=function d(v){return v===void 0&&(v={}),typeof v=="string"?c(v):Array.isArray(v)?v.every(c):v.exact?d(v.exact):v.ideal?d(v.ideal):!0}(i.deviceId);a==="auto"&&u?this._restartOnDefaultDeviceChangeCleanup||(o.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){o.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",e._onDeviceChange),e._restartOnDefaultDeviceChangeCleanup=null}):(o.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},t.prototype._reacquireTrack=function(e){var n=this;return this._log.debug("_reacquireTrack: ",e),this.noiseCancellation?this.noiseCancellation.reacquireTrack(function(){return r.prototype._reacquireTrack.call(n,e)}):r.prototype._reacquireTrack.call(this,e)},t.prototype._restartDefaultDevice=function(){var e=this,n=Object.assign({},this._constraints),i=Object.assign({},n,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(i).then(function(){e._constraints=n,e._maybeRestartOnDefaultDeviceChange()})},t.prototype._setMediaStreamTrack=function(e){var n=this,i=this,a=i._log,o=i.noiseCancellation,s=r.prototype._setMediaStreamTrack.call(this,e);return lI()&&o&&(a.debug("iOS Chrome detected, checking if the restarted Krisp audio is silent"),s=s.then(function(){return cI(n._dummyEl)}).then(function(l){return a.debug("Krisp audio is "+(l?"silent, using source audio":"not silent")),l&&o.disablePermanently().then(function(){return r.prototype._setMediaStreamTrack.call(n,o.sourceTrack)})})),s},t.prototype.disable=function(){return r.prototype.disable.apply(this,arguments)},t.prototype.enable=function(){return r.prototype.enable.apply(this,arguments)},t.prototype.restart=function(){return r.prototype.restart.apply(this,arguments)},t.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),r.prototype.stop.apply(this,arguments)},t}(dI),pI=hI,vI=F1,$3=pI;function $1(r,t){var e=new $3(r,t);return Object.setPrototypeOf(e,$1.prototype),e}vI($1,$3);var mI=$1,V3=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},gI=zt.DEFAULT_FRAME_RATE;function yI(r,t){var e=V3(r.srcObject.getVideoTracks(),1),n=e[0],i=n.getSettings().frameRate,a=i===void 0?gI:i,o,s=new ReadableStream({start:function(c){o=setInterval(function(){return c.enqueue()},1e3/a)}}),l=new TransformStream({transform:function(){return t()}});return s.pipeThrough(l).pipeTo(new WritableStream).then(function(){}),function(){clearInterval(o)}}function _I(r,t,e){var n=V3(r.srcObject.getVideoTracks(),1),i=n[0],a=new MediaStreamTrackProcessor({track:i}).readable,o=new MediaStreamTrackGenerator({kind:"video"}),s=!1,l=new TransformStream({transform:function(c,u){var d=e==="videoframe"?t(c):Promise.resolve(c.close()).then(t);return d.finally(function(){s&&u.terminate()})}});return a.pipeThrough(l).pipeTo(o.writable).then(function(){}),function(){s=!0}}var wI=typeof MediaStreamTrackGenerator=="function"&&typeof MediaStreamTrackProcessor=="function"?_I:yI,bI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),SI=yn.EventEmitter,xI=zt.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,kI=function(r){bI(t,r);function t(e){var n=r.call(this)||this;return Object.defineProperties(n,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:e},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),n.on("add",function(i){n._lastStatsSaveTime=Date.now(),n._lastStatsPublishTime=Date.now(),n._processorInfo=i,n._stats=[],n._reemitEvent("add",n._getEventData())}),n.on("remove",function(){var i=n._getEventData();n._lastStatsSaveTime=null,n._lastStatsPublishTime=null,n._processorInfo=null,n._stats=null,n._reemitEvent("remove",i)}),n.on("start",function(){n._reemitEvent("start",n._getEventData())}),n.on("stop",function(i){n._reemitEvent("stop",Object.assign({message:i},n._getEventData()))}),n.on("stats",function(){return n._maybeEmitStats()}),n}return t.prototype._getEventData=function(){if(!this._processorInfo)return{};var e=this._processorInfo,n=e.processor,i=e.captureHeight,a=e.captureWidth,o=e.inputFrameRate,s=e.isRemoteVideoTrack,l=e.inputFrameBufferType,c=e.outputFrameBufferContextType,u={captureHeight:i,captureWidth:a,inputFrameRate:o,isRemoteVideoTrack:s,inputFrameBufferType:l,outputFrameBufferContextType:c};return u.name=n._name||"VideoProcessor",["assetsPath","blurFilterRadius","debounce","fitType","isSimdEnabled","maskBlurRadius","pipeline","version"].forEach(function(d){var v=n["_"+d];typeof v<"u"&&(u[d]=v)}),Object.keys(u).forEach(function(d){var v=u[d];typeof v=="boolean"&&(u[d]=v?"true":"false")}),u},t.prototype._maybeEmitStats=function(){if(!(!this._stats||!this._processorInfo)){var e=this._processorInfo.processor._benchmark;if(e){var n=Date.now();if(!(n-this._lastStatsSaveTime<1e3)){var i={outputFrameRate:e.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(s){i[s]=e.getAverageDelay(s)}),this._lastStatsSaveTime=n,this._stats.push(i),!(n-this._lastStatsPublishTime<xI)){this._lastStatsPublishTime=n;var a=this._stats.splice(0),o=a.reduce(function(s,l,c){return Object.keys(i).forEach(function(u){s[u]||(s[u]=0),s[u]=(s[u]*c+l[u])/(c+1)}),s},{});Object.keys(o).forEach(function(s){o[s]=parseFloat(o[s].toFixed(2))}),this._reemitEvent("stats",Object.assign({},o,this._getEventData()))}}}}},t.prototype._reemitEvent=function(e,n){this._log.debug("VideoProcessor:"+e,n),this.emit("event",{name:e,data:n})},t}(SI),PI=kI,TI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EI=N3,CI=wI,LI=PI;Dt.guessBrowser;var OI=zt.DEFAULT_FRAME_RATE,V1=function(r){TI(t,r);function t(e,n){var i=r.call(this,e,n)||this;return Object.defineProperties(i,{_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_processorOptions:{value:{},writable:!0},_stopCapture:{value:function(){},writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0},_documentPipWindow:{value:null,writable:!0},_documentPipEnterListener:{value:null,writable:!0},_documentPipExitListener:{value:null,writable:!0}}),i._processorEventObserver=new(n.VideoProcessorEventObserver||LI)(i._log),i}return t.prototype._checkIfCanCaptureFrames=function(e){e===void 0&&(e=!1);var n=!0,i="",a=this.mediaStreamTrack,o=a.enabled,s=a.readyState;return o||(n=!1,i="MediaStreamTrack is disabled"),s==="ended"&&(n=!1,i="MediaStreamTrack is ended"),this.processor||(n=!1,i="VideoProcessor not detected."),!this._attachments.size&&!e&&(n=!1,i="VideoTrack is not publishing and there is no attached element."),i&&this._log.debug(i),{canCaptureFrames:n,message:i}},t.prototype._captureFrames=function(){var e=this;if(this._isCapturing){this._log.debug("Ignoring captureFrames call. Capture is already in progress");return}if(!this._checkIfCanCaptureFrames().canCaptureFrames){this._isCapturing=!1,this._log.debug("Cannot capture frames. Ignoring captureFrames call.");return}this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var n=this._processorOptions.inputFrameBufferType;this._dummyEl.play().then(function(){var i=function(a){var o=e._checkIfCanCaptureFrames();if(!o.canCaptureFrames)return a&&a.close(),e._isCapturing=!1,e._stopCapture(),e._processorEventObserver.emit("stop",o.message),e._log.debug("Cannot capture frames. Stopping capturing frames."),Promise.resolve();var s=e.mediaStreamTrack.getSettings(),l=s.width,c=l===void 0?0:l,u=s.height,d=u===void 0?0:u;e._outputFrame&&e._outputFrame.width!==c&&(e._outputFrame.width=c,e._outputFrame.height=d),e._inputFrame&&(e._inputFrame.width!==c&&(e._inputFrame.width=c,e._inputFrame.height=d),e._inputFrame.getContext("2d").drawImage(e._dummyEl,0,0,c,d));var v=a||(["video","videoframe"].includes(n)?e._dummyEl:e._inputFrame),p=null;try{p=e.processor.processFrame(v,e._outputFrame)}catch(y){e._log.debug("Exception detected after calling processFrame.",y)}return(p instanceof Promise?p:Promise.resolve(p)).then(function(){e._outputFrame&&(typeof e.processedTrack.requestFrame=="function"&&e.processedTrack.requestFrame(),e._processorEventObserver.emit("stats"))})};e._stopCapture=CI(e._dummyEl,i,n)}).catch(function(i){return e._log.error("Video element cannot be played",{error:i,track:e})})},t.prototype._initialize=function(){var e=this;r.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){r5(e,e._dummyEl)&&(e.dimensions.width=e._dummyEl.videoWidth,e.dimensions.height=e._dummyEl.videoHeight)},this._dummyEl.onresize=function(){r5(e,e._dummyEl)&&(e.dimensions.width=e._dummyEl.videoWidth,e.dimensions.height=e._dummyEl.videoHeight,e.isStarted&&(e._log.debug("Dimensions changed:",e.dimensions),e.emit(t.DIMENSIONS_CHANGED,e)))})},t.prototype._restartProcessor=function(){var e=this.processor;if(e){var n=Object.assign({},this._processorOptions);this.removeProcessor(e),this.addProcessor(e,n)}},t.prototype._start=function(e){return this.dimensions.width=e.videoWidth,this.dimensions.height=e.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(t.DIMENSIONS_CHANGED,this),r.prototype._start.call(this,e)},t.prototype.addProcessor=function(e,n){var i=this;if(!e||typeof e.processFrame!="function")throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",e),this._unmuteHandler||(this._unmuteHandler=function(){i._log.debug("mediaStreamTrack unmuted"),i.processedTrack.muted&&(i._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),i._restartProcessor())},this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler):this.mediaStreamTrack.onunmute=this._unmuteHandler.bind(this)),this._processorOptions=n||{};var a=this._processorOptions,o=a.inputFrameBufferType,s=a.outputFrameBufferContextType;if(typeof OffscreenCanvas>"u"&&o==="offscreencanvas")throw new Error("OffscreenCanvas is not supported by this browser.");if(o&&o!=="videoframe"&&o!=="video"&&o!=="canvas"&&o!=="offscreencanvas")throw new Error("Invalid inputFrameBufferType of "+o);o||(o=typeof OffscreenCanvas>"u"?"canvas":"offscreencanvas");var l=this.mediaStreamTrack.getSettings(),c=l.width,u=c===void 0?0:c,d=l.height,v=d===void 0?0:d,p=l.frameRate,y=p===void 0?OI:p;o==="offscreencanvas"&&(this._inputFrame=new OffscreenCanvas(u,v)),o==="canvas"&&(this._inputFrame=document.createElement("canvas")),this._inputFrame&&(this._inputFrame.width=u,this._inputFrame.height=v),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=u,this._outputFrame.height=v,s=s||"2d";var _=this._outputFrame.getContext(s);if(!_)throw new Error("Cannot get outputFrameBufferContextType: "+s+".");var x=typeof CanvasCaptureMediaStreamTrack<"u"&&CanvasCaptureMediaStreamTrack.prototype&&typeof CanvasCaptureMediaStreamTrack.prototype.requestFrame=="function"?0:void 0;return this.processedTrack=this._outputFrame.captureStream(x).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=e,this._processorEventObserver.emit("add",{processor:e,captureHeight:v,captureWidth:u,inputFrameRate:y,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack"),inputFrameBufferType:o,outputFrameBufferContextType:s}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},t.prototype.attach=function(){var e=r.prototype.attach.apply(this,arguments);return this._attachments.size===1&&AI(this),this.processor&&this._captureFrames(),e},t.prototype.detach=function(){var e=r.prototype.detach.apply(this,arguments);return this._attachments.size===0&&NI(this),e},t.prototype.removeProcessor=function(e){if(!e)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(e!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",e),this._stopCapture(),this._stopCapture=function(){},this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._processorOptions={},this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},t}(EI);V1.DIMENSIONS_CHANGED="dimensionsChanged";function r5(r,t){return r.dimensions.width!==t.videoWidth||r.dimensions.height!==t.videoHeight}function AI(r){!r._documentPipEnterListener&&"documentPictureInPicture"in globalThis&&globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.addEventListener=="function"&&(r._documentPipEnterListener=function(t){r._log.debug("document pip entered"),r._documentPipWindow=t.window,r._documentPipExitListener=function(){r._log.debug("document pip exited"),r._documentPipWindow=null,typeof r._onDocumentPipExit=="function"&&r._onDocumentPipExit()},t.window&&typeof t.window.addEventListener=="function"&&t.window.addEventListener("pagehide",r._documentPipExitListener),z3(r),typeof r._onDocumentPipEnter=="function"&&r._onDocumentPipEnter(t)},globalThis.documentPictureInPicture.addEventListener("enter",r._documentPipEnterListener))}function NI(r){r._documentPipEnterListener&&(globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.removeEventListener=="function"&&globalThis.documentPictureInPicture.removeEventListener("enter",r._documentPipEnterListener),r._documentPipWindow&&r._documentPipExitListener&&typeof r._documentPipWindow.removeEventListener=="function"&&r._documentPipWindow.removeEventListener("pagehide",r._documentPipExitListener),r._documentPipEnterListener=null,r._documentPipExitListener=null,r._documentPipWindow=null)}function z3(r){if(r._documentPipWindow)try{var t=new WeakSet(r._documentPipWindow.document.querySelectorAll("video"));r._attachments.forEach(function(e){t.has(e)&&e.paused&&e.play().then(function(){r._log.debug("Successfully played inadvertently paused video element in document PiP window")}).catch(function(n){r._log.debug("Failed to play inadvertently paused video element in document PiP window",n)})})}catch(e){r._log.debug("Error checking document PiP video playback:",e)}}V1._ensureDocumentPipVideosPlaying=z3;var W3=V1,RI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jI=Fs.isIOS,II=j3,MI=U3,q3=W3,DI=MI(q3),FI=function(r){RI(t,r);function t(e,n){var i=this;return n=Object.assign({workaroundSilentLocalVideo:jI()&&typeof document<"u"&&typeof document.createElement=="function"},n),i=r.call(this,e,n)||this,Object.defineProperties(i,{_workaroundSilentLocalVideo:{value:n.workaroundSilentLocalVideo?BI:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0},_pipIntersectionObserver:{value:null,writable:!0}}),i._workaroundSilentLocalVideo&&(i._workaroundSilentLocalVideoCleanup=i._workaroundSilentLocalVideo(i,document)),i}return t.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},t.prototype._onDocumentPipEnter=function(){this._log.debug("LocalVideoTrack: Setting up PiP intersection observer"),this._setupPipIntersectionObserver()},t.prototype._onDocumentPipExit=function(){this._log.debug("LocalVideoTrack: Cleaning up PiP intersection observer"),this._cleanupPipIntersectionObserver()},t.prototype._setupPipIntersectionObserver=function(){var e=this;!this._pipIntersectionObserver&&this._documentPipWindow&&(this._log.debug("LocalVideoTrack: Creating PiP intersection observer"),this._pipIntersectionObserver=new IntersectionObserver(function(n){var i=n.some(function(a){return a.isIntersecting});i&&(e._log.debug("LocalVideoTrack: Element visible in PiP, ensuring videos are playing"),q3._ensureDocumentPipVideosPlaying(e))},{threshold:.25}),this._attachments.forEach(function(n){e._log.debug("LocalVideoTrack: Observing element for PiP visibility"),e._pipIntersectionObserver.observe(n)}))},t.prototype._cleanupPipIntersectionObserver=function(){this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Disconnecting PiP intersection observer"),this._pipIntersectionObserver.disconnect(),this._pipIntersectionObserver=null)},t.prototype.attach=function(){var e=r.prototype.attach.apply(this,arguments);return this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Observing newly attached element for PiP visibility"),this._pipIntersectionObserver.observe(e)),e},t.prototype.detach=function(){var e=this,n=r.prototype.detach.apply(this,arguments),i=Array.isArray(n)?n:[n];return this._pipIntersectionObserver&&i.forEach(function(a){e._log.debug("LocalVideoTrack: Unobserving detached element from PiP visibility"),e._pipIntersectionObserver.unobserve(a)}),n},t.prototype._checkIfCanCaptureFrames=function(){return r.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},t.prototype._end=function(){return r.prototype._end.apply(this,arguments)},t.prototype._setSenderMediaStreamTrack=function(e){var n=this,i=this.mediaStreamTrack,a=e?this.processedTrack:i;return this._trackSender.setMediaStreamTrack(a).catch(function(o){return n._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:o,mediaStreamTrack:a})}).then(function(){n._unprocessedTrack=e?i:null})},t.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var e=r.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),e):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},t.prototype.removeProcessor=function(){var e=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var n=r.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return e._updateElementsMediaStreamTrack()}),n},t.prototype.disable=function(){var e=r.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),e},t.prototype.enable=function(e){e===void 0&&(e=!0);var n=r.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=e,e&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),n},t.prototype.restart=function(){var e=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var n=r.prototype.restart.apply(this,arguments);return this.processor&&(n=n.then(function(){return e._restartProcessor()})),this._workaroundSilentLocalVideo&&n.finally(function(){e._workaroundSilentLocalVideoCleanup=e._workaroundSilentLocalVideo(e,document)}),n},t.prototype._restartProcessor=function(){var e=this.processor,n=Object.assign({},this._processorOptions);return r.prototype.removeProcessor.apply(this,[e]),r.prototype.addProcessor.apply(this,[e,n]),this._setSenderMediaStreamTrack(!0)},t.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),this._cleanupPipIntersectionObserver(),r.prototype.stop.apply(this,arguments)},t}(DI);function BI(r,t){var e=r._log,n=r._dummyEl,i=r.mediaStreamTrack;function a(){r.isEnabled&&(e.info("Unmuted, checking silence"),n.play().then(function(){return II(n)}).then(function(o){if(!o){e.info("Non-silent frames detected, so no need to restart");return}return e.warn("Silence detected, restarting"),r._stop(),r._restart()}).catch(function(o){e.warn("Failed to detect silence and restart:",o)}).finally(function(){n=r._dummyEl,n&&!n.paused&&!r.processedTrack&&n.pause(),i.removeEventListener("unmute",a),i=r.mediaStreamTrack,i.addEventListener?i.addEventListener("unmute",a):i.onunmute=a}))}return i.addEventListener?i.addEventListener("unmute",a):i.onunmute=a,function(){i.removeEventListener?i.removeEventListener("unmute",a):i.onunmute=null}}var UI=FI,$I=F1,H3=UI;function z1(r,t){var e=new H3(r,t);return Object.setPrototypeOf(e,z1.prototype),e}$I(z1,H3);var VI=z1,zI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),WI=D3,qI=function(r){zI(t,r);function t(e,n,i,a){var o=r.call(this,e,"data")||this;return Object.defineProperties(o,{maxPacketLifeTime:{enumerable:!0,value:n},maxRetransmits:{enumerable:!0,value:i},ordered:{enumerable:!0,value:a}}),o}return t}(WI),G3=qI,HI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),GI=G3,KI=Me.makeUUID,QI=function(r){HI(t,r);function t(e,n,i){var a=r.call(this,KI(),e,n,i)||this;return Object.defineProperties(a,{_clones:{value:new Set},_dataChannels:{value:new Set}}),a}return t.prototype._addClone=function(e){this._clones.add(e)},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.addDataChannel=function(e){return this._dataChannels.add(e),this},t.prototype.clone=function(){var e=this,n=new t(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(n),n.once("stopped",function(){return e.removeClone(n)}),n},t.prototype.removeDataChannel=function(e){return this._dataChannels.delete(e),this},t.prototype.send=function(e){return this._dataChannels.forEach(function(n){try{n.send(e)}catch{}}),this._clones.forEach(function(n){try{n.send(e)}catch{}}),this},t.prototype.stop=function(){this._dataChannels.forEach(function(e){return e.close()}),this._clones.forEach(function(e){return e.stop()}),r.prototype.stop.call(this)},t}(GI),YI=QI,JI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),XI=B1,ZI=YI,e7=function(r){JI(t,r);function t(e){var n=this;e=Object.assign({DataTrackSender:ZI,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},e);var i=e.DataTrackSender,a=new i(e.maxPacketLifeTime,e.maxRetransmits,e.ordered);return n=r.call(this,a.id,"data",e)||this,Object.defineProperties(n,{_trackSender:{value:a},id:{enumerable:!0,value:a.id},maxPacketLifeTime:{enumerable:!0,value:e.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:e.maxRetransmits},ordered:{enumerable:!0,value:e.ordered},reliable:{enumerable:!0,value:e.maxPacketLifeTime===null&&e.maxRetransmits===null}}),n}return t.prototype.send=function(e){this._trackSender.send(e)},t}(XI),t7=e7,r7=F1,K3=t7;function W1(r){var t=new K3(r);return Object.setPrototypeOf(t,W1.prototype),t}r7(W1,K3);var n7=W1,Uc={LocalAudioTrack:mI,LocalVideoTrack:VI,LocalDataTrack:n7},Ki=A&&A.__assign||function(){return Ki=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ki.apply(this,arguments)},n5=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},i5=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},a5=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},o5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};Object.defineProperty(Mp,"__esModule",{value:!0});Mp.createLocalTracks=void 0;var i7=Xc,a7=Me.buildLogLevels,Q3=Ds,o7=Q3.getUserMedia,s7=Q3.MediaStreamTrack,q1=Uc,c7=q1.LocalAudioTrack,l7=q1.LocalDataTrack,u7=q1.LocalVideoTrack,f7=Da,H1=zt,d7=H1.DEFAULT_LOG_LEVEL,h7=H1.DEFAULT_LOGGER_NAME,p7=H1.typeErrors.INVALID_VALUE,v7=I3,m7=0;function g7(r){return n5(this,void 0,void 0,function(){var t,e,n,i,a,o,s,l,c,u,d,v,p,y=this;return i5(this,function(_){switch(_.label){case 0:if(t=!(r&&("audio"in r||"video"in r)),e=Ki({audio:t,getUserMedia:o7,loggerName:h7,logLevel:d7,LocalAudioTrack:c7,LocalDataTrack:l7,LocalVideoTrack:u7,MediaStreamTrack:s7,Log:f7,video:t},r),n="[createLocalTracks #"+ ++m7+"]",i=a7(e.logLevel),a=new e.Log("default",n,i,e.loggerName),o=Object.assign({log:a},e),delete o.name,e.audio===!1&&e.video===!1)return a.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(e.tracks)return a.info("Adding user-provided LocalTracks"),a.debug("LocalTracks:",e.tracks),[2,e.tracks];if(s={audio:typeof e.audio=="object"&&e.audio.name?{name:e.audio.name}:{defaultDeviceCaptureMode:"auto"},video:typeof e.video=="object"&&e.video.name?{name:e.video.name}:{}},s.audio.isCreatedByCreateLocalTracks=!0,s.video.isCreatedByCreateLocalTracks=!0,typeof e.audio=="object")if(typeof e.audio.workaroundWebKitBug1208516=="boolean"&&(s.audio.workaroundWebKitBug1208516=e.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in e.audio&&(l=e.audio.noiseCancellationOptions,delete e.audio.noiseCancellationOptions),!("defaultDeviceCaptureMode"in e.audio))s.audio.defaultDeviceCaptureMode="auto";else{if(["auto","manual"].every(function(x){return x!==e.audio.defaultDeviceCaptureMode}))throw p7("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);s.audio.defaultDeviceCaptureMode=e.audio.defaultDeviceCaptureMode}typeof e.video=="object"&&typeof e.video.workaroundWebKitBug1208516=="boolean"&&(s.video.workaroundWebKitBug1208516=e.video.workaroundWebKitBug1208516),typeof e.audio=="object"&&delete e.audio.name,typeof e.video=="object"&&delete e.video.name,c={audio:e.audio,video:e.video},u=typeof e.audio=="object"&&e.audio.workaroundWebKitBug180748,_.label=1;case 1:return _.trys.push([1,4,,5]),[4,u?v7(a,e.getUserMedia,c):e.getUserMedia(c)];case 2:return d=_.sent(),v=o5(o5([],a5(d.getAudioTracks())),a5(d.getVideoTracks())),a.info("Call to getUserMedia successful; got tracks:",v),[4,Promise.all(v.map(function(x){return n5(y,void 0,void 0,function(){var w,S,k;return i5(this,function(T){switch(T.label){case 0:return x.kind==="audio"&&l?[4,i7.applyNoiseCancellation(x,l,a)]:[3,2];case 1:return w=T.sent(),S=w.cleanTrack,k=w.noiseCancellation,[2,new o.LocalAudioTrack(S,Ki(Ki(Ki({},s.audio),o),{noiseCancellation:k}))];case 2:if(x.kind==="audio")return[2,new o.LocalAudioTrack(x,Ki(Ki({},s.audio),o))];T.label=3;case 3:return[2,new o.LocalVideoTrack(x,Ki(Ki({},s.video),o))]}})})}))];case 3:return[2,_.sent()];case 4:throw p=_.sent(),a.warn("Call to getUserMedia failed:",p),p;case 5:return[2]}})})}Mp.createLocalTracks=g7;var el={},Wp={};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.Timer=void 0;var y7=function(){function r(){this._end=void 0,this.start()}return r.prototype.start=function(){return this._start=Date.now(),this},r.prototype.stop=function(){return this._end=Date.now(),this},r.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:this._end===void 0?void 0:this._end-this._start}},r}();Wp.Timer=y7;var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.mosToScore=tl.calculateMOS=void 0;var s5=94.768;function _7(r,t,e){var n=r+t*2+10,i=0;switch(!0){case n<160:i=s5-n/40;break;case n<1e3:i=s5-(n-120)/10;break}switch(!0){case e<=i/2.5:i=Math.max(i-e*2.5,6.52);break;default:i=0;break}var a=1+.035*i+7e-6*i*(i-60)*(100-i);return a}tl.calculateMOS=_7;function w7(r){var t=0;return r?r>4.2?t=5:r>4?t=4:r>3.6?t=3:r>3?t=2:t=1:t=0,t}tl.mosToScore=w7;var qp={},b7=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},S7=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},x7=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};Object.defineProperty(qp,"__esModule",{value:!0});qp.getCombinedConnectionStats=void 0;function io(r,t,e,n){var i=[];return r.forEach(function(a){(n.length===0||n.includes(a.type))&&(e.length===0||e.includes(a.kind))&&typeof a[t]=="number"&&i.push(a[t])}),i}function k7(r){var t=r.publisher,e=r.subscriber;return b7(this,void 0,void 0,function(){var n,i,a,o,s,l,c,u,d,v,p,y,_,x,w;return S7(this,function(S){switch(S.label){case 0:return[4,Promise.all([t,e].map(function(k){return k.getStats()}))];case 1:return n=x7.apply(void 0,[S.sent(),2]),i=n[0],a=n[1],o=io(a,"timestamp",["audio"],["inbound-rtp"]),s=o.length>0?o[0]:0,l=io(a,"jitter",["audio"],["inbound-rtp"]).reduce(function(k,T){return Math.max(k,T)},0),c=io(a,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(k,T){return k+T},0),u=io(a,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(k,T){return k+T},0),d=io(i,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(k,T){return Math.max(k,T)},0),v=io(a,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(k,T){return Math.max(k,T)},0),p=(v||d)*1e3,y=io(i,"bytesSent",[],["candidate-pair"]).reduce(function(k,T){return k+T},0),_=io(a,"bytesReceived",[],["candidate-pair"]).reduce(function(k,T){return k+T},0),x=P7(a),w=[],a.forEach(function(k){(k.type==="local-candidate"||k.type==="remote-candidate")&&w.push(Q0(k))}),[2,{timestamp:s,jitter:l,packets:c,packetsLost:u,roundTripTime:p,bytesSent:y,bytesReceived:_,selectedIceCandidatePairStats:x,iceCandidateStats:w}]}})})}qp.getCombinedConnectionStats=k7;function Q0(r){var t=[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}];return t.reduce(function(e,n){var i=[n.key];n.altKeys&&(i=i.concat(n.altKeys));var a=i.find(function(o){return o in r});return a&&typeof r[a]===n.type&&(e[n.key]=r[a]),e},{})}function P7(r){var t=null,e=[];r.forEach(function(s){s.type==="transport"&&s.selectedCandidatePairId?t=s.selectedCandidatePairId:s.type==="candidate-pair"&&e.push(s)});var n=e.find(function(s){return s.selected||t&&s.id===t});if(!n)return null;var i=n,a=r.get(i.localCandidateId),o=r.get(i.remoteCandidateId);return!a||!o?null:{localCandidate:Q0(a),remoteCandidate:Q0(o)}}var Hp={},T7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),E7=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},C7=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},L7=yn.EventEmitter,Y3=Me,O7=function(r){T7(t,r);function t(e,n){var i=r.call(this)||this,a=null,o=e;return n=R7(n),Object.defineProperties(i,{_lock:{get:function(){return a},set:function(s){a=s}},_reachableStates:{value:N7(n)},_state:{get:function(){return o},set:function(s){o=s}},_states:{value:n},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return a!==null}},state:{enumerable:!0,get:function(){return o}}}),i.on("stateChanged",function(s){i._whenDeferreds.forEach(function(l){l.when(s,l.resolve,l.reject)})}),i}return t.prototype._whenPromise=function(e){var n=this;if(typeof e!="function")return Promise.reject(new Error("when() executor must be a function"));var i=Y3.defer();return i.when=e,this._whenDeferreds.add(i),i.promise.then(function(a){return n._whenDeferreds.delete(i),a},function(a){throw n._whenDeferreds.delete(i),a})},t.prototype.bracket=function(e,n){var i,a=this;function o(s){if(a.hasLock(i)&&a.releaseLockCompletely(i),s)throw s}return this.takeLock(e).then(function(l){return i=l,n(i)}).then(function(l){return o(),l},o)},t.prototype.hasLock=function(e){return this._lock===e},t.prototype.preempt=function(e,n,i){if(!Ed(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');var a;this.isLocked&&(a=this._lock,this._lock=null);var o=null;n&&(o=this.takeLockSync(n));var s=o?null:this.takeLockSync("preemption");return this.transition(e,o||s,i),a&&a.resolve(),s&&this.releaseLock(s),o},t.prototype.releaseLock=function(e){if(this.isLocked){if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");e.depth===0?(this._lock=null,e.resolve()):e.depth--},t.prototype.releaseLockCompletely=function(e){if(this.isLocked){if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");e.depth=0,this._lock=null,e.resolve()},t.prototype.takeLock=function(e){var n=this;if(typeof e=="object"){var i=e;return new Promise(function(s){s(n.takeLockSync(i))})}var a=e;if(this.isLocked){var o=this.takeLock.bind(this,a);return this._lock.promise.then(o)}return Promise.resolve(this.takeLockSync(a))},t.prototype.takeLockSync=function(e){var n=typeof e=="string"?null:e,i=n?n.name:e;if(n&&!this.hasLock(n)||!n&&this.isLocked)throw new Error("Could not take the lock for "+i+" because the lock for "+this._lock.name+" was not released");if(n)return n.depth++,n;var a=A7(i);return this._lock=a,a},t.prototype.transition=function(e,n,i){if(i=i||[],this.isLocked)if(n){if(!this.hasLock(n))throw new Error("Could not transition using the key for "+n.name+" because "+this._lock.name+" has the lock")}else throw new Error("You must provide the key in order to transition");else if(n)throw new Error("Key provided for "+n.name+", but the StateMachine was not locked (possibly due to preemption)");if(!Ed(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');this._state=e,this.emit.apply(this,C7([],E7(["stateChanged",e].concat(i))))},t.prototype.tryTransition=function(e,n,i){try{this.transition(e,n,i)}catch{return!1}return!0},t.prototype.when=function(e){var n=this;return this.state===e?Promise.resolve(this):Ed(this._reachableStates,this.state,e)?this._whenPromise(function(i,a,o){i===e?a(n):Ed(n._reachableStates,i,e)||o(c5(i,e))}):Promise.reject(c5(this.state,e))},t}(L7);function Ed(r,t,e){return r.get(t).has(e)}function A7(r){var t=Y3.defer();return t.name=r,t.depth=0,t}function N7(r){return Array.from(r.keys()).reduce(function(t,e){return t.set(e,J3(r,e))},new Map)}function J3(r,t,e){return e=e||new Set,r.get(t).forEach(function(n){e.has(n)||(e.add(n),J3(r,n,e).forEach(e.add,e))}),e}function R7(r){var t=new Map;for(var e in r)t.set(e,new Set(r[e]));return t}function c5(r,t){return new Error('"'+t+'" cannot be reached from "'+r+'"')}var cl=O7,j7=function(){function r(t,e){var n=this;e=Object.assign({navigator,window},e);var i=e.navigator,a=i.connection||{type:null},o=a.type,s=a.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var d=o!==n.type&&n.isOnline;o=n.type,d&&t()}},_target:{value:a}}:{_events:{value:["online"]},_listener:{value:t},_target:{value:e.window}},l=s._events,c=s._listener,u=s._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return typeof i.onLine=="boolean"?i.onLine:!0}},type:{enumerable:!0,get:function(){return a.type||null}},_listener:c,_events:l,_target:u})}return r.prototype.start=function(){var t=this;this._events.forEach(function(e){t._target.addEventListener(e,t._listener)})},r.prototype.stop=function(){var t=this;this._events.forEach(function(e){t._target.removeEventListener(e,t._listener)})},r}(),I7=j7,M7=function(){function r(t,e,n){n===void 0&&(n=!0),Object.defineProperties(this,{_delay:{value:e,writable:!0},_fn:{value:t},_timeout:{value:null,writable:!0}}),n&&this.start()}return Object.defineProperty(r.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),r.prototype.setDelay=function(t){this._delay=t},r.prototype.start=function(){var t=this;this.isSet||(this._timeout=setTimeout(function(){var e=t._fn;t.clear(),e()},this._delay))},r.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},r.prototype.reset=function(){this.clear(),this.start()},r}(),Bs=M7,qm,l5;function X3(){return l5||(l5=1,qm=WebSocket),qm}var D7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),u5=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},F7=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},B7=cl,Z3=Me,U7=Z3.buildLogLevels,$7=Z3.makeUUID,V7=Da,z7=I7,ic=Bs,W7=0,q7={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},f5={closed:"close",open:"open",waiting:"waiting"},H7=2,G7=3,K7=3,Q7=5e3,Y7=15e3,J7=5e3,X7=200,d5=1e3,Y0=3e3,J0=3001,X0=3002,Z0=3003,eP=3004,Cd=3005,ey=3006,tP=3007,h5=globalThis,Z7=h5.WebSocket?h5.WebSocket:X3(),Pi={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},eM=new Map([[Y0,Pi.TIMEOUT],[J0,Pi.TIMEOUT],[X0,Pi.FAILED],[Z0,Pi.FAILED],[eP,Pi.TIMEOUT],[ey,Pi.BUSY],[tP,Pi.TIMEOUT]]),rP=function(r){D7(t,r);function t(e,n){var i=r.call(this,"early",q7)||this;n=Object.assign({helloBody:null,maxConsecutiveFailedHellos:K7,maxConsecutiveMissedHeartbeats:G7,requestedHeartbeatTimeout:Q7,openTimeout:Y7,welcomeTimeout:J7,Log:V7,WebSocket:Z7},n);var a=U7(n.logLevel),o=new n.Log("default",i,a,n.loggerName),s=n.networkMonitor?new z7(function(){var c=s.type,u="Network changed"+(c?" to "+c:"");o.debug(u),i._close({code:eP,reason:u})}):null;Object.defineProperties(i,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:n.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:n.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++W7},_log:{value:o},_messageQueue:{value:[]},_networkMonitor:{value:s},_options:{value:n},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:e},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var l={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return i.on("stateChanged",function(c){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];c in f5&&i.emit.apply(i,F7([f5[c]],u5(u)));var v={name:c,group:"signaling",level:l[i.state]};if(c==="closed"){var p=u5(u,1),y=p[0];v.payload={reason:y},v.level=y===Pi.LOCAL?"info":"error"}i._eventObserver.emit("event",v)}),i._eventObserver.emit("event",{name:i.state,group:"signaling",level:l[i.state]}),i._connect(),i}return t.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},t.prototype._close=function(e){var n=e.code,i=e.reason;if(this.state!=="closed"){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&n!==Cd&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var a=this._log;n===d5?(a.debug("Closed"),this.transition("closed",null,[Pi.LOCAL])):(a.warn("Closed: "+n+" - "+i),n!==Cd&&this.transition("closed",null,[eM.get(n)||Pi.REMOTE]));var o=this._ws.readyState,s=this._options.WebSocket;o!==s.CLOSING&&o!==s.CLOSED&&this._ws.close(n,i)}},t.prototype._connect=function(){var e=this,n=this._log;if(this.state==="waiting")this.transition("early");else if(this.state!=="early"){n.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');return}this._ws=new this._options.WebSocket(this._serverUrl);var i=this._ws;n.debug("Created a new WebSocket:",i),i.addEventListener("close",function(o){return e._close(o)});var a=this._options.openTimeout;this._openTimeout=new ic(function(){var o="Failed to open in "+a+" ms";e._close({code:tP,reason:o})},a),i.addEventListener("open",function(){n.debug("WebSocket opened:",i),e._openTimeout.clear(),e._startHandshake(),e._networkMonitor&&e._networkMonitor.start()}),i.addEventListener("message",function(o){n.debug("Incoming: "+o.data);try{o=JSON.parse(o.data)}catch(s){e.emit("error",s);return}switch(o.type){case"bad":e._handleBad(o);break;case"busy":e._handleBusy(o);break;case"bye":break;case"msg":e._handleMessage(o);case"heartbeat":e._handleHeartbeat();break;case"welcome":e._handleWelcome(o);break;default:e._log.debug("Unknown message type: "+o.type),e.emit("error",new Error("Unknown message type: "+o.type));break}})},t.prototype._handleBad=function(e){var n=e.reason,i=this._log;if(!["connecting","open"].includes(this.state)){i.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.');return}if(this.state==="connecting"){i.warn("Closing: "+X0+" - "+n),this._close({code:X0,reason:n});return}i.debug("Error: "+n),this.emit("error",new Error(n))},t.prototype._handleBusy=function(e){var n=this,i=e.cookie,a=e.keepAlive,o=e.retryAfter,s=this._log;if(!["connecting","waiting"].includes(this.state)){s.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.');return}this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var l=o<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+o+" ms";if(o<0){s.warn("Closing: "+ey+" - "+l),this._close({code:ey,reason:l});return}var c=this._options.maxConsecutiveFailedHellos;this._hellosLeft=c,this._cookie=i||null,a?(s.warn(l),this._busyWaitTimeout=new ic(function(){return n._startHandshake()},o)):(s.warn("Closing: "+Cd+" - "+l),this._close({code:Cd,reason:l}),this._busyWaitTimeout=new ic(function(){return n._connect()},o)),this.transition("waiting",null,[a,o])},t.prototype._handleHeartbeat=function(){if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.');return}this._heartbeatTimeout.reset()},t.prototype._handleHeartbeatTimeout=function(){if(this.state==="open"){var e=this._log,n=this._options.maxConsecutiveMissedHeartbeats;e.debug("Consecutive heartbeats missed: "+n);var i="Missed "+n+' "heartbeat" messages';e.warn("Closing: "+J0+" - "+i),this._close({code:J0,reason:i})}},t.prototype._handleMessage=function(e){var n=e.body;if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.');return}this.emit("message",n)},t.prototype._handleWelcome=function(e){var n=this,i=e.negotiatedTimeout,a=this._log;if(!["connecting","waiting"].includes(this.state)){a.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.');return}this.state==="waiting"&&(a.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var o=this._options.maxConsecutiveMissedHeartbeats,s=i*o,l=i-X7;this._welcomeTimeout.clear(),this._heartbeatTimeout=new ic(function(){return n._handleHeartbeatTimeout()},s),this._messageQueue.splice(0).forEach(function(c){return n._send(c)}),this._sendHeartbeatTimeout=new ic(function(){return n._sendHeartbeat()},l),this.transition("open")},t.prototype._handleWelcomeTimeout=function(){if(this.state==="connecting"){var e=this._log;if(this._hellosLeft<=0){var n="All handshake attempts failed";e.warn("Closing: "+Y0+" - "+n),this._close({code:Y0,reason:n});return}var i=this._options.maxConsecutiveFailedHellos;e.warn("Handshake attempt "+(i-this._hellosLeft)+" failed"),this._startHandshake()}},t.prototype._send=function(e){var n=this._ws.readyState,i=this._options.WebSocket;if(n===i.OPEN){var a=JSON.stringify(e);this._log.debug("Outgoing: "+a);try{this._ws.send(a),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var o="Failed to send message";this._log.warn("Closing: "+Z0+" - "+o),this._close({code:Z0,reason:o})}}},t.prototype._sendHeartbeat=function(){this.state!=="closed"&&this._send({type:"heartbeat"})},t.prototype._sendHello=function(){var e=this._options,n=e.helloBody,i=e.requestedHeartbeatTimeout,a={id:$7(),timeout:i,type:"hello",version:H7};this._cookie&&(a.cookie=this._cookie),n&&(a.body=n),this._send(a)},t.prototype._sendOrEnqueue=function(e){var n=this;if(this.state!=="closed"){var i=this.state==="open"?function(a){return n._send(a)}:function(a){return n._messageQueue.push(a)};i(e)}},t.prototype._startHandshake=function(){var e=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),this.state==="connecting"){this._hellosLeft--,this._sendHello();var n=this._options.welcomeTimeout;this._welcomeTimeout=new ic(function(){return e._handleWelcomeTimeout()},n)}},t.prototype.close=function(){this.state!=="closed"&&(this._sendOrEnqueue({type:"bye"}),this._close({code:d5,reason:"Normal"}))},t.prototype.sendMessage=function(e){this._sendOrEnqueue({body:e,type:"msg"})},t}(B7);rP.CloseReason=Pi;var nP=rP,Fe={},tM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rM=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},nM=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},iM=function(r){tM(t,r);function t(e){var n=this,i=[].slice.call(arguments,1);n=r.apply(this,nM([],rM(i)))||this,Object.setPrototypeOf(n,t.prototype);var a=Error.apply(n,i);return a.name="TwilioError",Object.defineProperty(n,"code",{value:e,enumerable:!0}),Object.getOwnPropertyNames(a).forEach(function(o){Object.defineProperty(this,o,{value:a[o],enumerable:!0})},n),n}return t.prototype.toString=function(){var e=this.message?": "+this.message:"";return this.name+" "+this.code+e},t}(Error),aM=iM,tt=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ze=aM,Xe={};Fe.createTwilioError=function(t,e){return t=typeof t=="number"?t:0,e=typeof e=="string"&&e?e:"Unknown error",Xe[t]?new Xe[t]:new Ze(t,e)};var iP=function(r){tt(t,r);function t(){var e=r.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.AccessTokenInvalidError=iP;Object.defineProperty(Xe,20101,{value:iP});var aP=function(r){tt(t,r);function t(){var e=r.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.AccessTokenHeaderInvalidError=aP;Object.defineProperty(Xe,20102,{value:aP});var oP=function(r){tt(t,r);function t(){var e=r.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.AccessTokenIssuerInvalidError=oP;Object.defineProperty(Xe,20103,{value:oP});var sP=function(r){tt(t,r);function t(){var e=r.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.AccessTokenExpiredError=sP;Object.defineProperty(Xe,20104,{value:sP});var cP=function(r){tt(t,r);function t(){var e=r.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.AccessTokenNotYetValidError=cP;Object.defineProperty(Xe,20105,{value:cP});var lP=function(r){tt(t,r);function t(){var e=r.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.AccessTokenGrantsInvalidError=lP;Object.defineProperty(Xe,20106,{value:lP});var uP=function(r){tt(t,r);function t(){var e=r.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.AccessTokenSignatureInvalidError=uP;Object.defineProperty(Xe,20107,{value:uP});var fP=function(r){tt(t,r);function t(){var e=r.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.SignalingConnectionError=fP;Object.defineProperty(Xe,53e3,{value:fP});var dP=function(r){tt(t,r);function t(){var e=r.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.SignalingConnectionDisconnectedError=dP;Object.defineProperty(Xe,53001,{value:dP});var hP=function(r){tt(t,r);function t(){var e=r.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.SignalingConnectionTimeoutError=hP;Object.defineProperty(Xe,53002,{value:hP});var pP=function(r){tt(t,r);function t(){var e=r.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.SignalingIncomingMessageInvalidError=pP;Object.defineProperty(Xe,53003,{value:pP});var vP=function(r){tt(t,r);function t(){var e=r.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.SignalingOutgoingMessageInvalidError=vP;Object.defineProperty(Xe,53004,{value:vP});var mP=function(r){tt(t,r);function t(){var e=r.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.SignalingServerBusyError=mP;Object.defineProperty(Xe,53006,{value:mP});var gP=function(r){tt(t,r);function t(){var e=r.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomNameInvalidError=gP;Object.defineProperty(Xe,53100,{value:gP});var yP=function(r){tt(t,r);function t(){var e=r.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomNameTooLongError=yP;Object.defineProperty(Xe,53101,{value:yP});var _P=function(r){tt(t,r);function t(){var e=r.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomNameCharsInvalidError=_P;Object.defineProperty(Xe,53102,{value:_P});var wP=function(r){tt(t,r);function t(){var e=r.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomCreateFailedError=wP;Object.defineProperty(Xe,53103,{value:wP});var bP=function(r){tt(t,r);function t(){var e=r.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomConnectFailedError=bP;Object.defineProperty(Xe,53104,{value:bP});var SP=function(r){tt(t,r);function t(){var e=r.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomMaxParticipantsExceededError=SP;Object.defineProperty(Xe,53105,{value:SP});var xP=function(r){tt(t,r);function t(){var e=r.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomNotFoundError=xP;Object.defineProperty(Xe,53106,{value:xP});var kP=function(r){tt(t,r);function t(){var e=r.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomMaxParticipantsOutOfRangeError=kP;Object.defineProperty(Xe,53107,{value:kP});var PP=function(r){tt(t,r);function t(){var e=r.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomTypeInvalidError=PP;Object.defineProperty(Xe,53108,{value:PP});var TP=function(r){tt(t,r);function t(){var e=r.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomTimeoutOutOfRangeError=TP;Object.defineProperty(Xe,53109,{value:TP});var EP=function(r){tt(t,r);function t(){var e=r.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomStatusCallbackMethodInvalidError=EP;Object.defineProperty(Xe,53110,{value:EP});var CP=function(r){tt(t,r);function t(){var e=r.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomStatusCallbackInvalidError=CP;Object.defineProperty(Xe,53111,{value:CP});var LP=function(r){tt(t,r);function t(){var e=r.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomStatusInvalidError=LP;Object.defineProperty(Xe,53112,{value:LP});var OP=function(r){tt(t,r);function t(){var e=r.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomRoomExistsError=OP;Object.defineProperty(Xe,53113,{value:OP});var AP=function(r){tt(t,r);function t(){var e=r.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomInvalidParametersError=AP;Object.defineProperty(Xe,53114,{value:AP});var NP=function(r){tt(t,r);function t(){var e=r.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomMediaRegionInvalidError=NP;Object.defineProperty(Xe,53115,{value:NP});var RP=function(r){tt(t,r);function t(){var e=r.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomMediaRegionUnavailableError=RP;Object.defineProperty(Xe,53116,{value:RP});var jP=function(r){tt(t,r);function t(){var e=r.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomSubscriptionOperationNotSupportedError=jP;Object.defineProperty(Xe,53117,{value:jP});var IP=function(r){tt(t,r);function t(){var e=r.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomCompletedError=IP;Object.defineProperty(Xe,53118,{value:IP});var MP=function(r){tt(t,r);function t(){var e=r.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomAudioOnlyFlagNotSupportedError=MP;Object.defineProperty(Xe,53124,{value:MP});var DP=function(r){tt(t,r);function t(){var e=r.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.RoomTrackKindNotSupportedError=DP;Object.defineProperty(Xe,53125,{value:DP});var FP=function(r){tt(t,r);function t(){var e=r.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.ParticipantIdentityInvalidError=FP;Object.defineProperty(Xe,53200,{value:FP});var BP=function(r){tt(t,r);function t(){var e=r.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.ParticipantIdentityTooLongError=BP;Object.defineProperty(Xe,53201,{value:BP});var UP=function(r){tt(t,r);function t(){var e=r.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.ParticipantIdentityCharsInvalidError=UP;Object.defineProperty(Xe,53202,{value:UP});var $P=function(r){tt(t,r);function t(){var e=r.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.ParticipantMaxTracksExceededError=$P;Object.defineProperty(Xe,53203,{value:$P});var VP=function(r){tt(t,r);function t(){var e=r.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.ParticipantNotFoundError=VP;Object.defineProperty(Xe,53204,{value:VP});var zP=function(r){tt(t,r);function t(){var e=r.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.ParticipantDuplicateIdentityError=zP;Object.defineProperty(Xe,53205,{value:zP});var WP=function(r){tt(t,r);function t(){var e=r.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.TrackInvalidError=WP;Object.defineProperty(Xe,53300,{value:WP});var qP=function(r){tt(t,r);function t(){var e=r.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.TrackNameInvalidError=qP;Object.defineProperty(Xe,53301,{value:qP});var HP=function(r){tt(t,r);function t(){var e=r.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.TrackNameTooLongError=HP;Object.defineProperty(Xe,53302,{value:HP});var GP=function(r){tt(t,r);function t(){var e=r.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.TrackNameCharsInvalidError=GP;Object.defineProperty(Xe,53303,{value:GP});var KP=function(r){tt(t,r);function t(){var e=r.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.TrackNameIsDuplicatedError=KP;Object.defineProperty(Xe,53304,{value:KP});var QP=function(r){tt(t,r);function t(){var e=r.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.TrackServerTrackCapacityReachedError=QP;Object.defineProperty(Xe,53305,{value:QP});var YP=function(r){tt(t,r);function t(){var e=r.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.MediaClientLocalDescFailedError=YP;Object.defineProperty(Xe,53400,{value:YP});var JP=function(r){tt(t,r);function t(){var e=r.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.MediaServerLocalDescFailedError=JP;Object.defineProperty(Xe,53401,{value:JP});var XP=function(r){tt(t,r);function t(){var e=r.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.MediaClientRemoteDescFailedError=XP;Object.defineProperty(Xe,53402,{value:XP});var ZP=function(r){tt(t,r);function t(){var e=r.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.MediaServerRemoteDescFailedError=ZP;Object.defineProperty(Xe,53403,{value:ZP});var eT=function(r){tt(t,r);function t(){var e=r.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.MediaNoSupportedCodecError=eT;Object.defineProperty(Xe,53404,{value:eT});var tT=function(r){tt(t,r);function t(){var e=r.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.MediaConnectionError=tT;Object.defineProperty(Xe,53405,{value:tT});var rT=function(r){tt(t,r);function t(){var e=r.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.MediaDTLSTransportFailedError=rT;Object.defineProperty(Xe,53407,{value:rT});var nT=function(r){tt(t,r);function t(){var e=r.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.ConfigurationAcquireFailedError=nT;Object.defineProperty(Xe,53500,{value:nT});var iT=function(r){tt(t,r);function t(){var e=r.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(Ze);Fe.ConfigurationAcquireTurnFailedError=iT;Object.defineProperty(Xe,53501,{value:iT});Object.defineProperty(Hp,"__esModule",{value:!0});Hp.getTurnCredentials=void 0;var oM=nP,sM=zt.ICE_VERSION,aT=Fe,cM=aT.createTwilioError,lM=aT.SignalingConnectionError,uM=yn;function fM(r,t){return new Promise(function(e,n){var i=new uM.EventEmitter,a={networkMonitor:null,eventObserver:i,helloBody:{edge:"roaming",preflight:!0,token:r,type:"ice",version:sM}},o=new oM(t,a),s=!1;o.once("close",function(){s||(s=!0,n(new lM))}),o.on("message",function(l){var c=l.code,u=l.message,d=l.ice_servers,v=l.type;(v==="iced"||v==="error")&&!s&&(s=!0,v==="iced"?e(d):n(cM(c,u)),o.close())})})}Hp.getTurnCredentials=fM;var Gp={},p5=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},v5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.makeStat=void 0;function dM(r){if(r&&r.length){var t=Math.min.apply(Math,v5([],p5(r))),e=Math.max.apply(Math,v5([],p5(r))),n=r.reduce(function(i,a){return i+a},0)/r.length;return{min:t,max:e,average:n}}return null}Gp.makeStat=dM;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.syntheticAudio=void 0;function hM(){var r=Vp(),t={},e=r.getOrCreate(t),n=e.createOscillator(),i=n.connect(e.createMediaStreamDestination());n.start();var a=i.stream.getAudioTracks()[0],o=a.stop;return a.stop=function(){o.call(a),r.release(t)},a}Kp.syntheticAudio=hM;var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.syntheticVideo=void 0;function pM(r){var t=r===void 0?{}:r,e=t.width,n=e===void 0?640:e,i=t.height,a=i===void 0?480:i,o=Object.assign(document.createElement("canvas"),{width:n,height:a}),s=o.getContext("2d");s.fillStyle="green",s.fillRect(0,0,o.width,o.height);var l=!1;requestAnimationFrame(function v(){if(!l){var p=Math.round(Math.random()*255),y=Math.round(Math.random()*255),_=Math.round(Math.random()*255),x=Math.round(Math.random()*255);s.fillStyle="rgba("+p+", "+y+", "+_+", "+x+")",s.fillRect(Math.random()*n,Math.random()*a,50,50),requestAnimationFrame(v)}});var c=o.captureStream(30),u=c.getTracks()[0],d=u.stop;return u.stop=function(){l=!0,d.call(u)},u}Qp.syntheticVideo=pM;var vM=function(){function r(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return r.prototype.get=function(){var t=this._samples,e=t[1].denominator-t[0].denominator||1/0,n=t[1].numerator-t[0].numerator;return n/e},r.prototype.putSample=function(t,e){var n=this._samples;n.shift(),n.push({denominator:e,numerator:t})},r}(),oT=vM,mM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gM=yn.EventEmitter,yM=["signaling","room","media","quality","video-processor","preflight"],_M=["debug","error","info","warning"],wM=function(r){mM(t,r);function t(e,n,i,a){a===void 0&&(a=null);var o=r.call(this)||this;return o.on("event",function(s){var l=s.name,c=s.group,u=s.level,d=s.payload;if(typeof l!="string")throw i.error("Unexpected name: ",l),new Error("Unexpected name: ",l);if(!yM.includes(c))throw i.error("Unexpected group: ",c),new Error("Unexpected group: ",c);if(!_M.includes(u))throw i.error("Unexpected level: ",u),new Error("Unexpected level: ",u);var v=Date.now(),p=v-n,y=Object.assign({elapsedTime:p,level:u},d||{});e.publish(c,l,y);var _=Object.assign({elapsedTime:p,group:c,level:u,name:l,timestamp:v},d?{payload:d}:{}),x={debug:"debug",error:"error",info:"info",warning:"warn"}[u];i[x]("event",_),a&&c==="signaling"&&a.emit("event",_)}),o}return t}(gM),sT=wM,bM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ac=A&&A.__assign||function(){return Ac=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ac.apply(this,arguments)},SM=yn.EventEmitter,xM=Me.getUserAgent,kM=5,PM=50,TM=1e3,m5=globalThis,EM=m5.WebSocket?m5.WebSocket:X3(),cT=zt,CM=cT.hardwareDevicePublisheriPad,LM=cT.hardwareDevicePublisheriPhone,OM=Me,g5=Fs,AM=function(r){bM(t,r);function t(e,n,i,a,o,s){var l=r.call(this)||this;return s=Object.assign({gateway:NM(a,o)+"/v1/VideoEvents",maxReconnectAttempts:kM,reconnectIntervalMs:PM,userAgent:xM(),WebSocket:EM},s),Object.defineProperties(l,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:OM.defer()},_reconnectAttemptsLeft:{value:s.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:s.WebSocket}}),l._readyToConnect.promise.then(function(c){var u=c.roomSid,d=c.participantSid,v=l;l.on("disconnected",function p(y){if(v._session=null,y&&v._reconnectAttemptsLeft>0){v.emit("reconnecting"),jM(v,e,n,i,u,d,s);return}v.removeListener("disconnected",p)}),ty(l,e,n,i,u,d,s)}).catch(function(){}),l}return t.prototype.connect=function(e,n){this._readyToConnect.resolve({roomSid:e,participantSid:n})},t.prototype._publish=function(e){e.session=this._session,this._ws.send(JSON.stringify(e))},t.prototype.disconnect=function(){if(this._ws===null||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},t.prototype.publish=function(e,n,i){if(this._ws!==null&&(this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED))return!1;var a=typeof this._session=="string"?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue);return a({group:e,name:n,payload:i,timestamp:Date.now(),type:"event",version:1}),!0},t}(SM);function ty(r,t,e,n,i,a,o){r._connectTimestamp=Date.now(),r._reconnectAttemptsLeft--,r._ws=new o.WebSocket(o.gateway);var s=r._ws;s.addEventListener("close",function(l){if(l.code===TM){r.emit("disconnected");return}r.emit("disconnected",new Error("WebSocket Error "+l.code+": "+l.reason))}),s.addEventListener("message",function(l){RM(r,JSON.parse(l.data),o)}),s.addEventListener("open",function(){var l={type:"connect",token:t,version:1};l.publisher={name:e,sdkVersion:n,userAgent:o.userAgent,participantSid:a,roomSid:i},g5.isIpad()?l.publisher=Ac(Ac({},l.publisher),CM):g5.isIphone()&&(l.publisher=Ac(Ac({},l.publisher),LM)),s.send(JSON.stringify(l))})}function NM(r,t){return r==="prod"?"wss://sdkgw."+t+".twilio.com":"wss://sdkgw."+r+"-"+t+".twilio.com"}function RM(r,t,e){switch(t.type){case"connected":r._session=t.session,r._reconnectAttemptsLeft=e.maxReconnectAttempts,r._eventQueue.splice(0).forEach(r._publish,r),r.emit("connected");break;case"error":r._ws.close(),r.emit("disconnected",new Error(t.message));break}}function jM(r,t,e,n,i,a,o){var s=Date.now()-r._connectTimestamp,l=o.reconnectIntervalMs-s;if(l>0){setTimeout(function(){ty(r,t,e,n,i,a,o)},l);return}ty(r,t,e,n,i,a,o)}var lT=AM,IM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ap=A&&A.__assign||function(){return ap=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ap.apply(this,arguments)},nu=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},iu=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(el,"__esModule",{value:!0});el.runPreflight=el.PreflightTest=void 0;var ac=zt,oc=Wp,MM=tl,DM=qp,FM=Hp,Ld=Gp,BM=Kp,UM=Qp,$M=Me,VM=zt.WS_SERVER,zM=Da,WM=df,Hm=oT,qM=sT,HM=lT,uT=Fp,GM=uT.createSID,KM=uT.sessionSID,fT=Fe,QM=fT.SignalingConnectionTimeoutError,y5=fT.MediaConnectionError,dT=1e3,YM=10*dT,ss={mediaAcquired:"mediaAcquired",connected:"connected",mediaSubscribed:"mediaSubscribed",mediaStarted:"mediaStarted",dtlsConnected:"dtlsConnected",peerConnectionConnected:"peerConnectionConnected",iceConnected:"iceConnected"};function JM(r){return r!==null&&typeof r<"u"}var XM=0,hT=function(r){IM(t,r);function t(e,n){var i=r.call(this)||this;i._testTiming=new oc.Timer,i._dtlsTiming=new oc.Timer,i._iceTiming=new oc.Timer,i._peerConnectionTiming=new oc.Timer,i._mediaTiming=new oc.Timer,i._connectTiming=new oc.Timer,i._sentBytesMovingAverage=new Hm,i._packetLossMovingAverage=new Hm,i._progressEvents=[],i._receivedBytesMovingAverage=new Hm;var a=n,o=a.environment,s=o===void 0?"prod":o,l=a.region,c=l===void 0?"gll":l,u=a.duration,d=u===void 0?YM:u,v=a.wsServer||VM(s,c);return i._log=new zM("default",i,ac.DEFAULT_LOG_LEVEL,ac.DEFAULT_LOGGER_NAME),i._testDuration=d,i._instanceId=XM++,i._testTiming.start(),i._runPreflightTest(e,s,v),i}return t.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},t.prototype.stop=function(){this._stopped=!0},t.prototype._generatePreflightReport=function(e){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:Ld.makeStat(e==null?void 0:e.jitter),rtt:Ld.makeStat(e==null?void 0:e.rtt),packetLoss:Ld.makeStat(e==null?void 0:e.packetLoss)},selectedIceCandidatePairStats:e?e.selectedIceCandidatePairStats:null,iceCandidateStats:e?e.iceCandidateStats:[],progressEvents:this._progressEvents,mos:Ld.makeStat(e==null?void 0:e.mos)}},t.prototype._executePreflightStep=function(e,n,i){return nu(this,void 0,void 0,function(){var a,o,s,l,c;return iu(this,function(u){switch(u.label){case 0:if(this._log.debug("Executing step: ",e),a=this._testDuration+10*dT,this._stopped)throw new Error("stopped");o=Promise.resolve().then(n),s=null,l=new Promise(function(d,v){s=setTimeout(function(){v(i||new Error(e+" timeout."))},a)}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.race([l,o])];case 2:return c=u.sent(),[2,c];case 3:return s!==null&&clearTimeout(s),[7];case 4:return[2]}})})},t.prototype._collectNetworkTimings=function(e){var n=this;return new Promise(function(i){var a;e.addEventListener("iceconnectionstatechange",function(){e.iceConnectionState==="checking"&&n._iceTiming.start(),e.iceConnectionState==="connected"&&(n._iceTiming.stop(),n._updateProgress(ss.iceConnected),(!a||a&&a.state==="connected")&&i())}),e.addEventListener("connectionstatechange",function(){e.connectionState==="connecting"&&n._peerConnectionTiming.start(),e.connectionState==="connected"&&(n._peerConnectionTiming.stop(),n._updateProgress(ss.peerConnectionConnected))});var o=e.getSenders(),s=o.map(function(l){return l.transport}).find(JM);typeof s<"u"&&(a=s,a.addEventListener("statechange",function(){a.state==="connecting"&&n._dtlsTiming.start(),a.state==="connected"&&(n._dtlsTiming.stop(),n._updateProgress(ss.dtlsConnected),e.iceConnectionState==="connected"&&i())}))})},t.prototype._setupInsights=function(e){var n=e.token,i=e.environment,a=i===void 0?ac.DEFAULT_ENVIRONMENT:i,o=e.realm,s=o===void 0?ac.DEFAULT_REALM:o,l={},c=new HM(n,ac.SDK_NAME,ac.SDK_VERSION,a,s,l);c.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var u=new qM(c,Date.now(),this._log),d=void 0;return{reportToInsights:function(v){var p,y,_=v.report,x=_.stats.jitter||d,w=_.stats.rtt||d,S=_.stats.packetLoss||d,k=_.mos||d,T=new Map;_.iceCandidateStats.forEach(function($){if($.candidateType&&$.protocol){var F=T.get($.candidateType)||[];F.indexOf($.protocol)<0&&F.push($.protocol),T.set($.candidateType,F)}});var R=JSON.stringify(Object.fromEntries(T)),U={name:"report",group:"preflight",level:_.error?"error":"info",payload:{sessionSID:KM,preflightSID:GM("PF"),progressEvents:JSON.stringify(_.progressEvents),testTiming:_.testTiming,dtlsTiming:_.networkTiming.dtls,iceTiming:_.networkTiming.ice,peerConnectionTiming:_.networkTiming.peerConnection,connectTiming:_.networkTiming.connect,mediaTiming:_.networkTiming.media,selectedLocalCandidate:(p=_.selectedIceCandidatePairStats)===null||p===void 0?void 0:p.localCandidate,selectedRemoteCandidate:(y=_.selectedIceCandidatePairStats)===null||y===void 0?void 0:y.remoteCandidate,iceCandidateStats:R,jitterStats:x,rttStats:w,packetLossStats:S,mosStats:k,error:_.error}};u.emit("event",U),setTimeout(function(){return c.disconnect()},2e3)}}},t.prototype._runPreflightTest=function(e,n,i){return nu(this,void 0,void 0,function(){var a,o,s,l,c,u,d,v,p,y,_,x,w=this;return iu(this,function(S){switch(S.label){case 0:a=[],o=[],s=this._setupInsights({token:e,environment:n}).reportToInsights,S.label=1;case 1:return S.trys.push([1,8,9,10]),l=[],[4,this._executePreflightStep("Acquire media",function(){return[BM.syntheticAudio(),UM.syntheticVideo({width:640,height:480})]})];case 2:return a=S.sent(),this._updateProgress(ss.mediaAcquired),this.emit("debug",{localTracks:a}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return FM.getTurnCredentials(e,i)},new QM)];case 3:return c=S.sent(),this._connectTiming.stop(),this._updateProgress(ss.connected),u=new RTCPeerConnection({iceServers:c,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),d=new RTCPeerConnection({iceServers:c,bundlePolicy:"max-bundle"}),o.push(u),o.push(d),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return nu(w,void 0,void 0,function(){var k,T,R,U;return iu(this,function($){switch($.label){case 0:return u.addEventListener("icecandidate",function(F){return F.candidate&&d.addIceCandidate(F.candidate)}),d.addEventListener("icecandidate",function(F){return F.candidate&&u.addIceCandidate(F.candidate)}),a.forEach(function(F){return u.addTrack(F)}),k=new Promise(function(F){var M=[];d.addEventListener("track",function(Y){M.push(Y.track),M.length===a.length&&F(M)})}),[4,u.createOffer()];case 1:return T=$.sent(),R=T,[4,u.setLocalDescription(R)];case 2:return $.sent(),[4,d.setRemoteDescription(R)];case 3:return $.sent(),[4,d.createAnswer()];case 4:return U=$.sent(),[4,d.setLocalDescription(U)];case 5:return $.sent(),[4,u.setRemoteDescription(U)];case 6:return $.sent(),[4,this._collectNetworkTimings(u)];case 7:return $.sent(),[2,k]}})})},new y5)];case 4:return v=S.sent(),this.emit("debug",{remoteTracks:v}),v.forEach(function(k){k.addEventListener("ended",function(){return w._log.warn(k.kind+":ended")}),k.addEventListener("mute",function(){return w._log.warn(k.kind+":muted")}),k.addEventListener("unmute",function(){return w._log.warn(k.kind+":unmuted")})}),this._updateProgress(ss.mediaSubscribed),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(k){var T=document.createElement("video");T.autoplay=!0,T.playsInline=!0,T.muted=!0,T.srcObject=new MediaStream(v),l.push(T),w.emit("debugElement",T),T.oncanplay=k})},new y5)];case 5:return S.sent(),this._mediaTiming.stop(),this._updateProgress(ss.mediaStarted),[4,this._executePreflightStep("Collect stats for duration",function(){return w._collectRTCStatsForDuration(w._testDuration,ZM(),u,d)})];case 6:return p=S.sent(),[4,this._executePreflightStep("Generate report",function(){return w._generatePreflightReport(p)})];case 7:return y=S.sent(),s({report:y}),this.emit("completed",y),[3,10];case 8:return _=S.sent(),x=this._generatePreflightReport(),s({report:ap(ap({},x),{error:_==null?void 0:_.toString()})}),this.emit("failed",_,x),[3,10];case 9:return o.forEach(function(k){return k.close()}),a.forEach(function(k){return k.stop()}),[7];case 10:return[2]}})})},t.prototype._collectRTCStats=function(e,n,i){return nu(this,void 0,void 0,function(){var a,o,s,l,c,u,d,v,p,y,_,x,w,S;return iu(this,function(k){switch(k.label){case 0:return[4,DM.getCombinedConnectionStats({publisher:n,subscriber:i})];case 1:return a=k.sent(),o=a.timestamp,s=a.bytesSent,l=a.bytesReceived,c=a.packets,u=a.packetsLost,d=a.roundTripTime,v=a.jitter,p=a.selectedIceCandidatePairStats,y=a.iceCandidateStats,_=e.jitter.length>0,e.jitter.push(v),e.rtt.push(d),this._sentBytesMovingAverage.putSample(s,o),this._receivedBytesMovingAverage.putSample(l,o),this._packetLossMovingAverage.putSample(u,c),_&&(e.outgoingBitrate.push(this._sentBytesMovingAverage.get()*1e3*8),e.incomingBitrate.push(this._receivedBytesMovingAverage.get()*1e3*8),x=this._packetLossMovingAverage.get(),w=Math.min(100,x*100),e.packetLoss.push(w),S=MM.calculateMOS(d,v,x),e.mos.push(S)),e.selectedIceCandidatePairStats||(e.selectedIceCandidatePairStats=p),e.iceCandidateStats.length===0&&(e.iceCandidateStats=y),[2]}})})},t.prototype._collectRTCStatsForDuration=function(e,n,i,a){return nu(this,void 0,void 0,function(){var o,s,l;return iu(this,function(c){switch(c.label){case 0:return o=Date.now(),s=Math.min(1e3,e),[4,$M.waitForSometime(s)];case 1:return c.sent(),[4,this._collectRTCStats(n,i,a)];case 2:return c.sent(),l=e-(Date.now()-o),l>0?[4,this._collectRTCStatsForDuration(l,n,i,a)]:[3,4];case 3:n=c.sent(),c.label=4;case 4:return[2,n]}})})},t.prototype._updateProgress=function(e){var n=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:n,name:e}),this.emit("progress",e)},t}(WM);el.PreflightTest=hT;function ZM(){return{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]}}function eD(r,t){t===void 0&&(t={});var e=new hT(r,t);return e}el.runPreflight=eD;var Gm=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Km=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},tD=function(){function r(t,e){var n=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:e}}),Object.defineProperty(this,"_promise",{value:new Promise(function(i,a){t(function(o){n._isCancelable=!1,i(o)},function(o){n._isCancelable=!1,a(o)},function(){return n._isCanceled})})})}return r.reject=function(t){return new r(function(n,i){i(t)},function(){})},r.resolve=function(t){return new r(function(n){n(t)},function(){})},r.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},r.prototype.catch=function(){var t=[].slice.call(arguments),e=this._promise;return new r(function(i,a){e.catch.apply(e,Km([],Gm(t))).then(i,a)},this._onCancel)},r.prototype.then=function(){var t=[].slice.call(arguments),e=this._promise;return new r(function(i,a){e.then.apply(e,Km([],Gm(t))).then(i,a)},this._onCancel)},r.prototype.finally=function(){var t=[].slice.call(arguments),e=this._promise;return new r(function(i,a){e.finally.apply(e,Km([],Gm(t))).then(i,a)},this._onCancel)},r}(),G1=tD,_5=G1;function rD(r,t,e,n){var i,a=new Error("Canceled");return new _5(function(s,l,c){var u;r(function(v){return c()?_5.reject(a):(u=t(v),e(u).then(function(y){if(c())throw a;return i=y(),i}))}).then(function(v){if(c())throw v.disconnect(),a;s(n(u,v))}).catch(function(v){l(v)})},function(){i&&i.cancel()})}var nD=rD,iD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aD=yn.EventEmitter,oD=function(r){iD(t,r);function t(e,n){var i=r.call(this)||this;return e=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},e),Object.defineProperties(i,{maxAudioBitrate:{value:e.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:e.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:n}}),i}return t.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},t.prototype.update=function(e){var n=this;e=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},e);var i=["maxAudioBitrate","maxVideoBitrate"].reduce(function(a,o){return n[o]!==e[o]&&(n[o]=e[o],a=!0),a},!1);i&&this.emit("changed")},t}(aD),sD=oD,hf={},cD=Me.isNonArrayObject,ll=zt,mu=ll.typeErrors,lD=ll.clientTrackSwitchOffControl,uD=ll.videoContentPreferencesMode,fD=ll.subscriptionMode,pT=ll.trackPriority,dD=ll.trackSwitchOffMode;function hD(r){var t=Ju(r,"options.bandwidthProfile");return!r||t||(t=Ju(r.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(uD)},{prop:"dominantSpeakerPriority",values:Object.values(pT)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(fD)},{prop:"clientTrackSwitchOffControl",values:Object.values(lD)},{prop:"trackSwitchOffMode",values:Object.values(dD)}]),t)?t:r.video?"maxTracks"in r.video&&"clientTrackSwitchOffControl"in r.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in r.video&&"contentPreferencesMode"in r.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):vD(r.video.renderDimensions):null}function pD(r,t){if(!(r instanceof t.LocalAudioTrack||r instanceof t.LocalDataTrack||r instanceof t.LocalVideoTrack||r instanceof t.MediaStreamTrack))throw mu.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function Ju(r,t,e){return e===void 0&&(e=[]),typeof r>"u"?null:r===null||!cD(r)?mu.INVALID_TYPE(t,"object"):e.reduce(function(n,i){var a=i.prop,o=i.type,s=i.values;if(n||!(a in r))return n;var l=r[a];return o&&typeof l!==o||o==="number"&&isNaN(l)?mu.INVALID_TYPE(t+"."+a,o):Array.isArray(s)&&!s.includes(l)?mu.INVALID_VALUE(t+"."+a,s):n},null)}function vD(r){var t="options.bandwidthProfile.video.renderDimensions",e=Ju(r,t);return r?e||Object.values(pT).reduce(function(n,i){return n||Ju(r[i],t+"."+i,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):e}hf.validateBandwidthProfile=hD;hf.validateLocalTrack=pD;hf.validateObject=Ju;var mD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gD=df,vT=Me,yD=vT.buildLogLevels,_D=vT.valueToJSON,wD=zt.DEFAULT_LOG_LEVEL,bD=Da,SD=0,xD=function(r){mD(t,r);function t(e,n,i){var a=r.call(this)||this;i=Object.assign({logLevel:wD},i);var o=yD(i.logLevel);return Object.defineProperties(a,{_instanceId:{value:SD++},_log:{value:i.log?i.log.createLog("default",a):new bD("default",a,o,i.loggerName)},trackName:{enumerable:!0,value:e},trackSid:{enumerable:!0,value:n}}),a}return t.prototype.toJSON=function(){return _D(this)},t.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(gD),mT=xD,kD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PD=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},TD=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},ED=mT,gT=zt,CD=gT.typeErrors,LD=gT.trackPriority,OD=function(r){kD(t,r);function t(e,n,i,a){var o=r.call(this,n.name,e.sid,a)||this;return Object.defineProperties(o,{_reemitSignalingEvent:{value:function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return o.emit.apply(o,TD([s&&s.length?"warning":"warningsCleared"],PD(s)))}},_reemitTrackEvent:{value:function(){return o.emit(o.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:e},_unpublish:{value:i},isTrackEnabled:{enumerable:!0,get:function(){return this.track.kind==="data"?!0:this.track.isEnabled}},kind:{enumerable:!0,value:n.kind},priority:{enumerable:!0,get:function(){return e.updatedPriority}},track:{enumerable:!0,value:n}}),["disabled","enabled"].forEach(function(s){return n.on(s,o._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(s){return e.on(s,o._reemitSignalingEvent)}),o}return t.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype.setPriority=function(e){var n=Object.values(LD);if(!n.includes(e))throw CD.INVALID_VALUE("priority",n);return this._signaling.setPriority(e),this},t.prototype.unpublish=function(){var e=this;return["disabled","enabled"].forEach(function(n){return e.track.removeListener(n,e._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(n){return e._signaling.removeListener(n,e._reemitSignalingEvent)}),this._unpublish(this),this},t}(ED),K1=OD,AD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ND=K1,RD=function(r){AD(t,r);function t(e,n,i,a){return r.call(this,e,n,i,a)||this}return t.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(ND),jD=RD,ID=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),MD=K1,DD=function(r){ID(t,r);function t(e,n,i,a){return r.call(this,e,n,i,a)||this}return t.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(MD),FD=DD,BD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),UD=K1,$D=function(r){BD(t,r);function t(e,n,i,a){return r.call(this,e,n,i,a)||this}return t.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(UD),VD=$D,zD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),WD=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},qD=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},yT=zt,HD=yT.typeErrors,GD=yT.trackPriority,KD=Fs.isIOS,w5=U1;function QD(r){return function(t){zD(e,t);function e(n,i,a,o,s,l,c){var u=this;return c=Object.assign({workaroundWebKitBug212780:KD()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},c),u=t.call(this,i,c)||this,Object.defineProperties(u,{_isEnabled:{value:a,writable:!0},_isSwitchedOff:{value:o,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:s},_setRenderHint:{value:function(d){u._log.debug("updating render hint:",d),l(d)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:n},_workaroundWebKitBug212780:{value:c.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),u}return e.prototype.setPriority=function(n){var i=qD([null],WD(Object.values(GD)));if(!i.includes(n))throw HD.INVALID_VALUE("priority",i);return this._priority!==n&&(this._priority=n,this._setPriority(n)),this},e.prototype._setEnabled=function(n){this._isEnabled!==n&&(this._isEnabled=n,this.emit(this._isEnabled?"enabled":"disabled",this))},e.prototype._setSwitchedOff=function(n){this._isSwitchedOff!==n&&(this._isSwitchedOff=n,this.emit(n?"switchedOff":"switchedOn",this))},e.prototype.attach=function(n){var i=t.prototype.attach.call(this,n);return this.mediaStreamTrack.enabled!==!0&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||YD(this)),i},e.prototype.detach=function(n){var i=t.prototype.detach.call(this,n);return this._attachments.size===0&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),i},e}(r)}function YD(r){var t=r._log,e=r.kind;function n(i){i&&r._attachments.forEach(function(a){var o=r._elShims.get(a),s=a.paused&&o&&!o.pausedIntentionally();s&&(t.info("Playing inadvertently paused <"+e+"> element"),t.debug("Element:",a),t.debug("RemoteMediaTrack:",r),a.play().then(function(){t.info("Successfully played inadvertently paused <"+e+"> element"),t.debug("Element:",a),t.debug("RemoteMediaTrack:",r)}).catch(function(l){t.warn("Error while playing inadvertently paused <"+e+"> element:",{err:l,el:a,remoteMediaTrack:r})}))})}return w5.onVisibilityChange(2,n),function(){w5.offVisibilityChange(2,n)}}var _T=QD,JD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),XD=R3,ZD=_T,eF=ZD(XD),tF=function(r){JD(t,r);function t(e,n,i,a,o,s,l){return r.call(this,e,n,i,a,o,s,l)||this}return t.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype._start=function(){r.prototype._start.call(this),this._dummyEl&&(this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl=null)},t.prototype.setPriority=function(e){return r.prototype.setPriority.call(this,e)},t}(eF),rF=tF,nF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),iF=mT,aF=function(r){nF(t,r);function t(e,n){var i=r.call(this,e.name,e.sid,n)||this;Object.defineProperties(i,{_signaling:{value:e},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return e.isEnabled}},kind:{enumerable:!0,value:e.kind},publishPriority:{enumerable:!0,get:function(){return e.priority}},track:{enumerable:!0,get:function(){return this._track}}});var a=e.error,o=e.isEnabled,s=e.isSwitchedOff,l=e.priority;return e.on("updated",function(){if(a!==e.error){a=e.error,i.emit("subscriptionFailed",e.error);return}o!==e.isEnabled&&(o=e.isEnabled,i.track&&i.track._setEnabled(e.isEnabled),i.emit(e.isEnabled?"trackEnabled":"trackDisabled")),s!==e.isSwitchedOff&&(i._log.debug(i.trackSid+": "+(s?"OFF":"ON")+" => "+(e.isSwitchedOff?"OFF":"ON")),s=e.isSwitchedOff,i.track?(i.track._setSwitchedOff(e.isSwitchedOff),i.emit(s?"trackSwitchedOff":"trackSwitchedOn",i.track)):s&&i._log.warn("Track was not subscribed when switched Off.")),l!==e.priority&&(l=e.priority,i.emit("publishPriorityChanged",l))}),i}return t.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype._subscribed=function(e){!this._track&&e&&(this._track=e,this.emit("subscribed",e))},t.prototype._unsubscribe=function(){if(this._track){var e=this._track;this._track=null,this.emit("unsubscribed",e)}},t}(iF),Q1=aF,oF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sF=Q1,cF=function(r){oF(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(sF),lF=cF,uF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fF=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},dF=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},hF=B1,wT=zt,pF=wT.typeErrors,vF=wT.trackPriority,mF=function(r){uF(t,r);function t(e,n,i){var a=r.call(this,n.id,"data",i)||this;return Object.defineProperties(a,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:n.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:n.maxRetransmits},ordered:{enumerable:!0,value:n.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:n.maxPacketLifeTime===null&&n.maxRetransmits===null},sid:{enumerable:!0,value:e}}),n.on("message",function(o){a.emit("message",o,a)}),a}return t.prototype.setPriority=function(e){var n=dF([null],fF(Object.values(vF)));if(!n.includes(e))throw pF.INVALID_VALUE("priority",n);return this._priority=e,this},t.prototype._setEnabled=function(){},t.prototype._setSwitchedOff=function(e){this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit(e?"switchedOff":"switchedOn",this))},t}(hF),gF=mF,yF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_F=Q1,wF=function(r){yF(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(_F),bF=wF,bT=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Y1=function(){function r(t){Object.defineProperties(this,{_callback:{value:t}})}return r.prototype.observe=function(){},r.prototype.unobserve=function(){},r.prototype.makeVisible=function(t){var e=this._makeFakeEntry(t,!0);this._callback([e])},r.prototype.makeInvisible=function(t){var e=this._makeFakeEntry(t,!1);this._callback([e])},r.prototype._makeFakeEntry=function(t,e){return{target:t,isIntersecting:e}},r}();(function(r){bT(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(Y1);(function(r){bT(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.resize=function(e){var n=this._makeFakeEntry(e,!0);this._callback([n])},t})(Y1);var SF={NullObserver:Y1},xF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kF=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},PF=_T,ST=W3,b5=U1,S5=SF.NullObserver,TF=Bs,EF=PF(ST),CF=50,LF=function(r){xF(t,r);function t(e,n,i,a,o,s,l){var c=this;return l=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},l),l=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||l.clientTrackSwitchOffControl!=="auto"?S5:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||l.contentPreferencesMode!=="auto"?S5:ResizeObserver},l),c=r.call(this,e,n,i,a,o,s,l)||this,Object.defineProperties(c,{_enableDocumentVisibilityTurnOff:{value:l.enableDocumentVisibilityTurnOff===!0&&l.clientTrackSwitchOffControl==="auto"},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:l.clientTrackSwitchOffControl},_contentPreferencesMode:{value:l.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new TF(function(){c._setRenderHint({enabled:!1})},CF,!1)},_resizeObserver:{value:new l.ResizeObserver(function(u){var d=u.find(function(v){return!c._invisibleElements.has(v.target)});d&&Od(c)})},_intersectionObserver:{value:new l.IntersectionObserver(function(u){var d=!1;u.forEach(function(v){var p=!c._invisibleElements.has(v.target);p!==v.isIntersecting&&(v.isIntersecting?(c._log.debug("intersectionObserver detected: Off => On"),c._invisibleElements.delete(v.target)):(c._log.debug("intersectionObserver detected: On => Off"),c._invisibleElements.add(v.target)),d=!0)}),d&&(vc(c),Od(c))},{threshold:.25})}}),c}return t.prototype._start=function(e){var n=r.prototype._start.call(this,e);return vc(this),n},t.prototype.switchOn=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},t.prototype.switchOff=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},t.prototype.setContentPreferences=function(e){if(this._contentPreferencesMode!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return e.renderDimensions&&this._setRenderHint({renderDimensions:e.renderDimensions}),this},t.prototype._unObservePip=function(e){var n=this._elToPipCallbacks.get(e);n&&(e.removeEventListener("enterpictureinpicture",n.onEnterPip),e.removeEventListener("leavepictureinpicture",n.onLeavePip),this._elToPipCallbacks.delete(e))},t.prototype._observePip=function(e){var n=this,i=this._elToPipCallbacks.get(e);if(!i){var a=function(l){return n._onEnterPip(l,e)},o=function(l){return n._onLeavePip(l,e)},s=function(l){return n._onResizePip(l,e)};e.addEventListener("enterpictureinpicture",a),e.addEventListener("leavepictureinpicture",o),this._elToPipCallbacks.set(e,{onEnterPip:a,onLeavePip:o,onResizePip:s})}},t.prototype._onEnterPip=function(e,n){this._log.debug("onEnterPip");var i=e.pictureInPictureWindow;this._elToPipWindows.set(n,i);var a=this._elToPipCallbacks.get(n).onResizePip;i.addEventListener("resize",a),vc(this)},t.prototype._onLeavePip=function(e,n){this._log.debug("onLeavePip"),this._elToPipWindows.delete(n);var i=this._elToPipCallbacks.get(n).onResizePip,a=e.pictureInPictureWindow;a.removeEventListener("resize",i),vc(this)},t.prototype._onResizePip=function(){Od(this)},t.prototype.attach=function(e){var n=r.prototype.attach.call(this,e);return this._clientTrackSwitchOffControl==="auto"&&this._invisibleElements.add(n),this._intersectionObserver.observe(n),this._resizeObserver.observe(n),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||AF(this)),this._observePip(n),n},t.prototype.detach=function(e){var n=this,i=r.prototype.detach.call(this,e),a=Array.isArray(i)?i:[i];return a.forEach(function(o){n._intersectionObserver.unobserve(o),n._resizeObserver.unobserve(o),n._invisibleElements.delete(o),n._unObservePip(o)}),this._attachments.size===0&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),vc(this),Od(this),i},t.prototype.addProcessor=function(){return r.prototype.addProcessor.apply(this,arguments)},t.prototype.removeProcessor=function(){return r.prototype.removeProcessor.apply(this,arguments)},t.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype.setPriority=function(e){return r.prototype.setPriority.call(this,e)},t}(EF);function OF(r){if(!("documentPictureInPicture"in globalThis))return!1;var t=globalThis.documentPictureInPicture.window;if(!t)return!1;var e=new WeakSet(t.document.querySelectorAll("video"));return r._getAllAttachedElements().some(function(n){return e.has(n)})}function vc(r){if(r._clientTrackSwitchOffControl==="auto"){var t=r._getAllAttachedElements().filter(function(i){return!r._invisibleElements.has(i)}),e=r._getAllAttachedElements().filter(function(i){return r._elToPipWindows.has(i)}),n=e.length>0||OF(r)||document.visibilityState==="visible"&&t.length>0;n===!0?(r._turnOffTimer.clear(),r._setRenderHint({enabled:!0}),ST._ensureDocumentPipVideosPlaying(r)):r._turnOffTimer.isSet||r._turnOffTimer.start()}}function Od(r){if(r._contentPreferencesMode==="auto"){var t=r._getAllAttachedElements().filter(function(c){return!r._invisibleElements.has(c)}),e=r._getAllAttachedElements().map(function(c){var u=r._elToPipWindows.get(c);return u?{clientHeight:u.height,clientWidth:u.width}:{clientHeight:0,clientWidth:0}}),n=t.concat(e);if(n.length>0){var i=kF(n.sort(function(c,u){return u.clientHeight+u.clientWidth-c.clientHeight-c.clientWidth-1}),1),a=i[0],o=a.clientHeight,s=a.clientWidth,l={height:o,width:s};r._setRenderHint({renderDimensions:l})}}}function AF(r){function t(){vc(r)}return b5.onVisibilityChange(1,t),function(){b5.offVisibilityChange(1,t)}}var NF=LF,RF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jF=Q1,IF=function(r){RF(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(jF),MF=IF,DF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Xu=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},ry=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},FF=df,BF=rF,UF=lF,$F=gF,VF=bF,zF=NF,WF=MF,_a=Me,qF=0,HF=function(r){DF(t,r);function t(e,n){var i=r.call(this)||this;n=Object.assign({RemoteAudioTrack:BF,RemoteAudioTrackPublication:UF,RemoteDataTrack:$F,RemoteDataTrackPublication:VF,RemoteVideoTrack:zF,RemoteVideoTrackPublication:WF,tracks:[]},n);var a=GF(n.tracks),o=n.log.createLog("default",i),s=new Map(a.audioTracks),l=new Map(a.dataTracks),c=new Map(a.tracks),u=new Map(a.videoTracks);return Object.defineProperties(i,{_RemoteAudioTrack:{value:n.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:n.RemoteAudioTrackPublication},_RemoteDataTrack:{value:n.RemoteDataTrack},_RemoteDataTrackPublication:{value:n.RemoteDataTrackPublication},_RemoteVideoTrack:{value:n.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:n.RemoteVideoTrackPublication},_audioTracks:{value:s},_dataTracks:{value:l},_instanceId:{value:++qF},_clientTrackSwitchOffControl:{value:n.clientTrackSwitchOffControl},_contentPreferencesMode:{value:n.contentPreferencesMode},_log:{value:o},_signaling:{value:e},_tracks:{value:c},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:u},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return e.identity}},networkQualityLevel:{enumerable:!0,get:function(){return e.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return e.networkQualityStats}},sid:{enumerable:!0,get:function(){return e.sid}},state:{enumerable:!0,get:function(){return e.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement}}),i._tracks.forEach(x5.bind(null,i)),e.on("networkQualityLevelChanged",function(){return i.emit("networkQualityLevelChanged",i.networkQualityLevel,i.networkQualityStats&&(i.networkQualityStats.audio||i.networkQualityStats.video)?i.networkQualityStats:null)}),KF(i,e),o.info("Created a new Participant"+(i.identity?": "+i.identity:"")),i}return t.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},t.prototype._getTrackPublicationEvents=function(){return[]},t.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},t.prototype._addTrack=function(e,n){var i=this._log;if(this._tracks.has(n))return null;this._tracks.set(n,e);var a={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind];return a.set(n,e),x5(this,e,n),i.info("Added a new "+_a.trackClass(e)+":",n),i.debug(_a.trackClass(e)+":",e),e},t.prototype._addTrackPublication=function(e){var n=this._log;if(this.tracks.has(e.trackSid))return null;this.tracks.set(e.trackSid,e);var i={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind];return i.set(e.trackSid,e),QF(this,e),n.info("Added a new "+_a.trackPublicationClass(e)+":",e.trackSid),n.debug(_a.trackPublicationClass(e)+":",e),e},t.prototype._handleTrackSignalingEvents=function(){var e=this,n=e._log,i=e._clientTrackSwitchOffControl,a=e._contentPreferencesMode,o=e._MediaStream,s=e._mapMediaElement,l=e._disposeMediaElement,c=this;if(this.state==="disconnected")return;var u=this._RemoteAudioTrack,d=this._RemoteAudioTrackPublication,v=this._RemoteVideoTrack,p=this._RemoteVideoTrackPublication,y=this._RemoteDataTrack,_=this._RemoteDataTrackPublication,x=this._signaling;function w(R){var U={audio:d,data:_,video:p}[R.kind],$=new U(R,{log:n});c._addTrackPublication($);var F=R.isSubscribed;F&&k(R),c._trackSignalingUpdatedEventCallbacks.set(R.sid,function(){if(F!==R.isSubscribed){if(F=R.isSubscribed,F){k(R);return}T(R)}}),R.on("updated",c._trackSignalingUpdatedEventCallbacks.get(R.sid))}function S(R){R.isSubscribed&&R.setTrackTransceiver(null);var U=c._trackSignalingUpdatedEventCallbacks.get(R.sid);U&&(R.removeListener("updated",U),c._trackSignalingUpdatedEventCallbacks.delete(R.sid));var $=c.tracks.get(R.sid);$&&c._removeTrackPublication($)}function k(R){var U=R.isEnabled,$=R.name,F=R.kind,M=R.sid,Y=R.trackTransceiver,O=R.isSwitchedOff,N={audio:u,video:v,data:y}[F],W=c.tracks.get(M);if(!(!N||F!==Y.kind)){var j={log:n,name:$,clientTrackSwitchOffControl:i,contentPreferencesMode:a,mapMediaElement:s,disposeMediaElement:l};o&&(j.MediaStream=o);var Z=function(q){return x.updateSubscriberTrackPriority(M,q)},X=function(q){R.isSubscribed&&x.updateTrackRenderHint(M,q)},oe=F==="data"?new N(M,Y,j):new N(M,Y,U,O,Z,X,j);c._addTrack(oe,W,Y.id)}}function T(R){var U=Xu(Array.from(c._tracks.entries()).find(function(Y){var O=Xu(Y,2),N=O[1];return N.sid===R.sid}),2),$=U[0],F=U[1],M=c.tracks.get(R.sid);F&&c._removeTrack(F,M,$)}x.on("trackAdded",w),x.on("trackRemoved",S),x.tracks.forEach(w),x.on("stateChanged",function R(U){U==="disconnected"?(n.debug("Removing event listeners"),x.removeListener("stateChanged",R),x.removeListener("trackAdded",w),x.removeListener("trackRemoved",S)):U==="connected"&&(n.info("reconnected"),setTimeout(function(){return c.emit("reconnected")},0))})},t.prototype._removeTrack=function(e,n){if(!this._tracks.has(n))return null;this._tracks.delete(n);var i={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind];i.delete(n);var a=this._trackEventReemitters.get(n)||new Map;a.forEach(function(s,l){e.removeListener(l,s)});var o=this._log;return o.info("Removed a "+_a.trackClass(e)+":",n),o.debug(_a.trackClass(e)+":",e),e},t.prototype._removeTrackPublication=function(e){if(e=this.tracks.get(e.trackSid),!e)return null;this.tracks.delete(e.trackSid);var n={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind];n.delete(e.trackSid);var i=this._trackPublicationEventReemitters.get(e.trackSid)||new Map;i.forEach(function(o,s){e.removeListener(s,o)});var a=this._log;return a.info("Removed a "+_a.trackPublicationClass(e)+":",e.trackSid),a.debug(_a.trackPublicationClass(e)+":",e),e},t.prototype.toJSON=function(){return _a.valueToJSON(this)},t}(FF);function GF(r){var t=r.map(function(a){return[a.id,a]}),e=t.filter(function(a){return a[1].kind==="audio"}),n=t.filter(function(a){return a[1].kind==="video"}),i=t.filter(function(a){return a[1].kind==="data"});return{audioTracks:e,dataTracks:i,tracks:t,videoTracks:n}}function KF(r,t){var e=r._log;r.state!=="disconnected"&&t.on("stateChanged",function n(i){e.debug("Transitioned to state:",i),r.emit(i,r),i==="disconnected"&&(e.debug("Removing Track event reemitters"),t.removeListener("stateChanged",n),r._tracks.forEach(function(a){var o=r._trackEventReemitters.get(a.id);a&&o&&o.forEach(function(s,l){a.removeListener(l,s)})}),t.tracks.forEach(function(a){var o=r._tracks.get(a.id),s=r._trackEventReemitters.get(a.id);o&&s&&s.forEach(function(l,c){o.removeListener(c,l)})}),r._trackEventReemitters.clear(),r.tracks.forEach(function(a){r._trackPublicationEventReemitters.get(a.trackSid).forEach(function(o,s){a.removeListener(s,o)})}),r._trackPublicationEventReemitters.clear())})}function x5(r,t,e){var n=new Map;r.state!=="disconnected"&&(r._getTrackEvents().forEach(function(i){var a=i[0],o=i[1];n.set(a,function(){var s=[o].concat([].slice.call(arguments));return r.emit.apply(r,ry([],Xu(s)))}),t.on(a,n.get(a))}),r._trackEventReemitters.set(e,n))}function QF(r,t){var e=new Map;r.state!=="disconnected"&&(r._getTrackPublicationEvents().forEach(function(n){var i=Xu(n,2),a=i[0],o=i[1];e.set(a,function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];r.emit.apply(r,ry(ry([o],Xu(s)),[t]))}),t.on(a,e.get(a))}),r._trackPublicationEventReemitters.set(t.trackSid,e))}var xT=HF,YF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),JF=Ds.MediaStreamTrack,J1=Me,XF=J1.asLocalTrack,ZF=J1.asLocalTrackPublication,cs=J1.trackClass,kT=zt,ao=kT.typeErrors,Qm=kT.trackPriority,eB=hf.validateLocalTrack,X1=Uc,tB=X1.LocalAudioTrack,rB=X1.LocalDataTrack,nB=X1.LocalVideoTrack,iB=jD,aB=FD,oB=VD,sB=xT,cB=function(r){YF(t,r);function t(e,n,i){var a=this;i=Object.assign({LocalAudioTrack:tB,LocalVideoTrack:nB,LocalDataTrack:rB,MediaStreamTrack:JF,LocalAudioTrackPublication:iB,LocalVideoTrackPublication:oB,LocalDataTrackPublication:aB,shouldStopLocalTracks:!1,tracks:n},i);var o=i.shouldStopLocalTracks?new Set(n.filter(function(s){return s.kind!=="data"})):new Set;return a=r.call(this,e,i)||this,Object.defineProperties(a,{_eventObserver:{value:i.eventObserver},_LocalAudioTrack:{value:i.LocalAudioTrack},_LocalDataTrack:{value:i.LocalDataTrack},_LocalVideoTrack:{value:i.LocalVideoTrack},_MediaStreamTrack:{value:i.MediaStreamTrack},_LocalAudioTrackPublication:{value:i.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:i.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:i.LocalVideoTrackPublication},_tracksToStop:{value:o},signalingRegion:{enumerable:!0,get:function(){return e.signalingRegion}}}),a._handleTrackSignalingEvents(),a}return t.prototype._addTrack=function(e,n,i){var a=r.prototype._addTrack.call(this,e,n);return a&&this.state!=="disconnected"&&this._addLocalTrack(e,i),a},t.prototype._addLocalTrack=function(e,n){var i,a=(i=e.noiseCancellation)===null||i===void 0?void 0:i.vendor;this._signaling.addTrack(e._trackSender,e.name,n,a),this._log.info("Added a new "+cs(e,!0)+":",e.id),this._log.debug(cs(e,!0)+":",e)},t.prototype._removeTrack=function(e,n){var i=r.prototype._removeTrack.call(this,e,n);return i&&this.state!=="disconnected"&&(this._signaling.removeTrack(e._trackSender),this._log.info("Removed a "+cs(e,!0)+":",e.id),this._log.debug(cs(e,!0)+":",e)),i},t.prototype._getTrackEvents=function(){return r.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},t.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._handleTrackSignalingEvents=function(){var e=this,n=this._log;if(this.state!=="disconnected"){var i=function(l){var c=e._signaling.getPublication(l._trackSender);c&&(c.disable(),n.debug("Disabled the "+cs(l,!0)+":",l.id))},a=function(l){var c=e._signaling.getPublication(l._trackSender);c&&(c.enable(),n.debug("Enabled the "+cs(l,!0)+":",l.id))},o=function(l){var c=e._signaling.getPublication(l._trackSender);return c&&c.stop(),c},s=function(l){n.debug("Transitioned to state:",l),l==="disconnected"?(n.debug("Removing LocalTrack event listeners"),e._signaling.removeListener("stateChanged",s),e.removeListener("trackDisabled",i),e.removeListener("trackEnabled",a),e.removeListener("trackStopped",o),e._tracks.forEach(function(c){var u=o(c);u&&c._trackSender.removeClone(u._trackTransceiver)}),n.info("LocalParticipant disconnected. Stopping "+e._tracksToStop.size+" automatically-acquired LocalTracks"),e._tracksToStop.forEach(function(c){c.stop()})):l==="connected"&&(n.info("reconnected"),setTimeout(function(){return e.emit("reconnected")},0))};this.on("trackDisabled",i),this.on("trackEnabled",a),this.on("trackStopped",o),this._signaling.on("stateChanged",s),this._tracks.forEach(function(l){e._addLocalTrack(l,Qm.PRIORITY_STANDARD),e._getOrCreateLocalTrackPublication(l).catch(function(c){n.warn("Failed to get or create LocalTrackPublication for "+l+":",c)})})}},t.prototype._getOrCreateLocalTrackPublication=function(e){var n=Ad(this.tracks,e);if(n)return Promise.resolve(n);var i=this._log,a=this,o=this._signaling.getPublication(e._trackSender);return o?new Promise(function(s,l){function c(){var u=o.error;if(u){o.removeListener("updated",c),i.warn("Failed to publish the "+cs(e,!0)+": "+u.message),a._removeTrack(e,e.id),setTimeout(function(){a.emit("trackPublicationFailed",u,e)}),l(u);return}if(!a._tracks.has(e.id)){o.removeListener("updated",c),l(new Error("The "+e+" was unpublished"));return}var d=o.sid;if(d){o.removeListener("updated",c);var v={log:i,LocalAudioTrackPublication:a._LocalAudioTrackPublication,LocalDataTrackPublication:a._LocalDataTrackPublication,LocalVideoTrackPublication:a._LocalVideoTrackPublication};n=Ad(a.tracks,e);var p=function(w){return a.emit("trackWarning",w,n)},y=function(){return a.emit("trackWarningsCleared",n)},_=function(w){n.removeListener("trackWarning",p),n.removeListener("trackWarningsCleared",y),a.unpublishTrack(w.track)};n||(n=ZF(e,o,_,v),a._addTrackPublication(n)),n.on("warning",p),n.on("warningsCleared",y);var x=a._signaling.state;(x==="connected"||x==="connecting")&&(e._processorEventObserver&&e._processorEventObserver.on("event",function(w){a._eventObserver.emit("event",{name:w.name,payload:w.data,group:"video-processor",level:"info"})}),e.processedTrack&&(e._captureFrames(),e._setSenderMediaStreamTrack(!0))),x==="connected"&&setTimeout(function(){a.emit("trackPublished",n)}),s(n)}}o.on("updated",c)}):Promise.reject(new Error("Unexpected error: The "+e+" cannot be published"))},t.prototype.publishTrack=function(e,n){var i=Ad(this.tracks,e);if(i)return Promise.resolve(i);n=Object.assign({log:this._log,priority:Qm.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},n);var a;try{a=XF(e,n)}catch(u){return Promise.reject(u)}var o=a.noiseCancellation,s=this._signaling.audioProcessors;o&&!s.includes(o.vendor)&&(this._log.warn(o.vendor+" is not supported in this room. disabling it permanently"),o.disablePermanently());var l=Object.values(Qm);if(!l.includes(n.priority))return Promise.reject(ao.INVALID_VALUE("LocalTrackPublishOptions.priority",l));var c=this._addTrack(a,a.id,n.priority)||this._tracks.get(a.id);return this._getOrCreateLocalTrackPublication(c)},t.prototype.publishTracks=function(e){if(!Array.isArray(e))throw ao.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(e.map(this.publishTrack,this))},t.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},t.prototype.setNetworkQualityConfiguration=function(e){if(typeof e!="object"||e===null)throw ao.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(n){if(n in e&&(typeof e[n]!="number"||isNaN(e[n])))throw ao.INVALID_TYPE("networkQualityConfiguration."+n,"number")}),this._signaling.setNetworkQualityConfiguration(e),this},t.prototype.setParameters=function(e){if(typeof e<"u"&&typeof e!="object")throw ao.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(e){if(this._signaling.getParameters().adaptiveSimulcast&&e.maxVideoBitrate)throw ao.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(n){if(typeof e[n]<"u"&&typeof e[n]!="number"&&e[n]!==null)throw ao.INVALID_TYPE("encodingParameters."+n,"number, null or undefined")})}else e===null&&(e={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(e),this},t.prototype.unpublishTrack=function(e){eB(e,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var n=this._tracks.get(e.id);if(!n)return null;var i=this._signaling.getPublication(n._trackSender);if(i.publishFailed(new Error("The "+n+" was unpublished")),n=this._removeTrack(n,n.id),!n)return null;var a=Ad(this.tracks,n);return a&&this._removeTrackPublication(a),a},t.prototype.unpublishTracks=function(e){var n=this;if(!Array.isArray(e))throw ao.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return e.reduce(function(i,a){var o=n.unpublishTrack(a);return o?i.concat(o):i},[])},t}(sB);function Ad(r,t){return Array.from(r.values()).find(function(e){return e.track===t||e.track.mediaStreamTrack===t})||null}var lB=cB,uB=function(){function r(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return r.prototype.connect=function(){},r.prototype.disconnect=function(){return this._connected?(this._connected=!1,!0):!1},r.prototype.publish=function(){return this._connected},r}(),fB=uB,dB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hB=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},pB=yn.EventEmitter,Z1=zt,Nd=Z1.DEFAULT_NQ_LEVEL_LOCAL,Rd=Z1.DEFAULT_NQ_LEVEL_REMOTE,k5=Z1.MAX_NQ_LEVEL,Ym=Me.inRange,vB=function(r){dB(t,r);function t(e){var n=r.call(this)||this;return e=Object.assign({local:Nd,remote:Rd},e),Object.defineProperties(n,{local:{value:Ym(e.local,Nd,k5)?e.local:Nd,writable:!0},remote:{value:Ym(e.remote,Rd,k5)?e.remote:Rd,writable:!0}}),n}return t.prototype.update=function(e){var n=this;e=Object.assign({local:this.local,remote:this.remote},e),[["local",Nd,3],["remote",Rd,3]].forEach(function(i){var a=hB(i,3),o=a[0],s=a[1],l=a[2];n[o]=typeof e[o]=="number"&&Ym(e[o],s,l)?e[o]:s})},t}(pB),mB=vB,gB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yB=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},P5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},_B=xT,wB=function(r){gB(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i._handleTrackSignalingEvents(),i.once("disconnected",i._unsubscribeTracks.bind(i)),i}return t.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._addTrack=function(e,n,i){return r.prototype._addTrack.call(this,e,i)?(n._subscribed(e),this.emit("trackSubscribed",e,n),e):null},t.prototype._addTrackPublication=function(e){var n=r.prototype._addTrackPublication.call(this,e);return n?(this.emit("trackPublished",n),n):null},t.prototype._getTrackPublicationEvents=function(){return P5(P5([],yB(r.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},t.prototype._unsubscribeTracks=function(){var e=this;this.tracks.forEach(function(n){if(n.isSubscribed){var i=n.track;n._unsubscribe(),e.emit("trackUnsubscribed",i,n)}})},t.prototype._removeTrack=function(e,n,i){var a=this._tracks.get(i);return a?(r.prototype._removeTrack.call(this,a,i),n._unsubscribe(),this.emit("trackUnsubscribed",a,n),a):null},t.prototype._removeTrackPublication=function(e){this._signaling.clearTrackHint(e.trackSid);var n=r.prototype._removeTrackPublication.call(this,e);return n?(this.emit("trackUnpublished",n),n):null},t}(_B),bB=wB,SB=function(){function r(t,e){if(typeof t!="string")throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:t,enumerable:!0},trackSid:{value:e.trackSid,enumerable:!0},timestamp:{value:e.timestamp,enumerable:!0},ssrc:{value:e.ssrc,enumerable:!0},packetsLost:{value:typeof e.packetsLost=="number"?e.packetsLost:null,enumerable:!0},codec:{value:typeof e.codecName=="string"?e.codecName:null,enumerable:!0}})}return r}(),PT=SB,xB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kB=PT,PB=function(r){xB(t,r);function t(e,n,i){var a=r.call(this,e,n)||this;return Object.defineProperties(a,{bytesSent:{value:typeof n.bytesSent=="number"?n.bytesSent:i?0:null,enumerable:!0},packetsSent:{value:typeof n.packetsSent=="number"?n.packetsSent:i?0:null,enumerable:!0},roundTripTime:{value:typeof n.roundTripTime=="number"?n.roundTripTime:i?0:null,enumerable:!0}}),a}return t}(kB),TT=PB,TB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EB=TT,CB=function(r){TB(t,r);function t(e,n,i){var a=r.call(this,e,n,i)||this;return Object.defineProperties(a,{audioLevel:{value:typeof n.audioInputLevel=="number"?n.audioInputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),a}return t}(EB),LB=CB,OB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),AB=TT,NB=function(r){OB(t,r);function t(e,n,i){var a=r.call(this,e,n,i)||this,o=null;typeof n.frameWidthInput=="number"&&typeof n.frameHeightInput=="number"&&(o={},Object.defineProperties(o,{width:{value:n.frameWidthInput,enumerable:!0},height:{value:n.frameHeightInput,enumerable:!0}}));var s=null;return typeof n.frameWidthSent=="number"&&typeof n.frameHeightSent=="number"&&(s={},Object.defineProperties(s,{width:{value:n.frameWidthSent,enumerable:!0},height:{value:n.frameHeightSent,enumerable:!0}})),Object.defineProperties(a,{captureDimensions:{value:o,enumerable:!0},dimensions:{value:s,enumerable:!0},captureFrameRate:{value:typeof n.frameRateInput=="number"?n.frameRateInput:null,enumerable:!0},frameRate:{value:typeof n.frameRateSent=="number"?n.frameRateSent:null,enumerable:!0}}),a}return t}(AB),RB=NB,jB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),IB=PT,MB=function(r){jB(t,r);function t(e,n){var i=r.call(this,e,n)||this;return Object.defineProperties(i,{bytesReceived:{value:typeof n.bytesReceived=="number"?n.bytesReceived:null,enumerable:!0},packetsReceived:{value:typeof n.packetsReceived=="number"?n.packetsReceived:null,enumerable:!0}}),i}return t}(IB),ET=MB,DB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),FB=ET,BB=function(r){DB(t,r);function t(e,n){var i=r.call(this,e,n)||this;return Object.defineProperties(i,{audioLevel:{value:typeof n.audioOutputLevel=="number"?n.audioOutputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),i}return t}(FB),UB=BB,$B=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),VB=ET,zB=function(r){$B(t,r);function t(e,n){var i=r.call(this,e,n)||this,a=null;return typeof n.frameWidthReceived=="number"&&typeof n.frameHeightReceived=="number"&&(a={},Object.defineProperties(a,{width:{value:n.frameWidthReceived,enumerable:!0},height:{value:n.frameHeightReceived,enumerable:!0}})),Object.defineProperties(i,{dimensions:{value:a,enumerable:!0},frameRate:{value:typeof n.frameRateReceived=="number"?n.frameRateReceived:null,enumerable:!0}}),i}return t}(VB),WB=zB,qB=LB,HB=RB,GB=UB,KB=WB,QB=function(){function r(t,e,n){if(typeof t!="string")throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:t,enumerable:!0},localAudioTrackStats:{value:e.localAudioTrackStats.map(function(i){return new qB(i.trackId,i,n)}),enumerable:!0},localVideoTrackStats:{value:e.localVideoTrackStats.map(function(i){return new HB(i.trackId,i,n)}),enumerable:!0},remoteAudioTrackStats:{value:e.remoteAudioTrackStats.map(function(i){return new GB(i.trackId,i)}),enumerable:!0},remoteVideoTrackStats:{value:e.remoteVideoTrackStats.map(function(i){return new KB(i.trackId,i)}),enumerable:!0}})}return r}(),CT=QB,YB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zu=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},_h=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},JB=df,XB=bB,ZB=CT,LT=Me,e9=LT.flatMap,t9=LT.valueToJSON,r9=0,n9=function(r){YB(t,r);function t(e,n,i){var a=r.call(this)||this,o=i.log.createLog("default",a),s=new Map;return Object.defineProperties(a,{_log:{value:o},_clientTrackSwitchOffControl:{value:i.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:i.contentPreferencesMode||"disabled"},_instanceId:{value:++r9},_options:{value:i},_participants:{value:s},_signaling:{value:n},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(n.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return n.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:n.name},participants:{enumerable:!0,value:s},sid:{enumerable:!0,value:n.sid},state:{enumerable:!0,get:function(){return n.state}},mediaRegion:{enumerable:!0,value:n.mediaRegion}}),a9(a,e),o9(a,n.recording),s9(a,n),i9(a),o.info("Created a new Room:",a.name),o.debug("Initial RemoteParticipants:",Array.from(a._participants.values())),a}return t.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},t.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},t.prototype.getStats=function(){var e=this;return this._signaling.getStats().then(function(n){return Array.from(n).map(function(i){var a=Zu(i,2),o=a[0],s=a[1];return new ZB(o,Object.assign({},s,{localAudioTrackStats:T5(e,s.localAudioTrackStats),localVideoTrackStats:T5(e,s.localVideoTrackStats)}))})})},t.prototype.refreshInactiveMedia=function(){var e=this.localParticipant.tracks,n=Array.from(e.values()).filter(function(l){var c=l.track.kind;return c!=="data"}).map(function(l){var c=l.track;return c}),i=e9(this.participants,function(l){return Array.from(l.tracks.values())}).filter(function(l){var c=l.track;return c&&c.kind!=="data"}).map(function(l){var c=l.track;return c}),a=n.concat(i),o=new Event("unmute");n.forEach(function(l){var c=l.isMuted,u=l.mediaStreamTrack;c&&u.dispatchEvent(o)});var s=new Event("pause");return a.forEach(function(l){var c=l._attachments,u=l._elShims;return c.forEach(function(d){var v=u.get(d),p=d.paused&&v&&!v.pausedIntentionally();p&&d.dispatchEvent(s)})}),this},t.prototype.toJSON=function(){return t9(this)},t}(JB);function i9(r){var t=r.localParticipant._signaling.audioProcessors;r.localParticipant.audioTracks.forEach(function(e){var n=e.track,i=n.noiseCancellation;i&&!t.includes(i.vendor)&&(r._log.warn(i.vendor+" is not supported in this room. disabling it permanently"),i.disablePermanently())})}function T5(r,t){var e=r.localParticipant._signaling;return t.reduce(function(n,i){var a=e.tracks.get(i.trackId),o=e.getSender(a);return o?[Object.assign({},i,{trackId:o.id})].concat(n):n},[])}function E5(r,t){var e=r._log,n=r._clientTrackSwitchOffControl,i=r._contentPreferencesMode,a=r._options,o=a.MediaStream,s=a.mapMediaElement,l=a.disposeMediaElement,c=new XB(t,{log:e,clientTrackSwitchOffControl:n,contentPreferencesMode:i,MediaStream:o,mapMediaElement:s,disposeMediaElement:l});e.info("A new RemoteParticipant connected:",c),r._participants.set(c.sid,c),r.emit("participantConnected",c);var u=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(d){var v=Zu(Array.isArray(d)?d:[d,d],2),p=v[0],y=v[1];function _(){var x=[].slice.call(arguments);x.unshift(y),x.push(c),r.emit.apply(r,_h([],Zu(x)))}return c.on(p,_),[p,_]});c.once("disconnected",function(){var v=r.dominantSpeaker;e.info("RemoteParticipant disconnected:",c),r._participants.delete(c.sid),u.forEach(function(p){c.removeListener(p[0],p[1])}),r.emit("participantDisconnected",c),c===v&&r.emit("dominantSpeakerChanged",r.dominantSpeaker)})}function a9(r,t){var e=["trackWarning","trackWarningsCleared"].map(function(n){return{eventName:n,handler:function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.emit.apply(r,_h([n],Zu(_h(_h([],Zu(i)),[t]))))}}});e.forEach(function(n){var i=n.eventName,a=n.handler;return t.on(i,a)}),r.once("disconnected",function(){return e.forEach(function(n){var i=n.eventName,a=n.handler;return t.removeListener(i,a)})})}function o9(r,t){t.on("updated",function(){var n=t.isEnabled;r._log.info("Recording "+(n?"started":"stopped")),r.emit("recording"+(n?"Started":"Stopped"))})}function s9(r,t){var e=r._log;e.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),t.participants.forEach(E5.bind(null,r)),e.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),t.on("participantConnected",E5.bind(null,r)),t.on("dominantSpeakerChanged",function(){return r.emit("dominantSpeakerChanged",r.dominantSpeaker)}),t.on("transcription",function(n){return r.emit("transcription",n)}),t.on("stateChanged",function n(i,a){switch(e.info("Transitioned to state:",i),i){case"disconnected":r.participants.forEach(function(o){o._unsubscribeTracks()}),r.emit(i,r,a),r.localParticipant.tracks.forEach(function(o){o.unpublish()}),t.removeListener("stateChanged",n);break;case"reconnecting":setTimeout(function(){return r.emit("reconnecting",a)},0);break;default:setTimeout(function(){return r.emit("reconnected")},0)}})}var c9=n9,l9=function(){function r(t){Object.defineProperties(this,{_min:{value:t.min||100},_max:{value:t.max||1e4},_jitter:{value:t.jitter>0&&t.jitter<=1?t.jitter:0},_factor:{value:t.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var e=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var n=Math.random(),i=Math.floor(n*this._jitter*e);e=Math.floor(n*10)&1?e+i:e-i}return Math.min(e,this._max)|0}},_timeoutID:{value:null,writable:!0}})}return r.prototype.backoff=function(t){var e=this,n=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){e._attempts++,t()},n)},r.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},r}(),OT=l9,_n={},u9=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},AT=Me,Jm=AT.difference,La=AT.flatMap;function Xm(){var r=4294967295;return String(Math.floor(Math.random()*r))}var f9=function(){function r(t,e,n){Object.defineProperties(this,{cName:{enumerable:!0,value:n},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:e},trackId:{enumerable:!0,value:t}})}return r.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var t=[Xm(),Xm()];t.forEach(function(e){this.primarySSRCs.add(e)},this),this.rtxPairs.size&&t.forEach(function(e){this.rtxPairs.set(Xm(),e)},this)}},r.prototype.addSSRC=function(t,e,n){e?this.rtxPairs.set(t,e):this.primarySSRCs.add(t),this.isSimulcastEnabled=this.isSimulcastEnabled||n},r.prototype.toSdpLines=function(t){var e=this,n=t?[]:Array.from(this.rtxPairs.entries()).map(function(c){return c.reverse()}),i=Array.from(this.primarySSRCs.values()),a=n.length?La(n):i,o=La(a,function(c){return["a=ssrc:"+c+" cname:"+e.cName,"a=ssrc:"+c+" msid:"+e.streamId+" "+e.trackId]}),s=n.map(function(c){return"a=ssrc-group:FID "+c.join(" ")}),l=["a=ssrc-group:SIM "+i.join(" ")];return s.concat(o).concat(l)},r}();function op(r,t){var e=r.match(new RegExp(t,"gm"))||[];return e.map(function(n){var i=n.match(new RegExp(t))||[];return i.slice(1)})}function d9(r){var t="^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$";return new Set(La(op(r,t)))}function h9(r,t,e){var n="a=ssrc:"+t+" "+e+":(.+)";return r.match(new RegExp(n))[1]}function p9(r){var t="^a=ssrc-group:FID ([0-9]+) ([0-9]+)$";return new Map(op(r,t).map(function(e){return e.reverse()}))}function v9(r){var t=u9(La(op(r,"^a=msid:(.+) (.+)$")),2),e=t[0],n=t[1],i=La(op(r,"^a=ssrc:(.+) cname:.+$"));return i.map(function(a){return[a,e,n]})}function m9(r){var t=d9(r),e=p9(r),n=v9(r);return n.reduce(function(i,a){var o=a[0],s=a[1],l=a[2],c=i.get(l)||new f9(l,s,h9(r,o,"cname")),u=e.get(o)||null;return c.addSSRC(o,u,t.has(o)),i.set(l,c)},new Map)}function g9(r,t){var e=m9(r),n=Array.from(e.keys()),i=Array.from(t.keys()),a=Jm(n,i),o=Jm(i,n),s=La(a,function(y){return e.get(y)});s.forEach(function(y){y.addSimulcastSSRCs(),t.set(y.trackId,y)}),i=Array.from(t.keys());var l=Jm(i,o),c=La(l,function(y){return t.get(y)}),u=!r.match(/a=rtpmap:[0-9]+ rtx/),d=La(c,function(y){return y.toSdpLines(u)}),v=La(new Set(r.split(`\r
`).concat(d))),p="a=x-google-flag:conference";return r.match(p)||v.push(p),v.join(`\r
`)}var y9=g9,Ss=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},C5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},NT=Me,_9=NT.difference,ny=NT.flatMap,w9=y9,L5={0:"PCMU",8:"PCMA"};function ul(r){return Array.from(Yp(r)).reduce(function(t,e){var n=e[0],i=e[1],a=t.get(i)||[];return t.set(i,a.concat(n))},new Map)}function iy(r){return na(r).reduce(function(t,e){var n=rl(e);return n?t.set(n,e):t},new Map)}function Yp(r){return pf(r).reduce(function(t,e){if(t.has(e))return t;var n=new RegExp("a=rtpmap:"+e+" ([^/]+)"),i=r.match(n),a=i?i[1].toLowerCase():L5[e]?L5[e].toLowerCase():"";return t.set(e,a)},new Map)}function sp(r,t){var e=new RegExp("^a=fmtp:"+r+" (.+)$","m"),n=t.match(e);return n&&n[1].split(";").reduce(function(i,a){var o=Ss(a.split("="),2),s=o[0],l=o[1];return i[s]=isNaN(l)?l:parseInt(l,10),i},{})}function rl(r){var t=r.match(/^a=mid:(.+)$/m);return t&&t[1]}function na(r,t,e){return r.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(function(n){return"m="+n}).filter(function(n){var i=new RegExp("m="+(t||".*"),"gm"),a=new RegExp("a="+(e||".*"),"gm");return i.test(n)&&a.test(n)})}function pf(r){var t=r.split(`\r
`)[0],e=t.match(/([0-9]+)/g);return e?e.slice(1).map(function(n){return parseInt(n,10)}):[]}function b9(r,t){t=t.map(function(a){var o=a.codec;return o.toLowerCase()});var e=ny(t,function(a){return r.get(a)||[]}),n=_9(Array.from(r.keys()),t),i=ny(n,function(a){return r.get(a)});return e.concat(i)}function e_(r,t){var e=t.split(`\r
`),n=e[0],i=e.slice(1);return n=n.replace(/([0-9]+\s?)+$/,r.join(" ")),[n].concat(i).join(`\r
`)}function S9(r,t,e){var n=na(r),i=r.split(`\r
m=`)[0];return[i].concat(n.map(function(a){if(!/^m=(audio|video)/.test(a))return a;var o=a.match(/^m=(audio|video)/)[1],s=ul(a),l=o==="audio"?t:e,c=b9(s,l),u=e_(c,a),d=s.get("pcma")||[],v=s.get("pcmu")||[],p=o==="audio"?new Set(d.concat(v)):new Set;return p.has(c[0])?u.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):u})).join(`\r
`)}function x9(r,t){var e=na(r),n=r.split(`\r
m=`)[0];return[n].concat(e.map(function(i){if(i=i.replace(/\r\n$/,""),!/^m=video/.test(i))return i;var a=ul(i),o=pf(i),s=new Set(a.get("vp8")||[]),l=o.some(function(c){return s.has(c)});return l?w9(i,t):i})).concat("").join(`\r
`)}function k9(r,t,e,n,i){var a=e.get(r)||[];if(a.length<=1)return a;var o=sp(t,i);if(!o)return a;var s=a.find(function(l){var c=sp(l,n);return c&&Object.keys(o).every(function(u){return o[u]===c[u]})});return typeof s=="number"?[s]:a}function P9(r,t,e){if(!/^m=(audio|video)/.test(r))return r;var n=rl(r),i=n&&t.get(n);if(!i)return r;var a=Yp(i),o=ul(r),s=ny(Array.from(a),function(p){var y=Ss(p,2),_=y[0],x=y[1];return x!=="rtx"&&!e.includes(x)?k9(x,_,o,r,i):[]}),l=o.get("rtx")||[],c=l.filter(function(p){var y=sp(p,r);return y&&s.includes(y.apt)});s=Array.from(new Set(C5(C5([],Ss(s)),Ss(c))));var u=r.split(`\r
`).filter(function(p){var y=p.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),_=y&&y[2];return!y||_&&s.includes(parseInt(_,10))}),d=pf(r).filter(function(p){return s.includes(p)}),v=Array.from(new Set(d));return e_(v,u.join(`\r
`))}function T9(r,t){var e=na(r),n=r.split(`\r
m=`)[0],i=iy(t);return[n].concat(e.map(function(a){return P9(a,i,[])})).join(`\r
`)}function E9(r,t,e,n){n===void 0&&(n=!1);var i=iy(e),a=iy(t),o=na(r),s=r.split(`\r
m=`)[0];return[s].concat(o.map(function(l){if(l=l.replace(/\r\n$/,""),!/^m=video/.test(l))return l;var c=l.match(/^a=mid:(.+)$/m),u=c&&c[1];if(!u)return l;var d=i.get(u),v=Yp(d),p=pf(d),y=p.length&&v.get(p[0])==="vp8",_=n||!y;return _?a.get(u).replace(/\r\n$/,""):l})).concat("").join(`\r
`)}function C9(r,t,e){var n=Array.from(e).reduce(function(i,a){var o=Ss(a,2),s=o[0],l=o[1],c=na(r,s,"send(only|recv)"),u=c.map(rl).filter(function(d){return!t.has(d)});return u.forEach(function(d,v){return i.set(d,l[v])}),i},new Map);return RT(r,n)}function RT(r,t){var e=na(r),n=r.split(`\r
m=`)[0];return[n].concat(e.map(function(i){if(!/^m=(audio|video)/.test(i))return i;var a=rl(i);if(!a)return i;var o=t.get(a);if(!o)return i;var s=(i.match(/^a=msid:(.+)$/m)||[])[1];if(!s)return i;var l=Ss(s.split(" "),2),c=l[0],u=l[1],d=new RegExp("msid:"+c+(u?" "+u:"")+"$","gm");return i.replace(d,"msid:"+c+" "+o)})).join(`\r
`)}function L9(r,t){return r.split(`\r
`).filter(function(e){return!t.find(function(n){return new RegExp("a=ssrc:.*"+n+":","g").test(e)})}).join(`\r
`)}function O9(r){var t=na(r),e=r.split(`\r
m=`)[0];return[e].concat(t.map(function(n){if(!/^m=video/.test(n))return n;var i=ul(n),a=i.get("rtx");if(!a)return n;var o=new Set(pf(n));a.forEach(function(u){return o.delete(u)});var s=n.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),l=s&&s[1],c=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(l?[new RegExp("^a=ssrc:"+l+" .+$")]:[]);return n=n.split(`\r
`).filter(function(u){return c.every(function(d){return!d.test(u)})}).join(`\r
`),e_(Array.from(o),n)})).join(`\r
`)}function O5(r,t){var e=Object.entries(t).map(function(n){var i=Ss(n,2),a=i[0],o=i[1];return a+"="+o}).join(";");return"a=fmtp:"+r+" "+e}function A9(r,t){var e=na(r),n=r.split(`\r
m=`)[0];return t=t||e.filter(function(i){return/^m=audio/.test(i)}).map(rl),[n].concat(e.map(function(i){if(!/^m=audio/.test(i))return i;var a=ul(i),o=a.get("opus");if(!o)return i;var s=sp(o,i);if(!s)return i;var l=O5(o,s),c=new RegExp(l),u=rl(i);t.includes(u)?s.usedtx=1:delete s.usedtx;var d=O5(o,s);return i.replace(c,d)})).join(`\r
`)}_n.addOrRewriteNewTrackIds=C9;_n.addOrRewriteTrackIds=RT;_n.createCodecMapForMediaSection=ul;_n.createPtToCodecName=Yp;_n.disableRtx=O9;_n.enableDtxForOpus=A9;_n.filterLocalCodecs=T9;_n.getMediaSections=na;_n.removeSSRCAttributes=L9;_n.revertSimulcast=E9;_n.setCodecPreferences=S9;_n.setSimulcast=x9;var N9=function(){function r(t){t=Object.assign({getKey:function(n){return n},getValue:function(n){return n},isLessThanOrEqualTo:function(n,i){return n<=i}},t),Object.defineProperties(this,{_getKey:{value:t.getKey},_getValue:{value:t.getValue},_isLessThanOrEqualTo:{value:t.isLessThanOrEqualTo},_map:{value:new Map}})}return r.prototype.toMap=function(){return new Map(this._map)},r.prototype.updateAndFilter=function(t){return t.filter(this.update,this)},r.prototype.update=function(t){var e=this._getKey(t),n=this._getValue(t);return this._map.has(e)&&this._isLessThanOrEqualTo(n,this._map.get(e))?!1:(this._map.set(e,n),!0)},r}(),R9=N9,j9=R9,I9=function(){function r(){Object.defineProperties(this,{_filter:{value:new j9({getKey:function(e){return e.ufrag},isLessThanOrEqualTo:function(e,n){return e.revision<=n.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return r.prototype.setUfrag=function(t){this._ufrag=t;var e=this._filter.toMap().get(t);return e?e.candidates:[]},r.prototype.update=function(t){t.candidates=t.candidates||[];var e=this._filter.toMap().get(t.ufrag),n=e?e.candidates:[];return this._filter.update(t)&&this._ufrag===t.ufrag?t.candidates.slice(n.length):[]},r}(),M9=I9,jT=zt,D9=jT.ICE_ACTIVITY_CHECK_PERIOD_MS,F9=jT.ICE_INACTIVITY_THRESHOLD_MS,B9=function(){function r(t,e){e=Object.assign({activityCheckPeriodMs:D9,inactivityThresholdMs:F9},e),Object.defineProperties(this,{_activityCheckPeriodMs:{value:e.activityCheckPeriodMs},_inactivityThresholdMs:{value:e.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:t},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return r.prototype._getActivePairStat=function(t){var e=Array.from(t.values()),n=e.find(function(i){return i.type==="candidate-pair"&&i.nominated});return n||{bytesReceived:0,timestamp:Math.round(new Date().getTime())}},r.prototype._getIceConnectionStats=function(){var t=this;return this._peerConnection.getStats().then(function(e){return t._getActivePairStat(e)}).catch(function(){return null})},r.prototype._scheduleInactivityCallback=function(t){var e=this;t&&this._onIceConnectionStateChanged===null?(this._onIceConnectionStateChanged=function(){e._peerConnection.iceConnectionState==="disconnected"&&t()},this._peerConnection.addEventListener?this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=this._onIceConnectionStateChanged):!t&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener?this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=null,this._onIceConnectionStateChanged=null)},r.prototype.start=function(t){var e=this;this.stop(),this._timer=setInterval(function(){e._getIceConnectionStats().then(function(n){n&&((!e._lastActivity||e._lastActivity.bytesReceived!==n.bytesReceived)&&(e._lastActivity=n,e._scheduleInactivityCallback(null)),n.timestamp-e._lastActivity.timestamp>=e._inactivityThresholdMs&&(e._peerConnection.iceConnectionState==="disconnected"?t():e._onIceConnectionStateChanged===null&&e._scheduleInactivityCallback(t)))})},this._activityCheckPeriodMs)},r.prototype.stop=function(){this._scheduleInactivityCallback(null),this._timer!==null&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},r}(),U9=B9,$9=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),V9=yn.EventEmitter,z9=function(r){$9(t,r);function t(e){var n=r.call(this)||this;return Object.defineProperties(n,{_dataChannel:{value:e},_messageQueue:{value:[]}}),e.addEventListener("open",function(){n._messageQueue.splice(0).forEach(function(i){return n._publish(i)})}),e.addEventListener("message",function(i){var a=i.data;try{var o=JSON.parse(a);n.emit("message",o)}catch{}}),n.publish({type:"ready"}),n}return t.prototype._publish=function(e){var n=JSON.stringify(e);try{this._dataChannel.send(n)}catch{}},t.prototype.publish=function(e){var n=this._dataChannel;return n.readyState==="closing"||n.readyState==="closed"?!1:n.readyState==="connecting"?(this._messageQueue.push(e),!0):(this._publish(e),!0)},t}(V9),W9=z9,q9=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),H9=G3,G9=W9,K9=function(r){q9(t,r);function t(e){var n=r.call(this,e.label,e.maxPacketLifeTime,e.maxRetransmits,e.ordered)||this;return Object.defineProperties(n,{_dataChannel:{value:e}}),e.binaryType="arraybuffer",e.addEventListener("message",function(i){n.emit("message",i.data)}),e.addEventListener("close",function(){n.emit("close")}),n}return t.prototype.stop=function(){this._dataChannel.close(),r.prototype.stop.call(this)},t.prototype.toDataTransport=function(){return new G9(this._dataChannel)},t}(H9),Q9=K9,Y9=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),J9=F3,X9=function(r){Y9(t,r);function t(e,n){return r.call(this,e,n)||this}return t}(J9),Z9=X9,eU=_n.getMediaSections,tU=function(){function r(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return r.prototype.match=function(t){return this._midsToTrackIds.get(t.transceiver.mid)||null},r.prototype.update=function(t){var e=eU(t,"(audio|video)");this._midsToTrackIds=e.reduce(function(n,i){var a=i.match(/^a=mid:(.+)$/m)||[],o=i.match(/^a=msid:.+ (.+)$/m)||[],s=a[1],l=o[1];return s&&l?n.set(s,l):n},this._midsToTrackIds)},r}(),rU=tU,nU=Ds.RTCSessionDescription,IT=_n,iU=IT.createPtToCodecName,aU=IT.getMediaSections;function oU(r){var t={type:r.type};return r.type!=="rollback"&&(t.sdp=sU(r.sdp)),new nU(t)}function sU(r){var t=aU(r),e=r.split(`\r
m=`)[0];return[e].concat(t.map(cU)).join(`\r
`)}function cU(r){var t=iU(r);r=uU(r,t),r=lU(r);var e=fU(t),n=e.get("rtx")||new Set,i=new Set,a=dU(r,t,n,i),o=hU(a,i),s=Array.from(i),l=["h264","vp8","vp9"],c=l.reduce(function(u,d){var v=e.get(d)||new Set;return Array.from(v).reduce(function(p,y){return o.has(y)?p:p.add(y)},u)},new Set);return c.forEach(function(u){if(s.length){var d=s.shift();r=A5(r,d),r=vU(r,d,u)}}),s.forEach(function(u){r=A5(r,u),r=pU(r,u)}),r}function lU(r){for(var t=r.split(`\r
`),e=new Map,n=96,i=0;i<t.length;i++){var a=t[i].match(/^a=rtpmap:(\d+) ([^/]+)/);if(a){var o=parseInt(a[1],10),s=a[2].toLowerCase();if(e.has(o)&&e.get(o)!==s){for(;e.has(n)||n===o;)n++;var l=n;e.set(l,s),t[i]=t[i].replace("a=rtpmap:"+o,"a=rtpmap:"+l);for(var c=i+1;c<t.length;c++)t[c].match(new RegExp("^a=(fmtp|rtcp-fb):"+o+"\\b"))&&(t[c]=t[c].replace(new RegExp("^a=(fmtp|rtcp-fb):"+o+"\\b"),"a=$1:"+l))}else e.set(o,s)}}return t.join(`\r
`)}function uU(r,t){return Array.from(t.keys()).reduce(function(e,n){var i=new RegExp("^a=rtpmap:"+n+" rtx.+$","gm");return(e.match(i)||[]).slice(t.get(n)==="rtx"?1:0).reduce(function(a,o){var s=new RegExp(`\r
`+o),l=new RegExp(`\r
a=fmtp:`+n+" apt=[0-9]+");return a.replace(s,"").replace(l,"")},e)},r)}function fU(r){var t=new Map;return r.forEach(function(e,n){var i=t.get(e)||new Set;return t.set(e,i.add(n))}),t}function dU(r,t,e,n){return Array.from(e).reduce(function(i,a){var o=new RegExp("a=fmtp:"+a+" apt=(\\d+)"),s=r.match(o);if(!s)return n.add(a),i;var l=Number.parseInt(s[1]);if(!t.has(l))return n.add(a),i;var c=t.get(l);return c==="rtx"?(n.add(a),i):i.set(a,l)},new Map)}function hU(r,t){var e=Array.from(r).reduce(function(n,i){var a=i[0],o=i[1],s=n.get(o)||new Set;return n.set(o,s.add(a))},new Map);return Array.from(e).reduce(function(n,i){var a=i[0],o=Array.from(i[1]);return o.length>1?(o.forEach(function(s){t.add(s)}),n):n.set(a,o[0])},new Map)}function A5(r,t){var e=new RegExp("a=fmtp:"+t+`.*\r
`,"gm");return r.replace(e,"")}function pU(r,t){var e=new RegExp("a=rtpmap:"+t+`.*\r
`,"gm");return r.replace(e,"")}function vU(r,t,e){return r.endsWith(`\r
`)?r+"a=fmtp:"+t+" apt="+e+`\r
`:r+`\r
a=fmtp:`+t+" apt="+e}var mU=oU,gU=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yU=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},_U=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},wU=OT,Jp=Ds,bU=Jp.RTCIceCandidate,SU=Jp.RTCPeerConnection,xU=Jp.RTCSessionDescription,kU=Jp.getStats,MT=Dt,Xp=zt,PU=Xp.DEFAULT_ICE_GATHERING_TIMEOUT_MS,TU=Xp.DEFAULT_LOG_LEVEL,EU=Xp.DEFAULT_SESSION_TIMEOUT_SEC,CU=Xp.iceRestartBackoffConfig,Ni=_n,LU=Ni.addOrRewriteNewTrackIds,OU=Ni.addOrRewriteTrackIds,DT=Ni.createCodecMapForMediaSection,N5=Ni.disableRtx,jd=Ni.enableDtxForOpus,AU=Ni.filterLocalCodecs,Cu=Ni.getMediaSections,R5=Ni.removeSSRCAttributes,NU=Ni.revertSimulcast,RU=Ni.setCodecPreferences,jU=Ni.setSimulcast,IU=Bs,FT=Fe,Zm=FT.MediaClientLocalDescFailedError,eg=FT.MediaClientRemoteDescFailedError,vf=Me,MU=vf.buildLogLevels,DU=vf.getPlatform,FU=vf.isChromeScreenShareTrack,BU=vf.oncePerTick,UU=vf.defer,$U=M9,VU=U9,zU=Q9,WU=Z9,qU=cl,HU=Da,GU=rU,j5=mU,t_=MT.guessBrowser(),KU=DU(),QU=/android/.test(KU),YU=t_==="chrome",hs=t_==="firefox",JU=t_==="safari",XU=0,ZU={open:["closed","updating"],updating:["closed","open"],closed:[]},e$=function(r){gU(t,r);function t(e,n,i,a){var o=r.call(this,"open",ZU)||this;a=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:FU,iceServers:[],logLevel:TU,offerOptions:{},revertSimulcast:NU,sessionTimeout:EU*1e3,setCodecPreferences:RU,setSimulcast:jU,Backoff:wU,IceConnectionMonitor:VU,RTCIceCandidate:bU,RTCPeerConnection:SU,RTCSessionDescription:xU,Timeout:IU},a);var s=F5(Object.assign({},a,a.rtcConfiguration)),l=MU(a.logLevel),c=a.RTCPeerConnection;a.enableDscp===!0&&(a.chromeSpecificConstraints=a.chromeSpecificConstraints||{},a.chromeSpecificConstraints.optional=a.chromeSpecificConstraints.optional||[],a.chromeSpecificConstraints.optional.push({googDscp:!0}));var u=a.log?a.log.createLog("webrtc",o):new HU("webrtc",o,l,a.loggerName),d=new c(s,a.chromeSpecificConstraints);a.dummyAudioMediaStreamTrack&&d.addTrack(a.dummyAudioMediaStreamTrack),Object.defineProperties(o,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:a.enableDscp},_encodingParameters:{value:n},_isChromeScreenShareTrack:{value:a.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new a.Timeout(function(){return o._handleIceGatheringTimeout()},PU,!1)},_iceRestartBackoff:{value:new a.Backoff(CU)},_instanceId:{value:++XU},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:u},_eventObserver:{value:a.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new a.IceConnectionMonitor(d)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:a.offerOptions},_onEncodingParametersChanged:{value:BU(function(){o._needsAnswer||BT(o)})},_peerConnection:{value:d},_preferredAudioCodecs:{value:i.audio},_preferredVideoCodecs:{value:i.video},_shouldApplyDtx:{value:i.audio.every(function(p){var y=p.codec;return y!=="opus"})||i.audio.some(function(p){var y=p.codec,_=p.dtx;return y==="opus"&&_})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new a.Timeout(function(){u.debug("ICE reconnect timed out"),o.close()},a.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new $U},_setCodecPreferences:{value:hs&&QU&&i.video[0]&&i.video[0].codec.toLowerCase()!=="h264"?function(p){return p}:a.setCodecPreferences},_setSimulcast:{value:a.setSimulcast},_revertSimulcast:{value:a.revertSimulcast},_RTCIceCandidate:{value:a.RTCIceCandidate},_RTCPeerConnection:{value:a.RTCPeerConnection},_RTCSessionDescription:{value:a.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:e}}),n.on("changed",o._onEncodingParametersChanged),d.addEventListener("connectionstatechange",o._handleConnectionStateChange.bind(o)),d.addEventListener("datachannel",o._handleDataChannelEvent.bind(o)),d.addEventListener("icecandidate",o._handleIceCandidateEvent.bind(o)),d.addEventListener("iceconnectionstatechange",o._handleIceConnectionStateChange.bind(o)),d.addEventListener("icegatheringstatechange",o._handleIceGatheringStateChange.bind(o)),d.addEventListener("signalingstatechange",o._handleSignalingStateChange.bind(o)),d.addEventListener("track",o._handleTrackEvent.bind(o));var v=o;return o.on("stateChanged",function p(y){y==="closed"&&(v.removeListener("stateChanged",p),v._dataChannels.forEach(function(_,x){v.removeDataTrackSender(x)}))}),o}return t.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",e),this._preferredVideoCodecs.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=e)})},Object.defineProperty(t.prototype,"_shouldApplySimulcast",{get:function(){if(!YU&&!JU)return!1;var e=this._preferredVideoCodecs.some(function(n){return n.codec.toLowerCase()==="vp8"&&n.simulcast&&n.adaptiveSimulcast!==!1});return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){return this.iceConnectionState==="failed"?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&this._peerConnection.iceConnectionState==="disconnected"||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isApplicationSectionNegotiated",{get:function(){return this._peerConnection.signalingState!=="closed"?this._peerConnection.localDescription?Cu(this._peerConnection.localDescription.sdp,"application").length>0:!1:!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var e=this._preferredVideoCodecs.find(function(n){return"adaptiveSimulcast"in n});return e&&e.adaptiveSimulcast===!0},enumerable:!1,configurable:!0}),t.prototype._maybeUpdateEncodings=function(e,n,i){if(i===void 0&&(i=!1),e.kind!=="video"||e.readyState==="ended")return!1;var a=e.getSettings(),o=a.height,s=a.width;if(typeof o!="number"||typeof s!="number")return!1;var l=MT.guessBrowser();return l==="safari"||l==="chrome"&&this._isAdaptiveSimulcastEnabled?(this._updateEncodings(e,n,i),!0):!1},t.prototype._updateEncodings=function(e,n,i){if(this._isChromeScreenShareTrack(e)){var a=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];n.forEach(function(p,y){var _=a[y];_?(p.scaleResolutionDownBy=_.scaleResolutionDownBy,i&&delete p.active):(p.active=!1,delete p.scaleResolutionDownBy)})}else{var o=e.getSettings(),s=o.width,l=o.height,c=[{pixels:960*540,maxActiveLayers:3},{pixels:480*270,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}],u=s*l,d=c.find(function(p){return u>=p.pixels}),v=Math.min(n.length,d.maxActiveLayers);n.forEach(function(p,y){var _=y<v;_?(p.scaleResolutionDownBy=1<<v-y-1,i&&(p.active=!0)):(p.active=!1,delete p.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",n.map(function(p,y){var _=p.active,x=p.scaleResolutionDownBy;return"["+y+": "+_+", "+(x||0)+"]"}).join(", "))},t.prototype._addIceCandidate=function(e){var n=this;return Promise.resolve().then(function(){return e=new n._RTCIceCandidate(e),n._peerConnection.addIceCandidate(e)}).catch(function(i){n._log.warn("Failed to add RTCIceCandidate "+(e?'"'+e.candidate+'"':"null")+": "+i.message)})},t.prototype._addIceCandidates=function(e){return Promise.all(e.map(this._addIceCandidate,this)).then(function(){})},t.prototype._addOrUpdateTransceiver=function(e){var n=this,i=a$(this,e.kind);if(i&&i.sender){var a=i.sender.track?i.sender.track.id:null;return a&&this._log.warn("Reusing transceiver: "+i.mid+"] "+a+" => "+e.id),this._replaceTrackPromises.set(i,i.sender.replaceTrack(e).then(function(){i.direction="sendrecv"},function(){}).finally(function(){n._replaceTrackPromises.delete(i)})),i}return this._peerConnection.addTransceiver(e,{})},t.prototype._checkIceBox=function(e){var n=D5(e);if(!n)return Promise.resolve();var i=this._remoteCandidates.setUfrag(n);return this._addIceCandidates(i)},t.prototype._answer=function(e){var n=this;return Promise.resolve().then(function(){return n._negotiationRole||(n._negotiationRole="answerer"),n._setRemoteDescription(e)}).catch(function(){throw new eg}).then(function(){return n._peerConnection.createAnswer()}).then(function(i){hs?i=new n._RTCSessionDescription({sdp:N5(i.sdp),type:i.type}):i=j5(i);var a=R5(i.sdp,["mslabel","label"]);if(n._shouldApplySimulcast){var o=a;a=n._setSimulcast(o,n._trackIdsToAttributes),a=n._revertSimulcast(a,o,e.sdp)}return a=a.replace(/42e015/g,"42e01f"),n._setLocalDescription({type:i.type,sdp:a})}).then(function(){return n._checkIceBox(e)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription)}).catch(function(i){var a=i instanceof eg?i:new Zm;throw n._publishMediaWarning({message:"Failed to _answer",code:a.code,error:i}),a})},t.prototype._close=function(){return this._iceConnectionMonitor.stop(),this._peerConnection.signalingState!=="closed"?(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0):!1},t.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},t.prototype._handleDataChannelEvent=function(e){var n=this,i=e.channel,a=new zU(i);this._dataTrackReceivers.add(a),i.addEventListener("close",function(){n._dataTrackReceivers.delete(a)}),this.emit("trackAdded",a)},t.prototype._handleGlare=function(e){var n=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return n._trackIdsToAttributes=new Map(n._appliedTrackIdsToAttributes),n._setLocalDescription({type:"rollback"})}).then(function(){return n._needsAnswer=!1,n._answer(e)}).then(function(i){return i?Promise.resolve():n._offer()})},t.prototype._publishMediaWarning=function(e){var n=e.message,i=e.code,a=e.error,o=e.sdp;this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:n,code:i,context:JSON.stringify({error:a.message,sdp:o})}})},t.prototype._handleIceCandidateEvent=function(e){e.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(e.candidate));var n={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};e.candidate||(n.ice.complete=!0),this._isIceLite&&e.candidate||(n.ice.revision=this._localCandidatesRevision++,this.emit("candidates",n))},t.prototype._handleIceConnectionStateChange=function(){var e=this,n=this._peerConnection.iceConnectionState,i=["connected","completed"].includes(n),a=this._log;a.debug('ICE connection state is "'+n+'"'),i&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),this._lastIceConnectionState!=="failed"&&n==="failed"&&!this._shouldRestartIce&&!this._isRestartingIce?(a.warn("ICE failed"),this._initiateIceRestartBackoff()):["disconnected","failed"].includes(this._lastIceConnectionState)&&i&&a.debug("ICE reconnected"),n==="connected"?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){e._iceConnectionMonitor.stop(),!e._shouldRestartIce&&!e._isRestartingIce&&(a.warn("ICE Connection Monitor detected inactivity"),e._isIceConnectionInactive=!0,e._initiateIceRestartBackoff(),e.emit("iceConnectionStateChanged"),e.emit("connectionStateChanged"))})):["disconnected","completed"].includes(n)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=n,this.emit("iceConnectionStateChanged")},t.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},t.prototype._handleIceGatheringStateChange=function(){var e=this._peerConnection.iceGatheringState,n=this._log;n.debug('ICE gathering state is "'+e+'"');var i=this._iceGatheringTimeout,a=i.delay,o=i.isSet;e==="gathering"&&!this._didGenerateLocalCandidates&&!o&&(n.debug("Starting ICE gathering timeout: "+a),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},t.prototype._handleSignalingStateChange=function(){this._peerConnection.signalingState==="stable"&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},t.prototype._handleTrackEvent=function(e){var n=this,i=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new GU,this._trackMatcher.update(i);var a=e.track,o=this._trackMatcher.match(e)||a.id,s=new WU(o,a);this._mediaTrackReceivers.forEach(function(l){l.track.id===s.track.id&&n._mediaTrackReceivers.delete(l)}),this._mediaTrackReceivers.add(s),a.addEventListener?a.addEventListener("ended",function(){return n._mediaTrackReceivers.delete(s)}):a.onended=function(){return n._mediaTrackReceivers.delete(s)},this.emit("trackAdded",s)},t.prototype._initiateIceRestart=function(){if(this._peerConnection.signalingState!=="closed"){var e=this._log;e.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var n=this._iceReconnectTimeout,i=n.delay,a=n.isSet;a||(e.debug("Starting ICE reconnect timeout: "+i),this._iceReconnectTimeout.start()),this.offer().catch(function(o){e.error("offer failed in _initiateIceRestart with: "+o.message)})}},t.prototype._initiateIceRestartBackoff=function(){var e=this;this._peerConnection.signalingState==="closed"||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return e._initiateIceRestart()}))},t.prototype._maybeReoffer=function(e){var n=this._shouldOffer;if(e&&e.sdp){var i=this._peerConnection.getSenders().filter(function(c){return c.track});n=["audio","video"].reduce(function(c,u){var d=Cu(e.sdp,u,"(sendrecv|sendonly)"),v=i.filter(r$.bind(null,u));return c||d.length<v.length},n);var a=this._dataChannels.size>0,o=Cu(e.sdp,"application").length>0,s=a&&!o;n=n||s}var l=n?this._offer():Promise.resolve();return l.then(function(){return n})},t.prototype._offer=function(){var e=this,n=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,n.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return e._peerConnection.createOffer(n)}).catch(function(i){var a=new Zm;throw e._publishMediaWarning({message:"Failed to create offer",code:a.code,error:i}),a}).then(function(i){hs?i=new e._RTCSessionDescription({sdp:N5(i.sdp),type:i.type}):i=j5(i);var a=R5(i.sdp,["mslabel","label"]);a=e._peerConnection.remoteDescription?AU(a,e._peerConnection.remoteDescription.sdp):a;var o=e._setCodecPreferences(a,e._preferredAudioCodecs,e._preferredVideoCodecs);return e._shouldOffer=!1,e._negotiationRole||(e._negotiationRole="offerer"),e._shouldApplySimulcast&&(e._localDescriptionWithoutSimulcast={type:"offer",sdp:o},o=e._setSimulcast(o,e._trackIdsToAttributes)),e._setLocalDescription({type:"offer",sdp:o})})},t.prototype._getMediaTrackSenderId=function(e){var n=Array.from(this._rtpSenders.keys()).find(function(i){var a=i.track.id;return a===e});return n?n.id:e},t.prototype._addOrRewriteLocalTrackIds=function(e){var n=this,i=this._peerConnection.getTransceivers(),a=i.filter(function(v){var p=v.sender,y=v.stopped;return!y&&p&&p.track}),o=a.filter(function(v){var p=v.mid;return p}),s=new Map(o.map(function(v){var p=v.mid,y=v.sender;return[p,n._getMediaTrackSenderId(y.track.id)]})),l=OU(e.sdp,s),c=a.filter(function(v){var p=v.mid;return!p}),u=new Map(["audio","video"].map(function(v){return[v,c.filter(function(p){var y=p.sender;return y.track.kind===v}).map(function(p){var y=p.sender;return n._getMediaTrackSenderId(y.track.id)})]})),d=LU(l,s,u);return new this._RTCSessionDescription({sdp:d,type:e.type})},t.prototype._rollbackAndApplyOffer=function(e){var n=this;return this._setLocalDescription({type:"rollback"}).then(function(){return n._setLocalDescription(e)})},t.prototype._setLocalDescription=function(e){var n=this;return e.type!=="rollback"&&this._shouldApplyDtx&&(e=new this._RTCSessionDescription({sdp:jd(e.sdp),type:e.type})),this._peerConnection.setLocalDescription(e).catch(function(i){n._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+i.message+'".',i);var a=new Zm,o={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:a.code,error:i};throw e.sdp&&(n._log.warn("The SDP was "+e.sdp),o.sdp=e.sdp),n._publishMediaWarning(o),a}).then(function(){e.type!=="rollback"&&(n._localDescription=n._addOrRewriteLocalTrackIds(e),n._shouldApplyDtx&&(n._localDescription=new n._RTCSessionDescription({sdp:jd(n._localDescription.sdp,[]),type:n._localDescription.type})),n._localCandidates=[],e.type==="offer"?n._descriptionRevision++:e.type==="answer"&&(n._lastStableDescriptionRevision=n._descriptionRevision,B5(n)),n._localUfrag=D5(e),n.emit("description",n.getState()))})},t.prototype._setRemoteDescription=function(e){var n=this;return e.sdp&&(e.sdp=this._setCodecPreferences(e.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?e.sdp=jd(e.sdp):e.sdp=jd(e.sdp,[]),hs&&(e.sdp=n$(e.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(e.sdp))),e=new this._RTCSessionDescription(e),Promise.resolve().then(function(){if(e.type==="answer"&&n._localDescriptionWithoutSimulcast){var i=n._preferredVideoCodecs.find(function(s){return"adaptiveSimulcast"in s}),a=!!i&&i.adaptiveSimulcast===!1,o=n._revertSimulcast(n._localDescription.sdp,n._localDescriptionWithoutSimulcast.sdp,e.sdp,a);if(n._localDescriptionWithoutSimulcast=null,o!==n._localDescription.sdp)return n._rollbackAndApplyOffer({type:n._localDescription.type,sdp:o})}}).then(function(){return n._peerConnection.setRemoteDescription(e)}).then(function(){e.type==="answer"&&(n._isRestartingIce&&(n._log.debug("An ICE restart was in-progress and is now completed"),n._isRestartingIce=!1),B5(n))},function(i){throw n._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+i.message+'".',i),e.sdp&&n._log.warn("The SDP was "+e.sdp),i})},t.prototype._updateDescription=function(e){var n=this;switch(e.type){case"answer":case"pranswer":if(e.revision!==this._descriptionRevision||this._peerConnection.signalingState!=="have-local-offer")return Promise.resolve();this._descriptionRevision=e.revision;break;case"close":return this._close();case"create-offer":return e.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._offer());case"offer":return e.revision<=this._lastStableDescriptionRevision||this._peerConnection.signalingState==="closed"?Promise.resolve():this._peerConnection.signalingState==="have-local-offer"?this._needsAnswer&&this._lastStableDescriptionRevision===0?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._handleGlare(e)):(this._descriptionRevision=e.revision,this._answer(e).then(function(){}))}var i=e.revision;return Promise.resolve().then(function(){return n._setRemoteDescription(e)}).catch(function(a){var o=new eg;throw n._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:o.code,error:a,sdp:e.sdp}),o}).then(function(){return n._lastStableDescriptionRevision=i,n._needsAnswer=!1,n._checkIceBox(e)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription).then(function(){})})},t.prototype._updateIce=function(e){var n=this._remoteCandidates.update(e);return this._addIceCandidates(n)},t.prototype.addDataTrackSender=function(e){if(!this._dataChannels.has(e))try{var n={ordered:e.ordered};e.maxPacketLifeTime!==null&&(n.maxPacketLifeTime=e.maxPacketLifeTime),e.maxRetransmits!==null&&(n.maxRetransmits=e.maxRetransmits);var i=this._peerConnection.createDataChannel(e.id,n);e.addDataChannel(i),this._dataChannels.set(e,i)}catch(a){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+e.id+'": '+a.message)}},t.prototype._handleQueuedPublisherHints=function(){var e=this;this._peerConnection.signalingState==="stable"&&this._mediaTrackSenderToPublisherHints.forEach(function(n,i){var a=n.deferred,o=n.encodings;e._mediaTrackSenderToPublisherHints.delete(i),e._setPublisherHint(i,o).then(function(s){return a.resolve(s)}).catch(function(s){return a.reject(s)})})},t.prototype._setPublisherHint=function(e,n){var i=this;if(hs)return Promise.resolve("COULD_NOT_APPLY_HINT");if(this._mediaTrackSenderToPublisherHints.has(e)){var a=this._mediaTrackSenderToPublisherHints.get(e);a.deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(e)}var o=this._rtpSenders.get(e);if(!o)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if(this._peerConnection.signalingState==="closed")return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if(this._peerConnection.signalingState!=="stable"){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var s=UU();return this._mediaTrackSenderToPublisherHints.set(e,{deferred:s,encodings:n}),s.promise}var l=o.getParameters();return n!==null&&n.forEach(function(c){var u=c.enabled,d=c.layer_index;l.encodings.length>d?(i._log.debug("layer:"+d+", active:"+l.encodings[d].active+" => "+u),l.encodings[d].active=u):i._log.warn("invalid layer:"+d+", active:"+u)}),this._maybeUpdateEncodings(o.track,l.encodings,n===null),o.setParameters(l).then(function(){return"OK"}).catch(function(c){return i._log.error("Failed to apply publisher hints:",c),"COULD_NOT_APPLY_HINT"})},t.prototype.addMediaTrackSender=function(e){var n=this;if(!(this._peerConnection.signalingState==="closed"||this._rtpSenders.has(e))){var i=this._addOrUpdateTransceiver(e.track),a=i.sender;e.addSender(a,function(o){return n._setPublisherHint(e,o)}),this._rtpNewSenders.add(a),this._rtpSenders.set(e,a)}},t.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},t.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},t.prototype.getState=function(){if(!this._localDescription)return null;var e=this._localDescription.type==="answer"?this._lastStableDescriptionRevision:this._descriptionRevision,n={type:this._localDescription.type,revision:e};return this._localDescription.sdp&&(n.sdp=this._localDescription.sdp),{description:n,id:this.id}},t.prototype.offer=function(){var e=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(n){e.transition("updating",n);var i=e._needsAnswer||e._isRestartingIce?Promise.resolve():e._offer();return i.then(function(){e.tryTransition("open",n)},function(a){throw e.tryTransition("open",n),a})})},t.prototype.removeDataTrackSender=function(e){var n=this._dataChannels.get(e);n&&(e.removeDataChannel(n),this._dataChannels.delete(e),n.close())},t.prototype.removeMediaTrackSender=function(e){var n=this._rtpSenders.get(e);if(n){if(this._peerConnection.signalingState!=="closed"&&this._peerConnection.removeTrack(n),e.removeSender(n),this._mediaTrackSenderToPublisherHints.has(e)){var i=this._mediaTrackSenderToPublisherHints.get(e);i.deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(e)}this._rtpNewSenders.delete(n),this._rtpSenders.delete(e)}},t.prototype.setConfiguration=function(e){typeof this._peerConnection.setConfiguration=="function"&&this._peerConnection.setConfiguration(F5(e))},t.prototype.setIceReconnectTimeout=function(e){return this._iceReconnectTimeout.setDelay(e),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},t.prototype.update=function(e){var n=this;return this.bracket("updating",function(i){if(n.state==="closed")return Promise.resolve();n.transition("updating",i);var a=[];return e.ice&&a.push(n._updateIce(e.ice)),e.description&&a.push(n._updateDescription(e.description)),Promise.all(a).then(function(){n.tryTransition("open",i)},function(o){throw n.tryTransition("open",i),o})})},t.prototype.getStats=function(){var e=this;return kU(this._peerConnection,{log:this._log}).then(function(n){return t$(e,n)})},t}(qU);function I5(r,t){var e=r._getMediaTrackSenderId(t.trackId);return Object.assign(t,{trackId:e})}function M5(r,t){var e=_U([],yU(r._mediaTrackReceivers)).find(function(i){return i.track.id===t.trackId}),n=e?e.id:null;return Object.assign(t,{trackId:n})}function t$(r,t){return Object.assign(t,{remoteAudioTrackStats:t.remoteAudioTrackStats.map(function(e){return M5(r,e)}),remoteVideoTrackStats:t.remoteVideoTrackStats.map(function(e){return M5(r,e)}),localAudioTrackStats:t.localAudioTrackStats.map(function(e){return I5(r,e)}),localVideoTrackStats:t.localVideoTrackStats.map(function(e){return I5(r,e)})})}function D5(r){if(r.sdp){var t=r.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(t)return t[1]}return null}function F5(r){return r===void 0&&(r={}),Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},r)}function r$(r,t){var e=t.track;return e&&e.kind===r&&e.readyState!=="ended"}function n$(r){return r.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}function i$(r,t){return!r.stopped&&!t._replaceTrackPromises.has(r)&&["inactive","recvonly"].includes(r.direction)}function a$(r,t){var e={audio:r._preferredAudioCodecs.map(function(o){var s=o.codec;return s.toLowerCase()}),video:r._preferredVideoCodecs.map(function(o){var s=o.codec;return s.toLowerCase()})}[t],n=r._recycledTransceivers[t],i=e.find(function(o){return r._localCodecs.has(o)});if(!i)return n.shift();var a=n.find(function(o){var s=r._remoteCodecMaps.get(o.mid);return s&&s.has(i)});return a&&n.splice(n.indexOf(a),1),a}function o$(r){var t=r._peerConnection.localDescription;!t||!t.sdp||Cu(t.sdp).forEach(function(e){var n=DT(e);n.forEach(function(i,a){return r._localCodecs.add(a)})})}function s$(r){var t=r._peerConnection.remoteDescription;!t||!t.sdp||Cu(t.sdp).forEach(function(e){var n=e.match(/^a=mid:(.+)$/m);if(!(!n||!n[1])){var i=n[1],a=DT(e);r._remoteCodecMaps.set(i,a)}})}function c$(r){r._recycledTransceivers.audio=[],r._recycledTransceivers.video=[],r._peerConnection.getTransceivers().forEach(function(t){if(i$(t,r)){var e=t.receiver.track;r._recycledTransceivers[e.kind].push(t)}})}function B5(r){c$(r),o$(r),s$(r),BT(r).then(function(){r._handleQueuedPublisherHints()})}function BT(r){var t=r._encodingParameters,e=t.maxAudioBitrate,n=t.maxVideoBitrate,i=new Map([["audio",e],["video",n]]),a=[];return r._peerConnection.getSenders().filter(function(o){return o.track}).forEach(function(o){var s=i.get(o.track.kind),l=o.getParameters();s===null||s===0?l$(l):r._isChromeScreenShareTrack(o.track)?r._log.warn("Not setting maxBitrate for "+o.track.kind+" Track "+o.track.id+" because it appears to be screen share track: "+o.track.label):u$(l,s),!hs&&l.encodings.length>0&&(o.track.kind==="audio"?l.encodings[0].priority="high":r._isChromeScreenShareTrack(o.track)&&(l.encodings[0].priority="medium"),r._enableDscp&&(l.encodings[0].networkPriority="high"));var c=r._rtpNewSenders.has(o);r._maybeUpdateEncodings(o.track,l.encodings,c),r._rtpNewSenders.delete(o);var u=o.setParameters(l).catch(function(d){r._log.warn("Error while setting encodings parameters for "+o.track.kind+" Track "+o.track.id+": "+(d.message||d.name))});a.push(u)}),Promise.all(a)}function l$(r){Array.isArray(r.encodings)&&r.encodings.forEach(function(t){return delete t.maxBitrate})}function u$(r,t){hs?r.encodings=[{maxBitrate:t}]:r.encodings.forEach(function(e){e.maxBitrate=t})}var f$=e$,d$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),UT=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},$T=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},h$=Dt.guessBrowser,p$=f$,v$=B3,m$=M3,go=Me,g$=Fe.MediaConnectionError,y$=h$()==="firefox",_$=function(r){d$(t,r);function t(e,n,i){var a=r.call(this)||this;i=Object.assign({audioContextFactory:y$?Vp():null,PeerConnectionV2:p$},i);var o=i.audioContextFactory?i.audioContextFactory.getOrCreate(a):null,s=o?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(a,{_audioContextFactory:{value:i.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:go.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:o?new v$(w$(o)):null},_encodingParameters:{value:e},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:s},_peerConnections:{value:new Map},_preferredCodecs:{value:n},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:i.PeerConnectionV2}}),a}return t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._peerConnections.forEach(function(n){return n.setEffectiveAdaptiveSimulcast(e)}),this._preferredCodecs.video.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=e)})},Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._closeAbsentPeerConnections=function(e){var n=new Set(e.map(function(i){return i.id}));return this._peerConnections.forEach(function(i){n.has(i.id)||i._close()}),this},t.prototype._getConfiguration=function(){return this._configurationDeferred.promise},t.prototype._getOrCreate=function(e,n){var i=this,a=this,o=this._peerConnections.get(e);if(!o){var s=this._PeerConnectionV2,l=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},n);try{o=new s(e,this._encodingParameters,this._preferredCodecs,l)}catch{throw new g$}this._peerConnections.set(o.id,o),o.on("candidates",this.queue.bind(this,"candidates")),o.on("description",this.queue.bind(this,"description")),o.on("trackAdded",this.queue.bind(this,"trackAdded")),o.on("stateChanged",function c(u){u==="closed"&&(o.removeListener("stateChanged",c),a._dataTrackSenders.forEach(function(d){return o.removeDataTrackSender(d)}),a._mediaTrackSenders.forEach(function(d){return o.removeMediaTrackSender(d)}),a._peerConnections.delete(o.id),a._closedPeerConnectionIds.add(o.id),U5(a),Id(a))}),o.on("connectionStateChanged",function(){return U5(i)}),o.on("iceConnectionStateChanged",function(){return Id(i)}),this._dataTrackSenders.forEach(o.addDataTrackSender,o),this._mediaTrackSenders.forEach(o.addMediaTrackSender,o),Id(this)}return o},t.prototype.close=function(){return this._peerConnections.forEach(function(e){e.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),Id(this),this},t.prototype.createAndOffer=function(){var e=this;return this._getConfiguration().then(function(n){var i;do i=go.makeUUID();while(e._peerConnections.has(i));return e._getOrCreate(i,n)}).then(function(n){return n.offer()}).then(function(){return e})},t.prototype.getTrackReceivers=function(){return go.flatMap(this._peerConnections,function(e){return e.getTrackReceivers()})},t.prototype.getStates=function(){var e=[];return this._peerConnections.forEach(function(n){var i=n.getState();i&&e.push(i)}),e},t.prototype.setConfiguration=function(e){return this._configuration&&(this._configurationDeferred=go.defer(),this._peerConnections.forEach(function(n){n.setConfiguration(e)})),this._configuration=e,this._configurationDeferred.resolve(e),this},t.prototype.setIceReconnectTimeout=function(e){return this._sessionTimeout===null&&(this._peerConnections.forEach(function(n){n.setIceReconnectTimeout(e)}),this._sessionTimeout=e),this},t.prototype.setTrackSenders=function(e){var n=new Set(e.filter(function(o){return o.kind==="data"})),i=new Set(e.filter(function(o){return o&&(o.kind==="audio"||o.kind==="video")})),a=x$(this,n,i);return this._dataTrackSenders=n,this._mediaTrackSenders=i,b$(this,a),this},t.prototype.update=function(e,n){var i=this;return n===void 0&&(n=!1),n&&this._closeAbsentPeerConnections(e),this._getConfiguration().then(function(a){return Promise.all(e.map(function(o){if(i._closedPeerConnectionIds.has(o.id))return null;var s=i._getOrCreate(o.id,a);return s.update(o)}))}).then(function(){return i})},t.prototype.getStats=function(){var e=Array.from(this._peerConnections.values());return Promise.all(e.map(function(n){return n.getStats().then(function(i){return[n.id,i]})})).then(function(n){return new Map(n)})},t}(m$);function w$(r){var t=r.createMediaStreamDestination();return t.stream.getAudioTracks()[0]}function b$(r,t){(t.data.add.size||t.data.remove.size||t.media.add.size||t.media.remove.size)&&r._peerConnections.forEach(function(e){t.data.remove.forEach(e.removeDataTrackSender,e),t.media.remove.forEach(e.removeMediaTrackSender,e),t.data.add.forEach(e.addDataTrackSender,e),t.media.add.forEach(e.addMediaTrackSender,e),(t.media.add.size||t.media.remove.size||t.data.add.size&&!e.isApplicationSectionNegotiated)&&e.offer()})}function S$(r,t){var e=go.difference(t,r._dataTrackSenders),n=go.difference(r._dataTrackSenders,t);return{add:e,remove:n}}function x$(r,t,e){return{data:S$(r,t),media:k$(r,e)}}function k$(r,t){var e=go.difference(t,r._mediaTrackSenders),n=go.difference(r._mediaTrackSenders,t);return{add:e,remove:n}}var cp={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3},tg;function P$(){return Object.keys(cp).reduce(function(r,t){var e;return Object.assign(r,(e={},e[cp[t]]=t,e))},{})}function VT(r){return r.length?(tg=tg||P$(),r.reduce(function(t,e){return tg[Math.max(cp[t],cp[e])]})):"new"}function Id(r){r._lastIceConnectionState=r.iceConnectionState,r._iceConnectionState=VT($T([],UT(r._peerConnections.values())).map(function(t){return t.iceConnectionState})),r.iceConnectionState!==r._lastIceConnectionState&&r.emit("iceConnectionStateChanged")}function U5(r){r._lastConnectionState=r.connectionState,r._connectionState=VT($T([],UT(r._peerConnections.values())).map(function(t){return t.connectionState})),r.connectionState!==r._lastConnectionState&&r.emit("connectionStateChanged")}var T$=_$,E$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),C$=yn,L$=0,O$=function(r){E$(t,r);function t(e,n,i){var a=r.call(this)||this;return Object.defineProperties(a,{_instanceId:{value:L$++},channel:{value:n},_log:{value:i.log.createLog("default",a)},_getReceiver:{value:e},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),a}return Object.defineProperty(t.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},t.prototype.setup=function(e){var n=this;this._teardown(),this._log.info("setting up msp transport for id:",e);var i=this._getReceiver(e).then(function(a){if(a.kind!=="data"&&n._log.error("Expected a DataTrackReceiver"),n._receiverPromise===i){try{n._transport=a.toDataTransport(),n.emit("ready",n._transport)}catch(o){n._log.error("Failed to toDataTransport: "+o.message)}a.once("close",function(){return n._teardown()})}});this._receiverPromise=i},t.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},t}(C$),Us=O$,A$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),N$=Us,R$=function(r){A$(t,r);function t(e,n){var i=r.call(this,e,"active_speaker",n)||this;return Object.defineProperties(i,{_loudestParticipantSid:{value:null,writable:!0}}),i.on("ready",function(a){a.on("message",function(o){switch(o.type){case"active_speaker":i._setLoudestParticipantSid(o.participant);break}})}),i}return Object.defineProperty(t.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),t.prototype._setLoudestParticipantSid=function(e){this.loudestParticipantSid!==e&&(this._loudestParticipantSid=e,this.emit("updated"))},t}(N$),j$=R$,I$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),M$=Us,D$=function(r){I$(t,r);function t(e,n){var i=r.call(this,e,"extension_transcriptions",n)||this;return i.on("ready",function(a){a.on("message",function(o){switch(o.type){case"extension_transcriptions":i.emit("transcription",o);break}})}),i}return t}(M$),F$=D$,B$=function(){function r(t,e,n,i){Object.defineProperties(this,{availableSend:{enumerable:!0,value:n},recv:{enumerable:!0,value:e},rtt:{enumerable:!0,value:i},send:{enumerable:!0,value:t}})}return r.of=function(t,e){var n=(e.timestamp-t.timestamp)/1e3,i=e.bytesSent-t.bytesSent,a=e.bytesReceived-t.bytesReceived,o=n>0?i/n*8:0,s=n>0?a/n*8:0,l=e.availableOutgoingBitrate,c=e.currentRoundTripTime;return new r(o,s,l,c)},r}(),U$=B$,rg=U$,$$=function(){function r(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new rg(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return r.prototype.next=function(t){var e=this.lastStats;if(this.lastStats=t,e){var n=e.id===t.id?rg.of(e,t):new rg(0,0);this.lastReport=n}return this.lastReport},r}(),V$=$$;function z$(r){return r=r.filter(function(t){return typeof t=="number"}),r.length<1?void 0:r.reduce(function(t,e){return e+t})/r.length}var zT=z$,W$=function(){function r(t,e,n){Object.defineProperties(this,{id:{enumerable:!0,value:t},trackId:{enumerable:!0,value:e},bitrate:{enumerable:!0,value:n}})}return r}(),WT=W$;function q$(r){return r.reduce(function(t,e){return typeof e=="number"?e+t:t},0)}var qT=q$,H$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$5=zT,G$=WT,K$=qT,Q$=function(r){H$(t,r);function t(e,n,i,a,o,s,l){var c=r.call(this,e,n,i)||this,u=o>0?a/o:0;return Object.defineProperties(c,{deltaPacketsLost:{enumerable:!0,value:a},deltaPacketsReceived:{enumerable:!0,value:o},fractionLost:{enumerable:!0,value:s},jitter:{enumerable:!0,value:l},phonyFractionLost:{enumerable:!0,value:u}}),c}return t.of=function(e,n,i){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var a=(i.timestamp-n.timestamp)/1e3,o=i.bytesReceived-n.bytesReceived,s=a>0?o/a*8:0,l=Math.max(i.packetsLost-n.packetsLost,0),c=i.packetsReceived-n.packetsReceived,u=i.fractionLost,d=i.jitter;return new t(n.id,e,s,l,c,u,d)},t.summarize=function(e){var n=e.map(function(s){return s.summarize()}),i=K$(n.map(function(s){return s.bitrate})),a=$5(n.map(function(s){return s.fractionLost})),o=$5(n.map(function(s){return s.jitter}));return{bitrate:i,fractionLost:a,jitter:o}},t.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:typeof this.fractionLost=="number"?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},t}(G$),HT=Q$,Y$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),J$=zT,X$=WT,Z$=qT,eV=function(r){Y$(t,r);function t(e,n,i,a){var o=r.call(this,e,n,i)||this;return Object.defineProperties(o,{rtt:{enumerable:!0,value:a}}),o}return t.of=function(e,n,i,a){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var o=(i.timestamp-n.timestamp)/1e3,s=i.bytesSent-n.bytesSent,l=o>0?s/o*8:0,c=a&&typeof a.roundTripTime=="number"?a.roundTripTime/1e3:void 0;return new t(n.id,e,l,c)},t.summarize=function(e){var n=Z$(e.map(function(a){return a.bitrate})),i=J$(e.map(function(a){return a.rtt}));return{bitrate:n,rtt:i}},t}(X$),GT=eV,ng=HT,ig=GT,tV=function(){function r(t,e,n){Object.defineProperties(this,{ice:{enumerable:!0,value:t},audio:{enumerable:!0,value:e},video:{enumerable:!0,value:n}})}return r.prototype.summarize=function(){var t=this.audio.send.concat(this.video.send),e=ig.summarize(t),n=this.audio.recv.concat(this.video.recv),i=ng.summarize(n);return{ice:this.ice,send:e,recv:i,audio:{send:ig.summarize(this.audio.send),recv:ng.summarize(this.audio.recv)},video:{send:ig.summarize(this.video.send),recv:ng.summarize(this.video.recv)}}},r}(),rV=tV,nV=function(){function r(t,e,n){Object.defineProperties(this,{id:{enumerable:!0,value:t,writable:!0},trackId:{enumerable:!0,value:e,writable:!0},lastStats:{enumerable:!0,value:n,writable:!0}})}return r}(),KT=nV,iV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aV=HT,oV=KT,sV=function(r){iV(t,r);function t(e,n){var i=r.call(this,n.id,e,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return t.prototype.next=function(e,n){var i=this.lastStats;this.lastStats=n,this.trackId=e;var a=aV.of(e,i,n);return this.lastReport=a,a},t}(oV),cV=sV,lV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),uV=KT,fV=GT,dV=function(r){lV(t,r);function t(e,n){var i=r.call(this,n.id,e,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return t.prototype.next=function(e,n,i){var a=this.lastStats;this.lastStats=n,this.trackId=e;var o=fV.of(e,a,n,i);return this.lastReport=o,o},t}(uV),hV=dV,gu=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Md=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},ef=A&&A.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},QT=Dt.guessBrowser,pV=V$,vV=rV,mV=cV,gV=hV,yV=function(){function r(t){Object.defineProperties(this,{pc:{enumerable:!0,value:t},ice:{enumerable:!0,value:new pV},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return r.prototype.next=function(){var t=this,e=QT()==="firefox"?bV(this):SV(this);return e.then(function(){var n=Md([],gu(t.audio.send.values())),i=Md([],gu(t.video.send.values())),a=Md([],gu(t.audio.recv.values())),o=Md([],gu(t.video.recv.values())),s=new vV(t.ice.lastReport,{send:n.map(function(l){return l.lastReport}).filter(function(l){return l}),recv:a.map(function(l){return l.lastReport}).filter(function(l){return l})},{send:i.map(function(l){return l.lastReport}).filter(function(l){return l}),recv:o.map(function(l){return l.lastReport}).filter(function(l){return l})});return t.lastReport=s,s})},r}();function V5(r){return Promise.all(r.map(function(t){var e=t.track.id;return t.getStats().then(function(n){var i,a;try{for(var o=ef(n.values()),s=o.next();!s.done;s=o.next()){var l=s.value;l.type==="inbound-rtp"&&(l.id=e+"-"+l.id)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return[e,n]})})).then(function(t){return new Map(t)})}function YT(r,t,e,n,i){var a=t[n.mediaType];if(!i){var o=e.get(n.trackId);o&&(i=o.trackIdentifier)}if(a&&i){if(a.has(n.id))return a.get(n.id);var s=new r(i,n);a.set(n.id,s)}return null}function r_(r){return{audio:r.audio.send,video:r.video.send}}function n_(r){return{audio:r.audio.recv,video:r.video.recv}}function _V(r,t,e,n){return YT(gV,r_(r),t,e,n)}function wV(r,t,e,n){return YT(mV,n_(r),t,e,n)}function JT(r){return{audio:new Set(r.audio.send.keys()),video:new Set(r.video.send.keys())}}function XT(r){return{audio:new Set(r.audio.recv.keys()),video:new Set(r.video.recv.keys())}}function ZT(r,t,e,n){var i,a;try{for(var o=ef(t.values()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l.type==="outbound-rtp"&&!l.isRemote){if(QT()!=="firefox"&&!l.trackId)continue;var c=e[l.mediaType];c&&c.delete(l.id);var u=_V(r,t,l,n);if(u){var d=t.get(l.remoteId);u.next(n||u.trackId,l,d)}}}}catch(v){i={error:v}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function eE(r,t,e,n){var i,a;try{for(var o=ef(t.values()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l.type==="inbound-rtp"&&!l.isRemote){var c=e[l.mediaType];c&&c.delete(l.id);var u=wV(r,t,l,n);u&&u.next(n||u.trackId,l)}}}catch(d){i={error:d}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function lp(r,t){var e=function(i){var a=r[i],o=t[i];o.forEach(function(s){return a.delete(s)})};for(var n in t)e(n)}function tE(r,t){var e,n,i,a,o;try{for(var s=ef(t.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.type==="transport"&&(o=t.get(c.selectedCandidatePairId))}}catch(v){e={error:v}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}if(o){r.next(o);return}try{for(var u=ef(t.values()),d=u.next();!d.done;d=u.next()){var c=d.value;c.type==="candidate-pair"&&c.nominated&&(!("selected"in c)||c.selected)&&r.next(c)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}}function bV(r){var t=r.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/send/)&&n.sender.track}).map(function(n){return n.sender}),e=r.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/recv/)}).map(function(n){return n.receiver});return Promise.all([V5(t),V5(e),r.pc.getStats()]).then(function(n){var i=gu(n,3),a=i[0],o=i[1],s=i[2],l=r_(r),c=JT(r);a.forEach(function(v,p){return ZT(r,v,c,p)}),lp(l,c);var u=n_(r),d=XT(r);o.forEach(function(v,p){return eE(r,v,d,p)}),lp(u,d),tE(r.ice,s)})}function SV(r){return r.pc.getStats().then(function(t){var e=r_(r),n=JT(r);ZT(r,t,n),lp(e,n);var i=n_(r),a=XT(r);eE(r,t,a),lp(i,a),tE(r.ice,t)})}var xV=yV,kV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PV=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},TV=yn,EV=xV,CV=function(r){kV(t,r);function t(e,n){var i=r.call(this)||this;return Object.defineProperties(i,{_factories:{value:new WeakMap},_manager:{value:e},_signaling:{value:n}}),n.on("updated",function(){return i.emit("updated")}),i}return Object.defineProperty(t.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;this.stop();var n=setTimeout(function(){e._timeout===n&&LV(e).then(function(i){if(e._timeout===n){if(i.length){var a=PV(i,1),o=a[0];e._signaling.put(o)}e.start()}})},200);this._timeout=n},t.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},t}(TV);function LV(r){var t=r._manager._peerConnections?Array.from(r._manager._peerConnections.values()):[],e=t.map(function(a){return a._peerConnection}).filter(function(a){return a.signalingState!=="closed"}),n=e.map(function(a){if(r._factories.has(a))return r._factories.get(a);var o=new EV(a);return r._factories.set(a,o),o}),i=n.map(function(a){return a.next().catch(function(){return null})});return Promise.all(i).then(function(a){return a.filter(function(o){return o}).map(function(o){return o.summarize()})})}var OV=CV,AV=Me.defer,NV=function(){function r(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return r.prototype.put=function(t){this._hasValue=!0,this._value=t;var e=this._deferreds.shift();return e&&e.resolve(t),this},r.prototype.take=function(){var t=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var e=AV();return this._deferreds.push(e),e.promise.then(function(n){return t._hasValue=!1,n})},r}(),RV=NV,jV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),IV=Us,MV=RV,DV=Bs,z5=5e3,FV=function(r){jV(t,r);function t(e,n,i){var a=r.call(this,e,"network_quality",i)||this;return Object.defineProperties(a,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new MV},_resendTimer:{value:new DV(function(){a._resendTimer.setDelay(a._resendTimer.delay*1.5),a._sendNetworkQualityInputs()},z5,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:n.local,remoteReportLevel:n.remote}}}}),a.on("ready",function(o){o.on("message",function(s){switch(a._log.debug("Incoming: ",s),s.type){case"network_quality":a._handleNetworkQualityMessage(s);break}})}),a._sendNetworkQualityInputs(),a}return Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),t.prototype._handleNetworkQualityMessage=function(e){var n=this,i=!1,a=null,o=e?e.local:null;typeof o=="number"?(a=o,this._levels=null):typeof o=="object"&&o&&(this._levels=o,a=typeof o.level=="number"?o.level:Math.min(o.audio.send,o.audio.recv,o.video.send,o.video.recv)),a!==null&&this.level!==a&&(this._level=a,i=!0),this._remoteLevels=e&&e.remotes?e.remotes.reduce(function(s,l){var c=n._remoteLevels.get(l.sid)||{};return c.level!==l.level&&(i=!0),s.set(l.sid,l)},new Map):this._remoteLevels,i&&this.emit("updated"),this._resendTimer.setDelay(z5),this._resendTimer.isSet&&setTimeout(function(){return n._sendNetworkQualityInputs()},1e3)},t.prototype._sendNetworkQualityInputs=function(){var e=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(n){e._transport&&e._transport.publish(BV(n,e._networkQualityReportLevels))}).finally(function(){e._resendTimer.start()})},t.prototype.put=function(e){this._networkQualityInputs.put(e)},t}(IV);function BV(r,t){return Object.assign({type:"network_quality"},r,t)}var UV=FV,$V=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),VV=yn.EventEmitter,zV=function(r){$V(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),e}return t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return e=typeof e=="boolean"?e:!0,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},t}(VV),rE=zV,WV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qV=rE,HV=function(r){WV(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_revision:{value:1,writable:!0}}),e}return t.prototype.update=function(e){return e.revision<this._revision?this:(this._revision=e.revision,this.enable(e.is_recording))},t}(qV),GV=HV,KV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),QV=rE,YV=cl,JV=Bs,XV=Me.buildLogLevels,ZV=zt.DEFAULT_LOG_LEVEL,ez=Da,i_=Fe,tz=i_.MediaConnectionError,rz=i_.MediaDTLSTransportFailedError,nz=i_.SignalingConnectionDisconnectedError,iz=0,az={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},oz=function(r){KV(t,r);function t(e,n,i,a){var o=this;a=Object.assign({logLevel:ZV,RecordingSignaling:QV,Timeout:JV},a);var s=XV(a.logLevel);o=r.call(this,"connected",az)||this;var l=a.RecordingSignaling,c=new a.Timeout(function(){o._disconnect(o._reconnectingError)},a.sessionTimeout,!1);return Object.defineProperties(o,{_instanceId:{value:iz++},_log:{value:a.log?a.log.createLog("default",o):new ez("default",o,s,a.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:a},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:c},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:i},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new l},sid:{enumerable:!0,value:n}}),o.on("connectionStateChanged",function(){o.connectionState==="failed"&&!["disconnected","failed"].includes(o.iceConnectionState)&&o._disconnect(new rz)}),o.on("iceConnectionStateChanged",function(){return ag(o)}),o.on("signalingConnectionStateChanged",function(){return ag(o)}),setTimeout(function(){return ag(o)}),o}return t.prototype._disconnect=function(e){return this.state!=="disconnected"?(this.preempt("disconnected",null,[e]),!0):!1},t.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},t.prototype.connectParticipant=function(e){var n=this;return e.state==="disconnected"||this.participants.has(e.sid)?!1:(this.participants.set(e.sid,e),e.on("stateChanged",function i(a){a==="disconnected"&&(e.removeListener("stateChanged",i),n.participants.delete(e.sid),n.emit("participantDisconnected",e))}),this.emit("participantConnected",e),!0)},t.prototype.disconnect=function(){return this._disconnect()},t.prototype.setDominantSpeaker=function(e){this.dominantSpeakerSid=e,this.emit("dominantSpeakerChanged")},t}(YV);function ag(r){if(r.state==="disconnected"||r.signalingConnectionState==="disconnected"){r._sessionTimeout.clear();return}var t;r.signalingConnectionState==="reconnecting"?t=r.signalingConnectionState:r.iceConnectionState==="failed"?(r._mediaConnectionIsReconnecting=!0,t="reconnecting"):r.iceConnectionState==="new"||r.iceConnectionState==="checking"?t=r._mediaConnectionIsReconnecting?"reconnecting":"connected":(r._mediaConnectionIsReconnecting=!1,r._reconnectingError=null,r._sessionTimeout.clear(),t="connected"),t!==r.state&&(t==="reconnecting"?(r._reconnectingError=r.signalingConnectionState==="reconnecting"?new nz:new tz,r._sessionTimeout.start(),r.preempt(t,null,[r._reconnectingError])):r.preempt(t))}var nE=oz,sz=function(){function r(t){var e=t.actual,n=e===void 0?null:e,i=t.available,a=i===void 0?null:i,o=t.level,s=o===void 0?null:o;Object.defineProperties(this,{actual:{value:n,enumerable:!0},available:{value:a,enumerable:!0},level:{value:s,enumerable:!0}})}return r}(),cz=sz,lz=function(){function r(t){var e=t.fractionLost,n=e===void 0?null:e,i=t.level,a=i===void 0?null:i;Object.defineProperties(this,{fractionLost:{value:n,enumerable:!0},level:{value:a,enumerable:!0}})}return r}(),uz=lz,fz=function(){function r(t){var e=t.jitter,n=e===void 0?null:e,i=t.rtt,a=i===void 0?null:i,o=t.level,s=o===void 0?null:o;Object.defineProperties(this,{jitter:{value:n,enumerable:!0},rtt:{value:a,enumerable:!0},level:{value:s,enumerable:!0}})}return r}(),dz=fz,hz=cz,pz=uz,vz=dz,mz=function(){function r(t){var e=t.bandwidth,n=e===void 0?null:e,i=t.fractionLost,a=i===void 0?null:i,o=t.latency,s=o===void 0?null:o;Object.defineProperties(this,{bandwidth:{value:n?new hz(n):null,enumerable:!0},fractionLost:{value:a?new pz(a):null,enumerable:!0},latency:{value:s?new vz(s):null,enumerable:!0}})}return r}(),iE=mz,gz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yz=iE,_z=function(r){gz(t,r);function t(e){return r.call(this,e)||this}return t}(yz),wz=_z,bz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Sz=iE,xz=function(r){bz(t,r);function t(e){return r.call(this,e)||this}return t}(Sz),kz=xz,Pz=wz,Tz=kz,Ez=function(){function r(t){var e=t.send,n=t.recv,i=t.sendStats,a=i===void 0?null:i,o=t.recvStats,s=o===void 0?null:o;Object.defineProperties(this,{send:{value:e,enumerable:!0},recv:{value:n,enumerable:!0},sendStats:{value:a?new Pz(a):null,enumerable:!0},recvStats:{value:s?new Tz(s):null,enumerable:!0}})}return r}(),aE=Ez,Cz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lz=aE,Oz=function(r){Cz(t,r);function t(e){return r.call(this,e)||this}return t}(Lz),Az=Oz,Nz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rz=aE,jz=function(r){Nz(t,r);function t(e){return r.call(this,e)||this}return t}(Rz),Iz=jz,Mz=Az,Dz=Iz,Fz=function(){function r(t){var e=t.level,n=t.audio,i=t.video;Object.defineProperties(this,{level:{value:e,enumerable:!0},audio:{value:n?new Mz(n):null,enumerable:!0},video:{value:i?new Dz(i):null,enumerable:!0}})}return r}(),Bz=Fz,Uz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$z=cl,Vz=Bz,zz={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},Wz=function(r){Uz(t,r);function t(){var e=r.call(this,"connecting",zz)||this;return Object.defineProperties(e,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),e}return Object.defineProperty(t.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(e){return this.tracks.set(e.id||e.sid,e),this.emit("trackAdded",e),this},t.prototype.disconnect=function(){return this.state!=="disconnected"?(this.preempt("disconnected"),!0):!1},t.prototype.removeTrack=function(e){var n=this.tracks.get(e.id||e.sid);return this.tracks.delete(e.id||e.sid),n&&this.emit("trackRemoved",e),n||null},t.prototype.setNetworkQualityLevel=function(e,n){this._networkQualityLevel!==e&&(this._networkQualityLevel=e,this._networkQualityStats=n&&(n.audio||n.video)?new Vz(n):null,this.emit("networkQualityLevelChanged"))},t.prototype.connect=function(e,n){return this.state==="connecting"||this.state==="reconnecting"?(this._sid||(this._sid=e),this._identity||(this._identity=n),this.preempt("connected"),!0):!1},t.prototype.reconnecting=function(){return this.state==="connecting"||this.state==="connected"?(this.preempt("reconnecting"),!0):!1},t}($z),a_=Wz,qz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Hz=a_,Gz=function(r){qz(t,r);function t(e,n){var i=r.call(this)||this;return i.connect(e,n),i}return t}(Hz),Kz=Gz,Qz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yz=yn.EventEmitter,Jz=function(r){Qz(t,r);function t(e,n,i,a){var o=r.call(this)||this,s=null;return Object.defineProperties(o,{_error:{value:null,writable:!0},_isEnabled:{value:i,writable:!0},_priority:{value:a,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return s},set:function(l){s===null&&(s=l)}},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:e}}),o}return Object.defineProperty(t.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return e=typeof e=="boolean"?e:!0,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},t.prototype.setTrackTransceiver=function(e){return e=e||null,this.trackTransceiver!==e&&(this._trackTransceiver=e,this.emit("updated")),this},t.prototype.setSid=function(e){return this.sid===null&&(this._sid=e,this.emit("updated")),this},t}(Yz),oE=Jz,Xz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zz=oE,eW=function(r){Xz(t,r);function t(e,n,i,a,o,s){var l=r.call(this,n,i,a,o)||this;return Object.defineProperties(l,{_isSwitchedOff:{value:s,writable:!0}}),l.setSid(e),l}return Object.defineProperty(t.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),t.prototype.subscribeFailed=function(e){return this.error||(this._error=e,this.emit("updated")),this},t.prototype.setPriority=function(e){return this._priority!==e&&(this._priority=e,this.emit("updated")),this},t.prototype.setSwitchedOff=function(e){return this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit("updated")),this},t}(Zz),tW=eW,rW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),nW=tW,iW=function(r){rW(t,r);function t(e,n){return r.call(this,e.sid,e.name,e.kind,e.enabled,e.priority,n)||this}return t.prototype.update=function(e){return this.enable(e.enabled),this.setPriority(e.priority),this},t}(nW),aW=iW,oW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sW=Kz,cW=aW,lW=function(r){oW(t,r);function t(e,n,i,a,o,s){var l=r.call(this,e.sid,e.identity)||this;return s=Object.assign({RemoteTrackPublicationV2:cW},s),Object.defineProperties(l,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:s.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:n},updateSubscriberTrackPriority:{value:function(c,u){return i(c,u)}},updateTrackRenderHint:{value:function(c,u){return a(c,u)}},clearTrackHint:{value:function(c){return o(c)}},revision:{enumerable:!0,get:function(){return this._revision}}}),l.update(e)}return t.prototype._getOrCreateTrack=function(e){var n=this._RemoteTrackPublicationV2,i=this.tracks.get(e.sid);if(!i){var a=this._getInitialTrackSwitchOffState(e.sid);i=new n(e,a),this.addTrack(i)}return i},t.prototype.update=function(e){var n=this;if(this.revision!==null&&e.revision<=this.revision)return this;this._revision=e.revision;var i=new Set;switch(e.tracks.forEach(function(a){var o=n._getOrCreateTrack(a);o.update(a),i.add(o)}),this.tracks.forEach(function(a){i.has(a)||n.removeTrack(a)}),e.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity);break}return this},t}(sW),uW=lW,fW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),dW=Us,hW=function(r){fW(t,r);function t(e,n){var i=r.call(this,e,"track_priority",n)||this;return Object.defineProperties(i,{_enqueuedPriorityUpdates:{value:new Map}}),i.on("ready",function(a){Array.from(i._enqueuedPriorityUpdates.keys()).forEach(function(o){a.publish({type:"track_priority",track:o,subscribe:i._enqueuedPriorityUpdates.get(o)})})}),i}return t.prototype.sendTrackPriorityUpdate=function(e,n,i){if(n!=="subscribe")throw new Error("only subscribe priorities are supported, found: "+n);this._enqueuedPriorityUpdates.set(e,i),this._transport&&this._transport.publish({type:"track_priority",track:e,subscribe:i})},t}(dW),pW=hW,vW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mW=Us,gW=function(r){vW(t,r);function t(e,n){var i=r.call(this,e,"track_switch_off",n)||this;return i.on("ready",function(a){a.on("message",function(o){switch(o.type){case"track_switch_off":i._setTrackSwitchOffUpdates(o.off||[],o.on||[]);break}})}),i}return t.prototype._setTrackSwitchOffUpdates=function(e,n){this.emit("updated",e,n)},t}(mW),yW=gW,_W=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wW=Us,bW=Bs,SW=Me.isDeepEqual,W5=2e3,xW=1,kW=function(r){_W(t,r);function t(e,n){var i=r.call(this,e,"render_hints",n)||this;return Object.defineProperties(i,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new bW(function(){i._sendAllHints(),i._responseTimer.setDelay(i._responseTimer.delay*2)},W5,!1)}}),i.on("ready",function(a){a.on("message",function(o){switch(i._log.debug("Incoming: ",o),o.type){case"render_hints":i._processHintResults(o&&o.subscriber&&o.subscriber.hints||[]);break;default:i._log.warn("Unknown message type: ",o.type);break}}),i._sendAllHints()}),i}return t.prototype._sendAllHints=function(){var e=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(n){var i=e._trackSidsToRenderHints.get(n);i.renderDimensions&&(i.isDimensionDirty=!0),"enabled"in i&&(i.isEnabledDirty=!0)}),this._sendHints()},t.prototype._processHintResults=function(e){var n=this;this._responseTimer.clear(),this._responseTimer.setDelay(W5),e.forEach(function(i){i.result!=="OK"&&n._log.debug("Server error processing hint:",i)}),this._sendHints()},t.prototype._sendHints=function(){var e=this;if(!(!this._transport||this._responseTimer.isSet)){var n=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(a){var o=e._trackSidsToRenderHints.get(a);if(o.isEnabledDirty||o.isDimensionDirty){var s={track:a};o.isEnabledDirty&&(s.enabled=o.enabled,o.isEnabledDirty=!1),o.isDimensionDirty&&(s.render_dimensions=o.renderDimensions,o.isDimensionDirty=!1),n.push(s)}}),n.length>0){var i={type:"render_hints",subscriber:{id:xW++,hints:n}};this._log.debug("Outgoing: ",i),this._transport.publish(i),this._responseTimer.start()}}},t.prototype.setTrackHint=function(e,n){var i=this._trackSidsToRenderHints.get(e)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in n&&i.enabled!==n.enabled&&(i.enabled=!!n.enabled,i.isEnabledDirty=!0),n.renderDimensions&&!SW(n.renderDimensions,i.renderDimensions)&&(i.renderDimensions=n.renderDimensions,i.isDimensionDirty=!0),this._trackSidsToRenderHints.set(e,i),this._sendHints()},t.prototype.clearTrackHint=function(e){this._trackSidsToRenderHints.delete(e)},t}(wW),PW=kW,TW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EW=Us,CW=1,LW=function(r){TW(t,r);function t(e,n){var i=r.call(this,e,"publisher_hints",n)||this;return i.on("ready",function(a){i._log.debug("publisher_hints transport ready:",a),a.on("message",function(o){switch(i._log.debug("Incoming: ",o),o.type){case"publisher_hints":o.publisher&&o.publisher.hints&&o.publisher.id&&i._processPublisherHints(o.publisher.hints,o.publisher.id);break;default:i._log.warn("Unknown message type: ",o.type);break}})}),i}return t.prototype.sendTrackReplaced=function(e){var n=e.trackSid;if(this._transport){var i={type:"client_reset",track:n,id:CW++};this._log.debug("Outgoing: ",i),this._transport.publish(i)}},t.prototype.sendHintResponse=function(e){var n=e.id,i=e.hints;if(this._transport){var a={type:"publisher_hints",id:n,hints:i};this._log.debug("Outgoing: ",a),this._transport.publish(a)}},t.prototype._processPublisherHints=function(e,n){try{this.emit("updated",e,n)}catch(i){this._log.error("error processing hints:",i)}},t}(EW),OW=LW,AW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sE=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},NW=j$,RW=F$,jW=OV,IW=UV,MW=GV,DW=nE,FW=uW,BW=CT,UW=pW,$W=yW,VW=PW,zW=OW,$s=Me,WW=$s.constants.DEFAULT_SESSION_TIMEOUT_SEC,qW=$s.createBandwidthProfilePayload,HW=$s.defer,GW=$s.difference,og=$s.filterObject,o_=$s.flatMap,q5=$s.oncePerTick,up=oT,KW=Fe.createTwilioError,QW=1e4,YW=function(r){AW(t,r);function t(e,n,i,a,o){var s=this;n.options=Object.assign({session_timeout:WW},n.options),o=Object.assign({DominantSpeakerSignaling:NW,TranscriptionSignaling:RW,NetworkQualityMonitor:jW,NetworkQualitySignaling:IW,RecordingSignaling:MW,RemoteParticipantV2:FW,TrackPrioritySignaling:UW,TrackSwitchOffSignaling:$W,bandwidthProfile:null,sessionTimeout:n.options.session_timeout*1e3,statsPublishIntervalMs:QW},o),e.setBandwidthProfile(o.bandwidthProfile);var l=n.options,c=l.signaling_region,u=l.audio_processors,d=u===void 0?[]:u;e.setSignalingRegion(c),d.includes("krisp")&&d.push("rnnoise"),e.setAudioProcessors(d),a.setIceReconnectTimeout(o.sessionTimeout),s=r.call(this,e,n.sid,n.name,o)||this;var v=function(y){return s._getTrackReceiver(y)},p=s._log;return Object.defineProperties(s,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:o.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:e.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:e.networkQualityConfiguration},_peerConnectionManager:{value:a},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:o.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new o.DominantSpeakerSignaling(v,{log:p})},_transcriptionSignaling:{value:new o.TranscriptionSignaling(v,{log:p})},_networkQualitySignaling:{value:new o.NetworkQualitySignaling(v,e.networkQualityConfiguration,{log:p})},_renderHintsSignaling:{value:new VW(v,{log:p})},_publisherHintsSignaling:{value:new zW(v,{log:p})},_trackPrioritySignaling:{value:new o.TrackPrioritySignaling(v,{log:p})},_trackSwitchOffSignaling:{value:new o.TrackSwitchOffSignaling(v,{log:p})},_pendingSwitchOffStates:{value:new Map},_transport:{value:i},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:n.options.media_region||null}}),s._initTrackSwitchOffSignaling(),s._initDominantSpeakerSignaling(),s._initTranscriptionSignaling(),s._initNetworkQualityMonitorSignaling(),s._initPublisherHintSignaling(),JW(s,e),XW(s,a),ZW(s,i),eq(s,i,o.statsPublishIntervalMs),s._update(n),s._peerConnectionManager.setEffectiveAdaptiveSimulcast(s._publisherHintsSignaling.isSetup),s}return Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signalingConnectionState",{get:function(){return this._transport.state==="syncing"?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._deleteTrackReceiverDeferred=function(e){return this._trackReceiverDeferreds.delete(e)},t.prototype._getOrCreateTrackReceiverDeferred=function(e){var n=this._trackReceiverDeferreds.get(e)||HW(),i=this._peerConnectionManager.getTrackReceivers(),a=i.find(function(o){return o.id===e&&o.readyState!=="ended"});return a?n.resolve(a):this._trackReceiverDeferreds.set(e,n),n},t.prototype._addTrackReceiver=function(e){var n=this._getOrCreateTrackReceiverDeferred(e.id);return n.resolve(e),this},t.prototype._disconnect=function(e){var n=r.prototype._disconnect.call(this,e);return n&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(i){i.publishFailed(e||new Error("LocalParticipant disconnected"))}),n},t.prototype._getTrackReceiver=function(e){var n=this;return this._getOrCreateTrackReceiverDeferred(e).promise.then(function(i){return n._deleteTrackReceiverDeferred(e),i})},t.prototype._getInitialTrackSwitchOffState=function(e){var n=this._pendingSwitchOffStates.get(e)||!1;return this._pendingSwitchOffStates.delete(e),n&&this._log.warn("["+e+"] was initially switched off! "),n},t.prototype._getTrackSidsToTrackSignalings=function(){var e=o_(this.participants,function(n){return Array.from(n.tracks)});return new Map(e)},t.prototype._getOrCreateRemoteParticipant=function(e){var n=this,i=this._RemoteParticipantV2,a=this.participants.get(e.sid),o=this;return a||(a=new i(e,function(s){return n._getInitialTrackSwitchOffState(s)},function(s,l){return n._trackPrioritySignaling.sendTrackPriorityUpdate(s,"subscribe",l)},function(s,l){return n._renderHintsSignaling.setTrackHint(s,l)},function(s){return n._renderHintsSignaling.clearTrackHint(s)}),a.on("stateChanged",function s(l){l==="disconnected"&&(a.removeListener("stateChanged",s),o.participants.delete(a.sid),o._disconnectedParticipantRevisions.set(a.sid,a.revision))}),this.connectParticipant(a)),a},t.prototype._getState=function(){return{participant:this.localParticipant.getState()}},t.prototype._maybeAddBandwidthProfile=function(e){var n=this.localParticipant,i=n.bandwidthProfile,a=n.bandwidthProfileRevision;return i&&this._lastBandwidthProfileRevision<a?(this._lastBandwidthProfileRevision=a,Object.assign({bandwidth_profile:qW(i)},e)):e},t.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},t.prototype._publishPeerConnectionState=function(e){this._transport.publish(Object.assign({peer_connections:[e]},this._getState()))},t.prototype._update=function(e){var n=this;if(e.subscribed&&e.subscribed.revision>this._subscribedRevision){this._subscribedRevision=e.subscribed.revision,e.subscribed.tracks.forEach(function(o){o.id?(n._subscriptionFailures.delete(o.sid),n._subscribed.set(o.sid,o.id)):o.error&&!n._subscriptionFailures.has(o.sid)&&n._subscriptionFailures.set(o.sid,o.error)});var i=new Set(e.subscribed.tracks.filter(function(o){return!!o.id}).map(function(o){return o.sid}));this._subscribed.forEach(function(o,s){i.has(s)||n._subscribed.delete(s)})}var a=new Set;return(e.participants||[]).forEach(function(o){if(o.sid!==n.localParticipant.sid){var s=n._disconnectedParticipantRevisions.get(o.sid);if(!(s&&o.revision<=s)){s&&n._disconnectedParticipantRevisions.delete(o.sid);var l=n._getOrCreateRemoteParticipant(o);l.update(o),a.add(l)}}}),e.type==="synced"&&this.participants.forEach(function(o){a.has(o)||o.disconnect()}),tq(this),e.peer_connections&&this._peerConnectionManager.update(e.peer_connections,e.type==="synced"),e.recording&&this.recording.update(e.recording),e.published&&e.published.revision>this._publishedRevision&&(this._publishedRevision=e.published.revision,e.published.tracks.forEach(function(o){o.sid&&n._published.set(o.id,o.sid)}),this.localParticipant.update(e.published)),e.participant&&this.localParticipant.connect(e.participant.sid,e.participant.identity),[this._dominantSpeakerSignaling,this._transcriptionSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(o){var s=o.channel;!o.isSetup&&e.media_signaling&&e.media_signaling[s]&&e.media_signaling[s].transport&&e.media_signaling[s].transport.type==="data-channel"&&o.setup(e.media_signaling[s].transport.label)}),e.type==="warning"&&e.states&&e.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=e.states.revision,this.localParticipant.updateMediaStates(e.states)),this},t.prototype._initPublisherHintSignaling=function(){var e=this;this._publisherHintsSignaling.on("updated",function(i,a){Promise.all(i.map(function(o){return e.localParticipant.setPublisherHint(o.track,o.encodings).then(function(s){return{track:o.track,result:s}})})).then(function(o){e._publisherHintsSignaling.sendHintResponse({id:a,hints:o})})});var n=function(i){i.kind==="video"&&i.trackTransceiver.on("replaced",function(){e._publisherHintsSignaling.sendTrackReplaced({trackSid:i.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(i){return n(i)}),this.localParticipant.on("trackAdded",function(i){return n(i)})},t.prototype._initTrackSwitchOffSignaling=function(){var e=this;this._trackSwitchOffSignaling.on("updated",function(n,i){try{e._log.debug("received trackSwitch: ",{tracksOn:i,tracksOff:n});var a=new Map;i.forEach(function(o){return a.set(o,!0)}),n.forEach(function(o){a.get(o)&&e._log.warn(o+" is DUPLICATED in both tracksOff and tracksOn list"),a.set(o,!1)}),e.participants.forEach(function(o){o.tracks.forEach(function(s){var l=a.get(s.sid);typeof l<"u"&&(s.setSwitchedOff(!l),a.delete(s.sid))})}),a.forEach(function(o,s){return e._pendingSwitchOffStates.set(s,!o)})}catch(o){e._log.error("error processing track switch off:",o)}})},t.prototype._initDominantSpeakerSignaling=function(){var e=this;this._dominantSpeakerSignaling.on("updated",function(){return e.setDominantSpeaker(e._dominantSpeakerSignaling.loudestParticipantSid)})},t.prototype._initTranscriptionSignaling=function(){var e=this;this._transcriptionSignaling.on("transcription",function(n){e.emit("transcription",n)})},t.prototype._initNetworkQualityMonitorSignaling=function(){var e=this;this._networkQualitySignaling.on("ready",function(){var n=new e._NetworkQualityMonitor(e._peerConnectionManager,e._networkQualitySignaling);e._networkQualityMonitor=n,n.on("updated",function(){e.iceConnectionState!=="failed"&&(e.localParticipant.setNetworkQualityLevel(n.level,n.levels),e.participants.forEach(function(i){var a=n.remoteLevels.get(i.sid);a&&i.setNetworkQualityLevel(a.level,a)}))}),n.start()}),this._networkQualitySignaling.on("teardown",function(){return e._teardownNetworkQualityMonitor()})},t.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},t.prototype.getStats=function(){var e=this;return this._peerConnectionManager.getStats().then(function(n){return new Map(Array.from(n).map(function(i){var a=sE(i,2),o=a[0],s=a[1];return[o,Object.assign({},s,{localAudioTrackStats:H5(e,s.localAudioTrackStats),localVideoTrackStats:H5(e,s.localVideoTrackStats),remoteAudioTrackStats:G5(e,s.remoteAudioTrackStats),remoteVideoTrackStats:G5(e,s.remoteVideoTrackStats)})]}))})},t}(DW);function cE(r,t){return t.reduce(function(e,n){var i=r.get(n.trackId);return i?[Object.assign({},n,{trackSid:i})].concat(e):e},[])}function H5(r,t){return cE(r._published,t)}function G5(r,t){var e=new Map(Array.from(r._subscribed.entries()).map(function(n){var i=sE(n,2),a=i[0],o=i[1];return[o,a]}));return cE(e,t)}function JW(r,t){var e=q5(function(){r._publishNewLocalParticipantState()}),n=q5(function(){var i=o_(t.tracks,function(a){return a.trackTransceiver});r._peerConnectionManager.setTrackSenders(i)});t.on("trackAdded",n),t.on("trackRemoved",n),t.on("updated",e),r.on("stateChanged",function i(a){a==="disconnected"&&(t.removeListener("trackAdded",n),t.removeListener("trackRemoved",n),t.removeListener("updated",e),r.removeListener("stateChanged",i),t.disconnect())}),r.on("signalingConnectionStateChanged",function(){var i=r.localParticipant,a=r.signalingConnectionState,o=i.identity,s=i.sid;switch(a){case"connected":i.connect(s,o);break;case"reconnecting":i.reconnecting();break}})}function XW(r,t){t.on("description",function(n){r._publishPeerConnectionState(n)}),t.dequeue("description"),t.on("candidates",function(n){r._publishPeerConnectionState(n)}),t.dequeue("candidates"),t.on("trackAdded",r._addTrackReceiver.bind(r)),t.dequeue("trackAdded"),t.getTrackReceivers().forEach(r._addTrackReceiver,r),t.on("connectionStateChanged",function(){r.emit("connectionStateChanged")}),t.on("iceConnectionStateChanged",function(){r.emit("iceConnectionStateChanged"),r.iceConnectionState==="failed"&&(r.localParticipant.networkQualityLevel!==null&&r.localParticipant.setNetworkQualityLevel(0),r.participants.forEach(function(e){e.networkQualityLevel!==null&&e.setNetworkQualityLevel(0)}))})}function ZW(r,t){t.on("message",r._update.bind(r)),t.on("stateChanged",function e(n,i){n==="disconnected"&&(r.state!=="disconnected"&&r._disconnect(i),t.removeListener("stateChanged",e)),r.emit("signalingConnectionStateChanged")})}function eq(r,t,e){var n=new Map,i=!1,a=setInterval(function(){r.getStats().then(function(o){i=!i,o.forEach(function(s,l){var c=new BW(l,s,!0);t.publishEvent("quality","stats-report","info",{audioTrackStats:c.remoteAudioTrackStats.map(function(p,y){return Q5(p,s.remoteAudioTrackStats[y],n)}),localAudioTrackStats:c.localAudioTrackStats.map(function(p,y){return K5(p,s.localAudioTrackStats[y],n)}),localVideoTrackStats:c.localVideoTrackStats.map(function(p,y){return K5(p,s.localVideoTrackStats[y],n)}),peerConnectionId:c.peerConnectionId,videoTrackStats:c.remoteVideoTrackStats.map(function(p,y){return Q5(p,s.remoteVideoTrackStats[y],n)})});var u=o_(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(p){return c[p].map(function(y){var _=y.ssrc,x=y.trackSid;return x+"+"+_})}),d=GW(Array.from(n.keys()),u);if(d.forEach(function(p){return n.delete(p)}),i){var v=rq(s.activeIceCandidatePair,c.peerConnectionId);t.publishEvent("quality","active-ice-candidate-pair","info",v)}})},function(){})},e);r.on("stateChanged",function o(s){s==="disconnected"&&(clearInterval(a),r.removeListener("stateChanged",o))})}function tq(r){var t=r._getTrackSidsToTrackSignalings();r._subscriptionFailures.forEach(function(e,n){var i=t.get(n);i&&(r._subscriptionFailures.delete(n),i.subscribeFailed(KW(e.code,e.message)))}),t.forEach(function(e){var n=r._subscribed.get(e.sid);(!n||e.isSubscribed&&e.trackTransceiver.id!==n)&&e.setTrackTransceiver(null),n&&r._getTrackReceiver(n).then(function(i){return e.setTrackTransceiver(i)})})}function K5(r,t,e){var n=t.framesEncoded,i=t.packetsSent,a=t.totalEncodeTime,o=t.totalPacketSendDelay,s=Object.assign({},r),l=r.trackSid+"+"+r.ssrc,c=e.get(l)||new Map;if(typeof a=="number"&&typeof n=="number"){var u=c.get("avgEncodeDelay")||new up;u.putSample(a*1e3,n),s.avgEncodeDelay=Math.round(u.get()),c.set("avgEncodeDelay",u)}if(typeof o=="number"&&typeof i=="number"){var d=c.get("avgPacketSendDelay")||new up;d.putSample(o*1e3,i),s.avgPacketSendDelay=Math.round(d.get()),c.set("avgPacketSendDelay",d)}return e.set(l,c),s}function Q5(r,t,e){var n=t.estimatedPlayoutTimestamp,i=t.framesDecoded,a=t.jitterBufferDelay,o=t.jitterBufferEmittedCount,s=t.totalDecodeTime,l=Object.assign({},r),c=r.trackSid+"+"+r.ssrc,u=e.get(c)||new Map;if(typeof n=="number"&&(l.estimatedPlayoutTimestamp=n),typeof i=="number"&&typeof s=="number"){var d=u.get("avgDecodeDelay")||new up;d.putSample(s*1e3,i),l.avgDecodeDelay=Math.round(d.get()),u.set("avgDecodeDelay",d)}if(typeof a=="number"&&typeof o=="number"){var v=u.get("avgJitterBufferDelay")||new up;v.putSample(a*1e3,o),l.avgJitterBufferDelay=Math.round(v.get()),u.set("avgJitterBufferDelay",v)}return e.set(c,u),l}function rq(r,t){return r=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:t,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},og(r||{},null)),r.localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},og(r.localCandidate||{},null)),r.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},og(r.remoteCandidate||{},null)),r}var nq=YW,iq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aq=cl,lE=nP,oq=OT,sq=zt.reconnectBackoffConfig,cq=Bs,s_=zt,lq=s_.SDK_NAME,uq=s_.SDK_VERSION,fq=s_.SDP_FORMAT,fl=Me,dq=fl.createBandwidthProfilePayload,hq=fl.createMediaSignalingPayload,pq=fl.createMediaWarningsPayload,vq=fl.createSubscribePayload,mq=fl.getUserAgent,gq=fl.isNonArrayObject,Zp=Fe,yq=Zp.createTwilioError,sg=Zp.RoomCompletedError,_q=Zp.SignalingConnectionError,wq=Zp.SignalingServerBusyError,bq=1,cg=2,Sq={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},xq=function(r){iq(t,r);function t(e,n,i,a,o,s){var l=this;return s=Object.assign({Backoff:oq,TwilioConnection:lE,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:mq()},s),l=r.call(this,"connecting",Sq)||this,Object.defineProperties(l,{_accessToken:{value:n},_adaptiveSimulcast:{value:s.adaptiveSimulcast},_automaticSubscription:{value:s.automaticSubscription},_bandwidthProfile:{value:s.bandwidthProfile},_dominantSpeaker:{value:s.dominantSpeaker},_receiveTranscriptions:{value:s.receiveTranscriptions},_eventObserver:{value:s.eventObserver,writable:!1},_renderHints:{value:s.renderHints},_iceServersStatus:{value:Array.isArray(s.iceServers)?"overrode":"acquire"},_localParticipant:{value:i},_name:{value:e},_networkQuality:{value:gq(s.networkQuality)||s.networkQuality},_notifyWarnings:{value:s.notifyWarnings},_options:{value:s},_peerConnectionManager:{value:a},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new s.Backoff(sq)},_session:{value:null,writable:!0},_trackPriority:{value:s.trackPriority},_trackSwitchOff:{value:s.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:s.userAgent},_wsServer:{value:o}}),Pq(l),l}return t.prototype._createConnectOrSyncOrDisconnectMessage=function(){if(this.state==="connected")return null;if(this.state==="disconnected")return{session:this._session,type:"disconnect",version:cg};var e={connecting:"connect",syncing:"sync"}[this.state],n={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:e,version:cg};return n.type==="connect"?(n.ice_servers=this._iceServersStatus,n.publisher={name:lq,sdk_version:uq,user_agent:this._userAgent},this._bandwidthProfile&&(n.bandwidth_profile=dq(this._bandwidthProfile)),this._notifyWarnings&&(n.participant.media_warnings=pq(this._notifyWarnings)),n.media_signaling=hq(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints,this._receiveTranscriptions),n.subscribe=vq(this._automaticSubscription),n.format=fq,n.token=this._accessToken):n.type==="sync"?(n.session=this._session,n.token=this._accessToken):n.type==="update"&&(n.session=this._session),n},t.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:bq}},t.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var e=this._createConnectOrSyncOrDisconnectMessage();e&&this._twilioConnection.sendMessage(e)},t.prototype.disconnect=function(e){return this.state!=="disconnected"?(this.preempt("disconnected",null,[e]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0):!1},t.prototype.publish=function(e){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:cg},e)),!0;case"connecting":case"syncing":return this._updatesToSend.push(e),!0;case"disconnected":default:return!1}},t.prototype.publishEvent=function(e,n,i,a){this._eventObserver.emit("event",{group:e,name:n,level:i,payload:a})},t.prototype.sync=function(){return this.state==="connected"?(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0):!1},t.prototype._setSession=function(e,n){this._session=e,this._sessionTimeoutMS=n*1e3},t.prototype._getReconnectTimer=function(){var e=this;return this._sessionTimeoutMS===0?null:(this._sessionTimer||(this._sessionTimer=new cq(function(){e._sessionTimer&&(e._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(n){e._reconnectBackoff.backoff(n)}))},t.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},t}(aq);function Y5(r){return Array.from(r.reduce(function(t,e){var n=t.get(e.id)||e;return(!n.description&&e.description||n.description&&e.description&&e.description.revision>n.description.revision)&&(n.description=e.description),(!n.ice&&e.ice||n.ice&&e.ice&&e.ice.revision>n.ice.revision)&&(n.ice=e.ice),t.set(n.id,n),t},new Map).values())}function kq(r){return r.reduce(function(t,e){return(!t.participant&&e.participant||t.participant&&e.participant&&e.participant.revision>t.participant.revision)&&(t.participant=e.participant),!t.peer_connections&&e.peer_connections?t.peer_connections=Y5(e.peer_connections):t.peer_connections&&e.peer_connections&&(t.peer_connections=Y5(t.peer_connections.concat(e.peer_connections))),t},{})}function Pq(r){function t(){if(r.state!=="disconnected"){r._twilioConnection&&r._twilioConnection.removeListener("message",n);var l=r._iceServersStatus,c=r._options,u=r._wsServer,d=r.state,v=c.TwilioConnection,p=new v(u,Object.assign({helloBody:d==="connecting"&&l==="acquire"?r._createIceMessage():r._createConnectOrSyncOrDisconnectMessage()},c));p.once("close",function(y){y===v.CloseReason.LOCAL?e():e(new Error(y))}),p.on("message",n),r._twilioConnection=p}}function e(l){if(r.state!=="disconnected"){if(!l){r.disconnect();return}var c=r._getReconnectTimer();if(!c){var u=l.message===lE.CloseReason.BUSY?new wq:new _q;r.disconnect(u);return}r.state==="connected"&&r.preempt("syncing"),c.then(t)}}function n(l){if(r.state!=="disconnected"){if(l.type==="error"){r.disconnect(yq(l.code,l.message));return}switch(r.state){case"connected":switch(l.type){case"connected":case"synced":case"update":case"warning":r.emit("message",l);return;case"disconnected":r.disconnect(l.status==="completed"?new sg:null);return;default:return}case"connecting":switch(l.type){case"iced":r._options.onIced(l.ice_servers).then(function(){r._sendConnectOrSyncOrDisconnectMessage()});return;case"connected":r._setSession(l.session,l.options.session_timeout),r.emit("connected",l),r.preempt("connected");return;case"synced":case"update":r._updatesReceived.push(l);return;case"disconnected":r.disconnect(l.status==="completed"?new sg:null);return;default:return}case"syncing":switch(l.type){case"connected":case"update":r._updatesReceived.push(l);return;case"synced":r._clearReconnectTimer(),r.emit("message",l),r.preempt("connected");return;case"disconnected":r.disconnect(l.status==="completed"?new sg:null);return;default:return}default:return}}}r.on("stateChanged",function l(c){switch(c){case"connected":{var u=r._updatesToSend.splice(0);u.length&&r.publish(kq(u)),r._updatesReceived.splice(0).forEach(function(d){return r.emit("message",d)});return}case"disconnected":r._twilioConnection.removeListener("message",n),r.removeListener("stateChanged",l);return;case"syncing":return;default:return}});var i=r._options,a=r._iceServersStatus,o=i.iceServers,s=i.onIced;a==="overrode"?s(o).then(t):t()}var Tq=xq,Eq=G1,Cq=T$,Lq=nq,Oq=Tq,uE=Fe,Aq=uE.SignalingConnectionDisconnectedError,Nq=uE.SignalingIncomingMessageInvalidError,fE=Me,Rq=fE.flatMap,jq=fE.createRoomConnectEventPayload;function Iq(r,t,e,n,i,a){a=Object.assign({PeerConnectionManager:Cq,RoomV2:Lq,Transport:Oq},a);var o=i.video[0]&&i.video[0].adaptiveSimulcast===!0,s=a.PeerConnectionManager,l=a.RoomV2,c=a.Transport,u=a.iceServers,d=a.log,v=new s(n,i,a),p=Rq(e.tracks,function(w){return[w.trackTransceiver]});v.setTrackSenders(p);var y=new Error("Canceled"),_,x=new Eq(function(w,S,k){var T=function(H){return k()?(S(y),Promise.reject(y)):(d.debug("Got ICE servers:",H),a.iceServers=H,v.setConfiguration(a),v.createAndOffer().then(function(){if(k())throw S(y),y;d.debug("createAndOffer() succeeded."),v.dequeue("description")}).catch(function(ee){throw d.error("createAndOffer() failed:",ee),S(ee),ee}))},R=a.automaticSubscription,U=a.bandwidthProfile,$=a.dominantSpeaker,F=a.receiveTranscriptions,M=a.environment,Y=a.eventObserver,O=a.loggerName,N=a.logLevel,W=a.name,j=a.networkMonitor,Z=a.networkQuality,X=a.notifyWarnings,oe=a.realm,q=a.sdpSemantics,re=!!U,fe=!!U,ne=!!U&&(a.clientTrackSwitchOffControl!=="disabled"||a.contentPreferencesMode!=="disabled"),E=Object.assign({adaptiveSimulcast:o,automaticSubscription:R,dominantSpeaker:$,receiveTranscriptions:F,environment:M,eventObserver:Y,loggerName:O,logLevel:N,networkMonitor:j,networkQuality:Z,notifyWarnings:X,iceServers:u,onIced:T,realm:oe,renderHints:ne,sdpSemantics:q,trackPriority:re,trackSwitchOff:fe},U?{bandwidthProfile:U}:{});_=new c(W,r,e,v,t,E);var z=jq(a);Y.emit("event",z),_.once("connected",function(H){if(d.debug("Transport connected:",H),k()){S(y);return}var ee=H.participant;if(!ee){S(new Nq);return}w(new l(e,H,_,v,a))}),_.once("stateChanged",function(H,ee){H==="disconnected"?(_=null,S(ee||new Aq)):d.debug("Transport state changed:",H)})},function(){_&&(_.disconnect(),_=null)});return x.catch(function(){_&&(_.disconnect(),_=null),v.close()}),x}var Mq=Iq,Dq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fq=a_,Bq=function(r){Dq(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),e}return t.prototype.addTrack=function(e,n,i,a){a===void 0&&(a=null);var o=this._createLocalTrackPublicationSignaling(e,n,i,a);return this._trackSendersToPublications.set(e,o),this._publicationsToTrackSenders.set(o,e),r.prototype.addTrack.call(this,o),this},t.prototype.getPublication=function(e){return this._trackSendersToPublications.get(e)||null},t.prototype.getSender=function(e){return this._publicationsToTrackSenders.get(e)||null},t.prototype.removeTrack=function(e){var n=this._trackSendersToPublications.get(e);if(!n)return null;this._trackSendersToPublications.delete(e),this._publicationsToTrackSenders.delete(n);var i=r.prototype.removeTrack.call(this,n);return i&&n.stop(),n},t}(Fq),Uq=Bq,$q=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vq=oE,zq=function(r){$q(t,r);function t(e,n,i){var a=this,o=e.clone();e.kind!=="data"&&(o.track.enabled=e.track.enabled),e=o;var s=e.kind==="data"?!0:e.track.enabled;return a=r.call(this,n,e.kind,s,i)||this,a.setTrackTransceiver(e),Object.defineProperties(a,{_updatedPriority:{value:i,writable:!0},id:{enumerable:!0,value:e.id}}),a}return Object.defineProperty(t.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),t.prototype.enable=function(e){return e=typeof e=="boolean"?e:!0,this.trackTransceiver.track.enabled=e,r.prototype.enable.call(this,e)},t.prototype.publishFailed=function(e){return Wq(this,e)&&this.emit("updated"),this},t.prototype.setPriority=function(e){return this._updatedPriority!==e&&(this._updatedPriority=e,this.emit("updated")),this},t.prototype.setSid=function(e){return this._error?this:r.prototype.setSid.call(this,e)},t.prototype.stop=function(){this.trackTransceiver.stop()},t}(Vq);function Wq(r,t){return r._sid!==null||r._error?!1:(r._error=t,!0)}var qq=zq,Hq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Gq=qq,Kq=G4,Qq=Fe.createTwilioError,Yq=function(r){Hq(t,r);function t(e,n,i,a,o){var s=r.call(this,e,n,i)||this;return Object.defineProperties(s,{_log:{value:o.log.createLog("default",s)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:a}}),s}return t.prototype.getState=function(){var e={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(e.audio_processor=this._noiseCancellationVendor),e},t.prototype.toString=function(){return"[LocalTrackPublicationV2: "+this.sid+"]"},t.prototype.update=function(e){switch(e.state){case"ready":this.setSid(e.sid);break;case"failed":{var n=e.error;this.publishFailed(Qq(n.code,n.message));break}}return this},t.prototype.updateMediaStates=function(e){if(!e||!e.recordings||this._mediaStates.recordings===e.recordings)return this;switch(this._mediaStates.recordings=e.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",Kq.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: "+this._mediaStates.recordings);break}return this},t}(Gq),Jq=Yq,Xq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zq=Uq,eH=Jq,tH=zt.DEFAULT_LOG_LEVEL,rH=Da,dE=Me,nH=dE.buildLogLevels,iH=dE.isDeepEqual,aH=function(r){Xq(t,r);function t(e,n,i){var a=this;i=Object.assign({logLevel:tH,LocalTrackPublicationV2:eH},i),a=r.call(this)||this;var o=nH(i.logLevel);return Object.defineProperties(a,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:e},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:i.LocalTrackPublicationV2},_log:{value:i.log?i.log.createLog("default",a):new rH("default",a,o,i.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:n},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),a}return t.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},t.prototype.setSignalingRegion=function(e){this._signalingRegion||(this._signalingRegion=e)},t.prototype.setBandwidthProfile=function(e){iH(this._bandwidthProfile,e)||(this._bandwidthProfile=JSON.parse(JSON.stringify(e)),this._bandwidthProfileRevision++,this.didUpdate())},t.prototype.setAudioProcessors=function(e){this.audioProcessors=e},t.prototype.getParameters=function(){return this._encodingParameters},t.prototype.setParameters=function(e){return this._encodingParameters.update(e),this},t.prototype.update=function(e){return this._publishedRevision>=e.revision?this:(this._publishedRevision=e.revision,e.tracks.forEach(function(n){var i=this.tracks.get(n.id);i&&i.update(n)},this),this)},t.prototype.updateMediaStates=function(e){return!e||!e.tracks?this:(Array.from(this.tracks.values()).forEach(function(n){var i=e.tracks[n.sid];i&&n.updateMediaStates(i)}),this)},t.prototype._createLocalTrackPublicationSignaling=function(e,n,i,a){return new this._LocalTrackPublicationV2(e,n,i,a,{log:this._log})},t.prototype.addTrack=function(e,n,i,a){var o=this;r.prototype.addTrack.call(this,e,n,i,a);var s=this.getPublication(e),l=s.isEnabled,c=s.updatedPriority,u=function(){(l!==s.isEnabled||c!==s.updatedPriority)&&(o.didUpdate(),l=s.isEnabled,c=s.updatedPriority)};return s.on("updated",u),this._removeListener(s),this._removeListeners.set(s,function(){return s.removeListener("updated",u)}),this.didUpdate(),this},t.prototype._removeListener=function(e){var n=this._removeListeners.get(e);n&&n()},t.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(e){return e.getState()})}},t.prototype.didUpdate=function(){this._revision++,this.emit("updated")},t.prototype.removeTrack=function(e){var n=r.prototype.removeTrack.call(this,e);return n&&(e.removeClone(n.trackTransceiver),this._removeListener(n),this.didUpdate()),n},t.prototype.setNetworkQualityConfiguration=function(e){this.networkQualityConfiguration.update(e)},t.prototype.setPublisherHint=function(e,n){var i=Array.from(this.tracks.values()).find(function(a){return a.sid===e});return i?i.trackTransceiver.setPublisherHint(n):(this._log.warn("track:"+e+" not found"),Promise.resolve("UNKNOWN_TRACK"))},t}(Zq),oH=aH,sH=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cH=a_,lH=nE,uH=cl,fH={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},dH=function(r){sH(t,r);function t(){return r.call(this,"closed",fH)||this}return t.prototype._close=function(e){return this.transition("closing",e),this.transition("closed",e),Promise.resolve(this)},t.prototype._connect=function(e,n,i,a,o){e.connect("PA00000000000000000000000000000000","test");var s="RM00000000000000000000000000000000",l=Promise.resolve(new lH(e,s,o));return l.cancel=function(){},l},t.prototype._open=function(e){return this.transition("opening",e),this.transition("open",e),Promise.resolve(this)},t.prototype.close=function(){var e=this;return this.bracket("close",function(n){switch(e.state){case"closed":return e;case"open":return e._close(n);default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},t.prototype.connect=function(e,n,i,a,o){var s=this;return this.bracket("connect",function l(c){switch(s.state){case"closed":return s._open(c).then(l.bind(null,c));case"open":return s.releaseLockCompletely(c),s._connect(e,n,i,a,o);default:throw new Error('Unexpected Signaling state "'+s.state+'"')}})},t.prototype.createLocalParticipantSignaling=function(){return new cH},t.prototype.open=function(){var e=this;return this.bracket("open",function(n){switch(e.state){case"closed":return e._open(n);case"open":return e;default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},t}(uH),hH=dH,pH=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vH=Mq,mH=oH,gH=hH,yH=function(r){pH(t,r);function t(e,n){var i=this;return n=Object.assign({createCancelableRoomSignalingPromise:vH},n),i=r.call(this)||this,Object.defineProperties(i,{_createCancelableRoomSignalingPromise:{value:n.createCancelableRoomSignalingPromise},_options:{value:n},_wsServer:{value:e}}),i}return t.prototype._connect=function(e,n,i,a,o){return o=Object.assign({},this._options,o),this._createCancelableRoomSignalingPromise.bind(null,n,this._wsServer,e,i,a,o)},t.prototype.createLocalParticipantSignaling=function(e,n){return new mH(e,n)},t}(gH),_H=yH,wH=Ds.MediaStreamTrack,c_=Dt,bH=c_.guessBrowser,SH=c_.guessBrowserVersion,xH=c_.isCodecSupported,kH=nD,PH=sD,TH=lB,EH=lT,CH=fB,l_=Uc,LH=l_.LocalAudioTrack,OH=l_.LocalDataTrack,AH=l_.LocalVideoTrack,NH=mB,RH=c9,jH=_H,ev=Me,IH=ev.asLocalTrack,MH=ev.buildLogLevels,DH=ev.filterObject,J5=ev.isNonArrayObject,Fa=zt,FH=Fa.DEFAULT_ENVIRONMENT,BH=Fa.DEFAULT_LOG_LEVEL,UH=Fa.DEFAULT_LOGGER_NAME,$H=Fa.DEFAULT_REALM,VH=Fa.DEFAULT_REGION,zH=Fa.WS_SERVER,WH=Fa.SDK_NAME,qH=Fa.SDK_VERSION,Dd=Fa.typeErrors,ls=G1,HH=sT,GH=Da,KH=hf.validateBandwidthProfile,lg=bH()==="safari"&&SH(),QH=0,X5=!1,hE=!1;if(lg){var Z5=lg.major,YH=lg.minor;hE=Z5<12||Z5===12&&YH<1}var JH=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),XH=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function ZH(r,t){if(typeof t>"u"&&(t={}),!J5(t))return ls.reject(Dd.INVALID_TYPE("options","object"));var e=t.Log||GH,n=t.loggerName||UH,i=t.logLevel||BH,a=MH(i),o="[connect #"+ ++QH+"]",s;try{s=new e("default",o,a,n)}catch(U){return ls.reject(U)}eb(t,s,JH);var l=t.preferredVideoCodecs==="auto";if(l&&(t.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),t.maxVideoBitrate&&l)return s.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),ls.reject(Dd.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));t=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,receiveTranscriptions:!1,environment:FH,eventListener:null,insights:!0,LocalAudioTrack:LH,LocalDataTrack:OH,LocalParticipant:TH,LocalVideoTrack:AH,Log:e,MediaStreamTrack:wH,loggerName:n,logLevel:i,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:$H,region:VH,signaling:jH},DH(t));var c={};typeof t.wsServerInsights=="string"&&(c.gateway=t.wsServerInsights);var u=t.insights?EH:CH,d=new u(r,WH,qH,t.environment,t.realm,c),v=zH(t.environment,t.region),p=new HH(d,Date.now(),s,t.eventListener);if(t=Object.assign({eventObserver:p,wsServer:v},t),t.log=s,hE&&!X5&&s.logLevel!=="error"&&s.logLevel!=="off"&&(X5=!0,s.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),typeof r!="string")return ls.reject(Dd.INVALID_TYPE("token","string"));var y=Object.assign({},t);if(delete y.name,"tracks"in t){if(!Array.isArray(t.tracks))return ls.reject(Dd.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{t.tracks=t.tracks.map(function(U){return IH(U,y)})}catch(U){return ls.reject(U)}}var _=KH(t.bandwidthProfile);if(_)return ls.reject(_);t.clientTrackSwitchOffControl="disabled",t.contentPreferencesMode="disabled",t.bandwidthProfile&&(t.clientTrackSwitchOffControl="auto",t.contentPreferencesMode="auto",t.bandwidthProfile.video&&(eb(t.bandwidthProfile.video,s,XH),"maxTracks"in t.bandwidthProfile.video?t.clientTrackSwitchOffControl="disabled":t.bandwidthProfile.video.clientTrackSwitchOffControl==="manual"?t.clientTrackSwitchOffControl="manual":t.clientTrackSwitchOffControl="auto","renderDimensions"in t.bandwidthProfile.video?t.contentPreferencesMode="disabled":t.bandwidthProfile.video.contentPreferencesMode==="manual"?t.contentPreferencesMode="manual":t.contentPreferencesMode="auto"));var x=t.signaling,w=new x(t.wsServer,t);s.info("Connecting to a Room"),s.debug("Options:",t);var S=new PH({maxAudioBitrate:t.maxAudioBitrate,maxVideoBitrate:t.maxVideoBitrate},l),k={audio:t.preferredAudioCodecs.map(tb),video:t.preferredVideoCodecs.map(tb)},T=new NH(J5(t.networkQuality)?t.networkQuality:{});["audio","video"].forEach(function(U){return k[U].forEach(function($){var F=$.codec;return xH(F,U).then(function(M){return!M&&s.warn("The preferred "+U+' codec "'+F+'" will be ignored as it is not supported by the browser.')})})});var R=kH(nG.bind(null,t),eG.bind(null,w,s,S,T,t),rG.bind(null,r,t,w,S,k),tG.bind(null,t));return R.then(function(U){return d.connect(U.sid,U.localParticipant.sid),s.info("Connected to Room:",U.toString()),s.info("Room name:",U.name),s.debug("Room:",U),U.once("disconnected",function(){return d.disconnect()}),U},function(U){d.disconnect(),R._isCanceled?s.info("Attempt to connect to a Room was canceled"):s.info("Error while connecting to a Room:",U)}),R}function eb(r,t,e){e.forEach(function(n){var i=n.didWarn,a=n.name,o=n.newName,s=n.shouldDelete;a in r&&typeof r[a]<"u"&&(o&&s&&(r[o]=r[a]),s&&delete r[a],!i&&!["error","off"].includes(t.level)&&(t.warn('The ConnectOptions "'+a+'" is '+(o?'deprecated and scheduled for removal. Please use "'+o+'" instead.':"no longer applicable and will be ignored.")),n.didWarn=!0))})}function eG(r,t,e,n,i,a){var o=r.createLocalParticipantSignaling(e,n);return t.debug("Creating a new LocalParticipant:",o),new i.LocalParticipant(o,a,i)}function tG(r,t,e){var n=new RH(t,e,r),i=r.log;return i.debug("Creating a new Room:",n),e.on("stateChanged",function a(o){o==="disconnected"&&(i.info("Disconnected from Room:",n.toString()),e.removeListener("stateChanged",a))}),n}function rG(r,t,e,n,i,a){return t.log.debug("Creating a new RoomSignaling"),e.connect(a._signaling,r,n,i,t)}function nG(r,t){var e=r.log;return r.shouldStopLocalTracks=!r.tracks,r.shouldStopLocalTracks?e.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(e.info("Getting LocalTracks"),e.debug("Options:",r)),r.createLocalTracks(r).then(function(i){var a=t(i);return a.catch(function(){r.shouldStopLocalTracks&&(e.info("The automatically acquired LocalTracks will now be stopped"),i.forEach(function(s){s.stop()}))}),a})}function tb(r){var t=typeof r=="string"?{codec:r}:r;switch(t.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},t);case"vp8":return Object.assign({simulcast:!1},t);default:return t}}var iG=ZH,pE=zt,aG=pE.DEFAULT_LOG_LEVEL,oG=pE.DEFAULT_LOGGER_NAME;function vE(r,t){t=Object.assign({loggerName:oG,logLevel:aG},t);var e={};e.loggerName=t.loggerName,e.logLevel=t.logLevel,delete t.loggerName,delete t.logLevel;var n=["getUserMedia","enumerateDevices","MediaStream","mapMediaElement","disposeMediaElement"];n.forEach(function(a){a in t&&(e[a]=t[a],delete t[a])});var i=t.createLocalTracks;return delete t.createLocalTracks,e[r]=Object.keys(t).length>0?t:!0,i(e).then(function(a){return a[0]})}function sG(r){return vE("audio",r)}function cG(r){return vE("video",r)}var rb={audio:sG,video:cG},mE=Dt,lG=mE.guessBrowser,uG=mE.support,fG=An.getSdpFormat,mf=Fs,dG=mf.isAndroid,hG=mf.isMobile,pG=mf.isNonChromiumEdge,vG=mf.rebrandedChromeBrowser,mG=mf.mobileWebKitBrowser,gG=["crios","edg","edge","electron","headlesschrome"],yG=["chrome","firefox"],_G=["chrome","safari"],wG=[];function bG(){var r=lG();if(!r)return!1;var t=vG(r),e=mG(r),n=dG()?yG:_G;return!!r&&uG()&&fG()==="unified"&&(!t||gG.includes(t))&&!pG(r)&&(!e||wG.includes(e))&&(!hG()||n.includes(r))}var SG=bG,xG=T1.exports,tf=A&&A.__assign||function(){return tf=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},tf.apply(this,arguments)};Object.defineProperty(xG,"__esModule",{value:!0});var tv=Mp,kG=el,Ba={connect:iG,createLocalAudioTrack:rb.audio,createLocalVideoTrack:rb.video,isSupported:SG(),version:D4.version,Logger:M4,LocalAudioTrack:Uc.LocalAudioTrack,LocalDataTrack:Uc.LocalDataTrack,LocalVideoTrack:Uc.LocalVideoTrack};function PG(r,t){var e=tf({createLocalTracks:tv.createLocalTracks},t);return Ba.connect(r,e)}function TG(r){var t=tf({createLocalTracks:tv.createLocalTracks},r);return Ba.createLocalAudioTrack(t)}function EG(r){var t=tf({createLocalTracks:tv.createLocalTracks},r);return Ba.createLocalVideoTrack(t)}var CG=Ba.isSupported,LG=Ba.version,OG=Ba.Logger,AG=Ba.LocalAudioTrack,NG=Ba.LocalVideoTrack,RG=Ba.LocalDataTrack;T1.exports={connect:PG,createLocalAudioTrack:TG,createLocalVideoTrack:EG,createLocalTracks:tv.createLocalTracks,runPreflight:kG.runPreflight,isSupported:CG,version:LG,Logger:OG,LocalAudioTrack:AG,LocalVideoTrack:NG,LocalDataTrack:RG};var jG=T1.exports;const IG=ix(jG);function gE(r,t){return function(){return r.apply(t,arguments)}}const{toString:MG}=Object.prototype,{getPrototypeOf:u_}=Object,{iterator:rv,toStringTag:yE}=Symbol,nv=(r=>t=>{const e=MG.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Ri=r=>(r=r.toLowerCase(),t=>nv(t)===r),iv=r=>t=>typeof t===r,{isArray:dl}=Array,nl=iv("undefined");function gf(r){return r!==null&&!nl(r)&&r.constructor!==null&&!nl(r.constructor)&&Ln(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const _E=Ri("ArrayBuffer");function DG(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&_E(r.buffer),t}const FG=iv("string"),Ln=iv("function"),wE=iv("number"),yf=r=>r!==null&&typeof r=="object",BG=r=>r===!0||r===!1,wh=r=>{if(nv(r)!=="object")return!1;const t=u_(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(yE in r)&&!(rv in r)},UG=r=>{if(!yf(r)||gf(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},$G=Ri("Date"),VG=Ri("File"),zG=Ri("Blob"),WG=Ri("FileList"),qG=r=>yf(r)&&Ln(r.pipe),HG=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||Ln(r.append)&&((t=nv(r))==="formdata"||t==="object"&&Ln(r.toString)&&r.toString()==="[object FormData]"))},GG=Ri("URLSearchParams"),[KG,QG,YG,JG]=["ReadableStream","Request","Response","Headers"].map(Ri),XG=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _f(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),dl(r))for(n=0,i=r.length;n<i;n++)t.call(null,r[n],n,r);else{if(gf(r))return;const a=e?Object.getOwnPropertyNames(r):Object.keys(r),o=a.length;let s;for(n=0;n<o;n++)s=a[n],t.call(null,r[s],s,r)}}function bE(r,t){if(gf(r))return null;t=t.toLowerCase();const e=Object.keys(r);let n=e.length,i;for(;n-- >0;)if(i=e[n],t===i.toLowerCase())return i;return null}const _s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,SE=r=>!nl(r)&&r!==_s;function ay(){const{caseless:r,skipUndefined:t}=SE(this)&&this||{},e={},n=(i,a)=>{const o=r&&bE(e,a)||a;wh(e[o])&&wh(i)?e[o]=ay(e[o],i):wh(i)?e[o]=ay({},i):dl(i)?e[o]=i.slice():(!t||!nl(i))&&(e[o]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&_f(arguments[i],n);return e}const ZG=(r,t,e,{allOwnKeys:n}={})=>(_f(t,(i,a)=>{e&&Ln(i)?r[a]=gE(i,e):r[a]=i},{allOwnKeys:n}),r),eK=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),tK=(r,t,e,n)=>{r.prototype=Object.create(t.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},rK=(r,t,e,n)=>{let i,a,o;const s={};if(t=t||{},r==null)return t;do{for(i=Object.getOwnPropertyNames(r),a=i.length;a-- >0;)o=i[a],(!n||n(o,r,t))&&!s[o]&&(t[o]=r[o],s[o]=!0);r=e!==!1&&u_(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},nK=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const n=r.indexOf(t,e);return n!==-1&&n===e},iK=r=>{if(!r)return null;if(dl(r))return r;let t=r.length;if(!wE(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},aK=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&u_(Uint8Array)),oK=(r,t)=>{const n=(r&&r[rv]).call(r);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(r,a[0],a[1])}},sK=(r,t)=>{let e;const n=[];for(;(e=r.exec(t))!==null;)n.push(e);return n},cK=Ri("HTMLFormElement"),lK=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,i){return n.toUpperCase()+i}),nb=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),uK=Ri("RegExp"),xE=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),n={};_f(e,(i,a)=>{let o;(o=t(i,a,r))!==!1&&(n[a]=o||i)}),Object.defineProperties(r,n)},fK=r=>{xE(r,(t,e)=>{if(Ln(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=r[e];if(Ln(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},dK=(r,t)=>{const e={},n=i=>{i.forEach(a=>{e[a]=!0})};return dl(r)?n(r):n(String(r).split(t)),e},hK=()=>{},pK=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function vK(r){return!!(r&&Ln(r.append)&&r[yE]==="FormData"&&r[rv])}const mK=r=>{const t=new Array(10),e=(n,i)=>{if(yf(n)){if(t.indexOf(n)>=0)return;if(gf(n))return n;if(!("toJSON"in n)){t[i]=n;const a=dl(n)?[]:{};return _f(n,(o,s)=>{const l=e(o,i+1);!nl(l)&&(a[s]=l)}),t[i]=void 0,a}}return n};return e(r,0)},gK=Ri("AsyncFunction"),yK=r=>r&&(yf(r)||Ln(r))&&Ln(r.then)&&Ln(r.catch),kE=((r,t)=>r?setImmediate:t?((e,n)=>(_s.addEventListener("message",({source:i,data:a})=>{i===_s&&a===e&&n.length&&n.shift()()},!1),i=>{n.push(i),_s.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ln(_s.postMessage)),_K=typeof queueMicrotask<"u"?queueMicrotask.bind(_s):typeof process<"u"&&process.nextTick||kE,wK=r=>r!=null&&Ln(r[rv]),ye={isArray:dl,isArrayBuffer:_E,isBuffer:gf,isFormData:HG,isArrayBufferView:DG,isString:FG,isNumber:wE,isBoolean:BG,isObject:yf,isPlainObject:wh,isEmptyObject:UG,isReadableStream:KG,isRequest:QG,isResponse:YG,isHeaders:JG,isUndefined:nl,isDate:$G,isFile:VG,isBlob:zG,isRegExp:uK,isFunction:Ln,isStream:qG,isURLSearchParams:GG,isTypedArray:aK,isFileList:WG,forEach:_f,merge:ay,extend:ZG,trim:XG,stripBOM:eK,inherits:tK,toFlatObject:rK,kindOf:nv,kindOfTest:Ri,endsWith:nK,toArray:iK,forEachEntry:oK,matchAll:sK,isHTMLForm:cK,hasOwnProperty:nb,hasOwnProp:nb,reduceDescriptors:xE,freezeMethods:fK,toObjectSet:dK,toCamelCase:lK,noop:hK,toFiniteNumber:pK,findKey:bE,global:_s,isContextDefined:SE,isSpecCompliantForm:vK,toJSONObject:mK,isAsyncFn:gK,isThenable:yK,setImmediate:kE,asap:_K,isIterable:wK};function _t(r,t,e,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}ye.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}});const PE=_t.prototype,TE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{TE[r]={value:r}});Object.defineProperties(_t,TE);Object.defineProperty(PE,"isAxiosError",{value:!0});_t.from=(r,t,e,n,i,a)=>{const o=Object.create(PE);ye.toFlatObject(r,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const s=r&&r.message?r.message:"Error",l=t==null&&r?r.code:t;return _t.call(o,s,l,e,n,i),r&&o.cause==null&&Object.defineProperty(o,"cause",{value:r,configurable:!0}),o.name=r&&r.name||"Error",a&&Object.assign(o,a),o};const bK=null;function oy(r){return ye.isPlainObject(r)||ye.isArray(r)}function EE(r){return ye.endsWith(r,"[]")?r.slice(0,-2):r}function ib(r,t,e){return r?r.concat(t).map(function(i,a){return i=EE(i),!e&&a?"["+i+"]":i}).join(e?".":""):t}function SK(r){return ye.isArray(r)&&!r.some(oy)}const xK=ye.toFlatObject(ye,{},null,function(t){return/^is[A-Z]/.test(t)});function av(r,t,e){if(!ye.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=ye.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,x){return!ye.isUndefined(x[_])});const n=e.metaTokens,i=e.visitor||u,a=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(t);if(!ye.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(ye.isDate(y))return y.toISOString();if(ye.isBoolean(y))return y.toString();if(!l&&ye.isBlob(y))throw new _t("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(y)||ye.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,_,x){let w=y;if(y&&!x&&typeof y=="object"){if(ye.endsWith(_,"{}"))_=n?_:_.slice(0,-2),y=JSON.stringify(y);else if(ye.isArray(y)&&SK(y)||(ye.isFileList(y)||ye.endsWith(_,"[]"))&&(w=ye.toArray(y)))return _=EE(_),w.forEach(function(k,T){!(ye.isUndefined(k)||k===null)&&t.append(o===!0?ib([_],T,a):o===null?_:_+"[]",c(k))}),!1}return oy(y)?!0:(t.append(ib(x,_,a),c(y)),!1)}const d=[],v=Object.assign(xK,{defaultVisitor:u,convertValue:c,isVisitable:oy});function p(y,_){if(!ye.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+_.join("."));d.push(y),ye.forEach(y,function(w,S){(!(ye.isUndefined(w)||w===null)&&i.call(t,w,ye.isString(S)?S.trim():S,_,v))===!0&&p(w,_?_.concat(S):[S])}),d.pop()}}if(!ye.isObject(r))throw new TypeError("data must be an object");return p(r),t}function ab(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function f_(r,t){this._pairs=[],r&&av(r,this,t)}const CE=f_.prototype;CE.append=function(t,e){this._pairs.push([t,e])};CE.toString=function(t){const e=t?function(n){return t.call(this,n,ab)}:ab;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function kK(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function LE(r,t,e){if(!t)return r;const n=e&&e.encode||kK;ye.isFunction(e)&&(e={serialize:e});const i=e&&e.serialize;let a;if(i?a=i(t,e):a=ye.isURLSearchParams(t)?t.toString():new f_(t,e).toString(n),a){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+a}return r}class ob{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ye.forEach(this.handlers,function(n){n!==null&&t(n)})}}const OE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PK=typeof URLSearchParams<"u"?URLSearchParams:f_,TK=typeof FormData<"u"?FormData:null,EK=typeof Blob<"u"?Blob:null,CK={isBrowser:!0,classes:{URLSearchParams:PK,FormData:TK,Blob:EK},protocols:["http","https","file","blob","url","data"]},d_=typeof window<"u"&&typeof document<"u",sy=typeof navigator=="object"&&navigator||void 0,LK=d_&&(!sy||["ReactNative","NativeScript","NS"].indexOf(sy.product)<0),OK=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",AK=d_&&window.location.href||"http://localhost",NK=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:d_,hasStandardBrowserEnv:LK,hasStandardBrowserWebWorkerEnv:OK,navigator:sy,origin:AK},Symbol.toStringTag,{value:"Module"})),cn={...NK,...CK};function RK(r,t){return av(r,new cn.classes.URLSearchParams,{visitor:function(e,n,i,a){return cn.isNode&&ye.isBuffer(e)?(this.append(n,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function jK(r){return ye.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function IK(r){const t={},e=Object.keys(r);let n;const i=e.length;let a;for(n=0;n<i;n++)a=e[n],t[a]=r[a];return t}function AE(r){function t(e,n,i,a){let o=e[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),l=a>=e.length;return o=!o&&ye.isArray(i)?i.length:o,l?(ye.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s):((!i[o]||!ye.isObject(i[o]))&&(i[o]=[]),t(e,n,i[o],a)&&ye.isArray(i[o])&&(i[o]=IK(i[o])),!s)}if(ye.isFormData(r)&&ye.isFunction(r.entries)){const e={};return ye.forEachEntry(r,(n,i)=>{t(jK(n),i,e,0)}),e}return null}function MK(r,t,e){if(ye.isString(r))try{return(t||JSON.parse)(r),ye.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(r)}const wf={transitional:OE,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,a=ye.isObject(t);if(a&&ye.isHTMLForm(t)&&(t=new FormData(t)),ye.isFormData(t))return i?JSON.stringify(AE(t)):t;if(ye.isArrayBuffer(t)||ye.isBuffer(t)||ye.isStream(t)||ye.isFile(t)||ye.isBlob(t)||ye.isReadableStream(t))return t;if(ye.isArrayBufferView(t))return t.buffer;if(ye.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return RK(t,this.formSerializer).toString();if((s=ye.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return av(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||i?(e.setContentType("application/json",!1),MK(t)):t}],transformResponse:[function(t){const e=this.transitional||wf.transitional,n=e&&e.forcedJSONParsing,i=this.responseType==="json";if(ye.isResponse(t)||ye.isReadableStream(t))return t;if(t&&ye.isString(t)&&(n&&!this.responseType||i)){const o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(s){if(o)throw s.name==="SyntaxError"?_t.from(s,_t.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cn.classes.FormData,Blob:cn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],r=>{wf.headers[r]={}});const DK=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FK=r=>{const t={};let e,n,i;return r&&r.split(`
`).forEach(function(o){i=o.indexOf(":"),e=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!e||t[e]&&DK[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},sb=Symbol("internals");function au(r){return r&&String(r).trim().toLowerCase()}function bh(r){return r===!1||r==null?r:ye.isArray(r)?r.map(bh):String(r)}function BK(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(r);)t[n[1]]=n[2];return t}const UK=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function ug(r,t,e,n,i){if(ye.isFunction(n))return n.call(this,t,e);if(i&&(t=e),!!ye.isString(t)){if(ye.isString(n))return t.indexOf(n)!==-1;if(ye.isRegExp(n))return n.test(t)}}function $K(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function VK(r,t){const e=ye.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+e,{value:function(i,a,o){return this[n].call(this,t,i,a,o)},configurable:!0})})}let On=class{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function a(s,l,c){const u=au(l);if(!u)throw new Error("header name must be a non-empty string");const d=ye.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=bh(s))}const o=(s,l)=>ye.forEach(s,(c,u)=>a(c,u,l));if(ye.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(ye.isString(t)&&(t=t.trim())&&!UK(t))o(FK(t),e);else if(ye.isObject(t)&&ye.isIterable(t)){let s={},l,c;for(const u of t){if(!ye.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[c=u[0]]=(l=s[c])?ye.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(s,e)}else t!=null&&a(e,t,n);return this}get(t,e){if(t=au(t),t){const n=ye.findKey(this,t);if(n){const i=this[n];if(!e)return i;if(e===!0)return BK(i);if(ye.isFunction(e))return e.call(this,i,n);if(ye.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=au(t),t){const n=ye.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||ug(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let i=!1;function a(o){if(o=au(o),o){const s=ye.findKey(n,o);s&&(!e||ug(n,n[s],s,e))&&(delete n[s],i=!0)}}return ye.isArray(t)?t.forEach(a):a(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const a=e[n];(!t||ug(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const e=this,n={};return ye.forEach(this,(i,a)=>{const o=ye.findKey(n,a);if(o){e[o]=bh(i),delete e[a];return}const s=t?$K(a):String(a).trim();s!==a&&delete e[a],e[s]=bh(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return ye.forEach(this,(n,i)=>{n!=null&&n!==!1&&(e[i]=t&&ye.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[sb]=this[sb]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=au(o);n[s]||(VK(i,o),n[s]=!0)}return ye.isArray(t)?t.forEach(a):a(t),this}};On.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(On.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(n){this[e]=n}}});ye.freezeMethods(On);function fg(r,t){const e=this||wf,n=t||e,i=On.from(n.headers);let a=n.data;return ye.forEach(r,function(s){a=s.call(e,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function NE(r){return!!(r&&r.__CANCEL__)}function hl(r,t,e){_t.call(this,r??"canceled",_t.ERR_CANCELED,t,e),this.name="CanceledError"}ye.inherits(hl,_t,{__CANCEL__:!0});function RE(r,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?r(e):t(new _t("Request failed with status code "+e.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function zK(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function WK(r,t){r=r||10;const e=new Array(r),n=new Array(r);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=n[a];o||(o=c),e[i]=l,n[i]=c;let d=a,v=0;for(;d!==i;)v+=e[d++],d=d%r;if(i=(i+1)%r,i===a&&(a=(a+1)%r),c-o<t)return;const p=u&&c-u;return p?Math.round(v*1e3/p):void 0}}function qK(r,t){let e=0,n=1e3/t,i,a;const o=(c,u=Date.now())=>{e=u,i=null,a&&(clearTimeout(a),a=null),r(...c)};return[(...c)=>{const u=Date.now(),d=u-e;d>=n?o(c,u):(i=c,a||(a=setTimeout(()=>{a=null,o(i)},n-d)))},()=>i&&o(i)]}const fp=(r,t,e=3)=>{let n=0;const i=WK(50,250);return qK(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,l=o-n,c=i(l),u=o<=s;n=o;const d={loaded:o,total:s,progress:s?o/s:void 0,bytes:l,rate:c||void 0,estimated:c&&s&&u?(s-o)/c:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};r(d)},e)},cb=(r,t)=>{const e=r!=null;return[n=>t[0]({lengthComputable:e,total:r,loaded:n}),t[1]]},lb=r=>(...t)=>ye.asap(()=>r(...t)),HK=cn.hasStandardBrowserEnv?((r,t)=>e=>(e=new URL(e,cn.origin),r.protocol===e.protocol&&r.host===e.host&&(t||r.port===e.port)))(new URL(cn.origin),cn.navigator&&/(msie|trident)/i.test(cn.navigator.userAgent)):()=>!0,GK=cn.hasStandardBrowserEnv?{write(r,t,e,n,i,a){const o=[r+"="+encodeURIComponent(t)];ye.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),ye.isString(n)&&o.push("path="+n),ye.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(r){const t=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function KK(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function QK(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function jE(r,t,e){let n=!KK(t);return r&&(n||e==!1)?QK(r,t):t}const ub=r=>r instanceof On?{...r}:r;function As(r,t){t=t||{};const e={};function n(c,u,d,v){return ye.isPlainObject(c)&&ye.isPlainObject(u)?ye.merge.call({caseless:v},c,u):ye.isPlainObject(u)?ye.merge({},u):ye.isArray(u)?u.slice():u}function i(c,u,d,v){if(ye.isUndefined(u)){if(!ye.isUndefined(c))return n(void 0,c,d,v)}else return n(c,u,d,v)}function a(c,u){if(!ye.isUndefined(u))return n(void 0,u)}function o(c,u){if(ye.isUndefined(u)){if(!ye.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function s(c,u,d){if(d in t)return n(c,u);if(d in r)return n(void 0,c)}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(c,u,d)=>i(ub(c),ub(u),d,!0)};return ye.forEach(Object.keys({...r,...t}),function(u){const d=l[u]||i,v=d(r[u],t[u],u);ye.isUndefined(v)&&d!==s||(e[u]=v)}),e}const IE=r=>{const t=As({},r);let{data:e,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;if(t.headers=o=On.from(o),t.url=LE(jE(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),ye.isFormData(e)){if(cn.hasStandardBrowserEnv||cn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ye.isFunction(e.getHeaders)){const l=e.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(cn.hasStandardBrowserEnv&&(n&&ye.isFunction(n)&&(n=n(t)),n||n!==!1&&HK(t.url))){const l=i&&a&&GK.read(a);l&&o.set(i,l)}return t},YK=typeof XMLHttpRequest<"u",JK=YK&&function(r){return new Promise(function(e,n){const i=IE(r);let a=i.data;const o=On.from(i.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:c}=i,u,d,v,p,y;function _(){p&&p(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function w(){if(!x)return;const k=On.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),R={data:!s||s==="text"||s==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:k,config:r,request:x};RE(function($){e($),_()},function($){n($),_()},R),x=null}"onloadend"in x?x.onloadend=w:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(w)},x.onabort=function(){x&&(n(new _t("Request aborted",_t.ECONNABORTED,r,x)),x=null)},x.onerror=function(T){const R=T&&T.message?T.message:"Network Error",U=new _t(R,_t.ERR_NETWORK,r,x);U.event=T||null,n(U),x=null},x.ontimeout=function(){let T=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const R=i.transitional||OE;i.timeoutErrorMessage&&(T=i.timeoutErrorMessage),n(new _t(T,R.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,r,x)),x=null},a===void 0&&o.setContentType(null),"setRequestHeader"in x&&ye.forEach(o.toJSON(),function(T,R){x.setRequestHeader(R,T)}),ye.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),s&&s!=="json"&&(x.responseType=i.responseType),c&&([v,y]=fp(c,!0),x.addEventListener("progress",v)),l&&x.upload&&([d,p]=fp(l),x.upload.addEventListener("progress",d),x.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=k=>{x&&(n(!k||k.type?new hl(null,r,x):k),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const S=zK(i.url);if(S&&cn.protocols.indexOf(S)===-1){n(new _t("Unsupported protocol "+S+":",_t.ERR_BAD_REQUEST,r));return}x.send(a||null)})},XK=(r,t)=>{const{length:e}=r=r?r.filter(Boolean):[];if(t||e){let n=new AbortController,i;const a=function(c){if(!i){i=!0,s();const u=c instanceof Error?c:this.reason;n.abort(u instanceof _t?u:new hl(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,a(new _t(`timeout ${t} of ms exceeded`,_t.ETIMEDOUT))},t);const s=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),r=null)};r.forEach(c=>c.addEventListener("abort",a));const{signal:l}=n;return l.unsubscribe=()=>ye.asap(s),l}},ZK=function*(r,t){let e=r.byteLength;if(e<t){yield r;return}let n=0,i;for(;n<e;)i=n+t,yield r.slice(n,i),n=i},eQ=async function*(r,t){for await(const e of tQ(r))yield*ZK(e,t)},tQ=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},fb=(r,t,e,n)=>{const i=eQ(r,t);let a=0,o,s=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){s(),l.close();return}let d=u.byteLength;if(e){let v=a+=d;e(v)}l.enqueue(new Uint8Array(u))}catch(c){throw s(c),c}},cancel(l){return s(l),i.return()}},{highWaterMark:2})},db=64*1024,{isFunction:Fd}=ye,rQ=(({Request:r,Response:t})=>({Request:r,Response:t}))(ye.global),{ReadableStream:hb,TextEncoder:pb}=ye.global,vb=(r,...t)=>{try{return!!r(...t)}catch{return!1}},nQ=r=>{r=ye.merge.call({skipUndefined:!0},rQ,r);const{fetch:t,Request:e,Response:n}=r,i=t?Fd(t):typeof fetch=="function",a=Fd(e),o=Fd(n);if(!i)return!1;const s=i&&Fd(hb),l=i&&(typeof pb=="function"?(y=>_=>y.encode(_))(new pb):async y=>new Uint8Array(await new e(y).arrayBuffer())),c=a&&s&&vb(()=>{let y=!1;const _=new e(cn.origin,{body:new hb,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!_}),u=o&&s&&vb(()=>ye.isReadableStream(new n("").body)),d={stream:u&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!d[y]&&(d[y]=(_,x)=>{let w=_&&_[y];if(w)return w.call(_);throw new _t(`Response type '${y}' is not supported`,_t.ERR_NOT_SUPPORT,x)})});const v=async y=>{if(y==null)return 0;if(ye.isBlob(y))return y.size;if(ye.isSpecCompliantForm(y))return(await new e(cn.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(y)||ye.isArrayBuffer(y))return y.byteLength;if(ye.isURLSearchParams(y)&&(y=y+""),ye.isString(y))return(await l(y)).byteLength},p=async(y,_)=>{const x=ye.toFiniteNumber(y.getContentLength());return x??v(_)};return async y=>{let{url:_,method:x,data:w,signal:S,cancelToken:k,timeout:T,onDownloadProgress:R,onUploadProgress:U,responseType:$,headers:F,withCredentials:M="same-origin",fetchOptions:Y}=IE(y),O=t||fetch;$=$?($+"").toLowerCase():"text";let N=XK([S,k&&k.toAbortSignal()],T),W=null;const j=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let Z;try{if(U&&c&&x!=="get"&&x!=="head"&&(Z=await p(F,w))!==0){let ne=new e(_,{method:"POST",body:w,duplex:"half"}),E;if(ye.isFormData(w)&&(E=ne.headers.get("content-type"))&&F.setContentType(E),ne.body){const[z,H]=cb(Z,fp(lb(U)));w=fb(ne.body,db,z,H)}}ye.isString(M)||(M=M?"include":"omit");const X=a&&"credentials"in e.prototype,oe={...Y,signal:N,method:x.toUpperCase(),headers:F.normalize().toJSON(),body:w,duplex:"half",credentials:X?M:void 0};W=a&&new e(_,oe);let q=await(a?O(W,Y):O(_,oe));const re=u&&($==="stream"||$==="response");if(u&&(R||re&&j)){const ne={};["status","statusText","headers"].forEach(ee=>{ne[ee]=q[ee]});const E=ye.toFiniteNumber(q.headers.get("content-length")),[z,H]=R&&cb(E,fp(lb(R),!0))||[];q=new n(fb(q.body,db,z,()=>{H&&H(),j&&j()}),ne)}$=$||"text";let fe=await d[ye.findKey(d,$)||"text"](q,y);return!re&&j&&j(),await new Promise((ne,E)=>{RE(ne,E,{data:fe,headers:On.from(q.headers),status:q.status,statusText:q.statusText,config:y,request:W})})}catch(X){throw j&&j(),X&&X.name==="TypeError"&&/Load failed|fetch/i.test(X.message)?Object.assign(new _t("Network Error",_t.ERR_NETWORK,y,W),{cause:X.cause||X}):_t.from(X,X&&X.code,y,W)}}},iQ=new Map,ME=r=>{let t=r?r.env:{};const{fetch:e,Request:n,Response:i}=t,a=[n,i,e];let o=a.length,s=o,l,c,u=iQ;for(;s--;)l=a[s],c=u.get(l),c===void 0&&u.set(l,c=s?new Map:nQ(t)),u=c;return c};ME();const cy={http:bK,xhr:JK,fetch:{get:ME}};ye.forEach(cy,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const mb=r=>`- ${r}`,aQ=r=>ye.isFunction(r)||r===null||r===!1,DE={getAdapter:(r,t)=>{r=ye.isArray(r)?r:[r];const{length:e}=r;let n,i;const a={};for(let o=0;o<e;o++){n=r[o];let s;if(i=n,!aQ(n)&&(i=cy[(s=String(n)).toLowerCase()],i===void 0))throw new _t(`Unknown adapter '${s}'`);if(i&&(ye.isFunction(i)||(i=i.get(t))))break;a[s||"#"+o]=i}if(!i){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?o.length>1?`since :
`+o.map(mb).join(`
`):" "+mb(o[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i},adapters:cy};function dg(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new hl(null,r)}function gb(r){return dg(r),r.headers=On.from(r.headers),r.data=fg.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),DE.getAdapter(r.adapter||wf.adapter,r)(r).then(function(n){return dg(r),n.data=fg.call(r,r.transformResponse,n),n.headers=On.from(n.headers),n},function(n){return NE(n)||(dg(r),n&&n.response&&(n.response.data=fg.call(r,r.transformResponse,n.response),n.response.headers=On.from(n.response.headers))),Promise.reject(n)})}const FE="1.12.2",ov={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{ov[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});const yb={};ov.transitional=function(t,e,n){function i(a,o){return"[Axios v"+FE+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,s)=>{if(t===!1)throw new _t(i(o," has been removed"+(e?" in "+e:"")),_t.ERR_DEPRECATED);return e&&!yb[o]&&(yb[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,o,s):!0}};ov.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function oQ(r,t,e){if(typeof r!="object")throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const a=n[i],o=t[a];if(o){const s=r[a],l=s===void 0||o(s,a,r);if(l!==!0)throw new _t("option "+a+" must be "+l,_t.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new _t("Unknown option "+a,_t.ERR_BAD_OPTION)}}const Sh={assertOptions:oQ,validators:ov},Wi=Sh.validators;let xs=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ob,response:new ob}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=As(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:a}=e;n!==void 0&&Sh.assertOptions(n,{silentJSONParsing:Wi.transitional(Wi.boolean),forcedJSONParsing:Wi.transitional(Wi.boolean),clarifyTimeoutError:Wi.transitional(Wi.boolean)},!1),i!=null&&(ye.isFunction(i)?e.paramsSerializer={serialize:i}:Sh.assertOptions(i,{encode:Wi.function,serialize:Wi.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Sh.assertOptions(e,{baseUrl:Wi.spelling("baseURL"),withXsrfToken:Wi.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=a&&ye.merge(a.common,a[e.method]);a&&ye.forEach(["delete","get","head","post","put","patch","common"],y=>{delete a[y]}),e.headers=On.concat(o,a);const s=[];let l=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(e)===!1||(l=l&&_.synchronous,s.unshift(_.fulfilled,_.rejected))});const c=[];this.interceptors.response.forEach(function(_){c.push(_.fulfilled,_.rejected)});let u,d=0,v;if(!l){const y=[gb.bind(this),void 0];for(y.unshift(...s),y.push(...c),v=y.length,u=Promise.resolve(e);d<v;)u=u.then(y[d++],y[d++]);return u}v=s.length;let p=e;for(;d<v;){const y=s[d++],_=s[d++];try{p=y(p)}catch(x){_.call(this,x);break}}try{u=gb.call(this,p)}catch(y){return Promise.reject(y)}for(d=0,v=c.length;d<v;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=As(this.defaults,t);const e=jE(t.baseURL,t.url,t.allowAbsoluteUrls);return LE(e,t.params,t.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(t){xs.prototype[t]=function(e,n){return this.request(As(n||{},{method:t,url:e,data:(n||{}).data}))}});ye.forEach(["post","put","patch"],function(t){function e(n){return function(a,o,s){return this.request(As(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}xs.prototype[t]=e(),xs.prototype[t+"Form"]=e(!0)});let sQ=class BE{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{n.subscribe(s),a=s}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},t(function(a,o,s){n.reason||(n.reason=new hl(a,o,s),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new BE(function(i){t=i}),cancel:t}}};function cQ(r){return function(e){return r.apply(null,e)}}function lQ(r){return ye.isObject(r)&&r.isAxiosError===!0}const ly={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ly).forEach(([r,t])=>{ly[t]=r});function UE(r){const t=new xs(r),e=gE(xs.prototype.request,t);return ye.extend(e,xs.prototype,t,{allOwnKeys:!0}),ye.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return UE(As(r,i))},e}const pr=UE(wf);pr.Axios=xs;pr.CanceledError=hl;pr.CancelToken=sQ;pr.isCancel=NE;pr.VERSION=FE;pr.toFormData=av;pr.AxiosError=_t;pr.Cancel=pr.CanceledError;pr.all=function(t){return Promise.all(t)};pr.spread=cQ;pr.isAxiosError=lQ;pr.mergeConfig=As;pr.AxiosHeaders=On;pr.formToJSON=r=>AE(ye.isHTMLForm(r)?new FormData(r):r);pr.getAdapter=DE.getAdapter;pr.HttpStatusCode=ly;pr.default=pr;const{Axios:lte,AxiosError:ute,CanceledError:fte,isCancel:dte,CancelToken:hte,VERSION:pte,all:vte,Cancel:mte,isAxiosError:gte,spread:yte,toFormData:_te,AxiosHeaders:wte,HttpStatusCode:bte,formToJSON:Ste,getAdapter:xte,mergeConfig:kte}=pr,uQ="";class fQ{constructor(){jt(this,"client");this.client=pr.create({baseURL:uQ,headers:{"Content-Type":"application/json"}})}async getVideoToken(t,e){return(await this.client.post("/api/video/token",{identity:t,roomName:e})).data.data.token}async createRoom(t,e){return(await this.client.post("/api/video/rooms",{roomName:t,type:e})).data.data}async getRoom(t){return(await this.client.get(`/api/video/rooms/${t}`)).data.data}async endRoom(t){return(await this.client.post(`/api/video/rooms/${t}/end`)).data.data}async listParticipants(t){return(await this.client.get(`/api/video/rooms/${t}/participants`)).data.data}async trackParticipantConnected(t,e,n,i){await this.client.post("/api/video/events/participant-connected",{roomName:t,identity:e,role:n,documento:i})}async trackParticipantDisconnected(t,e){await this.client.post("/api/video/events/participant-disconnected",{roomName:t,identity:e})}async sendWhatsApp(t,e){await this.client.post("/api/video/whatsapp/send",{phone:t,message:e})}async getMedicalHistory(t){return(await this.client.get(`/api/video/medical-history/${t}`)).data.data}async updateMedicalHistory(t){await this.client.post("/api/video/medical-history",t)}async generateAISuggestions(t){return(await this.client.post("/api/video/ai-suggestions",{patientData:t})).data.data.suggestions}async makeVoiceCall(t,e){await this.client.post("/api/twilio/voice-call",{phoneNumber:t,patientName:e})}}const Oa=new fQ,dQ=r=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(r);t.lang="es-ES",t.rate=1,t.pitch=1,t.volume=1,window.speechSynthesis.speak(t)}},hQ=({identity:r,roomName:t,role:e,documento:n})=>{const[i,a]=he.useState(null),[o,s]=he.useState(null),[l,c]=he.useState(new Map),[u,d]=he.useState(!1),[v,p]=he.useState(!1),[y,_]=he.useState(null),[x,w]=he.useState(!0),[S,k]=he.useState(!0),[T,R]=he.useState(null),U=he.useCallback(async()=>{var Y;try{d(!0),_(null);const O=await Oa.getVideoToken(r,t),N=await IG.connect(O,{name:t,audio:!0,video:{width:640,height:480},networkQuality:{local:1,remote:1}});a(N),s(N.localParticipant),p(!0);const W=(Y=Array.from(N.localParticipant.videoTracks.values())[0])==null?void 0:Y.track;if(W&&R(W),e)try{await Oa.trackParticipantConnected(t,r,e,n)}catch(j){console.error("Error tracking participant connection:",j)}N.participants.forEach(j=>{c(Z=>new Map(Z).set(j.sid,j))}),N.on("participantConnected",j=>{if(console.log(`Participant connected: ${j.identity}`),c(Z=>new Map(Z).set(j.sid,j)),e==="doctor"){const Z=j.identity;dQ(`Paciente ${Z} conectado`)}}),N.on("participantDisconnected",j=>{console.log(`Participant disconnected: ${j.identity}`),c(Z=>{const X=new Map(Z);return X.delete(j.sid),X})}),N.on("disconnected",()=>{console.log("Disconnected from room"),p(!1),a(null),s(null),c(new Map)}),console.log(`Successfully connected to room: ${t}`)}catch(O){console.error("Error connecting to room:",O),_(O instanceof Error?O.message:"Failed to connect to room")}finally{d(!1)}},[r,t,e]),$=he.useCallback(()=>{if(i){if(e)try{Oa.trackParticipantDisconnected(t,r)}catch(Y){console.error("Error tracking participant disconnection:",Y)}i.disconnect(),a(null),s(null),c(new Map),p(!1)}},[i,e,t,r]),F=he.useCallback(()=>{o&&o.audioTracks.forEach(Y=>{const O=Y.track;O.isEnabled?(O.disable(),w(!1)):(O.enable(),w(!0))})},[o]),M=he.useCallback(()=>{o&&o.videoTracks.forEach(Y=>{const O=Y.track;O.isEnabled?(O.disable(),k(!1)):(O.enable(),k(!0))})},[o]);return he.useEffect(()=>{const Y=()=>{if(i&&e){const N="/api/video/events/participant-disconnected",W=JSON.stringify({roomName:t,identity:r});navigator.sendBeacon(N,new Blob([W],{type:"application/json"})),i.disconnect()}};return window.addEventListener("beforeunload",Y),()=>{if(window.removeEventListener("beforeunload",Y),i){if(e)try{Oa.trackParticipantDisconnected(t,r)}catch(O){console.error("Error tracking participant disconnection:",O)}i.disconnect()}}},[i,e,t,r]),{room:i,localParticipant:o,remoteParticipants:l,isConnecting:u,isConnected:v,error:y,connectToRoom:U,disconnectFromRoom:$,toggleAudio:F,toggleVideo:M,isAudioEnabled:x,isVideoEnabled:S,localVideoTrack:T}};var uy={},sv={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.WASM_INFERENCE_DIMENSIONS=ar.TWILIO_VIRTUAL_BACKGROUND_PROCESSOR_PIPELINE_WORKER=ar.TWILIO_GAUSSIAN_BLUR_BACKGROUND_PROCESSOR_PIPELINE_WORKER=ar.TFLITE_SIMD_LOADER_NAME=ar.TFLITE_LOADER_NAME=ar.MODEL_NAME=ar.MASK_BLUR_RADIUS=ar.BLUR_FILTER_RADIUS=void 0;ar.BLUR_FILTER_RADIUS=15;ar.MASK_BLUR_RADIUS=8;ar.MODEL_NAME="selfie_segmentation_landscape.tflite";ar.TFLITE_LOADER_NAME="tflite-1-0-0.js";ar.TFLITE_SIMD_LOADER_NAME="tflite-simd-1-0-0.js";ar.TWILIO_GAUSSIAN_BLUR_BACKGROUND_PROCESSOR_PIPELINE_WORKER="twilio-gaussian-blur-background-processor-pipeline-worker.js";ar.TWILIO_VIRTUAL_BACKGROUND_PROCESSOR_PIPELINE_WORKER="twilio-virtual-background-processor-pipeline-worker.js";ar.WASM_INFERENCE_DIMENSIONS={width:256,height:144};var bf={},Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.version=void 0;Sf.version="3.1.0";var cv={};Object.defineProperty(cv,"__esModule",{value:!0});cv.Processor=void 0;var pQ=function(){function r(){}return r}();cv.Processor=pQ;var lv={},pl={},xf={},fy=A&&A.__assign||function(){return fy=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},fy.apply(this,arguments)};Object.defineProperty(xf,"__esModule",{value:!0});xf.Benchmark=void 0;var vQ=function(){function r(){this._timingCache=new Map,this._timings=new Map}return r.prototype.end=function(t){var e=this._timings.get(t);e&&(e.end=Date.now(),e.delay=e.end-e.start,this._save(t,fy({},e)))},r.prototype.getAverageDelay=function(t){var e=this._timingCache.get(t);if(!(!e||!e.length))return e.map(function(n){return n.delay}).reduce(function(n,i){return n+=i},0)/e.length},r.prototype.getNames=function(){return Array.from(this._timingCache.keys())},r.prototype.getRate=function(t){var e=this._timingCache.get(t);if(!(!e||e.length<2)){var n=e[e.length-1].end-e[0].start;return e.length/n*1e3}},r.prototype.merge=function(t){var e=this,n=t._timingCache,i=t._timings;n.forEach(function(a,o){return e._timingCache.set(o,a)}),i.forEach(function(a,o){return e._timings.set(o,a)})},r.prototype.start=function(t){var e=this._timings.get(t);e||(e={},this._timings.set(t,e)),e.start=Date.now(),delete e.end,delete e.delay},r.prototype._save=function(t,e){var n=this._timingCache.get(t);n||(n=[],this._timingCache.set(t,n)),n.push(e),n.length>r.cacheSize&&n.splice(0,n.length-r.cacheSize)},r.cacheSize=41,r}();xf.Benchmark=vQ;var li={},wa=A&&A.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(li,"__esModule",{value:!0});li.isSupported=li.isCanvasBlurSupported=li.isChromiumImageBitmap=li.isBrowserSupported=void 0;function $E(){return typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function mQ(){if(typeof window>"u"||typeof document>"u")return null;var r=$E();return r.getContext("webgl2")?"webgl2":r.getContext("2d")?"2d":null}function VE(){return mQ()!==null}li.isBrowserSupported=VE;function gQ(){return/Chrome/.test(navigator.userAgent)&&typeof createImageBitmap=="function"}li.isChromiumImageBitmap=gQ;li.isCanvasBlurSupported=function(){var r=[0,0,0,255],t=[255,255,255,255],e=new ImageData(new Uint8ClampedArray(wa(wa(wa(wa(wa(wa(wa(wa(wa([],r,!0),r,!0),r,!0),r,!0),t,!0),r,!0),r,!0),r,!0),r,!0)),3,3),n=$E(),i=n.getContext("2d");n.width=3,n.height=3,i.putImageData(e,0,0),i.filter="blur(1px)",i.drawImage(n,0,0);var a=i.getImageData(0,0,3,3).data;return a[0]>0}();li.isSupported=VE();var uv={},hg=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},pg=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(uv,"__esModule",{value:!0});uv.TwilioTFLite=void 0;var _b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,vg=new Set,Bd,yQ=function(){function r(){this._inputBuffer=null,this._isSimdEnabled=null,this._tflite=null}return Object.defineProperty(r.prototype,"isSimdEnabled",{get:function(){return this._isSimdEnabled},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e,n,i){return hg(this,void 0,void 0,function(){var a,o,s,l,c;return pg(this,function(u){switch(u.label){case 0:return this._tflite?[2]:(_b&&(t=""),[4,Promise.all([this._loadWasmModule(t,n,i),fetch("".concat(t).concat(e))])]);case 1:return a=u.sent(),o=a[1],s=Bd,s?[3,3]:[4,o.arrayBuffer()];case 2:s=u.sent(),u.label=3;case 3:return Bd=s,l=this._tflite,c=l._getModelBufferMemoryOffset(),l.HEAPU8.set(new Uint8Array(Bd),c),l._loadModel(Bd.byteLength),[2]}})})},r.prototype.loadInputBuffer=function(t){for(var e=this._tflite,n=e._getInputHeight(),i=e._getInputWidth(),a=i*n,o=e._getInputMemoryOffset()/4,s=0;s<a;s++){var l=o+s*3,c=s*4;e.HEAPF32[l]=t[c]/255,e.HEAPF32[l+1]=t[c+1]/255,e.HEAPF32[l+2]=t[c+2]/255}this._inputBuffer=t},r.prototype.runInference=function(){var t=this._tflite,e=t._getInputHeight(),n=t._getInputWidth(),i=n*e,a=t._getOutputMemoryOffset()/4;t._runInference();for(var o=this._inputBuffer||new Uint8ClampedArray(i*4),s=0;s<i;s++)o[s*4+3]=Math.round(t.HEAPF32[a+s]*255);return o},r.prototype._loadScript=function(t){return hg(this,void 0,void 0,function(){return pg(this,function(e){return vg.has(t)?[2]:_b?(importScripts(t),vg.add(t),[2]):[2,new Promise(function(n,i){var a=document.createElement("script");a.onload=function(){vg.add(t),n()},a.onerror=function(){i()},document.head.append(a),a.src=t})]})})},r.prototype._loadWasmModule=function(t,e,n){return hg(this,void 0,void 0,function(){var i,a;return pg(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,6]),[4,this._loadScript("".concat(t).concat(n))];case 1:return o.sent(),i=this,[4,createTwilioTFLiteSIMDModule()];case 2:return i._tflite=o.sent(),this._isSimdEnabled=!0,[3,6];case 3:return o.sent(),[4,this._loadScript("".concat(t).concat(e))];case 4:return o.sent(),a=this,[4,createTwilioTFLiteModule()];case 5:return a._tflite=o.sent(),this._isSimdEnabled=!1,[3,6];case 6:return[2]}})})},r}();uv.TwilioTFLite=yQ;var vl={},kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.Pipeline=void 0;var _Q=function(){function r(){this._stages=[]}return r.prototype.addStage=function(t){this._stages.push(t)},r.prototype.render=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._stages.forEach(function(n){n.render.apply(n,t)})},r}();kf.Pipeline=_Q;var fv={},dv={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.initBuffer=zn.createTexture=zn.compileShader=zn.createProgram=zn.createPipelineStageProgram=void 0;function wQ(r,t,e,n,i){var a=zE(r,t,e),o=r.getAttribLocation(a,"a_position");r.enableVertexAttribArray(o),r.bindBuffer(r.ARRAY_BUFFER,n),r.vertexAttribPointer(o,2,r.FLOAT,!1,0,0);var s=r.getAttribLocation(a,"a_texCoord");return r.enableVertexAttribArray(s),r.bindBuffer(r.ARRAY_BUFFER,i),r.vertexAttribPointer(s,2,r.FLOAT,!1,0,0),a}zn.createPipelineStageProgram=wQ;function zE(r,t,e){var n=r.createProgram();if(r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw new Error("Could not link WebGL program: ".concat(r.getProgramInfoLog(n)));return n}zn.createProgram=zE;function bQ(r,t,e){var n=r.createShader(t);if(r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error("Could not compile shader: ".concat(r.getShaderInfoLog(n)));return n}zn.compileShader=bQ;function SQ(r,t,e,n,i,a){i===void 0&&(i=r.NEAREST),a===void 0&&(a=r.NEAREST);var o=r.createTexture();return r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a),r.texStorage2D(r.TEXTURE_2D,1,t,e,n),o}zn.createTexture=SQ;function xQ(r,t){var e=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW),e}zn.initBuffer=xQ;Object.defineProperty(dv,"__esModule",{value:!0});dv.WebGL2PipelineInputStage=void 0;var wb=zn,kQ=function(){function r(t){this._inputTexture=null;var e=t.canvas,n=e.height,i=e.width;this._glOut=t,this._inputFrameTexture=(0,wb.createTexture)(t,t.RGBA8,i,n,t.NEAREST,t.NEAREST)}return r.prototype.cleanUp=function(){var t=this,e=t._glOut,n=t._inputFrameTexture,i=t._inputTexture;e.deleteTexture(n),e.deleteTexture(i)},r.prototype.render=function(t,e){var n=this,i=n._glOut,a=n._inputFrameTexture,o=i.canvas,s=o.height,l=o.width;if(i.viewport(0,0,l,s),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t&&(i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a),i.texSubImage2D(i.TEXTURE_2D,0,0,0,l,s,i.RGBA,i.UNSIGNED_BYTE,t)),!!e){var c=e.data,u=e.height,d=e.width;this._inputTexture||(this._inputTexture=(0,wb.createTexture)(i,i.RGBA8,d,u,i.NEAREST,i.NEAREST)),i.viewport(0,0,d,u),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,this._inputTexture),i.texSubImage2D(i.TEXTURE_2D,0,0,0,d,u,i.RGBA,i.UNSIGNED_BYTE,c)}},r}();dv.WebGL2PipelineInputStage=kQ;var hv={},bb=A&&A.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(hv,"__esModule",{value:!0});hv.WebGL2PipelineProcessingStage=void 0;var sc=zn,PQ=function(){function r(t,e){this._outputFramebuffer=null,this._outputTexture=null;var n=t.textureName,i=t.textureUnit,a=e.glOut;this._glOut=a;var o=e.fragmentShaderSource,s=e.height,l=s===void 0?a.canvas.height:s,c=e.textureUnit,u=c===void 0?i+1:c,d=e.type,v=e.uniformVars,p=v===void 0?[]:v,y=e.vertexShaderSource,_=y===void 0?`#version 300 es
        in vec2 a_position;
        in vec2 a_texCoord;

        out vec2 v_texCoord;

        void main() {
          gl_Position = vec4(a_position`.concat(d==="canvas"?" * vec2(1.0, -1.0)":"",`, 0.0, 1.0);
          v_texCoord = a_texCoord;
        }
      `):y,x=e.width,w=x===void 0?a.canvas.width:x;this._outputDimensions={height:l,width:w},this._outputTextureUnit=u,this._fragmentShader=(0,sc.compileShader)(a,a.FRAGMENT_SHADER,o),this._vertexShader=(0,sc.compileShader)(a,a.VERTEX_SHADER,_),this._positionBuffer=(0,sc.initBuffer)(a,[-1,-1,1,-1,-1,1,1,1]),this._texCoordBuffer=(0,sc.initBuffer)(a,[0,0,1,0,0,1,1,1]),d==="texture"&&(this._outputTexture=(0,sc.createTexture)(a,a.RGBA8,w,l),this._outputFramebuffer=a.createFramebuffer(),a.bindFramebuffer(a.FRAMEBUFFER,this._outputFramebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._outputTexture,0));var S=(0,sc.createPipelineStageProgram)(a,this._vertexShader,this._fragmentShader,this._positionBuffer,this._texCoordBuffer);this._program=S,this._setUniformVars(bb([{name:n,type:"int",values:[i]}],p,!0))}return r.prototype.cleanUp=function(){var t=this,e=t._fragmentShader,n=t._glOut,i=t._positionBuffer,a=t._program,o=t._texCoordBuffer,s=t._vertexShader;n.deleteProgram(a),n.deleteBuffer(o),n.deleteBuffer(i),n.deleteShader(s),n.deleteShader(e)},r.prototype.render=function(){var t=this,e=t._glOut,n=t._outputDimensions,i=n.height,a=n.width,o=t._outputFramebuffer,s=t._outputTexture,l=t._outputTextureUnit,c=t._program;e.viewport(0,0,a,i),e.useProgram(c),s&&(e.activeTexture(e.TEXTURE0+l),e.bindTexture(e.TEXTURE_2D,s)),e.bindFramebuffer(e.FRAMEBUFFER,o),e.drawArrays(e.TRIANGLE_STRIP,0,4)},r.prototype._setUniformVars=function(t){var e=this,n=e._glOut,i=e._program;n.useProgram(i),t.forEach(function(a){var o=a.name,s=a.type,l=a.values,c=n.getUniformLocation(i,o),u=s.split(":")[1]==="v";u?n["uniform1".concat(s[0],"v")](c,l):n["uniform".concat(l.length).concat(s[0])].apply(n,bb([c],l,!1))})},r}();hv.WebGL2PipelineProcessingStage=PQ;var TQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(fv,"__esModule",{value:!0});fv.WebGL2Pipeline=void 0;var EQ=kf,CQ=dv,LQ=hv,OQ=function(r){TQ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._stages=[],e}return t.prototype.cleanUp=function(){this._stages.forEach(function(e){return e.cleanUp()})},t.prototype.render=function(e,n){var i=this._stages,a=i[0],o=i.slice(1);a.render(e,n),o.forEach(function(s){return s.render()})},t.InputStage=CQ.WebGL2PipelineInputStage,t.ProcessingStage=LQ.WebGL2PipelineProcessingStage,t}(EQ.Pipeline);fv.WebGL2Pipeline=OQ;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebGL2Pipeline=r.Pipeline=void 0;var t=kf;Object.defineProperty(r,"Pipeline",{enumerable:!0,get:function(){return t.Pipeline}});var e=fv;Object.defineProperty(r,"WebGL2Pipeline",{enumerable:!0,get:function(){return e.WebGL2Pipeline}})})(vl);var pv={},AQ=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},NQ=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(pv,"__esModule",{value:!0});pv.InputFrameDowscaleStage=void 0;var RQ=function(){function r(t,e){this._inputFrameDownscaleMode=e,this._outputContext=t.getContext("2d",{willReadFrequently:!0})}return r.prototype.render=function(t){return AQ(this,void 0,void 0,function(){var e,n,i,a,o,s,l,c;return NQ(this,function(u){switch(u.label){case 0:return e=this,n=e._outputContext,i=e._inputFrameDownscaleMode,a=n.canvas,o=a.height,s=a.width,i!=="image-bitmap"?[3,2]:[4,createImageBitmap(t,{resizeWidth:s,resizeHeight:o,resizeQuality:"pixelated"})];case 1:return l=u.sent(),n.drawImage(l,0,0),l.close(),[3,3];case 2:n.drawImage(t,0,0,s,o),u.label=3;case 3:return c=n.getImageData(0,0,s,o).data,[2,c]}})})},r}();pv.InputFrameDowscaleStage=RQ;var vv={},mv={},gv={},jQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(gv,"__esModule",{value:!0});gv.SinglePassBilateralFilterStage=void 0;var IQ=vl;function MQ(r,t,e){return"0".repeat(r).split("").map(function(n,i){var a=(i+1)*e;return Math.exp(-.5*a*a/t/t)})}function DQ(r){return"0".repeat(256).split("").map(function(t,e){var n=e/255;return Math.exp(-.5*n*n/r/r)})}var FQ=function(r){jQ(t,r);function t(e,n,i,a,o,s,l){var c=this;l===void 0&&(l=s+1);var u=o.height,d=o.width;return c=r.call(this,{textureName:"u_segmentationMask",textureUnit:s},{fragmentShaderSource:`#version 300 es
          precision highp float;

          uniform sampler2D u_inputFrame;
          uniform sampler2D u_segmentationMask;
          uniform vec2 u_texelSize;
          uniform float u_direction;
          uniform float u_radius;
          uniform float u_step;
          uniform float u_spaceWeights[128];
          uniform float u_colorWeights[256];

          in vec2 v_texCoord;

          out vec4 outColor;

          float calculateColorWeight(vec2 coord, vec3 centerColor) {
            vec3 coordColor = texture(u_inputFrame, coord).rgb;
            float x = distance(centerColor, coordColor);
            return u_colorWeights[int(x * 255.0)];
          }

          float edgePixelsAverageAlpha(float outAlpha) {
            float totalAlpha = outAlpha;
            float totalPixels = 1.0;

            for (float i = -u_radius; u_radius > 0.0 && i <= u_radius; i += u_radius) {
              for (float j = -u_radius; j <= u_radius; j += u_radius * (j == 0.0 ? 2.0 : 1.0)) {
                vec2 shift = vec2(i, j) * u_texelSize;
                vec2 coord = vec2(v_texCoord + shift);
                totalAlpha += texture(u_segmentationMask, coord).a;
                totalPixels++;
              }
            }

            return totalAlpha / totalPixels;
          }

          void main() {
            vec3 centerColor = texture(u_inputFrame, v_texCoord).rgb;
            float outAlpha = texture(u_segmentationMask, v_texCoord).a;
            float averageAlpha = edgePixelsAverageAlpha(outAlpha);
            float totalWeight = 1.0;

            if (averageAlpha == 0.0 || averageAlpha == 1.0) {
              outColor = vec4(averageAlpha * centerColor, averageAlpha);
              return;
            }

            for (float i = 1.0; i <= u_radius; i += u_step) {
              float x = (1.0 - u_direction) * i;
              float y = u_direction * i;
              vec2 shift = vec2(x, y) * u_texelSize;
              vec2 coord = vec2(v_texCoord + shift);
              float spaceWeight = u_spaceWeights[int(i - 1.0)];
              float colorWeight = calculateColorWeight(coord, centerColor);
              float weight = spaceWeight * colorWeight;
              float alpha = texture(u_segmentationMask, coord).a;
              totalWeight += weight;
              outAlpha += weight * alpha;

              shift = vec2(-x, -y) * u_texelSize;
              coord = vec2(v_texCoord + shift);
              colorWeight = calculateColorWeight(coord, centerColor);
              weight = spaceWeight * colorWeight;
              alpha = texture(u_segmentationMask, coord).a;
              totalWeight += weight;
              outAlpha += weight * alpha;
            }

            outAlpha /= totalWeight;
            outColor = vec4(outAlpha * centerColor, outAlpha);
          }
        `,glOut:e,height:u,textureUnit:l,type:i,width:d,uniformVars:[{name:"u_inputFrame",type:"int",values:[0]},{name:"u_direction",type:"float",values:[n==="vertical"?1:0]},{name:"u_texelSize",type:"float",values:[1/d,1/u]}]})||this,c._direction=n,c._inputDimensions=a,c.updateSigmaColor(0),c.updateSigmaSpace(0),c}return t.prototype.updateSigmaColor=function(e){this._setUniformVars([{name:"u_colorWeights",type:"float:v",values:DQ(e)}])},t.prototype.updateSigmaSpace=function(e){var n=this._inputDimensions,i=n.height,a=n.width,o=this._outputDimensions,s=o.height,l=o.width;e*=Math.max(l/a,s/i);var c=Math.floor(.5*e/Math.log(e)),u=Math.max(1/l,1/s)*e,d=1/(this._direction==="horizontal"?l:s);this._setUniformVars([{name:"u_radius",type:"float",values:[e]},{name:"u_spaceWeights",type:"float:v",values:MQ(e,u,d)},{name:"u_step",type:"float",values:[c]}])},t}(IQ.WebGL2Pipeline.ProcessingStage);gv.SinglePassBilateralFilterStage=FQ;var BQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mv,"__esModule",{value:!0});mv.PersonMaskUpscalePipeline=void 0;var Sb=vl,xb=gv,UQ=function(r){BQ(t,r);function t(e,n,i){var a=r.call(this)||this;a._isWebGL2Supported=!0,a._outputCanvas=n,a._inputDimensions=e,a._maskBlurRadius=i;var o=n.getContext("webgl2");return o?a.initializeWebGL2Pipeline(o):(a._isWebGL2Supported=!1,console.warn("Downgraded to Canvas2D for person mask upscaling due to missing WebGL2 support.")),a}return t.prototype.initializeWebGL2Pipeline=function(e){var n={height:this._outputCanvas.height,width:this._outputCanvas.width};this.addStage(new Sb.WebGL2Pipeline.InputStage(e)),this.addStage(new xb.SinglePassBilateralFilterStage(e,"horizontal","texture",this._inputDimensions,n,1,2)),this.addStage(new xb.SinglePassBilateralFilterStage(e,"vertical","canvas",this._inputDimensions,n,2))},t.prototype.render=function(e,n){this._isWebGL2Supported?r.prototype.render.call(this,e,n):this._renderFallback(e,n)},t.prototype._renderFallback=function(e,n){var i=new OffscreenCanvas(n.width,n.height),a=i.getContext("2d");a.putImageData(n,0,0);var o=this._outputCanvas.getContext("2d");o.save(),o.filter="blur(".concat(this._maskBlurRadius,"px)"),o.globalCompositeOperation="copy",o.drawImage(i,0,0,this._outputCanvas.width,this._outputCanvas.height),o.filter="none",o.globalCompositeOperation="source-in",o.drawImage(e,0,0,this._outputCanvas.width,this._outputCanvas.height),o.restore()},t.prototype.updateBilateralFilterConfig=function(e){var n=e.sigmaSpace;if(typeof n=="number"){if(!this._isWebGL2Supported){this._maskBlurRadius=n;return}var i=this._stages,a=i.slice(1);a.forEach(function(o){o.updateSigmaColor(.1),o.updateSigmaSpace(n)})}},t.prototype.cleanUp=function(){this._isWebGL2Supported&&r.prototype.cleanUp.call(this)},t}(Sb.WebGL2Pipeline);mv.PersonMaskUpscalePipeline=UQ;Object.defineProperty(vv,"__esModule",{value:!0});vv.PostProcessingStage=void 0;var $Q=mv,VQ=function(){function r(t,e,n,i,a){this._personMaskUpscalePipeline=null,this._inputDimensions=t,this._maskBlurRadius=i,this._outputContext=n.getContext("2d"),this._webgl2Canvas=e,this._setBackground=a}return r.prototype.render=function(t,e){var n=this,i=n._outputContext,a=n._setBackground,o=n._webgl2Canvas;this._personMaskUpscalePipeline||this.resetPersonMaskUpscalePipeline(),this._personMaskUpscalePipeline.render(t,e),i.save(),i.globalCompositeOperation="copy",i.drawImage(o,0,0),i.globalCompositeOperation="destination-over",a(t),i.restore()},r.prototype.resetPersonMaskUpscalePipeline=function(){var t,e=this,n=e._inputDimensions,i=e._maskBlurRadius,a=e._webgl2Canvas;(t=this._personMaskUpscalePipeline)===null||t===void 0||t.cleanUp(),this._personMaskUpscalePipeline=new $Q.PersonMaskUpscalePipeline(n,a,i),this._personMaskUpscalePipeline.updateBilateralFilterConfig({sigmaSpace:i})},r.prototype.updateMaskBlurRadius=function(t){var e;this._maskBlurRadius!==t&&(this._maskBlurRadius=t,(e=this._personMaskUpscalePipeline)===null||e===void 0||e.updateBilateralFilterConfig({sigmaSpace:t}))},r}();vv.PostProcessingStage=VQ;var zQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ud=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},$d=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(pl,"__esModule",{value:!0});pl.BackgroundProcessorPipeline=void 0;var cc=ar,WQ=xf,qQ=li,HQ=uv,GQ=vl,KQ=pv,QQ=vv,YQ=function(r){zQ(t,r);function t(e,n){n===void 0&&(n=function(){});var i=r.call(this)||this;i._outputCanvas=new OffscreenCanvas(1,1),i._webgl2Canvas=new OffscreenCanvas(1,1),i._benchmark=new WQ.Benchmark,i._inferenceInputCanvas=new OffscreenCanvas(cc.WASM_INFERENCE_DIMENSIONS.width,cc.WASM_INFERENCE_DIMENSIONS.height),i._inputFrameDownscaleMode=(0,qQ.isChromiumImageBitmap)()?"image-bitmap":"canvas";var a=e.assetsPath,o=e.deferInputFrameDownscale,s=e.maskBlurRadius;return i._assetsPath=a,i._deferInputFrameDownscale=o,i._onResizeWebGL2Canvas=n,i.addStage(new KQ.InputFrameDowscaleStage(i._inferenceInputCanvas,i._inputFrameDownscaleMode)),i.addStage(new QQ.PostProcessingStage(cc.WASM_INFERENCE_DIMENSIONS,i._webgl2Canvas,i._outputCanvas,s,function(l){return i._setBackground(l)})),i}return t.prototype.loadTwilioTFLite=function(){return Ud(this,void 0,void 0,function(){var e;return $d(this,function(n){switch(n.label){case 0:return e=t._twilioTFLite,e?[3,2]:(e=new HQ.TwilioTFLite,[4,e.initialize(this._assetsPath,cc.MODEL_NAME,cc.TFLITE_LOADER_NAME,cc.TFLITE_SIMD_LOADER_NAME)]);case 1:n.sent(),t._twilioTFLite=e,n.label=2;case 2:return[2,e.isSimdEnabled]}})})},t.prototype.render=function(e){return Ud(this,void 0,void 0,function(){var n,i,a,o,s,l,c,u,d,v,p,y,_,x,w,S,k,T,R,U,$;return $d(this,function(F){switch(F.label){case 0:return t._twilioTFLite?(n=this._stages,i=n[0],a=n[1],o=this,s=o._benchmark,l=o._deferInputFrameDownscale,c=o._inferenceInputCanvas,u=c.height,d=c.width,v=o._outputCanvas,p=o._webgl2Canvas,y=t._twilioTFLite,_=typeof VideoFrame=="function"&&e instanceof VideoFrame,x=_?{height:e.displayHeight,width:e.displayWidth}:e,w=x.height,S=x.width,k=v.width!==S,T=v.height!==w,R=k||T,k&&(v.width=S,p.width=S),T&&(v.height=w,p.height=w),R&&(a.resetPersonMaskUpscalePipeline(),this._onResizeWebGL2Canvas()),s.start("inputImageResizeDelay"),U=i.render(e).then(function(M){y.loadInputBuffer(M)}),l?[3,2]:[4,U]):[2,null];case 1:F.sent(),F.label=2;case 2:return s.end("inputImageResizeDelay"),s.start("segmentationDelay"),$=new ImageData(y.runInference(),d,u),s.end("segmentationDelay"),s.start("imageCompositionDelay"),a.render(e,$),s.end("imageCompositionDelay"),(typeof VideoFrame=="function"&&e instanceof VideoFrame||typeof ImageBitmap=="function"&&e instanceof ImageBitmap)&&e.close(),[2,this._outputCanvas]}})})},t.prototype.setDeferInputFrameDownscale=function(e){return Ud(this,void 0,void 0,function(){return $d(this,function(n){return this._deferInputFrameDownscale=e,[2]})})},t.prototype.setMaskBlurRadius=function(e){return Ud(this,void 0,void 0,function(){return $d(this,function(n){return this._stages[1].updateMaskBlurRadius(e),[2]})})},t._twilioTFLite=null,t}(GQ.Pipeline);pl.BackgroundProcessorPipeline=YQ;var ml={};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h_=Symbol("Comlink.proxy"),WE=Symbol("Comlink.endpoint"),qE=Symbol("Comlink.releaseProxy"),xh=Symbol("Comlink.finalizer"),kh=Symbol("Comlink.thrown"),HE=r=>typeof r=="object"&&r!==null||typeof r=="function",JQ={canHandle:r=>HE(r)&&r[h_],serialize(r){const{port1:t,port2:e}=new MessageChannel;return v_(r,t),[e,[e]]},deserialize(r){return r.start(),KE(r)}},XQ={canHandle:r=>HE(r)&&kh in r,serialize({value:r}){let t;return r instanceof Error?t={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:t={isError:!1,value:r},[t,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},p_=new Map([["proxy",JQ],["throw",XQ]]);function ZQ(r,t){for(const e of r)if(t===e||e==="*"||e instanceof RegExp&&e.test(t))return!0;return!1}function v_(r,t=globalThis,e=["*"]){t.addEventListener("message",function n(i){if(!i||!i.data)return;if(!ZQ(e,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:o,path:s}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(ps);let c;try{const u=s.slice(0,-1).reduce((v,p)=>v[p],r),d=s.reduce((v,p)=>v[p],r);switch(o){case"GET":c=d;break;case"SET":u[s.slice(-1)[0]]=ps(i.data.value),c=!0;break;case"APPLY":c=d.apply(u,l);break;case"CONSTRUCT":{const v=new d(...l);c=XE(v)}break;case"ENDPOINT":{const{port1:v,port2:p}=new MessageChannel;v_(r,p),c=JE(v,[v])}break;case"RELEASE":c=void 0;break;default:return}}catch(u){c={value:u,[kh]:0}}Promise.resolve(c).catch(u=>({value:u,[kh]:0})).then(u=>{const[d,v]=pp(u);t.postMessage(Object.assign(Object.assign({},d),{id:a}),v),o==="RELEASE"&&(t.removeEventListener("message",n),GE(t),xh in r&&typeof r[xh]=="function"&&r[xh]())}).catch(u=>{const[d,v]=pp({value:new TypeError("Unserializable return value"),[kh]:0});t.postMessage(Object.assign(Object.assign({},d),{id:a}),v)})}),t.start&&t.start()}function eY(r){return r.constructor.name==="MessagePort"}function GE(r){eY(r)&&r.close()}function KE(r,t){const e=new Map;return r.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const o=e.get(a.id);if(o)try{o(a)}finally{e.delete(a.id)}}),dy(r,e,[],t)}function Vd(r){if(r)throw new Error("Proxy has been released and is not useable")}function QE(r){return mc(r,new Map,{type:"RELEASE"}).then(()=>{GE(r)})}const dp=new WeakMap,hp="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const t=(dp.get(r)||0)-1;dp.set(r,t),t===0&&QE(r)});function tY(r,t){const e=(dp.get(t)||0)+1;dp.set(t,e),hp&&hp.register(r,t,r)}function rY(r){hp&&hp.unregister(r)}function dy(r,t,e=[],n=function(){}){let i=!1;const a=new Proxy(n,{get(o,s){if(Vd(i),s===qE)return()=>{rY(a),QE(r),t.clear(),i=!0};if(s==="then"){if(e.length===0)return{then:()=>a};const l=mc(r,t,{type:"GET",path:e.map(c=>c.toString())}).then(ps);return l.then.bind(l)}return dy(r,t,[...e,s])},set(o,s,l){Vd(i);const[c,u]=pp(l);return mc(r,t,{type:"SET",path:[...e,s].map(d=>d.toString()),value:c},u).then(ps)},apply(o,s,l){Vd(i);const c=e[e.length-1];if(c===WE)return mc(r,t,{type:"ENDPOINT"}).then(ps);if(c==="bind")return dy(r,t,e.slice(0,-1));const[u,d]=kb(l);return mc(r,t,{type:"APPLY",path:e.map(v=>v.toString()),argumentList:u},d).then(ps)},construct(o,s){Vd(i);const[l,c]=kb(s);return mc(r,t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},c).then(ps)}});return tY(a,r),a}function nY(r){return Array.prototype.concat.apply([],r)}function kb(r){const t=r.map(pp);return[t.map(e=>e[0]),nY(t.map(e=>e[1]))]}const YE=new WeakMap;function JE(r,t){return YE.set(r,t),r}function XE(r){return Object.assign(r,{[h_]:!0})}function iY(r,t=globalThis,e="*"){return{postMessage:(n,i)=>r.postMessage(n,e,i),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function pp(r){for(const[t,e]of p_)if(e.canHandle(r)){const[n,i]=e.serialize(r);return[{type:"HANDLER",name:t,value:n},i]}return[{type:"RAW",value:r},YE.get(r)||[]]}function ps(r){switch(r.type){case"HANDLER":return p_.get(r.name).deserialize(r.value);case"RAW":return r.value}}function mc(r,t,e,n){return new Promise(i=>{const a=aY();t.set(a,i),r.start&&r.start(),r.postMessage(Object.assign({id:a},e),n)})}function aY(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const oY=Object.freeze(Object.defineProperty({__proto__:null,createEndpoint:WE,expose:v_,finalizer:xh,proxy:XE,proxyMarker:h_,releaseProxy:qE,transfer:JE,transferHandlers:p_,windowEndpoint:iY,wrap:KE},Symbol.toStringTag,{value:"Module"})),m_=zL(oY);var zd=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},Wd=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ml,"__esModule",{value:!0});ml.BackgroundProcessorPipelineProxy=void 0;var sY=m_,cY=xf,lY=function(){function r(t){this._benchmark=new cY.Benchmark,this._pipelineWorkerPromise=t}return r.prototype.loadTwilioTFLite=function(){return zd(this,void 0,void 0,function(){var t;return Wd(this,function(e){switch(e.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return t=e.sent(),[2,t.loadTwilioTFLite()]}})})},r.prototype.render=function(t){return zd(this,void 0,void 0,function(){var e,n,i,a;return Wd(this,function(o){switch(o.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return e=o.sent(),[4,e.render((0,sY.transfer)(t,[t]))];case 2:return n=o.sent(),a=(i=this._benchmark).merge,[4,e._benchmark];case 3:return a.apply(i,[o.sent()]),[2,n]}})})},r.prototype.setDeferInputFrameDownscale=function(t){return zd(this,void 0,void 0,function(){var e;return Wd(this,function(n){switch(n.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return e=n.sent(),[2,e.setDeferInputFrameDownscale(t)]}})})},r.prototype.setMaskBlurRadius=function(t){return zd(this,void 0,void 0,function(){var e;return Wd(this,function(n){switch(n.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return e=n.sent(),[2,e.setMaskBlurRadius(t)]}})})},r}();ml.BackgroundProcessorPipelineProxy=lY;var yv={},_v={},wv={},uY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wv,"__esModule",{value:!0});wv.SinglePassGaussianBlurFilterStage=void 0;var fY=vl;function dY(r){var t=1/Math.sqrt(2*Math.PI)/r;return"0".repeat(r+1).split("").map(function(e,n){return t*Math.exp(-.5*n*n/r/r)})}var hY=function(r){uY(t,r);function t(e,n,i,a,o){var s=this;o===void 0&&(o=a+1);var l=e.canvas,c=l.height,u=l.width;return s=r.call(this,{textureName:"u_inputTexture",textureUnit:a},{fragmentShaderSource:`#version 300 es
          precision highp float;

          uniform sampler2D u_inputTexture;
          uniform vec2 u_texelSize;
          uniform float u_direction;
          uniform float u_radius;
          uniform float u_gaussianBlurWeights[128];

          in vec2 v_texCoord;

          out vec4 outColor;

          void main() {
            float totalWeight = u_gaussianBlurWeights[0];
            vec3 newColor = totalWeight * texture(u_inputTexture, v_texCoord).rgb;

            for (float i = 1.0; i <= u_radius; i += 1.0) {
              float x = (1.0 - u_direction) * i;
              float y = u_direction * i;

              vec2 shift = vec2(x, y) * u_texelSize;
              vec2 coord = vec2(v_texCoord + shift);
              float weight = u_gaussianBlurWeights[int(i)];
              newColor += weight * texture(u_inputTexture, coord).rgb;
              totalWeight += weight;

              shift = vec2(-x, -y) * u_texelSize;
              coord = vec2(v_texCoord + shift);
              newColor += weight * texture(u_inputTexture, coord).rgb;
              totalWeight += weight;
            }

            newColor /= totalWeight;
            outColor = vec4(newColor, 1.0);
          }
        `,glOut:e,height:c,textureUnit:o,type:i,width:u,uniformVars:[{name:"u_direction",type:"float",values:[n==="vertical"?1:0]},{name:"u_texelSize",type:"float",values:[1/u,1/c]}]})||this,s.updateRadius(0),s}return t.prototype.updateRadius=function(e){this._setUniformVars([{name:"u_radius",type:"float",values:[e]},{name:"u_gaussianBlurWeights",type:"float:v",values:dY(e)}])},t}(fY.WebGL2Pipeline.ProcessingStage);wv.SinglePassGaussianBlurFilterStage=hY;var pY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_v,"__esModule",{value:!0});_v.GaussianBlurFilterPipeline=void 0;var vY=vl,Pb=wv,mY=function(r){pY(t,r);function t(e,n){var i=r.call(this)||this;i._isWebGL2Supported=!0,i._outputCanvas=e,i._blurFilterRadius=n;var a=e.getContext("webgl2");return a?i.initializeWebGL2Pipeline(a):(i._isWebGL2Supported=!1,console.warn("Downgraded to Canvas2D for Gaussian blur due to missing WebGL2 support.")),i}return t.prototype.render=function(){this._isWebGL2Supported?r.prototype.render.call(this):this._renderFallback()},t.prototype._renderFallback=function(){var e=this._outputCanvas.getContext("2d");e.filter="blur(".concat(this._blurFilterRadius,"px)")},t.prototype.initializeWebGL2Pipeline=function(e){this.addStage(new Pb.SinglePassGaussianBlurFilterStage(e,"horizontal","texture",0,2)),this.addStage(new Pb.SinglePassGaussianBlurFilterStage(e,"vertical","canvas",2))},t.prototype.updateRadius=function(e){this._blurFilterRadius=e,this._isWebGL2Supported&&this._stages.forEach(function(n){return n.updateRadius(e)})},t.prototype.cleanUp=function(){this._isWebGL2Supported&&r.prototype.cleanUp.call(this)},t}(vY.WebGL2Pipeline);_v.GaussianBlurFilterPipeline=mY;var gY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yY=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},_Y=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(yv,"__esModule",{value:!0});yv.GaussianBlurBackgroundProcessorPipeline=void 0;var wY=li,bY=_v,SY=pl,xY=function(r){gY(t,r);function t(e){var n=r.call(this,e,function(){return n._resetGaussianBlurFilterPipeline()})||this;n._gaussianBlurFilterPipeline=null;var i=e.blurFilterRadius;return n._blurFilterRadius=i,n}return t.prototype.setBlurFilterRadius=function(e){var n;return yY(this,void 0,void 0,function(){return _Y(this,function(i){return this._blurFilterRadius=e,[2,(n=this._gaussianBlurFilterPipeline)===null||n===void 0?void 0:n.updateRadius(this._blurFilterRadius)]})})},t.prototype._setBackground=function(e){var n=this,i=n._blurFilterRadius,a=n._outputCanvas,o=n._webgl2Canvas,s=a.getContext("2d");if(wY.isCanvasBlurSupported){s.filter="blur(".concat(i,"px)"),s.drawImage(e,0,0),s.filter="none";return}this._gaussianBlurFilterPipeline||this._resetGaussianBlurFilterPipeline(),this._gaussianBlurFilterPipeline.render(),s.drawImage(o,0,0)},t.prototype._resetGaussianBlurFilterPipeline=function(){var e,n=this,i=n._blurFilterRadius,a=n._webgl2Canvas;(e=this._gaussianBlurFilterPipeline)===null||e===void 0||e.cleanUp(),this._gaussianBlurFilterPipeline=new bY.GaussianBlurFilterPipeline(a,i),this._gaussianBlurFilterPipeline.updateRadius(i)},t}(SY.BackgroundProcessorPipeline);yv.GaussianBlurBackgroundProcessorPipeline=xY;var bv={},Pf={},Tb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},Eb=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.CorsWorker=void 0;var kY=function(r){var t=fetch;fetch=function(e,n){return t("".concat(r).concat(e),n)}},PY=function(r){var t=importScripts;importScripts=function(e){return t("".concat(r).concat(e))}},TY=function(){function r(t){!/:\/\//.test(t)||new RegExp("^".concat(window.location.origin)).test(t)?this.workerPromise=this._loadSameOrigin(t):this.workerPromise=this._loadCrossOrigin(t)}return r.prototype._loadCrossOrigin=function(t){return Tb(this,void 0,void 0,function(){var e,n,i,a,o,s,l;return Eb(this,function(c){switch(c.label){case 0:return[4,fetch(t)];case 1:return e=c.sent(),[4,e.text()];case 2:return n=c.sent(),i="application/javascript",a="".concat(t.split("/").slice(0,-1).join("/"),"/"),o=["data:".concat(i,","),encodeURIComponent("(".concat(kY,')("').concat(a,'");')),encodeURIComponent("(".concat(PY,')("').concat(a,'");')),encodeURIComponent(n)].join(""),s=new Blob(['importScripts("'.concat(o,'")')],{type:i}),l=URL.createObjectURL(s),[2,new Worker(l)]}})})},r.prototype._loadSameOrigin=function(t){return Tb(this,void 0,void 0,function(){return Eb(this,function(e){return[2,new Worker(t)]})})},r}();Pf.CorsWorker=TY;var EY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),CY=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},LY=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(bv,"__esModule",{value:!0});bv.GaussianBlurBackgroundProcessorPipelineProxy=void 0;var OY=m_,AY=ar,NY=Pf,RY=ml,mg,jY=function(r){EY(t,r);function t(e){var n=this,i=new NY.CorsWorker("".concat(e.assetsPath).concat(AY.TWILIO_GAUSSIAN_BLUR_BACKGROUND_PROCESSOR_PIPELINE_WORKER)),a=i.workerPromise.then(function(o){return mg||(mg=(0,OY.wrap)(o)),new mg(e)});return n=r.call(this,a)||this,n._pipelineWorkerPromise=a,n}return t.prototype.setBlurFilterRadius=function(e){return CY(this,void 0,void 0,function(){var n;return LY(this,function(i){switch(i.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return n=i.sent(),[2,n.setBlurFilterRadius(e)]}})})},t}(RY.BackgroundProcessorPipelineProxy);bv.GaussianBlurBackgroundProcessorPipelineProxy=jY;var Sv={},gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.ImageFit=void 0;var Cb;(function(r){r.Contain="Contain",r.Cover="Cover",r.Fill="Fill",r.None="None"})(Cb||(gl.ImageFit=Cb={}));var IY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},Ob=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.VirtualBackgroundProcessorPipeline=void 0;var qd=gl,MY=pl,DY=function(r){IY(t,r);function t(e){var n=r.call(this,e)||this,i=e.fitType;return n._backgroundImage=null,n._fitType=i,n}return t.prototype.setBackgroundImage=function(e){var n;return Lb(this,void 0,void 0,function(){return Ob(this,function(i){return(n=this._backgroundImage)===null||n===void 0||n.close(),this._backgroundImage=e,[2]})})},t.prototype.setFitType=function(e){return Lb(this,void 0,void 0,function(){return Ob(this,function(n){return this._fitType=e,[2]})})},t.prototype._setBackground=function(){var e=this,n=e._backgroundImage,i=e._fitType,a=e._outputCanvas;if(n){var o=a.getContext("2d"),s=n.width,l=n.height,c=a.width,u=a.height;if(i===qd.ImageFit.Fill)o.drawImage(n,0,0,s,l,0,0,c,u);else if(i===qd.ImageFit.None)o.drawImage(n,0,0,s,l);else{var d=this._getFitPosition(s,l,c,u,i),v=d.x,p=d.y,y=d.w,_=d.h;o.drawImage(n,0,0,s,l,v,p,y,_)}}},t.prototype._getFitPosition=function(e,n,i,a,o){var s=i/e,l=i,c=s*n;(o===qd.ImageFit.Contain&&c>a||o===qd.ImageFit.Cover&&a>c)&&(s=a/c,l=s*l,c=a);var u=(i-l)/2,d=(a-c)/2;return{x:u,y:d,w:l,h:c}},t}(MY.BackgroundProcessorPipeline);Sv.VirtualBackgroundProcessorPipeline=DY;var xv={},FY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ab=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},Nb=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(xv,"__esModule",{value:!0});xv.VirtualBackgroundProcessorPipelineProxy=void 0;var Rb=m_,BY=ar,UY=Pf,$Y=ml,gg,VY=function(r){FY(t,r);function t(e){var n=this,i=new UY.CorsWorker("".concat(e.assetsPath).concat(BY.TWILIO_VIRTUAL_BACKGROUND_PROCESSOR_PIPELINE_WORKER)),a=i.workerPromise.then(function(o){return gg||(gg=(0,Rb.wrap)(o)),new gg(e)});return n=r.call(this,a)||this,n._pipelineWorkerPromise=a,n}return t.prototype.setBackgroundImage=function(e){return Ab(this,void 0,void 0,function(){var n;return Nb(this,function(i){switch(i.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return n=i.sent(),[2,n.setBackgroundImage((0,Rb.transfer)(e,[e]))]}})})},t.prototype.setFitType=function(e){return Ab(this,void 0,void 0,function(){var n;return Nb(this,function(i){switch(i.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return n=i.sent(),[2,n.setFitType(e)]}})})},t}($Y.BackgroundProcessorPipelineProxy);xv.VirtualBackgroundProcessorPipelineProxy=VY;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.VirtualBackgroundProcessorPipelineProxy=r.VirtualBackgroundProcessorPipeline=r.GaussianBlurBackgroundProcessorPipelineProxy=r.GaussianBlurBackgroundProcessorPipeline=r.BackgroundProcessorPipelineProxy=r.BackgroundProcessorPipeline=void 0;var t=pl;Object.defineProperty(r,"BackgroundProcessorPipeline",{enumerable:!0,get:function(){return t.BackgroundProcessorPipeline}});var e=ml;Object.defineProperty(r,"BackgroundProcessorPipelineProxy",{enumerable:!0,get:function(){return e.BackgroundProcessorPipelineProxy}});var n=yv;Object.defineProperty(r,"GaussianBlurBackgroundProcessorPipeline",{enumerable:!0,get:function(){return n.GaussianBlurBackgroundProcessorPipeline}});var i=bv;Object.defineProperty(r,"GaussianBlurBackgroundProcessorPipelineProxy",{enumerable:!0,get:function(){return i.GaussianBlurBackgroundProcessorPipelineProxy}});var a=Sv;Object.defineProperty(r,"VirtualBackgroundProcessorPipeline",{enumerable:!0,get:function(){return a.VirtualBackgroundProcessorPipeline}});var o=xv;Object.defineProperty(r,"VirtualBackgroundProcessorPipelineProxy",{enumerable:!0,get:function(){return o.VirtualBackgroundProcessorPipelineProxy}})})(lv);var zY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},Ib=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(bf,"__esModule",{value:!0});bf.BackgroundProcessor=void 0;var yg=ar,WY=Sf,qY=cv,HY=lv,GY=function(r){zY(t,r);function t(e,n){var i=r.call(this)||this;i._deferInputFrameDownscale=!1,i._inputFrameCanvas=new OffscreenCanvas(1,1),i._inputFrameContext=i._inputFrameCanvas.getContext("2d",{willReadFrequently:!0}),i._isSimdEnabled=null,i._maskBlurRadius=yg.MASK_BLUR_RADIUS,i._outputFrameBuffer=null,i._outputFrameBufferContext=null,i._version=WY.version;var a=n.assetsPath,o=n.deferInputFrameDownscale,s=o===void 0?i._deferInputFrameDownscale:o,l=n.maskBlurRadius,c=l===void 0?i._maskBlurRadius:l;if(typeof a!="string")throw new Error("assetsPath parameter must be a string");return i._assetsPath=a.replace(/([^/])$/,"$1/"),i._backgroundProcessorPipeline=e,i._benchmark=i._backgroundProcessorPipeline._benchmark,i.deferInputFrameDownscale=s,i.maskBlurRadius=c,i}return Object.defineProperty(t.prototype,"deferInputFrameDownscale",{get:function(){return this._deferInputFrameDownscale},set:function(e){typeof e!="boolean"&&(console.warn("Provided deferInputFrameDownscale is not a boolean."),e=this._deferInputFrameDownscale),this._deferInputFrameDownscale!==e&&(this._deferInputFrameDownscale=e,this._backgroundProcessorPipeline.setDeferInputFrameDownscale(this._deferInputFrameDownscale).catch(function(){}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskBlurRadius",{get:function(){return this._maskBlurRadius},set:function(e){(typeof e!="number"||e<0)&&(console.warn("Valid mask blur radius not found. Using ".concat(yg.MASK_BLUR_RADIUS," as default.")),e=yg.MASK_BLUR_RADIUS),this._maskBlurRadius!==e&&(this._maskBlurRadius=e,this._backgroundProcessorPipeline.setMaskBlurRadius(this._maskBlurRadius).catch(function(){}))},enumerable:!1,configurable:!0}),t.prototype.loadModel=function(){return jb(this,void 0,void 0,function(){var e;return Ib(this,function(n){switch(n.label){case 0:return e=this,[4,this._backgroundProcessorPipeline.loadTwilioTFLite()];case 1:return e._isSimdEnabled=n.sent(),[2]}})})},t.prototype.processFrame=function(e,n){return jb(this,void 0,void 0,function(){var i,a,o,s,l,c,u,d,v,p,y;return Ib(this,function(_){switch(_.label){case 0:if(!e||!n)throw new Error("Missing input or output frame buffer");return i=this,a=i._backgroundProcessorPipeline,o=i._benchmark,s=i._outputFrameBufferContext,o.end("captureFrameDelay"),o.end("totalProcessingDelay"),o.start("totalProcessingDelay"),o.start("processFrameDelay"),l=this._getFrameDimensions(e),c=l.width,u=l.height,this._outputFrameBuffer!==n&&(this._outputFrameBuffer=n,this._outputFrameBufferContext=n.getContext("2d")||n.getContext("bitmaprenderer")),this._inputFrameCanvas.width!==c&&(this._inputFrameCanvas.width=c),this._inputFrameCanvas.height!==u&&(this._inputFrameCanvas.height=u),e instanceof HTMLVideoElement?(this._inputFrameContext.drawImage(e,0,0),d=this._inputFrameCanvas):d=e,a instanceof HY.BackgroundProcessorPipeline?[4,a.render(d)]:[3,2];case 1:return p=_.sent(),[3,4];case 2:return[4,a.render(d instanceof OffscreenCanvas?d.transferToImageBitmap():d)];case 3:p=_.sent(),_.label=4;case 4:return v=p,s instanceof ImageBitmapRenderingContext?(y=v instanceof OffscreenCanvas?v.transferToImageBitmap():v,s.transferFromImageBitmap(y)):s instanceof CanvasRenderingContext2D&&v&&s.drawImage(v,0,0),o.end("processFrameDelay"),o.start("captureFrameDelay"),[2]}})})},t.prototype._getFrameDimensions=function(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e instanceof VideoFrame?{width:e.displayWidth,height:e.displayHeight}:{width:e.width,height:e.height}},t}(qY.Processor);bf.BackgroundProcessor=GY;var KY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(sv,"__esModule",{value:!0});sv.GaussianBlurBackgroundProcessor=void 0;var ou=ar,QY=bf,Mb=lv,YY=function(r){KY(t,r);function t(e){var n=this,i=e.blurFilterRadius,a=i===void 0?ou.BLUR_FILTER_RADIUS:i,o=e.deferInputFrameDownscale,s=o===void 0?!1:o,l=e.maskBlurRadius,c=l===void 0?ou.MASK_BLUR_RADIUS:l,u=e.useWebWorker,d=u===void 0?!0:u,v=e.assetsPath.replace(/([^/])$/,"$1/"),p=d?Mb.GaussianBlurBackgroundProcessorPipelineProxy:Mb.GaussianBlurBackgroundProcessorPipeline,y=new p({assetsPath:v,blurFilterRadius:a,deferInputFrameDownscale:s,maskBlurRadius:c});return n=r.call(this,y,e)||this,n._blurFilterRadius=ou.BLUR_FILTER_RADIUS,n._name="GaussianBlurBackgroundProcessor",n.blurFilterRadius=e.blurFilterRadius,n}return Object.defineProperty(t.prototype,"blurFilterRadius",{get:function(){return this._blurFilterRadius},set:function(e){e||(console.warn("Valid blur filter radius not found. Using ".concat(ou.BLUR_FILTER_RADIUS," as default.")),e=ou.BLUR_FILTER_RADIUS),this._blurFilterRadius=e,this._backgroundProcessorPipeline.setBlurFilterRadius(this._blurFilterRadius).catch(function(){})},enumerable:!1,configurable:!0}),t}(QY.BackgroundProcessor);sv.GaussianBlurBackgroundProcessor=YY;var kv={},JY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(kv,"__esModule",{value:!0});kv.VirtualBackgroundProcessor=void 0;var Hd=gl,XY=ar,ZY=bf,Db=lv,eJ=function(r){JY(t,r);function t(e){var n=this,i=e.backgroundImage,a=e.deferInputFrameDownscale,o=a===void 0?!1:a,s=e.fitType,l=s===void 0?Hd.ImageFit.Fill:s,c=e.maskBlurRadius,u=c===void 0?XY.MASK_BLUR_RADIUS:c,d=e.useWebWorker,v=d===void 0?!0:d,p=e.assetsPath.replace(/([^/])$/,"$1/"),y=v?Db.VirtualBackgroundProcessorPipelineProxy:Db.VirtualBackgroundProcessorPipeline,_=new y({assetsPath:p,deferInputFrameDownscale:o,fitType:l,maskBlurRadius:u});return n=r.call(this,_,e)||this,n._name="VirtualBackgroundProcessor",n.backgroundImage=i,n.fitType=l,n}return Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this._backgroundImage},set:function(e){var n=this;if(!e||!e.complete||!e.naturalHeight)throw new Error("Invalid image. Make sure that the image is an HTMLImageElement and has been successfully loaded");this._backgroundImage=e,createImageBitmap(this._backgroundImage).then(function(i){return n._backgroundProcessorPipeline.setBackgroundImage(i)}).catch(function(){})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fitType",{get:function(){return this._fitType},set:function(e){var n=Object.keys(Hd.ImageFit);n.includes(e)||(console.warn("Valid fitType not found. Using '".concat(Hd.ImageFit.Fill,"' as default.")),e=Hd.ImageFit.Fill),this._fitType=e,this._backgroundProcessorPipeline.setFitType(this._fitType).catch(function(){})},enumerable:!1,configurable:!0}),t}(ZY.BackgroundProcessor);kv.VirtualBackgroundProcessor=eJ;(function(r){var t=A&&A.__assign||function(){return t=Object.assign||function(s){for(var l,c=1,u=arguments.length;c<u;c++){l=arguments[c];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])}return s},t.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.VirtualBackgroundProcessor=r.version=r.isSupported=r.ImageFit=r.GaussianBlurBackgroundProcessor=void 0;var e=sv;Object.defineProperty(r,"GaussianBlurBackgroundProcessor",{enumerable:!0,get:function(){return e.GaussianBlurBackgroundProcessor}});var n=kv;Object.defineProperty(r,"VirtualBackgroundProcessor",{enumerable:!0,get:function(){return n.VirtualBackgroundProcessor}});var i=gl;Object.defineProperty(r,"ImageFit",{enumerable:!0,get:function(){return i.ImageFit}});var a=li;Object.defineProperty(r,"isSupported",{enumerable:!0,get:function(){return a.isSupported}});var o=Sf;Object.defineProperty(r,"version",{enumerable:!0,get:function(){return o.version}}),typeof window<"u"&&(window.Twilio=window.Twilio||{},window.Twilio.VideoProcessors=t(t({},window.Twilio.VideoProcessors),{GaussianBlurBackgroundProcessor:e.GaussianBlurBackgroundProcessor,ImageFit:i.ImageFit,isSupported:a.isSupported,version:o.version,VirtualBackgroundProcessor:n.VirtualBackgroundProcessor}))})(uy);const tJ=()=>{const[r,t]=he.useState("none"),[e,n]=he.useState(!1),[i,a]=he.useState(null),o=he.useCallback(async c=>{try{n(!0),i&&(await c.removeProcessor(i),a(null)),t("none")}catch(u){console.error("Error removing background effect:",u)}finally{n(!1)}},[i]),s=he.useCallback(async c=>{try{n(!0),i&&await c.removeProcessor(i);const u=new uy.GaussianBlurBackgroundProcessor({assetsPath:"/twilio-processors",maskBlurRadius:15,blurFilterRadius:15});await u.loadModel(),await c.addProcessor(u),a(u),t("blur")}catch(u){console.error("Error applying blur effect:",u),t("none")}finally{n(!1)}},[i]),l=he.useCallback(async(c,u)=>{try{n(!0),i&&await c.removeProcessor(i);const d=new Image;d.crossOrigin="anonymous",d.src=u,await new Promise((p,y)=>{d.onload=p,d.onerror=y});const v=new uy.VirtualBackgroundProcessor({assetsPath:"/twilio-processors",backgroundImage:d,maskBlurRadius:5});await v.loadModel(),await c.addProcessor(v),a(v),t("virtual")}catch(d){console.error("Error applying virtual background:",d),t("none")}finally{n(!1)}},[i]);return{currentEffect:r,isProcessing:e,applyBlur:s,applyVirtualBackground:l,removeEffect:o}},ra=Object.create(null);ra.open="0";ra.close="1";ra.ping="2";ra.pong="3";ra.message="4";ra.upgrade="5";ra.noop="6";const Ph=Object.create(null);Object.keys(ra).forEach(r=>{Ph[ra[r]]=r});const hy={type:"error",data:"parser error"},ZE=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",eC=typeof ArrayBuffer=="function",tC=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,g_=({type:r,data:t},e,n)=>ZE&&t instanceof Blob?e?n(t):Fb(t,n):eC&&(t instanceof ArrayBuffer||tC(t))?e?n(t):Fb(new Blob([t]),n):n(ra[r]+(t||"")),Fb=(r,t)=>{const e=new FileReader;return e.onload=function(){const n=e.result.split(",")[1];t("b"+(n||""))},e.readAsDataURL(r)};function Bb(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let _g;function rJ(r,t){if(ZE&&r.data instanceof Blob)return r.data.arrayBuffer().then(Bb).then(t);if(eC&&(r.data instanceof ArrayBuffer||tC(r.data)))return t(Bb(r.data));g_(r,!1,e=>{_g||(_g=new TextEncoder),t(_g.encode(e))})}const Ub="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<Ub.length;r++)yu[Ub.charCodeAt(r)]=r;const nJ=r=>{let t=r.length*.75,e=r.length,n,i=0,a,o,s,l;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);const c=new ArrayBuffer(t),u=new Uint8Array(c);for(n=0;n<e;n+=4)a=yu[r.charCodeAt(n)],o=yu[r.charCodeAt(n+1)],s=yu[r.charCodeAt(n+2)],l=yu[r.charCodeAt(n+3)],u[i++]=a<<2|o>>4,u[i++]=(o&15)<<4|s>>2,u[i++]=(s&3)<<6|l&63;return c},iJ=typeof ArrayBuffer=="function",y_=(r,t)=>{if(typeof r!="string")return{type:"message",data:rC(r,t)};const e=r.charAt(0);return e==="b"?{type:"message",data:aJ(r.substring(1),t)}:Ph[e]?r.length>1?{type:Ph[e],data:r.substring(1)}:{type:Ph[e]}:hy},aJ=(r,t)=>{if(iJ){const e=nJ(r);return rC(e,t)}else return{base64:!0,data:r}},rC=(r,t)=>{switch(t){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},nC="",oJ=(r,t)=>{const e=r.length,n=new Array(e);let i=0;r.forEach((a,o)=>{g_(a,!1,s=>{n[o]=s,++i===e&&t(n.join(nC))})})},sJ=(r,t)=>{const e=r.split(nC),n=[];for(let i=0;i<e.length;i++){const a=y_(e[i],t);if(n.push(a),a.type==="error")break}return n};function cJ(){return new TransformStream({transform(r,t){rJ(r,e=>{const n=e.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,n)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(e)})}})}let wg;function Gd(r){return r.reduce((t,e)=>t+e.length,0)}function Kd(r,t){if(r[0].length===t)return r.shift();const e=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)e[i]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),e}function lJ(r,t){wg||(wg=new TextDecoder);const e=[];let n=0,i=-1,a=!1;return new TransformStream({transform(o,s){for(e.push(o);;){if(n===0){if(Gd(e)<1)break;const l=Kd(e,1);a=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Gd(e)<2)break;const l=Kd(e,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(Gd(e)<8)break;const l=Kd(e,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){s.enqueue(hy);break}i=u*Math.pow(2,32)+c.getUint32(4),n=3}else{if(Gd(e)<i)break;const l=Kd(e,i);s.enqueue(y_(a?l:wg.decode(l),t)),n=0}if(i===0||i>r){s.enqueue(hy);break}}}})}const iC=4;function Or(r){if(r)return uJ(r)}function uJ(r){for(var t in Or.prototype)r[t]=Or.prototype[t];return r}Or.prototype.on=Or.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};Or.prototype.once=function(r,t){function e(){this.off(r,e),t.apply(this,arguments)}return e.fn=t,this.on(r,e),this};Or.prototype.off=Or.prototype.removeListener=Or.prototype.removeAllListeners=Or.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,i=0;i<e.length;i++)if(n=e[i],n===t||n.fn===t){e.splice(i,1);break}return e.length===0&&delete this._callbacks["$"+r],this};Or.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+r],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,i=e.length;n<i;++n)e[n].apply(this,t)}return this};Or.prototype.emitReserved=Or.prototype.emit;Or.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Or.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Pv=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),si=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),fJ="arraybuffer";function aC(r,...t){return t.reduce((e,n)=>(r.hasOwnProperty(n)&&(e[n]=r[n]),e),{})}const dJ=si.setTimeout,hJ=si.clearTimeout;function Tv(r,t){t.useNativeTimers?(r.setTimeoutFn=dJ.bind(si),r.clearTimeoutFn=hJ.bind(si)):(r.setTimeoutFn=si.setTimeout.bind(si),r.clearTimeoutFn=si.clearTimeout.bind(si))}const pJ=1.33;function vJ(r){return typeof r=="string"?mJ(r):Math.ceil((r.byteLength||r.size)*pJ)}function mJ(r){let t=0,e=0;for(let n=0,i=r.length;n<i;n++)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function oC(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function gJ(r){let t="";for(let e in r)r.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t}function yJ(r){let t={},e=r.split("&");for(let n=0,i=e.length;n<i;n++){let a=e[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class _J extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class __ extends Or{constructor(t){super(),this.writable=!1,Tv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new _J(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=y_(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=gJ(t);return e.length?"?"+e:""}}class wJ extends __{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};sJ(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,oJ(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=oC()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let sC=!1;try{sC=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const bJ=sC;function SJ(){}class xJ extends wJ{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}}class ta extends Or{constructor(t,e,n){super(),this.createRequest=t,Tv(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const e=aC(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=ta.requestsCount++,ta.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=SJ,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ta.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ta.requestsCount=0;ta.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$b);else if(typeof addEventListener=="function"){const r="onpagehide"in si?"pagehide":"unload";addEventListener(r,$b,!1)}}function $b(){for(let r in ta.requests)ta.requests.hasOwnProperty(r)&&ta.requests[r].abort()}const kJ=function(){const r=cC({xdomain:!1});return r&&r.responseType!==null}();class PJ extends xJ{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=kJ&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new ta(cC,this.uri(),t)}}function cC(r){const t=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||bJ))return new XMLHttpRequest}catch{}if(!t)try{return new si[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const lC=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class TJ extends __{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,n=lC?{}:aC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],i=e===t.length-1;g_(n,this.supportsBinary,a=>{try{this.doWrite(n,a)}catch{}i&&Pv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=oC()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const bg=si.WebSocket||si.MozWebSocket;class EJ extends TJ{createSocket(t,e,n){return lC?new bg(t,e,n):e?new bg(t,e):new bg(t)}doWrite(t,e){this.ws.send(e)}}class CJ extends __{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=lJ(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),i=cJ();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{n.read().then(({done:s,value:l})=>{s||(this.onPacket(l),a())}).catch(s=>{})};a();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],i=e===t.length-1;this._writer.write(n).then(()=>{i&&Pv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const LJ={websocket:EJ,webtransport:CJ,polling:PJ},OJ=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,AJ=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function py(r){if(r.length>8e3)throw"URI too long";const t=r,e=r.indexOf("["),n=r.indexOf("]");e!=-1&&n!=-1&&(r=r.substring(0,e)+r.substring(e,n).replace(/:/g,";")+r.substring(n,r.length));let i=OJ.exec(r||""),a={},o=14;for(;o--;)a[AJ[o]]=i[o]||"";return e!=-1&&n!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=NJ(a,a.path),a.queryKey=RJ(a,a.query),a}function NJ(r,t){const e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function RJ(r,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,a){i&&(e[i]=a)}),e}const vy=typeof addEventListener=="function"&&typeof removeEventListener=="function",Th=[];vy&&addEventListener("offline",()=>{Th.forEach(r=>r())},!1);class Co extends Or{constructor(t,e){if(super(),this.binaryType=fJ,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const n=py(t);e.hostname=n.host,e.secure=n.protocol==="https"||n.protocol==="wss",e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=py(e.host).host);Tv(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=yJ(this.opts.query)),vy&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Th.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=iC,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Co.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Co.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+=vJ(i)),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Pv(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,n){return this._sendPacket("message",t,e,n),this}send(t,e,n){return this._sendPacket("message",t,e,n),this}_sendPacket(t,e,n,i){if(typeof e=="function"&&(i=e,e=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const a={type:t,data:e,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Co.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),vy&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Th.indexOf(this._offlineEventListener);n!==-1&&Th.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}Co.protocol=iC;class jJ extends Co{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;Co.priorWebsocketSuccess=!1;const i=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Co.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=e.name,this.emitReserved("upgradeError",v)}}))};function a(){n||(n=!0,u(),e.close(),e=null)}const o=d=>{const v=new Error("probe error: "+d);v.transport=e.name,a(),this.emitReserved("upgradeError",v)};function s(){o("transport closed")}function l(){o("socket closed")}function c(d){e&&d.name!==e.name&&a()}const u=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",s),this.off("close",l),this.off("upgrading",c)};e.once("open",i),e.once("error",o),e.once("close",s),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}let IJ=class extends jJ{constructor(t,e={}){const n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>LJ[i]).filter(i=>!!i)),super(t,n)}};function MJ(r,t="",e){let n=r;e=e||typeof location<"u"&&location,r==null&&(r=e.protocol+"//"+e.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=e.protocol+r:r=e.host+r),/^(https?|wss?):\/\//.test(r)||(typeof e<"u"?r=e.protocol+"//"+r:r="https://"+r),n=py(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const a=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(e&&e.port===n.port?"":":"+n.port),n}const DJ=typeof ArrayBuffer=="function",FJ=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,uC=Object.prototype.toString,BJ=typeof Blob=="function"||typeof Blob<"u"&&uC.call(Blob)==="[object BlobConstructor]",UJ=typeof File=="function"||typeof File<"u"&&uC.call(File)==="[object FileConstructor]";function w_(r){return DJ&&(r instanceof ArrayBuffer||FJ(r))||BJ&&r instanceof Blob||UJ&&r instanceof File}function Eh(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let e=0,n=r.length;e<n;e++)if(Eh(r[e]))return!0;return!1}if(w_(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Eh(r.toJSON(),!0);for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&Eh(r[e]))return!0;return!1}function $J(r){const t=[],e=r.data,n=r;return n.data=my(e,t),n.attachments=t.length,{packet:n,buffers:t}}function my(r,t){if(!r)return r;if(w_(r)){const e={_placeholder:!0,num:t.length};return t.push(r),e}else if(Array.isArray(r)){const e=new Array(r.length);for(let n=0;n<r.length;n++)e[n]=my(r[n],t);return e}else if(typeof r=="object"&&!(r instanceof Date)){const e={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=my(r[n],t));return e}return r}function VJ(r,t){return r.data=gy(r.data,t),delete r.attachments,r}function gy(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=gy(r[e],t);else if(typeof r=="object")for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=gy(r[e],t));return r}const zJ=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],WJ=5;var Tt;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Tt||(Tt={}));class qJ{constructor(t){this.replacer=t}encode(t){return(t.type===Tt.EVENT||t.type===Tt.ACK)&&Eh(t)?this.encodeAsBinary({type:t.type===Tt.EVENT?Tt.BINARY_EVENT:Tt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Tt.BINARY_EVENT||t.type===Tt.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=$J(t),n=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(n),i}}function Vb(r){return Object.prototype.toString.call(r)==="[object Object]"}class b_ extends Or{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===Tt.BINARY_EVENT;n||e.type===Tt.BINARY_ACK?(e.type=n?Tt.EVENT:Tt.ACK,this.reconstructor=new HJ(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(w_(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(Tt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Tt.BINARY_EVENT||n.type===Tt.BINARY_ACK){const a=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(a,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(e+1)==="/"){const a=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(a,e)}else n.nsp="/";const i=t.charAt(e+1);if(i!==""&&Number(i)==i){const a=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}n.id=Number(t.substring(a,e+1))}if(t.charAt(++e)){const a=this.tryParse(t.substr(e));if(b_.isPayloadValid(n.type,a))n.data=a;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case Tt.CONNECT:return Vb(e);case Tt.DISCONNECT:return e===void 0;case Tt.CONNECT_ERROR:return typeof e=="string"||Vb(e);case Tt.EVENT:case Tt.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&zJ.indexOf(e[0])===-1);case Tt.ACK:case Tt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class HJ{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=VJ(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const GJ=Object.freeze(Object.defineProperty({__proto__:null,Decoder:b_,Encoder:qJ,get PacketType(){return Tt},protocol:WJ},Symbol.toStringTag,{value:"Module"}));function Ti(r,t,e){return r.on(t,e),function(){r.off(t,e)}}const KJ=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fC extends Or{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ti(t,"open",this.onopen.bind(this)),Ti(t,"packet",this.onpacket.bind(this)),Ti(t,"error",this.onerror.bind(this)),Ti(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,i,a;if(KJ.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:Tt.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const u=this.ids++,d=e.pop();this._registerAckCallback(u,d),o.id=u}const s=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!s||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[t]=e;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);e.call(this,new Error("operation has timed out"))},i),o=(...s)=>{this.io.clearTimeoutFn(a),e.apply(this,s)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((n,i)=>{const a=(o,s)=>o?i(o):n(s);a.withError=!0,e.push(a),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(i)):(this._queue.shift(),e&&e(null,...a)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Tt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Tt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tt.EVENT:case Tt.BINARY_EVENT:this.onevent(t);break;case Tt.ACK:case Tt.BINARY_ACK:this.onack(t);break;case Tt.DISCONNECT:this.ondisconnect();break;case Tt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...i){n||(n=!0,e.packet({type:Tt.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Tt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function yl(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}yl.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*r);r=Math.floor(t*10)&1?r+e:r-e}return Math.min(r,this.max)|0};yl.prototype.reset=function(){this.attempts=0};yl.prototype.setMin=function(r){this.ms=r};yl.prototype.setMax=function(r){this.max=r};yl.prototype.setJitter=function(r){this.jitter=r};class yy extends Or{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Tv(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new yl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||GJ;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new IJ(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=Ti(e,"open",function(){n.onopen(),t&&t()}),a=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),t?t(s):this.maybeReconnectOnOpen()},o=Ti(e,"error",a);if(this._timeout!==!1){const s=this._timeout,l=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),e.close()},s);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ti(t,"ping",this.onping.bind(this)),Ti(t,"data",this.ondata.bind(this)),Ti(t,"error",this.onerror.bind(this)),Ti(t,"close",this.onclose.bind(this)),Ti(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Pv(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new fC(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const su={};function Lu(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};const e=MJ(r,t.path||"/socket.io"),n=e.source,i=e.id,a=e.path,o=su[i]&&a in su[i].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return s?l=new yy(n,t):(su[i]||(su[i]=new yy(n,t)),l=su[i]),e.query&&!t.query&&(t.query=e.queryKey),l.socket(e.path,t)}Object.assign(Lu,{Manager:yy,Socket:fC,io:Lu,connect:Lu});const QJ=({roomName:r,doctorIdentity:t,role:e,enabled:n})=>{const[i,a]=he.useState(!1),[o,s]=he.useState(!1),[l,c]=he.useState(!1),[u,d]=he.useState(null),[v,p]=he.useState(null),y=he.useRef(null);he.useEffect(()=>{const S=window.location.origin;console.log("[Postural Analysis] Connecting to Socket.io:",S);const k=Lu(`${S}/telemedicine`,{transports:["websocket","polling"],reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5});return y.current=k,k.on("connect",()=>{console.log("[Postural Analysis] Connected to Socket.io"),a(!0),p(null)}),k.on("disconnect",()=>{console.log("[Postural Analysis] Disconnected from Socket.io"),a(!1),s(!1)}),k.on("connect_error",T=>{console.error("[Postural Analysis] Connection error:",T),p("Error connecting to telemedicine service")}),k.on("session-created",T=>{console.log("[Postural Analysis] Session created:",T),s(!0),c(T.patientConnected)}),k.on("session-joined",T=>{console.log("[Postural Analysis] Session joined:",T)}),k.on("patient-connected",T=>{console.log("[Postural Analysis] Patient connected:",T),c(!0)}),k.on("session-activated-by-doctor",T=>{console.log("[Postural Analysis] Session activated by doctor:",T),s(!0)}),k.on("patient-disconnected",()=>{console.log("[Postural Analysis] Patient disconnected"),c(!1)}),k.on("session-ended",T=>{console.log("[Postural Analysis] Session ended:",T),s(!1),c(!1)}),e==="doctor"&&k.on("pose-data-update",T=>{d(T)}),k.on("session-error",T=>{console.error("[Postural Analysis] Session error:",T),p(T.message)}),k.on("join-error",T=>{console.error("[Postural Analysis] Join error:",T),p(T.message)}),()=>{console.log("[Postural Analysis] Cleaning up Socket.io connection"),k.disconnect()}},[n,e]);const _=he.useCallback(()=>{if(!y.current||!i){console.warn("[Postural Analysis] Cannot start session: not connected");return}console.log("[Postural Analysis] Starting session:",r),y.current.emit("create-analysis-session",{roomName:r,doctorIdentity:t})},[i,r,t]),x=he.useCallback(()=>{if(!y.current||!i){console.warn("[Postural Analysis] Cannot end session: not connected");return}console.log("[Postural Analysis] Ending session:",r),y.current.emit("end-analysis-session",{roomName:r}),s(!1),c(!1),d(null)},[i,r]),w=he.useCallback(S=>{!y.current||!i||!o||y.current.emit("pose-data",{roomName:r,poseData:S})},[i,o,r]);return he.useEffect(()=>{var S;!i||e!=="patient"||(console.log("[Postural Analysis] Patient attempting to join session:",r),(S=y.current)==null||S.emit("join-analysis-session",{roomName:r,patientIdentity:"Patient"}))},[n,i,e,r]),{isConnected:i,sessionActive:o,patientConnected:l,latestPoseData:u,error:v,startSession:_,endSession:x,sendPoseData:w}},Sg=({participant:r,isLocal:t=!1})=>{const e=he.useRef(null),n=he.useRef(null),[i,a]=he.useState(null),[o,s]=he.useState(null);return he.useEffect(()=>{if(i&&e.current){try{i.attach(e.current),console.log("Video track attached successfully for",r.identity)}catch(l){console.error("Error attaching video track:",l)}return()=>{i.detach().forEach(l=>l.remove())}}},[i,r.identity]),he.useEffect(()=>{if(o&&n.current&&!t){try{o.attach(n.current),console.log("Audio track attached successfully for",r.identity)}catch(l){console.error("Error attaching audio track:",l)}return()=>{o.detach().forEach(l=>l.remove())}}},[o,t,r.identity]),he.useEffect(()=>{const l=u=>{console.log(`Track ${u.kind} subscribed for ${r.identity}`,u),u.kind==="video"?a(u):u.kind==="audio"&&s(u)},c=u=>{console.log(`Track ${u.kind} unsubscribed for ${r.identity}`),u.kind==="video"?a(null):u.kind==="audio"&&s(null)};return console.log(`Setting up participant: ${r.identity}, tracks:`,r.tracks.size),r.tracks.forEach(u=>{if("isSubscribed"in u){const d=u;if(console.log("Publication:",d.trackName,d.isSubscribed,d.track),d.isSubscribed&&d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&l(v)}}else{const d=u;if(console.log("Publication:",d.trackName,d.track),d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&l(v)}}}),t||(r.on("trackSubscribed",l),r.on("trackUnsubscribed",c)),()=>{r.tracks.forEach(u=>{if("isSubscribed"in u){const d=u;if(d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&c(v)}}else{const d=u;if(d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&c(v)}}})}},[r,t]),m.jsxs("div",{className:`relative bg-gray-900 overflow-hidden ${t?"h-full rounded-lg":"h-full w-full"}`,children:[i?m.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:t,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:m.jsx("div",{className:`text-white font-bold ${t?"text-4xl":"text-6xl sm:text-7xl md:text-8xl"}`,children:r.identity.charAt(0).toUpperCase()})}),!t&&m.jsx("audio",{ref:n,autoPlay:!0}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/60 to-transparent p-3 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-white font-semibold text-sm sm:text-base drop-shadow-lg",children:t?"Tú":r.identity}),m.jsxs("div",{className:"flex gap-2",children:[!o&&m.jsx("span",{className:"text-red-400 text-xs sm:text-sm drop-shadow-lg",children:"🔇 Silenciado"}),!i&&m.jsx("span",{className:"text-red-400 text-xs sm:text-sm drop-shadow-lg",children:"📹 Sin video"})]})]})})]})},YJ=({onApplyBlur:r,onApplyVirtualBackground:t,onRemoveEffect:e,isProcessing:n,currentEffect:i})=>{const[a,o]=he.useState(!1),s=[{id:"office",name:"Oficina",url:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=1920&h=1080&fit=crop"},{id:"nature",name:"Naturaleza",url:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop"},{id:"abstract",name:"Abstracto",url:"https://images.unsplash.com/photo-1557683316-973673baf926?w=1920&h=1080&fit=crop"}];return m.jsxs("div",{className:"relative",children:[m.jsxs("button",{onClick:()=>o(!a),className:"bg-[#2a3942] text-white p-3 rounded-full hover:bg-[#374850] transition flex items-center gap-2",title:"Cambiar fondo",disabled:n,children:[m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),n&&m.jsx("span",{className:"text-xs",children:"..."})]}),a&&m.jsxs("div",{className:"absolute bottom-full mb-2 right-0 bg-[#1f2c34] rounded-xl shadow-2xl p-3 min-w-[250px] border border-gray-700",children:[m.jsx("h3",{className:"text-white text-sm font-semibold mb-3 px-2",children:"Efectos de fondo"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("button",{onClick:()=>{e(),o(!1)},disabled:n,className:`w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-3 ${i==="none"?"bg-[#00a884] text-white":"text-gray-300 hover:bg-[#2a3942]"} disabled:opacity-50`,children:[m.jsx("div",{className:"w-12 h-8 bg-gray-600 rounded flex items-center justify-center",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m.jsx("span",{className:"text-sm",children:"Sin efecto"})]}),m.jsxs("button",{onClick:()=>{r(),o(!1)},disabled:n,className:`w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-3 ${i==="blur"?"bg-[#00a884] text-white":"text-gray-300 hover:bg-[#2a3942]"} disabled:opacity-50`,children:[m.jsx("div",{className:"w-12 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded blur-sm"}),m.jsx("span",{className:"text-sm",children:"Desenfocar fondo"})]}),m.jsxs("div",{className:"border-t border-gray-700 my-2 pt-2",children:[m.jsx("p",{className:"text-xs text-gray-500 px-2 mb-2",children:"Fondos virtuales"}),s.map(l=>m.jsxs("button",{onClick:()=>{t(l.url),o(!1)},disabled:n,className:"w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-3 text-gray-300 hover:bg-[#2a3942] disabled:opacity-50 mb-1",children:[m.jsx("div",{className:"w-12 h-8 rounded bg-cover bg-center",style:{backgroundImage:`url(${l.url})`}}),m.jsx("span",{className:"text-sm",children:l.name})]},l.id))]})]}),m.jsx("button",{onClick:()=>o(!1),className:"w-full mt-3 text-xs text-gray-500 hover:text-white transition py-1",children:"Cerrar"})]})]})},JJ=({isAudioEnabled:r,isVideoEnabled:t,onToggleAudio:e,onToggleVideo:n,onLeave:i,showBackgroundControls:a=!1,onApplyBlur:o,onApplyVirtualBackground:s,onRemoveEffect:l,isProcessingBackground:c=!1,currentBackgroundEffect:u="none",showPosturalAnalysis:d=!1,onOpenPosturalAnalysis:v})=>m.jsxs("div",{className:"bg-gradient-to-t from-black/80 via-black/60 to-transparent pb-safe",children:[m.jsxs("div",{className:"px-6 py-6 flex items-center justify-center gap-6",children:[a&&o&&s&&l&&m.jsx(YJ,{onApplyBlur:o,onApplyVirtualBackground:s,onRemoveEffect:l,isProcessing:c,currentEffect:u}),m.jsx("button",{onClick:n,className:`w-14 h-14 rounded-full transition-all flex items-center justify-center ${t?"bg-[#374045] hover:bg-[#4a5459] text-white":"bg-white/90 hover:bg-white text-gray-800"}`,title:t?"Apagar cámara":"Encender cámara",children:t?m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}):m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"})})}),m.jsx("button",{onClick:e,className:`w-14 h-14 rounded-full transition-all flex items-center justify-center ${r?"bg-[#374045] hover:bg-[#4a5459] text-white":"bg-white/90 hover:bg-white text-gray-800"}`,title:r?"Silenciar":"Activar micrófono",children:r?m.jsxs("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),m.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}):m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"})})}),d&&v&&m.jsx("button",{onClick:v,className:"w-14 h-14 rounded-full bg-[#374045] hover:bg-[#4a5459] text-white transition-all flex items-center justify-center",title:"Análisis Postural",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),m.jsx("button",{onClick:i,className:"w-16 h-16 rounded-full bg-[#ff3b30] hover:bg-[#ff1f1f] text-white transition-all flex items-center justify-center shadow-lg",title:"Finalizar llamada",children:m.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"})})})]}),m.jsxs("div",{className:"flex items-center justify-center gap-2 pb-4 text-xs text-gray-500",children:[m.jsx("span",{children:"Powered by"}),m.jsx("span",{className:"font-medium",children:"BSL Tech. +"})]})]}),XJ="modulepreload",ZJ=function(r){return"/"+r},zb={},xg=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(e.map(l=>{if(l=ZJ(l),l in zb)return;zb[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":XJ,c||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),c)return new Promise((v,p)=>{d.addEventListener("load",v),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};function Ut(r){"@babel/helpers - typeof";return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(r)}var Ai=Uint8Array,qn=Uint16Array,S_=Int32Array,x_=new Ai([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),k_=new Ai([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Wb=new Ai([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dC=function(r,t){for(var e=new qn(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var i=new S_(e[30]),n=1;n<30;++n)for(var a=e[n];a<e[n+1];++a)i[a]=a-e[n]<<5|n;return{b:e,r:i}},hC=dC(x_,2),eX=hC.b,_y=hC.r;eX[28]=258,_y[258]=28;var tX=dC(k_,0),qb=tX.r,wy=new qn(32768);for(var Zt=0;Zt<32768;++Zt){var oo=(Zt&43690)>>1|(Zt&21845)<<1;oo=(oo&52428)>>2|(oo&13107)<<2,oo=(oo&61680)>>4|(oo&3855)<<4,wy[Zt]=((oo&65280)>>8|(oo&255)<<8)>>1}var Ou=function(r,t,e){for(var n=r.length,i=0,a=new qn(t);i<n;++i)r[i]&&++a[r[i]-1];var o=new qn(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(e){s=new qn(1<<t);var l=15-t;for(i=0;i<n;++i)if(r[i])for(var c=i<<4|r[i],u=t-r[i],d=o[r[i]-1]++<<u,v=d|(1<<u)-1;d<=v;++d)s[wy[d]>>l]=c}else for(s=new qn(n),i=0;i<n;++i)r[i]&&(s[i]=wy[o[r[i]-1]++]>>15-r[i]);return s},Ns=new Ai(288);for(var Zt=0;Zt<144;++Zt)Ns[Zt]=8;for(var Zt=144;Zt<256;++Zt)Ns[Zt]=9;for(var Zt=256;Zt<280;++Zt)Ns[Zt]=7;for(var Zt=280;Zt<288;++Zt)Ns[Zt]=8;var vp=new Ai(32);for(var Zt=0;Zt<32;++Zt)vp[Zt]=5;var rX=Ou(Ns,9,0),nX=Ou(vp,5,0),pC=function(r){return(r+7)/8|0},iX=function(r,t,e){return(e==null||e>r.length)&&(e=r.length),new Ai(r.subarray(t,e))},ba=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8},cu=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},kg=function(r,t){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var i=e.length,a=e.slice();if(!i)return{t:mC,l:0};if(i==1){var o=new Ai(e[0].s+1);return o[e[0].s]=1,{t:o,l:1}}e.sort(function(R,U){return R.f-U.f}),e.push({s:-1,f:25001});var s=e[0],l=e[1],c=0,u=1,d=2;for(e[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=i-1;)s=e[e[c].f<e[d].f?c++:d++],l=e[c!=u&&e[c].f<e[d].f?c++:d++],e[u++]={s:-1,f:s.f+l.f,l:s,r:l};for(var v=a[0].s,n=1;n<i;++n)a[n].s>v&&(v=a[n].s);var p=new qn(v+1),y=by(e[u-1],p,0);if(y>t){var n=0,_=0,x=y-t,w=1<<x;for(a.sort(function(U,$){return p[$.s]-p[U.s]||U.f-$.f});n<i;++n){var S=a[n].s;if(p[S]>t)_+=w-(1<<y-p[S]),p[S]=t;else break}for(_>>=x;_>0;){var k=a[n].s;p[k]<t?_-=1<<t-p[k]++-1:++n}for(;n>=0&&_;--n){var T=a[n].s;p[T]==t&&(--p[T],++_)}y=t}return{t:new Ai(p),l:y}},by=function(r,t,e){return r.s==-1?Math.max(by(r.l,t,e+1),by(r.r,t,e+1)):t[r.s]=e},Hb=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new qn(++t),n=0,i=r[0],a=1,o=function(l){e[n++]=l},s=1;s<=t;++s)if(r[s]==i&&s!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=r[s]}return{c:e.subarray(0,n),n:t}},lu=function(r,t){for(var e=0,n=0;n<t.length;++n)e+=r[n]*t[n];return e},vC=function(r,t,e){var n=e.length,i=pC(t+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var a=0;a<n;++a)r[i+a+4]=e[a];return(i+4+n)*8},Gb=function(r,t,e,n,i,a,o,s,l,c,u){ba(t,u++,e),++i[256];for(var d=kg(i,15),v=d.t,p=d.l,y=kg(a,15),_=y.t,x=y.l,w=Hb(v),S=w.c,k=w.n,T=Hb(_),R=T.c,U=T.n,$=new qn(19),F=0;F<S.length;++F)++$[S[F]&31];for(var F=0;F<R.length;++F)++$[R[F]&31];for(var M=kg($,7),Y=M.t,O=M.l,N=19;N>4&&!Y[Wb[N-1]];--N);var W=c+5<<3,j=lu(i,Ns)+lu(a,vp)+o,Z=lu(i,v)+lu(a,_)+o+14+3*N+lu($,Y)+2*$[16]+3*$[17]+7*$[18];if(l>=0&&W<=j&&W<=Z)return vC(t,u,r.subarray(l,l+c));var X,oe,q,re;if(ba(t,u,1+(Z<j)),u+=2,Z<j){X=Ou(v,p,0),oe=v,q=Ou(_,x,0),re=_;var fe=Ou(Y,O,0);ba(t,u,k-257),ba(t,u+5,U-1),ba(t,u+10,N-4),u+=14;for(var F=0;F<N;++F)ba(t,u+3*F,Y[Wb[F]]);u+=3*N;for(var ne=[S,R],E=0;E<2;++E)for(var z=ne[E],F=0;F<z.length;++F){var H=z[F]&31;ba(t,u,fe[H]),u+=Y[H],H>15&&(ba(t,u,z[F]>>5&127),u+=z[F]>>12)}}else X=rX,oe=Ns,q=nX,re=vp;for(var F=0;F<s;++F){var ee=n[F];if(ee>255){var H=ee>>18&31;cu(t,u,X[H+257]),u+=oe[H+257],H>7&&(ba(t,u,ee>>23&31),u+=x_[H]);var ae=ee&31;cu(t,u,q[ae]),u+=re[ae],ae>3&&(cu(t,u,ee>>5&8191),u+=k_[ae])}else cu(t,u,X[ee]),u+=oe[ee]}return cu(t,u,X[256]),u+oe[256]},aX=new S_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),mC=new Ai(0),oX=function(r,t,e,n,i,a){var o=a.z||r.length,s=new Ai(n+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(n,s.length-i),c=a.l,u=(a.r||0)&7;if(t){u&&(l[0]=a.r>>3);for(var d=aX[t-1],v=d>>13,p=d&8191,y=(1<<e)-1,_=a.p||new qn(32768),x=a.h||new qn(y+1),w=Math.ceil(e/3),S=2*w,k=function(ge){return(r[ge]^r[ge+1]<<w^r[ge+2]<<S)&y},T=new S_(25e3),R=new qn(288),U=new qn(32),$=0,F=0,M=a.i||0,Y=0,O=a.w||0,N=0;M+2<o;++M){var W=k(M),j=M&32767,Z=x[W];if(_[j]=Z,x[W]=j,O<=M){var X=o-M;if(($>7e3||Y>24576)&&(X>423||!c)){u=Gb(r,l,0,T,R,U,F,Y,N,M-N,u),Y=$=F=0,N=M;for(var oe=0;oe<286;++oe)R[oe]=0;for(var oe=0;oe<30;++oe)U[oe]=0}var q=2,re=0,fe=p,ne=j-Z&32767;if(X>2&&W==k(M-ne))for(var E=Math.min(v,X)-1,z=Math.min(32767,M),H=Math.min(258,X);ne<=z&&--fe&&j!=Z;){if(r[M+q]==r[M+q-ne]){for(var ee=0;ee<H&&r[M+ee]==r[M+ee-ne];++ee);if(ee>q){if(q=ee,re=ne,ee>E)break;for(var ae=Math.min(ne,ee-2),ue=0,oe=0;oe<ae;++oe){var _e=M-ne+oe&32767,me=_[_e],be=_e-me&32767;be>ue&&(ue=be,Z=_e)}}}j=Z,Z=_[j],ne+=j-Z&32767}if(re){T[Y++]=268435456|_y[q]<<18|qb[re];var le=_y[q]&31,Pe=qb[re]&31;F+=x_[le]+k_[Pe],++R[257+le],++U[Pe],O=M+q,++$}else T[Y++]=r[M],++R[r[M]]}}for(M=Math.max(M,O);M<o;++M)T[Y++]=r[M],++R[r[M]];u=Gb(r,l,c,T,R,U,F,Y,N,M-N,u),c||(a.r=u&7|l[u/8|0]<<3,u-=7,a.h=x,a.p=_,a.i=M,a.w=O)}else{for(var M=a.w||0;M<o+c;M+=65535){var Ae=M+65535;Ae>=o&&(l[u/8|0]=c,Ae=o),u=vC(l,u+1,r.subarray(M,Ae))}a.i=o}return iX(s,0,n+pC(u)+i)},gC=function(){var r=1,t=0;return{p:function(e){for(var n=r,i=t,a=e.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=n+=e[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,t=i},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},sX=function(r,t,e,n,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new Ai(a.length+r.length);o.set(a),o.set(r,a.length),r=o,i.w=a.length}return oX(r,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,e,n,i)},yC=function(r,t,e){for(;e;++t)r[t]=e,e>>>=8},cX=function(r,t){var e=t.level,n=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=n<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var i=gC();i.p(t.dictionary),yC(r,2,i.d())}};function Sy(r,t){t||(t={});var e=gC();e.p(r);var n=sX(r,t,t.dictionary?6:2,4);return cX(n,t),yC(n,n.length-4,e.d()),n}var lX=typeof TextDecoder<"u"&&new TextDecoder,uX=0;try{lX.decode(mC,{stream:!0}),uX=1}catch{}function fX(r){if(Array.isArray(r))return r}function dX(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(e=e.call(r)).next,t!==0)for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Kb(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function hX(r,t){if(r){if(typeof r=="string")return Kb(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Kb(r,t):void 0}}function pX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qb(r,t){return fX(r)||dX(r,t)||hX(r,t)||pX()}function Yb(r,t="utf8"){return new TextDecoder(t).decode(r)}const vX=new TextEncoder;function mX(r){return vX.encode(r)}const gX=1024*8,yX=(()=>{const r=new Uint8Array(4),t=new Uint32Array(r.buffer);return!((t[0]=1)&r[0])})(),Pg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class P_{constructor(t=gX,e={}){jt(this,"buffer");jt(this,"byteLength");jt(this,"byteOffset");jt(this,"length");jt(this,"offset");jt(this,"lastWrittenByte");jt(this,"littleEndian");jt(this,"_data");jt(this,"_mark");jt(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0,a=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof P_)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const n=Pg[e].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===yX&&e!=="uint8"&&e!=="int8"){const s=new Uint8Array(this.buffer.slice(i,i+n));s.reverse();const l=new Pg[e](s.buffer);return this.offset+=n,l.reverse(),l}const o=new Pg[e](a);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let n=0;n<t;n++)e+=this.readChar();return e}readUtf8(t=1){return Yb(this.readBytes(t))}decodeText(t=1,e="utf8"){return Yb(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(mX(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function _l(r){let t=r.length;for(;--t>=0;)r[t]=0}const _X=3,wX=258,_C=29,bX=256,SX=bX+1+_C,wC=30,xX=512,kX=new Array((SX+2)*2);_l(kX);const PX=new Array(wC*2);_l(PX);const TX=new Array(xX);_l(TX);const EX=new Array(wX-_X+1);_l(EX);const CX=new Array(_C);_l(CX);const LX=new Array(wC);_l(LX);const OX=(r,t,e,n)=>{let i=r&65535|0,a=r>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do i=i+t[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var xy=OX;const AX=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},NX=new Uint32Array(AX()),RX=(r,t,e,n)=>{const i=NX,a=n+e;r^=-1;for(let o=n;o<a;o++)r=r>>>8^i[(r^t[o])&255];return r^-1};var qi=RX,ky={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bC={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const jX=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var IX=function(r){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)jX(e,n)&&(r[n]=e[n])}}return r},MX=r=>{let t=0;for(let n=0,i=r.length;n<i;n++)t+=r[n].length;const e=new Uint8Array(t);for(let n=0,i=0,a=r.length;n<a;n++){let o=r[n];e.set(o,i),i+=o.length}return e},SC={assign:IX,flattenChunks:MX};let xC=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{xC=!1}const rf=new Uint8Array(256);for(let r=0;r<256;r++)rf[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;rf[254]=rf[254]=1;var DX=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,i,a,o=r.length,s=0;for(i=0;i<o;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),e<128?t[a++]=e:e<2048?(t[a++]=192|e>>>6,t[a++]=128|e&63):e<65536?(t[a++]=224|e>>>12,t[a++]=128|e>>>6&63,t[a++]=128|e&63):(t[a++]=240|e>>>18,t[a++]=128|e>>>12&63,t[a++]=128|e>>>6&63,t[a++]=128|e&63);return t};const FX=(r,t)=>{if(t<65534&&r.subarray&&xC)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e};var BX=(r,t)=>{const e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,i;const a=new Array(e*2);for(i=0,n=0;n<e;){let o=r[n++];if(o<128){a[i++]=o;continue}let s=rf[o];if(s>4){a[i++]=65533,n+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&n<e;)o=o<<6|r[n++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return FX(a,i)},UX=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+rf[r[e]]>t?e:t},Py={string2buf:DX,buf2string:BX,utf8border:UX};function $X(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var VX=$X;const Qd=16209,zX=16191;var WX=function(t,e){let n,i,a,o,s,l,c,u,d,v,p,y,_,x,w,S,k,T,R,U,$,F,M,Y;const O=t.state;n=t.next_in,M=t.input,i=n+(t.avail_in-5),a=t.next_out,Y=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),l=O.dmax,c=O.wsize,u=O.whave,d=O.wnext,v=O.window,p=O.hold,y=O.bits,_=O.lencode,x=O.distcode,w=(1<<O.lenbits)-1,S=(1<<O.distbits)-1;e:do{y<15&&(p+=M[n++]<<y,y+=8,p+=M[n++]<<y,y+=8),k=_[p&w];t:for(;;){if(T=k>>>24,p>>>=T,y-=T,T=k>>>16&255,T===0)Y[a++]=k&65535;else if(T&16){R=k&65535,T&=15,T&&(y<T&&(p+=M[n++]<<y,y+=8),R+=p&(1<<T)-1,p>>>=T,y-=T),y<15&&(p+=M[n++]<<y,y+=8,p+=M[n++]<<y,y+=8),k=x[p&S];r:for(;;){if(T=k>>>24,p>>>=T,y-=T,T=k>>>16&255,T&16){if(U=k&65535,T&=15,y<T&&(p+=M[n++]<<y,y+=8,y<T&&(p+=M[n++]<<y,y+=8)),U+=p&(1<<T)-1,U>l){t.msg="invalid distance too far back",O.mode=Qd;break e}if(p>>>=T,y-=T,T=a-o,U>T){if(T=U-T,T>u&&O.sane){t.msg="invalid distance too far back",O.mode=Qd;break e}if($=0,F=v,d===0){if($+=c-T,T<R){R-=T;do Y[a++]=v[$++];while(--T);$=a-U,F=Y}}else if(d<T){if($+=c+d-T,T-=d,T<R){R-=T;do Y[a++]=v[$++];while(--T);if($=0,d<R){T=d,R-=T;do Y[a++]=v[$++];while(--T);$=a-U,F=Y}}}else if($+=d-T,T<R){R-=T;do Y[a++]=v[$++];while(--T);$=a-U,F=Y}for(;R>2;)Y[a++]=F[$++],Y[a++]=F[$++],Y[a++]=F[$++],R-=3;R&&(Y[a++]=F[$++],R>1&&(Y[a++]=F[$++]))}else{$=a-U;do Y[a++]=Y[$++],Y[a++]=Y[$++],Y[a++]=Y[$++],R-=3;while(R>2);R&&(Y[a++]=Y[$++],R>1&&(Y[a++]=Y[$++]))}}else if(T&64){t.msg="invalid distance code",O.mode=Qd;break e}else{k=x[(k&65535)+(p&(1<<T)-1)];continue r}break}}else if(T&64)if(T&32){O.mode=zX;break e}else{t.msg="invalid literal/length code",O.mode=Qd;break e}else{k=_[(k&65535)+(p&(1<<T)-1)];continue t}break}}while(n<i&&a<s);R=y>>3,n-=R,y-=R<<3,p&=(1<<y)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=a<s?257+(s-a):257-(a-s),O.hold=p,O.bits=y};const lc=15,Jb=852,Xb=592,Zb=0,Tg=1,eS=2,qX=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),HX=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),GX=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),KX=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),QX=(r,t,e,n,i,a,o,s)=>{const l=s.bits;let c=0,u=0,d=0,v=0,p=0,y=0,_=0,x=0,w=0,S=0,k,T,R,U,$,F=null,M;const Y=new Uint16Array(lc+1),O=new Uint16Array(lc+1);let N=null,W,j,Z;for(c=0;c<=lc;c++)Y[c]=0;for(u=0;u<n;u++)Y[t[e+u]]++;for(p=l,v=lc;v>=1&&Y[v]===0;v--);if(p>v&&(p=v),v===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(d=1;d<v&&Y[d]===0;d++);for(p<d&&(p=d),x=1,c=1;c<=lc;c++)if(x<<=1,x-=Y[c],x<0)return-1;if(x>0&&(r===Zb||v!==1))return-1;for(O[1]=0,c=1;c<lc;c++)O[c+1]=O[c]+Y[c];for(u=0;u<n;u++)t[e+u]!==0&&(o[O[t[e+u]]++]=u);if(r===Zb?(F=N=o,M=20):r===Tg?(F=qX,N=HX,M=257):(F=GX,N=KX,M=0),S=0,u=0,c=d,$=a,y=p,_=0,R=-1,w=1<<p,U=w-1,r===Tg&&w>Jb||r===eS&&w>Xb)return 1;for(;;){W=c-_,o[u]+1<M?(j=0,Z=o[u]):o[u]>=M?(j=N[o[u]-M],Z=F[o[u]-M]):(j=96,Z=0),k=1<<c-_,T=1<<y,d=T;do T-=k,i[$+(S>>_)+T]=W<<24|j<<16|Z|0;while(T!==0);for(k=1<<c-1;S&k;)k>>=1;if(k!==0?(S&=k-1,S+=k):S=0,u++,--Y[c]===0){if(c===v)break;c=t[e+o[u]]}if(c>p&&(S&U)!==R){for(_===0&&(_=p),$+=d,y=c-_,x=1<<y;y+_<v&&(x-=Y[y+_],!(x<=0));)y++,x<<=1;if(w+=1<<y,r===Tg&&w>Jb||r===eS&&w>Xb)return 1;R=S&U,i[R]=p<<24|y<<16|$-a|0}}return S!==0&&(i[$+S]=c-_<<24|64<<16|0),s.bits=p,0};var Au=QX;const YX=0,kC=1,PC=2,{Z_FINISH:tS,Z_BLOCK:JX,Z_TREES:Yd,Z_OK:Rs,Z_STREAM_END:XX,Z_NEED_DICT:ZX,Z_STREAM_ERROR:hi,Z_DATA_ERROR:TC,Z_MEM_ERROR:EC,Z_BUF_ERROR:eZ,Z_DEFLATED:rS}=bC,Ev=16180,nS=16181,iS=16182,aS=16183,oS=16184,sS=16185,cS=16186,lS=16187,uS=16188,fS=16189,mp=16190,Sa=16191,Eg=16192,dS=16193,Cg=16194,hS=16195,pS=16196,vS=16197,mS=16198,Jd=16199,Xd=16200,gS=16201,yS=16202,_S=16203,wS=16204,bS=16205,Lg=16206,SS=16207,xS=16208,tr=16209,CC=16210,LC=16211,tZ=852,rZ=592,nZ=15,iZ=nZ,kS=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function aZ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Vs=r=>{if(!r)return 1;const t=r.state;return!t||t.strm!==r||t.mode<Ev||t.mode>LC?1:0},OC=r=>{if(Vs(r))return hi;const t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=Ev,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(tZ),t.distcode=t.distdyn=new Int32Array(rZ),t.sane=1,t.back=-1,Rs},AC=r=>{if(Vs(r))return hi;const t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,OC(r)},NC=(r,t)=>{let e;if(Vs(r))return hi;const n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?hi:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,AC(r))},RC=(r,t)=>{if(!r)return hi;const e=new aZ;r.state=e,e.strm=r,e.window=null,e.mode=Ev;const n=NC(r,t);return n!==Rs&&(r.state=null),n},oZ=r=>RC(r,iZ);let PS=!0,Og,Ag;const sZ=r=>{if(PS){Og=new Int32Array(512),Ag=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Au(kC,r.lens,0,288,Og,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Au(PC,r.lens,0,32,Ag,0,r.work,{bits:5}),PS=!1}r.lencode=Og,r.lenbits=9,r.distcode=Ag,r.distbits=5},jC=(r,t,e,n)=>{let i;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(e-n,e-n+i),a.wnext),n-=i,n?(a.window.set(t.subarray(e-n,e),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},cZ=(r,t)=>{let e,n,i,a,o,s,l,c,u,d,v,p,y,_,x=0,w,S,k,T,R,U,$,F;const M=new Uint8Array(4);let Y,O;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Vs(r)||!r.output||!r.input&&r.avail_in!==0)return hi;e=r.state,e.mode===Sa&&(e.mode=Eg),o=r.next_out,i=r.output,l=r.avail_out,a=r.next_in,n=r.input,s=r.avail_in,c=e.hold,u=e.bits,d=s,v=l,F=Rs;e:for(;;)switch(e.mode){case Ev:if(e.wrap===0){e.mode=Eg;break}for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,M[0]=c&255,M[1]=c>>>8&255,e.check=qi(e.check,M,2,0),c=0,u=0,e.mode=nS;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){r.msg="incorrect header check",e.mode=tr;break}if((c&15)!==rS){r.msg="unknown compression method",e.mode=tr;break}if(c>>>=4,u-=4,$=(c&15)+8,e.wbits===0&&(e.wbits=$),$>15||$>e.wbits){r.msg="invalid window size",e.mode=tr;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=c&512?fS:Sa,c=0,u=0;break;case nS:for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.flags=c,(e.flags&255)!==rS){r.msg="unknown compression method",e.mode=tr;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=tr;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,e.check=qi(e.check,M,2,0)),c=0,u=0,e.mode=iS;case iS:for(;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,M[2]=c>>>16&255,M[3]=c>>>24&255,e.check=qi(e.check,M,4,0)),c=0,u=0,e.mode=aS;case aS:for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,e.check=qi(e.check,M,2,0)),c=0,u=0,e.mode=oS;case oS:if(e.flags&1024){for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,e.check=qi(e.check,M,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=sS;case sS:if(e.flags&1024&&(p=e.length,p>s&&(p=s),p&&(e.head&&($=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(a,a+p),$)),e.flags&512&&e.wrap&4&&(e.check=qi(e.check,n,p,a)),s-=p,a+=p,e.length-=p),e.length))break e;e.length=0,e.mode=cS;case cS:if(e.flags&2048){if(s===0)break e;p=0;do $=n[a+p++],e.head&&$&&e.length<65536&&(e.head.name+=String.fromCharCode($));while($&&p<s);if(e.flags&512&&e.wrap&4&&(e.check=qi(e.check,n,p,a)),s-=p,a+=p,$)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=lS;case lS:if(e.flags&4096){if(s===0)break e;p=0;do $=n[a+p++],e.head&&$&&e.length<65536&&(e.head.comment+=String.fromCharCode($));while($&&p<s);if(e.flags&512&&e.wrap&4&&(e.check=qi(e.check,n,p,a)),s-=p,a+=p,$)break e}else e.head&&(e.head.comment=null);e.mode=uS;case uS:if(e.flags&512){for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.wrap&4&&c!==(e.check&65535)){r.msg="header crc mismatch",e.mode=tr;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=Sa;break;case fS:for(;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}r.adler=e.check=kS(c),c=0,u=0,e.mode=mp;case mp:if(e.havedict===0)return r.next_out=o,r.avail_out=l,r.next_in=a,r.avail_in=s,e.hold=c,e.bits=u,ZX;r.adler=e.check=1,e.mode=Sa;case Sa:if(t===JX||t===Yd)break e;case Eg:if(e.last){c>>>=u&7,u-=u&7,e.mode=Lg;break}for(;u<3;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}switch(e.last=c&1,c>>>=1,u-=1,c&3){case 0:e.mode=dS;break;case 1:if(sZ(e),e.mode=Jd,t===Yd){c>>>=2,u-=2;break e}break;case 2:e.mode=pS;break;case 3:r.msg="invalid block type",e.mode=tr}c>>>=2,u-=2;break;case dS:for(c>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){r.msg="invalid stored block lengths",e.mode=tr;break}if(e.length=c&65535,c=0,u=0,e.mode=Cg,t===Yd)break e;case Cg:e.mode=hS;case hS:if(p=e.length,p){if(p>s&&(p=s),p>l&&(p=l),p===0)break e;i.set(n.subarray(a,a+p),o),s-=p,a+=p,l-=p,o+=p,e.length-=p;break}e.mode=Sa;break;case pS:for(;u<14;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.nlen=(c&31)+257,c>>>=5,u-=5,e.ndist=(c&31)+1,c>>>=5,u-=5,e.ncode=(c&15)+4,c>>>=4,u-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=tr;break}e.have=0,e.mode=vS;case vS:for(;e.have<e.ncode;){for(;u<3;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.lens[N[e.have++]]=c&7,c>>>=3,u-=3}for(;e.have<19;)e.lens[N[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,Y={bits:e.lenbits},F=Au(YX,e.lens,0,19,e.lencode,0,e.work,Y),e.lenbits=Y.bits,F){r.msg="invalid code lengths set",e.mode=tr;break}e.have=0,e.mode=mS;case mS:for(;e.have<e.nlen+e.ndist;){for(;x=e.lencode[c&(1<<e.lenbits)-1],w=x>>>24,S=x>>>16&255,k=x&65535,!(w<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(k<16)c>>>=w,u-=w,e.lens[e.have++]=k;else{if(k===16){for(O=w+2;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(c>>>=w,u-=w,e.have===0){r.msg="invalid bit length repeat",e.mode=tr;break}$=e.lens[e.have-1],p=3+(c&3),c>>>=2,u-=2}else if(k===17){for(O=w+3;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=w,u-=w,$=0,p=3+(c&7),c>>>=3,u-=3}else{for(O=w+7;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=w,u-=w,$=0,p=11+(c&127),c>>>=7,u-=7}if(e.have+p>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=tr;break}for(;p--;)e.lens[e.have++]=$}}if(e.mode===tr)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=tr;break}if(e.lenbits=9,Y={bits:e.lenbits},F=Au(kC,e.lens,0,e.nlen,e.lencode,0,e.work,Y),e.lenbits=Y.bits,F){r.msg="invalid literal/lengths set",e.mode=tr;break}if(e.distbits=6,e.distcode=e.distdyn,Y={bits:e.distbits},F=Au(PC,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,Y),e.distbits=Y.bits,F){r.msg="invalid distances set",e.mode=tr;break}if(e.mode=Jd,t===Yd)break e;case Jd:e.mode=Xd;case Xd:if(s>=6&&l>=258){r.next_out=o,r.avail_out=l,r.next_in=a,r.avail_in=s,e.hold=c,e.bits=u,WX(r,v),o=r.next_out,i=r.output,l=r.avail_out,a=r.next_in,n=r.input,s=r.avail_in,c=e.hold,u=e.bits,e.mode===Sa&&(e.back=-1);break}for(e.back=0;x=e.lencode[c&(1<<e.lenbits)-1],w=x>>>24,S=x>>>16&255,k=x&65535,!(w<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(S&&!(S&240)){for(T=w,R=S,U=k;x=e.lencode[U+((c&(1<<T+R)-1)>>T)],w=x>>>24,S=x>>>16&255,k=x&65535,!(T+w<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=T,u-=T,e.back+=T}if(c>>>=w,u-=w,e.back+=w,e.length=k,S===0){e.mode=bS;break}if(S&32){e.back=-1,e.mode=Sa;break}if(S&64){r.msg="invalid literal/length code",e.mode=tr;break}e.extra=S&15,e.mode=gS;case gS:if(e.extra){for(O=e.extra;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=yS;case yS:for(;x=e.distcode[c&(1<<e.distbits)-1],w=x>>>24,S=x>>>16&255,k=x&65535,!(w<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(!(S&240)){for(T=w,R=S,U=k;x=e.distcode[U+((c&(1<<T+R)-1)>>T)],w=x>>>24,S=x>>>16&255,k=x&65535,!(T+w<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=T,u-=T,e.back+=T}if(c>>>=w,u-=w,e.back+=w,S&64){r.msg="invalid distance code",e.mode=tr;break}e.offset=k,e.extra=S&15,e.mode=_S;case _S:if(e.extra){for(O=e.extra;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=tr;break}e.mode=wS;case wS:if(l===0)break e;if(p=v-l,e.offset>p){if(p=e.offset-p,p>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=tr;break}p>e.wnext?(p-=e.wnext,y=e.wsize-p):y=e.wnext-p,p>e.length&&(p=e.length),_=e.window}else _=i,y=o-e.offset,p=e.length;p>l&&(p=l),l-=p,e.length-=p;do i[o++]=_[y++];while(--p);e.length===0&&(e.mode=Xd);break;case bS:if(l===0)break e;i[o++]=e.length,l--,e.mode=Xd;break;case Lg:if(e.wrap){for(;u<32;){if(s===0)break e;s--,c|=n[a++]<<u,u+=8}if(v-=l,r.total_out+=v,e.total+=v,e.wrap&4&&v&&(r.adler=e.check=e.flags?qi(e.check,i,v,o-v):xy(e.check,i,v,o-v)),v=l,e.wrap&4&&(e.flags?c:kS(c))!==e.check){r.msg="incorrect data check",e.mode=tr;break}c=0,u=0}e.mode=SS;case SS:if(e.wrap&&e.flags){for(;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.wrap&4&&c!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=tr;break}c=0,u=0}e.mode=xS;case xS:F=XX;break e;case tr:F=TC;break e;case CC:return EC;case LC:default:return hi}return r.next_out=o,r.avail_out=l,r.next_in=a,r.avail_in=s,e.hold=c,e.bits=u,(e.wsize||v!==r.avail_out&&e.mode<tr&&(e.mode<Lg||t!==tS))&&jC(r,r.output,r.next_out,v-r.avail_out),d-=r.avail_in,v-=r.avail_out,r.total_in+=d,r.total_out+=v,e.total+=v,e.wrap&4&&v&&(r.adler=e.check=e.flags?qi(e.check,i,v,r.next_out-v):xy(e.check,i,v,r.next_out-v)),r.data_type=e.bits+(e.last?64:0)+(e.mode===Sa?128:0)+(e.mode===Jd||e.mode===Cg?256:0),(d===0&&v===0||t===tS)&&F===Rs&&(F=eZ),F},lZ=r=>{if(Vs(r))return hi;let t=r.state;return t.window&&(t.window=null),r.state=null,Rs},uZ=(r,t)=>{if(Vs(r))return hi;const e=r.state;return e.wrap&2?(e.head=t,t.done=!1,Rs):hi},fZ=(r,t)=>{const e=t.length;let n,i,a;return Vs(r)||(n=r.state,n.wrap!==0&&n.mode!==mp)?hi:n.mode===mp&&(i=1,i=xy(i,t,e,0),i!==n.check)?TC:(a=jC(r,t,e,e),a?(n.mode=CC,EC):(n.havedict=1,Rs))};var dZ=AC,hZ=NC,pZ=OC,vZ=oZ,mZ=RC,gZ=cZ,yZ=lZ,_Z=uZ,wZ=fZ,bZ="pako inflate (from Nodeca project)",Ta={inflateReset:dZ,inflateReset2:hZ,inflateResetKeep:pZ,inflateInit:vZ,inflateInit2:mZ,inflate:gZ,inflateEnd:yZ,inflateGetHeader:_Z,inflateSetDictionary:wZ,inflateInfo:bZ};function SZ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var xZ=SZ;const IC=Object.prototype.toString,{Z_NO_FLUSH:kZ,Z_FINISH:PZ,Z_OK:nf,Z_STREAM_END:Ng,Z_NEED_DICT:Rg,Z_STREAM_ERROR:TZ,Z_DATA_ERROR:TS,Z_MEM_ERROR:EZ}=bC;function Tf(r){this.options=SC.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new VX,this.strm.avail_out=0;let e=Ta.inflateInit2(this.strm,t.windowBits);if(e!==nf)throw new Error(ky[e]);if(this.header=new xZ,Ta.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Py.string2buf(t.dictionary):IC.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Ta.inflateSetDictionary(this.strm,t.dictionary),e!==nf)))throw new Error(ky[e])}Tf.prototype.push=function(r,t){const e=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?PZ:kZ,IC.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),a=Ta.inflate(e,o),a===Rg&&i&&(a=Ta.inflateSetDictionary(e,i),a===nf?a=Ta.inflate(e,o):a===TS&&(a=Rg));e.avail_in>0&&a===Ng&&e.state.wrap>0&&r[e.next_in]!==0;)Ta.inflateReset(e),a=Ta.inflate(e,o);switch(a){case TZ:case TS:case Rg:case EZ:return this.onEnd(a),this.ended=!0,!1}if(s=e.avail_out,e.next_out&&(e.avail_out===0||a===Ng))if(this.options.to==="string"){let l=Py.utf8border(e.output,e.next_out),c=e.next_out-l,u=Py.buf2string(e.output,l);e.next_out=c,e.avail_out=n-c,c&&e.output.set(e.output.subarray(l,l+c),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(a===nf&&s===0)){if(a===Ng)return a=Ta.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Tf.prototype.onData=function(r){this.chunks.push(r)};Tf.prototype.onEnd=function(r){r===nf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=SC.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function CZ(r,t){const e=new Tf(t);if(e.push(r),e.err)throw e.msg||ky[e.err];return e.result}var LZ=Tf,OZ=CZ,AZ={Inflate:LZ,inflate:OZ};const{Inflate:NZ,inflate:RZ}=AZ;var ES=NZ,jZ=RZ;const MC=[];for(let r=0;r<256;r++){let t=r;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;MC[r]=t}const CS=4294967295;function IZ(r,t,e){let n=r;for(let i=0;i<e;i++)n=MC[(n^t[i])&255]^n>>>8;return n}function MZ(r,t){return(IZ(CS,r,t)^CS)>>>0}function LS(r,t,e){const n=r.readUint32(),i=MZ(new Uint8Array(r.buffer,r.byteOffset+r.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${e}. Expected ${n}, found ${i}`)}function DC(r,t,e){for(let n=0;n<e;n++)t[n]=r[n]}function FC(r,t,e,n){let i=0;for(;i<n;i++)t[i]=r[i];for(;i<e;i++)t[i]=r[i]+t[i-n]&255}function BC(r,t,e,n){let i=0;if(e.length===0)for(;i<n;i++)t[i]=r[i];else for(;i<n;i++)t[i]=r[i]+e[i]&255}function UC(r,t,e,n,i){let a=0;if(e.length===0){for(;a<i;a++)t[a]=r[a];for(;a<n;a++)t[a]=r[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=r[a]+(e[a]>>1)&255;for(;a<n;a++)t[a]=r[a]+(t[a-i]+e[a]>>1)&255}}function $C(r,t,e,n,i){let a=0;if(e.length===0){for(;a<i;a++)t[a]=r[a];for(;a<n;a++)t[a]=r[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=r[a]+e[a]&255;for(;a<n;a++)t[a]=r[a]+DZ(t[a-i],e[a],e[a-i])&255}}function DZ(r,t,e){const n=r+t-e,i=Math.abs(n-r),a=Math.abs(n-t),o=Math.abs(n-e);return i<=a&&i<=o?r:a<=o?t:e}function FZ(r,t,e,n,i,a){switch(r){case 0:DC(t,e,i);break;case 1:FC(t,e,i,a);break;case 2:BC(t,e,n,i);break;case 3:UC(t,e,n,i,a);break;case 4:$C(t,e,n,i,a);break;default:throw new Error(`Unsupported filter: ${r}`)}}const BZ=new Uint16Array([255]),UZ=new Uint8Array(BZ.buffer),$Z=UZ[0]===255;function VZ(r){const{data:t,width:e,height:n,channels:i,depth:a}=r,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],s=Math.ceil(a/8)*i,l=new Uint8Array(n*e*s);let c=0;for(let u=0;u<7;u++){const d=o[u],v=Math.ceil((e-d.x)/d.xStep),p=Math.ceil((n-d.y)/d.yStep);if(v<=0||p<=0)continue;const y=v*s,_=new Uint8Array(y);for(let x=0;x<p;x++){const w=t[c++],S=t.subarray(c,c+y);c+=y;const k=new Uint8Array(y);FZ(w,S,k,_,y,s),_.set(k);for(let T=0;T<v;T++){const R=d.x+T*d.xStep,U=d.y+x*d.yStep;if(!(R>=e||U>=n))for(let $=0;$<s;$++)l[(U*e+R)*s+$]=k[T*s+$]}}}if(a===16){const u=new Uint16Array(l.buffer);if($Z)for(let d=0;d<u.length;d++)u[d]=zZ(u[d]);return u}else return l}function zZ(r){return(r&255)<<8|r>>8&255}const WZ=new Uint16Array([255]),qZ=new Uint8Array(WZ.buffer),HZ=qZ[0]===255,GZ=new Uint8Array(0);function OS(r){const{data:t,width:e,height:n,channels:i,depth:a}=r,o=Math.ceil(a/8)*i,s=Math.ceil(a/8*i*e),l=new Uint8Array(n*s);let c=GZ,u=0,d,v;for(let p=0;p<n;p++){switch(d=t.subarray(u+1,u+1+s),v=l.subarray(p*s,(p+1)*s),t[u]){case 0:DC(d,v,s);break;case 1:FC(d,v,s,o);break;case 2:BC(d,v,c,s);break;case 3:UC(d,v,c,s,o);break;case 4:$C(d,v,c,s,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}c=v,u+=s+1}if(a===16){const p=new Uint16Array(l.buffer);if(HZ)for(let y=0;y<p.length;y++)p[y]=KZ(p[y]);return p}else return l}function KZ(r){return(r&255)<<8|r>>8&255}const Ch=Uint8Array.of(137,80,78,71,13,10,26,10);function AS(r){if(!QZ(r.readBytes(Ch.length)))throw new Error("wrong PNG signature")}function QZ(r){if(r.length<Ch.length)return!1;for(let t=0;t<Ch.length;t++)if(r[t]!==Ch[t])return!1;return!0}const YZ="tEXt",JZ=0,VC=new TextDecoder("latin1");function XZ(r){if(eee(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const ZZ=/^[\u0000-\u00FF]*$/;function eee(r){if(!ZZ.test(r))throw new Error("invalid latin1 text")}function tee(r,t,e){const n=zC(t);r[n]=ree(t,e-n.length-1)}function zC(r){for(r.mark();r.readByte()!==JZ;);const t=r.offset;r.reset();const e=VC.decode(r.readBytes(t-r.offset-1));return r.skip(1),XZ(e),e}function ree(r,t){return VC.decode(r.readBytes(t))}const $n={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},jg={UNKNOWN:-1,DEFLATE:0},NS={UNKNOWN:-1,ADAPTIVE:0},Ig={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Zd={NONE:0,BACKGROUND:1,PREVIOUS:2},Mg={SOURCE:0,OVER:1};class nee extends P_{constructor(e,n={}){super(e);jt(this,"_checkCrc");jt(this,"_inflator");jt(this,"_png");jt(this,"_apng");jt(this,"_end");jt(this,"_hasPalette");jt(this,"_palette");jt(this,"_hasTransparency");jt(this,"_transparency");jt(this,"_compressionMethod");jt(this,"_filterMethod");jt(this,"_interlaceMethod");jt(this,"_colorType");jt(this,"_isAnimated");jt(this,"_numberOfFrames");jt(this,"_numberOfPlays");jt(this,"_frames");jt(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new ES,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=jg.UNKNOWN,this._filterMethod=NS.UNKNOWN,this._interlaceMethod=Ig.UNKNOWN,this._colorType=$n.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(AS(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(AS(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case YZ:tee(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?LS(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=i+e;break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?LS(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=iee(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case $n.GREYSCALE:i=1;break;case $n.TRUECOLOUR:i=3;break;case $n.INDEXED_COLOUR:i=1;break;case $n.GREYSCALE_ALPHA:i=2;break;case $n.TRUECOLOUR_ALPHA:i=4;break;case $n.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==jg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case $n.GREYSCALE:case $n.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case $n.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case $n.UNKNOWN:case $n.GREYSCALE_ALPHA:case $n.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=zC(this),i=this.readUint8();if(i!==jg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:jZ(a)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:e,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(e);if(i){if(i.data=OS({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,i){switch(e.disposeOp){case Zd.NONE:break;case Zd.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const s=(a*e.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[s+l]=0}break;case Zd.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const i=1<<this._png.depth,a=(o,s)=>{const l=((o+n.yOffset)*this._png.width+n.xOffset+s)*this._png.channels,c=(o*n.width+s)*this._png.channels;return{index:l,frameIndex:c}};switch(n.blendOp){case Mg.SOURCE:for(let o=0;o<n.height;o++)for(let s=0;s<n.width;s++){const{index:l,frameIndex:c}=a(o,s);for(let u=0;u<this._png.channels;u++)e.data[l+u]=n.data[c+u]}break;case Mg.OVER:for(let o=0;o<n.height;o++)for(let s=0;s<n.width;s++){const{index:l,frameIndex:c}=a(o,s);for(let u=0;u<this._png.channels;u++){const d=n.data[c+this._png.channels-1]/i,v=u%(this._png.channels-1)===0?1:n.data[c+u],p=Math.floor(d*v+(1-d)*e.data[l+u]);e.data[l+u]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==NS.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Ig.NO_INTERLACE)this._png.data=OS({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Ig.ADAM7)this._png.data=VZ({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Zd.NONE,blendOp:Mg.SOURCE,data:e}),this._inflator=new ES,this._writingDataChunks=!1}}function iee(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var RS;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(RS||(RS={}));function aee(r,t){return new nee(r,t).decode()}var st=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Dg(){st.console&&typeof st.console.log=="function"&&st.console.log.apply(st.console,arguments)}var Gt={log:Dg,warn:function(r){st.console&&(typeof st.console.warn=="function"?st.console.warn.apply(st.console,arguments):Dg.call(null,arguments))},error:function(r){st.console&&(typeof st.console.error=="function"?st.console.error.apply(st.console,arguments):Dg(r))}};function Fg(r,t,e){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){ds(n.response,t,e)},n.onerror=function(){Gt.error("could not download file")},n.send()}function jS(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function eh(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var ds=st.saveAs||((typeof window>"u"?"undefined":Ut(window))!=="object"||window!==st?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,e){var n=st.URL||st.webkitURL,i=document.createElement("a");t=t||r.name||"download",i.download=t,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?jS(i.href)?Fg(r,t,e):eh(i,i.target="_blank"):eh(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){eh(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,e){if(t=t||r.name||"download",typeof r=="string")if(jS(r))Fg(r,t,e);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){eh(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:Ut(a)!=="object"&&(Gt.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(r,e),t)}:function(r,t,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Fg(r,t,e);var i=r.type==="application/octet-stream",a=/constructor/i.test(st.HTMLElement)||st.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":Ut(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var u=s.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},s.readAsDataURL(r)}else{var l=st.URL||st.webkitURL,c=l.createObjectURL(r);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function WC(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<e.length;n++){var i=e[n].re,a=e[n].process,o=i.exec(r);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+s+l+c}}var Lh=st.atob.bind(st),IS=st.btoa.bind(st);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Bg(r,t){var e=r[0],n=r[1],i=r[2],a=r[3];e=rn(e,n,i,a,t[0],7,-680876936),a=rn(a,e,n,i,t[1],12,-389564586),i=rn(i,a,e,n,t[2],17,606105819),n=rn(n,i,a,e,t[3],22,-1044525330),e=rn(e,n,i,a,t[4],7,-176418897),a=rn(a,e,n,i,t[5],12,1200080426),i=rn(i,a,e,n,t[6],17,-1473231341),n=rn(n,i,a,e,t[7],22,-45705983),e=rn(e,n,i,a,t[8],7,1770035416),a=rn(a,e,n,i,t[9],12,-1958414417),i=rn(i,a,e,n,t[10],17,-42063),n=rn(n,i,a,e,t[11],22,-1990404162),e=rn(e,n,i,a,t[12],7,1804603682),a=rn(a,e,n,i,t[13],12,-40341101),i=rn(i,a,e,n,t[14],17,-1502002290),e=nn(e,n=rn(n,i,a,e,t[15],22,1236535329),i,a,t[1],5,-165796510),a=nn(a,e,n,i,t[6],9,-1069501632),i=nn(i,a,e,n,t[11],14,643717713),n=nn(n,i,a,e,t[0],20,-373897302),e=nn(e,n,i,a,t[5],5,-701558691),a=nn(a,e,n,i,t[10],9,38016083),i=nn(i,a,e,n,t[15],14,-660478335),n=nn(n,i,a,e,t[4],20,-405537848),e=nn(e,n,i,a,t[9],5,568446438),a=nn(a,e,n,i,t[14],9,-1019803690),i=nn(i,a,e,n,t[3],14,-187363961),n=nn(n,i,a,e,t[8],20,1163531501),e=nn(e,n,i,a,t[13],5,-1444681467),a=nn(a,e,n,i,t[2],9,-51403784),i=nn(i,a,e,n,t[7],14,1735328473),e=an(e,n=nn(n,i,a,e,t[12],20,-1926607734),i,a,t[5],4,-378558),a=an(a,e,n,i,t[8],11,-2022574463),i=an(i,a,e,n,t[11],16,1839030562),n=an(n,i,a,e,t[14],23,-35309556),e=an(e,n,i,a,t[1],4,-1530992060),a=an(a,e,n,i,t[4],11,1272893353),i=an(i,a,e,n,t[7],16,-155497632),n=an(n,i,a,e,t[10],23,-1094730640),e=an(e,n,i,a,t[13],4,681279174),a=an(a,e,n,i,t[0],11,-358537222),i=an(i,a,e,n,t[3],16,-722521979),n=an(n,i,a,e,t[6],23,76029189),e=an(e,n,i,a,t[9],4,-640364487),a=an(a,e,n,i,t[12],11,-421815835),i=an(i,a,e,n,t[15],16,530742520),e=on(e,n=an(n,i,a,e,t[2],23,-995338651),i,a,t[0],6,-198630844),a=on(a,e,n,i,t[7],10,1126891415),i=on(i,a,e,n,t[14],15,-1416354905),n=on(n,i,a,e,t[5],21,-57434055),e=on(e,n,i,a,t[12],6,1700485571),a=on(a,e,n,i,t[3],10,-1894986606),i=on(i,a,e,n,t[10],15,-1051523),n=on(n,i,a,e,t[1],21,-2054922799),e=on(e,n,i,a,t[8],6,1873313359),a=on(a,e,n,i,t[15],10,-30611744),i=on(i,a,e,n,t[6],15,-1560198380),n=on(n,i,a,e,t[13],21,1309151649),e=on(e,n,i,a,t[4],6,-145523070),a=on(a,e,n,i,t[11],10,-1120210379),i=on(i,a,e,n,t[2],15,718787259),n=on(n,i,a,e,t[9],21,-343485551),r[0]=yo(e,r[0]),r[1]=yo(n,r[1]),r[2]=yo(i,r[2]),r[3]=yo(a,r[3])}function Cv(r,t,e,n,i,a){return t=yo(yo(t,r),yo(n,a)),yo(t<<i|t>>>32-i,e)}function rn(r,t,e,n,i,a,o){return Cv(t&e|~t&n,r,t,i,a,o)}function nn(r,t,e,n,i,a,o){return Cv(t&n|e&~n,r,t,i,a,o)}function an(r,t,e,n,i,a,o){return Cv(t^e^n,r,t,i,a,o)}function on(r,t,e,n,i,a,o){return Cv(e^(t|~n),r,t,i,a,o)}function qC(r){var t,e=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)Bg(n,oee(r.substring(t-64,t)));r=r.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Bg(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,Bg(n,i),n}function oee(r){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}var MS="0123456789abcdef".split("");function see(r){for(var t="",e=0;e<4;e++)t+=MS[r>>8*e+4&15]+MS[r>>8*e&15];return t}function cee(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function Ty(r){return qC(r).map(cee).join("")}var lee=function(r){for(var t=0;t<r.length;t++)r[t]=see(r[t]);return r.join("")}(qC("hello"))!="5d41402abc4b2a76b9719d911017c592";function yo(r,t){if(lee){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}return r+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ey(r,t){var e,n,i,a;if(r!==e){for(var o=(i=r,a=1+(256/r.length|0),new Array(a+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var u=s[l];c=(c+u+o.charCodeAt(l))%256,s[l]=s[c],s[c]=u}e=r,n=s}else s=n;var d=t.length,v=0,p=0,y="";for(l=0;l<d;l++)p=(p+(u=s[v=(v+1)%256]))%256,s[v]=s[p],s[p]=u,o=s[(s[v]+s[p])%256],y+=String.fromCharCode(t.charCodeAt(l)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var DS={print:4,modify:8,copy:16,"annot-forms":32};function gc(r,t,e,n){this.v=1,this.r=2;var i=192;r.forEach(function(s){if(DS.perm!==void 0)throw new Error("Invalid permission: "+s);i+=DS[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=Ty(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Ey(this.encryptionKey,this.padding)}function yc(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",e=r.length,n=0;n<e;n++){var i=r.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return t}function FS(r){if(Ut(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,i){if(i=i||!1,typeof e!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[n,!!i],a},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[e]){var o=t[e][a];try{o[0].apply(r,n)}catch(s){st.console&&Gt.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function gp(r){if(!(this instanceof gp))return new gp(r);var t="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function HC(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function vs(r,t,e,n,i){if(!(this instanceof vs))return new vs(r,t,e,n,i);this.type=r==="axial"?2:3,this.coords=t,this.colors=e,HC.call(this,n,i)}function Nc(r,t,e,n,i){if(!(this instanceof Nc))return new Nc(r,t,e,n,i);this.boundingBox=r,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,HC.call(this,n,i)}function Je(r){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,l=16,c="S",u=null;Ut(r=r||{})==="object"&&(e=r.orientation,n=r.unit||n,i=r.format||i,a=r.compress||r.compressPdf||a,(u=r.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(l=r.floatPrecision),c=r.defaultPathOperation||"S"),o=r.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",e=(""+(e||"P")).toLowerCase();var d=r.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=FS;var y="1.3",_=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(g){y=g};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return x};var w=p.__private__.getPageFormat=function(g){return x[g]};i=i||"a4";var S="compat",k="advanced",T=S;function R(){this.saveGraphicsState(),J(new it(rt,0,0,-rt,0,Ko()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),c="n",T=k}function U(){this.restoreGraphicsState(),c="S",T=S}var $=p.__private__.combineFontStyleAndFontWeight=function(g,C){if(g=="bold"&&C=="normal"||g=="bold"&&C==400||g=="normal"&&C=="italic"||g=="bold"&&C=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return C&&(g=C==400||C==="normal"?g==="italic"?"italic":"normal":C!=700&&C!=="bold"||g!=="normal"?(C==700?"bold":C)+""+g:"bold"),g};p.advancedAPI=function(g){var C=T===S;return C&&R.call(this),typeof g!="function"||(g(this),C&&U.call(this)),this},p.compatAPI=function(g){var C=T===k;return C&&U.call(this),typeof g!="function"||(g(this),C&&R.call(this)),this},p.isAdvancedAPI=function(){return T===k};var F,M=function(g){if(T!==k)throw new Error(g+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Y=p.roundToPrecision=p.__private__.roundToPrecision=function(g,C){var Q=t||C;if(isNaN(g)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return g.toFixed(Q).replace(/0+$/,"")};F=p.hpf=p.__private__.hpf=typeof l=="number"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(g,l)}:l==="smart"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(g,g>-1&&g<1?16:5)}:function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(g,16)};var O=p.f2=p.__private__.f2=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f2");return Y(g,2)},N=p.__private__.f3=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f3");return Y(g,3)},W=p.scale=p.__private__.scale=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.scale");return T===S?g*rt:T===k?g:void 0},j=function(g){return W(function(C){return T===S?Ko()-C:T===k?C:void 0}(g))};p.__private__.setPrecision=p.setPrecision=function(g){typeof parseInt(g,10)=="number"&&(t=parseInt(g,10))};var Z,X="00000000000000000000000000000000",oe=p.__private__.getFileId=function(){return X},q=p.__private__.setFileId=function(g){return X=g!==void 0&&/^[a-fA-F0-9]{32}$/.test(g)?g.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(gr=new gc(u.userPermissions,u.userPassword,u.ownerPassword,X)),X};p.setFileId=function(g){return q(g),this},p.getFileId=function(){return oe()};var re=p.__private__.convertDateToPDFDate=function(g){var C=g.getTimezoneOffset(),Q=C<0?"+":"-",te=Math.floor(Math.abs(C/60)),ce=Math.abs(C%60),xe=[Q,H(te),"'",H(ce),"'"].join("");return["D:",g.getFullYear(),H(g.getMonth()+1),H(g.getDate()),H(g.getHours()),H(g.getMinutes()),H(g.getSeconds()),xe].join("")},fe=p.__private__.convertPDFDateToDate=function(g){var C=parseInt(g.substr(2,4),10),Q=parseInt(g.substr(6,2),10)-1,te=parseInt(g.substr(8,2),10),ce=parseInt(g.substr(10,2),10),xe=parseInt(g.substr(12,2),10),Ee=parseInt(g.substr(14,2),10);return new Date(C,Q,te,ce,xe,Ee,0)},ne=p.__private__.setCreationDate=function(g){var C;if(g===void 0&&(g=new Date),g instanceof Date)C=re(g);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(g))throw new Error("Invalid argument passed to jsPDF.setCreationDate");C=g}return Z=C},E=p.__private__.getCreationDate=function(g){var C=Z;return g==="jsDate"&&(C=fe(Z)),C};p.setCreationDate=function(g){return ne(g),this},p.getCreationDate=function(g){return E(g)};var z,H=p.__private__.padd2=function(g){return("0"+parseInt(g)).slice(-2)},ee=p.__private__.padd2Hex=function(g){return("00"+(g=g.toString())).substr(g.length)},ae=0,ue=[],_e=[],me=0,be=[],le=[],Pe=!1,Ae=_e;p.__private__.setCustomOutputDestination=function(g){Pe=!0,Ae=g};var ge=function(g){Pe||(Ae=g)};p.__private__.resetCustomOutputDestination=function(){Pe=!1,Ae=_e};var J=p.__private__.out=function(g){return g=g.toString(),me+=g.length+1,Ae.push(g),Ae},gt=p.__private__.write=function(g){return J(arguments.length===1?g.toString():Array.prototype.join.call(arguments," "))},nt=p.__private__.getArrayBuffer=function(g){for(var C=g.length,Q=new ArrayBuffer(C),te=new Uint8Array(Q);C--;)te[C]=g.charCodeAt(C);return Q},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return et};var Ce=r.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(g){return Ce=T===k?g/rt:g,this};var Ve,Re=p.__private__.getFontSize=p.getFontSize=function(){return T===S?Ce:Ce*rt},pt=r.R2L||!1;p.__private__.setR2L=p.setR2L=function(g){return pt=g,this},p.__private__.getR2L=p.getR2L=function(){return pt};var Ge,St=p.__private__.setZoomMode=function(g){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(g))Ve=g;else if(isNaN(g)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(g)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+g+'" is not recognized.');Ve=g}else Ve=parseInt(g,10)};p.__private__.getZoomMode=function(){return Ve};var ct,ut=p.__private__.setPageMode=function(g){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(g)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+g+'" is not recognized.');Ge=g};p.__private__.getPageMode=function(){return Ge};var Ot=p.__private__.setLayoutMode=function(g){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(g)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+g+'" is not recognized.');ct=g};p.__private__.getLayoutMode=function(){return ct},p.__private__.setDisplayMode=p.setDisplayMode=function(g,C,Q){return St(g),Ot(C),ut(Q),this};var ot={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(g){if(Object.keys(ot).indexOf(g)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ot[g]},p.__private__.getDocumentProperties=function(){return ot},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(g){for(var C in ot)ot.hasOwnProperty(C)&&g[C]&&(ot[C]=g[C]);return this},p.__private__.setDocumentProperty=function(g,C){if(Object.keys(ot).indexOf(g)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ot[g]=C};var We,rt,Qe,At,xt,Ue={},at={},Nt=[],ze={},ft={},je={},vr={},mr=null,Wt=0,dt=[],It=new FS(p),Mo=r.hotfixes||[],Jr={},aa={},Mi=[],it=function g(C,Q,te,ce,xe,Ee){if(!(this instanceof g))return new g(C,Q,te,ce,xe,Ee);isNaN(C)&&(C=1),isNaN(Q)&&(Q=0),isNaN(te)&&(te=0),isNaN(ce)&&(ce=1),isNaN(xe)&&(xe=0),isNaN(Ee)&&(Ee=0),this._matrix=[C,Q,te,ce,xe,Ee]};Object.defineProperty(it.prototype,"sx",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(it.prototype,"shy",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(it.prototype,"shx",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(it.prototype,"sy",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(it.prototype,"tx",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(it.prototype,"ty",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(it.prototype,"a",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(it.prototype,"b",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(it.prototype,"c",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(it.prototype,"d",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(it.prototype,"e",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(it.prototype,"f",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(it.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(it.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(it.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(it.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),it.prototype.join=function(g){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(g)},it.prototype.multiply=function(g){var C=g.sx*this.sx+g.shy*this.shx,Q=g.sx*this.shy+g.shy*this.sy,te=g.shx*this.sx+g.sy*this.shx,ce=g.shx*this.shy+g.sy*this.sy,xe=g.tx*this.sx+g.ty*this.shx+this.tx,Ee=g.tx*this.shy+g.ty*this.sy+this.ty;return new it(C,Q,te,ce,xe,Ee)},it.prototype.decompose=function(){var g=this.sx,C=this.shy,Q=this.shx,te=this.sy,ce=this.tx,xe=this.ty,Ee=Math.sqrt(g*g+C*C),$e=(g/=Ee)*Q+(C/=Ee)*te;Q-=g*$e,te-=C*$e;var Ke=Math.sqrt(Q*Q+te*te);return $e/=Ke,g*(te/=Ke)<C*(Q/=Ke)&&(g=-g,C=-C,$e=-$e,Ee=-Ee),{scale:new it(Ee,0,0,Ke,0,0),translate:new it(1,0,0,1,ce,xe),rotate:new it(g,C,-C,g,0,0),skew:new it(1,0,$e,1,0,0)}},it.prototype.toString=function(g){return this.join(" ")},it.prototype.inversed=function(){var g=this.sx,C=this.shy,Q=this.shx,te=this.sy,ce=this.tx,xe=this.ty,Ee=1/(g*te-C*Q),$e=te*Ee,Ke=-C*Ee,lt=-Q*Ee,vt=g*Ee;return new it($e,Ke,lt,vt,-$e*ce-lt*xe,-Ke*ce-vt*xe)},it.prototype.applyToPoint=function(g){var C=g.x*this.sx+g.y*this.shx+this.tx,Q=g.x*this.shy+g.y*this.sy+this.ty;return new Ho(C,Q)},it.prototype.applyToRectangle=function(g){var C=this.applyToPoint(g),Q=this.applyToPoint(new Ho(g.x+g.w,g.y+g.h));return new Ol(C.x,C.y,Q.x-C.x,Q.y-C.y)},it.prototype.clone=function(){var g=this.sx,C=this.shy,Q=this.shx,te=this.sy,ce=this.tx,xe=this.ty;return new it(g,C,Q,te,ce,xe)},p.Matrix=it;var oa=p.matrixMult=function(g,C){return C.multiply(g)},sa=new it(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=sa;var Yn=function(g,C){if(!ft[g]){var Q=(C instanceof vs?"Sh":"P")+(Object.keys(ze).length+1).toString(10);C.id=Q,ft[g]=Q,ze[Q]=C,It.publish("addPattern",C)}};p.ShadingPattern=vs,p.TilingPattern=Nc,p.addShadingPattern=function(g,C){return M("addShadingPattern()"),Yn(g,C),this},p.beginTilingPattern=function(g){M("beginTilingPattern()"),Al(g.boundingBox[0],g.boundingBox[1],g.boundingBox[2]-g.boundingBox[0],g.boundingBox[3]-g.boundingBox[1],g.matrix)},p.endTilingPattern=function(g,C){M("endTilingPattern()"),C.stream=le[z].join(`
`),Yn(g,C),It.publish("endTilingPattern",C),Mi.pop().restore()};var Jn,cr=p.__private__.newObject=function(){var g=Br();return zr(g,!0),g},Br=p.__private__.newObjectDeferred=function(){return ae++,ue[ae]=function(){return me},ae},zr=function(g,C){return C=typeof C=="boolean"&&C,ue[g]=me,C&&J(g+" 0 obj"),g},Do=p.__private__.newAdditionalObject=function(){var g={objId:Br(),content:""};return be.push(g),g},Ua=Br(),pi=Br(),Di=p.__private__.decodeColorString=function(g){var C=g.split(" ");if(C.length!==2||C[1]!=="g"&&C[1]!=="G")C.length!==5||C[4]!=="k"&&C[4]!=="K"||(C=[(1-C[0])*(1-C[3]),(1-C[1])*(1-C[3]),(1-C[2])*(1-C[3]),"r"]);else{var Q=parseFloat(C[0]);C=[Q,Q,Q,"r"]}for(var te="#",ce=0;ce<3;ce++)te+=("0"+Math.floor(255*parseFloat(C[ce])).toString(16)).slice(-2);return te},vi=p.__private__.encodeColorString=function(g){var C;typeof g=="string"&&(g={ch1:g});var Q=g.ch1,te=g.ch2,ce=g.ch3,xe=g.ch4,Ee=g.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var $e=new WC(Q);if($e.ok)Q=$e.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var Ke=parseInt(Q.substr(1),16);Q=Ke>>16&255,te=Ke>>8&255,ce=255&Ke}if(te===void 0||xe===void 0&&Q===te&&te===ce)C=typeof Q=="string"?Q+" "+Ee[0]:g.precision===2?O(Q/255)+" "+Ee[0]:N(Q/255)+" "+Ee[0];else if(xe===void 0||Ut(xe)==="object"){if(xe&&!isNaN(xe.a)&&xe.a===0)return["1.","1.","1.",Ee[1]].join(" ");C=typeof Q=="string"?[Q,te,ce,Ee[1]].join(" "):g.precision===2?[O(Q/255),O(te/255),O(ce/255),Ee[1]].join(" "):[N(Q/255),N(te/255),N(ce/255),Ee[1]].join(" ")}else C=typeof Q=="string"?[Q,te,ce,xe,Ee[2]].join(" "):g.precision===2?[O(Q),O(te),O(ce),O(xe),Ee[2]].join(" "):[N(Q),N(te),N(ce),N(xe),Ee[2]].join(" ");return C},mi=p.__private__.getFilters=function(){return o},Xn=p.__private__.putStream=function(g){var C=(g=g||{}).data||"",Q=g.filters||mi(),te=g.alreadyAppliedFilters||[],ce=g.addLength1||!1,xe=C.length,Ee=g.objectId,$e=function(Nr){return Nr};if(u!==null&&Ee===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&($e=gr.encryptor(Ee,0));var Ke={};Q===!0&&(Q=["FlateEncode"]);var lt=g.additionalKeyValues||[],vt=(Ke=Je.API.processDataByFilters!==void 0?Je.API.processDataByFilters(C,Q):{data:C,reverseChain:[]}).reverseChain+(Array.isArray(te)?te.join(" "):te.toString());if(Ke.data.length!==0&&(lt.push({key:"Length",value:Ke.data.length}),ce===!0&&lt.push({key:"Length1",value:xe})),vt.length!=0)if(vt.split("/").length-1==1)lt.push({key:"Filter",value:vt});else{lt.push({key:"Filter",value:"["+vt+"]"});for(var Rt=0;Rt<lt.length;Rt+=1)if(lt[Rt].key==="DecodeParms"){for(var nr=[],Er=0;Er<Ke.reverseChain.split("/").length-1;Er+=1)nr.push("null");nr.push(lt[Rt].value),lt[Rt].value="["+nr.join(" ")+"]"}}J("<<");for(var Kt=0;Kt<lt.length;Kt++)J("/"+lt[Kt].key+" "+lt[Kt].value);J(">>"),Ke.data.length!==0&&(J("stream"),J($e(Ke.data)),J("endstream"))},Fo=p.__private__.putPage=function(g){var C=g.number,Q=g.data,te=g.objId,ce=g.contentsObjId;zr(te,!0),J("<</Type /Page"),J("/Parent "+g.rootDictionaryObjId+" 0 R"),J("/Resources "+g.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(F(g.mediaBox.bottomLeftX))+" "+parseFloat(F(g.mediaBox.bottomLeftY))+" "+F(g.mediaBox.topRightX)+" "+F(g.mediaBox.topRightY)+"]"),g.cropBox!==null&&J("/CropBox ["+F(g.cropBox.bottomLeftX)+" "+F(g.cropBox.bottomLeftY)+" "+F(g.cropBox.topRightX)+" "+F(g.cropBox.topRightY)+"]"),g.bleedBox!==null&&J("/BleedBox ["+F(g.bleedBox.bottomLeftX)+" "+F(g.bleedBox.bottomLeftY)+" "+F(g.bleedBox.topRightX)+" "+F(g.bleedBox.topRightY)+"]"),g.trimBox!==null&&J("/TrimBox ["+F(g.trimBox.bottomLeftX)+" "+F(g.trimBox.bottomLeftY)+" "+F(g.trimBox.topRightX)+" "+F(g.trimBox.topRightY)+"]"),g.artBox!==null&&J("/ArtBox ["+F(g.artBox.bottomLeftX)+" "+F(g.artBox.bottomLeftY)+" "+F(g.artBox.topRightX)+" "+F(g.artBox.topRightY)+"]"),typeof g.userUnit=="number"&&g.userUnit!==1&&J("/UserUnit "+g.userUnit),It.publish("putPage",{objId:te,pageContext:dt[C],pageNumber:C,page:Q}),J("/Contents "+ce+" 0 R"),J(">>"),J("endobj");var xe=Q.join(`
`);return T===k&&(xe+=`
Q`),zr(ce,!0),Xn({data:xe,filters:mi(),objectId:ce}),J("endobj"),te},Fi=p.__private__.putPages=function(){var g,C,Q=[];for(g=1;g<=Wt;g++)dt[g].objId=Br(),dt[g].contentsObjId=Br();for(g=1;g<=Wt;g++)Q.push(Fo({number:g,data:le[g],objId:dt[g].objId,contentsObjId:dt[g].contentsObjId,mediaBox:dt[g].mediaBox,cropBox:dt[g].cropBox,bleedBox:dt[g].bleedBox,trimBox:dt[g].trimBox,artBox:dt[g].artBox,userUnit:dt[g].userUnit,rootDictionaryObjId:Ua,resourceDictionaryObjId:pi}));zr(Ua,!0),J("<</Type /Pages");var te="/Kids [";for(C=0;C<Wt;C++)te+=Q[C]+" 0 R ";J(te+"]"),J("/Count "+Wt),J(">>"),J("endobj"),It.publish("postPutPages")},Bo=function(g){It.publish("putFont",{font:g,out:J,newObject:cr,putStream:Xn}),g.isAlreadyPutted!==!0&&(g.objectNumber=cr(),J("<<"),J("/Type /Font"),J("/BaseFont /"+yc(g.postScriptName)),J("/Subtype /Type1"),typeof g.encoding=="string"&&J("/Encoding /"+g.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Ws=function(g){g.objectNumber=cr();var C=[];C.push({key:"Type",value:"/XObject"}),C.push({key:"Subtype",value:"/Form"}),C.push({key:"BBox",value:"["+[F(g.x),F(g.y),F(g.x+g.width),F(g.y+g.height)].join(" ")+"]"}),C.push({key:"Matrix",value:"["+g.matrix.toString()+"]"});var Q=g.pages[1].join(`
`);Xn({data:Q,additionalKeyValues:C,objectId:g.objectNumber}),J("endobj")},qs=function(g,C){C||(C=21);var Q=cr(),te=function(Ee,$e){var Ke,lt=[],vt=1/($e-1);for(Ke=0;Ke<1;Ke+=vt)lt.push(Ke);if(lt.push(1),Ee[0].offset!=0){var Rt={offset:0,color:Ee[0].color};Ee.unshift(Rt)}if(Ee[Ee.length-1].offset!=1){var nr={offset:1,color:Ee[Ee.length-1].color};Ee.push(nr)}for(var Er="",Kt=0,Nr=0;Nr<lt.length;Nr++){for(Ke=lt[Nr];Ke>Ee[Kt+1].offset;)Kt++;var Cr=Ee[Kt].offset,Wr=(Ke-Cr)/(Ee[Kt+1].offset-Cr),ei=Ee[Kt].color,wn=Ee[Kt+1].color;Er+=ee(Math.round((1-Wr)*ei[0]+Wr*wn[0]).toString(16))+ee(Math.round((1-Wr)*ei[1]+Wr*wn[1]).toString(16))+ee(Math.round((1-Wr)*ei[2]+Wr*wn[2]).toString(16))}return Er.trim()}(g.colors,C),ce=[];ce.push({key:"FunctionType",value:"0"}),ce.push({key:"Domain",value:"[0.0 1.0]"}),ce.push({key:"Size",value:"["+C+"]"}),ce.push({key:"BitsPerSample",value:"8"}),ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xn({data:te,additionalKeyValues:ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),J("endobj"),g.objectNumber=cr(),J("<< /ShadingType "+g.type),J("/ColorSpace /DeviceRGB");var xe="/Coords ["+F(parseFloat(g.coords[0]))+" "+F(parseFloat(g.coords[1]))+" ";g.type===2?xe+=F(parseFloat(g.coords[2]))+" "+F(parseFloat(g.coords[3])):xe+=F(parseFloat(g.coords[2]))+" "+F(parseFloat(g.coords[3]))+" "+F(parseFloat(g.coords[4]))+" "+F(parseFloat(g.coords[5])),J(xe+="]"),g.matrix&&J("/Matrix ["+g.matrix.toString()+"]"),J("/Function "+Q+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Hs=function(g,C){var Q=Br(),te=cr();C.push({resourcesOid:Q,objectOid:te}),g.objectNumber=te;var ce=[];ce.push({key:"Type",value:"/Pattern"}),ce.push({key:"PatternType",value:"1"}),ce.push({key:"PaintType",value:"1"}),ce.push({key:"TilingType",value:"1"}),ce.push({key:"BBox",value:"["+g.boundingBox.map(F).join(" ")+"]"}),ce.push({key:"XStep",value:F(g.xStep)}),ce.push({key:"YStep",value:F(g.yStep)}),ce.push({key:"Resources",value:Q+" 0 R"}),g.matrix&&ce.push({key:"Matrix",value:"["+g.matrix.toString()+"]"}),Xn({data:g.stream,additionalKeyValues:ce,objectId:g.objectNumber}),J("endobj")},Lv=function(g){for(var C in g.objectNumber=cr(),J("<<"),g)switch(C){case"opacity":J("/ca "+O(g[C]));break;case"stroke-opacity":J("/CA "+O(g[C]))}J(">>"),J("endobj")},wl=function(g){zr(g.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var C in J("/Font <<"),Ue)Ue.hasOwnProperty(C)&&(d===!1||d===!0&&v.hasOwnProperty(C))&&J("/"+C+" "+Ue[C].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(ze).length>0){for(var C in J("/Shading <<"),ze)ze.hasOwnProperty(C)&&ze[C]instanceof vs&&ze[C].objectNumber>=0&&J("/"+C+" "+ze[C].objectNumber+" 0 R");It.publish("putShadingPatternDict"),J(">>")}}(),function(C){if(Object.keys(ze).length>0){for(var Q in J("/Pattern <<"),ze)ze.hasOwnProperty(Q)&&ze[Q]instanceof p.TilingPattern&&ze[Q].objectNumber>=0&&ze[Q].objectNumber<C&&J("/"+Q+" "+ze[Q].objectNumber+" 0 R");It.publish("putTilingPatternDict"),J(">>")}}(g.objectOid),function(){if(Object.keys(je).length>0){var C;for(C in J("/ExtGState <<"),je)je.hasOwnProperty(C)&&je[C].objectNumber>=0&&J("/"+C+" "+je[C].objectNumber+" 0 R");It.publish("putGStateDict"),J(">>")}}(),function(){for(var C in J("/XObject <<"),Jr)Jr.hasOwnProperty(C)&&Jr[C].objectNumber>=0&&J("/"+C+" "+Jr[C].objectNumber+" 0 R");It.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},Ef=function(g){at[g.fontName]=at[g.fontName]||{},at[g.fontName][g.fontStyle]=g.id},Cf=function(g,C,Q,te,ce){var xe={id:"F"+(Object.keys(Ue).length+1).toString(10),postScriptName:g,fontName:C,fontStyle:Q,encoding:te,isStandardFont:ce||!1,metadata:{}};return It.publish("addFont",{font:xe,instance:this}),Ue[xe.id]=xe,Ef(xe),xe.id},Zn=p.__private__.pdfEscape=p.pdfEscape=function(g,C){return function(Q,te){var ce,xe,Ee,$e,Ke,lt,vt,Rt,nr;if(Ee=(te=te||{}).sourceEncoding||"Unicode",Ke=te.outputEncoding,(te.autoencode||Ke)&&Ue[We].metadata&&Ue[We].metadata[Ee]&&Ue[We].metadata[Ee].encoding&&($e=Ue[We].metadata[Ee].encoding,!Ke&&Ue[We].encoding&&(Ke=Ue[We].encoding),!Ke&&$e.codePages&&(Ke=$e.codePages[0]),typeof Ke=="string"&&(Ke=$e[Ke]),Ke)){for(vt=!1,lt=[],ce=0,xe=Q.length;ce<xe;ce++)(Rt=Ke[Q.charCodeAt(ce)])?lt.push(String.fromCharCode(Rt)):lt.push(Q[ce]),lt[ce].charCodeAt(0)>>8&&(vt=!0);Q=lt.join("")}for(ce=Q.length;vt===void 0&&ce!==0;)Q.charCodeAt(ce-1)>>8&&(vt=!0),ce--;if(!vt)return Q;for(lt=te.noBOM?[]:[254,255],ce=0,xe=Q.length;ce<xe;ce++){if((nr=(Rt=Q.charCodeAt(ce))>>8)>>8)throw new Error("Character at position "+ce+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lt.push(nr),lt.push(Rt-(nr<<8))}return String.fromCharCode.apply(void 0,lt)}(g,C).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bl=p.__private__.beginPage=function(g){le[++Wt]=[],dt[Wt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(g[0]),topRightY:Number(g[1])}},Of(Wt),ge(le[z])},Lf=function(g,C){var Q,te,ce;switch(e=C||e,typeof g=="string"&&(Q=w(g.toLowerCase()),Array.isArray(Q)&&(te=Q[0],ce=Q[1])),Array.isArray(g)&&(te=g[0]*rt,ce=g[1]*rt),isNaN(te)&&(te=i[0],ce=i[1]),(te>14400||ce>14400)&&(Gt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),te=Math.min(14400,te),ce=Math.min(14400,ce)),i=[te,ce],e.substr(0,1)){case"l":ce>te&&(i=[ce,te]);break;case"p":te>ce&&(i=[ce,te])}bl(i),Fv(Tl),J(Ks),Cl!==0&&J(Cl+" J"),Ll!==0&&J(Ll+" j"),It.publish("addPage",{pageNumber:Wt})},Sl=function(g){g>0&&g<=Wt&&(le.splice(g,1),dt.splice(g,1),Wt--,z>Wt&&(z=Wt),this.setPage(z))},Of=function(g){g>0&&g<=Wt&&(z=g)},Af=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return le.length-1},Nf=function(g,C,Q){var te,ce=void 0;return Q=Q||{},g=g!==void 0?g:Ue[We].fontName,C=C!==void 0?C:Ue[We].fontStyle,te=g.toLowerCase(),at[te]!==void 0&&at[te][C]!==void 0?ce=at[te][C]:at[g]!==void 0&&at[g][C]!==void 0?ce=at[g][C]:Q.disableWarning===!1&&Gt.warn("Unable to look up font label for font '"+g+"', '"+C+"'. Refer to getFontList() for available fonts."),ce||Q.noFallback||(ce=at.times[C])==null&&(ce=at.times.normal),ce},Gs=p.__private__.putInfo=function(){var g=cr(),C=function(te){return te};for(var Q in u!==null&&(C=gr.encryptor(g,0)),J("<<"),J("/Producer ("+Zn(C("jsPDF "+Je.version))+")"),ot)ot.hasOwnProperty(Q)&&ot[Q]&&J("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+Zn(C(ot[Q]))+")");J("/CreationDate ("+Zn(C(Z))+")"),J(">>"),J("endobj")},Ov=p.__private__.putCatalog=function(g){var C=(g=g||{}).rootDictionaryObjId||Ua;switch(cr(),J("<<"),J("/Type /Catalog"),J("/Pages "+C+" 0 R"),Ve||(Ve="fullwidth"),Ve){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+Ve;Q.substr(Q.length-1)==="%"&&(Ve=parseInt(Ve)/100),typeof Ve=="number"&&J("/OpenAction [3 0 R /XYZ null null "+O(Ve)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}Ge&&J("/PageMode /"+Ge),It.publish("putCatalog"),J(">>"),J("endobj")},Tr=p.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(ae+1)),J("/Root "+ae+" 0 R"),J("/Info "+(ae-1)+" 0 R"),u!==null&&J("/Encrypt "+gr.oid+" 0 R"),J("/ID [ <"+X+"> <"+X+"> ]"),J(">>")},Rf=p.__private__.putHeader=function(){J("%PDF-"+y),J("%ºß¬à")},jf=p.__private__.putXRef=function(){var g="0000000000";J("xref"),J("0 "+(ae+1)),J("0000000000 65535 f ");for(var C=1;C<=ae;C++)typeof ue[C]=="function"?J((g+ue[C]()).slice(-10)+" 00000 n "):ue[C]!==void 0?J((g+ue[C]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},ca=p.__private__.buildDocument=function(){var g;ae=0,me=0,_e=[],ue=[],be=[],Ua=Br(),pi=Br(),ge(_e),It.publish("buildDocument"),Rf(),Fi(),function(){It.publish("putAdditionalObjects");for(var Q=0;Q<be.length;Q++){var te=be[Q];zr(te.objId,!0),J(te.content),J("endobj")}It.publish("postPutAdditionalObjects")}(),g=[],function(){for(var Q in Ue)Ue.hasOwnProperty(Q)&&(d===!1||d===!0&&v.hasOwnProperty(Q))&&Bo(Ue[Q])}(),function(){var Q;for(Q in je)je.hasOwnProperty(Q)&&Lv(je[Q])}(),function(){for(var Q in Jr)Jr.hasOwnProperty(Q)&&Ws(Jr[Q])}(),function(Q){var te;for(te in ze)ze.hasOwnProperty(te)&&(ze[te]instanceof vs?qs(ze[te]):ze[te]instanceof Nc&&Hs(ze[te],Q))}(g),It.publish("putResources"),g.forEach(wl),wl({resourcesOid:pi,objectOid:Number.MAX_SAFE_INTEGER}),It.publish("postPutResources"),u!==null&&(gr.oid=cr(),J("<<"),J("/Filter /Standard"),J("/V "+gr.v),J("/R "+gr.r),J("/U <"+gr.toHexString(gr.U)+">"),J("/O <"+gr.toHexString(gr.O)+">"),J("/P "+gr.P),J(">>"),J("endobj")),Gs(),Ov();var C=me;return jf(),Tr(),J("startxref"),J(""+C),J("%%EOF"),ge(le[z]),_e.join(`
`)},Uo=p.__private__.getBlob=function(g){return new Blob([nt(g)],{type:"application/pdf"})},gi=p.output=p.__private__.output=(Jn=function(g,C){switch(typeof(C=C||{})=="string"?C={filename:C}:C.filename=C.filename||"generated.pdf",g){case void 0:return ca();case"save":p.save(C.filename);break;case"arraybuffer":return nt(ca());case"blob":return Uo(ca());case"bloburi":case"bloburl":if(st.URL!==void 0&&typeof st.URL.createObjectURL=="function")return st.URL&&st.URL.createObjectURL(Uo(ca()))||void 0;Gt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",te=ca();try{Q=IS(te)}catch{Q=IS(unescape(encodeURIComponent(te)))}return"data:application/pdf;filename="+C.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(st)==="[object Window]"){var ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';C.pdfObjectUrl&&(ce=C.pdfObjectUrl,xe="");var Ee='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ce+'"'+xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(C)+");<\/script></body></html>",$e=st.open();return $e!==null&&$e.document.write(Ee),$e}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(st)==="[object Window]"){var Ke='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(C.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+C.filename+'" width="500px" height="400px" /></body></html>',lt=st.open();if(lt!==null){lt.document.write(Ke);var vt=this;lt.document.documentElement.querySelector("#pdfViewer").onload=function(){lt.document.title=C.filename,lt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vt.output("bloburl"))}}return lt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(st)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",C)+'"></iframe></body></html>',nr=st.open();if(nr!==null&&(nr.document.write(Rt),nr.document.title=C.filename),nr||typeof safari>"u")return nr;break;case"datauri":case"dataurl":return st.document.location.href=this.output("datauristring",C);default:return null}},Jn.foo=function(){try{return Jn.apply(this,arguments)}catch(Q){var g=Q.stack||"";~g.indexOf(" at ")&&(g=g.split(" at ")[1]);var C="Error in function "+g.split(`
`)[0].split("<")[0]+": "+Q.message;if(!st.console)throw new Error(C);st.console.error(C,Q),st.alert&&alert(C)}},Jn.foo.bar=Jn,Jn.foo),$o=function(g){return Array.isArray(Mo)===!0&&Mo.indexOf(g)>-1};switch(n){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=$o("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);rt=n}var gr=null;ne(),q();var xl=p.__private__.getPageInfo=p.getPageInfo=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dt[g].objId,pageNumber:g,pageContext:dt[g]}},Av=p.__private__.getPageInfoByObjId=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var C in dt)if(dt[C].objId===g)break;return xl(C)},Nv=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:dt[z].objId,pageNumber:z,pageContext:dt[z]}};p.addPage=function(){return Lf.apply(this,arguments),this},p.setPage=function(){return Of.apply(this,arguments),ge.call(this,le[z]),this},p.insertPage=function(g){return this.addPage(),this.movePage(z,g),this},p.movePage=function(g,C){var Q,te;if(g>C){Q=le[g],te=dt[g];for(var ce=g;ce>C;ce--)le[ce]=le[ce-1],dt[ce]=dt[ce-1];le[C]=Q,dt[C]=te,this.setPage(C)}else if(g<C){Q=le[g],te=dt[g];for(var xe=g;xe<C;xe++)le[xe]=le[xe+1],dt[xe]=dt[xe+1];le[C]=Q,dt[C]=te,this.setPage(C)}return this},p.deletePage=function(){return Sl.apply(this,arguments),this},p.__private__.text=p.text=function(g,C,Q,te,ce){var xe,Ee,$e,Ke,lt,vt,Rt,nr,Er,Kt=(te=te||{}).scope||this;if(typeof g=="number"&&typeof C=="number"&&(typeof Q=="string"||Array.isArray(Q))){var Nr=Q;Q=C,C=g,g=Nr}if(arguments[3]instanceof it==0?($e=arguments[4],Ke=arguments[5],Ut(Rt=arguments[3])==="object"&&Rt!==null||(typeof $e=="string"&&(Ke=$e,$e=null),typeof Rt=="string"&&(Ke=Rt,Rt=null),typeof Rt=="number"&&($e=Rt,Rt=null),te={flags:Rt,angle:$e,align:Ke})):(M("The transform parameter of text() with a Matrix value"),Er=ce),isNaN(C)||isNaN(Q)||g==null)throw new Error("Invalid arguments passed to jsPDF.text");if(g.length===0)return Kt;var Cr,Wr="",ei=typeof te.lineHeightFactor=="number"?te.lineHeightFactor:zo,wn=Kt.internal.scaleFactor;function Vf(Mt){return Mt=Mt.split("	").join(Array(te.TabLen||9).join(" ")),Zn(Mt,Rt)}function Xs(Mt){for(var qt,_r=Mt.concat(),Rr=[],va=_r.length;va--;)typeof(qt=_r.shift())=="string"?Rr.push(qt):Array.isArray(Mt)&&(qt.length===1||qt[1]===void 0&&qt[2]===void 0)?Rr.push(qt[0]):Rr.push([qt[0],qt[1],qt[2]]);return Rr}function Qo(Mt,qt){var _r;if(typeof Mt=="string")_r=qt(Mt)[0];else if(Array.isArray(Mt)){for(var Rr,va,$l=Mt.concat(),tc=[],qf=$l.length;qf--;)typeof(Rr=$l.shift())=="string"?tc.push(qt(Rr)[0]):Array.isArray(Rr)&&typeof Rr[0]=="string"&&(va=qt(Rr[0],Rr[1],Rr[2]),tc.push([va[0],va[1],va[2]]));_r=tc}return _r}var za=!1,Yo=!0;if(typeof g=="string")za=!0;else if(Array.isArray(g)){var Jo=g.concat();Ee=[];for(var Xo,Xr=Jo.length;Xr--;)(typeof(Xo=Jo.shift())!="string"||Array.isArray(Xo)&&typeof Xo[0]!="string")&&(Yo=!1);za=Yo}if(za===!1)throw new Error('Type of text must be string or Array. "'+g+'" is not recognized.');typeof g=="string"&&(g=g.match(/[\r?\n]/)?g.split(/\r\n|\r|\n/g):[g]);var Zo=Ce/Kt.internal.scaleFactor,es=Zo*(ei-1);switch(te.baseline){case"bottom":Q-=es;break;case"top":Q+=Zo-es;break;case"hanging":Q+=Zo-2*es;break;case"middle":Q+=Zo/2-es}if((vt=te.maxWidth||0)>0&&(typeof g=="string"?g=Kt.splitTextToSize(g,vt):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(Mt,qt){return Mt.concat(Kt.splitTextToSize(qt,vt))},[]))),xe={text:g,x:C,y:Q,options:te,mutex:{pdfEscape:Zn,activeFontKey:We,fonts:Ue,activeFontSize:Ce}},It.publish("preProcessText",xe),g=xe.text,$e=(te=xe.options).angle,Er instanceof it==0&&$e&&typeof $e=="number"){$e*=Math.PI/180,te.rotationDirection===0&&($e=-$e),T===k&&($e=-$e);var Nl=Math.cos($e),Rl=Math.sin($e);Er=new it(Nl,Rl,-Rl,Nl,0,0)}else $e&&$e instanceof it&&(Er=$e);T!==k||Er||(Er=sa),(lt=te.charSpace||Ys)!==void 0&&(Wr+=F(W(lt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(nr=te.horizontalScale)!==void 0&&(Wr+=F(100*nr)+` Tz
`),te.lang;var lr=-1,ha=te.renderingMode!==void 0?te.renderingMode:te.stroke,Zs=Kt.internal.getCurrentPageInfo().pageContext;switch(ha){case 0:case!1:case"fill":lr=0;break;case 1:case!0:case"stroke":lr=1;break;case 2:case"fillThenStroke":lr=2;break;case 3:case"invisible":lr=3;break;case 4:case"fillAndAddForClipping":lr=4;break;case 5:case"strokeAndAddPathForClipping":lr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":lr=6;break;case 7:case"addToPathForClipping":lr=7}var zf=Zs.usedRenderingMode!==void 0?Zs.usedRenderingMode:-1;lr!==-1?Wr+=lr+` Tr
`:zf!==-1&&(Wr+=`0 Tr
`),lr!==-1&&(Zs.usedRenderingMode=lr),Ke=te.align||"left";var ti,ts=Ce*ei,jl=Kt.internal.pageSize.getWidth(),Il=Ue[We];lt=te.charSpace||Ys,vt=te.maxWidth||0,Rt=Object.assign({autoencode:!0,noBOM:!0},te.flags);var Wa=[],rs=function(Mt){return Kt.getStringUnitWidth(Mt,{font:Il,charSpace:lt,fontSize:Ce,doKerning:!1})*Ce/wn};if(Object.prototype.toString.call(g)==="[object Array]"){var Rn;Ee=Xs(g),Ke!=="left"&&(ti=Ee.map(rs));var jn,qa=0;if(Ke==="right"){C-=ti[0],g=[],Xr=Ee.length;for(var pa=0;pa<Xr;pa++)pa===0?(jn=la(C),Rn=ua(Q)):(jn=W(qa-ti[pa]),Rn=-ts),g.push([Ee[pa],jn,Rn]),qa=ti[pa]}else if(Ke==="center"){C-=ti[0]/2,g=[],Xr=Ee.length;for(var Ha=0;Ha<Xr;Ha++)Ha===0?(jn=la(C),Rn=ua(Q)):(jn=W((qa-ti[Ha])/2),Rn=-ts),g.push([Ee[Ha],jn,Rn]),qa=ti[Ha]}else if(Ke==="left"){g=[],Xr=Ee.length;for(var Ml=0;Ml<Xr;Ml++)g.push(Ee[Ml])}else if(Ke==="justify"&&Il.encoding==="Identity-H"){g=[],Xr=Ee.length,vt=vt!==0?vt:jl;for(var ec=0,yr=0;yr<Xr;yr++)if(Rn=yr===0?ua(Q):-ts,jn=yr===0?la(C):ec,yr<Xr-1){var Wf=W((vt-ti[yr])/(Ee[yr].split(" ").length-1)),Ui=Ee[yr].split(" ");g.push([Ui[0]+" ",jn,Rn]),ec=0;for(var $i=1;$i<Ui.length;$i++){var Dl=(rs(Ui[$i-1]+" "+Ui[$i])-rs(Ui[$i]))*wn+Wf;$i==Ui.length-1?g.push([Ui[$i],Dl,0]):g.push([Ui[$i]+" ",Dl,0]),ec-=Dl}}else g.push([Ee[yr],jn,Rn]);g.push(["",ec,0])}else{if(Ke!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(g=[],Xr=Ee.length,vt=vt!==0?vt:jl,yr=0;yr<Xr;yr++){Rn=yr===0?ua(Q):-ts,jn=yr===0?la(C):0;var Fl=Ee[yr].split(" ").length-1,Bl=Fl>0?(vt-ti[yr])/Fl:0;yr<Xr-1?Wa.push(F(W(Bl))):Wa.push(0),g.push([Ee[yr],jn,Rn])}}}(typeof te.R2L=="boolean"?te.R2L:pt)===!0&&(g=Qo(g,function(Mt,qt,_r){return[Mt.split("").reverse().join(""),qt,_r]})),xe={text:g,x:C,y:Q,options:te,mutex:{pdfEscape:Zn,activeFontKey:We,fonts:Ue,activeFontSize:Ce}},It.publish("postProcessText",xe),g=xe.text,Cr=xe.mutex.isHex||!1;var Ul=Ue[We].encoding;Ul!=="WinAnsiEncoding"&&Ul!=="StandardEncoding"||(g=Qo(g,function(Mt,qt,_r){return[Vf(Mt),qt,_r]})),Ee=Xs(g),g=[];for(var Ga,Ka,Qa,ns=Array.isArray(Ee[0])?1:0,Ya="",is=function(Mt,qt,_r){var Rr="";return _r instanceof it?(_r=typeof te.angle=="number"?oa(_r,new it(1,0,0,1,Mt,qt)):oa(new it(1,0,0,1,Mt,qt),_r),T===k&&(_r=oa(new it(1,0,0,-1,0,0),_r)),Rr=_r.join(" ")+` Tm
`):Rr=F(Mt)+" "+F(qt)+` Td
`,Rr},ri=0;ri<Ee.length;ri++){switch(Ya="",ns){case 1:Qa=(Cr?"<":"(")+Ee[ri][0]+(Cr?">":")"),Ga=parseFloat(Ee[ri][1]),Ka=parseFloat(Ee[ri][2]);break;case 0:Qa=(Cr?"<":"(")+Ee[ri]+(Cr?">":")"),Ga=la(C),Ka=ua(Q)}Wa!==void 0&&Wa[ri]!==void 0&&(Ya=Wa[ri]+` Tw
`),ri===0?g.push(Ya+is(Ga,Ka,Er)+Qa):ns===0?g.push(Ya+Qa):ns===1&&g.push(Ya+is(Ga,Ka,Er)+Qa)}g=ns===0?g.join(` Tj
T* `):g.join(` Tj
`),g+=` Tj
`;var Vi=`BT
/`;return Vi+=We+" "+Ce+` Tf
`,Vi+=F(Ce*ei)+` TL
`,Vi+=Wo+`
`,Vi+=Wr,Vi+=g,J(Vi+="ET"),v[We]=!0,Kt};var Rv=p.__private__.clip=p.clip=function(g){return J(g==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Rv("evenodd")},p.__private__.discardPath=p.discardPath=function(){return J("n"),this};var Bi=p.__private__.isValidStyle=function(g){var C=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(g)!==-1&&(C=!0),C};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(g){return Bi(g)&&(c=g),this};var If=p.__private__.getStyle=p.getStyle=function(g){var C=c;switch(g){case"D":case"S":C="S";break;case"F":C="f";break;case"FD":case"DF":C="B";break;case"f":case"f*":case"B":case"B*":C=g}return C},Mf=p.close=function(){return J("h"),this};p.stroke=function(){return J("S"),this},p.fill=function(g){return $a("f",g),this},p.fillEvenOdd=function(g){return $a("f*",g),this},p.fillStroke=function(g){return $a("B",g),this},p.fillStrokeEvenOdd=function(g){return $a("B*",g),this};var $a=function(g,C){Ut(C)==="object"?Iv(C,g):J(g)},kl=function(g){g===null||T===k&&g===void 0||(g=If(g),J(g))};function jv(g,C,Q,te,ce){var xe=new Nc(C||this.boundingBox,Q||this.xStep,te||this.yStep,this.gState,ce||this.matrix);xe.stream=this.stream;var Ee=g+"$$"+this.cloneIndex+++"$$";return Yn(Ee,xe),xe}var Iv=function(g,C){var Q=ft[g.key],te=ze[Q];if(te instanceof vs)J("q"),J(Mv(C)),te.gState&&p.setGState(te.gState),J(g.matrix.toString()+" cm"),J("/"+Q+" sh"),J("Q");else if(te instanceof Nc){var ce=new it(1,0,0,-1,0,Ko());g.matrix&&(ce=ce.multiply(g.matrix||sa),Q=jv.call(te,g.key,g.boundingBox,g.xStep,g.yStep,ce).id),J("q"),J("/Pattern cs"),J("/"+Q+" scn"),te.gState&&p.setGState(te.gState),J(C),J("Q")}},Mv=function(g){switch(g){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Pl=p.moveTo=function(g,C){return J(F(W(g))+" "+F(j(C))+" m"),this},Vo=p.lineTo=function(g,C){return J(F(W(g))+" "+F(j(C))+" l"),this},Va=p.curveTo=function(g,C,Q,te,ce,xe){return J([F(W(g)),F(j(C)),F(W(Q)),F(j(te)),F(W(ce)),F(j(xe)),"c"].join(" ")),this};p.__private__.line=p.line=function(g,C,Q,te,ce){if(isNaN(g)||isNaN(C)||isNaN(Q)||isNaN(te)||!Bi(ce))throw new Error("Invalid arguments passed to jsPDF.line");return T===S?this.lines([[Q-g,te-C]],g,C,[1,1],ce||"S"):this.lines([[Q-g,te-C]],g,C,[1,1]).stroke()},p.__private__.lines=p.lines=function(g,C,Q,te,ce,xe){var Ee,$e,Ke,lt,vt,Rt,nr,Er,Kt,Nr,Cr,Wr;if(typeof g=="number"&&(Wr=Q,Q=C,C=g,g=Wr),te=te||[1,1],xe=xe||!1,isNaN(C)||isNaN(Q)||!Array.isArray(g)||!Array.isArray(te)||!Bi(ce)||typeof xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pl(C,Q),Ee=te[0],$e=te[1],lt=g.length,Nr=C,Cr=Q,Ke=0;Ke<lt;Ke++)(vt=g[Ke]).length===2?(Nr=vt[0]*Ee+Nr,Cr=vt[1]*$e+Cr,Vo(Nr,Cr)):(Rt=vt[0]*Ee+Nr,nr=vt[1]*$e+Cr,Er=vt[2]*Ee+Nr,Kt=vt[3]*$e+Cr,Nr=vt[4]*Ee+Nr,Cr=vt[5]*$e+Cr,Va(Rt,nr,Er,Kt,Nr,Cr));return xe&&Mf(),kl(ce),this},p.path=function(g){for(var C=0;C<g.length;C++){var Q=g[C],te=Q.c;switch(Q.op){case"m":Pl(te[0],te[1]);break;case"l":Vo(te[0],te[1]);break;case"c":Va.apply(this,te);break;case"h":Mf()}}return this},p.__private__.rect=p.rect=function(g,C,Q,te,ce){if(isNaN(g)||isNaN(C)||isNaN(Q)||isNaN(te)||!Bi(ce))throw new Error("Invalid arguments passed to jsPDF.rect");return T===S&&(te=-te),J([F(W(g)),F(j(C)),F(W(Q)),F(W(te)),"re"].join(" ")),kl(ce),this},p.__private__.triangle=p.triangle=function(g,C,Q,te,ce,xe,Ee){if(isNaN(g)||isNaN(C)||isNaN(Q)||isNaN(te)||isNaN(ce)||isNaN(xe)||!Bi(Ee))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-g,te-C],[ce-Q,xe-te],[g-ce,C-xe]],g,C,[1,1],Ee,!0),this},p.__private__.roundedRect=p.roundedRect=function(g,C,Q,te,ce,xe,Ee){if(isNaN(g)||isNaN(C)||isNaN(Q)||isNaN(te)||isNaN(ce)||isNaN(xe)||!Bi(Ee))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $e=4/3*(Math.SQRT2-1);return ce=Math.min(ce,.5*Q),xe=Math.min(xe,.5*te),this.lines([[Q-2*ce,0],[ce*$e,0,ce,xe-xe*$e,ce,xe],[0,te-2*xe],[0,xe*$e,-ce*$e,xe,-ce,xe],[2*ce-Q,0],[-ce*$e,0,-ce,-xe*$e,-ce,-xe],[0,2*xe-te],[0,-xe*$e,ce*$e,-xe,ce,-xe]],g+ce,C,[1,1],Ee,!0),this},p.__private__.ellipse=p.ellipse=function(g,C,Q,te,ce){if(isNaN(g)||isNaN(C)||isNaN(Q)||isNaN(te)||!Bi(ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xe=4/3*(Math.SQRT2-1)*Q,Ee=4/3*(Math.SQRT2-1)*te;return Pl(g+Q,C),Va(g+Q,C-Ee,g+xe,C-te,g,C-te),Va(g-xe,C-te,g-Q,C-Ee,g-Q,C),Va(g-Q,C+Ee,g-xe,C+te,g,C+te),Va(g+xe,C+te,g+Q,C+Ee,g+Q,C),kl(ce),this},p.__private__.circle=p.circle=function(g,C,Q,te){if(isNaN(g)||isNaN(C)||isNaN(Q)||!Bi(te))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(g,C,Q,Q,te)},p.setFont=function(g,C,Q){return Q&&(C=$(C,Q)),We=Nf(g,C,{disableWarning:!1}),this};var Dv=p.__private__.getFont=p.getFont=function(){return Ue[Nf.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var g,C,Q={};for(g in at)if(at.hasOwnProperty(g))for(C in Q[g]=[],at[g])at[g].hasOwnProperty(C)&&Q[g].push(C);return Q},p.addFont=function(g,C,Q,te,ce){var xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xe.indexOf(arguments[3])!==-1?ce=arguments[3]:arguments[3]&&xe.indexOf(arguments[3])==-1&&(Q=$(Q,te)),Cf.call(this,g,C,Q,ce=ce||"Identity-H")};var zo,Tl=r.lineWidth||.200025,ht=p.__private__.getLineWidth=p.getLineWidth=function(){return Tl},Fv=p.__private__.setLineWidth=p.setLineWidth=function(g){return Tl=g,J(F(W(g))+" w"),this};p.__private__.setLineDash=Je.API.setLineDash=Je.API.setLineDashPattern=function(g,C){if(g=g||[],C=C||0,isNaN(C)||!Array.isArray(g))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return g=g.map(function(Q){return F(W(Q))}).join(" "),C=F(W(C)),J("["+g+"] "+C+" d"),this};var Bv=p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*zo};p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*zo};var Uv=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(g){return typeof(g=g||1.15)=="number"&&(zo=g),this},$v=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return zo};Uv(r.lineHeight);var la=p.__private__.getHorizontalCoordinate=function(g){return W(g)},ua=p.__private__.getVerticalCoordinate=function(g){return T===k?g:dt[z].mediaBox.topRightY-dt[z].mediaBox.bottomLeftY-W(g)},Vv=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(g){return F(la(g))},zv=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(g){return F(ua(g))},Ks=r.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Di(Ks)},p.__private__.setStrokeColor=p.setDrawColor=function(g,C,Q,te){return Ks=vi({ch1:g,ch2:C,ch3:Q,ch4:te,pdfColorType:"draw",precision:2}),J(Ks),this};var El=r.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Di(El)},p.__private__.setFillColor=p.setFillColor=function(g,C,Q,te){return El=vi({ch1:g,ch2:C,ch3:Q,ch4:te,pdfColorType:"fill",precision:2}),J(El),this};var Wo=r.textColor||"0 g",Qs=p.__private__.getTextColor=p.getTextColor=function(){return Di(Wo)};p.__private__.setTextColor=p.setTextColor=function(g,C,Q,te){return Wo=vi({ch1:g,ch2:C,ch3:Q,ch4:te,pdfColorType:"text",precision:3}),this};var Ys=r.charSpace,Wv=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ys||0)};p.__private__.setCharSpace=p.setCharSpace=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ys=g,this};var Cl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(g){var C=p.CapJoinStyles[g];if(C===void 0)throw new Error("Line cap style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cl=C,J(C+" J"),this};var Ll=0;p.__private__.setLineJoin=p.setLineJoin=function(g){var C=p.CapJoinStyles[g];if(C===void 0)throw new Error("Line join style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ll=C,J(C+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(g){if(g=g||0,isNaN(g))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(F(W(g))+" M"),this},p.GState=gp,p.setGState=function(g){(g=typeof g=="string"?je[vr[g]]:qo(null,g)).equals(mr)||(J("/"+g.id+" gs"),mr=g)};var qo=function(g,C){if(!g||!vr[g]){var Q=!1;for(var te in je)if(je.hasOwnProperty(te)&&je[te].equals(C)){Q=!0;break}if(Q)C=je[te];else{var ce="GS"+(Object.keys(je).length+1).toString(10);je[ce]=C,C.id=ce}return g&&(vr[g]=C.id),It.publish("addGState",C),C}};p.addGState=function(g,C){return qo(g,C),this},p.saveGraphicsState=function(){return J("q"),Nt.push({key:We,size:Ce,color:Wo}),this},p.restoreGraphicsState=function(){J("Q");var g=Nt.pop();return We=g.key,Ce=g.size,Wo=g.color,mr=null,this},p.setCurrentTransformationMatrix=function(g){return J(g.toString()+" cm"),this},p.comment=function(g){return J("#"+g),this};var Ho=function(g,C){var Q=g||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(xe){isNaN(xe)||(Q=parseFloat(xe))}});var te=C||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return te},set:function(xe){isNaN(xe)||(te=parseFloat(xe))}});var ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ce},set:function(xe){ce=xe.toString()}}),this},Ol=function(g,C,Q,te){Ho.call(this,g,C),this.type="rect";var ce=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ce},set:function(Ee){isNaN(Ee)||(ce=parseFloat(Ee))}});var xe=te||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xe},set:function(Ee){isNaN(Ee)||(xe=parseFloat(Ee))}}),this},Js=function(){this.page=Wt,this.currentPage=z,this.pages=le.slice(0),this.pagesContext=dt.slice(0),this.x=Qe,this.y=At,this.matrix=xt,this.width=Df(z),this.height=fa(z),this.outputDestination=Ae,this.id="",this.objectNumber=-1};Js.prototype.restore=function(){Wt=this.page,z=this.currentPage,dt=this.pagesContext,le=this.pages,Qe=this.x,At=this.y,xt=this.matrix,Ff(z,this.width),da(z,this.height),Ae=this.outputDestination};var Al=function(g,C,Q,te,ce){Mi.push(new Js),Wt=z=0,le=[],Qe=g,At=C,xt=ce,bl([Q,te])};for(var Go in p.beginFormObject=function(g,C,Q,te,ce){return Al(g,C,Q,te,ce),this},p.endFormObject=function(g){return function(C){if(aa[C])Mi.pop().restore();else{var Q=new Js,te="Xo"+(Object.keys(Jr).length+1).toString(10);Q.id=te,aa[C]=te,Jr[te]=Q,It.publish("addFormObject",Q),Mi.pop().restore()}}(g),this},p.doFormObject=function(g,C){var Q=Jr[aa[g]];return J("q"),J(C.toString()+" cm"),J("/"+Q.id+" Do"),J("Q"),this},p.getFormObject=function(g){var C=Jr[aa[g]];return{x:C.x,y:C.y,width:C.width,height:C.height,matrix:C.matrix}},p.save=function(g,C){return g=g||"generated.pdf",(C=C||{}).returnPromise=C.returnPromise||!1,C.returnPromise===!1?(ds(Uo(ca()),g),typeof ds.unload=="function"&&st.setTimeout&&setTimeout(ds.unload,911),this):new Promise(function(Q,te){try{var ce=ds(Uo(ca()),g);typeof ds.unload=="function"&&st.setTimeout&&setTimeout(ds.unload,911),Q(ce)}catch(xe){te(xe.message)}})},Je.API)Je.API.hasOwnProperty(Go)&&(Go==="events"&&Je.API.events.length?function(g,C){var Q,te,ce;for(ce=C.length-1;ce!==-1;ce--)Q=C[ce][0],te=C[ce][1],g.subscribe.apply(g,[Q].concat(typeof te=="function"?[te]:te))}(It,Je.API.events):p[Go]=Je.API[Go]);function Df(g){return dt[g].mediaBox.topRightX-dt[g].mediaBox.bottomLeftX}function Ff(g,C){dt[g].mediaBox.topRightX=C+dt[g].mediaBox.bottomLeftX}function fa(g){return dt[g].mediaBox.topRightY-dt[g].mediaBox.bottomLeftY}function da(g,C){dt[g].mediaBox.topRightY=C+dt[g].mediaBox.bottomLeftY}var Bf=p.getPageWidth=function(g){return Df(g=g||z)/rt},Uf=p.setPageWidth=function(g,C){Ff(g,C*rt)},Ko=p.getPageHeight=function(g){return fa(g=g||z)/rt},$f=p.setPageHeight=function(g,C){da(g,C*rt)};return p.internal={pdfEscape:Zn,getStyle:If,getFont:Dv,getFontSize:Re,getCharSpace:Wv,getTextColor:Qs,getLineHeight:Bv,getLineHeightFactor:$v,getLineWidth:ht,write:gt,getHorizontalCoordinate:la,getVerticalCoordinate:ua,getCoordinateString:Vv,getVerticalCoordinateString:zv,collections:{},newObject:cr,newAdditionalObject:Do,newObjectDeferred:Br,newObjectDeferredBegin:zr,getFilters:mi,putStream:Xn,events:It,scaleFactor:rt,pageSize:{getWidth:function(){return Bf(z)},setWidth:function(g){Uf(z,g)},getHeight:function(){return Ko(z)},setHeight:function(g){$f(z,g)}},encryptionOptions:u,encryption:gr,getEncryptor:function(g){return u!==null?gr.encryptor(g,0):function(C){return C}},output:gi,getNumberOfPages:Af,pages:le,out:J,f2:O,f3:N,getPageInfo:xl,getPageInfoByObjId:Av,getCurrentPageInfo:Nv,getPDFVersion:_,Point:Ho,Rectangle:Ol,Matrix:it,hasHotfix:$o},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Bf(z)},set:function(g){Uf(z,g)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ko(z)},set:function(g){$f(z,g)},enumerable:!0,configurable:!0}),(function(g){for(var C=0,Q=et.length;C<Q;C++){var te=Cf.call(this,g[C][0],g[C][1],g[C][2],et[C][3],!0);d===!1&&(v[te]=!0);var ce=g[C][0].split("-");Ef({id:te,fontName:ce[0],fontStyle:ce[1]||""})}It.publish("addFonts",{fonts:Ue,dictionary:at})}).call(p,et),We="F1",Lf(i,e),It.publish("initialized"),p}gc.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},gc.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gc.prototype.hexToBytes=function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return t.join("")},gc.prototype.processOwnerPassword=function(r,t){return Ey(Ty(t).substr(0,5),r)},gc.prototype.encryptor=function(r,t){var e=Ty(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Ey(e,n)}},gp.prototype.equals=function(r){var t,e="id,objectNumber,equals";if(!r||Ut(r)!==Ut(this))return!1;var n=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;n++}for(t in r)r.hasOwnProperty(t)&&e.indexOf(t)<0&&n--;return n===0},Je.API={events:[]},Je.version="3.0.3";var dr=Je.API,T_=1,zs=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},uc=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mt=function(r){return r.toFixed(2)},so=function(r){return r.toFixed(5)};dr.__acroform__={};var Nn=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},BS=function(r){return r*T_},Hi=function(r){var t=new KC,e=Be.internal.getHeight(r)||0,n=Be.internal.getWidth(r)||0;return t.BBox=[0,0,Number(mt(n)),Number(mt(e))],t},uee=dr.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<t},fee=dr.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<t)},dee=dr.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<t?1:0},xr=dr.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return dee(r,t-1)},kr=dr.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uee(r,t-1)},Pr=dr.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fee(r,t-1)},hee=dr.__acroform__.calculateCoordinates=function(r,t){var e=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=r[0],a=r[1],o=r[2],s=r[3],l={};return l.lowerLeft_X=e(i)||0,l.lowerLeft_Y=n(a+s)||0,l.upperRight_X=e(i+o)||0,l.upperRight_Y=n(a)||0,[Number(mt(l.lowerLeft_X)),Number(mt(l.lowerLeft_Y)),Number(mt(l.upperRight_X)),Number(mt(l.upperRight_Y))]},pee=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],e=r._V||r.DV,n=Cy(r,e),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+i+" "+mt(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=Hi(r);return a.scope=r.scope,a.stream=t.join(`
`),a}},Cy=function(r,t){var e=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=r.multiline?i.map(function(O){return O.split(`
`)}):i.map(function(O){return[O]});var a=e,o=Be.internal.getHeight(r)||0;o=o<0?-o:o;var s=Be.internal.getWidth(r)||0;s=s<0?-s:s;var l=function(O,N,W){if(O+1<i.length){var j=N+" "+i[O+1][0];return th(j,r,W).width<=s-4}return!1};a++;e:for(;a>0;){t="",a--;var c,u,d=th("3",r,a).height,v=r.multiline?o-a:(o-d)/2,p=v+=2,y=0,_=0,x=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+th(t,r,a=12).width+", FieldWidth:"+s+`
`;break}for(var w="",S=0,k=0;k<i.length;k++)if(i.hasOwnProperty(k)){var T=!1;if(i[k].length!==1&&x!==i[k].length-1){if((d+2)*(S+2)+2>o)continue e;w+=i[k][x],T=!0,_=k,k--}else{w=(w+=i[k][x]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var R=parseInt(k),U=l(R,w,a),$=k>=i.length-1;if(U&&!$){w+=" ",x=0;continue}if(U||$){if($)_=R;else if(r.multiline&&(d+2)*(S+2)+2>o)continue e}else{if(!r.multiline||(d+2)*(S+2)+2>o)continue e;_=R}}for(var F="",M=y;M<=_;M++){var Y=i[M];if(r.multiline){if(M===_){F+=Y[x]+" ",x=(x+1)%Y.length;continue}if(M===y){F+=Y[Y.length-1]+" ";continue}}F+=Y[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,u=th(F,r,a).width,r.textAlign){case"right":c=s-u-2;break;case"center":c=(s-u)/2;break;default:c=2}t+=mt(c)+" "+mt(p)+` Td
`,t+="("+zs(F)+`) Tj
`,t+=-mt(c)+` 0 Td
`,p=-(a+2),u=0,y=T?_:_+1,S++,w=""}break}return n.text=t,n.fontSize=a,n},th=function(r,t,e){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},vee={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},mee=function(r,t){var e={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===e.type&&n.object===e.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(e)},gee=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(ji.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(vee)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");T_=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new QC,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&mee(a,e)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(e){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var s=n[o],l=[],c=s.Rect;if(s.Rect&&(s.Rect=hee(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Be.createDefaultAppearanceStream(s),Ut(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=c,s.hasAppearanceStream&&!s.appearanceStreamContent){var u=pee(s);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(s.appearanceStreamContent){var d="";for(var v in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(v)){var p=s.appearanceStreamContent[v];if(d+="/"+v+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}a&&function(_,x){for(var w in _)if(_.hasOwnProperty(w)){var S=w,k=_[w];x.internal.newObjectDeferredBegin(k.objId,!0),Ut(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete _[S]}}(i.internal.acroformPlugin.xForms,i)})(e,r)}),r.internal.acroformPlugin.isInitialized=!0}},GC=dr.__acroform__.arrayToPdfArray=function(r,t,e){var n=function(o){return o};if(Array.isArray(r)){for(var i="[",a=0;a<r.length;a++)switch(a!==0&&(i+=" "),Ut(r[a])){case"boolean":case"number":case"object":i+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(t!==void 0&&e&&(n=e.internal.getEncryptor(t)),i+="("+zs(n(r[a].toString()))+")"):i+=r[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ug=function(r,t,e){var n=function(i){return i};return t!==void 0&&e&&(n=e.internal.getEncryptor(t)),(r=r||"").toString(),"("+zs(n(r))+")"},Ji=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ji.prototype.toString=function(){return this.objId+" 0 R"},Ji.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Ji.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var n=t[e],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:GC(i,this.objId,this.scope)}):i instanceof Ji?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var KC=function(){Ji.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};Nn(KC,Ji);var QC=function(){Ji.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+zs(e(r))+")"}},set:function(e){r=e}})};Nn(QC,Ji);var ji=function r(){Ji.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');t=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!xr(t,3)},set:function(w){w?this.F=kr(t,3):this.F=Pr(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');e=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof yp)return;a="FieldObject"+r.FieldNum++}var w=function(S){return S};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+zs(w(a))+")"},set:function(w){a=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(w){a=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(w){s=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/T_:c},set:function(w){c=w}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof yp||this instanceof ks))return Ug(d,this.objId,this.scope)},set:function(w){w=w.toString(),d=w}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof $r==0?Ug(v,this.objId,this.scope):v},set:function(w){w=w.toString(),v=this instanceof $r==0?w.substr(0,1)==="("?uc(w.substr(1,w.length-2)):uc(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $r==1?uc(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof $r==1?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof $r==0?Ug(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof $r==0?w.substr(0,1)==="("?uc(w.substr(1,w.length-2)):uc(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $r==1?uc(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof $r==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(w){w=!!w,_=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(w){y=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,1)},set:function(w){w?this.Ff=kr(this.Ff,1):this.Ff=Pr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,2)},set:function(w){w?this.Ff=kr(this.Ff,2):this.Ff=Pr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,3)},set:function(w){w?this.Ff=kr(this.Ff,3):this.Ff=Pr(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');x=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(x){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};Nn(ji,Ji);var $c=function(){ji.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return GC(t,this.objId,this.scope)},set:function(e){var n,i;i=[],typeof(n=e)=="string"&&(i=function(a,o,s){s||(s=1);for(var l,c=[];l=o.exec(a);)c.push(l[s]);return c}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,18)},set:function(e){e?this.Ff=kr(this.Ff,18):this.Ff=Pr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=kr(this.Ff,19):this.Ff=Pr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,20)},set:function(e){e?(this.Ff=kr(this.Ff,20),t.sort()):this.Ff=Pr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,22)},set:function(e){e?this.Ff=kr(this.Ff,22):this.Ff=Pr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,23)},set:function(e){e?this.Ff=kr(this.Ff,23):this.Ff=Pr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,27)},set:function(e){e?this.Ff=kr(this.Ff,27):this.Ff=Pr(this.Ff,27)}}),this.hasAppearanceStream=!1};Nn($c,ji);var Vc=function(){$c.call(this),this.fontName="helvetica",this.combo=!1};Nn(Vc,$c);var zc=function(){Vc.call(this),this.combo=!0};Nn(zc,Vc);var Oh=function(){zc.call(this),this.edit=!0};Nn(Oh,zc);var $r=function(){ji.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,15)},set:function(e){e?this.Ff=kr(this.Ff,15):this.Ff=Pr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,16)},set:function(e){e?this.Ff=kr(this.Ff,16):this.Ff=Pr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,17)},set:function(e){e?this.Ff=kr(this.Ff,17):this.Ff=Pr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,26)},set:function(e){e?this.Ff=kr(this.Ff,26):this.Ff=Pr(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(a){return a};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+zs(e(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){Ut(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}})};Nn($r,ji);var Ah=function(){$r.call(this),this.pushButton=!0};Nn(Ah,$r);var Wc=function(){$r.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};Nn(Wc,$r);var yp=function(){var r,t;ji.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+zs(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ut(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Be.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Nn(yp,ji),Wc.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},Wc.prototype.createOption=function(r){var t=new yp;return t.Parent=this,t.optionName=r,this.Kids.push(t),yee.call(this.scope,t),t};var Nh=function(){$r.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Be.CheckBox.createAppearanceStream()};Nn(Nh,$r);var ks=function(){ji.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,13)},set:function(t){t?this.Ff=kr(this.Ff,13):this.Ff=Pr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,21)},set:function(t){t?this.Ff=kr(this.Ff,21):this.Ff=Pr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,23)},set:function(t){t?this.Ff=kr(this.Ff,23):this.Ff=Pr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,24)},set:function(t){t?this.Ff=kr(this.Ff,24):this.Ff=Pr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,25)},set:function(t){t?this.Ff=kr(this.Ff,25):this.Ff=Pr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,26)},set:function(t){t?this.Ff=kr(this.Ff,26):this.Ff=Pr(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Nn(ks,ji);var Rh=function(){ks.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!xr(this.Ff,14)},set:function(r){r?this.Ff=kr(this.Ff,14):this.Ff=Pr(this.Ff,14)}}),this.password=!0};Nn(Rh,ks);var Be={CheckBox:{createAppearanceStream:function(){return{N:{On:Be.CheckBox.YesNormal},D:{On:Be.CheckBox.YesPushDown,Off:Be.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),a=Cy(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+mt(Be.internal.getWidth(r))+" "+mt(Be.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+mt(a.fontSize)+" Tf "+i),e.push("BT"),e.push(a.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(r){var t=Hi(r);t.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],a=Be.internal.getHeight(r),o=Be.internal.getWidth(r),s=Cy(r,r.caption);return i.push("1 g"),i.push("0 0 "+mt(o)+" "+mt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+mt(o-1)+" "+mt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+mt(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+mt(Be.internal.getWidth(r))+" "+mt(Be.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:Be.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=Be.RadioButton.Circle.YesNormal,t.D[r]=Be.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=Be.internal.getWidth(r)<=Be.internal.getHeight(r)?Be.internal.getWidth(r)/4:Be.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Be.internal.Bezier_C,a=Number((n*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+so(Be.internal.getWidth(r)/2)+" "+so(Be.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),e.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),e.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),e.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=Be.internal.getWidth(r)<=Be.internal.getHeight(r)?Be.internal.getWidth(r)/4:Be.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Be.internal.Bezier_C).toFixed(5)),o=Number((n*Be.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+so(Be.internal.getWidth(r)/2)+" "+so(Be.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+so(Be.internal.getWidth(r)/2)+" "+so(Be.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),e.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),e.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),e.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=Be.internal.getWidth(r)<=Be.internal.getHeight(r)?Be.internal.getWidth(r)/4:Be.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Be.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+so(Be.internal.getWidth(r)/2)+" "+so(Be.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:Be.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=Be.RadioButton.Cross.YesNormal,t.D[r]=Be.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=Be.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+mt(Be.internal.getWidth(r)-2)+" "+mt(Be.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(mt(n.x1.x)+" "+mt(n.x1.y)+" m"),e.push(mt(n.x2.x)+" "+mt(n.x2.y)+" l"),e.push(mt(n.x4.x)+" "+mt(n.x4.y)+" m"),e.push(mt(n.x3.x)+" "+mt(n.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=Be.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+mt(Be.internal.getWidth(r))+" "+mt(Be.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+mt(Be.internal.getWidth(r)-2)+" "+mt(Be.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(mt(e.x1.x)+" "+mt(e.x1.y)+" m"),n.push(mt(e.x2.x)+" "+mt(e.x2.y)+" l"),n.push(mt(e.x4.x)+" "+mt(e.x4.y)+" m"),n.push(mt(e.x3.x)+" "+mt(e.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+mt(Be.internal.getWidth(r))+" "+mt(Be.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+e}};Be.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=Be.internal.getWidth(r),e=Be.internal.getHeight(r),n=Math.min(t,e);return{x1:{x:(t-n)/2,y:(e-n)/2+n},x2:{x:(t-n)/2+n,y:(e-n)/2},x3:{x:(t-n)/2,y:(e-n)/2},x4:{x:(t-n)/2+n,y:(e-n)/2+n}}}},Be.internal.getWidth=function(r){var t=0;return Ut(r)==="object"&&(t=BS(r.Rect[2])),t},Be.internal.getHeight=function(r){var t=0;return Ut(r)==="object"&&(t=BS(r.Rect[3])),t};var yee=dr.addField=function(r){if(gee(this,r),!(r instanceof ji))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};dr.AcroFormChoiceField=$c,dr.AcroFormListBox=Vc,dr.AcroFormComboBox=zc,dr.AcroFormEditBox=Oh,dr.AcroFormButton=$r,dr.AcroFormPushButton=Ah,dr.AcroFormRadioButton=Wc,dr.AcroFormCheckBox=Nh,dr.AcroFormTextField=ks,dr.AcroFormPasswordField=Rh,dr.AcroFormAppearance=Be,dr.AcroForm={ChoiceField:$c,ListBox:Vc,ComboBox:zc,EditBox:Oh,Button:$r,PushButton:Ah,RadioButton:Wc,CheckBox:Nh,TextField:ks,PasswordField:Rh,Appearance:Be},Je.AcroForm={ChoiceField:$c,ListBox:Vc,ComboBox:zc,EditBox:Oh,Button:$r,PushButton:Ah,RadioButton:Wc,CheckBox:Nh,TextField:ks,PasswordField:Rh,Appearance:Be};Je.AcroForm;function YC(r){return r.reduce(function(t,e,n){return t[e]=n,t},{})}(function(r){var t="addImage_";r.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(O,N){var W,j,Z,X,oe,q=e;if((N=N||e)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(U(O))for(oe in n)for(Z=n[oe],W=0;W<Z.length;W+=1){for(X=!0,j=0;j<Z[W].length;j+=1)if(Z[W][j]!==void 0&&Z[W][j]!==O[j]){X=!1;break}if(X===!0){q=oe;break}}else for(oe in n)for(Z=n[oe],W=0;W<Z.length;W+=1){for(X=!0,j=0;j<Z[W].length;j+=1)if(Z[W][j]!==void 0&&Z[W][j]!==O.charCodeAt(j)){X=!1;break}if(X===!0){q=oe;break}}return q===e&&N!==e&&(q=N),q},a=function O(N){for(var W=this.internal.write,j=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:N.width}),X.push({key:"Height",value:N.height}),N.colorSpace===w.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===w.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)&&N.transparency.length>0){for(var oe="",q=0,re=N.transparency.length;q<re;q++)oe+=N.transparency[q]+" "+N.transparency[q]+" ";X.push({key:"Mask",value:"["+oe+"]"})}N.sMask!==void 0&&X.push({key:"SMask",value:N.objectId+1+" 0 R"});var fe=N.filter!==void 0?["/"+N.filter]:void 0;if(j({data:N.data,additionalKeyValues:X,alreadyAppliedFilters:fe,objectId:N.objectId}),W("endobj"),"sMask"in N&&N.sMask!==void 0){var ne,E=(ne=N.sMaskBitsPerComponent)!==null&&ne!==void 0?ne:N.bitsPerComponent,z={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:E,data:N.sMask};"filter"in N&&(z.decodeParameters="/Predictor ".concat(N.predictor," /Colors 1 /BitsPerComponent ").concat(E," /Columns ").concat(N.width),z.filter=N.filter),O.call(this,z)}if(N.colorSpace===w.INDEXED){var H=this.internal.newObject();j({data:F(new Uint8Array(N.palette)),objectId:H}),W("endobj")}},o=function(){var O=this.internal.collections[t+"images"];for(var N in O)a.call(this,O[N])},s=function(){var O,N=this.internal.collections[t+"images"],W=this.internal.write;for(var j in N)W("/I"+(O=N[j]).index,O.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},c=function(){var O=this.internal.collections[t+"images"];return l.call(this),O},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},d=function(O){return typeof r["process"+O.toUpperCase()]=="function"},v=function(O){return Ut(O)==="object"&&O.nodeType===1},p=function(O,N){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var W=""+O.getAttribute("src");if(W.indexOf("data:image/")===0)return Lh(unescape(W).split("base64,").pop());var j=r.loadFile(W,!0);if(j!==void 0)return j}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var Z;switch(N){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return Lh(O.toDataURL(Z,1).split("base64,").pop())}},y=function(O){var N=this.internal.collections[t+"images"];if(N){for(var W in N)if(O===N[W].alias)return N[W]}},_=function(O,N,W){return O||N||(O=-96,N=-96),O<0&&(O=-1*W.width*72/O/this.internal.scaleFactor),N<0&&(N=-1*W.height*72/N/this.internal.scaleFactor),O===0&&(O=N*W.width/W.height),N===0&&(N=O*W.height/W.width),[O,N]},x=function(O,N,W,j,Z,X){var oe=_.call(this,W,j,Z),q=this.internal.getCoordinateString,re=this.internal.getVerticalCoordinateString,fe=c.call(this);if(W=oe[0],j=oe[1],fe[Z.index]=Z,X){X*=Math.PI/180;var ne=Math.cos(X),E=Math.sin(X),z=function(ee){return ee.toFixed(4)},H=[z(ne),z(E),z(-1*E),z(ne),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,q(O),re(N+j),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([q(W),"0","0",q(j),"0","0","cm"].join(" "))):this.internal.write([q(W),"0","0",q(j),q(O),re(N+j),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},w=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=r.__addimage__.sHashCode=function(O){var N,W,j=0;if(typeof O=="string")for(W=O.length,N=0;N<W;N++)j=(j<<5)-j+O.charCodeAt(N),j|=0;else if(U(O))for(W=O.byteLength/2,N=0;N<W;N++)j=(j<<5)-j+O[N],j|=0;return j},T=r.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var N=!0;return O.length===0&&(N=!1),O.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(N=!1),N},R=r.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var N=O.indexOf(",");return N<0?null:O.substring(0,N).trim().endsWith("base64")?O.substring(N+1):null};r.__addimage__.isArrayBuffer=function(O){return O instanceof ArrayBuffer};var U=r.__addimage__.isArrayBufferView=function(O){return O instanceof Int8Array||O instanceof Uint8Array||O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array},$=r.__addimage__.binaryStringToUint8Array=function(O){for(var N=O.length,W=new Uint8Array(N),j=0;j<N;j++)W[j]=O.charCodeAt(j);return W},F=r.__addimage__.arrayBufferToBinaryString=function(O){for(var N="",W=U(O)?O:new Uint8Array(O),j=0;j<W.length;j+=8192)N+=String.fromCharCode.apply(null,W.subarray(j,j+8192));return N};r.addImage=function(){var O,N,W,j,Z,X,oe,q,re;if(typeof arguments[1]=="number"?(N=e,W=arguments[1],j=arguments[2],Z=arguments[3],X=arguments[4],oe=arguments[5],q=arguments[6],re=arguments[7]):(N=arguments[1],W=arguments[2],j=arguments[3],Z=arguments[4],X=arguments[5],oe=arguments[6],q=arguments[7],re=arguments[8]),Ut(O=arguments[0])==="object"&&!v(O)&&"imageData"in O){var fe=O;O=fe.imageData,N=fe.format||N||e,W=fe.x||W||0,j=fe.y||j||0,Z=fe.w||fe.width||Z,X=fe.h||fe.height||X,oe=fe.alias||oe,q=fe.compression||q,re=fe.rotation||fe.angle||re}var ne=this.internal.getFilters();if(q===void 0&&ne.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(W)||isNaN(j))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var E=M.call(this,O,N,oe,q);return x.call(this,W,j,Z,X,E,re),this};var M=function(O,N,W,j){var Z,X,oe;if(typeof O=="string"&&i(O)===e){O=unescape(O);var q=Y(O,!1);(q!==""||(q=r.loadFile(O,!0))!==void 0)&&(O=q)}if(v(O)&&(O=p(O,N)),N=i(O,N),!d(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((oe=W)==null||oe.length===0)&&(W=function(re){return typeof re=="string"||U(re)?k(re):U(re.data)?k(re.data):null}(O)),(Z=y.call(this,W))||(O instanceof Uint8Array||N==="RGBA"||(X=O,O=$(O)),Z=this["process"+N.toUpperCase()](O,u.call(this),W,function(re){return re&&typeof re=="string"&&(re=re.toUpperCase()),re in r.image_compression?re:S.NONE}(j),X)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},Y=r.__addimage__.convertBase64ToBinaryString=function(O,N){N=typeof N!="boolean"||N;var W,j="";if(typeof O=="string"){var Z;W=(Z=R(O))!==null&&Z!==void 0?Z:O;try{j=Lh(W)}catch(X){if(N)throw T(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return j};r.getImageProperties=function(O){var N,W,j="";if(v(O)&&(O=p(O)),typeof O=="string"&&i(O)===e&&((j=Y(O,!1))===""&&(j=r.loadFile(O)||""),O=j),W=i(O),!d(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(O instanceof Uint8Array||(O=$(O)),!(N=this["process"+W.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=W,N}})(Je.API),function(r){var t=function(e){if(e!==void 0&&e!="")return!0};Je.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var n,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((n=c[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){n=c[v];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(_.objId),S=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+p(w(n.contents))+")",a+=" /Popup "+x.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+p(w(S))+") >>",_.content=a;var k=_.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+k,n.open&&(a+=" /Open true"),a+=" >>",x.content=a,this.internal.write(_.objId,"0 R",x.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var T=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(y(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var R=this.annotations._nameMap[n.options.name];n.options.pageNumber=R.page,n.options.top=R.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var U=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+U+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},r.link=function(e,n,i,a,o){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(e),y:c(n),w:l(e+i),h:c(n+a)},options:o,type:"link"})},r.textWithLink=function(e,n,i,a){var o,s,l=this.getTextWidth(e),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var u=this.splitTextToSize(e,s).length;o=Math.ceil(c*u)}else s=l,o=c;return this.text(e,n,i,a),i+=.2*c,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-c,s,o,a),l},r.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}}(Je.API),function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(_){return t[_.charCodeAt(0)]!==void 0},o=r.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},s=r.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length<=2},l=r.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&i.indexOf(_.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length>=1};var c=r.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length>=3};var u=r.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&a(_)&&t[_.charCodeAt(0)].length==4},d=r.__arabicParser__.resolveLigatures=function(_){var x=0,w=e,S="",k=0;for(x=0;x<_.length;x+=1)w[_.charCodeAt(x)]!==void 0?(k++,typeof(w=w[_.charCodeAt(x)])=="number"&&(S+=String.fromCharCode(w),w=e,k=0),x===_.length-1&&(w=e,S+=_.charAt(x-(k-1)),x-=k-1,k=0)):(w=e,S+=_.charAt(x-k),x-=k,k=0);return S};r.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&n[_.charCodeAt(0)]!==void 0};var v=r.__arabicParser__.getCorrectForm=function(_,x,w){return o(_)?a(_)===!1?-1:!c(_)||!o(x)&&!o(w)||!o(w)&&s(x)||s(_)&&!o(x)||s(_)&&l(x)||s(_)&&s(x)?0:u(_)&&o(x)&&!s(x)&&o(w)&&c(w)?3:s(_)||!o(w)?1:2:-1},p=function(_){var x=0,w=0,S=0,k="",T="",R="",U=(_=_||"").split("\\s+"),$=[];for(x=0;x<U.length;x+=1){for($.push(""),w=0;w<U[x].length;w+=1)k=U[x][w],T=U[x][w-1],R=U[x][w+1],o(k)?(S=v(k,T,R),$[x]+=S!==-1?String.fromCharCode(t[k.charCodeAt(0)][S]):k):$[x]+=k;$[x]=d($[x])}return $.join(" ")},y=r.__arabicParser__.processArabic=r.processArabic=function(){var _,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(x)){var S=0;for(w=[],S=0;S<x.length;S+=1)Array.isArray(x[S])?w.push([p(x[S][0]),x[S][1],x[S][2]]):w.push([p(x[S])]);_=w}else _=p(x);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};r.events.push(["preProcessText",y])}(Je.API),Je.API.autoPrint=function(r){var t;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(r){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(s){e=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,n){var i;if((e=e||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Je.API),function(r){var t={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(_){u=_}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(_){v=_}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(_){y=_}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},r.getTextDimensions=function(l,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,p=0,y=0,_=0,x=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(k,T){return k.concat(x.splitTextToSize(T,w))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)p<(_=this.getStringUnitWidth(l[S],{font:d})*u)&&(p=_);return p!==0&&(y=l.length),{w:p/=v,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/v,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=r.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};r.table=function(l,c,u,d,v){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,y,_,x,w=[],S=[],k=[],T={},R={},U=[],$=[],F=(v=v||{}).autoSize||!1,M=v.printHeaders!==!1,Y=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,O=v.margins||Object.assign({width:this.getPageWidth()},t),N=typeof v.padding=="number"?v.padding:3,W=v.headerBackgroundColor||"#c8c8c8",j=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=W,this.internal.__cell__.headerTextColor=j,this.setFontSize(Y),d==null)S=w=Object.keys(u[0]),k=w.map(function(){return"left"});else if(Array.isArray(d)&&Ut(d[0])==="object")for(w=d.map(function(fe){return fe.name}),S=d.map(function(fe){return fe.prompt||fe.name||""}),k=d.map(function(fe){return fe.align||"left"}),p=0;p<d.length;p+=1)R[d[p].name]=.7499990551181103*d[p].width;else Array.isArray(d)&&typeof d[0]=="string"&&(S=w=d,k=w.map(function(){return"left"}));if(F||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<w.length;p+=1){for(T[x=w[p]]=u.map(function(fe){return fe[x]}),this.setFont(void 0,"bold"),U.push(this.getTextDimensions(S[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=T[x],this.setFont(void 0,"normal"),_=0;_<y.length;_+=1)U.push(this.getTextDimensions(y[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[x]=Math.max.apply(null,U)+N+N,U=[]}if(M){var Z={};for(p=0;p<w.length;p+=1)Z[w[p]]={},Z[w[p]].text=S[p],Z[w[p]].align=k[p];var X=s.call(this,Z,R);$=w.map(function(fe){return new a(l,c,R[fe],X,Z[fe].text,void 0,Z[fe].align)}),this.setTableHeaderRow($),this.printHeaderRow(1,!1)}var oe=d.reduce(function(fe,ne){return fe[ne.name]=ne.align,fe},{});for(p=0;p<u.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:u[p]},this);var q=s.call(this,u[p],R);for(_=0;_<w.length;_+=1){var re=u[p][w[_]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:_,data:re},this),o.call(this,new a(l,c,R[w[_]],q,re,p+2,oe[w[_]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var s=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(p){var y=l[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/v+u+u},this).reduce(function(p,y){return Math.max(p,y)},0)};r.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},r.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,v.push(u)),u.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),e=!1}}(Je.API);var JC={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},XC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ly=YC(XC),ZC=[100,200,300,400,500,600,700,800,900],_ee=YC(ZC);function $g(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),e=function(a){return JC[a=a||"normal"]?a:"normal"}(r.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(r.weight),i=function(a){return typeof Ly[a=a||"normal"]=="number"?a:"normal"}(r.stretch);return{family:t,style:e,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:t,style:[i,e,n].join(" ")}}}function US(r,t,e,n){var i;for(i=e;i>=0&&i<t.length;i+=n)if(r[t[i]])return r[t[i]];for(i=e;i>=0&&i<t.length;i-=n)if(r[t[i]])return r[t[i]]}var wee={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$S={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function VS(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function zS(r){return r.trimLeft()}function bee(r,t){for(var e=0;e<r.length;){if(r.charAt(e)===t)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function See(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var rh,WS,qS,fc,nh,HS,GS,KS,Vg=["times"];function QS(r,t,e,n,i){var a=4,o=JS;switch(i){case Je.API.image_compression.FAST:a=1,o=YS;break;case Je.API.image_compression.MEDIUM:a=6,o=XS;break;case Je.API.image_compression.SLOW:a=9,o=ZS}r=function(l,c,u,d){for(var v,p=l.length/c,y=new Uint8Array(l.length+p),_=[xee,YS,JS,XS,ZS],x=0;x<p;x+=1){var w=x*c,S=l.subarray(w,w+c);if(d)y.set(d(S,u,v),w+x);else{for(var k=_.length,T=[],R=0;R<k;R+=1)T[R]=_[R](S,u,v);var U=Pee(T.concat());y.set(T[U],w+x)}v=S}return y}(r,t,Math.ceil(e*n/8),o);var s=Sy(r,{level:a});return Je.API.__addimage__.arrayBufferToBinaryString(s)}function xee(r){var t=Array.apply([],r);return t.unshift(0),t}function YS(r,t){var e=r.length,n=[];n[0]=1;for(var i=0;i<e;i+=1){var a=r[i-t]||0;n[i+1]=r[i]-a+256&255}return n}function JS(r,t,e){var n=r.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var o=e&&e[a]||0;i[a+1]=r[a]-o+256&255}return i}function XS(r,t,e){var n=r.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var o=r[a-t]||0,s=e&&e[a]||0;i[a+1]=r[a]+256-(o+s>>>1)&255}return i}function ZS(r,t,e){var n=r.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var o=kee(r[a-t]||0,e&&e[a]||0,e&&e[a-t]||0);i[a+1]=r[a]-o+256&255}return i}function kee(r,t,e){if(r===t&&t===e)return r;var n=Math.abs(t-e),i=Math.abs(r-e),a=Math.abs(r+t-e-e);return n<=i&&n<=a?r:i<=a?t:e}function Pee(r){var t=r.map(function(e){return e.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function zg(r,t,e){var n=t*e,i=Math.floor(n/8),a=16-(n-8*i+e),o=(1<<e)-1;return eL(r,i)>>a&o}function ex(r,t,e,n){var i=e*n,a=Math.floor(i/8),o=16-(i-8*a+n),s=(1<<n)-1,l=(t&s)<<o;(function(c,u,d){if(u+1<c.byteLength)c.setUint16(u,d,!1);else{var v=d>>8&255;c.setUint8(u,v)}})(r,a,eL(r,a)&~(s<<o)&65535|l)}function eL(r,t){return t+1<r.byteLength?r.getUint16(t,!1):r.getUint8(t)<<8}function Tee(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[t++]|r[t++]<<8,n=r[t++]|r[t++]<<8,i=r[t++],a=i>>7,o=1<<1+(7&i);r[t++],r[t++];var s=null,l=null;a&&(s=t,l=o,t+=3*o);var c=!0,u=[],d=0,v=null,p=0,y=null;for(this.width=e,this.height=n;c&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,y=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((O=r[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var _=r[t++];d=r[t++]|r[t++]<<8,v=r[t++],1&_||(v=null),p=_>>2&7,t++;break;case 254:for(;;){if(!((O=r[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var x=r[t++]|r[t++]<<8,w=r[t++]|r[t++]<<8,S=r[t++]|r[t++]<<8,k=r[t++]|r[t++]<<8,T=r[t++],R=T>>6&1,U=1<<1+(7&T),$=s,F=l,M=!1;T>>7&&(M=!0,$=t,F=U,t+=3*U);var Y=t;for(t++;;){var O;if(!((O=r[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}u.push({x,y:w,width:S,height:k,has_local_palette:M,palette_offset:$,palette_size:F,data_offset:Y,data_length:t-Y,transparent_index:v,interlaced:!!R,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(N){if(N<0||N>=u.length)throw new Error("Frame index out of range.");return u[N]},this.decodeAndBlitFrameBGRA=function(N,W){var j=this.frameInfo(N),Z=j.width*j.height,X=new Uint8Array(Z);tx(r,j.data_offset,X,Z);var oe=j.palette_offset,q=j.transparent_index;q===null&&(q=256);var re=j.width,fe=e-re,ne=re,E=4*(j.y*e+j.x),z=4*((j.y+j.height)*e+j.x),H=E,ee=4*fe;j.interlaced===!0&&(ee+=4*e*7);for(var ae=8,ue=0,_e=X.length;ue<_e;++ue){var me=X[ue];if(ne===0&&(ne=re,(H+=ee)>=z&&(ee=4*fe+4*e*(ae-1),H=E+(re+fe)*(ae<<1),ae>>=1)),me===q)H+=4;else{var be=r[oe+3*me],le=r[oe+3*me+1],Pe=r[oe+3*me+2];W[H++]=Pe,W[H++]=le,W[H++]=be,W[H++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(N,W){var j=this.frameInfo(N),Z=j.width*j.height,X=new Uint8Array(Z);tx(r,j.data_offset,X,Z);var oe=j.palette_offset,q=j.transparent_index;q===null&&(q=256);var re=j.width,fe=e-re,ne=re,E=4*(j.y*e+j.x),z=4*((j.y+j.height)*e+j.x),H=E,ee=4*fe;j.interlaced===!0&&(ee+=4*e*7);for(var ae=8,ue=0,_e=X.length;ue<_e;++ue){var me=X[ue];if(ne===0&&(ne=re,(H+=ee)>=z&&(ee=4*fe+4*e*(ae-1),H=E+(re+fe)*(ae<<1),ae>>=1)),me===q)H+=4;else{var be=r[oe+3*me],le=r[oe+3*me+1],Pe=r[oe+3*me+2];W[H++]=be,W[H++]=le,W[H++]=Pe,W[H++]=255}--ne}}}function tx(r,t,e,n){for(var i=r[t++],a=1<<i,o=a+1,s=o+1,l=i+1,c=(1<<l)-1,u=0,d=0,v=0,p=r[t++],y=new Int32Array(4096),_=null;;){for(;u<16&&p!==0;)d|=r[t++]<<u,u+=8,p===1?p=r[t++]:--p;if(u<l)break;var x=d&c;if(d>>=l,u-=l,x!==a){if(x===o)break;for(var w=x<s?x:_,S=0,k=w;k>a;)k=y[k]>>8,++S;var T=k;if(v+S+(w!==x?1:0)>n)return void Gt.log("Warning, gif stream longer than expected.");e[v++]=T;var R=v+=S;for(w!==x&&(e[v++]=T),k=w;S--;)k=y[k],e[--R]=255&k,k>>=8;_!==null&&s<4096&&(y[s++]=_<<8|T,s>=c+1&&l<12&&(++l,c=c<<1|1)),_=x}else s=o+1,c=(1<<(l=i+1))-1,_=null}return v!==n&&Gt.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Wg(r){var t,e,n,i,a,o=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),v=new Array(65535),p=new Array(64),y=new Array(64),_=[],x=0,w=7,S=new Array(64),k=new Array(64),T=new Array(64),R=new Array(256),U=new Array(2048),$=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(E,z){for(var H=0,ee=0,ae=new Array,ue=1;ue<=16;ue++){for(var _e=1;_e<=E[ue];_e++)ae[z[ee]]=[],ae[z[ee]][0]=H,ae[z[ee]][1]=ue,ee++,H++;H*=2}return ae}function oe(E){for(var z=E[0],H=E[1]-1;H>=0;)z&1<<H&&(x|=1<<w),H--,--w<0&&(x==255?(q(255),q(0)):q(x),w=7,x=0)}function q(E){_.push(E)}function re(E){q(E>>8&255),q(255&E)}function fe(E,z,H,ee,ae){for(var ue,_e=ae[0],me=ae[240],be=function(Ce,Ve){var Re,pt,Ge,St,ct,ut,Ot,ot,We,rt,Qe=0;for(We=0;We<8;++We){Re=Ce[Qe],pt=Ce[Qe+1],Ge=Ce[Qe+2],St=Ce[Qe+3],ct=Ce[Qe+4],ut=Ce[Qe+5],Ot=Ce[Qe+6];var At=Re+(ot=Ce[Qe+7]),xt=Re-ot,Ue=pt+Ot,at=pt-Ot,Nt=Ge+ut,ze=Ge-ut,ft=St+ct,je=St-ct,vr=At+ft,mr=At-ft,Wt=Ue+Nt,dt=Ue-Nt;Ce[Qe]=vr+Wt,Ce[Qe+4]=vr-Wt;var It=.707106781*(dt+mr);Ce[Qe+2]=mr+It,Ce[Qe+6]=mr-It;var Mo=.382683433*((vr=je+ze)-(dt=at+xt)),Jr=.5411961*vr+Mo,aa=1.306562965*dt+Mo,Mi=.707106781*(Wt=ze+at),it=xt+Mi,oa=xt-Mi;Ce[Qe+5]=oa+Jr,Ce[Qe+3]=oa-Jr,Ce[Qe+1]=it+aa,Ce[Qe+7]=it-aa,Qe+=8}for(Qe=0,We=0;We<8;++We){Re=Ce[Qe],pt=Ce[Qe+8],Ge=Ce[Qe+16],St=Ce[Qe+24],ct=Ce[Qe+32],ut=Ce[Qe+40],Ot=Ce[Qe+48];var sa=Re+(ot=Ce[Qe+56]),Yn=Re-ot,Jn=pt+Ot,cr=pt-Ot,Br=Ge+ut,zr=Ge-ut,Do=St+ct,Ua=St-ct,pi=sa+Do,Di=sa-Do,vi=Jn+Br,mi=Jn-Br;Ce[Qe]=pi+vi,Ce[Qe+32]=pi-vi;var Xn=.707106781*(mi+Di);Ce[Qe+16]=Di+Xn,Ce[Qe+48]=Di-Xn;var Fo=.382683433*((pi=Ua+zr)-(mi=cr+Yn)),Fi=.5411961*pi+Fo,Bo=1.306562965*mi+Fo,Ws=.707106781*(vi=zr+cr),qs=Yn+Ws,Hs=Yn-Ws;Ce[Qe+40]=Hs+Fi,Ce[Qe+24]=Hs-Fi,Ce[Qe+8]=qs+Bo,Ce[Qe+56]=qs-Bo,Qe++}for(We=0;We<64;++We)rt=Ce[We]*Ve[We],p[We]=rt>0?rt+.5|0:rt-.5|0;return p}(E,z),le=0;le<64;++le)y[$[le]]=be[le];var Pe=y[0]-H;H=y[0],Pe==0?oe(ee[0]):(oe(ee[v[ue=32767+Pe]]),oe(d[ue]));for(var Ae=63;Ae>0&&y[Ae]==0;)Ae--;if(Ae==0)return oe(_e),H;for(var ge,J=1;J<=Ae;){for(var gt=J;y[J]==0&&J<=Ae;)++J;var nt=J-gt;if(nt>=16){ge=nt>>4;for(var et=1;et<=ge;++et)oe(me);nt&=15}ue=32767+y[J],oe(ae[(nt<<4)+v[ue]]),oe(d[ue]),J++}return Ae!=63&&oe(_e),H}function ne(E){E=Math.min(Math.max(E,1),100),a!=E&&(function(z){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var ae=o((H[ee]*z+50)/100);ae=Math.min(Math.max(ae,1),255),s[$[ee]]=ae}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_e=0;_e<64;_e++){var me=o((ue[_e]*z+50)/100);me=Math.min(Math.max(me,1),255),l[$[_e]]=me}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],le=0,Pe=0;Pe<8;Pe++)for(var Ae=0;Ae<8;Ae++)c[le]=1/(s[$[le]]*be[Pe]*be[Ae]*8),u[le]=1/(l[$[le]]*be[Pe]*be[Ae]*8),le++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),a=E)}this.encode=function(E,z){z&&ne(z),_=new Array,x=0,w=7,re(65496),re(65504),re(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),re(1),re(1),q(0),q(0),function(){re(65499),re(132),q(0);for(var pt=0;pt<64;pt++)q(s[pt]);q(1);for(var Ge=0;Ge<64;Ge++)q(l[Ge])}(),function(pt,Ge){re(65472),re(17),q(8),re(Ge),re(pt),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(E.width,E.height),function(){re(65476),re(418),q(0);for(var pt=0;pt<16;pt++)q(F[pt+1]);for(var Ge=0;Ge<=11;Ge++)q(M[Ge]);q(16);for(var St=0;St<16;St++)q(Y[St+1]);for(var ct=0;ct<=161;ct++)q(O[ct]);q(1);for(var ut=0;ut<16;ut++)q(N[ut+1]);for(var Ot=0;Ot<=11;Ot++)q(W[Ot]);q(17);for(var ot=0;ot<16;ot++)q(j[ot+1]);for(var We=0;We<=161;We++)q(Z[We])}(),re(65498),re(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var H=0,ee=0,ae=0;x=0,w=7,this.encode.displayName="_encode_";for(var ue,_e,me,be,le,Pe,Ae,ge,J,gt=E.data,nt=E.width,et=E.height,Ce=4*nt,Ve=0;Ve<et;){for(ue=0;ue<Ce;){for(le=Ce*Ve+ue,Ae=-1,ge=0,J=0;J<64;J++)Pe=le+(ge=J>>3)*Ce+(Ae=4*(7&J)),Ve+ge>=et&&(Pe-=Ce*(Ve+1+ge-et)),ue+Ae>=Ce&&(Pe-=ue+Ae-Ce+4),_e=gt[Pe++],me=gt[Pe++],be=gt[Pe++],S[J]=(U[_e]+U[me+256|0]+U[be+512|0]>>16)-128,k[J]=(U[_e+768|0]+U[me+1024|0]+U[be+1280|0]>>16)-128,T[J]=(U[_e+1280|0]+U[me+1536|0]+U[be+1792|0]>>16)-128;H=fe(S,c,H,t,n),ee=fe(k,u,ee,e,i),ae=fe(T,u,ae,e,i),ue+=32}Ve+=8}if(w>=0){var Re=[];Re[1]=w+1,Re[0]=(1<<w+1)-1,oe(Re)}return re(65497),new Uint8Array(_)},r=r||50,function(){for(var E=String.fromCharCode,z=0;z<256;z++)R[z]=E(z)}(),t=X(F,M),e=X(N,W),n=X(Y,O),i=X(j,Z),function(){for(var E=1,z=2,H=1;H<=15;H++){for(var ee=E;ee<z;ee++)v[32767+ee]=H,d[32767+ee]=[],d[32767+ee][1]=H,d[32767+ee][0]=ee;for(var ae=-(z-1);ae<=-E;ae++)v[32767+ae]=H,d[32767+ae]=[],d[32767+ae][1]=H,d[32767+ae][0]=z-1+ae;E<<=1,z<<=1}}(),function(){for(var E=0;E<256;E++)U[E]=19595*E,U[E+256|0]=38470*E,U[E+512|0]=7471*E+32768,U[E+768|0]=-11059*E,U[E+1024|0]=-21709*E,U[E+1280|0]=32768*E+8421375,U[E+1536|0]=-27439*E,U[E+1792|0]=-5329*E}(),ne(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Si(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function rx(r){function t(M){if(!M)throw Error("assert :P")}function e(M,Y,O){for(var N=0;4>N;N++)if(M[Y+N]!=O.charCodeAt(N))return!0;return!1}function n(M,Y,O,N,W){for(var j=0;j<W;j++)M[Y+j]=O[N+j]}function i(M,Y,O,N){for(var W=0;W<N;W++)M[Y+W]=O}function a(M){return new Int32Array(M)}function o(M,Y){for(var O=[],N=0;N<M;N++)O.push(new Y);return O}function s(M,Y){var O=[];return function N(W,j,Z){for(var X=Z[j],oe=0;oe<X&&(W.push(Z.length>j+1?[]:new Y),!(Z.length<j+1));oe++)N(W[oe],j+1,Z)}(O,0,M),O}var l=function(){var M=this;function Y(f,h){for(var b=1<<h-1>>>0;f&b;)b>>>=1;return b?(f&b-1)+b:f}function O(f,h,b,P,L){t(!(P%b));do f[h+(P-=b)]=L;while(0<P)}function N(f,h,b,P,L){if(t(2328>=L),512>=L)var I=a(512);else if((I=a(L))==null)return 0;return function(D,B,V,G,ie,ve){var K,se,de=B,we=1<<V,pe=a(16),Se=a(16);for(t(ie!=0),t(G!=null),t(D!=null),t(0<V),se=0;se<ie;++se){if(15<G[se])return 0;++pe[G[se]]}if(pe[0]==ie)return 0;for(Se[1]=0,K=1;15>K;++K){if(pe[K]>1<<K)return 0;Se[K+1]=Se[K]+pe[K]}for(se=0;se<ie;++se)K=G[se],0<G[se]&&(ve[Se[K]++]=se);if(Se[15]==1)return(G=new W).g=0,G.value=ve[0],O(D,de,1,we,G),we;var ke,Le=-1,Te=we-1,Ye=0,De=1,wt=1,qe=1<<V;for(se=0,K=1,ie=2;K<=V;++K,ie<<=1){if(De+=wt<<=1,0>(wt-=pe[K]))return 0;for(;0<pe[K];--pe[K])(G=new W).g=K,G.value=ve[se++],O(D,de+Ye,ie,qe,G),Ye=Y(Ye,K)}for(K=V+1,ie=2;15>=K;++K,ie<<=1){if(De+=wt<<=1,0>(wt-=pe[K]))return 0;for(;0<pe[K];--pe[K]){if(G=new W,(Ye&Te)!=Le){for(de+=qe,ke=1<<(Le=K)-V;15>Le&&!(0>=(ke-=pe[Le]));)++Le,ke<<=1;we+=qe=1<<(ke=Le-V),D[B+(Le=Ye&Te)].g=ke+V,D[B+Le].value=de-B-Le}G.g=K-V,G.value=ve[se++],O(D,de+(Ye>>V),ie,qe,G),Ye=Y(Ye,K)}}return De!=2*Se[15]-1?0:we}(f,h,b,P,L,I)}function W(){this.value=this.g=0}function j(){this.value=this.g=0}function Z(){this.G=o(5,W),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(rs,j)}function X(f,h,b,P){t(f!=null),t(h!=null),t(2147483648>P),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=h,f.pa=b,f.Jd=h,f.Yc=b+P,f.Zc=4<=P?b+P-4+1:b,_e(f)}function oe(f,h){for(var b=0;0<h--;)b|=be(f,128)<<h;return b}function q(f,h){var b=oe(f,h);return me(f)?-b:b}function re(f,h,b,P){var L,I=0;for(t(f!=null),t(h!=null),t(4294967288>P),f.Sb=P,f.Ra=0,f.u=0,f.h=0,4<P&&(P=4),L=0;L<P;++L)I+=h[b+L]<<8*L;f.Ra=I,f.bb=P,f.oa=h,f.pa=b}function fe(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<qa-8>>>0,++f.bb,f.u-=8;ee(f)&&(f.h=1,f.u=0)}function ne(f,h){if(t(0<=h),!f.h&&h<=jn){var b=H(f)&Rn[h];return f.u+=h,fe(f),b}return f.h=1,f.u=0}function E(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(f){return f.Ra>>>(f.u&qa-1)>>>0}function ee(f){return t(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>qa}function ae(f,h){f.u=h,f.h=ee(f)}function ue(f){f.u>=pa&&(t(f.u>=pa),fe(f))}function _e(f){t(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(t(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function me(f){return oe(f,1)}function be(f,h){var b=f.Ca;0>f.b&&_e(f);var P=f.b,L=b*h>>>8,I=(f.I>>>P>L)+0;for(I?(b-=L,f.I-=L+1<<P>>>0):b=L+1,P=b,L=0;256<=P;)L+=8,P>>=8;return P=7^L+Ha[P],f.b-=P,f.Ca=(b<<P)-1,I}function le(f,h,b){f[h+0]=b>>24&255,f[h+1]=b>>16&255,f[h+2]=b>>8&255,f[h+3]=255&b}function Pe(f,h){return f[h+0]|f[h+1]<<8}function Ae(f,h){return Pe(f,h)|f[h+2]<<16}function ge(f,h){return Pe(f,h)|Pe(f,h+2)<<16}function J(f,h){var b=1<<h;return t(f!=null),t(0<h),f.X=a(b),f.X==null?0:(f.Mb=32-h,f.Xa=h,1)}function gt(f,h){t(f!=null),t(h!=null),t(f.Xa==h.Xa),n(h.X,0,f.X,0,1<<h.Xa)}function nt(){this.X=[],this.Xa=this.Mb=0}function et(f,h,b,P){t(b!=null),t(P!=null);var L=b[0],I=P[0];return L==0&&(L=(f*I+h/2)/h),I==0&&(I=(h*L+f/2)/f),0>=L||0>=I?0:(b[0]=L,P[0]=I,1)}function Ce(f,h){return f+(1<<h)-1>>>h}function Ve(f,h){return((4278255360&f)+(4278255360&h)>>>0&4278255360)+((16711935&f)+(16711935&h)>>>0&16711935)>>>0}function Re(f,h){M[h]=function(b,P,L,I,D,B,V){var G;for(G=0;G<D;++G){var ie=M[f](B[V+G-1],L,I+G);B[V+G]=Ve(b[P+G],ie)}}}function pt(){this.ud=this.hd=this.jd=0}function Ge(f,h){return((4278124286&(f^h))>>>1)+(f&h)>>>0}function St(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function ct(f,h){return St(f+(f-h+.5>>1))}function ut(f,h,b){return Math.abs(h-b)-Math.abs(f-b)}function Ot(f,h,b,P,L,I,D){for(P=I[D-1],b=0;b<L;++b)I[D+b]=P=Ve(f[h+b],P)}function ot(f,h,b,P,L){var I;for(I=0;I<b;++I){var D=f[h+I],B=D>>8&255,V=16711935&(V=(V=16711935&D)+((B<<16)+B));P[L+I]=(4278255360&D)+V>>>0}}function We(f,h){h.jd=255&f,h.hd=f>>8&255,h.ud=f>>16&255}function rt(f,h,b,P,L,I){var D;for(D=0;D<P;++D){var B=h[b+D],V=B>>>8,G=B,ie=255&(ie=(ie=B>>>16)+((f.jd<<24>>24)*(V<<24>>24)>>>5));G=255&(G=(G+=(f.hd<<24>>24)*(V<<24>>24)>>>5)+((f.ud<<24>>24)*(ie<<24>>24)>>>5)),L[I+D]=(4278255360&B)+(ie<<16)+G}}function Qe(f,h,b,P,L){M[h]=function(I,D,B,V,G,ie,ve,K,se){for(V=ve;V<K;++V)for(ve=0;ve<se;++ve)G[ie++]=L(B[P(I[D++])])},M[f]=function(I,D,B,V,G,ie,ve){var K=8>>I.b,se=I.Ea,de=I.K[0],we=I.w;if(8>K)for(I=(1<<I.b)-1,we=(1<<K)-1;D<B;++D){var pe,Se=0;for(pe=0;pe<se;++pe)pe&I||(Se=P(V[G++])),ie[ve++]=L(de[Se&we]),Se>>=K}else M["VP8LMapColor"+b](V,G,de,we,ie,ve,D,B,se)}}function At(f,h,b,P,L){for(b=h+b;h<b;){var I=f[h++];P[L++]=I>>16&255,P[L++]=I>>8&255,P[L++]=255&I}}function xt(f,h,b,P,L){for(b=h+b;h<b;){var I=f[h++];P[L++]=I>>16&255,P[L++]=I>>8&255,P[L++]=255&I,P[L++]=I>>24&255}}function Ue(f,h,b,P,L){for(b=h+b;h<b;){var I=(D=f[h++])>>16&240|D>>12&15,D=240&D|D>>28&15;P[L++]=I,P[L++]=D}}function at(f,h,b,P,L){for(b=h+b;h<b;){var I=(D=f[h++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;P[L++]=I,P[L++]=D}}function Nt(f,h,b,P,L){for(b=h+b;h<b;){var I=f[h++];P[L++]=255&I,P[L++]=I>>8&255,P[L++]=I>>16&255}}function ze(f,h,b,P,L,I){if(I==0)for(b=h+b;h<b;)le(P,((I=f[h++])[0]>>24|I[1]>>8&65280|I[2]<<8&16711680|I[3]<<24)>>>0),L+=32;else n(P,L,f,h,b)}function ft(f,h){M[h][0]=M[f+"0"],M[h][1]=M[f+"1"],M[h][2]=M[f+"2"],M[h][3]=M[f+"3"],M[h][4]=M[f+"4"],M[h][5]=M[f+"5"],M[h][6]=M[f+"6"],M[h][7]=M[f+"7"],M[h][8]=M[f+"8"],M[h][9]=M[f+"9"],M[h][10]=M[f+"10"],M[h][11]=M[f+"11"],M[h][12]=M[f+"12"],M[h][13]=M[f+"13"],M[h][14]=M[f+"0"],M[h][15]=M[f+"0"]}function je(f){return f==Gv||f==Kv||f==Jf||f==Qv}function vr(){this.eb=[],this.size=this.A=this.fb=0}function mr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vr,this.f.kb=new mr,this.sd=null}function dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Mo(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Jr(f,h){var b=f.T,P=h.ba.f.RGBA,L=P.eb,I=P.fb+f.ka*P.A,D=ii[h.ba.S],B=f.y,V=f.O,G=f.f,ie=f.N,ve=f.ea,K=f.W,se=h.cc,de=h.dc,we=h.Mc,pe=h.Nc,Se=f.ka,ke=f.ka+f.T,Le=f.U,Te=Le+1>>1;for(Se==0?D(B,V,null,null,G,ie,ve,K,G,ie,ve,K,L,I,null,null,Le):(D(h.ec,h.fc,B,V,se,de,we,pe,G,ie,ve,K,L,I-P.A,L,I,Le),++b);Se+2<ke;Se+=2)se=G,de=ie,we=ve,pe=K,ie+=f.Rc,K+=f.Rc,I+=2*P.A,D(B,(V+=2*f.fa)-f.fa,B,V,se,de,we,pe,G,ie,ve,K,L,I-P.A,L,I,Le);return V+=f.fa,f.j+ke<f.o?(n(h.ec,h.fc,B,V,Le),n(h.cc,h.dc,G,ie,Te),n(h.Mc,h.Nc,ve,K,Te),b--):1&ke||D(B,V,null,null,G,ie,ve,K,G,ie,ve,K,L,I+P.A,null,null,Le),b}function aa(f,h,b){var P=f.F,L=[f.J];if(P!=null){var I=f.U,D=h.ba.S,B=D==Yf||D==Jf;h=h.ba.f.RGBA;var V=[0],G=f.ka;V[0]=f.T,f.Kb&&(G==0?--V[0]:(--G,L[0]-=f.width),f.j+f.ka+f.T==f.o&&(V[0]=f.o-f.j-G));var ie=h.eb;G=h.fb+G*h.A,f=I_(P,L[0],f.width,I,V,ie,G+(B?0:3),h.A),t(b==V),f&&je(D)&&Vl(ie,G,B,I,V,h.A)}return 0}function Mi(f){var h=f.ma,b=h.ba.S,P=11>b,L=b==Kf||b==Qf||b==Yf||b==Hv||b==12||je(b);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!jl(h.Oa,f,L?11:12))return 0;if(L&&je(b)&&Vf(),f.da)alert("todo:use_scaling");else{if(P){if(h.Ib=Mo,f.Kb){if(b=f.U+1>>1,h.memory=a(f.U+2*b),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+f.U,h.Mc=h.cc,h.Nc=h.dc+b,h.Ib=Jr,Vf()}}else alert("todo:EmitYUV");L&&(h.Jb=aa,P&&ei())}if(P&&!J_){for(f=0;256>f;++f)bL[f]=89858*(f-128)+Zf>>Xf,kL[f]=-22014*(f-128)+Zf,xL[f]=-45773*(f-128),SL[f]=113618*(f-128)+Zf>>Xf;for(f=Wl;f<Xv;++f)h=76283*(f-16)+Zf>>Xf,PL[f-Wl]=lr(h,255),TL[f-Wl]=lr(h+8>>4,15);J_=1}return 1}function it(f){var h=f.ma,b=f.U,P=f.T;return t(!(1&f.ka)),0>=b||0>=P?0:(b=h.Ib(f,h),h.Jb!=null&&h.Jb(f,h,b),h.Dc+=b,1)}function oa(f){f.ma.memory=null}function sa(f,h,b,P){return ne(f,8)!=47?0:(h[0]=ne(f,14)+1,b[0]=ne(f,14)+1,P[0]=ne(f,1),ne(f,3)!=0?0:!f.h)}function Yn(f,h){if(4>f)return f+1;var b=f-2>>1;return(2+(1&f)<<b)+ne(h,b)+1}function Jn(f,h){return 120<h?h-120:1<=(b=((b=sL[h-1])>>4)*f+(8-(15&b)))?b:1;var b}function cr(f,h,b){var P=H(b),L=f[h+=255&P].g-8;return 0<L&&(ae(b,b.u+8),P=H(b),h+=f[h].value,h+=P&(1<<L)-1),ae(b,b.u+f[h].g),f[h].value}function Br(f,h,b){return b.g+=f.g,b.value+=f.value<<h>>>0,t(8>=b.g),f.g}function zr(f,h,b){var P=f.xc;return t((h=P==0?0:f.vc[f.md*(b>>P)+(h>>P)])<f.Wb),f.Ya[h]}function Do(f,h,b,P){var L=f.ab,I=f.c*h,D=f.C;h=D+h;var B=b,V=P;for(P=f.Ta,b=f.Ua;0<L--;){var G=f.gc[L],ie=D,ve=h,K=B,se=V,de=(V=P,B=b,G.Ea);switch(t(ie<ve),t(ve<=G.nc),G.hc){case 2:yr(K,se,(ve-ie)*de,V,B);break;case 0:var we=ie,pe=ve,Se=V,ke=B,Le=(qe=G).Ea;we==0&&(Ml(K,se,null,null,1,Se,ke),Ot(K,se+1,0,0,Le-1,Se,ke+1),se+=Le,ke+=Le,++we);for(var Te=1<<qe.b,Ye=Te-1,De=Ce(Le,qe.b),wt=qe.K,qe=qe.w+(we>>qe.b)*De;we<pe;){var Pt=wt,jr=qe,bt=1;for(ec(K,se,Se,ke-Le,1,Se,ke);bt<Le;){var He=(bt&~Ye)+Te;He>Le&&(He=Le),(0,Fl[Pt[jr++]>>8&15])(K,se+ +bt,Se,ke+bt-Le,He-bt,Se,ke+bt),bt=He}se+=Le,ke+=Le,++we&Ye||(qe+=De)}ve!=G.nc&&n(V,B-de,V,B+(ve-ie-1)*de,de);break;case 1:for(de=K,pe=se,Le=(K=G.Ea)-(ke=K&~(Se=(se=1<<G.b)-1)),we=Ce(K,G.b),Te=G.K,G=G.w+(ie>>G.b)*we;ie<ve;){for(Ye=Te,De=G,wt=new pt,qe=pe+ke,Pt=pe+K;pe<qe;)We(Ye[De++],wt),Bl(wt,de,pe,se,V,B),pe+=se,B+=se;pe<Pt&&(We(Ye[De++],wt),Bl(wt,de,pe,Le,V,B),pe+=Le,B+=Le),++ie&Se||(G+=we)}break;case 3:if(K==V&&se==B&&0<G.b){for(pe=V,K=de=B+(ve-ie)*de-(ke=(ve-ie)*Ce(G.Ea,G.b)),se=V,Se=B,we=[],ke=(Le=ke)-1;0<=ke;--ke)we[ke]=se[Se+ke];for(ke=Le-1;0<=ke;--ke)pe[K+ke]=we[ke];Wf(G,ie,ve,V,de,V,B)}else Wf(G,ie,ve,K,se,V,B)}B=P,V=b}V!=b&&n(P,b,B,V,I)}function Ua(f,h){var b=f.V,P=f.Ba+f.c*f.C,L=h-f.C;if(t(h<=f.l.o),t(16>=L),0<L){var I=f.l,D=f.Ta,B=f.Ua,V=I.width;if(Do(f,L,b,P),L=B=[B],t((b=f.C)<(P=h)),t(I.v<I.va),P>I.o&&(P=I.o),b<I.j){var G=I.j-b;b=I.j,L[0]+=G*V}if(b>=P?b=0:(L[0]+=4*I.v,I.ka=b-I.j,I.U=I.va-I.v,I.T=P-b,b=1),b){if(B=B[0],11>(b=f.ca).S){var ie=b.f.RGBA,ve=(P=b.S,L=I.U,I=I.T,G=ie.eb,ie.A),K=I;for(ie=ie.fb+f.Ma*ie.A;0<K--;){var se=D,de=B,we=L,pe=G,Se=ie;switch(P){case Gf:Ul(se,de,we,pe,Se);break;case Kf:Ga(se,de,we,pe,Se);break;case Gv:Ga(se,de,we,pe,Se),Vl(pe,Se,0,we,1,0);break;case V_:ns(se,de,we,pe,Se);break;case Qf:ze(se,de,we,pe,Se,1);break;case Kv:ze(se,de,we,pe,Se,1),Vl(pe,Se,0,we,1,0);break;case Yf:ze(se,de,we,pe,Se,0);break;case Jf:ze(se,de,we,pe,Se,0),Vl(pe,Se,1,we,1,0);break;case Hv:Ka(se,de,we,pe,Se);break;case Qv:Ka(se,de,we,pe,Se),j_(pe,Se,we,1,0);break;case z_:Qa(se,de,we,pe,Se);break;default:t(0)}B+=V,ie+=ve}f.Ma+=I}else alert("todo:EmitRescaledRowsYUVA");t(f.Ma<=b.height)}}f.C=h,t(f.C<=f.i)}function pi(f){var h;if(0<f.ua)return 0;for(h=0;h<f.Wb;++h){var b=f.Ya[h].G,P=f.Ya[h].H;if(0<b[1][P[1]+0].g||0<b[2][P[2]+0].g||0<b[3][P[3]+0].g)return 0}return 1}function Di(f,h,b,P,L,I){if(f.Z!=0){var D=f.qd,B=f.rd;for(t(Xa[f.Z]!=null);h<b;++h)Xa[f.Z](D,B,P,L,P,L,I),D=P,B=L,L+=I;f.qd=D,f.rd=B}}function vi(f,h){var b=f.l.ma,P=b.Z==0||b.Z==1?f.l.j:f.C;if(P=f.C<P?P:f.C,t(h<=f.l.o),h>P){var L=f.l.width,I=b.ca,D=b.tb+L*P,B=f.V,V=f.Ba+f.c*P,G=f.gc;t(f.ab==1),t(G[0].hc==3),$i(G[0],P,h,B,V,I,D),Di(b,P,h,I,D,L)}f.C=f.Ma=h}function mi(f,h,b,P,L,I,D){var B=f.$/P,V=f.$%P,G=f.m,ie=f.s,ve=b+f.$,K=ve;L=b+P*L;var se=b+P*I,de=280+ie.ua,we=f.Pb?B:16777216,pe=0<ie.ua?ie.Wa:null,Se=ie.wc,ke=ve<se?zr(ie,V,B):null;t(f.C<I),t(se<=L);var Le=!1;e:for(;;){for(;Le||ve<se;){var Te=0;if(B>=we){var Ye=ve-b;t((we=f).Pb),we.wd=we.m,we.xd=Ye,0<we.s.ua&&gt(we.s.Wa,we.s.vb),we=B+lL}if(V&Se||(ke=zr(ie,V,B)),t(ke!=null),ke.Qb&&(h[ve]=ke.qb,Le=!0),!Le)if(ue(G),ke.jc){Te=G,Ye=h;var De=ve,wt=ke.pd[H(Te)&rs-1];t(ke.jc),256>wt.g?(ae(Te,Te.u+wt.g),Ye[De]=wt.value,Te=0):(ae(Te,Te.u+wt.g-256),t(256<=wt.value),Te=wt.value),Te==0&&(Le=!0)}else Te=cr(ke.G[0],ke.H[0],G);if(G.h)break;if(Le||256>Te){if(!Le)if(ke.nd)h[ve]=(ke.qb|Te<<8)>>>0;else{if(ue(G),Le=cr(ke.G[1],ke.H[1],G),ue(G),Ye=cr(ke.G[2],ke.H[2],G),De=cr(ke.G[3],ke.H[3],G),G.h)break;h[ve]=(De<<24|Le<<16|Te<<8|Ye)>>>0}if(Le=!1,++ve,++V>=P&&(V=0,++B,D!=null&&B<=I&&!(B%16)&&D(f,B),pe!=null))for(;K<ve;)Te=h[K++],pe.X[(506832829*Te&4294967295)>>>pe.Mb]=Te}else if(280>Te){if(Te=Yn(Te-256,G),Ye=cr(ke.G[4],ke.H[4],G),ue(G),Ye=Jn(P,Ye=Yn(Ye,G)),G.h)break;if(ve-b<Ye||L-ve<Te)break e;for(De=0;De<Te;++De)h[ve+De]=h[ve+De-Ye];for(ve+=Te,V+=Te;V>=P;)V-=P,++B,D!=null&&B<=I&&!(B%16)&&D(f,B);if(t(ve<=L),V&Se&&(ke=zr(ie,V,B)),pe!=null)for(;K<ve;)Te=h[K++],pe.X[(506832829*Te&4294967295)>>>pe.Mb]=Te}else{if(!(Te<de))break e;for(Le=Te-280,t(pe!=null);K<ve;)Te=h[K++],pe.X[(506832829*Te&4294967295)>>>pe.Mb]=Te;Te=ve,t(!(Le>>>(Ye=pe).Xa)),h[Te]=Ye.X[Le],Le=!0}Le||t(G.h==ee(G))}if(f.Pb&&G.h&&ve<L)t(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&gt(f.s.vb,f.s.Wa);else{if(G.h)break e;D!=null&&D(f,B>I?I:B),f.a=0,f.$=ve-b}return 1}return f.a=3,0}function Xn(f){t(f!=null),f.vc=null,f.yc=null,f.Ya=null;var h=f.Wa;h!=null&&(h.X=null),f.vb=null,t(f!=null)}function Fo(){var f=new Ke;return f==null?null:(f.a=0,f.xb=H_,ft("Predictor","VP8LPredictors"),ft("Predictor","VP8LPredictors_C"),ft("PredictorAdd","VP8LPredictorsAdd"),ft("PredictorAdd","VP8LPredictorsAdd_C"),yr=ot,Bl=rt,Ul=At,Ga=xt,Ka=Ue,Qa=at,ns=Nt,M.VP8LMapColor32b=Ui,M.VP8LMapColor8b=Dl,f)}function Fi(f,h,b,P,L){var I=1,D=[f],B=[h],V=P.m,G=P.s,ie=null,ve=0;e:for(;;){if(b)for(;I&&ne(V,1);){var K=D,se=B,de=P,we=1,pe=de.m,Se=de.gc[de.ab],ke=ne(pe,2);if(de.Oc&1<<ke)I=0;else{switch(de.Oc|=1<<ke,Se.hc=ke,Se.Ea=K[0],Se.nc=se[0],Se.K=[null],++de.ab,t(4>=de.ab),ke){case 0:case 1:Se.b=ne(pe,3)+2,we=Fi(Ce(Se.Ea,Se.b),Ce(Se.nc,Se.b),0,de,Se.K),Se.K=Se.K[0];break;case 3:var Le,Te=ne(pe,8)+1,Ye=16<Te?0:4<Te?1:2<Te?2:3;if(K[0]=Ce(Se.Ea,Ye),Se.b=Ye,Le=we=Fi(Te,1,0,de,Se.K)){var De,wt=Te,qe=Se,Pt=1<<(8>>qe.b),jr=a(Pt);if(jr==null)Le=0;else{var bt=qe.K[0],He=qe.w;for(jr[0]=qe.K[0][0],De=1;De<1*wt;++De)jr[De]=Ve(bt[He+De],jr[De-1]);for(;De<4*Pt;++De)jr[De]=0;qe.K[0]=null,qe.K[0]=jr,Le=1}}we=Le;break;case 2:break;default:t(0)}I=we}}if(D=D[0],B=B[0],I&&ne(V,1)&&!(I=1<=(ve=ne(V,4))&&11>=ve)){P.a=3;break e}var Ne;if(Ne=I)t:{var wr,yt,Et,Jt=P,qr=D,un=B,ur=ve,Zr=b,fn=Jt.m,Ir=Jt.s,Ct=[null],Ft=1,fr=0,Bt=cL[ur];r:for(;;){if(Zr&&ne(fn,1)){var Hr=ne(fn,3)+2,_i=Ce(qr,Hr),br=Ce(un,Hr),bn=_i*br;if(!Fi(_i,br,0,Jt,Ct))break r;for(Ct=Ct[0],Ir.xc=Hr,wr=0;wr<bn;++wr){var Ht=Ct[wr]>>8&65535;Ct[wr]=Ht,Ht>=Ft&&(Ft=Ht+1)}}if(fn.h)break r;for(yt=0;5>yt;++yt){var Mr=W_[yt];!yt&&0<ur&&(Mr+=1<<ur),fr<Mr&&(fr=Mr)}var Mn=o(Ft*Bt,W),dn=Ft,Dn=o(dn,Z);if(Dn==null)var Fn=null;else t(65536>=dn),Fn=Dn;var Sn=a(fr);if(Fn==null||Sn==null||Mn==null){Jt.a=1;break r}var Bn=Mn;for(wr=Et=0;wr<Ft;++wr){var Qt=Fn[wr],Un=Qt.G,wi=Qt.H,as=0,ga=1,Gr=0;for(yt=0;5>yt;++yt){Mr=W_[yt],Un[yt]=Bn,wi[yt]=Et,!yt&&0<ur&&(Mr+=1<<ur);i:{var td,Zv=Mr,rd=Jt,ql=Sn,LL=Bn,OL=Et,em=0,Za=rd.m,AL=ne(Za,1);if(i(ql,0,0,Zv),AL){var NL=ne(Za,1)+1,RL=ne(Za,1),e2=ne(Za,RL==0?1:8);ql[e2]=1,NL==2&&(ql[e2=ne(Za,8)]=1);var nd=1}else{var t2=a(19),r2=ne(Za,4)+4;if(19<r2){rd.a=3;var id=0;break i}for(td=0;td<r2;++td)t2[oL[td]]=ne(Za,3);var tm=void 0,Hl=void 0,n2=rd,jL=t2,ad=Zv,i2=ql,rm=0,eo=n2.m,a2=8,o2=o(128,W);n:for(;N(o2,0,7,jL,19);){if(ne(eo,1)){var IL=2+2*ne(eo,3);if((tm=2+ne(eo,IL))>ad)break n}else tm=ad;for(Hl=0;Hl<ad&&tm--;){ue(eo);var s2=o2[0+(127&H(eo))];ae(eo,eo.u+s2.g);var rc=s2.value;if(16>rc)i2[Hl++]=rc,rc!=0&&(a2=rc);else{var ML=rc==16,c2=rc-16,DL=iL[c2],l2=ne(eo,nL[c2])+DL;if(Hl+l2>ad)break n;for(var FL=ML?a2:0;0<l2--;)i2[Hl++]=FL}}rm=1;break n}rm||(n2.a=3),nd=rm}(nd=nd&&!Za.h)&&(em=N(LL,OL,8,ql,Zv)),nd&&em!=0?id=em:(rd.a=3,id=0)}if(id==0)break r;if(ga&&aL[yt]==1&&(ga=Bn[Et].g==0),as+=Bn[Et].g,Et+=id,3>=yt){var Gl,nm=Sn[0];for(Gl=1;Gl<Mr;++Gl)Sn[Gl]>nm&&(nm=Sn[Gl]);Gr+=nm}}if(Qt.nd=ga,Qt.Qb=0,ga&&(Qt.qb=(Un[3][wi[3]+0].value<<24|Un[1][wi[1]+0].value<<16|Un[2][wi[2]+0].value)>>>0,as==0&&256>Un[0][wi[0]+0].value&&(Qt.Qb=1,Qt.qb+=Un[0][wi[0]+0].value<<8)),Qt.jc=!Qt.Qb&&6>Gr,Qt.jc){var od,ya=Qt;for(od=0;od<rs;++od){var to=od,ro=ya.pd[to],sd=ya.G[0][ya.H[0]+to];256<=sd.value?(ro.g=sd.g+256,ro.value=sd.value):(ro.g=0,ro.value=0,to>>=Br(sd,8,ro),to>>=Br(ya.G[1][ya.H[1]+to],16,ro),to>>=Br(ya.G[2][ya.H[2]+to],0,ro),Br(ya.G[3][ya.H[3]+to],24,ro))}}}Ir.vc=Ct,Ir.Wb=Ft,Ir.Ya=Fn,Ir.yc=Mn,Ne=1;break t}Ne=0}if(!(I=Ne)){P.a=3;break e}if(0<ve){if(G.ua=1<<ve,!J(G.Wa,ve)){P.a=1,I=0;break e}}else G.ua=0;var im=P,u2=D,BL=B,am=im.s,om=am.xc;if(im.c=u2,im.i=BL,am.md=Ce(u2,om),am.wc=om==0?-1:(1<<om)-1,b){P.xb=mL;break e}if((ie=a(D*B))==null){P.a=1,I=0;break e}I=(I=mi(P,ie,0,D,B,B,null))&&!V.h;break e}return I?(L!=null?L[0]=ie:(t(ie==null),t(b)),P.$=0,b||Xn(G)):Xn(G),I}function Bo(f,h){var b=f.c*f.i,P=b+h+16*h;return t(f.c<=h),f.V=a(P),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+b+h,1)}function Ws(f,h){var b=f.C,P=h-b,L=f.V,I=f.Ba+f.c*b;for(t(h<=f.l.o);0<P;){var D=16<P?16:P,B=f.l.ma,V=f.l.width,G=V*D,ie=B.ca,ve=B.tb+V*b,K=f.Ta,se=f.Ua;Do(f,D,L,I),M_(K,se,ie,ve,G),Di(B,b,b+D,ie,ve,V),P-=D,L+=D*f.c,b+=D}t(b==h),f.C=f.Ma=h}function qs(){this.ub=this.yd=this.td=this.Rb=0}function Hs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Lv(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function wl(){this.Yb=function(){var f=[];return function h(b,P,L){for(var I=L[P],D=0;D<I&&(b.push(L.length>P+1?[]:0),!(L.length<P+1));D++)h(b[D],P+1,L)}(f,0,[3,11]),f}()}function Ef(){this.jb=a(3),this.Wc=s([4,8],wl),this.Xc=s([4,17],wl)}function Cf(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Zn(){this.ld=this.La=this.dd=this.tc=0}function bl(){this.Na=this.la=0}function Lf(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Sl(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Of(){this.uc=this.M=this.Nb=0,this.wa=Array(new Zn),this.Y=0,this.ya=Array(new Sl),this.aa=0,this.l=new Gs}function Af(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Nf(){this.cb=this.a=0,this.sc="",this.m=new E,this.Od=new qs,this.Kc=new Hs,this.ed=new Cf,this.Qa=new Lv,this.Ic=this.$c=this.Aa=0,this.D=new Of,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,E),this.ia=0,this.pb=o(4,Lf),this.Pa=new Ef,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Af),this.Hd=0,this.rb=Array(new bl),this.sb=0,this.wa=Array(new Zn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Sl),this.L=this.aa=0,this.gd=s([4,2],Zn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Gs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ov(){var f=new Nf;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,zl||(zl=ca)),f}function Tr(f,h,b){return f.a==0&&(f.a=h,f.sc=b,f.cb=0),0}function Rf(f,h,b){return 3<=b&&f[h+0]==157&&f[h+1]==1&&f[h+2]==42}function jf(f,h){if(f==null)return 0;if(f.a=0,f.sc="OK",h==null)return Tr(f,2,"null VP8Io passed to VP8GetHeaders()");var b=h.data,P=h.w,L=h.ha;if(4>L)return Tr(f,7,"Truncated header.");var I=b[P+0]|b[P+1]<<8|b[P+2]<<16,D=f.Od;if(D.Rb=!(1&I),D.td=I>>1&7,D.yd=I>>4&1,D.ub=I>>5,3<D.td)return Tr(f,3,"Incorrect keyframe parameters.");if(!D.yd)return Tr(f,4,"Frame not displayable.");P+=3,L-=3;var B=f.Kc;if(D.Rb){if(7>L)return Tr(f,7,"cannot parse picture header");if(!Rf(b,P,L))return Tr(f,3,"Bad code word");B.c=16383&(b[P+4]<<8|b[P+3]),B.Td=b[P+4]>>6,B.i=16383&(b[P+6]<<8|b[P+5]),B.Ud=b[P+6]>>6,P+=7,L-=7,f.za=B.c+15>>4,f.Ub=B.i+15>>4,h.width=B.c,h.height=B.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((I=f.Pa).jb,0,255,I.jb.length),t((I=f.Qa)!=null),I.Cb=0,I.Bb=0,I.Fb=1,i(I.Zb,0,0,I.Zb.length),i(I.Lb,0,0,I.Lb)}if(D.ub>L)return Tr(f,7,"bad partition length");X(I=f.m,b,P,D.ub),P+=D.ub,L-=D.ub,D.Rb&&(B.Ld=me(I),B.Kd=me(I)),B=f.Qa;var V,G=f.Pa;if(t(I!=null),t(B!=null),B.Cb=me(I),B.Cb){if(B.Bb=me(I),me(I)){for(B.Fb=me(I),V=0;4>V;++V)B.Zb[V]=me(I)?q(I,7):0;for(V=0;4>V;++V)B.Lb[V]=me(I)?q(I,6):0}if(B.Bb)for(V=0;3>V;++V)G.jb[V]=me(I)?oe(I,8):255}else B.Bb=0;if(I.Ka)return Tr(f,3,"cannot parse segment header");if((B=f.ed).zd=me(I),B.Tb=oe(I,6),B.wb=oe(I,3),B.Pc=me(I),B.Pc&&me(I)){for(G=0;4>G;++G)me(I)&&(B.vd[G]=q(I,6));for(G=0;4>G;++G)me(I)&&(B.od[G]=q(I,6))}if(f.L=B.Tb==0?0:B.zd?1:2,I.Ka)return Tr(f,3,"cannot parse filter header");var ie=L;if(L=V=P,P=V+ie,B=ie,f.Xb=(1<<oe(f.m,2))-1,ie<3*(G=f.Xb))b=7;else{for(V+=3*G,B-=3*G,ie=0;ie<G;++ie){var ve=b[L+0]|b[L+1]<<8|b[L+2]<<16;ve>B&&(ve=B),X(f.Jc[+ie],b,V,ve),V+=ve,B-=ve,L+=3}X(f.Jc[+G],b,V,B),b=V<P?0:5}if(b!=0)return Tr(f,b,"cannot parse partitions");for(b=oe(V=f.m,7),L=me(V)?q(V,4):0,P=me(V)?q(V,4):0,B=me(V)?q(V,4):0,G=me(V)?q(V,4):0,V=me(V)?q(V,4):0,ie=f.Qa,ve=0;4>ve;++ve){if(ie.Cb){var K=ie.Zb[ve];ie.Fb||(K+=b)}else{if(0<ve){f.pb[ve]=f.pb[0];continue}K=b}var se=f.pb[ve];se.Sc[0]=Yv[lr(K+L,127)],se.Sc[1]=Jv[lr(K+0,127)],se.Eb[0]=2*Yv[lr(K+P,127)],se.Eb[1]=101581*Jv[lr(K+B,127)]>>16,8>se.Eb[1]&&(se.Eb[1]=8),se.Qc[0]=Yv[lr(K+G,117)],se.Qc[1]=Jv[lr(K+V,127)],se.lc=K+V}if(!D.Rb)return Tr(f,4,"Not a key frame.");for(me(I),D=f.Pa,b=0;4>b;++b){for(L=0;8>L;++L)for(P=0;3>P;++P)for(B=0;11>B;++B)G=be(I,pL[b][L][P][B])?oe(I,8):dL[b][L][P][B],D.Wc[b][L].Yb[P][B]=G;for(L=0;17>L;++L)D.Xc[b][L]=D.Wc[b][vL[L]]}return f.kc=me(I),f.kc&&(f.Bd=oe(I,8)),f.cb=1}function ca(f,h,b,P,L,I,D){var B=h[L].Yb[b];for(b=0;16>L;++L){if(!be(f,B[b+0]))return L;for(;!be(f,B[b+1]);)if(B=h[++L].Yb[0],b=0,L==16)return 16;var V=h[L+1].Yb;if(be(f,B[b+2])){var G=f,ie=0;if(be(G,(K=B)[(ve=b)+3]))if(be(G,K[ve+6])){for(B=0,ve=2*(ie=be(G,K[ve+8]))+(K=be(G,K[ve+9+ie])),ie=0,K=uL[ve];K[B];++B)ie+=ie+be(G,K[B]);ie+=3+(8<<ve)}else be(G,K[ve+7])?(ie=7+2*be(G,165),ie+=be(G,145)):ie=5+be(G,159);else ie=be(G,K[ve+4])?3+be(G,K[ve+5]):2;B=V[2]}else ie=1,B=V[1];V=D+fL[L],0>(G=f).b&&_e(G);var ve,K=G.b,se=(ve=G.Ca>>1)-(G.I>>K)>>31;--G.b,G.Ca+=se,G.Ca|=1,G.I-=(ve+1&se)<<K,I[V]=((ie^se)-se)*P[(0<L)+0]}return 16}function Uo(f){var h=f.rb[f.sb-1];h.la=0,h.Na=0,i(f.zc,0,0,f.zc.length),f.ja=0}function gi(f,h,b,P,L){L=f[h+b+32*P]+(L>>3),f[h+b+32*P]=-256&L?0>L?0:255:L}function $o(f,h,b,P,L,I){gi(f,h,0,b,P+L),gi(f,h,1,b,P+I),gi(f,h,2,b,P-I),gi(f,h,3,b,P-L)}function gr(f){return(20091*f>>16)+f}function xl(f,h,b,P){var L,I=0,D=a(16);for(L=0;4>L;++L){var B=f[h+0]+f[h+8],V=f[h+0]-f[h+8],G=(35468*f[h+4]>>16)-gr(f[h+12]),ie=gr(f[h+4])+(35468*f[h+12]>>16);D[I+0]=B+ie,D[I+1]=V+G,D[I+2]=V-G,D[I+3]=B-ie,I+=4,h++}for(L=I=0;4>L;++L)B=(f=D[I+0]+4)+D[I+8],V=f-D[I+8],G=(35468*D[I+4]>>16)-gr(D[I+12]),gi(b,P,0,0,B+(ie=gr(D[I+4])+(35468*D[I+12]>>16))),gi(b,P,1,0,V+G),gi(b,P,2,0,V-G),gi(b,P,3,0,B-ie),I++,P+=32}function Av(f,h,b,P){var L=f[h+0]+4,I=35468*f[h+4]>>16,D=gr(f[h+4]),B=35468*f[h+1]>>16;$o(b,P,0,L+D,f=gr(f[h+1]),B),$o(b,P,1,L+I,f,B),$o(b,P,2,L-I,f,B),$o(b,P,3,L-D,f,B)}function Nv(f,h,b,P,L){xl(f,h,b,P),L&&xl(f,h+16,b,P+4)}function Rv(f,h,b,P){is(f,h+0,b,P,1),is(f,h+32,b,P+128,1)}function Bi(f,h,b,P){var L;for(f=f[h+0]+4,L=0;4>L;++L)for(h=0;4>h;++h)gi(b,P,h,L,f)}function If(f,h,b,P){f[h+0]&&Mt(f,h+0,b,P),f[h+16]&&Mt(f,h+16,b,P+4),f[h+32]&&Mt(f,h+32,b,P+128),f[h+48]&&Mt(f,h+48,b,P+128+4)}function Mf(f,h,b,P){var L,I=a(16);for(L=0;4>L;++L){var D=f[h+0+L]+f[h+12+L],B=f[h+4+L]+f[h+8+L],V=f[h+4+L]-f[h+8+L],G=f[h+0+L]-f[h+12+L];I[0+L]=D+B,I[8+L]=D-B,I[4+L]=G+V,I[12+L]=G-V}for(L=0;4>L;++L)D=(f=I[0+4*L]+3)+I[3+4*L],B=I[1+4*L]+I[2+4*L],V=I[1+4*L]-I[2+4*L],G=f-I[3+4*L],b[P+0]=D+B>>3,b[P+16]=G+V>>3,b[P+32]=D-B>>3,b[P+48]=G-V>>3,P+=64}function $a(f,h,b){var P,L=h-32,I=In,D=255-f[L-1];for(P=0;P<b;++P){var B,V=I,G=D+f[h-1];for(B=0;B<b;++B)f[h+B]=V[G+f[L+B]];h+=32}}function kl(f,h){$a(f,h,4)}function jv(f,h){$a(f,h,8)}function Iv(f,h){$a(f,h,16)}function Mv(f,h){var b;for(b=0;16>b;++b)n(f,h+32*b,f,h-32,16)}function Pl(f,h){var b;for(b=16;0<b;--b)i(f,h,f[h-1],16),h+=32}function Vo(f,h,b){var P;for(P=0;16>P;++P)i(h,b+32*P,f,16)}function Va(f,h){var b,P=16;for(b=0;16>b;++b)P+=f[h-1+32*b]+f[h+b-32];Vo(P>>5,f,h)}function Dv(f,h){var b,P=8;for(b=0;16>b;++b)P+=f[h-1+32*b];Vo(P>>4,f,h)}function zo(f,h){var b,P=8;for(b=0;16>b;++b)P+=f[h+b-32];Vo(P>>4,f,h)}function Tl(f,h){Vo(128,f,h)}function ht(f,h,b){return f+2*h+b+2>>2}function Fv(f,h){var b,P=h-32;for(P=new Uint8Array([ht(f[P-1],f[P+0],f[P+1]),ht(f[P+0],f[P+1],f[P+2]),ht(f[P+1],f[P+2],f[P+3]),ht(f[P+2],f[P+3],f[P+4])]),b=0;4>b;++b)n(f,h+32*b,P,0,P.length)}function Bv(f,h){var b=f[h-1],P=f[h-1+32],L=f[h-1+64],I=f[h-1+96];le(f,h+0,16843009*ht(f[h-1-32],b,P)),le(f,h+32,16843009*ht(b,P,L)),le(f,h+64,16843009*ht(P,L,I)),le(f,h+96,16843009*ht(L,I,I))}function Uv(f,h){var b,P=4;for(b=0;4>b;++b)P+=f[h+b-32]+f[h-1+32*b];for(P>>=3,b=0;4>b;++b)i(f,h+32*b,P,4)}function $v(f,h){var b=f[h-1+0],P=f[h-1+32],L=f[h-1+64],I=f[h-1-32],D=f[h+0-32],B=f[h+1-32],V=f[h+2-32],G=f[h+3-32];f[h+0+96]=ht(P,L,f[h-1+96]),f[h+1+96]=f[h+0+64]=ht(b,P,L),f[h+2+96]=f[h+1+64]=f[h+0+32]=ht(I,b,P),f[h+3+96]=f[h+2+64]=f[h+1+32]=f[h+0+0]=ht(D,I,b),f[h+3+64]=f[h+2+32]=f[h+1+0]=ht(B,D,I),f[h+3+32]=f[h+2+0]=ht(V,B,D),f[h+3+0]=ht(G,V,B)}function la(f,h){var b=f[h+1-32],P=f[h+2-32],L=f[h+3-32],I=f[h+4-32],D=f[h+5-32],B=f[h+6-32],V=f[h+7-32];f[h+0+0]=ht(f[h+0-32],b,P),f[h+1+0]=f[h+0+32]=ht(b,P,L),f[h+2+0]=f[h+1+32]=f[h+0+64]=ht(P,L,I),f[h+3+0]=f[h+2+32]=f[h+1+64]=f[h+0+96]=ht(L,I,D),f[h+3+32]=f[h+2+64]=f[h+1+96]=ht(I,D,B),f[h+3+64]=f[h+2+96]=ht(D,B,V),f[h+3+96]=ht(B,V,V)}function ua(f,h){var b=f[h-1+0],P=f[h-1+32],L=f[h-1+64],I=f[h-1-32],D=f[h+0-32],B=f[h+1-32],V=f[h+2-32],G=f[h+3-32];f[h+0+0]=f[h+1+64]=I+D+1>>1,f[h+1+0]=f[h+2+64]=D+B+1>>1,f[h+2+0]=f[h+3+64]=B+V+1>>1,f[h+3+0]=V+G+1>>1,f[h+0+96]=ht(L,P,b),f[h+0+64]=ht(P,b,I),f[h+0+32]=f[h+1+96]=ht(b,I,D),f[h+1+32]=f[h+2+96]=ht(I,D,B),f[h+2+32]=f[h+3+96]=ht(D,B,V),f[h+3+32]=ht(B,V,G)}function Vv(f,h){var b=f[h+0-32],P=f[h+1-32],L=f[h+2-32],I=f[h+3-32],D=f[h+4-32],B=f[h+5-32],V=f[h+6-32],G=f[h+7-32];f[h+0+0]=b+P+1>>1,f[h+1+0]=f[h+0+64]=P+L+1>>1,f[h+2+0]=f[h+1+64]=L+I+1>>1,f[h+3+0]=f[h+2+64]=I+D+1>>1,f[h+0+32]=ht(b,P,L),f[h+1+32]=f[h+0+96]=ht(P,L,I),f[h+2+32]=f[h+1+96]=ht(L,I,D),f[h+3+32]=f[h+2+96]=ht(I,D,B),f[h+3+64]=ht(D,B,V),f[h+3+96]=ht(B,V,G)}function zv(f,h){var b=f[h-1+0],P=f[h-1+32],L=f[h-1+64],I=f[h-1+96];f[h+0+0]=b+P+1>>1,f[h+2+0]=f[h+0+32]=P+L+1>>1,f[h+2+32]=f[h+0+64]=L+I+1>>1,f[h+1+0]=ht(b,P,L),f[h+3+0]=f[h+1+32]=ht(P,L,I),f[h+3+32]=f[h+1+64]=ht(L,I,I),f[h+3+64]=f[h+2+64]=f[h+0+96]=f[h+1+96]=f[h+2+96]=f[h+3+96]=I}function Ks(f,h){var b=f[h-1+0],P=f[h-1+32],L=f[h-1+64],I=f[h-1+96],D=f[h-1-32],B=f[h+0-32],V=f[h+1-32],G=f[h+2-32];f[h+0+0]=f[h+2+32]=b+D+1>>1,f[h+0+32]=f[h+2+64]=P+b+1>>1,f[h+0+64]=f[h+2+96]=L+P+1>>1,f[h+0+96]=I+L+1>>1,f[h+3+0]=ht(B,V,G),f[h+2+0]=ht(D,B,V),f[h+1+0]=f[h+3+32]=ht(b,D,B),f[h+1+32]=f[h+3+64]=ht(P,b,D),f[h+1+64]=f[h+3+96]=ht(L,P,b),f[h+1+96]=ht(I,L,P)}function El(f,h){var b;for(b=0;8>b;++b)n(f,h+32*b,f,h-32,8)}function Wo(f,h){var b;for(b=0;8>b;++b)i(f,h,f[h-1],8),h+=32}function Qs(f,h,b){var P;for(P=0;8>P;++P)i(h,b+32*P,f,8)}function Ys(f,h){var b,P=8;for(b=0;8>b;++b)P+=f[h+b-32]+f[h-1+32*b];Qs(P>>4,f,h)}function Wv(f,h){var b,P=4;for(b=0;8>b;++b)P+=f[h+b-32];Qs(P>>3,f,h)}function Cl(f,h){var b,P=4;for(b=0;8>b;++b)P+=f[h-1+32*b];Qs(P>>3,f,h)}function Ll(f,h){Qs(128,f,h)}function qo(f,h,b){var P=f[h-b],L=f[h+0],I=3*(L-P)+qv[1020+f[h-2*b]-f[h+b]],D=Hf[112+(I+4>>3)];f[h-b]=In[255+P+Hf[112+(I+3>>3)]],f[h+0]=In[255+L-D]}function Ho(f,h,b,P){var L=f[h+0],I=f[h+b];return ni[255+f[h-2*b]-f[h-b]]>P||ni[255+I-L]>P}function Ol(f,h,b,P){return 4*ni[255+f[h-b]-f[h+0]]+ni[255+f[h-2*b]-f[h+b]]<=P}function Js(f,h,b,P,L){var I=f[h-3*b],D=f[h-2*b],B=f[h-b],V=f[h+0],G=f[h+b],ie=f[h+2*b],ve=f[h+3*b];return 4*ni[255+B-V]+ni[255+D-G]>P?0:ni[255+f[h-4*b]-I]<=L&&ni[255+I-D]<=L&&ni[255+D-B]<=L&&ni[255+ve-ie]<=L&&ni[255+ie-G]<=L&&ni[255+G-V]<=L}function Al(f,h,b,P){var L=2*P+1;for(P=0;16>P;++P)Ol(f,h+P,b,L)&&qo(f,h+P,b)}function Go(f,h,b,P){var L=2*P+1;for(P=0;16>P;++P)Ol(f,h+P*b,1,L)&&qo(f,h+P*b,1)}function Df(f,h,b,P){var L;for(L=3;0<L;--L)Al(f,h+=4*b,b,P)}function Ff(f,h,b,P){var L;for(L=3;0<L;--L)Go(f,h+=4,b,P)}function fa(f,h,b,P,L,I,D,B){for(I=2*I+1;0<L--;){if(Js(f,h,b,I,D))if(Ho(f,h,b,B))qo(f,h,b);else{var V=f,G=h,ie=b,ve=V[G-2*ie],K=V[G-ie],se=V[G+0],de=V[G+ie],we=V[G+2*ie],pe=27*(ke=qv[1020+3*(se-K)+qv[1020+ve-de]])+63>>7,Se=18*ke+63>>7,ke=9*ke+63>>7;V[G-3*ie]=In[255+V[G-3*ie]+ke],V[G-2*ie]=In[255+ve+Se],V[G-ie]=In[255+K+pe],V[G+0]=In[255+se-pe],V[G+ie]=In[255+de-Se],V[G+2*ie]=In[255+we-ke]}h+=P}}function da(f,h,b,P,L,I,D,B){for(I=2*I+1;0<L--;){if(Js(f,h,b,I,D))if(Ho(f,h,b,B))qo(f,h,b);else{var V=f,G=h,ie=b,ve=V[G-ie],K=V[G+0],se=V[G+ie],de=Hf[112+(4+(we=3*(K-ve))>>3)],we=Hf[112+(we+3>>3)],pe=de+1>>1;V[G-2*ie]=In[255+V[G-2*ie]+pe],V[G-ie]=In[255+ve+we],V[G+0]=In[255+K-de],V[G+ie]=In[255+se-pe]}h+=P}}function Bf(f,h,b,P,L,I){fa(f,h,b,1,16,P,L,I)}function Uf(f,h,b,P,L,I){fa(f,h,1,b,16,P,L,I)}function Ko(f,h,b,P,L,I){var D;for(D=3;0<D;--D)da(f,h+=4*b,b,1,16,P,L,I)}function $f(f,h,b,P,L,I){var D;for(D=3;0<D;--D)da(f,h+=4,1,b,16,P,L,I)}function g(f,h,b,P,L,I,D,B){fa(f,h,L,1,8,I,D,B),fa(b,P,L,1,8,I,D,B)}function C(f,h,b,P,L,I,D,B){fa(f,h,1,L,8,I,D,B),fa(b,P,1,L,8,I,D,B)}function Q(f,h,b,P,L,I,D,B){da(f,h+4*L,L,1,8,I,D,B),da(b,P+4*L,L,1,8,I,D,B)}function te(f,h,b,P,L,I,D,B){da(f,h+4,1,L,8,I,D,B),da(b,P+4,1,L,8,I,D,B)}function ce(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function xe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ee(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function $e(){this.ua=0,this.Wa=new nt,this.vb=new nt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new W}function Ke(){this.xb=this.a=0,this.l=new Gs,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new $e,this.ab=0,this.gc=o(4,Ee),this.Oc=0}function lt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Gs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vt(f,h,b,P,L,I,D){for(f=f==null?0:f[h+0],h=0;h<D;++h)L[I+h]=f+b[P+h]&255,f=L[I+h]}function Rt(f,h,b,P,L,I,D){var B;if(f==null)vt(null,null,b,P,L,I,D);else for(B=0;B<D;++B)L[I+B]=f[h+B]+b[P+B]&255}function nr(f,h,b,P,L,I,D){if(f==null)vt(null,null,b,P,L,I,D);else{var B,V=f[h+0],G=V,ie=V;for(B=0;B<D;++B)G=ie+(V=f[h+B])-G,ie=b[P+B]+(-256&G?0>G?0:255:G)&255,G=V,L[I+B]=ie}}function Er(f,h,b,P){var L=h.width,I=h.o;if(t(f!=null&&h!=null),0>b||0>=P||b+P>I)return null;if(!f.Cc){if(f.ga==null){var D;if(f.ga=new lt,(D=f.ga==null)||(D=h.width*h.o,t(f.Gb.length==0),f.Gb=a(D),f.Uc=0,f.Gb==null?D=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,D=1),D=!D),!D){D=f.ga;var B=f.Fa,V=f.P,G=f.qc,ie=f.mb,ve=f.nb,K=V+1,se=G-1,de=D.l;if(t(B!=null&&ie!=null&&h!=null),Xa[0]=null,Xa[1]=vt,Xa[2]=Rt,Xa[3]=nr,D.ca=ie,D.tb=ve,D.c=h.width,D.i=h.height,t(0<D.c&&0<D.i),1>=G)h=0;else if(D.$a=3&B[V+0],D.Z=B[V+0]>>2&3,D.Lc=B[V+0]>>4&3,V=B[V+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||V)h=0;else if(de.put=it,de.ac=Mi,de.bc=oa,de.ma=D,de.width=h.width,de.height=h.height,de.Da=h.Da,de.v=h.v,de.va=h.va,de.j=h.j,de.o=h.o,D.$a)e:{t(D.$a==1),h=Fo();t:for(;;){if(h==null){h=0;break e}if(t(D!=null),D.mc=h,h.c=D.c,h.i=D.i,h.l=D.l,h.l.ma=D,h.l.width=D.c,h.l.height=D.i,h.a=0,re(h.m,B,K,se),!Fi(D.c,D.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&pi(h.s)?(D.ic=1,B=h.c*h.i,h.Ta=null,h.Ua=0,h.V=a(B),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(D.ic=0,h=Bo(h,D.c)),!h))break t;h=1;break e}D.mc=null,h=0}else h=se>=D.c*D.i;D=!h}if(D)return null;f.ga.Lc!=1?f.Ga=0:P=I-b}t(f.ga!=null),t(b+P<=I);e:{if(h=(B=f.ga).c,I=B.l.o,B.$a==0){if(K=f.rc,se=f.Vc,de=f.Fa,V=f.P+1+b*h,G=f.mb,ie=f.nb+b*h,t(V<=f.P+f.qc),B.Z!=0)for(t(Xa[B.Z]!=null),D=0;D<P;++D)Xa[B.Z](K,se,de,V,G,ie,h),K=G,se=ie,ie+=h,V+=h;else for(D=0;D<P;++D)n(G,ie,de,V,h),K=G,se=ie,ie+=h,V+=h;f.rc=K,f.Vc=se}else{if(t(B.mc!=null),h=b+P,t((D=B.mc)!=null),t(h<=D.i),D.C>=h)h=1;else if(B.ic||ei(),B.ic){B=D.V,K=D.Ba,se=D.c;var we=D.i,pe=(de=1,V=D.$/se,G=D.$%se,ie=D.m,ve=D.s,D.$),Se=se*we,ke=se*h,Le=ve.wc,Te=pe<ke?zr(ve,G,V):null;t(pe<=Se),t(h<=we),t(pi(ve));t:for(;;){for(;!ie.h&&pe<ke;){if(G&Le||(Te=zr(ve,G,V)),t(Te!=null),ue(ie),256>(we=cr(Te.G[0],Te.H[0],ie)))B[K+pe]=we,++pe,++G>=se&&(G=0,++V<=h&&!(V%16)&&vi(D,V));else{if(!(280>we)){de=0;break t}we=Yn(we-256,ie);var Ye,De=cr(Te.G[4],Te.H[4],ie);if(ue(ie),!(pe>=(De=Jn(se,De=Yn(De,ie)))&&Se-pe>=we)){de=0;break t}for(Ye=0;Ye<we;++Ye)B[K+pe+Ye]=B[K+pe+Ye-De];for(pe+=we,G+=we;G>=se;)G-=se,++V<=h&&!(V%16)&&vi(D,V);pe<ke&&G&Le&&(Te=zr(ve,G,V))}t(ie.h==ee(ie))}vi(D,V>h?h:V);break t}!de||ie.h&&pe<Se?(de=0,D.a=ie.h?5:3):D.$=pe,h=de}else h=mi(D,D.V,D.Ba,D.c,D.i,h,Ws);if(!h){P=0;break e}}b+P>=I&&(f.Cc=1),P=1}if(!P)return null;if(f.Cc&&((P=f.ga)!=null&&(P.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+b*L}function Kt(f,h,b,P,L,I){for(;0<L--;){var D,B=f,V=h+(b?1:0),G=f,ie=h+(b?0:3);for(D=0;D<P;++D){var ve=G[ie+4*D];ve!=255&&(ve*=32897,B[V+4*D+0]=B[V+4*D+0]*ve>>23,B[V+4*D+1]=B[V+4*D+1]*ve>>23,B[V+4*D+2]=B[V+4*D+2]*ve>>23)}h+=I}}function Nr(f,h,b,P,L){for(;0<P--;){var I;for(I=0;I<b;++I){var D=f[h+2*I+0],B=15&(G=f[h+2*I+1]),V=4369*B,G=(240&G|G>>4)*V>>16;f[h+2*I+0]=(240&D|D>>4)*V>>16&240|(15&D|D<<4)*V>>16>>4&15,f[h+2*I+1]=240&G|B}h+=L}}function Cr(f,h,b,P,L,I,D,B){var V,G,ie=255;for(G=0;G<L;++G){for(V=0;V<P;++V){var ve=f[h+V];I[D+4*V]=ve,ie&=ve}h+=b,D+=B}return ie!=255}function Wr(f,h,b,P,L){var I;for(I=0;I<L;++I)b[P+I]=f[h+I]>>8}function ei(){Vl=Kt,j_=Nr,I_=Cr,M_=Wr}function wn(f,h,b){M[f]=function(P,L,I,D,B,V,G,ie,ve,K,se,de,we,pe,Se,ke,Le){var Te,Ye=Le-1>>1,De=B[V+0]|G[ie+0]<<16,wt=ve[K+0]|se[de+0]<<16;t(P!=null);var qe=3*De+wt+131074>>2;for(h(P[L+0],255&qe,qe>>16,we,pe),I!=null&&(qe=3*wt+De+131074>>2,h(I[D+0],255&qe,qe>>16,Se,ke)),Te=1;Te<=Ye;++Te){var Pt=B[V+Te]|G[ie+Te]<<16,jr=ve[K+Te]|se[de+Te]<<16,bt=De+Pt+wt+jr+524296,He=bt+2*(Pt+wt)>>3;qe=He+De>>1,De=(bt=bt+2*(De+jr)>>3)+Pt>>1,h(P[L+2*Te-1],255&qe,qe>>16,we,pe+(2*Te-1)*b),h(P[L+2*Te-0],255&De,De>>16,we,pe+(2*Te-0)*b),I!=null&&(qe=bt+wt>>1,De=He+jr>>1,h(I[D+2*Te-1],255&qe,qe>>16,Se,ke+(2*Te-1)*b),h(I[D+2*Te+0],255&De,De>>16,Se,ke+(2*Te+0)*b)),De=Pt,wt=jr}1&Le||(qe=3*De+wt+131074>>2,h(P[L+Le-1],255&qe,qe>>16,we,pe+(Le-1)*b),I!=null&&(qe=3*wt+De+131074>>2,h(I[D+Le-1],255&qe,qe>>16,Se,ke+(Le-1)*b)))}}function Vf(){ii[Gf]=gL,ii[Kf]=G_,ii[V_]=yL,ii[Qf]=K_,ii[Yf]=Q_,ii[Hv]=Y_,ii[z_]=_L,ii[Gv]=G_,ii[Kv]=K_,ii[Jf]=Q_,ii[Qv]=Y_}function Xs(f){return f&-16384?0>f?0:255:f>>wL}function Qo(f,h){return Xs((19077*f>>8)+(26149*h>>8)-14234)}function za(f,h,b){return Xs((19077*f>>8)-(6419*h>>8)-(13320*b>>8)+8708)}function Yo(f,h){return Xs((19077*f>>8)+(33050*h>>8)-17685)}function Jo(f,h,b,P,L){P[L+0]=Qo(f,b),P[L+1]=za(f,h,b),P[L+2]=Yo(f,h)}function Xo(f,h,b,P,L){P[L+0]=Yo(f,h),P[L+1]=za(f,h,b),P[L+2]=Qo(f,b)}function Xr(f,h,b,P,L){var I=za(f,h,b);h=I<<3&224|Yo(f,h)>>3,P[L+0]=248&Qo(f,b)|I>>5,P[L+1]=h}function Zo(f,h,b,P,L){var I=240&Yo(f,h)|15;P[L+0]=240&Qo(f,b)|za(f,h,b)>>4,P[L+1]=I}function es(f,h,b,P,L){P[L+0]=255,Jo(f,h,b,P,L+1)}function Nl(f,h,b,P,L){Xo(f,h,b,P,L),P[L+3]=255}function Rl(f,h,b,P,L){Jo(f,h,b,P,L),P[L+3]=255}function lr(f,h){return 0>f?0:f>h?h:f}function ha(f,h,b){M[f]=function(P,L,I,D,B,V,G,ie,ve){for(var K=ie+(-2&ve)*b;ie!=K;)h(P[L+0],I[D+0],B[V+0],G,ie),h(P[L+1],I[D+0],B[V+0],G,ie+b),L+=2,++D,++V,ie+=2*b;1&ve&&h(P[L+0],I[D+0],B[V+0],G,ie)}}function Zs(f,h,b){return b==0?f==0?h==0?6:5:h==0?4:0:b}function zf(f,h,b,P,L){switch(f>>>30){case 3:is(h,b,P,L,0);break;case 2:ri(h,b,P,L);break;case 1:Mt(h,b,P,L)}}function ti(f,h){var b,P,L=h.M,I=h.Nb,D=f.oc,B=f.pc+40,V=f.oc,G=f.pc+584,ie=f.oc,ve=f.pc+600;for(b=0;16>b;++b)D[B+32*b-1]=129;for(b=0;8>b;++b)V[G+32*b-1]=129,ie[ve+32*b-1]=129;for(0<L?D[B-1-32]=V[G-1-32]=ie[ve-1-32]=129:(i(D,B-32-1,127,21),i(V,G-32-1,127,9),i(ie,ve-32-1,127,9)),P=0;P<f.za;++P){var K=h.ya[h.aa+P];if(0<P){for(b=-1;16>b;++b)n(D,B+32*b-4,D,B+32*b+12,4);for(b=-1;8>b;++b)n(V,G+32*b-4,V,G+32*b+4,4),n(ie,ve+32*b-4,ie,ve+32*b+4,4)}var se=f.Gd,de=f.Hd+P,we=K.ad,pe=K.Hc;if(0<L&&(n(D,B-32,se[de].y,0,16),n(V,G-32,se[de].f,0,8),n(ie,ve-32,se[de].ea,0,8)),K.Za){var Se=D,ke=B-32+16;for(0<L&&(P>=f.za-1?i(Se,ke,se[de].y[15],4):n(Se,ke,se[de+1].y,0,4)),b=0;4>b;b++)Se[ke+128+b]=Se[ke+256+b]=Se[ke+384+b]=Se[ke+0+b];for(b=0;16>b;++b,pe<<=2)Se=D,ke=B+X_[b],yi[K.Ob[b]](Se,ke),zf(pe,we,16*+b,Se,ke)}else if(Se=Zs(P,L,K.Ob[0]),Ja[Se](D,B),pe!=0)for(b=0;16>b;++b,pe<<=2)zf(pe,we,16*+b,D,B+X_[b]);for(b=K.Gc,Se=Zs(P,L,K.Dd),ma[Se](V,G),ma[Se](ie,ve),pe=we,Se=V,ke=G,255&(K=0|b)&&(170&K?Vi(pe,256,Se,ke):qt(pe,256,Se,ke)),K=ie,pe=ve,255&(b>>=8)&&(170&b?Vi(we,320,K,pe):qt(we,320,K,pe)),L<f.Ub-1&&(n(se[de].y,0,D,B+480,16),n(se[de].f,0,V,G+224,8),n(se[de].ea,0,ie,ve+224,8)),b=8*I*f.B,se=f.sa,de=f.ta+16*P+16*I*f.R,we=f.qa,K=f.ra+8*P+b,pe=f.Ha,Se=f.Ia+8*P+b,b=0;16>b;++b)n(se,de+b*f.R,D,B+32*b,16);for(b=0;8>b;++b)n(we,K+b*f.B,V,G+32*b,8),n(pe,Se+b*f.B,ie,ve+32*b,8)}}function ts(f,h,b,P,L,I,D,B,V){var G=[0],ie=[0],ve=0,K=V!=null?V.kd:0,se=V??new xe;if(f==null||12>b)return 7;se.data=f,se.w=h,se.ha=b,h=[h],b=[b],se.gb=[se.gb];e:{var de=h,we=b,pe=se.gb;if(t(f!=null),t(we!=null),t(pe!=null),pe[0]=0,12<=we[0]&&!e(f,de[0],"RIFF")){if(e(f,de[0]+8,"WEBP")){pe=3;break e}var Se=ge(f,de[0]+4);if(12>Se||4294967286<Se){pe=3;break e}if(K&&Se>we[0]-8){pe=7;break e}pe[0]=Se,de[0]+=12,we[0]-=12}pe=0}if(pe!=0)return pe;for(Se=0<se.gb[0],b=b[0];;){e:{var ke=f;we=h,pe=b;var Le=G,Te=ie,Ye=de=[0];if((qe=ve=[ve])[0]=0,8>pe[0])pe=7;else{if(!e(ke,we[0],"VP8X")){if(ge(ke,we[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var De=ge(ke,we[0]+8),wt=1+Ae(ke,we[0]+12);if(2147483648<=wt*(ke=1+Ae(ke,we[0]+15))){pe=3;break e}Ye!=null&&(Ye[0]=De),Le!=null&&(Le[0]=wt),Te!=null&&(Te[0]=ke),we[0]+=18,pe[0]-=18,qe[0]=1}pe=0}}if(ve=ve[0],de=de[0],pe!=0)return pe;if(we=!!(2&de),!Se&&ve)return 3;if(I!=null&&(I[0]=!!(16&de)),D!=null&&(D[0]=we),B!=null&&(B[0]=0),D=G[0],de=ie[0],ve&&we&&V==null){pe=0;break}if(4>b){pe=7;break}if(Se&&ve||!Se&&!ve&&!e(f,h[0],"ALPH")){b=[b],se.na=[se.na],se.P=[se.P],se.Sa=[se.Sa];e:{De=f,pe=h,Se=b;var qe=se.gb;Le=se.na,Te=se.P,Ye=se.Sa,wt=22,t(De!=null),t(Se!=null),ke=pe[0];var Pt=Se[0];for(t(Le!=null),t(Ye!=null),Le[0]=null,Te[0]=null,Ye[0]=0;;){if(pe[0]=ke,Se[0]=Pt,8>Pt){pe=7;break e}var jr=ge(De,ke+4);if(4294967286<jr){pe=3;break e}var bt=8+jr+1&-2;if(wt+=bt,0<qe&&wt>qe){pe=3;break e}if(!e(De,ke,"VP8 ")||!e(De,ke,"VP8L")){pe=0;break e}if(Pt[0]<bt){pe=7;break e}e(De,ke,"ALPH")||(Le[0]=De,Te[0]=ke+8,Ye[0]=jr),ke+=bt,Pt-=bt}}if(b=b[0],se.na=se.na[0],se.P=se.P[0],se.Sa=se.Sa[0],pe!=0)break}b=[b],se.Ja=[se.Ja],se.xa=[se.xa];e:if(qe=f,pe=h,Se=b,Le=se.gb[0],Te=se.Ja,Ye=se.xa,De=pe[0],ke=!e(qe,De,"VP8 "),wt=!e(qe,De,"VP8L"),t(qe!=null),t(Se!=null),t(Te!=null),t(Ye!=null),8>Se[0])pe=7;else{if(ke||wt){if(qe=ge(qe,De+4),12<=Le&&qe>Le-12){pe=3;break e}if(K&&qe>Se[0]-8){pe=7;break e}Te[0]=qe,pe[0]+=8,Se[0]-=8,Ye[0]=wt}else Ye[0]=5<=Se[0]&&qe[De+0]==47&&!(qe[De+4]>>5),Te[0]=Se[0];pe=0}if(b=b[0],se.Ja=se.Ja[0],se.xa=se.xa[0],h=h[0],pe!=0)break;if(4294967286<se.Ja)return 3;if(B==null||we||(B[0]=se.xa?2:1),D=[D],de=[de],se.xa){if(5>b){pe=7;break}B=D,K=de,we=I,f==null||5>b?f=0:5<=b&&f[h+0]==47&&!(f[h+4]>>5)?(Se=[0],qe=[0],Le=[0],re(Te=new z,f,h,b),sa(Te,Se,qe,Le)?(B!=null&&(B[0]=Se[0]),K!=null&&(K[0]=qe[0]),we!=null&&(we[0]=Le[0]),f=1):f=0):f=0}else{if(10>b){pe=7;break}B=de,f==null||10>b||!Rf(f,h+3,b-3)?f=0:(K=f[h+0]|f[h+1]<<8|f[h+2]<<16,we=16383&(f[h+7]<<8|f[h+6]),f=16383&(f[h+9]<<8|f[h+8]),1&K||3<(K>>1&7)||!(K>>4&1)||K>>5>=se.Ja||!we||!f?f=0:(D&&(D[0]=we),B&&(B[0]=f),f=1))}if(!f||(D=D[0],de=de[0],ve&&(G[0]!=D||ie[0]!=de)))return 3;V!=null&&(V[0]=se,V.offset=h-V.w,t(4294967286>h-V.w),t(V.offset==V.ha-b));break}return pe==0||pe==7&&ve&&V==null?(I!=null&&(I[0]|=se.na!=null&&0<se.na.length),P!=null&&(P[0]=D),L!=null&&(L[0]=de),0):pe}function jl(f,h,b){var P=h.width,L=h.height,I=0,D=0,B=P,V=L;if(h.Da=f!=null&&0<f.Da,h.Da&&(B=f.cd,V=f.bd,I=f.v,D=f.j,11>b||(I&=-2,D&=-2),0>I||0>D||0>=B||0>=V||I+B>P||D+V>L))return 0;if(h.v=I,h.j=D,h.va=I+B,h.o=D+V,h.U=B,h.T=V,h.da=f!=null&&0<f.da,h.da){if(!et(B,V,b=[f.ib],I=[f.hb]))return 0;h.ib=b[0],h.hb=I[0]}return h.ob=f!=null&&f.ob,h.Kb=f==null||!f.Sd,h.da&&(h.ob=h.ib<3*P/4&&h.hb<3*L/4,h.Kb=0),1}function Il(f){if(f==null)return 2;if(11>f.S){var h=f.f.RGBA;h.fb+=(f.height-1)*h.A,h.A=-h.A}else h=f.f.kb,f=f.height,h.O+=(f-1)*h.fa,h.fa=-h.fa,h.N+=(f-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(f-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(f-1)*h.lb,h.lb=-h.lb);return 0}function Wa(f,h,b,P){if(P==null||0>=f||0>=h)return 2;if(b!=null){if(b.Da){var L=b.cd,I=b.bd,D=-2&b.v,B=-2&b.j;if(0>D||0>B||0>=L||0>=I||D+L>f||B+I>h)return 2;f=L,h=I}if(b.da){if(!et(f,h,L=[b.ib],I=[b.hb]))return 2;f=L[0],h=I[0]}}P.width=f,P.height=h;e:{var V=P.width,G=P.height;if(f=P.S,0>=V||0>=G||!(f>=Gf&&13>f))f=2;else{if(0>=P.Rd&&P.sd==null){D=I=L=h=0;var ie=(B=V*Z_[f])*G;if(11>f||(I=(G+1)/2*(h=(V+1)/2),f==12&&(D=(L=V)*G)),(G=a(ie+2*I+D))==null){f=1;break e}P.sd=G,11>f?((V=P.f.RGBA).eb=G,V.fb=0,V.A=B,V.size=ie):((V=P.f.kb).y=G,V.O=0,V.fa=B,V.Fd=ie,V.f=G,V.N=0+ie,V.Ab=h,V.Cd=I,V.ea=G,V.W=0+ie+I,V.Db=h,V.Ed=I,f==12&&(V.F=G,V.J=0+ie+2*I),V.Tc=D,V.lb=L)}if(h=1,L=P.S,I=P.width,D=P.height,L>=Gf&&13>L)if(11>L)f=P.f.RGBA,h&=(B=Math.abs(f.A))*(D-1)+I<=f.size,h&=B>=I*Z_[L],h&=f.eb!=null;else{f=P.f.kb,B=(I+1)/2,ie=(D+1)/2,V=Math.abs(f.fa),G=Math.abs(f.Ab);var ve=Math.abs(f.Db),K=Math.abs(f.lb),se=K*(D-1)+I;h&=V*(D-1)+I<=f.Fd,h&=G*(ie-1)+B<=f.Cd,h=(h&=ve*(ie-1)+B<=f.Ed)&V>=I&G>=B&ve>=B,h&=f.y!=null,h&=f.f!=null,h&=f.ea!=null,L==12&&(h&=K>=I,h&=se<=f.Tc,h&=f.F!=null)}else h=0;f=h?0:2}}return f!=0||b!=null&&b.fd&&(f=Il(P)),f}var rs=64,Rn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jn=24,qa=32,pa=8,Ha=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Re("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(f){return f},M.Predictor2=function(f,h,b){return h[b+0]},M.Predictor3=function(f,h,b){return h[b+1]},M.Predictor4=function(f,h,b){return h[b-1]},M.Predictor5=function(f,h,b){return Ge(Ge(f,h[b+1]),h[b+0])},M.Predictor6=function(f,h,b){return Ge(f,h[b-1])},M.Predictor7=function(f,h,b){return Ge(f,h[b+0])},M.Predictor8=function(f,h,b){return Ge(h[b-1],h[b+0])},M.Predictor9=function(f,h,b){return Ge(h[b+0],h[b+1])},M.Predictor10=function(f,h,b){return Ge(Ge(f,h[b-1]),Ge(h[b+0],h[b+1]))},M.Predictor11=function(f,h,b){var P=h[b+0];return 0>=ut(P>>24&255,f>>24&255,(h=h[b-1])>>24&255)+ut(P>>16&255,f>>16&255,h>>16&255)+ut(P>>8&255,f>>8&255,h>>8&255)+ut(255&P,255&f,255&h)?P:f},M.Predictor12=function(f,h,b){var P=h[b+0];return(St((f>>24&255)+(P>>24&255)-((h=h[b-1])>>24&255))<<24|St((f>>16&255)+(P>>16&255)-(h>>16&255))<<16|St((f>>8&255)+(P>>8&255)-(h>>8&255))<<8|St((255&f)+(255&P)-(255&h)))>>>0},M.Predictor13=function(f,h,b){var P=h[b-1];return(ct((f=Ge(f,h[b+0]))>>24&255,P>>24&255)<<24|ct(f>>16&255,P>>16&255)<<16|ct(f>>8&255,P>>8&255)<<8|ct(255&f,255&P))>>>0};var Ml=M.PredictorAdd0;M.PredictorAdd1=Ot,Re("Predictor2","PredictorAdd2"),Re("Predictor3","PredictorAdd3"),Re("Predictor4","PredictorAdd4"),Re("Predictor5","PredictorAdd5"),Re("Predictor6","PredictorAdd6"),Re("Predictor7","PredictorAdd7"),Re("Predictor8","PredictorAdd8"),Re("Predictor9","PredictorAdd9"),Re("Predictor10","PredictorAdd10"),Re("Predictor11","PredictorAdd11"),Re("Predictor12","PredictorAdd12"),Re("Predictor13","PredictorAdd13");var ec=M.PredictorAdd2;Qe("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Qe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var yr,Wf=M.ColorIndexInverseTransform,Ui=M.MapARGB,$i=M.VP8LColorIndexInverseTransformAlpha,Dl=M.MapAlpha,Fl=M.VP8LPredictorsAdd=[];Fl.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var Bl,Ul,Ga,Ka,Qa,ns,Ya,is,ri,Vi,Mt,qt,_r,Rr,va,$l,tc,qf,C_,L_,O_,A_,N_,R_,Vl,j_,I_,M_,D_=a(511),F_=a(2041),B_=a(225),U_=a(767),$_=0,qv=F_,Hf=B_,In=U_,ni=D_,Gf=0,Kf=1,V_=2,Qf=3,Yf=4,Hv=5,z_=6,Gv=7,Kv=8,Jf=9,Qv=10,nL=[2,3,7],iL=[3,3,11],W_=[280,256,256,256,40],aL=[0,1,1,1,0],oL=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sL=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cL=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],lL=8,Yv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Jv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],zl=null,uL=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fL=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],q_=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dL=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hL=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pL=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vL=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ja=[],yi=[],ma=[],mL=1,H_=2,Xa=[],ii=[];wn("UpsampleRgbLinePair",Jo,3),wn("UpsampleBgrLinePair",Xo,3),wn("UpsampleRgbaLinePair",Rl,4),wn("UpsampleBgraLinePair",Nl,4),wn("UpsampleArgbLinePair",es,4),wn("UpsampleRgba4444LinePair",Zo,2),wn("UpsampleRgb565LinePair",Xr,2);var gL=M.UpsampleRgbLinePair,yL=M.UpsampleBgrLinePair,G_=M.UpsampleRgbaLinePair,K_=M.UpsampleBgraLinePair,Q_=M.UpsampleArgbLinePair,Y_=M.UpsampleRgba4444LinePair,_L=M.UpsampleRgb565LinePair,Xf=16,Zf=1<<Xf-1,Wl=-227,Xv=482,wL=6,J_=0,bL=a(256),SL=a(256),xL=a(256),kL=a(256),PL=a(Xv-Wl),TL=a(Xv-Wl);ha("YuvToRgbRow",Jo,3),ha("YuvToBgrRow",Xo,3),ha("YuvToRgbaRow",Rl,4),ha("YuvToBgraRow",Nl,4),ha("YuvToArgbRow",es,4),ha("YuvToRgba4444Row",Zo,2),ha("YuvToRgb565Row",Xr,2);var X_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ed=[0,2,8],EL=[8,7,6,4,4,2,2,2,1,1,1,1],CL=1;this.WebPDecodeRGBA=function(f,h,b,P,L){var I=Kf,D=new ce,B=new Wt;D.ba=B,B.S=I,B.width=[B.width],B.height=[B.height];var V=B.width,G=B.height,ie=new dt;if(ie==null||f==null)var ve=2;else t(ie!=null),ve=ts(f,h,b,ie.width,ie.height,ie.Pd,ie.Qd,ie.format,null);if(ve!=0?V=0:(V!=null&&(V[0]=ie.width[0]),G!=null&&(G[0]=ie.height[0]),V=1),V){B.width=B.width[0],B.height=B.height[0],P!=null&&(P[0]=B.width),L!=null&&(L[0]=B.height);e:{if(P=new Gs,(L=new xe).data=f,L.w=h,L.ha=b,L.kd=1,h=[0],t(L!=null),((f=ts(L.data,L.w,L.ha,null,null,null,h,null,L))==0||f==7)&&h[0]&&(f=4),(h=f)==0){if(t(D!=null),P.data=L.data,P.w=L.w+L.offset,P.ha=L.ha-L.offset,P.put=it,P.ac=Mi,P.bc=oa,P.ma=D,L.xa){if((f=Fo())==null){D=1;break e}if(function(K,se){var de=[0],we=[0],pe=[0];t:for(;;){if(K==null)return 0;if(se==null)return K.a=2,0;if(K.l=se,K.a=0,re(K.m,se.data,se.w,se.ha),!sa(K.m,de,we,pe)){K.a=3;break t}if(K.xb=H_,se.width=de[0],se.height=we[0],!Fi(de[0],we[0],1,K,null))break t;return 1}return t(K.a!=0),0}(f,P)){if(P=(h=Wa(P.width,P.height,D.Oa,D.ba))==0){t:{P=f;r:for(;;){if(P==null){P=0;break t}if(t(P.s.yc!=null),t(P.s.Ya!=null),t(0<P.s.Wb),t((b=P.l)!=null),t((L=b.ma)!=null),P.xb!=0){if(P.ca=L.ba,P.tb=L.tb,t(P.ca!=null),!jl(L.Oa,b,Qf)){P.a=2;break r}if(!Bo(P,b.width)||b.da)break r;if((b.da||je(P.ca.S))&&ei(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&ei()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!J(P.s.vb,P.s.Wa.Xa)){P.a=1;break r}P.xb=0}if(!mi(P,P.V,P.Ba,P.c,P.i,b.o,Ua))break r;L.Dc=P.Ma,P=1;break t}t(P.a!=0),P=0}P=!P}P&&(h=f.a)}else h=f.a}else{if((f=new Ov)==null){D=1;break e}if(f.Fa=L.na,f.P=L.P,f.qc=L.Sa,jf(f,P)){if((h=Wa(P.width,P.height,D.Oa,D.ba))==0){if(f.Aa=0,b=D.Oa,t((L=f)!=null),b!=null){if(0<(V=0>(V=b.Md)?0:100<V?255:255*V/100)){for(G=ie=0;4>G;++G)12>(ve=L.pb[G]).lc&&(ve.ia=V*EL[0>ve.lc?0:ve.lc]>>3),ie|=ve.ia;ie&&(alert("todo:VP8InitRandom"),L.ia=1)}L.Ga=b.Id,100<L.Ga?L.Ga=100:0>L.Ga&&(L.Ga=0)}(function(K,se){if(K==null)return 0;if(se==null)return Tr(K,2,"NULL VP8Io parameter in VP8Decode().");if(!K.cb&&!jf(K,se))return 0;if(t(K.cb),se.ac==null||se.ac(se)){se.ob&&(K.L=0);var de=ed[K.L];if(K.L==2?(K.yb=0,K.zb=0):(K.yb=se.v-de>>4,K.zb=se.j-de>>4,0>K.yb&&(K.yb=0),0>K.zb&&(K.zb=0)),K.Va=se.o+15+de>>4,K.Hb=se.va+15+de>>4,K.Hb>K.za&&(K.Hb=K.za),K.Va>K.Ub&&(K.Va=K.Ub),0<K.L){var we=K.ed;for(de=0;4>de;++de){var pe;if(K.Qa.Cb){var Se=K.Qa.Lb[de];K.Qa.Fb||(Se+=we.Tb)}else Se=we.Tb;for(pe=0;1>=pe;++pe){var ke=K.gd[de][pe],Le=Se;if(we.Pc&&(Le+=we.vd[0],pe&&(Le+=we.od[0])),0<(Le=0>Le?0:63<Le?63:Le)){var Te=Le;0<we.wb&&(Te=4<we.wb?Te>>2:Te>>1)>9-we.wb&&(Te=9-we.wb),1>Te&&(Te=1),ke.dd=Te,ke.tc=2*Le+Te,ke.ld=40<=Le?2:15<=Le?1:0}else ke.tc=0;ke.La=pe}}}de=0}else Tr(K,6,"Frame setup failed"),de=K.a;if(de=de==0){if(de){K.$c=0,0<K.Aa||(K.Ic=CL);t:{de=K.Ic,we=4*(Te=K.za);var Ye=32*Te,De=Te+1,wt=0<K.L?Te*(0<K.Aa?2:1):0,qe=(K.Aa==2?2:1)*Te;if((ke=we+832+(pe=3*(16*de+ed[K.L])/2*Ye)+(Se=K.Fa!=null&&0<K.Fa.length?K.Kc.c*K.Kc.i:0))!=ke)de=0;else{if(ke>K.Vb){if(K.Vb=0,K.Ec=a(ke),K.Fc=0,K.Ec==null){de=Tr(K,1,"no memory during frame initialization.");break t}K.Vb=ke}ke=K.Ec,Le=K.Fc,K.Ac=ke,K.Bc=Le,Le+=we,K.Gd=o(Ye,Af),K.Hd=0,K.rb=o(De+1,bl),K.sb=1,K.wa=wt?o(wt,Zn):null,K.Y=0,K.D.Nb=0,K.D.wa=K.wa,K.D.Y=K.Y,0<K.Aa&&(K.D.Y+=Te),t(!0),K.oc=ke,K.pc=Le,Le+=832,K.ya=o(qe,Sl),K.aa=0,K.D.ya=K.ya,K.D.aa=K.aa,K.Aa==2&&(K.D.aa+=Te),K.R=16*Te,K.B=8*Te,Te=(Ye=ed[K.L])*K.R,Ye=Ye/2*K.B,K.sa=ke,K.ta=Le+Te,K.qa=K.sa,K.ra=K.ta+16*de*K.R+Ye,K.Ha=K.qa,K.Ia=K.ra+8*de*K.B+Ye,K.$c=0,Le+=pe,K.mb=Se?ke:null,K.nb=Se?Le:null,t(Le+Se<=K.Fc+K.Vb),Uo(K),i(K.Ac,K.Bc,0,we),de=1}}if(de){if(se.ka=0,se.y=K.sa,se.O=K.ta,se.f=K.qa,se.N=K.ra,se.ea=K.Ha,se.Vd=K.Ia,se.fa=K.R,se.Rc=K.B,se.F=null,se.J=0,!$_){for(de=-255;255>=de;++de)D_[255+de]=0>de?-de:de;for(de=-1020;1020>=de;++de)F_[1020+de]=-128>de?-128:127<de?127:de;for(de=-112;112>=de;++de)B_[112+de]=-16>de?-16:15<de?15:de;for(de=-255;510>=de;++de)U_[255+de]=0>de?0:255<de?255:de;$_=1}Ya=Mf,is=Nv,Vi=Rv,Mt=Bi,qt=If,ri=Av,_r=Bf,Rr=Uf,va=g,$l=C,tc=Ko,qf=$f,C_=Q,L_=te,O_=Al,A_=Go,N_=Df,R_=Ff,yi[0]=Uv,yi[1]=kl,yi[2]=Fv,yi[3]=Bv,yi[4]=$v,yi[5]=ua,yi[6]=la,yi[7]=Vv,yi[8]=Ks,yi[9]=zv,Ja[0]=Va,Ja[1]=Iv,Ja[2]=Mv,Ja[3]=Pl,Ja[4]=Dv,Ja[5]=zo,Ja[6]=Tl,ma[0]=Ys,ma[1]=jv,ma[2]=El,ma[3]=Wo,ma[4]=Cl,ma[5]=Wv,ma[6]=Ll,de=1}else de=0}de&&(de=function(Pt,jr){for(Pt.M=0;Pt.M<Pt.Va;++Pt.M){var bt,He=Pt.Jc[Pt.M&Pt.Xb],Ne=Pt.m,wr=Pt;for(bt=0;bt<wr.za;++bt){var yt=Ne,Et=wr,Jt=Et.Ac,qr=Et.Bc+4*bt,un=Et.zc,ur=Et.ya[Et.aa+bt];if(Et.Qa.Bb?ur.$b=be(yt,Et.Pa.jb[0])?2+be(yt,Et.Pa.jb[2]):be(yt,Et.Pa.jb[1]):ur.$b=0,Et.kc&&(ur.Ad=be(yt,Et.Bd)),ur.Za=!be(yt,145)+0,ur.Za){var Zr=ur.Ob,fn=0;for(Et=0;4>Et;++Et){var Ir,Ct=un[0+Et];for(Ir=0;4>Ir;++Ir){Ct=hL[Jt[qr+Ir]][Ct];for(var Ft=q_[be(yt,Ct[0])];0<Ft;)Ft=q_[2*Ft+be(yt,Ct[Ft])];Ct=-Ft,Jt[qr+Ir]=Ct}n(Zr,fn,Jt,qr,4),fn+=4,un[0+Et]=Ct}}else Ct=be(yt,156)?be(yt,128)?1:3:be(yt,163)?2:0,ur.Ob[0]=Ct,i(Jt,qr,Ct,4),i(un,0,Ct,4);ur.Dd=be(yt,142)?be(yt,114)?be(yt,183)?1:3:2:0}if(wr.m.Ka)return Tr(Pt,7,"Premature end-of-partition0 encountered.");for(;Pt.ja<Pt.za;++Pt.ja){if(wr=He,yt=(Ne=Pt).rb[Ne.sb-1],Jt=Ne.rb[Ne.sb+Ne.ja],bt=Ne.ya[Ne.aa+Ne.ja],qr=Ne.kc?bt.Ad:0)yt.la=Jt.la=0,bt.Za||(yt.Na=Jt.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var fr,Bt;if(yt=Jt,Jt=wr,qr=Ne.Pa.Xc,un=Ne.ya[Ne.aa+Ne.ja],ur=Ne.pb[un.$b],Et=un.ad,Zr=0,fn=Ne.rb[Ne.sb-1],Ct=Ir=0,i(Et,Zr,0,384),un.Za)var Hr=0,_i=qr[3];else{Ft=a(16);var br=yt.Na+fn.Na;if(br=zl(Jt,qr[1],br,ur.Eb,0,Ft,0),yt.Na=fn.Na=(0<br)+0,1<br)Ya(Ft,0,Et,Zr);else{var bn=Ft[0]+3>>3;for(Ft=0;256>Ft;Ft+=16)Et[Zr+Ft]=bn}Hr=1,_i=qr[0]}var Ht=15&yt.la,Mr=15&fn.la;for(Ft=0;4>Ft;++Ft){var Mn=1&Mr;for(bn=Bt=0;4>bn;++bn)Ht=Ht>>1|(Mn=(br=zl(Jt,_i,br=Mn+(1&Ht),ur.Sc,Hr,Et,Zr))>Hr)<<7,Bt=Bt<<2|(3<br?3:1<br?2:Et[Zr+0]!=0),Zr+=16;Ht>>=4,Mr=Mr>>1|Mn<<7,Ir=(Ir<<8|Bt)>>>0}for(_i=Ht,Hr=Mr>>4,fr=0;4>fr;fr+=2){for(Bt=0,Ht=yt.la>>4+fr,Mr=fn.la>>4+fr,Ft=0;2>Ft;++Ft){for(Mn=1&Mr,bn=0;2>bn;++bn)br=Mn+(1&Ht),Ht=Ht>>1|(Mn=0<(br=zl(Jt,qr[2],br,ur.Qc,0,Et,Zr)))<<3,Bt=Bt<<2|(3<br?3:1<br?2:Et[Zr+0]!=0),Zr+=16;Ht>>=2,Mr=Mr>>1|Mn<<5}Ct|=Bt<<4*fr,_i|=Ht<<4<<fr,Hr|=(240&Mr)<<fr}yt.la=_i,fn.la=Hr,un.Hc=Ir,un.Gc=Ct,un.ia=43690&Ct?0:ur.ia,qr=!(Ir|Ct)}if(0<Ne.L&&(Ne.wa[Ne.Y+Ne.ja]=Ne.gd[bt.$b][bt.Za],Ne.wa[Ne.Y+Ne.ja].La|=!qr),wr.Ka)return Tr(Pt,7,"Premature end-of-file encountered.")}if(Uo(Pt),Ne=jr,wr=1,bt=(He=Pt).D,yt=0<He.L&&He.M>=He.zb&&He.M<=He.Va,He.Aa==0)t:{if(bt.M=He.M,bt.uc=yt,ti(He,bt),wr=1,bt=(Bt=He.D).Nb,yt=(Ct=ed[He.L])*He.R,Jt=Ct/2*He.B,Ft=16*bt*He.R,bn=8*bt*He.B,qr=He.sa,un=He.ta-yt+Ft,ur=He.qa,Et=He.ra-Jt+bn,Zr=He.Ha,fn=He.Ia-Jt+bn,Mr=(Ht=Bt.M)==0,Ir=Ht>=He.Va-1,He.Aa==2&&ti(He,Bt),Bt.uc)for(Mn=(br=He).D.M,t(br.D.uc),Bt=br.yb;Bt<br.Hb;++Bt){Hr=Bt,_i=Mn;var dn=(Dn=(Gr=br).D).Nb;fr=Gr.R;var Dn=Dn.wa[Dn.Y+Hr],Fn=Gr.sa,Sn=Gr.ta+16*dn*fr+16*Hr,Bn=Dn.dd,Qt=Dn.tc;if(Qt!=0)if(t(3<=Qt),Gr.L==1)0<Hr&&A_(Fn,Sn,fr,Qt+4),Dn.La&&R_(Fn,Sn,fr,Qt),0<_i&&O_(Fn,Sn,fr,Qt+4),Dn.La&&N_(Fn,Sn,fr,Qt);else{var Un=Gr.B,wi=Gr.qa,as=Gr.ra+8*dn*Un+8*Hr,ga=Gr.Ha,Gr=Gr.Ia+8*dn*Un+8*Hr;dn=Dn.ld,0<Hr&&(Rr(Fn,Sn,fr,Qt+4,Bn,dn),$l(wi,as,ga,Gr,Un,Qt+4,Bn,dn)),Dn.La&&(qf(Fn,Sn,fr,Qt,Bn,dn),L_(wi,as,ga,Gr,Un,Qt,Bn,dn)),0<_i&&(_r(Fn,Sn,fr,Qt+4,Bn,dn),va(wi,as,ga,Gr,Un,Qt+4,Bn,dn)),Dn.La&&(tc(Fn,Sn,fr,Qt,Bn,dn),C_(wi,as,ga,Gr,Un,Qt,Bn,dn))}}if(He.ia&&alert("todo:DitherRow"),Ne.put!=null){if(Bt=16*Ht,Ht=16*(Ht+1),Mr?(Ne.y=He.sa,Ne.O=He.ta+Ft,Ne.f=He.qa,Ne.N=He.ra+bn,Ne.ea=He.Ha,Ne.W=He.Ia+bn):(Bt-=Ct,Ne.y=qr,Ne.O=un,Ne.f=ur,Ne.N=Et,Ne.ea=Zr,Ne.W=fn),Ir||(Ht-=Ct),Ht>Ne.o&&(Ht=Ne.o),Ne.F=null,Ne.J=null,He.Fa!=null&&0<He.Fa.length&&Bt<Ht&&(Ne.J=Er(He,Ne,Bt,Ht-Bt),Ne.F=He.mb,Ne.F==null&&Ne.F.length==0)){wr=Tr(He,3,"Could not decode alpha data.");break t}Bt<Ne.j&&(Ct=Ne.j-Bt,Bt=Ne.j,t(!(1&Ct)),Ne.O+=He.R*Ct,Ne.N+=He.B*(Ct>>1),Ne.W+=He.B*(Ct>>1),Ne.F!=null&&(Ne.J+=Ne.width*Ct)),Bt<Ht&&(Ne.O+=Ne.v,Ne.N+=Ne.v>>1,Ne.W+=Ne.v>>1,Ne.F!=null&&(Ne.J+=Ne.v),Ne.ka=Bt-Ne.j,Ne.U=Ne.va-Ne.v,Ne.T=Ht-Bt,wr=Ne.put(Ne))}bt+1!=He.Ic||Ir||(n(He.sa,He.ta-yt,qr,un+16*He.R,yt),n(He.qa,He.ra-Jt,ur,Et+8*He.B,Jt),n(He.Ha,He.Ia-Jt,Zr,fn+8*He.B,Jt))}if(!wr)return Tr(Pt,6,"Output aborted.")}return 1}(K,se)),se.bc!=null&&se.bc(se),de&=1}return de?(K.cb=0,de):0})(f,P)||(h=f.a)}}else h=f.a}h==0&&D.Oa!=null&&D.Oa.fd&&(h=Il(D.ba))}D=h}I=D!=0?null:11>I?B.f.RGBA.eb:B.f.kb.y}else I=null;return I};var Z_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(M,Y){for(var O="",N=0;N<4;N++)O+=String.fromCharCode(M[Y++]);return O}function u(M,Y){return M[Y+0]|M[Y+1]<<8}function d(M,Y){return(M[Y+0]|M[Y+1]<<8|M[Y+2]<<16)>>>0}function v(M,Y){return(M[Y+0]|M[Y+1]<<8|M[Y+2]<<16|M[Y+3]<<24)>>>0}new l;var p=[0],y=[0],_=[],x=new l,w=r,S=function(M,Y){var O={},N=0,W=!1,j=0,Z=0;if(O.frames=[],!function(E,z){for(var H=0;H<4;H++)if(E[z+H]!="RIFF".charCodeAt(H))return!0;return!1}(M,Y)){for(v(M,Y+=4),Y+=8;Y<M.length;){var X=c(M,Y),oe=v(M,Y+=4);Y+=4;var q=oe+(1&oe);switch(X){case"VP8 ":case"VP8L":O.frames[N]===void 0&&(O.frames[N]={}),(ne=O.frames[N]).src_off=W?Z:Y-8,ne.src_size=j+oe+8,N++,W&&(W=!1,j=0,Z=0);break;case"VP8X":(ne=O.header={}).feature_flags=M[Y];var re=Y+4;ne.canvas_width=1+d(M,re),re+=3,ne.canvas_height=1+d(M,re),re+=3;break;case"ALPH":W=!0,j=q+8,Z=Y-8;break;case"ANIM":(ne=O.header).bgcolor=v(M,Y),re=Y+4,ne.loop_count=u(M,re),re+=2;break;case"ANMF":var fe,ne;(ne=O.frames[N]={}).offset_x=2*d(M,Y),Y+=3,ne.offset_y=2*d(M,Y),Y+=3,ne.width=1+d(M,Y),Y+=3,ne.height=1+d(M,Y),Y+=3,ne.duration=d(M,Y),Y+=3,fe=M[Y++],ne.dispose=1&fe,ne.blend=fe>>1&1}X!="ANMF"&&(Y+=q)}return O}}(w,0);S.response=w,S.rgbaoutput=!0,S.dataurl=!1;var k=S.header?S.header:null,T=S.frames?S.frames:null;if(k){k.loop_counter=k.loop_count,p=[k.canvas_height],y=[k.canvas_width];for(var R=0;R<T.length&&T[R].blend!=0;R++);}var U=T[0],$=x.WebPDecodeRGBA(w,U.src_off,U.src_size,y,p);U.rgba=$,U.imgwidth=y[0],U.imgheight=p[0];for(var F=0;F<y[0]*p[0]*4;F++)_[F]=$[F];return this.width=y,this.height=p,this.data=_,this}(function(r){var t,e,n,i,a,o,s,l,c,u=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new l,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new o,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new o,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=E;Object.defineProperty(this,"pdf",{get:function(){return z}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(ge){H=!!ge}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(ge){ee=!!ge}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(ge){isNaN(ge)||(ae=ge)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(ge){isNaN(ge)||(ue=ge)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ge){var J;typeof ge=="number"?J=[ge,ge,ge,ge]:((J=new Array(4))[0]=ge[0],J[1]=ge.length>=2?ge[1]:J[0],J[2]=ge.length>=3?ge[2]:J[0],J[3]=ge.length>=4?ge[3]:J[1]),c.margin=J}});var _e=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _e},set:function(ge){_e=ge}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(ge){me=ge}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(ge){be=ge}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ge){ge instanceof u&&(c=ge)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ge){c.path=ge}});var le=[];Object.defineProperty(this,"ctxStack",{get:function(){return le},set:function(ge){le=ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ge){var J;J=v(ge),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ge){var J=v(ge);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ge){["butt","round","square"].indexOf(ge)!==-1&&(this.ctx.lineCap=ge,this.pdf.setLineCap(ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ge){isNaN(ge)||(this.ctx.lineWidth=ge,this.pdf.setLineWidth(ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ge){["bevel","round","miter"].indexOf(ge)!==-1&&(this.ctx.lineJoin=ge,this.pdf.setLineJoin(ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ge){isNaN(ge)||(this.ctx.miterLimit=ge,this.pdf.setMiterLimit(ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ge){this.ctx.textBaseline=ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ge){["right","end","center","left","start"].indexOf(ge)!==-1&&(this.ctx.textAlign=ge)}});var Pe=null,Ae=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ae},set:function(ge){Pe=null,Ae=ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ge){var J;if(this.ctx.font=ge,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ge))!==null){var gt=J[1];J[2];var nt=J[3],et=J[4];J[5];var Ce=J[6],Ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(Ve==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:Ve==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var Re=function(rt){var Qe,At,xt=[],Ue=rt.trim();if(Ue==="")return Vg;if(Ue in $S)return[$S[Ue]];for(;Ue!=="";){switch(At=null,Qe=(Ue=zS(Ue)).charAt(0)){case'"':case"'":At=bee(Ue.substring(1),Qe);break;default:At=See(Ue)}if(At===null||(xt.push(At[0]),(Ue=zS(At[1]))!==""&&Ue.charAt(0)!==","))return Vg;Ue=Ue.replace(/^,/,"")}return xt}(Ce);if(this.fontFaces){var pt=function(rt,Qe){if(Pe===null){var At=function(xt){var Ue=[];return Object.keys(xt).forEach(function(at){xt[at].forEach(function(Nt){var ze=null;switch(Nt){case"bold":ze={family:at,weight:"bold"};break;case"italic":ze={family:at,style:"italic"};break;case"bolditalic":ze={family:at,weight:"bold",style:"italic"};break;case"":case"normal":ze={family:at}}ze!==null&&(ze.ref={name:at,style:Nt},Ue.push(ze))})}),Ue}(rt.getFontList());Pe=function(xt){for(var Ue={},at=0;at<xt.length;++at){var Nt=$g(xt[at]),ze=Nt.family,ft=Nt.stretch,je=Nt.style,vr=Nt.weight;Ue[ze]=Ue[ze]||{},Ue[ze][ft]=Ue[ze][ft]||{},Ue[ze][ft][je]=Ue[ze][ft][je]||{},Ue[ze][ft][je][vr]=Nt}return Ue}(At.concat(Qe))}return Pe}(this.pdf,this.fontFaces),Ge=Re.map(function(rt){return{family:rt,stretch:"normal",weight:nt,style:gt}}),St=function(rt,Qe,At){for(var xt=(At=At||{}).defaultFontFamily||"times",Ue=Object.assign({},wee,At.genericFontFamilies||{}),at=null,Nt=null,ze=0;ze<Qe.length;++ze)if(Ue[(at=$g(Qe[ze])).family]&&(at.family=Ue[at.family]),rt.hasOwnProperty(at.family)){Nt=rt[at.family];break}if(!(Nt=Nt||rt[xt]))throw new Error("Could not find a font-family for the rule '"+VS(at)+"' and default family '"+xt+"'.");if(Nt=function(ft,je){if(je[ft])return je[ft];var vr=Ly[ft],mr=vr<=Ly.normal?-1:1,Wt=US(je,XC,vr,mr);if(!Wt)throw new Error("Could not find a matching font-stretch value for "+ft);return Wt}(at.stretch,Nt),Nt=function(ft,je){if(je[ft])return je[ft];for(var vr=JC[ft],mr=0;mr<vr.length;++mr)if(je[vr[mr]])return je[vr[mr]];throw new Error("Could not find a matching font-style for "+ft)}(at.style,Nt),!(Nt=function(ft,je){if(je[ft])return je[ft];if(ft===400&&je[500])return je[500];if(ft===500&&je[400])return je[400];var vr=_ee[ft],mr=US(je,ZC,vr,ft<400?-1:1);if(!mr)throw new Error("Could not find a matching font-weight for value "+ft);return mr}(at.weight,Nt)))throw new Error("Failed to resolve a font for the rule '"+VS(at)+"'.");return Nt}(pt,Ge);this.pdf.setFont(St.ref.name,St.ref.style)}else{var ct="";(nt==="bold"||parseInt(nt,10)>=700||gt==="bold")&&(ct="bold"),gt==="italic"&&(ct+="italic"),ct.length===0&&(ct="normal");for(var ut="",Ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<Re.length;ot++){if(this.pdf.internal.getFont(Re[ot],ct,{noFallback:!0,disableWarning:!0})!==void 0){ut=Re[ot];break}if(ct==="bolditalic"&&this.pdf.internal.getFont(Re[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ut=Re[ot],ct="bold";else if(this.pdf.internal.getFont(Re[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ut=Re[ot],ct="normal";break}}if(ut===""){for(var We=0;We<Re.length;We++)if(Ot[Re[We]]){ut=Ot[Re[We]];break}}ut=ut===""?"Times":ut,this.pdf.setFont(ut,ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ge){this.ctx.globalCompositeOperation=ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ge){this.ctx.globalAlpha=ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ge){this.ctx.lineDashOffset=ge,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ge){this.ctx.lineDash=ge,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ge){this.ctx.ignoreClearRect=!!ge}})};d.prototype.setLineDash=function(E){this.lineDash=E},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){T.call(this,"fill",!1)},d.prototype.stroke=function(){T.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(E,z){if(isNaN(E)||isNaN(z))throw Gt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new o(E,z));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(E,z)},d.prototype.closePath=function(){var E=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Ut(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){E=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(E.x,E.y)},d.prototype.lineTo=function(E,z){if(isNaN(E)||isNaN(z))throw Gt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new o(E,z));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(H.x,H.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},d.prototype.quadraticCurveTo=function(E,z,H,ee){if(isNaN(H)||isNaN(ee)||isNaN(E)||isNaN(z))throw Gt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new o(H,ee)),ue=this.ctx.transform.applyToPoint(new o(E,z));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},d.prototype.bezierCurveTo=function(E,z,H,ee,ae,ue){if(isNaN(ae)||isNaN(ue)||isNaN(E)||isNaN(z)||isNaN(H)||isNaN(ee))throw Gt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _e=this.ctx.transform.applyToPoint(new o(ae,ue)),me=this.ctx.transform.applyToPoint(new o(E,z)),be=this.ctx.transform.applyToPoint(new o(H,ee));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:be.x,y2:be.y,x:_e.x,y:_e.y}),this.ctx.lastPoint=new o(_e.x,_e.y)},d.prototype.arc=function(E,z,H,ee,ae,ue){if(isNaN(E)||isNaN(z)||isNaN(H)||isNaN(ee)||isNaN(ae))throw Gt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var _e=this.ctx.transform.applyToPoint(new o(E,z));E=_e.x,z=_e.y;var me=this.ctx.transform.applyToPoint(new o(0,H)),be=this.ctx.transform.applyToPoint(new o(0,0));H=Math.sqrt(Math.pow(me.x-be.x,2)+Math.pow(me.y-be.y,2))}Math.abs(ae-ee)>=2*Math.PI&&(ee=0,ae=2*Math.PI),this.path.push({type:"arc",x:E,y:z,radius:H,startAngle:ee,endAngle:ae,counterclockwise:ue})},d.prototype.arcTo=function(E,z,H,ee,ae){throw new Error("arcTo not implemented.")},d.prototype.rect=function(E,z,H,ee){if(isNaN(E)||isNaN(z)||isNaN(H)||isNaN(ee))throw Gt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,z),this.lineTo(E+H,z),this.lineTo(E+H,z+ee),this.lineTo(E,z+ee),this.lineTo(E,z),this.lineTo(E+H,z),this.lineTo(E,z)},d.prototype.fillRect=function(E,z,H,ee){if(isNaN(E)||isNaN(z)||isNaN(H)||isNaN(ee))throw Gt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,z,H,ee),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},d.prototype.strokeRect=function(E,z,H,ee){if(isNaN(E)||isNaN(z)||isNaN(H)||isNaN(ee))throw Gt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(E,z,H,ee),this.stroke())},d.prototype.clearRect=function(E,z,H,ee){if(isNaN(E)||isNaN(z)||isNaN(H)||isNaN(ee))throw Gt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,z,H,ee))},d.prototype.save=function(E){E=typeof E!="boolean"||E;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},d.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(z),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(E){var z,H,ee,ae;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))z=0,H=0,ee=0,ae=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(ue!==null)z=parseInt(ue[1]),H=parseInt(ue[2]),ee=parseInt(ue[3]),ae=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)z=parseInt(ue[1]),H=parseInt(ue[2]),ee=parseInt(ue[3]),ae=parseFloat(ue[4]);else{if(ae=1,typeof E=="string"&&E.charAt(0)!=="#"){var _e=new WC(E);E=_e.ok?_e.toHex():"#000000"}E.length===4?(z=E.substring(1,2),z+=z,H=E.substring(2,3),H+=H,ee=E.substring(3,4),ee+=ee):(z=E.substring(1,3),H=E.substring(3,5),ee=E.substring(5,7)),z=parseInt(z,16),H=parseInt(H,16),ee=parseInt(ee,16)}}return{r:z,g:H,b:ee,a:ae,style:E}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(E,z,H,ee){if(isNaN(z)||isNaN(H)||typeof E!="string")throw Gt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var ae=q(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;N.call(this,{text:E,x:z,y:H,scale:ue,angle:ae,align:this.textAlign,maxWidth:ee})}},d.prototype.strokeText=function(E,z,H,ee){if(isNaN(z)||isNaN(H)||typeof E!="string")throw Gt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){ee=isNaN(ee)?void 0:ee;var ae=q(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;N.call(this,{text:E,x:z,y:H,scale:ue,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:ee})}},d.prototype.measureText=function(E){if(typeof E!="string")throw Gt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,H=this.pdf.internal.scaleFactor,ee=z.internal.getFontSize(),ae=z.getStringUnitWidth(E)*ee/z.internal.scaleFactor;return new function(ue){var _e=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _e}}),this}({width:ae*=Math.round(96*H/72*1e4)/1e4})},d.prototype.scale=function(E,z){if(isNaN(E)||isNaN(z))throw Gt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new l(E,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.rotate=function(E){if(isNaN(E))throw Gt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.translate=function(E,z){if(isNaN(E)||isNaN(z))throw Gt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new l(1,0,0,1,E,z);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.transform=function(E,z,H,ee,ae,ue){if(isNaN(E)||isNaN(z)||isNaN(H)||isNaN(ee)||isNaN(ae)||isNaN(ue))throw Gt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _e=new l(E,z,H,ee,ae,ue);this.ctx.transform=this.ctx.transform.multiply(_e)},d.prototype.setTransform=function(E,z,H,ee,ae,ue){E=isNaN(E)?1:E,z=isNaN(z)?0:z,H=isNaN(H)?0:H,ee=isNaN(ee)?1:ee,ae=isNaN(ae)?0:ae,ue=isNaN(ue)?0:ue,this.ctx.transform=new l(E,z,H,ee,ae,ue)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(E,z,H,ee,ae,ue,_e,me,be){var le=this.pdf.getImageProperties(E),Pe=1,Ae=1,ge=1,J=1;ee!==void 0&&me!==void 0&&(ge=me/ee,J=be/ae,Pe=le.width/ee*me/ee,Ae=le.height/ae*be/ae),ue===void 0&&(ue=z,_e=H,z=0,H=0),ee!==void 0&&me===void 0&&(me=ee,be=ae),ee===void 0&&me===void 0&&(me=le.width,be=le.height);for(var gt,nt=this.ctx.transform.decompose(),et=q(nt.rotate.shx),Ce=new l,Ve=(Ce=(Ce=(Ce=Ce.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale)).applyToRectangle(new s(ue-z*ge,_e-H*J,ee*Pe,ae*Ae)),Re=x.call(this,Ve),pt=[],Ge=0;Ge<Re.length;Ge+=1)pt.indexOf(Re[Ge])===-1&&pt.push(Re[Ge]);if(k(pt),this.autoPaging)for(var St=pt[0],ct=pt[pt.length-1],ut=St;ut<ct+1;ut++){this.pdf.setPage(ut);var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ot=ut===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=ut===1?0:We+(ut-2)*rt;if(this.ctx.clip_path.length!==0){var At=this.path;gt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(gt,this.posX+this.margin[3],-Qe+ot+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=At}var xt=JSON.parse(JSON.stringify(Ve));xt=S([xt],this.posX+this.margin[3],-Qe+ot+this.ctx.prevPageLastElemOffset)[0];var Ue=(ut>St||ut<ct)&&_.call(this);Ue&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,rt,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,et),Ue&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,et)};var x=function(E,z,H){var ee=[];z=z||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":ee.push(Math.floor((E.y+ae)/H)+1);break;case"arc":ee.push(Math.floor((E.y+ae-E.radius)/H)+1),ee.push(Math.floor((E.y+ae+E.radius)/H)+1);break;case"qct":var ue=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);ee.push(Math.floor((ue.y+ae)/H)+1),ee.push(Math.floor((ue.y+ue.h+ae)/H)+1);break;case"bct":var _e=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);ee.push(Math.floor((_e.y+ae)/H)+1),ee.push(Math.floor((_e.y+_e.h+ae)/H)+1);break;case"rect":ee.push(Math.floor((E.y+ae)/H)+1),ee.push(Math.floor((E.y+E.h+ae)/H)+1)}for(var me=0;me<ee.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<ee[me];)w.call(this);return ee},w=function(){var E=this.fillStyle,z=this.strokeStyle,H=this.font,ee=this.lineCap,ae=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=z,this.font=H,this.lineCap=ee,this.lineWidth=ae,this.lineJoin=ue},S=function(E,z,H){for(var ee=0;ee<E.length;ee++)switch(E[ee].type){case"bct":E[ee].x2+=z,E[ee].y2+=H;case"qct":E[ee].x1+=z,E[ee].y1+=H;default:E[ee].x+=z,E[ee].y+=H}return E},k=function(E){return E.sort(function(z,H){return z-H})},T=function(E,z){for(var H,ee,ae=this.fillStyle,ue=this.strokeStyle,_e=this.lineCap,me=this.lineWidth,be=Math.abs(me*this.ctx.transform.scaleX),le=this.lineJoin,Pe=JSON.parse(JSON.stringify(this.path)),Ae=JSON.parse(JSON.stringify(this.path)),ge=[],J=0;J<Ae.length;J++)if(Ae[J].x!==void 0)for(var gt=x.call(this,Ae[J]),nt=0;nt<gt.length;nt+=1)ge.indexOf(gt[nt])===-1&&ge.push(gt[nt]);for(var et=0;et<ge.length;et++)for(;this.pdf.internal.getNumberOfPages()<ge[et];)w.call(this);if(k(ge),this.autoPaging)for(var Ce=ge[0],Ve=ge[ge.length-1],Re=Ce;Re<Ve+1;Re++){this.pdf.setPage(Re),this.fillStyle=ae,this.strokeStyle=ue,this.lineCap=_e,this.lineWidth=be,this.lineJoin=le;var pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Re===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=Re===1?0:St+(Re-2)*ct;if(this.ctx.clip_path.length!==0){var Ot=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(H,this.posX+this.margin[3],-ut+Ge+this.ctx.prevPageLastElemOffset),R.call(this,E,!0),this.path=Ot}if(ee=JSON.parse(JSON.stringify(Pe)),this.path=S(ee,this.posX+this.margin[3],-ut+Ge+this.ctx.prevPageLastElemOffset),z===!1||Re===0){var ot=(Re>Ce||Re<Ve)&&_.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,ct,null).clip().discardPath()),R.call(this,E,z),ot&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=be,R.call(this,E,z),this.lineWidth=me;this.path=Pe},R=function(E,z){if((E!=="stroke"||z||!y.call(this))&&(E==="stroke"||z||!p.call(this))){for(var H,ee,ae=[],ue=this.path,_e=0;_e<ue.length;_e++){var me=ue[_e];switch(me.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:me,deltas:[],abs:[]});break;case"lt":var be=ae.length;if(ue[_e-1]&&!isNaN(ue[_e-1].x)&&(H=[me.x-ue[_e-1].x,me.y-ue[_e-1].y],be>0)){for(;be>=0;be--)if(ae[be-1].close!==!0&&ae[be-1].begin!==!0){ae[be-1].deltas.push(H),ae[be-1].abs.push(me);break}}break;case"bct":H=[me.x1-ue[_e-1].x,me.y1-ue[_e-1].y,me.x2-ue[_e-1].x,me.y2-ue[_e-1].y,me.x-ue[_e-1].x,me.y-ue[_e-1].y],ae[ae.length-1].deltas.push(H);break;case"qct":var le=ue[_e-1].x+2/3*(me.x1-ue[_e-1].x),Pe=ue[_e-1].y+2/3*(me.y1-ue[_e-1].y),Ae=me.x+2/3*(me.x1-me.x),ge=me.y+2/3*(me.y1-me.y),J=me.x,gt=me.y;H=[le-ue[_e-1].x,Pe-ue[_e-1].y,Ae-ue[_e-1].x,ge-ue[_e-1].y,J-ue[_e-1].x,gt-ue[_e-1].y],ae[ae.length-1].deltas.push(H);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(me)}}ee=z?null:E==="stroke"?"stroke":"fill";for(var nt=!1,et=0;et<ae.length;et++)if(ae[et].arc)for(var Ce=ae[et].abs,Ve=0;Ve<Ce.length;Ve++){var Re=Ce[Ve];Re.type==="arc"?F.call(this,Re.x,Re.y,Re.radius,Re.startAngle,Re.endAngle,Re.counterclockwise,void 0,z,!nt):W.call(this,Re.x,Re.y),nt=!0}else if(ae[et].close===!0)this.pdf.internal.out("h"),nt=!1;else if(ae[et].begin!==!0){var pt=ae[et].start.x,Ge=ae[et].start.y;j.call(this,ae[et].deltas,pt,Ge),nt=!0}ee&&M.call(this,ee),z&&Y.call(this)}},U=function(E){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-H;case"top":return E+z-H;case"hanging":return E+z-2*H;case"middle":return E+z/2-H;default:return E}},$=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(z,H){this.colorStops.push([z,H])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(E,z,H,ee,ae,ue,_e,me,be){for(var le=X.call(this,H,ee,ae,ue),Pe=0;Pe<le.length;Pe++){var Ae=le[Pe];Pe===0&&(be?O.call(this,Ae.x1+E,Ae.y1+z):W.call(this,Ae.x1+E,Ae.y1+z)),Z.call(this,E,z,Ae.x2,Ae.y2,Ae.x3,Ae.y3,Ae.x4,Ae.y4)}me?Y.call(this):M.call(this,_e)},M=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(E,z){this.pdf.internal.out(e(E)+" "+n(z)+" m")},N=function(E){var z;switch(E.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var H=this.pdf.getTextDimensions(E.text),ee=U.call(this,E.y),ae=$.call(this,ee)-H.h,ue=this.ctx.transform.applyToPoint(new o(E.x,ee)),_e=this.ctx.transform.decompose(),me=new l;me=(me=(me=me.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale);for(var be,le,Pe,Ae=this.ctx.transform.applyToRectangle(new s(E.x,ee,H.w,H.h)),ge=me.applyToRectangle(new s(E.x,ae,H.w,H.h)),J=x.call(this,ge),gt=[],nt=0;nt<J.length;nt+=1)gt.indexOf(J[nt])===-1&&gt.push(J[nt]);if(k(gt),this.autoPaging)for(var et=gt[0],Ce=gt[gt.length-1],Ve=et;Ve<Ce+1;Ve++){this.pdf.setPage(Ve);var Re=Ve===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],St=Ge-this.margin[0],ct=this.pdf.internal.pageSize.width-this.margin[1],ut=ct-this.margin[3],Ot=Ve===1?0:pt+(Ve-2)*St;if(this.ctx.clip_path.length!==0){var ot=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(be,this.posX+this.margin[3],-1*Ot+Re),R.call(this,"fill",!0),this.path=ot}var We=S([JSON.parse(JSON.stringify(ge))],this.posX+this.margin[3],-Ot+Re+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*E.scale),Pe=this.lineWidth,this.lineWidth=Pe*E.scale);var rt=this.autoPaging!=="text";if(rt||We.y+We.h<=Ge){if(rt||We.y>=Re&&We.x<=ct){var Qe=rt?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||ct-We.x)[0],At=S([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-Ot+Re+this.ctx.prevPageLastElemOffset)[0],xt=rt&&(Ve>et||Ve<Ce)&&_.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,St,null).clip().discardPath()),this.pdf.text(Qe,At.x,At.y,{angle:E.angle,align:z,renderingMode:E.renderingMode}),xt&&this.pdf.restoreGraphicsState()}}else We.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-We.y);E.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=Pe)}else E.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*E.scale),Pe=this.lineWidth,this.lineWidth=Pe*E.scale),this.pdf.text(E.text,ue.x+this.posX,ue.y+this.posY,{angle:E.angle,align:z,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=Pe)},W=function(E,z,H,ee){H=H||0,ee=ee||0,this.pdf.internal.out(e(E+H)+" "+n(z+ee)+" l")},j=function(E,z,H){return this.pdf.lines(E,z,H,null,null)},Z=function(E,z,H,ee,ae,ue,_e,me){this.pdf.internal.out([t(i(H+E)),t(a(ee+z)),t(i(ae+E)),t(a(ue+z)),t(i(_e+E)),t(a(me+z)),"c"].join(" "))},X=function(E,z,H,ee){for(var ae=2*Math.PI,ue=Math.PI/2;z>H;)z-=ae;var _e=Math.abs(H-z);_e<ae&&ee&&(_e=ae-_e);for(var me=[],be=ee?-1:1,le=z;_e>1e-5;){var Pe=le+be*Math.min(_e,ue);me.push(oe.call(this,E,le,Pe)),_e-=Math.abs(Pe-le),le=Pe}return me},oe=function(E,z,H){var ee=(H-z)/2,ae=E*Math.cos(ee),ue=E*Math.sin(ee),_e=ae,me=-ue,be=_e*_e+me*me,le=be+_e*ae+me*ue,Pe=4/3*(Math.sqrt(2*be*le)-le)/(_e*ue-me*ae),Ae=_e-Pe*me,ge=me+Pe*_e,J=Ae,gt=-ge,nt=ee+z,et=Math.cos(nt),Ce=Math.sin(nt);return{x1:E*Math.cos(z),y1:E*Math.sin(z),x2:Ae*et-ge*Ce,y2:Ae*Ce+ge*et,x3:J*et-gt*Ce,y3:J*Ce+gt*et,x4:E*Math.cos(H),y4:E*Math.sin(H)}},q=function(E){return 180*E/Math.PI},re=function(E,z,H,ee,ae,ue){var _e=E+.5*(H-E),me=z+.5*(ee-z),be=ae+.5*(H-ae),le=ue+.5*(ee-ue),Pe=Math.min(E,ae,_e,be),Ae=Math.max(E,ae,_e,be),ge=Math.min(z,ue,me,le),J=Math.max(z,ue,me,le);return new s(Pe,ge,Ae-Pe,J-ge)},fe=function(E,z,H,ee,ae,ue,_e,me){var be,le,Pe,Ae,ge,J,gt,nt,et,Ce,Ve,Re,pt,Ge,St=H-E,ct=ee-z,ut=ae-H,Ot=ue-ee,ot=_e-ae,We=me-ue;for(le=0;le<41;le++)et=(gt=(Pe=E+(be=le/40)*St)+be*((ge=H+be*ut)-Pe))+be*(ge+be*(ae+be*ot-ge)-gt),Ce=(nt=(Ae=z+be*ct)+be*((J=ee+be*Ot)-Ae))+be*(J+be*(ue+be*We-J)-nt),le==0?(Ve=et,Re=Ce,pt=et,Ge=Ce):(Ve=Math.min(Ve,et),Re=Math.min(Re,Ce),pt=Math.max(pt,et),Ge=Math.max(Ge,Ce));return new s(Math.round(Ve),Math.round(Re),Math.round(pt-Ve),Math.round(Ge-Re))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,z,H=(E=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:z}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(Je.API),function(r){var t=function(o){var s,l,c,u,d,v,p,y,_,x;for(l=[],c=0,u=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;u>c;c+=4)(d=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(v=(d=((d=((d=((d=(d-(x=d%85))/85)-(_=d%85))/85)-(y=d%85))/85)-(p=d%85))/85)%85,l.push(v+33,p+33,y+33,_+33,x+33)):l.push(122);return function(w,S){for(var k=S;k>0;k--)w.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},e=function(o){var s,l,c,u,d,v=String,p="length",y=255,_="charCodeAt",x="slice",w="replace";for(o[x](-2),o=o[x](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),c=[],u=0,d=(o+=s="uuuuu"[x](o[p]%5||5))[p];d>u;u+=5)l=52200625*(o[_](u)-33)+614125*(o[_](u+1)-33)+7225*(o[_](u+2)-33)+85*(o[_](u+3)-33)+(o[_](u+4)-33),c.push(y&l>>24,y&l>>16,y&l>>8,y&l);return function(S,k){for(var T=k;T>0;T--)S.pop()}(c,s[p]),v.fromCharCode.apply(v,c)},n=function(o){return o.split("").map(function(s){return("0"+s.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var l="",c=0;c<o.length;c+=2)l+=String.fromCharCode("0x"+(o[c]+o[c+1]));return l},a=function(o){for(var s=new Uint8Array(o.length),l=o.length;l--;)s[l]=o.charCodeAt(l);return(s=Sy(s)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};r.processDataByFilters=function(o,s){var l=0,c=o||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":c=e(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Je.API),function(r){r.loadFile=function(t,e,n){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(l,c,u){var d=new XMLHttpRequest,v=0,p=function(y){var _=y.length,x=[],w=String.fromCharCode;for(v=0;v<_;v+=1)x.push(w(255&y.charCodeAt(v)));return x.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(p(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)}(i,a,o)}catch{}return s}(t,e,n)},r.loadImageFile=r.loadFile}(Je.API),function(r){function t(){return(st.html2canvas?Promise.resolve(st.html2canvas):xg(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function e(){return(st.DOMPurify?Promise.resolve(st.DOMPurify):xg(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var n=function(s){var l=Ut(s);return l==="undefined"?"undefined":l==="string"||s instanceof String?"string":l==="number"||s instanceof Number?"number":l==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(s,l){var c=document.createElement(s);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},a=function s(l,c){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(s(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},o=function s(l){var c=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),c);return(u=u.setProgress(1,s,1,[s])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,l){return s.__proto__=l||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s),l){case"string":return this.then(e).then(function(c){return this.set({src:i("div",{innerHTML:s,dompurify:c})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var y=u[p],_=y.src.find(function(x){return x.format==="truetype"});_&&c.addFont(_.url,y.ref.name,y.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,c.context2d.save(!0),l(this.prop.container,v)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(s,l):this.outputPdf(s,l)},o.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(n(s)!=="object")return this;var l=Object.keys(s||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=s[c]};switch(c){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[c]=s[c]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(s,l){return this.then(function(){var c=s in o.template.prop?this.prop[s]:this.opt[s];return l?l(c):c})},o.prototype.setMargin=function(s){return this.then(function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(s=s||Je.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,l,c,u){return s!=null&&(this.progress.val=s),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,l,c,u){return this.setProgress(s?this.progress.val+s:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(s,l){var c=this;return this.thenCore(s,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(v){return c.updateProgress(null,u),v}).then(u,d).then(function(v){return c.updateProgress(1),v})})},o.prototype.thenCore=function(s,l,c){c=c||Promise.prototype.then;var u=this;s&&(s=s.bind(u)),l&&(l=l.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),v=c.call(d,s,l);return o.convert(v,u.__proto__)},o.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},o.prototype.thenList=function(s){var l=this;return s.forEach(function(c){l=l.thenCore(c)}),l},o.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return o.convert(l,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Je.getPageSize=function(s,l,c){if(Ut(s)==="object"){var u=s;s=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",s=(""+(s||"P")).toLowerCase();var d,v=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var y,_=0,x=0;if(p.hasOwnProperty(v))_=p[v][1]/d,x=p[v][0]/d;else try{_=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(s==="p"||s==="portrait")s="p",x>_&&(y=x,x=_,_=y);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",_>x&&(y=x,x=_,_=y)}return{width:x,height:_,unit:l,k:d,orientation:s}},r.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map($g):null;var c=new o(l);return l.worker?c:c.from(s).doCallback()}}(Je.API),Je.API.addJS=function(r){return qS=r,this.internal.events.subscribe("postPutResources",function(){rh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),WS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+qS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rh!==void 0&&WS!==void 0&&this.internal.out("/Names <</JavaScript "+rh+" 0 R>>")}),this},function(r){var t;r.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=n.exec(o);if(s!=null){var l=s[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(a=0;a<c;a++){var d=e.internal.newObject();u.push(d);var v=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<u.length;a++)e.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+p+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var l=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(Je.API),function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,n,i,a,o,s){var l,c=this.decode.DCT_DECODE,u=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,l=function(d){for(var v,p=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,_={width:0,height:0,numcomponents:1},x=4;x<y;x+=2){if(x+=p,t.indexOf(d.charCodeAt(x+1))!==-1){v=256*d.charCodeAt(x+5)+d.charCodeAt(x+6),_={width:256*d.charCodeAt(x+7)+d.charCodeAt(x+8),height:v,numcomponents:d.charCodeAt(x+9)};break}p=256*d.charCodeAt(x+2)+d.charCodeAt(x+3)}return _}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),l.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}u={data:e,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:c,index:n,alias:i}}return u}}(Je.API),Je.API.processPNG=function(r,t,e,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,a=aee(r,{checkCrc:!0}),o=a.width,s=a.height,l=a.channels,c=a.palette,u=a.depth;i=c&&l===1?function(F){for(var M=F.width,Y=F.height,O=F.data,N=F.palette,W=F.depth,j=!1,Z=[],X=[],oe=void 0,q=!1,re=0,fe=0;fe<N.length;fe++){var ne=Qb(N[fe],4),E=ne[0],z=ne[1],H=ne[2],ee=ne[3];Z.push(E,z,H),ee!=null&&(ee===0?(re++,X.length<1&&X.push(fe)):ee<255&&(q=!0))}if(q||re>1){j=!0,X=void 0;var ae=M*Y;oe=new Uint8Array(ae);for(var ue=new DataView(O.buffer),_e=0;_e<ae;_e++){var me=zg(ue,_e,W),be=Qb(N[me],4)[3];oe[_e]=be}}else re===0&&(X=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:j?8:void 0,colorBytes:O,alphaBytes:oe,needSMask:j,palette:Z,mask:X}}(a):l===2||l===4?function(F){for(var M=F.data,Y=F.width,O=F.height,N=F.channels,W=F.depth,j=N===2?"DeviceGray":"DeviceRGB",Z=N-1,X=Y*O,oe=Z,q=X*oe,re=1*X,fe=Math.ceil(q*W/8),ne=Math.ceil(re*W/8),E=new Uint8Array(fe),z=new Uint8Array(ne),H=new DataView(M.buffer),ee=new DataView(E.buffer),ae=new DataView(z.buffer),ue=!1,_e=0;_e<X;_e++){for(var me=_e*N,be=0;be<oe;be++)ex(ee,zg(H,me+be,W),_e*oe+be,W);var le=zg(H,me+oe,W);le<(1<<W)-1&&(ue=!0),ex(ae,le,1*_e,W)}return{colorSpace:j,colorsPerPixel:Z,sMaskBitsPerComponent:ue?W:void 0,colorBytes:E,alphaBytes:z,needSMask:ue}}(a):function(F){var M=F.data,Y=F.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Y,colorsPerPixel:Y==="DeviceGray"?1:3,colorBytes:M instanceof Uint16Array?function(O){for(var N=O.length,W=new Uint8Array(2*N),j=new DataView(W.buffer,W.byteOffset,W.byteLength),Z=0;Z<N;Z++)j.setUint16(2*Z,O[Z],!1);return W}(M):M,needSMask:!1}}(a);var d,v,p,y=i,_=y.colorSpace,x=y.colorsPerPixel,w=y.sMaskBitsPerComponent,S=y.colorBytes,k=y.alphaBytes,T=y.needSMask,R=y.palette,U=y.mask,$=null;return n!==Je.API.image_compression.NONE&&typeof Sy=="function"?($=function(F){var M;switch(F){case Je.API.image_compression.FAST:M=11;break;case Je.API.image_compression.MEDIUM:M=13;break;case Je.API.image_compression.SLOW:M=14;break;default:M=12}return M}(n),d=this.decode.FLATE_DECODE,v="/Predictor ".concat($," /Colors ").concat(x," /BitsPerComponent ").concat(u," /Columns ").concat(o),r=QS(S,Math.ceil(o*x*u/8),x,u,n),T&&(p=QS(k,Math.ceil(o*w/8),1,w,n))):(d=void 0,v=void 0,r=S,T&&(p=k)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:e,data:r,index:t,filter:d,decodeParameters:v,transparency:U,palette:R,sMask:p,predictor:$,width:o,height:s,bitsPerComponent:u,sMaskBitsPerComponent:w,colorSpace:_}}},function(r){r.processGIF89A=function(t,e,n,i){var a=new Tee(t),o=a.width,s=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:s},u=new Wg(100).encode(c,100);return r.processJPEG.call(this,u,e,n,i)},r.processGIF87A=r.processGIF89A}(Je.API),Si.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:e,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Si.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[r]()}catch(e){Gt.log("bit decode error:"+e)}},Si.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),e=t%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[a>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}e!==0&&(this.pos+=4-e)}},Si.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<r;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,s=a>>4,l=15&a,c=this.palette[s];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Si.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},Si.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,s=(a>>5&t)/t*255|0,l=(a>>10&t)/t*255|0,c=a>>15?255:0,u=n*this.width*4+4*i;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=o,this.data[u+3]=c}this.pos+=r}},Si.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,l=(o>>5&e)/e*255|0,c=(o>>11)/t*255|0,u=i*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=r}},Si.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Si.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*e;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=o}},Si.prototype.getData=function(){return this.data},function(r){r.processBMP=function(t,e,n,i){var a=new Si(t,!1),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},c=new Wg(100).encode(l,100);return r.processJPEG.call(this,c,e,n,i)}}(Je.API),rx.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(t,e,n,i){var a=new rx(t),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},c=new Wg(100).encode(l,100);return r.processJPEG.call(this,c,e,n,i)}}(Je.API),Je.API.processRGBA=function(r,t,e){for(var n=r.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var u=n[c],d=n[c+1],v=n[c+2],p=n[c+3];a[s++]=u,a[s++]=d,a[s++]=v,o[l++]=p}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Je.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fc=Je.API,nh=fc.getCharWidthsArray=function(r,t){var e,n,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=t.doKerning!==!1,v=0,p=r.length,y=0,_=s[0]||l,x=[];for(e=0;e<p;e++)n=r.charCodeAt(e),typeof i.metadata.widthOfString=="function"?x.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(v=d&&Ut(c[n])==="object"&&!isNaN(parseInt(c[n][y],10))?c[n][y]/u:0,x.push((s[n]||_)/l+v)),y=n;return x},HS=fc.getStringUnitWidth=function(r,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return fc.processArabic&&(r=fc.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,e,i)/e:nh.apply(this,arguments).reduce(function(a,o){return a+o},0)},GS=function(r,t,e,n){for(var i=[],a=0,o=r.length,s=0;a!==o&&s+t[a]<e;)s+=t[a],a++;i.push(r.slice(0,a));var l=a;for(s=0;a!==o;)s+t[a]>n&&(i.push(r.slice(l,a)),s=0,l=a),s+=t[a],a++;return l!==a&&i.push(r.slice(l,a)),i},KS=function(r,t,e){e||(e={});var n,i,a,o,s,l,c,u=[],d=[u],v=e.textIndent||0,p=0,y=0,_=r.split(" "),x=nh.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?_[0].length+2:e.lineIndent||0){var w=Array(l).join(" "),S=[];_.map(function(T){(T=T.split(/\s*\n/)).length>1?S=S.concat(T.map(function(R,U){return(U&&R.length?`
`:"")+R})):S.push(T[0])}),_=S,l=HS.apply(this,[w,e])}for(a=0,o=_.length;a<o;a++){var k=0;if(n=_[a],l&&n[0]==`
`&&(n=n.substr(1),k=1),v+p+(y=(i=nh.apply(this,[n,e])).reduce(function(T,R){return T+R},0))>t||k){if(y>t){for(s=GS.apply(this,[n,i,t-(v+p),t]),u.push(s.shift()),u=[s.pop()];s.length;)d.push([s.shift()]);y=i.slice(n.length-(u[0]?u[0].length:0)).reduce(function(T,R){return T+R},0)}else u=[n];d.push(u),v=y+l,p=x}else u.push(n),v+=p+y,p=x}return c=l?function(T,R){return(R?w:"")+T.join(" ")}:function(T){return T.join(" ")},d.map(c)},fc.splitTextToSize=function(r,t,e){var n,i=(e=e||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),v="Unicode";return d.metadata[v]?{widths:d.metadata[v].widths||{0:1},kerning:d.metadata[v].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;a.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=e.lineIndent;var s,l,c=[];for(s=0,l=n.length;s<l;s++)c=c.concat(KS.apply(this,[n[s],o,a]));return c},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[e[a]]=t[a],i[t[a]]=e[a];var o=function(v){return"0x"+parseInt(v,10).toString(16)},s=r.__fontmetrics__.compress=function(v){var p,y,_,x,w=["{"];for(var S in v){if(p=v[S],isNaN(parseInt(S,10))?y="'"+S+"'":(S=parseInt(S,10),y=(y=o(S).slice(2)).slice(0,-1)+i[y.slice(-1)]),typeof p=="number")p<0?(_=o(p).slice(3),x="-"):(_=o(p).slice(2),x=""),_=x+_.slice(0,-1)+i[_.slice(-1)];else{if(Ut(p)!=="object")throw new Error("Don't know what to do with value type "+Ut(p)+".");_=s(p)}w.push(y+_)}return w.push("}"),w.join("")},l=r.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,y,_,x,w={},S=1,k=w,T=[],R="",U="",$=v.length-1,F=1;F<$;F+=1)(x=v[F])=="'"?p?(_=p.join(""),p=void 0):p=[]:p?p.push(x):x=="{"?(T.push([k,_]),k={},_=void 0):x=="}"?((y=T.pop())[0][y[1]]=k,_=void 0,k=y[0]):x=="-"?S=-1:_===void 0?n.hasOwnProperty(x)?(R+=n[x],_=parseInt(R,16)*S,S=1,R=""):R+=x:n.hasOwnProperty(x)?(U+=n[x],k[_]=parseInt(U,16)*S,S=1,_=void 0,U=""):U+=x;return w},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(v){var p=v.font,y=d.Unicode[p.postScriptName];y&&(p.metadata.Unicode={},p.metadata.Unicode.widths=y.widths,p.metadata.Unicode.kerning=y.kerning);var _=u.Unicode[p.postScriptName];_&&(p.metadata.Unicode.encoding=_,p.encoding=_.codePages[0])}])}(Je.API),function(r){var t=function(e){for(var n=e.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=e.charCodeAt(a);return i};r.API.events.push(["addFont",function(e){var n=void 0,i=e.font,a=e.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(Lh(s)),o.metadata=r.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(Je),Je.API.addSvgAsImage=function(r,t,e,n,i,a,o,s){if(isNaN(t)||isNaN(e))throw Gt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Gt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(st.canvg?Promise.resolve(st.canvg):xg(()=>import("./index.es-D6YuqsTk.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(c,r,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(u)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),t,e,n,i,o,s)})},Je.API.putTotalPages=function(r){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,e);return this},Je.API.viewerPreferences=function(r,t){var e;r=r||{},t=t||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],c=0,u=0,d=0;function v(y,_){var x,w=!1;for(x=0;x<y.length;x+=1)y[x]===_&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var p=s.length;for(d=0;d<p;d+=1)e[s[d]].value=e[s[d]].defaultValue,e[s[d]].explicitSet=!1}if(Ut(r)==="object"){for(i in r)if(a=r[i],v(s,i)&&a!==void 0){if(e[i].type==="boolean"&&typeof a=="boolean")e[i].value=a;else if(e[i].type==="name"&&v(e[i].valueSet,a))e[i].value=a;else if(e[i].type==="integer"&&Number.isInteger(a))e[i].value=a;else if(e[i].type==="array"){for(c=0;c<a.length;c+=1)if(n=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(u=0;u<a[c].length;u+=1)typeof a[c][u]!="number"&&(n=!1);n===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}e[i].value="["+l.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,_=[];for(y in e)e[y].explicitSet===!0&&(e[y].type==="name"?_.push("/"+y+" /"+e[y].value):_.push("/"+y+" "+e[y].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(r){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=a.length+o.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(Je.API),function(r){var t=r.API,e=t.pdfEscape16=function(a,o){for(var s,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,v=a.length;d<v;++d){if(s=o.metadata.characterToGlyph(a.charCodeAt(d)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(d),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return u.join("");s=s.toString(16),u.push(c[4-s.length],s)}return u.join("")},n=function(a){var o,s,l,c,u,d,v;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,v=(s=Object.keys(a).sort(function(p,y){return p-y})).length;d<v;d++)o=s[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(c=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,c=o.newObject,u=o.putStream;if(s.metadata instanceof r.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,v=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),p="",y=0;y<v.length;y++)p+=String.fromCharCode(v[y]);var _=c();u({data:p,addLength1:!0,objectId:_}),l("endobj");var x=c();u({data:n(s.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+yc(s.fontName)),l("/FontFile2 "+_+" 0 R"),l("/FontBBox "+r.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var S=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+yc(s.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+r.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+x+" 0 R"),l("/BaseFont /"+yc(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,c=o.newObject,u=o.putStream;if(s.metadata instanceof r.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,v="",p=0;p<d.length;p++)v+=String.fromCharCode(d[p]);var y=c();u({data:v,addLength1:!0,objectId:y}),l("endobj");var _=c();u({data:n(s.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var x=c();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+r.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+yc(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=c();for(var w=0;w<s.metadata.hmtx.widths.length;w++)s.metadata.hmtx.widths[w]=parseInt(s.metadata.hmtx.widths[w]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+yc(s.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",l=a.x,c=a.y,u=a.options||{},d=a.mutex||{},v=d.pdfEscape,p=d.activeFontKey,y=d.fonts,_=p,x="",w=0,S="",k=y[_].encoding;if(y[_].encoding!=="Identity-H")return{text:s,x:l,y:c,options:u,mutex:d};for(S=s,_=p,Array.isArray(s)&&(S=s[0]),w=0;w<S.length;w+=1)y[_].metadata.hasOwnProperty("cmap")&&(o=y[_].metadata.cmap.unicode.codeMap[S[w].charCodeAt(0)]),o||S[w].charCodeAt(0)<256&&y[_].metadata.hasOwnProperty("Unicode")?x+=S[w]:x+="";var T="";return parseInt(_.slice(1))<14||k==="WinAnsiEncoding"?T=v(x,_).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(T=e(x,y[_])),d.isHex=!0,{text:T,x:l,y:c,options:u,mutex:d}};t.events.push(["postProcessText",function(a){var o=a.text||"",s=[],l={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?s.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):s.push(i(Object.assign({},l,{text:o[c]})).text);a.text=s}else a.text=i(Object.assign({},l,{text:o})).text}])}(Je),function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},r.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Je.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,a,o,s,l,c,u,d=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,k=0;this.__bidiEngine__={};var T=function(O){var N=O.charCodeAt(),W=N>>8,j=_[W];return j!==void 0?d[256*j+(255&N)]:W===252||W===253?"AL":w.test(W)?"L":W===8?"R":"N"},R=function(O){for(var N,W=0;W<O.length;W++){if((N=T(O.charAt(W)))==="L")return!1;if(N==="R")return!0}return!1},U=function(O,N,W,j){var Z,X,oe,q,re=N[j];switch(re){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(re="AN");break;case"AL":S=!0,re="R";break;case"WS":case"BN":re="N";break;case"CS":j<1||j+1>=N.length||(Z=W[j-1])!=="EN"&&Z!=="AN"||(X=N[j+1])!=="EN"&&X!=="AN"?re="N":S&&(X="AN"),re=X===Z?X:"N";break;case"ES":re=(Z=j>0?W[j-1]:"B")==="EN"&&j+1<N.length&&N[j+1]==="EN"?"EN":"N";break;case"ET":if(j>0&&W[j-1]==="EN"){re="EN";break}if(S){re="N";break}for(oe=j+1,q=N.length;oe<q&&N[oe]==="ET";)oe++;re=oe<q&&N[oe]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(q=N.length,oe=j+1;oe<q&&N[oe]==="NSM";)oe++;if(oe<q){var fe=O[j],ne=fe>=1425&&fe<=2303||fe===64286;if(Z=N[oe],ne&&(Z==="R"||Z==="AL")){re="R";break}}}re=j<1||(Z=N[j-1])==="B"?"N":W[j-1];break;case"B":S=!1,i=!0,re=k;break;case"S":a=!0,re="N"}return re},$=function(O,N,W){var j=O.split("");return W&&F(j,W,{hiLevel:k}),j.reverse(),N&&N.reverse(),j.join("")},F=function(O,N,W){var j,Z,X,oe,q,re=-1,fe=O.length,ne=0,E=[],z=k?p:v,H=[];for(S=!1,i=!1,a=!1,Z=0;Z<fe;Z++)H[Z]=T(O[Z]);for(X=0;X<fe;X++){if(q=ne,E[X]=U(O,H,E,X),j=240&(ne=z[q][y[E[X]]]),ne&=15,N[X]=oe=z[ne][5],j>0)if(j===16){for(Z=re;Z<X;Z++)N[Z]=1;re=-1}else re=-1;if(z[ne][6])re===-1&&(re=X);else if(re>-1){for(Z=re;Z<X;Z++)N[Z]=oe;re=-1}H[X]==="B"&&(N[X]=0),W.hiLevel|=oe}a&&function(ee,ae,ue){for(var _e=0;_e<ue;_e++)if(ee[_e]==="S"){ae[_e]=k;for(var me=_e-1;me>=0&&ee[me]==="WS";me--)ae[me]=k}}(H,N,fe)},M=function(O,N,W,j,Z){if(!(Z.hiLevel<O)){if(O===1&&k===1&&!i)return N.reverse(),void(W&&W.reverse());for(var X,oe,q,re,fe=N.length,ne=0;ne<fe;){if(j[ne]>=O){for(q=ne+1;q<fe&&j[q]>=O;)q++;for(re=ne,oe=q-1;re<oe;re++,oe--)X=N[re],N[re]=N[oe],N[oe]=X,W&&(X=W[re],W[re]=W[oe],W[oe]=X);ne=q}ne++}}},Y=function(O,N,W){var j=O.split(""),Z={hiLevel:k};return W||(W=[]),F(j,W,Z),function(X,oe,q){if(q.hiLevel!==0&&u)for(var re,fe=0;fe<X.length;fe++)oe[fe]===1&&(re=x.indexOf(X[fe]))>=0&&(X[fe]=x[re+1])}(j,W,Z),M(2,j,N,W,Z),M(1,j,N,W,Z),j.join("")};return this.__bidiEngine__.doBidiReorder=function(O,N,W){if(function(Z,X){if(X)for(var oe=0;oe<Z.length;oe++)X[oe]=oe;s===void 0&&(s=R(Z)),c===void 0&&(c=R(Z))}(O,N),o||!l||c)if(o&&l&&s^c)k=s?1:0,O=$(O,N,W);else if(!o&&l&&c)k=s?1:0,O=Y(O,N,W),O=$(O,N);else if(!o||s||l||c){if(o&&!l&&s^c)O=$(O,N),s?(k=0,O=Y(O,N,W)):(k=1,O=Y(O,N,W),O=$(O,N));else if(o&&s&&!l&&c)k=1,O=Y(O,N,W),O=$(O,N);else if(!o&&!l&&s^c){var j=u;s?(k=1,O=Y(O,N,W),k=0,u=!1,O=Y(O,N,W),u=j):(k=0,O=Y(O,N,W),O=$(O,N),k=1,u=!1,O=Y(O,N,W),u=j,O=$(O,N))}}else k=0,O=Y(O,N,W);else k=s?1:0,O=Y(O,N,W);return O},this.__bidiEngine__.setOptions=function(O){O&&(o=O.isInputVisual,l=O.isOutputVisual,s=O.isInputRtl,c=O.isOutputRtl,u=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,e.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([e.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([e.doBidiReorder(i[s])]);n.text=o}else n.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])}(Je),Je.API.TTFFont=function(){function r(t){var e;if(this.rawData=t,e=this.contents=new Ao(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new $ee(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new Eee(this.contents),this.head=new Lee(this),this.name=new jee(this),this.cmap=new tL(this),this.toUnicode={},this.hhea=new Oee(this),this.maxp=new Iee(this),this.hmtx=new Mee(this),this.post=new Nee(this),this.os2=new Aee(this),this.loca=new Uee(this),this.glyf=new Dee(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,e,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,l,c;for(c=[],o=0,s=(l=this.bbox).length;o<s;o++)t=l[o],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},r.prototype.widthOfString=function(t,e,n){var i,a,o,s;for(o=0,a=0,s=(t=""+t).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=t.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return o*(e/1e3)},r.prototype.lineHeight=function(t,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},r}();var Ii,Ao=function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,e,n,i,a,o,s,l;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*a+65536*o+256*s+l},r.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},r.prototype.write=function(t){var e,n,i,a;for(a=[],n=0,i=t.length;n<i;n++)e=t[n],a.push(this.writeByte(e));return a},r}(),Eee=function(){var r;function t(e){var n,i,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(e){var n,i,a,o,s,l,c,u,d,v,p,y,_;for(_ in p=Object.keys(e).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),o=Math.floor(d/l),u=16*p-d,(i=new Ao).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(o),i.writeShort(u),a=16*p,c=i.pos+a,s=null,y=[],e)for(v=e[_],i.writeString(_),i.writeInt(r(v)),i.writeInt(c),i.writeInt(v.length),y=y.concat(v),_==="head"&&(s=c),c+=v.length;c%4;)y.push(0),c++;return i.write(y),n=2981146554-r(i.data),i.pos=s+8,i.writeUInt32(n),i.data},r=function(e){var n,i,a,o;for(e=rL.call(e);e.length%4;)e.push(0);for(a=new Ao(e),i=0,n=0,o=e.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},t}(),Cee={}.hasOwnProperty,ia=function(r,t){for(var e in t)Cee.call(t,e)&&(r[e]=t[e]);function n(){this.constructor=r}return n.prototype=t.prototype,r.prototype=new n,r.__super__=t.prototype,r};Ii=function(){function r(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var Lee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="head",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},r.prototype.encode=function(t){var e;return(e=new Ao).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},r}(),nx=function(){function r(t,e){var n,i,a,o,s,l,c,u,d,v,p,y,_,x,w,S,k;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),v=p/2,t.pos+=6,a=function(){var T,R;for(R=[],l=T=0;0<=v?T<v:T>v;l=0<=v?++T:--T)R.push(t.readUInt16());return R}(),t.pos+=2,_=function(){var T,R;for(R=[],l=T=0;0<=v?T<v:T>v;l=0<=v?++T:--T)R.push(t.readUInt16());return R}(),c=function(){var T,R;for(R=[],l=T=0;0<=v?T<v:T>v;l=0<=v?++T:--T)R.push(t.readUInt16());return R}(),u=function(){var T,R;for(R=[],l=T=0;0<=v?T<v:T>v;l=0<=v?++T:--T)R.push(t.readUInt16());return R}(),i=(this.length-t.pos+this.offset)/2,s=function(){var T,R;for(R=[],l=T=0;0<=i?T<i:T>i;l=0<=i?++T:--T)R.push(t.readUInt16());return R}(),l=w=0,k=a.length;w<k;l=++w)for(x=a[l],n=S=y=_[l];y<=x?S<=x:S>=x;n=y<=x?++S:--S)u[l]===0?o=n+c[l]:(o=s[u[l]/2+(n-y)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[n]=65535&o}t.pos=d}return r.encode=function(t,e){var n,i,a,o,s,l,c,u,d,v,p,y,_,x,w,S,k,T,R,U,$,F,M,Y,O,N,W,j,Z,X,oe,q,re,fe,ne,E,z,H,ee,ae,ue,_e,me,be,le,Pe;switch(j=new Ao,o=Object.keys(t).sort(function(Ae,ge){return Ae-ge}),e){case"macroman":for(_=0,x=function(){var Ae=[];for(y=0;y<256;++y)Ae.push(0);return Ae}(),S={0:0},a={},Z=0,re=o.length;Z<re;Z++)S[me=t[i=o[Z]]]==null&&(S[me]=++_),a[i]={old:t[i],new:S[t[i]]},x[i]=S[t[i]];return j.writeUInt16(1),j.writeUInt16(0),j.writeUInt32(12),j.writeUInt16(0),j.writeUInt16(262),j.writeUInt16(0),j.write(x),{charMap:a,subtable:j.data,maxGlyphID:_+1};case"unicode":for(N=[],d=[],k=0,S={},n={},w=c=null,X=0,fe=o.length;X<fe;X++)S[R=t[i=o[X]]]==null&&(S[R]=++k),n[i]={old:R,new:S[R]},s=S[R]-i,w!=null&&s===c||(w&&d.push(w),N.push(i),c=s),w=i;for(w&&d.push(w),d.push(65535),N.push(65535),Y=2*(M=N.length),F=2*Math.pow(Math.log(M)/Math.LN2,2),v=Math.log(F/2)/Math.LN2,$=2*M-F,l=[],U=[],p=[],y=oe=0,ne=N.length;oe<ne;y=++oe){if(O=N[y],u=d[y],O===65535){l.push(0),U.push(0);break}if(O-(W=n[O].new)>=32768)for(l.push(0),U.push(2*(p.length+M-y)),i=q=O;O<=u?q<=u:q>=u;i=O<=u?++q:--q)p.push(n[i].new);else l.push(W-O),U.push(0)}for(j.writeUInt16(3),j.writeUInt16(1),j.writeUInt32(12),j.writeUInt16(4),j.writeUInt16(16+8*M+2*p.length),j.writeUInt16(0),j.writeUInt16(Y),j.writeUInt16(F),j.writeUInt16(v),j.writeUInt16($),ue=0,E=d.length;ue<E;ue++)i=d[ue],j.writeUInt16(i);for(j.writeUInt16(0),_e=0,z=N.length;_e<z;_e++)i=N[_e],j.writeUInt16(i);for(be=0,H=l.length;be<H;be++)s=l[be],j.writeUInt16(s);for(le=0,ee=U.length;le<ee;le++)T=U[le],j.writeUInt16(T);for(Pe=0,ae=p.length;Pe<ae;Pe++)_=p[Pe],j.writeUInt16(_);return{charMap:n,subtable:j.data,maxGlyphID:k+1}}},r}(),tL=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="cmap",r.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e=new nx(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},r.encode=function(t,e){var n,i;return e==null&&(e="macroman"),n=nx.encode(t,e),(i=new Ao).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r}(),Oee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="hhea",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},r}(),Aee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="OS/2",r.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},r}(),Nee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="post",r.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,s,l;for(l=[],a=o=0,s=this.file.maxp.numGlyphs;0<=s?o<s:o>s;a=0<=s?++o:--o)l.push(t.readUInt32());return l}).call(this)}},r}(),Ree=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},jee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="name",r.prototype.parse=function(t){var e,n,i,a,o,s,l,c,u,d,v;for(t.pos=this.offset,t.readShort(),e=t.readShort(),s=t.readShort(),n=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(l={},a=u=0,d=n.length;u<d;a=++u)i=n[a],t.pos=i.offset,c=t.readString(i.length),o=new Ree(c,i),l[v=i.nameID]==null&&(l[v]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},r}(),Iee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="maxp",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},r}(),Mee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="hmtx",r.prototype.parse=function(t){var e,n,i,a,o,s,l;for(t.pos=this.offset,this.metrics=[],e=0,s=this.file.hhea.numberOfMetrics;0<=s?e<s:e>s;e=0<=s?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],e=c=0;0<=i?c<i:c>i;e=0<=i?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,d,v;for(v=[],c=0,u=(d=this.metrics).length;c<u;c++)a=d[c],v.push(a.advance);return v}).call(this),n=this.widths[this.widths.length-1],l=[],e=o=0;0<=i?o<i:o>i;e=0<=i?++o:--o)l.push(this.widths.push(n));return l},r.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},r}(),rL=[].slice,Dee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(t){var e,n,i,a,o,s,l,c,u,d;return t in this.cache?this.cache[t]:(a=this.file.loca,e=this.file.contents,n=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+n,o=(s=new Ao(e.read(i))).readShort(),c=s.readShort(),d=s.readShort(),l=s.readShort(),u=s.readShort(),this.cache[t]=o===-1?new Bee(s,c,d,l,u):new Fee(s,o,c,d,l,u),this.cache[t]))},r.prototype.encode=function(t,e,n){var i,a,o,s,l;for(o=[],a=[],s=0,l=e.length;s<l;s++)i=t[e[s]],a.push(o.length),i&&(o=o.concat(i.encode(n)));return a.push(o.length),{table:o,offsets:a}},r}(),Fee=function(){function r(t,e,n,i,a,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),Bee=function(){function r(t,e,n,i,a){var o,s;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return r.prototype.encode=function(){var t,e,n;for(e=new Ao(rL.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},r}(),Uee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ia(r,Ii),r.prototype.tag="loca",r.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(t.readUInt32());return a}).call(this)},r.prototype.indexOf=function(t){return this.offsets[t]},r.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},r.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<n.length;++o)if(n[o]=i,a<e.length&&e[a]==o){++a,n[o]=i;var s=this.offsets[o],l=this.offsets[o+1]-s;l>0&&(i+=l)}for(var c=new Array(4*n.length),u=0;u<n.length;++u)c[4*u+3]=255&n[u],c[4*u+2]=(65280&n[u])>>8,c[4*u+1]=(16711680&n[u])>>16,c[4*u]=(4278190080&n[u])>>24;return c},r}(),$ee=function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,e,n,i,a;for(e in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)n=a[e],t[e]=i[n];return t},r.prototype.glyphsFor=function(t){var e,n,i,a,o,s,l;for(i={},o=0,s=t.length;o<s;o++)i[a=t[o]]=this.font.glyf.glyphFor(a);for(a in e=[],i)(n=i[a])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(a in l=this.glyphsFor(e))n=l[a],i[a]=n;return i},r.prototype.encode=function(t,e){var n,i,a,o,s,l,c,u,d,v,p,y,_,x,w;for(i in n=tL.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},w=n.charMap)p[(l=w[i]).old]=l.new;for(y in v=n.maxGlyphID,o)y in p||(p[y]=v++);return u=function(S){var k,T;for(k in T={},S)T[S[k]]=k;return T}(p),d=Object.keys(u).sort(function(S,k){return S-k}),_=function(){var S,k,T;for(T=[],S=0,k=d.length;S<k;S++)s=d[S],T.push(u[s]);return T}(),a=this.font.glyf.encode(o,_,p),c=this.font.loca.encode(a.offsets,_),x={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},r}();Je.API.PDFObject=function(){var r;function t(){}return r=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},t.convert=function(e){var n,i,a,o;if(Array.isArray(e))return"["+function(){var s,l,c;for(c=[],s=0,l=e.length;s<l;s++)n=e[s],c.push(t.convert(n));return c}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in a=["<<"],e)o=e[i],a.push("/"+i+" "+t.convert(o));return a.push(">>"),a.join(`
`)}return""+e},t}();const Vee=({poseData:r})=>{const t=he.useRef(null);he.useEffect(()=>{if(!t.current||!r||!r.landmarks)return;const n=t.current,i=n.getContext("2d");i&&(i.clearRect(0,0,n.width,n.height),i.fillStyle="#0b141a",i.fillRect(0,0,n.width,n.height),e(i,r.landmarks,n.width,n.height))},[r]);const e=(n,i,a,o)=>{const s=[[11,12],[11,23],[12,24],[23,24],[11,13],[13,15],[12,14],[14,16],[23,25],[25,27],[24,26],[26,28],[0,1],[0,4]];n.strokeStyle="#00ff00",n.lineWidth=3,s.forEach(([l,c])=>{const u=i[l],d=i[c];u&&d&&u.visibility>.5&&d.visibility>.5&&(n.beginPath(),n.moveTo(u.x*a,u.y*o),n.lineTo(d.x*a,d.y*o),n.stroke())}),i.forEach((l,c)=>{if(l.visibility>.5){let u="#ff0000";c===0?u="#ffff00":c>=11&&c<=16?u="#ff00ff":c>=23&&c<=28&&(u="#00ffff"),n.fillStyle=u,n.beginPath(),n.arc(l.x*a,l.y*o,6,0,2*Math.PI),n.fill(),n.strokeStyle="#ffffff",n.lineWidth=2,n.stroke()}}),n.fillStyle="#00ff00",n.font="12px monospace",n.fillText(`FPS: ${(1e3/66.67).toFixed(1)}`,10,20),n.fillText(`Landmarks: ${i.length}`,10,40)};return m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#0b141a] rounded-lg",children:m.jsx("canvas",{ref:t,width:640,height:480,className:"max-w-full max-h-full border border-gray-700 rounded-lg"})})},zee=({isOpen:r,onClose:t,roomName:e,sessionActive:n,patientConnected:i,latestPoseData:a,onStartSession:o,onEndSession:s})=>{var v,p,y;const[l,c]=he.useState([]),u=()=>{if(!a){alert("No hay datos de pose disponibles para capturar");return}c(_=>[..._,a]),console.log("[Capture] Snapshot captured:",a)},d=()=>{if(l.length===0){alert("No hay datos capturados para generar el PDF");return}try{const _=new Je,x=_.internal.pageSize.getWidth(),w=_.internal.pageSize.getHeight();_.setFontSize(24),_.setTextColor(0,0,0),_.text("Análisis Postural",x/2,30,{align:"center"}),_.setFontSize(12),_.text(`Sala: ${e}`,20,50),_.text(`Fecha: ${new Date().toLocaleString("es-CO")}`,20,60),_.text(`Snapshots capturados: ${l.length}`,20,70);let S=90;l.forEach((R,U)=>{S>w-60&&(_.addPage(),S=20),_.setFontSize(16),_.setTextColor(0,100,200),_.text(`Snapshot ${U+1}`,20,S),S+=10,_.setFontSize(10),_.setTextColor(0,0,0),_.text(`Timestamp: ${new Date(R.timestamp).toLocaleTimeString("es-CO")}`,25,S),S+=10,R.metrics.posture&&(_.setFontSize(12),_.setTextColor(50,50,50),_.text("Postura:",25,S),S+=7,_.setFontSize(10),_.text(`  Ángulo del Trunco: ${R.metrics.posture.trunkAngle}°`,30,S),S+=6,_.text(`  Alineación: ${R.metrics.posture.alignment}`,30,S),S+=10),R.metrics.joints&&(_.setFontSize(12),_.setTextColor(50,50,50),_.text("Ángulos Articulares:",25,S),S+=7,_.setFontSize(10),_.text(`  Codo Izquierdo: ${R.metrics.joints.leftElbow}°`,30,S),S+=6,_.text(`  Codo Derecho: ${R.metrics.joints.rightElbow}°`,30,S),S+=6,_.text(`  Rodilla Izquierda: ${R.metrics.joints.leftKnee}°`,30,S),S+=6,_.text(`  Rodilla Derecha: ${R.metrics.joints.rightKnee}°`,30,S),S+=10),R.metrics.symmetry&&(_.setFontSize(12),_.setTextColor(50,50,50),_.text("Simetría Corporal:",25,S),S+=7,_.setFontSize(10),_.text(`  Hombros: ${R.metrics.symmetry.shoulders} (${R.metrics.symmetry.shoulderDiff}%)`,30,S),S+=6,_.text(`  Caderas: ${R.metrics.symmetry.hips} (${R.metrics.symmetry.hipDiff}%)`,30,S),S+=15)});const k=_.getNumberOfPages();for(let R=1;R<=k;R++)_.setPage(R),_.setFontSize(8),_.setTextColor(128,128,128),_.text("BSL Consulta Video - Análisis Postural",x/2,w-10,{align:"center"}),_.text(`Página ${R} de ${k}`,x-20,w-10,{align:"right"});const T=`analisis-postural-${e}-${Date.now()}.pdf`;_.save(T),console.log("[PDF] Generated successfully:",T),alert(`PDF generado exitosamente: ${T}`)}catch(_){console.error("[PDF] Error generating PDF:",_),alert("Error al generar el PDF. Ver consola para detalles.")}};return r?m.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 pointer-events-auto",children:m.jsxs("div",{className:"bg-[#1a2730] rounded-lg shadow-2xl w-[90%] max-w-6xl h-[85vh] flex flex-col border border-gray-700",children:[m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-700",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-white",children:"Análisis Postural"}),m.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Sala: ",e]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-green-500 animate-pulse":"bg-gray-500"}`}),m.jsx("span",{className:"text-sm text-gray-300",children:n?"Sesión Activa":"Sesión Inactiva"})]}),n&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-3 h-3 rounded-full ${i?"bg-blue-500 animate-pulse":"bg-yellow-500"}`}),m.jsx("span",{className:"text-sm text-gray-300",children:i?"Paciente Conectado":"Esperando Paciente..."})]}),m.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Cerrar",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),m.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[m.jsx("div",{className:"flex-1 bg-[#0b141a] relative p-4",children:n?i?m.jsx(Vee,{poseData:a||null}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mb-6",children:m.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"})}),m.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"Esperando Paciente..."}),m.jsx("p",{className:"text-sm text-gray-500",children:"El paciente debe estar en la videollamada para continuar"})]})}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mb-6",children:m.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),m.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"Análisis Postural No Iniciado"}),m.jsx("p",{className:"text-sm text-gray-500 mb-6",children:'Haz clic en "Iniciar Análisis" para comenzar'}),m.jsx("button",{onClick:o,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Iniciar Análisis"})]})})}),m.jsxs("div",{className:"w-full lg:w-80 bg-[#15202b] border-t lg:border-t-0 lg:border-l border-gray-700 flex flex-col",children:[m.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Métricas en Tiempo Real"}),n&&i?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-[#1a2730] rounded-lg p-4 border border-gray-700",children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase mb-3",children:"Postura"}),(v=a==null?void 0:a.metrics)!=null&&v.posture?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-sm text-gray-400",children:"Ángulo del Tronco:"}),m.jsxs("span",{className:"text-lg font-semibold text-white",children:[a.metrics.posture.trunkAngle,"°"]})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-400",children:"Alineación:"}),m.jsx("span",{className:`text-sm font-semibold ${a.metrics.posture.alignment==="Buena"?"text-green-400":"text-yellow-400"}`,children:a.metrics.posture.alignment})]})]}):m.jsx("p",{className:"text-sm text-gray-400",children:"Esperando datos..."})]}),m.jsxs("div",{className:"bg-[#1a2730] rounded-lg p-4 border border-gray-700",children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase mb-3",children:"Ángulos Articulares"}),(p=a==null?void 0:a.metrics)!=null&&p.joints?m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Codo Izq:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.leftElbow,"°"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Codo Der:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.rightElbow,"°"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Rodilla Izq:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.leftKnee,"°"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Rodilla Der:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.rightKnee,"°"]})]})]}):m.jsx("p",{className:"text-sm text-gray-400",children:"Esperando datos..."})]}),m.jsxs("div",{className:"bg-[#1a2730] rounded-lg p-4 border border-gray-700",children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase mb-3",children:"Simetría Corporal"}),(y=a==null?void 0:a.metrics)!=null&&y.symmetry?m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-gray-400",children:"Hombros:"}),m.jsx("span",{className:`font-semibold ${a.metrics.symmetry.shoulders==="Simétrico"?"text-green-400":"text-yellow-400"}`,children:a.metrics.symmetry.shoulders})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-gray-400",children:"Diferencia:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.symmetry.shoulderDiff,"%"]})]}),m.jsxs("div",{className:"flex justify-between items-center mt-3",children:[m.jsx("span",{className:"text-gray-400",children:"Caderas:"}),m.jsx("span",{className:`font-semibold ${a.metrics.symmetry.hips==="Simétrico"?"text-green-400":"text-yellow-400"}`,children:a.metrics.symmetry.hips})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-gray-400",children:"Diferencia:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.symmetry.hipDiff,"%"]})]})]}):m.jsx("p",{className:"text-sm text-gray-400",children:"Esperando datos..."})]})]}):m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-sm text-gray-500",children:"Las métricas aparecerán aquí cuando el análisis esté activo"})})]}),m.jsxs("div",{className:"p-4 border-t border-gray-700 space-y-3",children:[n&&i&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:u,disabled:!a,className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Capturar Snapshot (",l.length,")"]}),m.jsxs("button",{onClick:d,disabled:l.length===0,className:"w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Generar PDF"]})]}),n&&m.jsx("button",{onClick:s,className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Finalizar Análisis"})]})]})]}),m.jsx("div",{className:"px-6 py-3 border-t border-gray-700 bg-[#15202b]",children:m.jsx("p",{className:"text-xs text-gray-500 text-center",children:"El análisis postural se realiza en tiempo real mientras la videollamada continúa"})})]})}):null};let uu=null;async function Wee(){return uu?(console.log("[MediaPipe] Returning cached MediaPipe instance"),uu):(console.log("[MediaPipe] Loading MediaPipe from CDN..."),uu=(async()=>{try{const t=await import("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15");return console.log("[MediaPipe] Successfully loaded from CDN"),{PoseLandmarker:t.PoseLandmarker,FilesetResolver:t.FilesetResolver}}catch(r){throw console.error("[MediaPipe] Error loading from CDN:",r),uu=null,new Error("Failed to load MediaPipe Vision tasks")}})(),uu)}async function qee(){console.log("[MediaPipe] Creating PoseLandmarker...");const{PoseLandmarker:r,FilesetResolver:t}=await Wee(),e=await t.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15/wasm"),n=await r.createFromOptions(e,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1,minPoseDetectionConfidence:.5,minPosePresenceConfidence:.5,minTrackingConfidence:.5});return console.log("[MediaPipe] PoseLandmarker created successfully"),n}function Hee(r){if(!r||r.length===0)return{posture:null,joints:null,symmetry:null};const t=(y,_,x)=>{const w={x:y.x-_.x,y:y.y-_.y},S={x:x.x-_.x,y:x.y-_.y},k=w.x*S.x+w.y*S.y,T=w.x*S.y-w.y*S.x;return Math.atan2(T,k)*180/Math.PI},e=11,n=12,i=13,a=14,o=15,s=16,l=23,c=24,u=25,d=26,v=27,p=28;try{const y={x:(r[e].x+r[n].x)/2,y:(r[e].y+r[n].y)/2,z:(r[e].z+r[n].z)/2},_={x:(r[l].x+r[c].x)/2,y:(r[l].y+r[c].y)/2,z:(r[l].z+r[c].z)/2},x=Math.abs(Math.atan2(y.y-_.y,y.x-_.x)*(180/Math.PI)),w=Math.abs(t(r[e],r[i],r[o])),S=Math.abs(t(r[n],r[a],r[s])),k=Math.abs(t(r[l],r[u],r[v])),T=Math.abs(t(r[c],r[d],r[p])),R=Math.abs(r[e].y-r[n].y)*100,U=Math.abs(r[l].y-r[c].y)*100;return{posture:{trunkAngle:x.toFixed(1),alignment:x>85&&x<95?"Buena":"Revisar"},joints:{leftElbow:w.toFixed(1),rightElbow:S.toFixed(1),leftKnee:k.toFixed(1),rightKnee:T.toFixed(1)},symmetry:{shoulders:R<5?"Simétrico":"Asimétrico",shoulderDiff:R.toFixed(2),hips:U<5?"Simétrico":"Asimétrico",hipDiff:U.toFixed(2)}}}catch(y){return console.error("[MediaPipe] Error calculating metrics:",y),{posture:null,joints:null,symmetry:null}}}const Gee=({onPoseData:r,isActive:t})=>{const e=he.useRef(null),n=he.useRef(null),[i,a]=he.useState("Inicializando..."),[o,s]=he.useState(!1),l=he.useRef(null),c=he.useRef(null),u=he.useRef(null);he.useEffect(()=>{if(!t)return;let y=!0;return(async()=>{try{a("Accediendo a cámara...");const x=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1});if(!y){x.getTracks().forEach(S=>S.stop());return}u.current=x,e.current&&(e.current.srcObject=x,await e.current.play()),a("Cargando modelo de análisis...");const w=await qee();if(!y){w.close();return}l.current=w,a("Analizando postura..."),s(!0),d()}catch(x){console.error("[Postural Analysis Patient] Initialization error:",x),a("Error: No se pudo acceder a la cámara")}})(),()=>{y=!1,p()}},[t]);const d=()=>{if(!e.current||!n.current||!l.current)return;const y=e.current,_=n.current,x=_.getContext("2d");if(!x)return;_.width=y.videoWidth||640,_.height=y.videoHeight||480;let w=0;const S=1e3/15,k=()=>{const T=performance.now();if(T-w<S){c.current=requestAnimationFrame(k);return}if(w=T,y.readyState>=2)try{const R=l.current.detectForVideo(y,T);if(x.clearRect(0,0,_.width,_.height),x.drawImage(y,0,0,_.width,_.height),R.landmarks&&R.landmarks.length>0){const U=R.landmarks[0];v(x,U,_.width,_.height);const $=Hee(U);r({landmarks:U,metrics:$,timestamp:T})}}catch(R){console.error("[Postural Analysis Patient] Detection error:",R)}c.current=requestAnimationFrame(k)};k()},v=(y,_,x,w)=>{const S=[[11,12],[11,13],[13,15],[12,14],[14,16],[11,23],[12,24],[23,24],[23,25],[25,27],[24,26],[26,28]];y.strokeStyle="#00ff00",y.lineWidth=2,S.forEach(([k,T])=>{const R=_[k],U=_[T];R&&U&&(y.beginPath(),y.moveTo(R.x*x,R.y*w),y.lineTo(U.x*x,U.y*w),y.stroke())}),y.fillStyle="#ff0000",_.forEach(k=>{y.beginPath(),y.arc(k.x*x,k.y*w,4,0,2*Math.PI),y.fill()})},p=()=>{c.current&&cancelAnimationFrame(c.current),u.current&&u.current.getTracks().forEach(y=>y.stop()),l.current&&l.current.close(),s(!1)};return t?m.jsx("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center",children:m.jsxs("div",{className:"bg-[#1a2730] rounded-lg shadow-2xl p-6 max-w-4xl w-full mx-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Análisis Postural del Paciente"}),m.jsx("div",{className:"flex items-center gap-2",children:o?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-sm text-gray-300",children:i})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-sm text-gray-300",children:i})]})})]}),m.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[m.jsx("video",{ref:e,className:"hidden",playsInline:!0,muted:!0,autoPlay:!0}),m.jsx("canvas",{ref:n,className:"w-full h-auto"})]}),m.jsx("div",{className:"mt-4 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:m.jsx("p",{className:"text-sm text-blue-300 text-center",children:"Manténgase de pie frente a la cámara. El doctor está visualizando su postura en tiempo real."})})]})}):null},Kee=({historiaId:r})=>{const[t,e]=he.useState(!0),[n,i]=he.useState(!1),[a,o]=he.useState(null),[s,l]=he.useState(null),[c,u]=he.useState(""),[d,v]=he.useState(""),[p,y]=he.useState(""),[_,x]=he.useState(""),[w,S]=he.useState(""),[k,T]=he.useState(""),[R,U]=he.useState(""),[$,F]=he.useState(""),[M,Y]=he.useState(""),[O,N]=he.useState(""),[W,j]=he.useState(""),[Z,X]=he.useState(!1);he.useEffect(()=>{re()},[r]),he.useEffect(()=>{if($&&M){const E=parseFloat($),z=parseFloat(M);if(!isNaN(E)&&!isNaN(z)&&E>0){const H=E/100,ee=z/(H*H);N(ee.toFixed(2))}else N("")}else N("")},[$,M]);const oe=()=>{const E=parseFloat(O);return isNaN(E)?"text-gray-400":E>=25?"text-red-500":"text-green-400"},q=()=>{const E=parseFloat(O);return isNaN(E)?"":E<18.5?"Bajo peso":E<25?"Normal":E<30?"Sobrepeso":"Obesidad"},re=async()=>{try{e(!0),o(null);const E=await Oa.getMedicalHistory(r);l(E),u(E.mdAntecedentes||""),v(E.mdObsParaMiDocYa||""),y(E.mdObservacionesCertificado||""),x(E.mdRecomendacionesMedicasAdicionales||""),S(E.mdConceptoFinal||""),T(E.mdDx1||""),U(E.mdDx2||""),F(E.talla||""),Y(E.peso||"")}catch(E){o(E.message||"Error al cargar historia clínica"),console.error("Error loading medical history:",E)}finally{e(!1)}},fe=async()=>{if(s)try{X(!0),o(null);const E={edad:s.edad,genero:s.genero,estadoCivil:s.estadoCivil,hijos:s.hijos,ejercicio:s.ejercicio,codEmpresa:s.codEmpresa,cargo:s.cargo,tipoExamen:s.tipoExamen,antecedentesFamiliares:s.antecedentesFamiliares,encuestaSalud:s.encuestaSalud,empresa1:s.empresa1},z=await Oa.generateAISuggestions(E);j(z)}catch(E){o(E.message||"Error al generar sugerencias con IA"),console.error("Error generating AI suggestions:",E),alert("Error al generar sugerencias con IA")}finally{X(!1)}},ne=async()=>{if(s)try{i(!0),o(null);const E=W?`${W}

${_}`.trim():_;let z=c;if(O){const H=`IMC: ${O} (${q()})`;z=c?`${c}

${H}`:H}await Oa.updateMedicalHistory({historiaId:s.historiaId,mdAntecedentes:z,mdObsParaMiDocYa:d,mdObservacionesCertificado:p,mdRecomendacionesMedicasAdicionales:E,mdConceptoFinal:w,mdDx1:k,mdDx2:R,talla:$,peso:M,cargo:s.cargo}),alert("Historia clínica guardada exitosamente")}catch(E){o(E.message||"Error al guardar historia clínica"),console.error("Error saving medical history:",E),alert("Error al guardar historia clínica")}finally{i(!1)}};if(t)return m.jsx("div",{className:"bg-[#1f2c34] rounded-xl p-6 text-white",children:m.jsxs("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00a884]"}),m.jsx("span",{className:"ml-3",children:"Cargando historia clínica..."})]})});if(a||!s){const E=a&&a.includes("Error al obtener historia clínica");return m.jsxs("div",{className:"h-full flex flex-col bg-[#1f2c34] text-white p-6",children:[m.jsx("div",{className:"mb-4",children:m.jsx("h2",{className:"text-xl font-bold text-red-400",children:"Error al Cargar Historia Clínica"})}),m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-4 mb-4",children:[m.jsx("p",{className:"text-red-400 mb-3",children:a||"No se encontró historia clínica para este paciente"}),E&&m.jsxs("div",{className:"mt-4 border-l-4 border-yellow-500 pl-4",children:[m.jsx("p",{className:"text-yellow-400 font-semibold mb-2",children:"⚠️ Configuración Pendiente"}),m.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Las funciones HTTP de Wix no están configuradas. Para activar esta funcionalidad:"}),m.jsxs("ol",{className:"text-sm text-gray-300 space-y-1 list-decimal list-inside",children:[m.jsx("li",{children:"Abre tu sitio de Wix (www.bsl.com.co)"}),m.jsx("li",{children:"Activa el Developer Mode (Velo)"}),m.jsx("li",{children:"Ve a Backend → http-functions.js"}),m.jsxs("li",{children:["Copia las funciones de: ",m.jsx("code",{className:"bg-gray-700 px-1 rounded",children:"backend/wix-backend-medical-history.js"})]}),m.jsx("li",{children:"Publica el sitio"})]}),m.jsxs("p",{className:"text-sm text-gray-400 mt-3",children:["ID de Historia: ",m.jsx("span",{className:"text-white font-mono",children:r})]})]})]})]})}return m.jsxs("div",{className:"h-full flex flex-col bg-[#1f2c34] text-white",children:[m.jsx("div",{className:"flex items-center p-4 border-b border-gray-700 bg-[#1f2c34] sticky top-0 z-10",children:m.jsx("h2",{className:"text-lg font-bold text-[#00a884]",children:"Historia Clínica"})}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2 text-[#00a884]",children:"Datos del Paciente"}),m.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Nombre:"}),m.jsxs("span",{className:"text-white ml-2",children:[s.primerNombre," ",s.segundoNombre," ",s.primerApellido," ",s.segundoApellido]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Documento:"}),m.jsx("span",{className:"text-white ml-2",children:s.numeroId})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Edad:"}),m.jsx("span",{className:"text-white ml-2",children:s.edad||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Género:"}),m.jsx("span",{className:"text-white ml-2",children:s.genero||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Celular:"}),m.jsx("span",{className:"text-white ml-2",children:s.celular})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Email:"}),m.jsx("span",{className:"text-white ml-2",children:s.email||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Estado Civil:"}),m.jsx("span",{className:"text-white ml-2",children:s.estadoCivil||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Hijos:"}),m.jsx("span",{className:"text-white ml-2",children:s.hijos||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Ejercicio:"}),m.jsx("span",{className:"text-white ml-2",children:s.ejercicio||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Empresa:"}),m.jsx("span",{className:"text-white ml-2",children:s.codEmpresa||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Cargo:"}),m.jsx("span",{className:"text-white ml-2",children:s.cargo||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Tipo Examen:"}),m.jsx("span",{className:"text-white ml-2",children:s.tipoExamen||"N/A"})]})]})]}),(s.antecedentesFamiliares||s.encuestaSalud||s.empresa1)&&m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2 text-[#00a884]",children:"Antecedentes"}),m.jsxs("div",{className:"space-y-2 text-xs",children:[s.antecedentesFamiliares&&m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Antecedentes Familiares:"}),m.jsx("p",{className:"text-white mt-1 whitespace-pre-wrap",children:s.antecedentesFamiliares})]}),s.encuestaSalud&&m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Encuesta de Salud:"}),m.jsx("p",{className:"text-white mt-1 whitespace-pre-wrap",children:s.encuestaSalud})]}),s.empresa1&&m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Cargo Anterior:"}),m.jsx("p",{className:"text-white mt-1",children:s.empresa1})]})]})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2 text-[#00a884]",children:"Medidas Físicas"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Talla (cm)"}),m.jsx("input",{type:"text",value:$,onChange:E=>F(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",placeholder:"170"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Peso (kg)"}),m.jsx("input",{type:"text",value:M,onChange:E=>Y(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",placeholder:"70"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"IMC"}),m.jsx("input",{type:"text",value:O?`${O} (${q()})`:"",readOnly:!0,className:`w-full bg-[#2a3942] ${oe()} text-sm px-2 py-2 rounded border border-gray-600 cursor-not-allowed font-semibold`,placeholder:"Auto"})]})]})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-3 text-[#00a884]",children:"Evaluación Médica"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Antecedentes"}),m.jsx("textarea",{value:c,onChange:E=>u(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Antecedentes médicos relevantes..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Obs. Certificado"}),m.jsx("textarea",{value:p,onChange:E=>y(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Observaciones para el certificado..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Recomendaciones Médicas Adicionales"}),m.jsx("textarea",{value:_,onChange:E=>x(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Recomendaciones médicas adicionales..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Observaciones privadas para la empresa"}),m.jsx("textarea",{value:d,onChange:E=>v(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Observaciones privadas para la empresa..."})]}),m.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Diagnóstico 1 (Principal)"}),m.jsxs("select",{value:k,onChange:E=>T(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",children:[m.jsx("option",{value:"",children:"Seleccione diagnóstico"}),m.jsx("option",{value:"Asma ocupacional",children:"Asma ocupacional"}),m.jsx("option",{value:"Bronquitis crónica por polvos inorgánicos",children:"Bronquitis crónica por polvos inorgánicos"}),m.jsx("option",{value:"Bursitis de codo",children:"Bursitis de codo"}),m.jsx("option",{value:"Bursitis de hombro",children:"Bursitis de hombro"}),m.jsx("option",{value:"Bursitis de rodilla",children:"Bursitis de rodilla"}),m.jsx("option",{value:"Cervicalgia",children:"Cervicalgia"}),m.jsx("option",{value:"Dermatitis alérgica de contacto",children:"Dermatitis alérgica de contacto"}),m.jsx("option",{value:"Dermatitis irritativa de contacto",children:"Dermatitis irritativa de contacto"}),m.jsx("option",{value:"Dorsalgia",children:"Dorsalgia"}),m.jsx("option",{value:"Epicondilitis lateral (codo de tenista)",children:"Epicondilitis lateral (codo de tenista)"}),m.jsx("option",{value:"Epicondilitis medial",children:"Epicondilitis medial"}),m.jsx("option",{value:"Escoliosis",children:"Escoliosis"}),m.jsx("option",{value:"Espondiloartrosis cervical",children:"Espondiloartrosis cervical"}),m.jsx("option",{value:"Espondiloartrosis lumbar",children:"Espondiloartrosis lumbar"}),m.jsx("option",{value:"Espondilosis cervical",children:"Espondilosis cervical"}),m.jsx("option",{value:"Espondilosis lumbar",children:"Espondilosis lumbar"}),m.jsx("option",{value:"Estrés postraumático",children:"Estrés postraumático"}),m.jsx("option",{value:"Gonalgia (dolor de rodilla)",children:"Gonalgia (dolor de rodilla)"}),m.jsx("option",{value:"Hernia discal cervical",children:"Hernia discal cervical"}),m.jsx("option",{value:"Hernia discal lumbar",children:"Hernia discal lumbar"}),m.jsx("option",{value:"Hipoacusia neurosensorial bilateral",children:"Hipoacusia neurosensorial bilateral"}),m.jsx("option",{value:"Lumbalgia",children:"Lumbalgia"}),m.jsx("option",{value:"Mialgia",children:"Mialgia"}),m.jsx("option",{value:"Obesidad",children:"Obesidad"}),m.jsx("option",{value:"Onicomicosis",children:"Onicomicosis"}),m.jsx("option",{value:"Pérdida auditiva inducida por ruido",children:"Pérdida auditiva inducida por ruido"}),m.jsx("option",{value:"Presbiacusia",children:"Presbiacusia"}),m.jsx("option",{value:"Síndrome de Burnout",children:"Síndrome de Burnout"}),m.jsx("option",{value:"Síndrome de túnel carpiano",children:"Síndrome de túnel carpiano"}),m.jsx("option",{value:"Síndrome del manguito rotador",children:"Síndrome del manguito rotador"}),m.jsx("option",{value:"Sinovitis de muñeca",children:"Sinovitis de muñeca"}),m.jsx("option",{value:"Sobrepeso",children:"Sobrepeso"}),m.jsx("option",{value:"Tenosinovitis de De Quervain",children:"Tenosinovitis de De Quervain"}),m.jsx("option",{value:"Tendinitis de hombro",children:"Tendinitis de hombro"}),m.jsx("option",{value:"Tendinitis del manguito rotador",children:"Tendinitis del manguito rotador"}),m.jsx("option",{value:"Trastorno adaptativo con ansiedad",children:"Trastorno adaptativo con ansiedad"}),m.jsx("option",{value:"Trastorno de ansiedad generalizada",children:"Trastorno de ansiedad generalizada"}),m.jsx("option",{value:"Trastorno depresivo",children:"Trastorno depresivo"}),m.jsx("option",{value:"Trastornos del sueño",children:"Trastornos del sueño"}),m.jsx("option",{value:"Trauma acústico agudo",children:"Trauma acústico agudo"}),m.jsx("option",{value:"Vértigo posicional",children:"Vértigo posicional"}),m.jsx("option",{value:"Vitiligo",children:"Vitiligo"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Diagnóstico 2 (Secundario)"}),m.jsxs("select",{value:R,onChange:E=>U(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",children:[m.jsx("option",{value:"",children:"Seleccione diagnóstico"}),m.jsx("option",{value:"Asma ocupacional",children:"Asma ocupacional"}),m.jsx("option",{value:"Bronquitis crónica por polvos inorgánicos",children:"Bronquitis crónica por polvos inorgánicos"}),m.jsx("option",{value:"Bursitis de codo",children:"Bursitis de codo"}),m.jsx("option",{value:"Bursitis de hombro",children:"Bursitis de hombro"}),m.jsx("option",{value:"Bursitis de rodilla",children:"Bursitis de rodilla"}),m.jsx("option",{value:"Cervicalgia",children:"Cervicalgia"}),m.jsx("option",{value:"Dermatitis alérgica de contacto",children:"Dermatitis alérgica de contacto"}),m.jsx("option",{value:"Dermatitis irritativa de contacto",children:"Dermatitis irritativa de contacto"}),m.jsx("option",{value:"Dorsalgia",children:"Dorsalgia"}),m.jsx("option",{value:"Epicondilitis lateral (codo de tenista)",children:"Epicondilitis lateral (codo de tenista)"}),m.jsx("option",{value:"Epicondilitis medial",children:"Epicondilitis medial"}),m.jsx("option",{value:"Escoliosis",children:"Escoliosis"}),m.jsx("option",{value:"Espondiloartrosis cervical",children:"Espondiloartrosis cervical"}),m.jsx("option",{value:"Espondiloartrosis lumbar",children:"Espondiloartrosis lumbar"}),m.jsx("option",{value:"Espondilosis cervical",children:"Espondilosis cervical"}),m.jsx("option",{value:"Espondilosis lumbar",children:"Espondilosis lumbar"}),m.jsx("option",{value:"Estrés postraumático",children:"Estrés postraumático"}),m.jsx("option",{value:"Gonalgia (dolor de rodilla)",children:"Gonalgia (dolor de rodilla)"}),m.jsx("option",{value:"Hernia discal cervical",children:"Hernia discal cervical"}),m.jsx("option",{value:"Hernia discal lumbar",children:"Hernia discal lumbar"}),m.jsx("option",{value:"Hipoacusia neurosensorial bilateral",children:"Hipoacusia neurosensorial bilateral"}),m.jsx("option",{value:"Lumbalgia",children:"Lumbalgia"}),m.jsx("option",{value:"Mialgia",children:"Mialgia"}),m.jsx("option",{value:"Obesidad",children:"Obesidad"}),m.jsx("option",{value:"Onicomicosis",children:"Onicomicosis"}),m.jsx("option",{value:"Pérdida auditiva inducida por ruido",children:"Pérdida auditiva inducida por ruido"}),m.jsx("option",{value:"Presbiacusia",children:"Presbiacusia"}),m.jsx("option",{value:"Síndrome de Burnout",children:"Síndrome de Burnout"}),m.jsx("option",{value:"Síndrome de túnel carpiano",children:"Síndrome de túnel carpiano"}),m.jsx("option",{value:"Síndrome del manguito rotador",children:"Síndrome del manguito rotador"}),m.jsx("option",{value:"Sinovitis de muñeca",children:"Sinovitis de muñeca"}),m.jsx("option",{value:"Sobrepeso",children:"Sobrepeso"}),m.jsx("option",{value:"Tenosinovitis de De Quervain",children:"Tenosinovitis de De Quervain"}),m.jsx("option",{value:"Tendinitis de hombro",children:"Tendinitis de hombro"}),m.jsx("option",{value:"Tendinitis del manguito rotador",children:"Tendinitis del manguito rotador"}),m.jsx("option",{value:"Trastorno adaptativo con ansiedad",children:"Trastorno adaptativo con ansiedad"}),m.jsx("option",{value:"Trastorno de ansiedad generalizada",children:"Trastorno de ansiedad generalizada"}),m.jsx("option",{value:"Trastorno depresivo",children:"Trastorno depresivo"}),m.jsx("option",{value:"Trastornos del sueño",children:"Trastornos del sueño"}),m.jsx("option",{value:"Trauma acústico agudo",children:"Trauma acústico agudo"}),m.jsx("option",{value:"Vértigo posicional",children:"Vértigo posicional"}),m.jsx("option",{value:"Vitiligo",children:"Vitiligo"})]})]})]}),m.jsxs("div",{className:"border-2 border-blue-500/30 rounded-lg p-3 bg-blue-900/10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"block text-xs text-blue-400 font-semibold",children:"Sugerencias IA"}),m.jsx("button",{onClick:fe,disabled:Z,className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-1",children:Z?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generando..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Generar con IA"]})})]}),m.jsx("textarea",{value:W,onChange:E=>j(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-blue-500/30 focus:border-blue-400 focus:outline-none",rows:5,placeholder:"Haz clic en 'Generar con IA' para obtener recomendaciones médicas personalizadas basadas en los datos del paciente..."}),m.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:"Estas sugerencias se concatenarán automáticamente con las recomendaciones médicas adicionales al guardar"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Concepto Final"}),m.jsxs("select",{value:w,onChange:E=>S(E.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",children:[m.jsx("option",{value:"",children:"Seleccione una opción"}),m.jsx("option",{value:"ELEGIBLE PARA EL CARGO SIN RECOMENDACIONES LABORALES",children:"ELEGIBLE PARA EL CARGO SIN RECOMENDACIONES LABORALES"}),m.jsx("option",{value:"ELEGIBLE PARA EL CARGO CON RECOMENDACIONES LABORALES",children:"ELEGIBLE PARA EL CARGO CON RECOMENDACIONES LABORALES"}),m.jsx("option",{value:"NO ELEGIBLE PARA EL CARGO POR FUERA DEL PROFESIOGRAMA",children:"NO ELEGIBLE PARA EL CARGO POR FUERA DEL PROFESIOGRAMA"}),m.jsx("option",{value:"PENDIENTE",children:"PENDIENTE"}),m.jsx("option",{value:"NO PRESENTA DETERIORO FÍSICO POR ACTIVIDAD LABORAL",children:"NO PRESENTA DETERIORO FÍSICO POR ACTIVIDAD LABORAL"}),m.jsx("option",{value:"Puede realizar actividades escolares y grupales",children:"Puede realizar actividades escolares y grupales"})]})]})]})]})]}),m.jsx("div",{className:"border-t border-gray-700 p-4 bg-[#1f2c34]",children:m.jsx("button",{onClick:ne,disabled:n,className:"w-full bg-[#00a884] text-white px-6 py-3 rounded-lg hover:bg-[#008f6f] transition font-semibold disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg",children:n?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):"Guardar Historia Clínica"})})]})},E_=({identity:r,roomName:t,role:e,historiaId:n,documento:i,onLeave:a})=>{const[o,s]=he.useState(!1),{localParticipant:l,remoteParticipants:c,isConnecting:u,isConnected:d,error:v,connectToRoom:p,disconnectFromRoom:y,toggleAudio:_,toggleVideo:x,isAudioEnabled:w,isVideoEnabled:S,localVideoTrack:k}=hQ({identity:r,roomName:t,role:e,documento:i}),{currentEffect:T,isProcessing:R,applyBlur:U,applyVirtualBackground:$,removeEffect:F}=tJ(),M=QJ({roomName:t,doctorIdentity:r,role:e||"patient",enabled:!0}),{sessionActive:Y,patientConnected:O,latestPoseData:N,startSession:W,endSession:j,sendPoseData:Z}=M,X=()=>{y(),a==null||a()},oe=()=>{k&&U(k)},q=z=>{k&&$(k,z)},re=()=>{k&&F(k)},fe=()=>{s(!0)},ne=()=>{Y&&j(),s(!1)};if(v)return m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsx("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h2",{className:"text-2xl font-semibold text-white mb-3",children:"Error de Conexión"}),m.jsx("p",{className:"text-gray-400 mb-8",children:v}),m.jsx("button",{onClick:p,className:"w-full bg-[#00a884] text-white px-6 py-3 rounded-xl hover:bg-[#008f6f] transition font-semibold",children:"Reintentar"})]})})});if(!d)return m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsx("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-white mb-6",children:"Consulta Video"}),m.jsxs("div",{className:"space-y-3 mb-8",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3 text-left",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Sala"}),m.jsx("p",{className:"text-white font-medium",children:t})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3 text-left",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Usuario"}),m.jsx("p",{className:"text-white font-medium",children:r})]})]}),m.jsx("button",{onClick:p,disabled:u,className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition disabled:bg-gray-600 disabled:cursor-not-allowed font-semibold shadow-lg",children:u?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Conectando..."]}):"Unirse a la Llamada"}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Conexión segura end-to-end"})]})})]})})});const E=Array.from(c.values());return m.jsxs("div",{className:"min-h-screen bg-[#0b141a] flex",children:[e==="doctor"&&n&&m.jsx("div",{className:"fixed top-0 right-0 h-full bg-[#1f2c34] shadow-2xl z-50",style:{width:"450px",maxWidth:"90vw"},children:m.jsx(Kee,{historiaId:n})}),m.jsxs("div",{className:"flex-1 flex flex-col",children:[m.jsxs("div",{className:"bg-[#1f2c34] px-4 py-3 flex items-center justify-between shadow-lg",children:[m.jsx("button",{onClick:X,className:"text-white p-2 hover:bg-white/10 rounded-full transition","aria-label":"Volver",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[m.jsx("img",{src:"/logoBlanco.png",alt:"BSL",className:"h-8 w-auto"}),m.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"End-to-end Encrypted"})]})]}),m.jsx("button",{className:"text-white p-2 hover:bg-white/10 rounded-full transition","aria-label":"Información",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),m.jsxs("div",{className:"flex-1 relative overflow-hidden bg-[#0b141a]",children:[E.length>0?m.jsx("div",{className:"absolute inset-0 w-full h-full",children:m.jsx(Sg,{participant:E[0]})}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#0b141a]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("img",{src:"/logoBlanco.png",alt:"BSL",className:"h-16 w-auto mx-auto mb-4 opacity-50"}),m.jsx("p",{className:"text-gray-500",children:"Esperando participantes..."})]})}),l&&m.jsx("div",{className:"absolute top-3 right-3 w-36 h-48 sm:w-40 sm:h-56 md:w-32 md:h-48 rounded-2xl overflow-hidden shadow-2xl border-2 border-white/30 z-10",children:m.jsx(Sg,{participant:l,isLocal:!0})}),E.length>1&&m.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4 z-10",children:m.jsx("div",{className:"flex gap-2 justify-center overflow-x-auto pb-2",children:E.slice(1).map(z=>m.jsx("div",{className:"w-24 h-32 rounded-lg overflow-hidden flex-shrink-0 border-2 border-gray-700",children:m.jsx(Sg,{participant:z})},z.sid))})})]}),m.jsx(JJ,{isAudioEnabled:w,isVideoEnabled:S,onToggleAudio:_,onToggleVideo:x,onLeave:X,showBackgroundControls:e==="doctor"&&!!k,onApplyBlur:oe,onApplyVirtualBackground:q,onRemoveEffect:re,isProcessingBackground:R,currentBackgroundEffect:T,showPosturalAnalysis:e==="doctor",onOpenPosturalAnalysis:fe}),e==="doctor"&&m.jsx(zee,{isOpen:o,onClose:ne,roomName:t,sessionActive:Y,patientConnected:O,latestPoseData:N,onStartSession:W,onEndSession:j}),e==="patient"&&Y&&m.jsx(Gee,{onPoseData:Z,isActive:Y})]})]})},Qee=()=>{const r=Date.now().toString(36),t=Math.random().toString(36).substring(2,7);return`consulta-${r}-${t}`},Yee=r=>`${window.location.origin}/patient/${r}`,Jee=async r=>{try{return await navigator.clipboard.writeText(r),!0}catch(t){return console.error("Error al copiar al clipboard:",t),!1}},Xee=()=>{const[r,t]=he.useState(""),[e,n]=he.useState(""),[i,a]=he.useState(""),[o,s]=he.useState(!1),[l,c]=he.useState(!1),u=()=>{if(!r.trim())return;const y=Qee(),_=Yee(y);n(y),a(_)},d=async()=>{await Jee(i)&&(c(!0),setTimeout(()=>c(!1),2e3))},v=()=>{s(!0)},p=()=>{s(!1),n(""),a(""),t("")};return o?m.jsx(E_,{identity:r,roomName:e,role:"doctor",onLeave:p}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Panel del Médico"})]}),i?m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4 border border-gray-600",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Link para el Paciente"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"text",value:i,readOnly:!0,className:"flex-1 bg-[#1f2c34] text-white px-3 py-2 rounded-lg text-sm border border-gray-700"}),m.jsx("button",{onClick:d,className:"bg-[#00a884] text-white px-4 py-2 rounded-lg hover:bg-[#008f6f] transition text-sm font-medium whitespace-nowrap",children:l?"✓ Copiado":"Copiar"})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Comparte este link con tu paciente por WhatsApp, email o mensaje de texto"})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Sala"}),m.jsx("p",{className:"text-white font-medium text-sm",children:e})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Médico"}),m.jsx("p",{className:"text-white font-medium text-sm",children:r})]}),m.jsx("button",{onClick:v,className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg",children:"Iniciar Consulta"}),m.jsx("button",{onClick:()=>{n(""),a("")},className:"w-full bg-transparent text-gray-400 px-6 py-2 rounded-xl hover:text-white transition text-sm",children:"Cancelar"})]}):m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"doctorName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Tu Nombre (Médico)"}),m.jsx("input",{type:"text",id:"doctorName",value:r,onChange:y=>t(y.target.value),placeholder:"Ej: Dr. Juan Pérez",className:"w-full px-4 py-3 bg-[#2a3942] text-white border border-gray-600 rounded-xl focus:ring-2 focus:ring-[#00a884] focus:border-[#00a884] outline-none transition placeholder-gray-500",required:!0})]}),m.jsx("button",{onClick:u,disabled:!r.trim(),className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Crear Sala de Consulta"})]})]})})},Zee=()=>{const{roomName:r}=E4(),[t]=N4(),[e,n]=he.useState(""),[i,a]=he.useState(!1),o=t.get("doctor"),s=t.get("documento"),l=t.get("paciente");he.useEffect(()=>{o&&n(o)},[o]);const c=()=>{e.trim()&&a(!0)},u=()=>{a(!1)};return i&&r?m.jsx(E_,{identity:`Dr. ${e}`,roomName:r,role:"doctor",historiaId:s||void 0,onLeave:u}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Panel del Médico"})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4 mb-6 border border-gray-600 space-y-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Sala de Consulta"}),m.jsx("p",{className:"text-white font-medium text-sm break-all",children:r})]}),l&&m.jsxs("div",{className:"pt-3 border-t border-gray-600",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Paciente"}),m.jsx("p",{className:"text-white font-semibold text-base",children:l})]})]}),m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"doctorName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Código de Médico"}),m.jsx("input",{type:"text",id:"doctorName",value:e,onChange:d=>n(d.target.value),placeholder:"Ingresa tu código",className:"w-full px-4 py-3 bg-[#2a3942] text-white border border-gray-600 rounded-xl focus:ring-2 focus:ring-[#00a884] focus:border-[#00a884] outline-none transition placeholder-gray-500",required:!0})]}),m.jsx("button",{onClick:c,disabled:!e.trim(),className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Unirse a la Consulta"}),m.jsx("div",{className:"bg-[#2a3942] rounded-xl p-4 border border-gray-600",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("svg",{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-300 font-medium mb-1",children:"Información"}),m.jsx("p",{className:"text-xs text-gray-400",children:"Tu paciente se conectará automáticamente a esta sala cuando abra el link que le enviaste por WhatsApp."})]})]})})]}),m.jsx("div",{className:"mt-8 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Conexión segura end-to-end"})]})})]})})},ete=()=>{const{roomName:r}=E4(),[t]=N4(),[e,n]=he.useState(""),[i,a]=he.useState(!1),o=t.get("nombre"),s=t.get("apellido"),l=t.get("doctor"),c=t.get("documento");he.useEffect(()=>{if(o&&s){const v=`${o} ${s}`;n(v)}},[o,s]);const u=()=>{e.trim()&&a(!0)},d=()=>{a(!1),n("")};return i&&r?m.jsx(E_,{identity:e,roomName:r,role:"patient",documento:c||void 0,onLeave:d}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Unirse a la Consulta"})]}),m.jsxs("div",{className:"space-y-5",children:[l&&m.jsx("div",{className:"bg-[#00a884]/10 border border-[#00a884]/30 rounded-xl px-4 py-3",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("svg",{className:"w-4 h-4 text-[#00a884]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-400",children:"Conectándose con"}),m.jsxs("p",{className:"text-white font-medium text-sm",children:["Dr. ",l]})]})]})}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Sala de Consulta"}),m.jsx("p",{className:"text-white font-medium text-sm break-all",children:r})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"patientName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Tu Nombre"}),m.jsx("input",{type:"text",id:"patientName",value:e,onChange:v=>n(v.target.value),placeholder:"Ej: María González",className:"w-full px-4 py-3 bg-[#2a3942] text-white border border-gray-600 rounded-xl focus:ring-2 focus:ring-[#00a884] focus:border-[#00a884] outline-none transition placeholder-gray-500",onKeyDown:v=>{v.key==="Enter"&&u()},autoFocus:!0,required:!0})]}),m.jsx("button",{onClick:u,disabled:!e.trim(),className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Unirse a la Consulta"}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Asegúrate de permitir el acceso a tu cámara y micrófono"})]})})]})]})})},tte="";class rte{constructor(){jt(this,"client");this.client=pr.create({baseURL:tte,headers:{"Content-Type":"application/json"}})}async getDailyStats(t){return(await this.client.get(`/api/medical-panel/stats/${t}`)).data}async getPendingPatients(t,e=0,n=10){return(await this.client.get(`/api/medical-panel/patients/pending/${t}`,{params:{page:e,pageSize:n}})).data}async searchPatientByDocument(t,e){return(await this.client.get(`/api/medical-panel/patients/search/${t}`,{params:e?{medicoCode:e}:{}})).data}async getPatientDetails(t){return(await this.client.get(`/api/medical-panel/patients/details/${t}`)).data}async markAsNoAnswer(t){await this.client.patch(`/api/medical-panel/patients/${t}/no-answer`)}generateWhatsAppLink(t,e){return`https://api.whatsapp.com/send?phone=${this.formatPhoneNumber(t)}&text=${encodeURIComponent(e)}`}formatPhoneNumber(t){let e=t.replace(/[\s\(\)\+\-]/g,"");if(e.startsWith("57")&&e.length>=10)return"+"+e;if(e.length===10&&e.startsWith("3"))return"+57"+e;const n=["1","52","54","55","34","44","49","33"];for(const i of n)if(e.startsWith(i))return"+"+e;return"+57"+e}generateRoomName(){const t=Date.now().toString(36),e=Math.random().toString(36).substring(2,7);return`consulta-${t}-${e}`}}const xa=new rte;function nte(){const[r,t]=he.useState(""),[e,n]=he.useState(!1),[i,a]=he.useState(!1),[o,s]=he.useState(null),[l,c]=he.useState([]),[u,d]=he.useState(0),[v,p]=he.useState(0),[y,_]=he.useState({}),[x,w]=he.useState(""),[S,k]=he.useState(null),[T,R]=he.useState(!1),[U,$]=he.useState(null),[F,M]=he.useState(null),[Y,O]=he.useState(null),[N,W]=he.useState(null),[j,Z]=he.useState(new Set),[X,oe]=he.useState({}),q=10,re=async()=>{if(!r){M("Por favor ingrese el código de médico");return}a(!0),M(null);try{const le=await xa.getDailyStats(r);s(le);const Pe=await xa.getPendingPatients(r,u,q);c(Pe.patients),p(Pe.totalPages),n(!0)}catch(le){console.error("Error cargando datos:",le),M("Error al cargar los datos. Verifique el código de médico.")}finally{a(!1)}},fe=async le=>{le.preventDefault(),await re()},ne=async()=>{await re()},E=async le=>{le<0||le>=v||d(le)};he.useEffect(()=>{e&&r&&re()},[u]),he.useEffect(()=>{if(!e)return;const le=window.location.origin;console.log("[MedicalPanel] Connecting to Socket.io at:",le);const Pe=Lu(le,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});return Pe.on("connect",()=>{console.log("[MedicalPanel] Socket.io connected")}),Pe.on("disconnect",()=>{console.log("[MedicalPanel] Socket.io disconnected")}),Pe.on("patient-connected",Ae=>{console.log("[MedicalPanel] Patient connected:",Ae),Z(ge=>{const J=new Set(ge);return J.add(Ae.documento),J})}),Pe.on("patient-disconnected",Ae=>{console.log("[MedicalPanel] Patient disconnected:",Ae),Z(ge=>{const J=new Set(ge);return J.delete(Ae.documento),J})}),()=>{console.log("[MedicalPanel] Disconnecting Socket.io"),Pe.disconnect()}},[e]);const z=async le=>{try{await xa.markAsNoAnswer(le),_({...y,[le]:!0}),await re()}catch(Pe){console.error("Error marcando como no contesta:",Pe)}},H=le=>{let Pe=le.replace(/[\s\(\)\-]/g,"");return Pe.startsWith("+")?Pe:/^(1|52|57|54|55|34|44|49|33)\d{10,}/.test(Pe)?`+${Pe}`:/^3\d{9}$/.test(Pe)?`+57${Pe}`:(console.warn(`⚠️ Número telefónico con formato desconocido: ${Pe}`),Pe)},ee=async le=>{W(le._id);try{const Pe=xa.generateRoomName();oe(nt=>({...nt,[le._id]:Pe}));const Ae=`${window.location.origin}/patient/${Pe}?nombre=${le.primerNombre}&apellido=${le.primerApellido}&documento=${le._id}&doctor=${r}`,ge=`Hola ${le.primerNombre}. Te escribimos de BSL. Tienes una cita médica programada conmigo

Conéctate al link:

${Ae}`,J=H(le.celular),gt=J.substring(1);await Oa.sendWhatsApp(gt,ge),console.log("WhatsApp enviado exitosamente");try{console.log(`📞 Iniciando llamada a: ${J}`),await Oa.makeVoiceCall(J,le.primerNombre),console.log("✅ Llamada telefónica iniciada exitosamente")}catch(nt){console.error("❌ Error realizando llamada telefónica:",nt)}alert(`✅ Mensaje de WhatsApp enviado y llamada iniciada a ${le.primerNombre}`)}catch(Pe){console.error("Error al contactar paciente:",Pe),alert("Error al contactar paciente. Inténtalo nuevamente.")}finally{W(null)}},ae=async le=>{O(le._id);try{let Pe=X[le._id];Pe||(Pe=xa.generateRoomName(),oe(ge=>({...ge,[le._id]:Pe})));const Ae=`${window.location.origin}/doctor/${Pe}?doctor=${r}&documento=${le._id}&paciente=${encodeURIComponent(le.nombres)}`;window.open(Ae,"_blank")}catch(Pe){console.error("Error al atender paciente:",Pe),alert("Error al abrir sala de consulta. Inténtalo nuevamente.")}finally{O(null)}},ue=le=>{_({...y,[le]:!y[le]})},_e=async le=>{if(le.preventDefault(),!x.trim()){$("Por favor ingrese un documento o celular");return}R(!0),$(null),k(null);try{const Pe=await xa.searchPatientByDocument(x.trim());Pe?k(Pe):$("No se encontró paciente con ese documento o celular")}catch(Pe){console.error("Error buscando paciente:",Pe),$("Error al buscar paciente")}finally{R(!1)}},me=()=>{w(""),k(null),$(null)},be=(le,Pe=!1)=>{if(!Pe)return`Hola ${le.primerNombre}. Te escribimos de BSL. Tienes una cita médica programada conmigo`;const Ae=xa.generateRoomName(),ge=`${window.location.origin}/patient/${Ae}?nombre=${le.primerNombre}&apellido=${le.primerApellido}`;return`Hola ${le.primerNombre}. Te escribimos de BSL. Tienes una cita médica programada conmigo

Conéctate al link:

${ge}`};return e?m.jsx("div",{className:"min-h-screen bg-[#0b141a] p-4",children:m.jsxs("div",{className:"max-w-7xl mx-auto",children:[m.jsxs("div",{className:"bg-[#1f2c34] rounded-2xl shadow-xl p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-12 w-auto"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-white",children:"Panel Médico"}),m.jsxs("p",{className:"text-gray-400 text-sm",children:["Código: ",r]})]})]}),m.jsx("button",{onClick:ne,disabled:i,className:"bg-[#00a884] text-white px-4 py-2 rounded-xl hover:bg-[#008f6f] transition font-semibold disabled:opacity-50",children:i?"⟳":"↻ Actualizar"})]}),o&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4",children:[m.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Programados Hoy"}),m.jsx("div",{className:"text-3xl font-bold text-white",children:o.programadosHoy})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4",children:[m.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Atendidos Hoy"}),m.jsx("div",{className:"text-3xl font-bold text-[#00a884]",children:o.atendidosHoy})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4",children:[m.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Restantes Hoy"}),m.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:o.restantesHoy})]})]})]}),m.jsxs("div",{className:"bg-[#1f2c34] rounded-2xl shadow-xl p-6 mb-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Buscar Paciente"}),m.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",placeholder:"Buscar por documento o celular...",value:x,onChange:le=>w(le.target.value),className:"flex-1 px-4 py-3 bg-[#2a3942] border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-[#00a884] transition"}),m.jsx("button",{type:"submit",disabled:T||!x.trim(),className:"bg-[#00a884] text-white px-6 py-3 rounded-xl hover:bg-[#008f6f] transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:T?"🔍":"🔎 Buscar"}),(S||U)&&m.jsx("button",{type:"button",onClick:me,className:"bg-gray-600 text-white px-4 py-3 rounded-xl hover:bg-gray-700 transition font-semibold",children:"✕ Limpiar"})]}),U&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-3 text-red-400 text-sm",children:U}),S&&m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4 mt-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:"✅ Paciente encontrado"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{className:"col-span-2 flex items-center gap-3 mb-2",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Nombre:"}),m.jsx("span",{className:"text-white ml-2 font-semibold",children:S.nombres})]}),j.has(S._id)&&m.jsxs("div",{className:"flex items-center gap-2 bg-green-500/20 px-3 py-1 rounded-full border border-green-500/50",children:[m.jsxs("div",{className:"relative flex items-center justify-center w-2 h-2",children:[m.jsx("div",{className:"absolute w-2 h-2 bg-green-500 rounded-full animate-ping"}),m.jsx("div",{className:"relative w-2 h-2 bg-green-500 rounded-full"})]}),m.jsx("span",{className:"text-green-400 text-xs font-medium uppercase tracking-wide",children:"Conectado"})]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Doc:"}),m.jsx("span",{className:"text-white ml-2",children:S.numeroId})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:"Celular:"}),m.jsx("span",{className:"text-white ml-2",children:S.celular||"NO REGISTRA"}),S.celular&&m.jsx("a",{href:xa.generateWhatsAppLink(S.celular,be(S,!1)),target:"_blank",rel:"noopener noreferrer",className:"text-[#25D366] hover:text-[#1da851] transition",title:"Enviar WhatsApp",children:m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Empresa:"}),m.jsx("span",{className:"text-white ml-2",children:S.empresaListado==="SANITHELP-JJ"?"PARTICULAR":S.empresaListado})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Fecha atención:"}),m.jsx("span",{className:"text-white ml-2",children:new Date(S.fechaAtencion).toLocaleString()})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Estado:"}),m.jsx("span",{className:"text-white ml-2",children:S.estado})]})]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex flex-wrap gap-2",children:[m.jsx("button",{onClick:()=>ee(S),disabled:N===S._id,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:N===S._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Contactando..."]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M20 10.999h2C22 5.869 18.127 2 12.99 2v2C17.052 4 20 6.943 20 10.999z"}),m.jsx("path",{d:"M13 8c2.103 0 3 .897 3 3h2c0-3.225-1.775-5-5-5v2zm3.422 5.443a1.001 1.001 0 0 0-1.391.043l-2.393 2.461c-.576-.11-1.734-.471-2.926-1.66-1.192-1.193-1.553-2.354-1.66-2.926l2.459-2.394a1 1 0 0 0 .043-1.391L6.859 3.513a1 1 0 0 0-1.391-.087l-2.17 1.861a1 1 0 0 0-.29.649c-.015.25-.301 6.172 4.291 10.766C11.305 20.707 16.323 21 17.705 21c.202 0 .326-.006.359-.008a.992.992 0 0 0 .648-.291l1.86-2.171a.997.997 0 0 0-.086-1.391l-4.064-3.696z"})]}),"Contactar"]})}),m.jsx("button",{onClick:()=>ae(S),disabled:Y===S._id,className:"bg-[#00a884] text-white px-4 py-2 rounded-lg hover:bg-[#008f6f] transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Y===S._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Abriendo sala..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}),"Atender"]})}),m.jsx("button",{onClick:()=>z(S._id),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm font-medium flex items-center gap-2",children:"No Contesta"})]})]})]})]})]}),m.jsxs("div",{className:"bg-[#1f2c34] rounded-2xl shadow-xl p-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Pacientes Pendientes"}),i?m.jsx("div",{className:"text-center py-8 text-gray-400",children:"Cargando pacientes..."}):l.length===0?m.jsx("div",{className:"text-center py-8 text-gray-400",children:"No hay pacientes pendientes"}):m.jsx("div",{className:"space-y-4",children:l.map(le=>m.jsx("div",{className:`bg-[#2a3942] rounded-xl overflow-hidden transition-all ${y[le._id]?"opacity-50":""}`,children:m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("h3",{className:"text-lg font-semibold text-white",children:le.nombres}),j.has(le._id)&&m.jsxs("div",{className:"flex items-center gap-2 bg-green-500/20 px-3 py-1 rounded-full border border-green-500/50",children:[m.jsxs("div",{className:"relative flex items-center justify-center w-2 h-2",children:[m.jsx("div",{className:"absolute w-2 h-2 bg-green-500 rounded-full animate-ping"}),m.jsx("div",{className:"relative w-2 h-2 bg-green-500 rounded-full"})]}),m.jsx("span",{className:"text-green-400 text-xs font-medium uppercase tracking-wide",children:"Conectado"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Doc:"}),m.jsx("span",{className:"text-white ml-2",children:le.numeroId})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:"Celular:"}),m.jsx("span",{className:"text-white ml-2",children:le.celular||"NO REGISTRA"}),le.celular&&m.jsx("a",{href:xa.generateWhatsAppLink(le.celular,be(le,!1)),target:"_blank",rel:"noopener noreferrer",className:"text-[#25D366] hover:text-[#1da851] transition",title:"Enviar WhatsApp",children:m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Empresa:"}),m.jsx("span",{className:"text-white ml-2",children:le.empresaListado==="SANITHELP-JJ"?"PARTICULAR":le.empresaListado})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Fecha:"}),m.jsx("span",{className:"text-white ml-2",children:new Date(le.fechaAtencion).toLocaleString()})]})]})]}),m.jsx("button",{onClick:()=>ue(le._id),className:"text-gray-400 hover:text-white ml-4",children:y[le._id]?"▼":"▲"})]}),!y[le._id]&&m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex flex-wrap gap-2",children:[m.jsx("button",{onClick:()=>ee(le),disabled:N===le._id,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:N===le._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Contactando..."]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M20 10.999h2C22 5.869 18.127 2 12.99 2v2C17.052 4 20 6.943 20 10.999z"}),m.jsx("path",{d:"M13 8c2.103 0 3 .897 3 3h2c0-3.225-1.775-5-5-5v2zm3.422 5.443a1.001 1.001 0 0 0-1.391.043l-2.393 2.461c-.576-.11-1.734-.471-2.926-1.66-1.192-1.193-1.553-2.354-1.66-2.926l2.459-2.394a1 1 0 0 0 .043-1.391L6.859 3.513a1 1 0 0 0-1.391-.087l-2.17 1.861a1 1 0 0 0-.29.649c-.015.25-.301 6.172 4.291 10.766C11.305 20.707 16.323 21 17.705 21c.202 0 .326-.006.359-.008a.992.992 0 0 0 .648-.291l1.86-2.171a.997.997 0 0 0-.086-1.391l-4.064-3.696z"})]}),"Contactar"]})}),m.jsx("button",{onClick:()=>ae(le),disabled:Y===le._id,className:"bg-[#00a884] text-white px-4 py-2 rounded-lg hover:bg-[#008f6f] transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Y===le._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Abriendo sala..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}),"Atender"]})}),m.jsx("button",{onClick:()=>z(le._id),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm font-medium flex items-center gap-2",children:"No Contesta"})]})]})},le._id))}),v>1&&m.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:()=>E(u-1),disabled:u===0,className:"px-4 py-2 bg-[#2a3942] text-white rounded-lg hover:bg-[#3a4952] transition disabled:opacity-30 disabled:cursor-not-allowed",children:"← Anterior"}),m.jsxs("span",{className:"text-gray-400",children:["Página ",u+1," de ",v]}),m.jsx("button",{onClick:()=>E(u+1),disabled:u>=v-1,className:"px-4 py-2 bg-[#2a3942] text-white rounded-lg hover:bg-[#3a4952] transition disabled:opacity-30 disabled:cursor-not-allowed",children:"Siguiente →"})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Panel Médico"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Gestión de consultas y pacientes"})]}),m.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"codEmpresa",className:"block text-sm font-medium text-gray-300 mb-2",children:"Código de Médico"}),m.jsx("input",{type:"text",id:"codEmpresa",value:r,onChange:le=>t(le.target.value),className:"w-full px-4 py-3 bg-[#2a3942] border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-[#00a884] transition",placeholder:"Ingrese su código",required:!0})]}),F&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-3 text-red-400 text-sm",children:F}),m.jsx("button",{type:"submit",disabled:i,className:"w-full bg-[#00a884] text-white px-6 py-3 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Cargando...":"Entrar"})]}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:m.jsxs("a",{href:"https://api.whatsapp.com/send?phone=573014152706&text=Hola",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-sm text-gray-400 hover:text-[#00a884] transition",children:[m.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Soporte técnico"]})})]})})}function ite(){return m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-10",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Videollamadas seguras y profesionales"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(yN,{to:"/doctor",children:m.jsxs("button",{className:"w-full bg-[#00a884] text-white px-6 py-4 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg",children:[m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),m.jsx("span",{children:"Soy Médico"})]}),m.jsx("p",{className:"text-xs text-white/70 mt-2",children:"Crear sala y generar link para paciente"})]})}),m.jsx("div",{className:"bg-[#2a3942] rounded-xl p-4 border border-gray-600",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("svg",{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-300 font-medium mb-1",children:"¿Eres paciente?"}),m.jsx("p",{className:"text-xs text-gray-400",children:"Solicita el link de la consulta a tu médico y ábrelo en tu navegador para unirte automáticamente"})]})]})})]}),m.jsx("div",{className:"mt-8 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Conexión segura end-to-end"})]})})]})})}function ate(){return m.jsx(vN,{children:m.jsxs(sN,{children:[m.jsx(dc,{path:"/",element:m.jsx(ite,{})}),m.jsx(dc,{path:"/doctor",element:m.jsx(Xee,{})}),m.jsx(dc,{path:"/doctor/:roomName",element:m.jsx(Zee,{})}),m.jsx(dc,{path:"/patient/:roomName",element:m.jsx(ete,{})}),m.jsx(dc,{path:"/panel-medico",element:m.jsx(nte,{})})]})})}qg.createRoot(document.getElementById("root")).render(m.jsx(vx.StrictMode,{children:m.jsx(ate,{})}));export{Ut as _,A as c,ix as g};
