var $L=Object.defineProperty;var UL=(r,t,e)=>t in r?$L(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var jt=(r,t,e)=>UL(r,typeof t!="symbol"?t+"":t,e);function VL(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function zL(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),e}var iS={exports:{}},gp={},aS={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf=Symbol.for("react.element"),WL=Symbol.for("react.portal"),qL=Symbol.for("react.fragment"),HL=Symbol.for("react.strict_mode"),GL=Symbol.for("react.profiler"),KL=Symbol.for("react.provider"),QL=Symbol.for("react.context"),YL=Symbol.for("react.forward_ref"),JL=Symbol.for("react.suspense"),XL=Symbol.for("react.memo"),ZL=Symbol.for("react.lazy"),c2=Symbol.iterator;function eA(r){return r===null||typeof r!="object"?null:(r=c2&&r[c2]||r["@@iterator"],typeof r=="function"?r:null)}var oS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sS=Object.assign,cS={};function nl(r,t,e){this.props=r,this.context=t,this.refs=cS,this.updater=e||oS}nl.prototype.isReactComponent={};nl.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};nl.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function lS(){}lS.prototype=nl.prototype;function Cy(r,t,e){this.props=r,this.context=t,this.refs=cS,this.updater=e||oS}var Ly=Cy.prototype=new lS;Ly.constructor=Cy;sS(Ly,nl.prototype);Ly.isPureReactComponent=!0;var l2=Array.isArray,uS=Object.prototype.hasOwnProperty,Ay={current:null},fS={key:!0,ref:!0,__self:!0,__source:!0};function dS(r,t,e){var n,i={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)uS.call(t,n)&&!fS.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=e;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(r&&r.defaultProps)for(n in s=r.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:nf,type:r,key:a,ref:o,props:i,_owner:Ay.current}}function tA(r,t){return{$$typeof:nf,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function Oy(r){return typeof r=="object"&&r!==null&&r.$$typeof===nf}function rA(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(e){return t[e]})}var u2=/\/+/g;function om(r,t){return typeof r=="object"&&r!==null&&r.key!=null?rA(""+r.key):t.toString(36)}function nh(r,t,e,n,i){var a=typeof r;(a==="undefined"||a==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case nf:case WL:o=!0}}if(o)return o=r,i=i(o),r=n===""?"."+om(o,0):n,l2(i)?(e="",r!=null&&(e=r.replace(u2,"$&/")+"/"),nh(i,t,e,"",function(c){return c})):i!=null&&(Oy(i)&&(i=tA(i,e+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(u2,"$&/")+"/")+r)),t.push(i)),1;if(o=0,n=n===""?".":n+":",l2(r))for(var s=0;s<r.length;s++){a=r[s];var l=n+om(a,s);o+=nh(a,t,e,l,i)}else if(l=eA(r),typeof l=="function")for(r=l.call(r),s=0;!(a=r.next()).done;)a=a.value,l=n+om(a,s++),o+=nh(a,t,e,l,i);else if(a==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function sd(r,t,e){if(r==null)return r;var n=[],i=0;return nh(r,n,"","",function(a){return t.call(e,a,i++)}),n}function nA(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(e){(r._status===0||r._status===-1)&&(r._status=1,r._result=e)},function(e){(r._status===0||r._status===-1)&&(r._status=2,r._result=e)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var mn={current:null},ih={transition:null},iA={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:ih,ReactCurrentOwner:Ay};function hS(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:sd,forEach:function(r,t,e){sd(r,function(){t.apply(this,arguments)},e)},count:function(r){var t=0;return sd(r,function(){t++}),t},toArray:function(r){return sd(r,function(t){return t})||[]},only:function(r){if(!Oy(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};kt.Component=nl;kt.Fragment=qL;kt.Profiler=GL;kt.PureComponent=Cy;kt.StrictMode=HL;kt.Suspense=JL;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iA;kt.act=hS;kt.cloneElement=function(r,t,e){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=sS({},r.props),i=r.key,a=r.ref,o=r._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Ay.current),t.key!==void 0&&(i=""+t.key),r.type&&r.type.defaultProps)var s=r.type.defaultProps;for(l in t)uS.call(t,l)&&!fS.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=e;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];n.children=s}return{$$typeof:nf,type:r.type,key:i,ref:a,props:n,_owner:o}};kt.createContext=function(r){return r={$$typeof:QL,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:KL,_context:r},r.Consumer=r};kt.createElement=dS;kt.createFactory=function(r){var t=dS.bind(null,r);return t.type=r,t};kt.createRef=function(){return{current:null}};kt.forwardRef=function(r){return{$$typeof:YL,render:r}};kt.isValidElement=Oy;kt.lazy=function(r){return{$$typeof:ZL,_payload:{_status:-1,_result:r},_init:nA}};kt.memo=function(r,t){return{$$typeof:XL,type:r,compare:t===void 0?null:t}};kt.startTransition=function(r){var t=ih.transition;ih.transition={};try{r()}finally{ih.transition=t}};kt.unstable_act=hS;kt.useCallback=function(r,t){return mn.current.useCallback(r,t)};kt.useContext=function(r){return mn.current.useContext(r)};kt.useDebugValue=function(){};kt.useDeferredValue=function(r){return mn.current.useDeferredValue(r)};kt.useEffect=function(r,t){return mn.current.useEffect(r,t)};kt.useId=function(){return mn.current.useId()};kt.useImperativeHandle=function(r,t,e){return mn.current.useImperativeHandle(r,t,e)};kt.useInsertionEffect=function(r,t){return mn.current.useInsertionEffect(r,t)};kt.useLayoutEffect=function(r,t){return mn.current.useLayoutEffect(r,t)};kt.useMemo=function(r,t){return mn.current.useMemo(r,t)};kt.useReducer=function(r,t,e){return mn.current.useReducer(r,t,e)};kt.useRef=function(r){return mn.current.useRef(r)};kt.useState=function(r){return mn.current.useState(r)};kt.useSyncExternalStore=function(r,t,e){return mn.current.useSyncExternalStore(r,t,e)};kt.useTransition=function(){return mn.current.useTransition()};kt.version="18.3.1";aS.exports=kt;var fe=aS.exports;const pS=nS(fe),aA=VL({__proto__:null,default:pS},[fe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oA=fe,sA=Symbol.for("react.element"),cA=Symbol.for("react.fragment"),lA=Object.prototype.hasOwnProperty,uA=oA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fA={key:!0,ref:!0,__self:!0,__source:!0};function vS(r,t,e){var n,i={},a=null,o=null;e!==void 0&&(a=""+e),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)lA.call(t,n)&&!fA.hasOwnProperty(n)&&(i[n]=t[n]);if(r&&r.defaultProps)for(n in t=r.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:sA,type:r,key:a,ref:o,props:i,_owner:uA.current}}gp.Fragment=cA;gp.jsx=vS;gp.jsxs=vS;iS.exports=gp;var m=iS.exports,Wg={},mS={exports:{}},Kn={},gS={exports:{}},yS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(H,re){var ue=H.length;H.push(re);e:for(;0<ue;){var ne=ue-1>>>1,N=H[ne];if(0<i(N,re))H[ne]=re,H[ue]=N,ue=ne;else break e}}function e(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var re=H[0],ue=H.pop();if(ue!==re){H[0]=ue;e:for(var ne=0,N=H.length,U=N>>>1;ne<U;){var G=2*(ne+1)-1,ee=H[G],ie=G+1,ce=H[ie];if(0>i(ee,ue))ie<N&&0>i(ce,ee)?(H[ne]=ce,H[ie]=ue,ne=ie):(H[ne]=ee,H[G]=ue,ne=G);else if(ie<N&&0>i(ce,ue))H[ne]=ce,H[ie]=ue,ne=ie;else break e}}return re}function i(H,re){var ue=H.sortIndex-re.sortIndex;return ue!==0?ue:H.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();r.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,v=3,p=!1,y=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(H){for(var re=e(c);re!==null;){if(re.callback===null)n(c);else if(re.startTime<=H)n(c),re.sortIndex=re.expirationTime,t(l,re);else break;re=e(c)}}function T(H){if(b=!1,k(H),!y)if(e(l)!==null)y=!0,Z(R);else{var re=e(c);re!==null&&oe(T,re.startTime-H)}}function R(H,re){y=!1,b&&(b=!1,_(F),F=-1),p=!0;var ue=v;try{for(k(re),d=e(l);d!==null&&(!(d.expirationTime>re)||H&&!O());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,v=d.priorityLevel;var N=ne(d.expirationTime<=re);re=r.unstable_now(),typeof N=="function"?d.callback=N:d===e(l)&&n(l),k(re)}else n(l);d=e(l)}if(d!==null)var U=!0;else{var G=e(c);G!==null&&oe(T,G.startTime-re),U=!1}return U}finally{d=null,v=ue,p=!1}}var B=!1,j=null,F=-1,M=5,q=-1;function O(){return!(r.unstable_now()-q<M)}function L(){if(j!==null){var H=r.unstable_now();q=H;var re=!0;try{re=j(!0,H)}finally{re?z():(B=!1,j=null)}}else B=!1}var z;if(typeof x=="function")z=function(){x(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,X=I.port2;I.port1.onmessage=L,z=function(){X.postMessage(null)}}else z=function(){S(L,0)};function Z(H){j=H,B||(B=!0,z())}function oe(H,re){F=S(function(){H(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){y||p||(y=!0,Z(R))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return e(l)},r.unstable_next=function(H){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var ue=v;v=re;try{return H()}finally{v=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=v;v=H;try{return re()}finally{v=ue}},r.unstable_scheduleCallback=function(H,re,ue){var ne=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ne+ue:ne):ue=ne,H){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ue+N,H={id:u++,callback:re,priorityLevel:H,startTime:ue,expirationTime:N,sortIndex:-1},ue>ne?(H.sortIndex=ue,t(c,H),e(l)===null&&H===e(c)&&(b?(_(F),F=-1):b=!0,oe(T,ue-ne))):(H.sortIndex=N,t(l,H),y||p||(y=!0,Z(R))),H},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(H){var re=v;return function(){var ue=v;v=re;try{return H.apply(this,arguments)}finally{v=ue}}}})(yS);gS.exports=yS;var dA=gS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hA=fe,Gn=dA;function Ae(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _S=new Set,Ou={};function js(r,t){Wc(r,t),Wc(r+"Capture",t)}function Wc(r,t){for(Ou[r]=t,r=0;r<t.length;r++)_S.add(t[r])}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qg=Object.prototype.hasOwnProperty,pA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f2={},d2={};function vA(r){return qg.call(d2,r)?!0:qg.call(f2,r)?!1:pA.test(r)?d2[r]=!0:(f2[r]=!0,!1)}function mA(r,t,e,n){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function gA(r,t,e,n){if(t===null||typeof t>"u"||mA(r,t,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gn(r,t,e,n,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=r,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Yr[r]=new gn(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];Yr[t]=new gn(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Yr[r]=new gn(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Yr[r]=new gn(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Yr[r]=new gn(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Yr[r]=new gn(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Yr[r]=new gn(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Yr[r]=new gn(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Yr[r]=new gn(r,5,!1,r.toLowerCase(),null,!1,!1)});var Ny=/[\-:]([a-z])/g;function Ry(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(Ny,Ry);Yr[t]=new gn(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(Ny,Ry);Yr[t]=new gn(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(Ny,Ry);Yr[t]=new gn(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Yr[r]=new gn(r,1,!1,r.toLowerCase(),null,!1,!1)});Yr.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Yr[r]=new gn(r,1,!1,r.toLowerCase(),null,!0,!0)});function jy(r,t,e,n){var i=Yr.hasOwnProperty(t)?Yr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gA(t,e,i,n)&&(e=null),n||i===null?vA(t)&&(e===null?r.removeAttribute(t):r.setAttribute(t,""+e)):i.mustUseProperty?r[i.propertyName]=e===null?i.type===3?!1:"":e:(t=i.attributeName,n=i.attributeNamespace,e===null?r.removeAttribute(t):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,n?r.setAttributeNS(n,t,e):r.setAttribute(t,e))))}var Ma=hA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cd=Symbol.for("react.element"),yc=Symbol.for("react.portal"),_c=Symbol.for("react.fragment"),Iy=Symbol.for("react.strict_mode"),Hg=Symbol.for("react.profiler"),wS=Symbol.for("react.provider"),bS=Symbol.for("react.context"),My=Symbol.for("react.forward_ref"),Gg=Symbol.for("react.suspense"),Kg=Symbol.for("react.suspense_list"),Dy=Symbol.for("react.memo"),lo=Symbol.for("react.lazy"),xS=Symbol.for("react.offscreen"),h2=Symbol.iterator;function Gl(r){return r===null||typeof r!="object"?null:(r=h2&&r[h2]||r["@@iterator"],typeof r=="function"?r:null)}var sr=Object.assign,sm;function uu(r){if(sm===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);sm=t&&t[1]||""}return`
`+sm+r}var cm=!1;function lm(r,t){if(!r||cm)return"";cm=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(r,[],t)}else{try{t.call()}catch(c){n=c}r.call(t.prototype)}else{try{throw Error()}catch(c){n=c}r()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=o&&0<=s);break}}}finally{cm=!1,Error.prepareStackTrace=e}return(r=r?r.displayName||r.name:"")?uu(r):""}function yA(r){switch(r.tag){case 5:return uu(r.type);case 16:return uu("Lazy");case 13:return uu("Suspense");case 19:return uu("SuspenseList");case 0:case 2:case 15:return r=lm(r.type,!1),r;case 11:return r=lm(r.type.render,!1),r;case 1:return r=lm(r.type,!0),r;default:return""}}function Qg(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case _c:return"Fragment";case yc:return"Portal";case Hg:return"Profiler";case Iy:return"StrictMode";case Gg:return"Suspense";case Kg:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case bS:return(r.displayName||"Context")+".Consumer";case wS:return(r._context.displayName||"Context")+".Provider";case My:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Dy:return t=r.displayName||null,t!==null?t:Qg(r.type)||"Memo";case lo:t=r._payload,r=r._init;try{return Qg(r(t))}catch{}}return null}function _A(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qg(t);case 8:return t===Iy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Co(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function SS(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wA(r){var t=SS(r)?"checked":"value",e=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),n=""+r[t];if(!r.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,a=e.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(r,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function ld(r){r._valueTracker||(r._valueTracker=wA(r))}function kS(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return r&&(n=SS(r)?r.checked?"true":"false":r.value),r=n,r!==e?(t.setValue(r),!0):!1}function Rh(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Yg(r,t){var e=t.checked;return sr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??r._wrapperState.initialChecked})}function p2(r,t){var e=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;e=Co(t.value!=null?t.value:e),r._wrapperState={initialChecked:n,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PS(r,t){t=t.checked,t!=null&&jy(r,"checked",t,!1)}function Jg(r,t){PS(r,t);var e=Co(t.value),n=t.type;if(e!=null)n==="number"?(e===0&&r.value===""||r.value!=e)&&(r.value=""+e):r.value!==""+e&&(r.value=""+e);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?Xg(r,t.type,e):t.hasOwnProperty("defaultValue")&&Xg(r,t.type,Co(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function v2(r,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,e||t===r.value||(r.value=t),r.defaultValue=t}e=r.name,e!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,e!==""&&(r.name=e)}function Xg(r,t,e){(t!=="number"||Rh(r.ownerDocument)!==r)&&(e==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+e&&(r.defaultValue=""+e))}var fu=Array.isArray;function Nc(r,t,e,n){if(r=r.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<r.length;e++)i=t.hasOwnProperty("$"+r[e].value),r[e].selected!==i&&(r[e].selected=i),i&&n&&(r[e].defaultSelected=!0)}else{for(e=""+Co(e),t=null,i=0;i<r.length;i++){if(r[i].value===e){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}t!==null||r[i].disabled||(t=r[i])}t!==null&&(t.selected=!0)}}function Zg(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return sr({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function m2(r,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(Ae(92));if(fu(e)){if(1<e.length)throw Error(Ae(93));e=e[0]}t=e}t==null&&(t=""),e=t}r._wrapperState={initialValue:Co(e)}}function TS(r,t){var e=Co(t.value),n=Co(t.defaultValue);e!=null&&(e=""+e,e!==r.value&&(r.value=e),t.defaultValue==null&&r.defaultValue!==e&&(r.defaultValue=e)),n!=null&&(r.defaultValue=""+n)}function g2(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function ES(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e0(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?ES(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ud,CS=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return r(t,e,n,i)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(ud=ud||document.createElement("div"),ud.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ud.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function Nu(r,t){if(t){var e=r.firstChild;if(e&&e===r.lastChild&&e.nodeType===3){e.nodeValue=t;return}}r.textContent=t}var yu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bA=["Webkit","ms","Moz","O"];Object.keys(yu).forEach(function(r){bA.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),yu[t]=yu[r]})});function LS(r,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||yu.hasOwnProperty(r)&&yu[r]?(""+t).trim():t+"px"}function AS(r,t){r=r.style;for(var e in t)if(t.hasOwnProperty(e)){var n=e.indexOf("--")===0,i=LS(e,t[e],n);e==="float"&&(e="cssFloat"),n?r.setProperty(e,i):r[e]=i}}var xA=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function t0(r,t){if(t){if(xA[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ae(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ae(62))}}function r0(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n0=null;function Fy(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var i0=null,Rc=null,jc=null;function y2(r){if(r=sf(r)){if(typeof i0!="function")throw Error(Ae(280));var t=r.stateNode;t&&(t=xp(t),i0(r.stateNode,r.type,t))}}function OS(r){Rc?jc?jc.push(r):jc=[r]:Rc=r}function NS(){if(Rc){var r=Rc,t=jc;if(jc=Rc=null,y2(r),t)for(r=0;r<t.length;r++)y2(t[r])}}function RS(r,t){return r(t)}function jS(){}var um=!1;function IS(r,t,e){if(um)return r(t,e);um=!0;try{return RS(r,t,e)}finally{um=!1,(Rc!==null||jc!==null)&&(jS(),NS())}}function Ru(r,t){var e=r.stateNode;if(e===null)return null;var n=xp(e);if(n===null)return null;e=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(e&&typeof e!="function")throw Error(Ae(231,t,typeof e));return e}var a0=!1;if(Na)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){a0=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{a0=!1}function SA(r,t,e,n,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(e,c)}catch(u){this.onError(u)}}var _u=!1,jh=null,Ih=!1,o0=null,kA={onError:function(r){_u=!0,jh=r}};function PA(r,t,e,n,i,a,o,s,l){_u=!1,jh=null,SA.apply(kA,arguments)}function TA(r,t,e,n,i,a,o,s,l){if(PA.apply(this,arguments),_u){if(_u){var c=jh;_u=!1,jh=null}else throw Error(Ae(198));Ih||(Ih=!0,o0=c)}}function Is(r){var t=r,e=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(e=t.return),r=t.return;while(r)}return t.tag===3?e:null}function MS(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function _2(r){if(Is(r)!==r)throw Error(Ae(188))}function EA(r){var t=r.alternate;if(!t){if(t=Is(r),t===null)throw Error(Ae(188));return t!==r?null:r}for(var e=r,n=t;;){var i=e.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){e=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===e)return _2(i),r;if(a===n)return _2(i),t;a=a.sibling}throw Error(Ae(188))}if(e.return!==n.return)e=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===e){o=!0,e=i,n=a;break}if(s===n){o=!0,n=i,e=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===e){o=!0,e=a,n=i;break}if(s===n){o=!0,n=a,e=i;break}s=s.sibling}if(!o)throw Error(Ae(189))}}if(e.alternate!==n)throw Error(Ae(190))}if(e.tag!==3)throw Error(Ae(188));return e.stateNode.current===e?r:t}function DS(r){return r=EA(r),r!==null?FS(r):null}function FS(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=FS(r);if(t!==null)return t;r=r.sibling}return null}var BS=Gn.unstable_scheduleCallback,w2=Gn.unstable_cancelCallback,CA=Gn.unstable_shouldYield,LA=Gn.unstable_requestPaint,xr=Gn.unstable_now,AA=Gn.unstable_getCurrentPriorityLevel,By=Gn.unstable_ImmediatePriority,$S=Gn.unstable_UserBlockingPriority,Mh=Gn.unstable_NormalPriority,OA=Gn.unstable_LowPriority,US=Gn.unstable_IdlePriority,yp=null,Zi=null;function NA(r){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(yp,r,void 0,(r.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:IA,RA=Math.log,jA=Math.LN2;function IA(r){return r>>>=0,r===0?32:31-(RA(r)/jA|0)|0}var fd=64,dd=4194304;function du(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Dh(r,t){var e=r.pendingLanes;if(e===0)return 0;var n=0,i=r.suspendedLanes,a=r.pingedLanes,o=e&268435455;if(o!==0){var s=o&~i;s!==0?n=du(s):(a&=o,a!==0&&(n=du(a)))}else o=e&~i,o!==0?n=du(o):a!==0&&(n=du(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=e&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=n;0<t;)e=31-Ci(t),i=1<<e,n|=r[e],t&=~i;return n}function MA(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DA(r,t){for(var e=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,a=r.pendingLanes;0<a;){var o=31-Ci(a),s=1<<o,l=i[o];l===-1?(!(s&e)||s&n)&&(i[o]=MA(s,t)):l<=t&&(r.expiredLanes|=s),a&=~s}}function s0(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function VS(){var r=fd;return fd<<=1,!(fd&4194240)&&(fd=64),r}function fm(r){for(var t=[],e=0;31>e;e++)t.push(r);return t}function af(r,t,e){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-Ci(t),r[t]=e}function FA(r,t){var e=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<e;){var i=31-Ci(e),a=1<<i;t[i]=0,n[i]=-1,r[i]=-1,e&=~a}}function $y(r,t){var e=r.entangledLanes|=t;for(r=r.entanglements;e;){var n=31-Ci(e),i=1<<n;i&t|r[n]&t&&(r[n]|=t),e&=~i}}var Ut=0;function zS(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var WS,Uy,qS,HS,GS,c0=!1,hd=[],_o=null,wo=null,bo=null,ju=new Map,Iu=new Map,fo=[],BA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b2(r,t){switch(r){case"focusin":case"focusout":_o=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":ju.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(t.pointerId)}}function Ql(r,t,e,n,i,a){return r===null||r.nativeEvent!==a?(r={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=sf(t),t!==null&&Uy(t)),r):(r.eventSystemFlags|=n,t=r.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),r)}function $A(r,t,e,n,i){switch(t){case"focusin":return _o=Ql(_o,r,t,e,n,i),!0;case"dragenter":return wo=Ql(wo,r,t,e,n,i),!0;case"mouseover":return bo=Ql(bo,r,t,e,n,i),!0;case"pointerover":var a=i.pointerId;return ju.set(a,Ql(ju.get(a)||null,r,t,e,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Iu.set(a,Ql(Iu.get(a)||null,r,t,e,n,i)),!0}return!1}function KS(r){var t=vs(r.target);if(t!==null){var e=Is(t);if(e!==null){if(t=e.tag,t===13){if(t=MS(e),t!==null){r.blockedOn=t,GS(r.priority,function(){qS(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){r.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ah(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var e=l0(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(e===null){e=r.nativeEvent;var n=new e.constructor(e.type,e);n0=n,e.target.dispatchEvent(n),n0=null}else return t=sf(e),t!==null&&Uy(t),r.blockedOn=e,!1;t.shift()}return!0}function x2(r,t,e){ah(r)&&e.delete(t)}function UA(){c0=!1,_o!==null&&ah(_o)&&(_o=null),wo!==null&&ah(wo)&&(wo=null),bo!==null&&ah(bo)&&(bo=null),ju.forEach(x2),Iu.forEach(x2)}function Yl(r,t){r.blockedOn===t&&(r.blockedOn=null,c0||(c0=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,UA)))}function Mu(r){function t(i){return Yl(i,r)}if(0<hd.length){Yl(hd[0],r);for(var e=1;e<hd.length;e++){var n=hd[e];n.blockedOn===r&&(n.blockedOn=null)}}for(_o!==null&&Yl(_o,r),wo!==null&&Yl(wo,r),bo!==null&&Yl(bo,r),ju.forEach(t),Iu.forEach(t),e=0;e<fo.length;e++)n=fo[e],n.blockedOn===r&&(n.blockedOn=null);for(;0<fo.length&&(e=fo[0],e.blockedOn===null);)KS(e),e.blockedOn===null&&fo.shift()}var Ic=Ma.ReactCurrentBatchConfig,Fh=!0;function VA(r,t,e,n){var i=Ut,a=Ic.transition;Ic.transition=null;try{Ut=1,Vy(r,t,e,n)}finally{Ut=i,Ic.transition=a}}function zA(r,t,e,n){var i=Ut,a=Ic.transition;Ic.transition=null;try{Ut=4,Vy(r,t,e,n)}finally{Ut=i,Ic.transition=a}}function Vy(r,t,e,n){if(Fh){var i=l0(r,t,e,n);if(i===null)bm(r,t,n,Bh,e),b2(r,n);else if($A(i,r,t,e,n))n.stopPropagation();else if(b2(r,n),t&4&&-1<BA.indexOf(r)){for(;i!==null;){var a=sf(i);if(a!==null&&WS(a),a=l0(r,t,e,n),a===null&&bm(r,t,n,Bh,e),a===i)break;i=a}i!==null&&n.stopPropagation()}else bm(r,t,n,null,e)}}var Bh=null;function l0(r,t,e,n){if(Bh=null,r=Fy(n),r=vs(r),r!==null)if(t=Is(r),t===null)r=null;else if(e=t.tag,e===13){if(r=MS(t),r!==null)return r;r=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return Bh=r,null}function QS(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AA()){case By:return 1;case $S:return 4;case Mh:case OA:return 16;case US:return 536870912;default:return 16}default:return 16}}var po=null,zy=null,oh=null;function YS(){if(oh)return oh;var r,t=zy,e=t.length,n,i="value"in po?po.value:po.textContent,a=i.length;for(r=0;r<e&&t[r]===i[r];r++);var o=e-r;for(n=1;n<=o&&t[e-n]===i[a-n];n++);return oh=i.slice(r,1<n?1-n:void 0)}function sh(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function pd(){return!0}function S2(){return!1}function Qn(r){function t(e,n,i,a,o){this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in r)r.hasOwnProperty(s)&&(e=r[s],this[s]=e?e(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?pd:S2,this.isPropagationStopped=S2,this}return sr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),t}var il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=Qn(il),of=sr({},il,{view:0,detail:0}),WA=Qn(of),dm,hm,Jl,_p=sr({},of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qy,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Jl&&(Jl&&r.type==="mousemove"?(dm=r.screenX-Jl.screenX,hm=r.screenY-Jl.screenY):hm=dm=0,Jl=r),dm)},movementY:function(r){return"movementY"in r?r.movementY:hm}}),k2=Qn(_p),qA=sr({},_p,{dataTransfer:0}),HA=Qn(qA),GA=sr({},of,{relatedTarget:0}),pm=Qn(GA),KA=sr({},il,{animationName:0,elapsedTime:0,pseudoElement:0}),QA=Qn(KA),YA=sr({},il,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),JA=Qn(YA),XA=sr({},il,{data:0}),P2=Qn(XA),ZA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rO(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=tO[r])?!!t[r]:!1}function qy(){return rO}var nO=sr({},of,{key:function(r){if(r.key){var t=ZA[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=sh(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?eO[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qy,charCode:function(r){return r.type==="keypress"?sh(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?sh(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),iO=Qn(nO),aO=sr({},_p,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T2=Qn(aO),oO=sr({},of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qy}),sO=Qn(oO),cO=sr({},il,{propertyName:0,elapsedTime:0,pseudoElement:0}),lO=Qn(cO),uO=sr({},_p,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),fO=Qn(uO),dO=[9,13,27,32],Hy=Na&&"CompositionEvent"in window,wu=null;Na&&"documentMode"in document&&(wu=document.documentMode);var hO=Na&&"TextEvent"in window&&!wu,JS=Na&&(!Hy||wu&&8<wu&&11>=wu),E2=" ",C2=!1;function XS(r,t){switch(r){case"keyup":return dO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZS(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var wc=!1;function pO(r,t){switch(r){case"compositionend":return ZS(t);case"keypress":return t.which!==32?null:(C2=!0,E2);case"textInput":return r=t.data,r===E2&&C2?null:r;default:return null}}function vO(r,t){if(wc)return r==="compositionend"||!Hy&&XS(r,t)?(r=YS(),oh=zy=po=null,wc=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return JS&&t.locale!=="ko"?null:t.data;default:return null}}var mO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L2(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!mO[r.type]:t==="textarea"}function ek(r,t,e,n){OS(n),t=$h(t,"onChange"),0<t.length&&(e=new Wy("onChange","change",null,e,n),r.push({event:e,listeners:t}))}var bu=null,Du=null;function gO(r){fk(r,0)}function wp(r){var t=Sc(r);if(kS(t))return r}function yO(r,t){if(r==="change")return t}var tk=!1;if(Na){var vm;if(Na){var mm="oninput"in document;if(!mm){var A2=document.createElement("div");A2.setAttribute("oninput","return;"),mm=typeof A2.oninput=="function"}vm=mm}else vm=!1;tk=vm&&(!document.documentMode||9<document.documentMode)}function O2(){bu&&(bu.detachEvent("onpropertychange",rk),Du=bu=null)}function rk(r){if(r.propertyName==="value"&&wp(Du)){var t=[];ek(t,Du,r,Fy(r)),IS(gO,t)}}function _O(r,t,e){r==="focusin"?(O2(),bu=t,Du=e,bu.attachEvent("onpropertychange",rk)):r==="focusout"&&O2()}function wO(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return wp(Du)}function bO(r,t){if(r==="click")return wp(t)}function xO(r,t){if(r==="input"||r==="change")return wp(t)}function SO(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var Ai=typeof Object.is=="function"?Object.is:SO;function Fu(r,t){if(Ai(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var e=Object.keys(r),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var i=e[n];if(!qg.call(t,i)||!Ai(r[i],t[i]))return!1}return!0}function N2(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function R2(r,t){var e=N2(r);r=0;for(var n;e;){if(e.nodeType===3){if(n=r+e.textContent.length,r<=t&&n>=t)return{node:e,offset:t-r};r=n}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=N2(e)}}function nk(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?nk(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function ik(){for(var r=window,t=Rh();t instanceof r.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)r=t.contentWindow;else break;t=Rh(r.document)}return t}function Gy(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function kO(r){var t=ik(),e=r.focusedElem,n=r.selectionRange;if(t!==e&&e&&e.ownerDocument&&nk(e.ownerDocument.documentElement,e)){if(n!==null&&Gy(e)){if(t=n.start,r=n.end,r===void 0&&(r=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(r,e.value.length);else if(r=(t=e.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var i=e.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!r.extend&&a>n&&(i=n,n=a,a=i),i=R2(e,a);var o=R2(e,n);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),r.removeAllRanges(),a>n?(r.addRange(t),r.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),r.addRange(t)))}}for(t=[],r=e;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)r=t[e],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var PO=Na&&"documentMode"in document&&11>=document.documentMode,bc=null,u0=null,xu=null,f0=!1;function j2(r,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;f0||bc==null||bc!==Rh(n)||(n=bc,"selectionStart"in n&&Gy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),xu&&Fu(xu,n)||(xu=n,n=$h(u0,"onSelect"),0<n.length&&(t=new Wy("onSelect","select",null,t,e),r.push({event:t,listeners:n}),t.target=bc)))}function vd(r,t){var e={};return e[r.toLowerCase()]=t.toLowerCase(),e["Webkit"+r]="webkit"+t,e["Moz"+r]="moz"+t,e}var xc={animationend:vd("Animation","AnimationEnd"),animationiteration:vd("Animation","AnimationIteration"),animationstart:vd("Animation","AnimationStart"),transitionend:vd("Transition","TransitionEnd")},gm={},ak={};Na&&(ak=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function bp(r){if(gm[r])return gm[r];if(!xc[r])return r;var t=xc[r],e;for(e in t)if(t.hasOwnProperty(e)&&e in ak)return gm[r]=t[e];return r}var ok=bp("animationend"),sk=bp("animationiteration"),ck=bp("animationstart"),lk=bp("transitionend"),uk=new Map,I2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(r,t){uk.set(r,t),js(t,[r])}for(var ym=0;ym<I2.length;ym++){var _m=I2[ym],TO=_m.toLowerCase(),EO=_m[0].toUpperCase()+_m.slice(1);Oo(TO,"on"+EO)}Oo(ok,"onAnimationEnd");Oo(sk,"onAnimationIteration");Oo(ck,"onAnimationStart");Oo("dblclick","onDoubleClick");Oo("focusin","onFocus");Oo("focusout","onBlur");Oo(lk,"onTransitionEnd");Wc("onMouseEnter",["mouseout","mouseover"]);Wc("onMouseLeave",["mouseout","mouseover"]);Wc("onPointerEnter",["pointerout","pointerover"]);Wc("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CO=new Set("cancel close invalid load scroll toggle".split(" ").concat(hu));function M2(r,t,e){var n=r.type||"unknown-event";r.currentTarget=e,TA(n,t,void 0,r),r.currentTarget=null}function fk(r,t){t=(t&4)!==0;for(var e=0;e<r.length;e++){var n=r[e],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;M2(i,s,c),a=l}else for(o=0;o<n.length;o++){if(s=n[o],l=s.instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;M2(i,s,c),a=l}}}if(Ih)throw r=o0,Ih=!1,o0=null,r}function Xt(r,t){var e=t[m0];e===void 0&&(e=t[m0]=new Set);var n=r+"__bubble";e.has(n)||(dk(t,r,2,!1),e.add(n))}function wm(r,t,e){var n=0;t&&(n|=4),dk(e,r,n,t)}var md="_reactListening"+Math.random().toString(36).slice(2);function Bu(r){if(!r[md]){r[md]=!0,_S.forEach(function(e){e!=="selectionchange"&&(CO.has(e)||wm(e,!1,r),wm(e,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[md]||(t[md]=!0,wm("selectionchange",!1,t))}}function dk(r,t,e,n){switch(QS(t)){case 1:var i=VA;break;case 4:i=zA;break;default:i=Vy}e=i.bind(null,t,e,r),i=void 0,!a0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(t,e,{capture:!0,passive:i}):r.addEventListener(t,e,!0):i!==void 0?r.addEventListener(t,e,{passive:i}):r.addEventListener(t,e,!1)}function bm(r,t,e,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=vs(s),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}s=s.parentNode}}n=n.return}IS(function(){var c=a,u=Fy(e),d=[];e:{var v=uk.get(r);if(v!==void 0){var p=Wy,y=r;switch(r){case"keypress":if(sh(e)===0)break e;case"keydown":case"keyup":p=iO;break;case"focusin":y="focus",p=pm;break;case"focusout":y="blur",p=pm;break;case"beforeblur":case"afterblur":p=pm;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=k2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=HA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=sO;break;case ok:case sk:case ck:p=QA;break;case lk:p=lO;break;case"scroll":p=WA;break;case"wheel":p=fO;break;case"copy":case"cut":case"paste":p=JA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=T2}var b=(t&4)!==0,S=!b&&r==="scroll",_=b?v!==null?v+"Capture":null:v;b=[];for(var x=c,k;x!==null;){k=x;var T=k.stateNode;if(k.tag===5&&T!==null&&(k=T,_!==null&&(T=Ru(x,_),T!=null&&b.push($u(x,T,k)))),S)break;x=x.return}0<b.length&&(v=new p(v,y,null,e,u),d.push({event:v,listeners:b}))}}if(!(t&7)){e:{if(v=r==="mouseover"||r==="pointerover",p=r==="mouseout"||r==="pointerout",v&&e!==n0&&(y=e.relatedTarget||e.fromElement)&&(vs(y)||y[Ra]))break e;if((p||v)&&(v=u.window===u?u:(v=u.ownerDocument)?v.defaultView||v.parentWindow:window,p?(y=e.relatedTarget||e.toElement,p=c,y=y?vs(y):null,y!==null&&(S=Is(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(b=k2,T="onMouseLeave",_="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(b=T2,T="onPointerLeave",_="onPointerEnter",x="pointer"),S=p==null?v:Sc(p),k=y==null?v:Sc(y),v=new b(T,x+"leave",p,e,u),v.target=S,v.relatedTarget=k,T=null,vs(u)===c&&(b=new b(_,x+"enter",y,e,u),b.target=k,b.relatedTarget=S,T=b),S=T,p&&y)t:{for(b=p,_=y,x=0,k=b;k;k=rc(k))x++;for(k=0,T=_;T;T=rc(T))k++;for(;0<x-k;)b=rc(b),x--;for(;0<k-x;)_=rc(_),k--;for(;x--;){if(b===_||_!==null&&b===_.alternate)break t;b=rc(b),_=rc(_)}b=null}else b=null;p!==null&&D2(d,v,p,b,!1),y!==null&&S!==null&&D2(d,S,y,b,!0)}}e:{if(v=c?Sc(c):window,p=v.nodeName&&v.nodeName.toLowerCase(),p==="select"||p==="input"&&v.type==="file")var R=yO;else if(L2(v))if(tk)R=xO;else{R=wO;var B=_O}else(p=v.nodeName)&&p.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(R=bO);if(R&&(R=R(r,c))){ek(d,R,e,u);break e}B&&B(r,v,c),r==="focusout"&&(B=v._wrapperState)&&B.controlled&&v.type==="number"&&Xg(v,"number",v.value)}switch(B=c?Sc(c):window,r){case"focusin":(L2(B)||B.contentEditable==="true")&&(bc=B,u0=c,xu=null);break;case"focusout":xu=u0=bc=null;break;case"mousedown":f0=!0;break;case"contextmenu":case"mouseup":case"dragend":f0=!1,j2(d,e,u);break;case"selectionchange":if(PO)break;case"keydown":case"keyup":j2(d,e,u)}var j;if(Hy)e:{switch(r){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else wc?XS(r,e)&&(F="onCompositionEnd"):r==="keydown"&&e.keyCode===229&&(F="onCompositionStart");F&&(JS&&e.locale!=="ko"&&(wc||F!=="onCompositionStart"?F==="onCompositionEnd"&&wc&&(j=YS()):(po=u,zy="value"in po?po.value:po.textContent,wc=!0)),B=$h(c,F),0<B.length&&(F=new P2(F,r,null,e,u),d.push({event:F,listeners:B}),j?F.data=j:(j=ZS(e),j!==null&&(F.data=j)))),(j=hO?pO(r,e):vO(r,e))&&(c=$h(c,"onBeforeInput"),0<c.length&&(u=new P2("onBeforeInput","beforeinput",null,e,u),d.push({event:u,listeners:c}),u.data=j))}fk(d,t)})}function $u(r,t,e){return{instance:r,listener:t,currentTarget:e}}function $h(r,t){for(var e=t+"Capture",n=[];r!==null;){var i=r,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ru(r,e),a!=null&&n.unshift($u(r,a,i)),a=Ru(r,t),a!=null&&n.push($u(r,a,i))),r=r.return}return n}function rc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function D2(r,t,e,n,i){for(var a=t._reactName,o=[];e!==null&&e!==n;){var s=e,l=s.alternate,c=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&c!==null&&(s=c,i?(l=Ru(e,a),l!=null&&o.unshift($u(e,l,s))):i||(l=Ru(e,a),l!=null&&o.push($u(e,l,s)))),e=e.return}o.length!==0&&r.push({event:t,listeners:o})}var LO=/\r\n?/g,AO=/\u0000|\uFFFD/g;function F2(r){return(typeof r=="string"?r:""+r).replace(LO,`
`).replace(AO,"")}function gd(r,t,e){if(t=F2(t),F2(r)!==t&&e)throw Error(Ae(425))}function Uh(){}var d0=null,h0=null;function p0(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var v0=typeof setTimeout=="function"?setTimeout:void 0,OO=typeof clearTimeout=="function"?clearTimeout:void 0,B2=typeof Promise=="function"?Promise:void 0,NO=typeof queueMicrotask=="function"?queueMicrotask:typeof B2<"u"?function(r){return B2.resolve(null).then(r).catch(RO)}:v0;function RO(r){setTimeout(function(){throw r})}function xm(r,t){var e=t,n=0;do{var i=e.nextSibling;if(r.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(n===0){r.removeChild(i),Mu(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=i}while(e);Mu(t)}function xo(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function $2(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return r;t--}else e==="/$"&&t++}r=r.previousSibling}return null}var al=Math.random().toString(36).slice(2),Qi="__reactFiber$"+al,Uu="__reactProps$"+al,Ra="__reactContainer$"+al,m0="__reactEvents$"+al,jO="__reactListeners$"+al,IO="__reactHandles$"+al;function vs(r){var t=r[Qi];if(t)return t;for(var e=r.parentNode;e;){if(t=e[Ra]||e[Qi]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(r=$2(r);r!==null;){if(e=r[Qi])return e;r=$2(r)}return t}r=e,e=r.parentNode}return null}function sf(r){return r=r[Qi]||r[Ra],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Sc(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Ae(33))}function xp(r){return r[Uu]||null}var g0=[],kc=-1;function No(r){return{current:r}}function er(r){0>kc||(r.current=g0[kc],g0[kc]=null,kc--)}function Yt(r,t){kc++,g0[kc]=r.current,r.current=t}var Lo={},ln=No(Lo),Tn=No(!1),Ps=Lo;function qc(r,t){var e=r.type.contextTypes;if(!e)return Lo;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in e)i[a]=t[a];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=i),i}function En(r){return r=r.childContextTypes,r!=null}function Vh(){er(Tn),er(ln)}function U2(r,t,e){if(ln.current!==Lo)throw Error(Ae(168));Yt(ln,t),Yt(Tn,e)}function hk(r,t,e){var n=r.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Ae(108,_A(r)||"Unknown",i));return sr({},e,n)}function zh(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Lo,Ps=ln.current,Yt(ln,r),Yt(Tn,Tn.current),!0}function V2(r,t,e){var n=r.stateNode;if(!n)throw Error(Ae(169));e?(r=hk(r,t,Ps),n.__reactInternalMemoizedMergedChildContext=r,er(Tn),er(ln),Yt(ln,r)):er(Tn),Yt(Tn,e)}var Ta=null,Sp=!1,Sm=!1;function pk(r){Ta===null?Ta=[r]:Ta.push(r)}function MO(r){Sp=!0,pk(r)}function Ro(){if(!Sm&&Ta!==null){Sm=!0;var r=0,t=Ut;try{var e=Ta;for(Ut=1;r<e.length;r++){var n=e[r];do n=n(!0);while(n!==null)}Ta=null,Sp=!1}catch(i){throw Ta!==null&&(Ta=Ta.slice(r+1)),BS(By,Ro),i}finally{Ut=t,Sm=!1}}return null}var Pc=[],Tc=0,Wh=null,qh=0,ai=[],oi=0,Ts=null,Ca=1,La="";function ls(r,t){Pc[Tc++]=qh,Pc[Tc++]=Wh,Wh=r,qh=t}function vk(r,t,e){ai[oi++]=Ca,ai[oi++]=La,ai[oi++]=Ts,Ts=r;var n=Ca;r=La;var i=32-Ci(n)-1;n&=~(1<<i),e+=1;var a=32-Ci(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ca=1<<32-Ci(t)+i|e<<i|n,La=a+r}else Ca=1<<a|e<<i|n,La=r}function Ky(r){r.return!==null&&(ls(r,1),vk(r,1,0))}function Qy(r){for(;r===Wh;)Wh=Pc[--Tc],Pc[Tc]=null,qh=Pc[--Tc],Pc[Tc]=null;for(;r===Ts;)Ts=ai[--oi],ai[oi]=null,La=ai[--oi],ai[oi]=null,Ca=ai[--oi],ai[oi]=null}var Hn=null,Wn=null,rr=!1,Ei=null;function mk(r,t){var e=ci(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=r,t=r.deletions,t===null?(r.deletions=[e],r.flags|=16):t.push(e)}function z2(r,t){switch(r.tag){case 5:var e=r.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Hn=r,Wn=xo(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Hn=r,Wn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Ts!==null?{id:Ca,overflow:La}:null,r.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=ci(18,null,null,0),e.stateNode=t,e.return=r,r.child=e,Hn=r,Wn=null,!0):!1;default:return!1}}function y0(r){return(r.mode&1)!==0&&(r.flags&128)===0}function _0(r){if(rr){var t=Wn;if(t){var e=t;if(!z2(r,t)){if(y0(r))throw Error(Ae(418));t=xo(e.nextSibling);var n=Hn;t&&z2(r,t)?mk(n,e):(r.flags=r.flags&-4097|2,rr=!1,Hn=r)}}else{if(y0(r))throw Error(Ae(418));r.flags=r.flags&-4097|2,rr=!1,Hn=r}}}function W2(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Hn=r}function yd(r){if(r!==Hn)return!1;if(!rr)return W2(r),rr=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!p0(r.type,r.memoizedProps)),t&&(t=Wn)){if(y0(r))throw gk(),Error(Ae(418));for(;t;)mk(r,t),t=xo(t.nextSibling)}if(W2(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ae(317));e:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="/$"){if(t===0){Wn=xo(r.nextSibling);break e}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}r=r.nextSibling}Wn=null}}else Wn=Hn?xo(r.stateNode.nextSibling):null;return!0}function gk(){for(var r=Wn;r;)r=xo(r.nextSibling)}function Hc(){Wn=Hn=null,rr=!1}function Yy(r){Ei===null?Ei=[r]:Ei.push(r)}var DO=Ma.ReactCurrentBatchConfig;function Xl(r,t,e){if(r=e.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(Ae(309));var n=e.stateNode}if(!n)throw Error(Ae(147,r));var i=n,a=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},t._stringRef=a,t)}if(typeof r!="string")throw Error(Ae(284));if(!e._owner)throw Error(Ae(290,r))}return r}function _d(r,t){throw r=Object.prototype.toString.call(t),Error(Ae(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function q2(r){var t=r._init;return t(r._payload)}function yk(r){function t(_,x){if(r){var k=_.deletions;k===null?(_.deletions=[x],_.flags|=16):k.push(x)}}function e(_,x){if(!r)return null;for(;x!==null;)t(_,x),x=x.sibling;return null}function n(_,x){for(_=new Map;x!==null;)x.key!==null?_.set(x.key,x):_.set(x.index,x),x=x.sibling;return _}function i(_,x){return _=To(_,x),_.index=0,_.sibling=null,_}function a(_,x,k){return _.index=k,r?(k=_.alternate,k!==null?(k=k.index,k<x?(_.flags|=2,x):k):(_.flags|=2,x)):(_.flags|=1048576,x)}function o(_){return r&&_.alternate===null&&(_.flags|=2),_}function s(_,x,k,T){return x===null||x.tag!==6?(x=Am(k,_.mode,T),x.return=_,x):(x=i(x,k),x.return=_,x)}function l(_,x,k,T){var R=k.type;return R===_c?u(_,x,k.props.children,T,k.key):x!==null&&(x.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===lo&&q2(R)===x.type)?(T=i(x,k.props),T.ref=Xl(_,x,k),T.return=_,T):(T=ph(k.type,k.key,k.props,null,_.mode,T),T.ref=Xl(_,x,k),T.return=_,T)}function c(_,x,k,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==k.containerInfo||x.stateNode.implementation!==k.implementation?(x=Om(k,_.mode,T),x.return=_,x):(x=i(x,k.children||[]),x.return=_,x)}function u(_,x,k,T,R){return x===null||x.tag!==7?(x=ws(k,_.mode,T,R),x.return=_,x):(x=i(x,k),x.return=_,x)}function d(_,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Am(""+x,_.mode,k),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cd:return k=ph(x.type,x.key,x.props,null,_.mode,k),k.ref=Xl(_,null,x),k.return=_,k;case yc:return x=Om(x,_.mode,k),x.return=_,x;case lo:var T=x._init;return d(_,T(x._payload),k)}if(fu(x)||Gl(x))return x=ws(x,_.mode,k,null),x.return=_,x;_d(_,x)}return null}function v(_,x,k,T){var R=x!==null?x.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return R!==null?null:s(_,x,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case cd:return k.key===R?l(_,x,k,T):null;case yc:return k.key===R?c(_,x,k,T):null;case lo:return R=k._init,v(_,x,R(k._payload),T)}if(fu(k)||Gl(k))return R!==null?null:u(_,x,k,T,null);_d(_,k)}return null}function p(_,x,k,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return _=_.get(k)||null,s(x,_,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case cd:return _=_.get(T.key===null?k:T.key)||null,l(x,_,T,R);case yc:return _=_.get(T.key===null?k:T.key)||null,c(x,_,T,R);case lo:var B=T._init;return p(_,x,k,B(T._payload),R)}if(fu(T)||Gl(T))return _=_.get(k)||null,u(x,_,T,R,null);_d(x,T)}return null}function y(_,x,k,T){for(var R=null,B=null,j=x,F=x=0,M=null;j!==null&&F<k.length;F++){j.index>F?(M=j,j=null):M=j.sibling;var q=v(_,j,k[F],T);if(q===null){j===null&&(j=M);break}r&&j&&q.alternate===null&&t(_,j),x=a(q,x,F),B===null?R=q:B.sibling=q,B=q,j=M}if(F===k.length)return e(_,j),rr&&ls(_,F),R;if(j===null){for(;F<k.length;F++)j=d(_,k[F],T),j!==null&&(x=a(j,x,F),B===null?R=j:B.sibling=j,B=j);return rr&&ls(_,F),R}for(j=n(_,j);F<k.length;F++)M=p(j,_,F,k[F],T),M!==null&&(r&&M.alternate!==null&&j.delete(M.key===null?F:M.key),x=a(M,x,F),B===null?R=M:B.sibling=M,B=M);return r&&j.forEach(function(O){return t(_,O)}),rr&&ls(_,F),R}function b(_,x,k,T){var R=Gl(k);if(typeof R!="function")throw Error(Ae(150));if(k=R.call(k),k==null)throw Error(Ae(151));for(var B=R=null,j=x,F=x=0,M=null,q=k.next();j!==null&&!q.done;F++,q=k.next()){j.index>F?(M=j,j=null):M=j.sibling;var O=v(_,j,q.value,T);if(O===null){j===null&&(j=M);break}r&&j&&O.alternate===null&&t(_,j),x=a(O,x,F),B===null?R=O:B.sibling=O,B=O,j=M}if(q.done)return e(_,j),rr&&ls(_,F),R;if(j===null){for(;!q.done;F++,q=k.next())q=d(_,q.value,T),q!==null&&(x=a(q,x,F),B===null?R=q:B.sibling=q,B=q);return rr&&ls(_,F),R}for(j=n(_,j);!q.done;F++,q=k.next())q=p(j,_,F,q.value,T),q!==null&&(r&&q.alternate!==null&&j.delete(q.key===null?F:q.key),x=a(q,x,F),B===null?R=q:B.sibling=q,B=q);return r&&j.forEach(function(L){return t(_,L)}),rr&&ls(_,F),R}function S(_,x,k,T){if(typeof k=="object"&&k!==null&&k.type===_c&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case cd:e:{for(var R=k.key,B=x;B!==null;){if(B.key===R){if(R=k.type,R===_c){if(B.tag===7){e(_,B.sibling),x=i(B,k.props.children),x.return=_,_=x;break e}}else if(B.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===lo&&q2(R)===B.type){e(_,B.sibling),x=i(B,k.props),x.ref=Xl(_,B,k),x.return=_,_=x;break e}e(_,B);break}else t(_,B);B=B.sibling}k.type===_c?(x=ws(k.props.children,_.mode,T,k.key),x.return=_,_=x):(T=ph(k.type,k.key,k.props,null,_.mode,T),T.ref=Xl(_,x,k),T.return=_,_=T)}return o(_);case yc:e:{for(B=k.key;x!==null;){if(x.key===B)if(x.tag===4&&x.stateNode.containerInfo===k.containerInfo&&x.stateNode.implementation===k.implementation){e(_,x.sibling),x=i(x,k.children||[]),x.return=_,_=x;break e}else{e(_,x);break}else t(_,x);x=x.sibling}x=Om(k,_.mode,T),x.return=_,_=x}return o(_);case lo:return B=k._init,S(_,x,B(k._payload),T)}if(fu(k))return y(_,x,k,T);if(Gl(k))return b(_,x,k,T);_d(_,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,x!==null&&x.tag===6?(e(_,x.sibling),x=i(x,k),x.return=_,_=x):(e(_,x),x=Am(k,_.mode,T),x.return=_,_=x),o(_)):e(_,x)}return S}var Gc=yk(!0),_k=yk(!1),Hh=No(null),Gh=null,Ec=null,Jy=null;function Xy(){Jy=Ec=Gh=null}function Zy(r){var t=Hh.current;er(Hh),r._currentValue=t}function w0(r,t,e){for(;r!==null;){var n=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),r===e)break;r=r.return}}function Mc(r,t){Gh=r,Jy=Ec=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(Pn=!0),r.firstContext=null)}function fi(r){var t=r._currentValue;if(Jy!==r)if(r={context:r,memoizedValue:t,next:null},Ec===null){if(Gh===null)throw Error(Ae(308));Ec=r,Gh.dependencies={lanes:0,firstContext:r}}else Ec=Ec.next=r;return t}var ms=null;function e1(r){ms===null?ms=[r]:ms.push(r)}function wk(r,t,e,n){var i=t.interleaved;return i===null?(e.next=e,e1(t)):(e.next=i.next,i.next=e),t.interleaved=e,ja(r,n)}function ja(r,t){r.lanes|=t;var e=r.alternate;for(e!==null&&(e.lanes|=t),e=r,r=r.return;r!==null;)r.childLanes|=t,e=r.alternate,e!==null&&(e.childLanes|=t),e=r,r=r.return;return e.tag===3?e.stateNode:null}var uo=!1;function t1(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bk(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Oa(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function So(r,t,e){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Lt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,ja(r,e)}return i=n.interleaved,i===null?(t.next=t,e1(n)):(t.next=i.next,i.next=t),n.interleaved=t,ja(r,e)}function ch(r,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var n=t.lanes;n&=r.pendingLanes,e|=n,t.lanes=e,$y(r,e)}}function H2(r,t){var e=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var i=null,a=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};a===null?i=a=o:a=a.next=o,e=e.next}while(e!==null);a===null?i=a=t:a=a.next=t}else i=a=t;e={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},r.updateQueue=e;return}r=e.lastBaseUpdate,r===null?e.firstBaseUpdate=t:r.next=t,e.lastBaseUpdate=t}function Kh(r,t,e,n){var i=r.updateQueue;uo=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,o===null?a=c:o.next=c,o=l;var u=r.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;o=0,u=c=l=null,s=a;do{var v=s.lane,p=s.eventTime;if((n&v)===v){u!==null&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=r,b=s;switch(v=t,p=e,b.tag){case 1:if(y=b.payload,typeof y=="function"){d=y.call(p,d,v);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,v=typeof y=="function"?y.call(p,d,v):y,v==null)break e;d=sr({},d,v);break e;case 2:uo=!0}}s.callback!==null&&s.lane!==0&&(r.flags|=64,v=i.effects,v===null?i.effects=[s]:v.push(s))}else p={eventTime:p,lane:v,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=v;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;v=s,s=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Cs|=o,r.lanes=o,r.memoizedState=d}}function G2(r,t,e){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var n=r[t],i=n.callback;if(i!==null){if(n.callback=null,n=e,typeof i!="function")throw Error(Ae(191,i));i.call(n)}}}var cf={},ea=No(cf),Vu=No(cf),zu=No(cf);function gs(r){if(r===cf)throw Error(Ae(174));return r}function r1(r,t){switch(Yt(zu,t),Yt(Vu,r),Yt(ea,cf),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:e0(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=e0(t,r)}er(ea),Yt(ea,t)}function Kc(){er(ea),er(Vu),er(zu)}function xk(r){gs(zu.current);var t=gs(ea.current),e=e0(t,r.type);t!==e&&(Yt(Vu,r),Yt(ea,e))}function n1(r){Vu.current===r&&(er(ea),er(Vu))}var ir=No(0);function Qh(r){for(var t=r;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var km=[];function i1(){for(var r=0;r<km.length;r++)km[r]._workInProgressVersionPrimary=null;km.length=0}var lh=Ma.ReactCurrentDispatcher,Pm=Ma.ReactCurrentBatchConfig,Es=0,or=null,Dr=null,$r=null,Yh=!1,Su=!1,Wu=0,FO=0;function en(){throw Error(Ae(321))}function a1(r,t){if(t===null)return!1;for(var e=0;e<t.length&&e<r.length;e++)if(!Ai(r[e],t[e]))return!1;return!0}function o1(r,t,e,n,i,a){if(Es=a,or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lh.current=r===null||r.memoizedState===null?VO:zO,r=e(n,i),Su){a=0;do{if(Su=!1,Wu=0,25<=a)throw Error(Ae(301));a+=1,$r=Dr=null,t.updateQueue=null,lh.current=WO,r=e(n,i)}while(Su)}if(lh.current=Jh,t=Dr!==null&&Dr.next!==null,Es=0,$r=Dr=or=null,Yh=!1,t)throw Error(Ae(300));return r}function s1(){var r=Wu!==0;return Wu=0,r}function Gi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?or.memoizedState=$r=r:$r=$r.next=r,$r}function di(){if(Dr===null){var r=or.alternate;r=r!==null?r.memoizedState:null}else r=Dr.next;var t=$r===null?or.memoizedState:$r.next;if(t!==null)$r=t,Dr=r;else{if(r===null)throw Error(Ae(310));Dr=r,r={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},$r===null?or.memoizedState=$r=r:$r=$r.next=r}return $r}function qu(r,t){return typeof t=="function"?t(r):t}function Tm(r){var t=di(),e=t.queue;if(e===null)throw Error(Ae(311));e.lastRenderedReducer=r;var n=Dr,i=n.baseQueue,a=e.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,e.pending=null}if(i!==null){a=i.next,n=n.baseState;var s=o=null,l=null,c=a;do{var u=c.lane;if((Es&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:r(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,o=n):l=l.next=d,or.lanes|=u,Cs|=u}c=c.next}while(c!==null&&c!==a);l===null?o=n:l.next=s,Ai(n,t.memoizedState)||(Pn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,e.lastRenderedState=n}if(r=e.interleaved,r!==null){i=r;do a=i.lane,or.lanes|=a,Cs|=a,i=i.next;while(i!==r)}else i===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function Em(r){var t=di(),e=t.queue;if(e===null)throw Error(Ae(311));e.lastRenderedReducer=r;var n=e.dispatch,i=e.pending,a=t.memoizedState;if(i!==null){e.pending=null;var o=i=i.next;do a=r(a,o.action),o=o.next;while(o!==i);Ai(a,t.memoizedState)||(Pn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),e.lastRenderedState=a}return[a,n]}function Sk(){}function kk(r,t){var e=or,n=di(),i=t(),a=!Ai(n.memoizedState,i);if(a&&(n.memoizedState=i,Pn=!0),n=n.queue,c1(Ek.bind(null,e,n,r),[r]),n.getSnapshot!==t||a||$r!==null&&$r.memoizedState.tag&1){if(e.flags|=2048,Hu(9,Tk.bind(null,e,n,i,t),void 0,null),Vr===null)throw Error(Ae(349));Es&30||Pk(e,t,i)}return i}function Pk(r,t,e){r.flags|=16384,r={getSnapshot:t,value:e},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.stores=[r]):(e=t.stores,e===null?t.stores=[r]:e.push(r))}function Tk(r,t,e,n){t.value=e,t.getSnapshot=n,Ck(t)&&Lk(r)}function Ek(r,t,e){return e(function(){Ck(t)&&Lk(r)})}function Ck(r){var t=r.getSnapshot;r=r.value;try{var e=t();return!Ai(r,e)}catch{return!0}}function Lk(r){var t=ja(r,1);t!==null&&Li(t,r,1,-1)}function K2(r){var t=Gi();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:r},t.queue=r,r=r.dispatch=UO.bind(null,or,r),[t.memoizedState,r]}function Hu(r,t,e,n){return r={tag:r,create:t,destroy:e,deps:n,next:null},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.lastEffect=r.next=r):(e=t.lastEffect,e===null?t.lastEffect=r.next=r:(n=e.next,e.next=r,r.next=n,t.lastEffect=r)),r}function Ak(){return di().memoizedState}function uh(r,t,e,n){var i=Gi();or.flags|=r,i.memoizedState=Hu(1|t,e,void 0,n===void 0?null:n)}function kp(r,t,e,n){var i=di();n=n===void 0?null:n;var a=void 0;if(Dr!==null){var o=Dr.memoizedState;if(a=o.destroy,n!==null&&a1(n,o.deps)){i.memoizedState=Hu(t,e,a,n);return}}or.flags|=r,i.memoizedState=Hu(1|t,e,a,n)}function Q2(r,t){return uh(8390656,8,r,t)}function c1(r,t){return kp(2048,8,r,t)}function Ok(r,t){return kp(4,2,r,t)}function Nk(r,t){return kp(4,4,r,t)}function Rk(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function jk(r,t,e){return e=e!=null?e.concat([r]):null,kp(4,4,Rk.bind(null,t,r),e)}function l1(){}function Ik(r,t){var e=di();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&a1(t,n[1])?n[0]:(e.memoizedState=[r,t],r)}function Mk(r,t){var e=di();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&a1(t,n[1])?n[0]:(r=r(),e.memoizedState=[r,t],r)}function Dk(r,t,e){return Es&21?(Ai(e,t)||(e=VS(),or.lanes|=e,Cs|=e,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,Pn=!0),r.memoizedState=e)}function BO(r,t){var e=Ut;Ut=e!==0&&4>e?e:4,r(!0);var n=Pm.transition;Pm.transition={};try{r(!1),t()}finally{Ut=e,Pm.transition=n}}function Fk(){return di().memoizedState}function $O(r,t,e){var n=Po(r);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},Bk(r))$k(t,e);else if(e=wk(r,t,e,n),e!==null){var i=vn();Li(e,r,n,i),Uk(e,t,n)}}function UO(r,t,e){var n=Po(r),i={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(Bk(r))$k(t,i);else{var a=r.alternate;if(r.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,e);if(i.hasEagerState=!0,i.eagerState=s,Ai(s,o)){var l=t.interleaved;l===null?(i.next=i,e1(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}e=wk(r,t,i,n),e!==null&&(i=vn(),Li(e,r,n,i),Uk(e,t,n))}}function Bk(r){var t=r.alternate;return r===or||t!==null&&t===or}function $k(r,t){Su=Yh=!0;var e=r.pending;e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t}function Uk(r,t,e){if(e&4194240){var n=t.lanes;n&=r.pendingLanes,e|=n,t.lanes=e,$y(r,e)}}var Jh={readContext:fi,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},VO={readContext:fi,useCallback:function(r,t){return Gi().memoizedState=[r,t===void 0?null:t],r},useContext:fi,useEffect:Q2,useImperativeHandle:function(r,t,e){return e=e!=null?e.concat([r]):null,uh(4194308,4,Rk.bind(null,t,r),e)},useLayoutEffect:function(r,t){return uh(4194308,4,r,t)},useInsertionEffect:function(r,t){return uh(4,2,r,t)},useMemo:function(r,t){var e=Gi();return t=t===void 0?null:t,r=r(),e.memoizedState=[r,t],r},useReducer:function(r,t,e){var n=Gi();return t=e!==void 0?e(t):t,n.memoizedState=n.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},n.queue=r,r=r.dispatch=$O.bind(null,or,r),[n.memoizedState,r]},useRef:function(r){var t=Gi();return r={current:r},t.memoizedState=r},useState:K2,useDebugValue:l1,useDeferredValue:function(r){return Gi().memoizedState=r},useTransition:function(){var r=K2(!1),t=r[0];return r=BO.bind(null,r[1]),Gi().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,e){var n=or,i=Gi();if(rr){if(e===void 0)throw Error(Ae(407));e=e()}else{if(e=t(),Vr===null)throw Error(Ae(349));Es&30||Pk(n,t,e)}i.memoizedState=e;var a={value:e,getSnapshot:t};return i.queue=a,Q2(Ek.bind(null,n,a,r),[r]),n.flags|=2048,Hu(9,Tk.bind(null,n,a,e,t),void 0,null),e},useId:function(){var r=Gi(),t=Vr.identifierPrefix;if(rr){var e=La,n=Ca;e=(n&~(1<<32-Ci(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=Wu++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=FO++,t=":"+t+"r"+e.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},zO={readContext:fi,useCallback:Ik,useContext:fi,useEffect:c1,useImperativeHandle:jk,useInsertionEffect:Ok,useLayoutEffect:Nk,useMemo:Mk,useReducer:Tm,useRef:Ak,useState:function(){return Tm(qu)},useDebugValue:l1,useDeferredValue:function(r){var t=di();return Dk(t,Dr.memoizedState,r)},useTransition:function(){var r=Tm(qu)[0],t=di().memoizedState;return[r,t]},useMutableSource:Sk,useSyncExternalStore:kk,useId:Fk,unstable_isNewReconciler:!1},WO={readContext:fi,useCallback:Ik,useContext:fi,useEffect:c1,useImperativeHandle:jk,useInsertionEffect:Ok,useLayoutEffect:Nk,useMemo:Mk,useReducer:Em,useRef:Ak,useState:function(){return Em(qu)},useDebugValue:l1,useDeferredValue:function(r){var t=di();return Dr===null?t.memoizedState=r:Dk(t,Dr.memoizedState,r)},useTransition:function(){var r=Em(qu)[0],t=di().memoizedState;return[r,t]},useMutableSource:Sk,useSyncExternalStore:kk,useId:Fk,unstable_isNewReconciler:!1};function Si(r,t){if(r&&r.defaultProps){t=sr({},t),r=r.defaultProps;for(var e in r)t[e]===void 0&&(t[e]=r[e]);return t}return t}function b0(r,t,e,n){t=r.memoizedState,e=e(n,t),e=e==null?t:sr({},t,e),r.memoizedState=e,r.lanes===0&&(r.updateQueue.baseState=e)}var Pp={isMounted:function(r){return(r=r._reactInternals)?Is(r)===r:!1},enqueueSetState:function(r,t,e){r=r._reactInternals;var n=vn(),i=Po(r),a=Oa(n,i);a.payload=t,e!=null&&(a.callback=e),t=So(r,a,i),t!==null&&(Li(t,r,i,n),ch(t,r,i))},enqueueReplaceState:function(r,t,e){r=r._reactInternals;var n=vn(),i=Po(r),a=Oa(n,i);a.tag=1,a.payload=t,e!=null&&(a.callback=e),t=So(r,a,i),t!==null&&(Li(t,r,i,n),ch(t,r,i))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var e=vn(),n=Po(r),i=Oa(e,n);i.tag=2,t!=null&&(i.callback=t),t=So(r,i,n),t!==null&&(Li(t,r,n,e),ch(t,r,n))}};function Y2(r,t,e,n,i,a,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!Fu(e,n)||!Fu(i,a):!0}function Vk(r,t,e){var n=!1,i=Lo,a=t.contextType;return typeof a=="object"&&a!==null?a=fi(a):(i=En(t)?Ps:ln.current,n=t.contextTypes,a=(n=n!=null)?qc(r,i):Lo),t=new t(e,a),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pp,r.stateNode=t,t._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=a),t}function J2(r,t,e,n){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==r&&Pp.enqueueReplaceState(t,t.state,null)}function x0(r,t,e,n){var i=r.stateNode;i.props=e,i.state=r.memoizedState,i.refs={},t1(r);var a=t.contextType;typeof a=="object"&&a!==null?i.context=fi(a):(a=En(t)?Ps:ln.current,i.context=qc(r,a)),i.state=r.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(b0(r,t,a,e),i.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Pp.enqueueReplaceState(i,i.state,null),Kh(r,e,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function Qc(r,t){try{var e="",n=t;do e+=yA(n),n=n.return;while(n);var i=e}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:r,source:t,stack:i,digest:null}}function Cm(r,t,e){return{value:r,source:null,stack:e??null,digest:t??null}}function S0(r,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var qO=typeof WeakMap=="function"?WeakMap:Map;function zk(r,t,e){e=Oa(-1,e),e.tag=3,e.payload={element:null};var n=t.value;return e.callback=function(){Zh||(Zh=!0,R0=n),S0(r,t)},e}function Wk(r,t,e){e=Oa(-1,e),e.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;e.payload=function(){return n(i)},e.callback=function(){S0(r,t)}}var a=r.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(e.callback=function(){S0(r,t),typeof n!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function X2(r,t,e){var n=r.pingCache;if(n===null){n=r.pingCache=new qO;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(e)||(i.add(e),r=a6.bind(null,r,t,e),t.then(r,r))}function Z2(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function ew(r,t,e,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===t?r.flags|=65536:(r.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Oa(-1,1),t.tag=2,So(e,t,1))),e.lanes|=1),r)}var HO=Ma.ReactCurrentOwner,Pn=!1;function hn(r,t,e,n){t.child=r===null?_k(t,null,e,n):Gc(t,r.child,e,n)}function tw(r,t,e,n,i){e=e.render;var a=t.ref;return Mc(t,i),n=o1(r,t,e,n,a,i),e=s1(),r!==null&&!Pn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Ia(r,t,i)):(rr&&e&&Ky(t),t.flags|=1,hn(r,t,n,i),t.child)}function rw(r,t,e,n,i){if(r===null){var a=e.type;return typeof a=="function"&&!g1(a)&&a.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=a,qk(r,t,a,n,i)):(r=ph(e.type,null,n,t,t.mode,i),r.ref=t.ref,r.return=t,t.child=r)}if(a=r.child,!(r.lanes&i)){var o=a.memoizedProps;if(e=e.compare,e=e!==null?e:Fu,e(o,n)&&r.ref===t.ref)return Ia(r,t,i)}return t.flags|=1,r=To(a,n),r.ref=t.ref,r.return=t,t.child=r}function qk(r,t,e,n,i){if(r!==null){var a=r.memoizedProps;if(Fu(a,n)&&r.ref===t.ref)if(Pn=!1,t.pendingProps=n=a,(r.lanes&i)!==0)r.flags&131072&&(Pn=!0);else return t.lanes=r.lanes,Ia(r,t,i)}return k0(r,t,e,n,i)}function Hk(r,t,e){var n=t.pendingProps,i=n.children,a=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Lc,Vn),Vn|=e;else{if(!(e&1073741824))return r=a!==null?a.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,Yt(Lc,Vn),Vn|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:e,Yt(Lc,Vn),Vn|=n}else a!==null?(n=a.baseLanes|e,t.memoizedState=null):n=e,Yt(Lc,Vn),Vn|=n;return hn(r,t,i,e),t.child}function Gk(r,t){var e=t.ref;(r===null&&e!==null||r!==null&&r.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function k0(r,t,e,n,i){var a=En(e)?Ps:ln.current;return a=qc(t,a),Mc(t,i),e=o1(r,t,e,n,a,i),n=s1(),r!==null&&!Pn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~i,Ia(r,t,i)):(rr&&n&&Ky(t),t.flags|=1,hn(r,t,e,i),t.child)}function nw(r,t,e,n,i){if(En(e)){var a=!0;zh(t)}else a=!1;if(Mc(t,i),t.stateNode===null)fh(r,t),Vk(t,e,n),x0(t,e,n,i),n=!0;else if(r===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=e.contextType;typeof c=="object"&&c!==null?c=fi(c):(c=En(e)?Ps:ln.current,c=qc(t,c));var u=e.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||l!==c)&&J2(t,o,n,c),uo=!1;var v=t.memoizedState;o.state=v,Kh(t,n,o,i),l=t.memoizedState,s!==n||v!==l||Tn.current||uo?(typeof u=="function"&&(b0(t,e,u,n),l=t.memoizedState),(s=uo||Y2(t,e,s,n,v,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,bk(r,t),s=t.memoizedProps,c=t.type===t.elementType?s:Si(t.type,s),o.props=c,d=t.pendingProps,v=o.context,l=e.contextType,typeof l=="object"&&l!==null?l=fi(l):(l=En(e)?Ps:ln.current,l=qc(t,l));var p=e.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||v!==l)&&J2(t,o,n,l),uo=!1,v=t.memoizedState,o.state=v,Kh(t,n,o,i);var y=t.memoizedState;s!==d||v!==y||Tn.current||uo?(typeof p=="function"&&(b0(t,e,p,n),y=t.memoizedState),(c=uo||Y2(t,e,c,n,v,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&v===r.memoizedState||(t.flags|=1024),n=!1)}return P0(r,t,e,n,a,i)}function P0(r,t,e,n,i,a){Gk(r,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&V2(t,e,!1),Ia(r,t,a);n=t.stateNode,HO.current=t;var s=o&&typeof e.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,r!==null&&o?(t.child=Gc(t,r.child,null,a),t.child=Gc(t,null,s,a)):hn(r,t,s,a),t.memoizedState=n.state,i&&V2(t,e,!0),t.child}function Kk(r){var t=r.stateNode;t.pendingContext?U2(r,t.pendingContext,t.pendingContext!==t.context):t.context&&U2(r,t.context,!1),r1(r,t.containerInfo)}function iw(r,t,e,n,i){return Hc(),Yy(i),t.flags|=256,hn(r,t,e,n),t.child}var T0={dehydrated:null,treeContext:null,retryLane:0};function E0(r){return{baseLanes:r,cachePool:null,transitions:null}}function Qk(r,t,e){var n=t.pendingProps,i=ir.current,a=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=r!==null&&r.memoizedState===null?!1:(i&2)!==0),s?(a=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),Yt(ir,i&1),r===null)return _0(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,r=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Cp(o,n,0,null),r=ws(r,n,e,null),a.return=t,r.return=t,a.sibling=r,t.child=a,t.child.memoizedState=E0(e),t.memoizedState=T0,r):u1(t,o));if(i=r.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return GO(r,t,o,n,s,i,e);if(a){a=n.fallback,o=t.mode,i=r.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=To(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=To(s,a):(a=ws(a,o,e,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=r.child.memoizedState,o=o===null?E0(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=r.childLanes&~e,t.memoizedState=T0,n}return a=r.child,r=a.sibling,n=To(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=e),n.return=t,n.sibling=null,r!==null&&(e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)),t.child=n,t.memoizedState=null,n}function u1(r,t){return t=Cp({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function wd(r,t,e,n){return n!==null&&Yy(n),Gc(t,r.child,null,e),r=u1(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function GO(r,t,e,n,i,a,o){if(e)return t.flags&256?(t.flags&=-257,n=Cm(Error(Ae(422))),wd(r,t,o,n)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Cp({mode:"visible",children:n.children},i,0,null),a=ws(a,i,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Gc(t,r.child,null,o),t.child.memoizedState=E0(o),t.memoizedState=T0,a);if(!(t.mode&1))return wd(r,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,a=Error(Ae(419)),n=Cm(a,n,void 0),wd(r,t,o,n)}if(s=(o&r.childLanes)!==0,Pn||s){if(n=Vr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ja(r,i),Li(n,r,i,-1))}return m1(),n=Cm(Error(Ae(421))),wd(r,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=r.child,t=o6.bind(null,r),i._reactRetry=t,null):(r=a.treeContext,Wn=xo(i.nextSibling),Hn=t,rr=!0,Ei=null,r!==null&&(ai[oi++]=Ca,ai[oi++]=La,ai[oi++]=Ts,Ca=r.id,La=r.overflow,Ts=t),t=u1(t,n.children),t.flags|=4096,t)}function aw(r,t,e){r.lanes|=t;var n=r.alternate;n!==null&&(n.lanes|=t),w0(r.return,t,e)}function Lm(r,t,e,n,i){var a=r.memoizedState;a===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=e,a.tailMode=i)}function Yk(r,t,e){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(hn(r,t,n.children,e),n=ir.current,n&2)n=n&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&aw(r,e,t);else if(r.tag===19)aw(r,e,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Yt(ir,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(e=t.child,i=null;e!==null;)r=e.alternate,r!==null&&Qh(r)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),Lm(t,!1,i,e,a);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(r=i.alternate,r!==null&&Qh(r)===null){t.child=i;break}r=i.sibling,i.sibling=e,e=i,i=r}Lm(t,!0,e,null,a);break;case"together":Lm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fh(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function Ia(r,t,e){if(r!==null&&(t.dependencies=r.dependencies),Cs|=t.lanes,!(e&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(Ae(153));if(t.child!==null){for(r=t.child,e=To(r,r.pendingProps),t.child=e,e.return=t;r.sibling!==null;)r=r.sibling,e=e.sibling=To(r,r.pendingProps),e.return=t;e.sibling=null}return t.child}function KO(r,t,e){switch(t.tag){case 3:Kk(t),Hc();break;case 5:xk(t);break;case 1:En(t.type)&&zh(t);break;case 4:r1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Yt(Hh,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Yt(ir,ir.current&1),t.flags|=128,null):e&t.child.childLanes?Qk(r,t,e):(Yt(ir,ir.current&1),r=Ia(r,t,e),r!==null?r.sibling:null);Yt(ir,ir.current&1);break;case 19:if(n=(e&t.childLanes)!==0,r.flags&128){if(n)return Yk(r,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yt(ir,ir.current),n)break;return null;case 22:case 23:return t.lanes=0,Hk(r,t,e)}return Ia(r,t,e)}var Jk,C0,Xk,Zk;Jk=function(r,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)r.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};C0=function(){};Xk=function(r,t,e,n){var i=r.memoizedProps;if(i!==n){r=t.stateNode,gs(ea.current);var a=null;switch(e){case"input":i=Yg(r,i),n=Yg(r,n),a=[];break;case"select":i=sr({},i,{value:void 0}),n=sr({},n,{value:void 0}),a=[];break;case"textarea":i=Zg(r,i),n=Zg(r,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Uh)}t0(e,n);var o;e=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ou.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(s=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(e||(e={}),e[o]=l[o])}else e||(a||(a=[]),a.push(c,e)),e=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ou.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Xt("scroll",r),a||s===l||(a=[])):(a=a||[]).push(c,l))}e&&(a=a||[]).push("style",e);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};Zk=function(r,t,e,n){e!==n&&(t.flags|=4)};function Zl(r,t){if(!rr)switch(r.tailMode){case"hidden":t=r.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?r.tail=null:e.sibling=null;break;case"collapsed":e=r.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function tn(r){var t=r.alternate!==null&&r.alternate.child===r.child,e=0,n=0;if(t)for(var i=r.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=e,t}function QO(r,t,e){var n=t.pendingProps;switch(Qy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(t),null;case 1:return En(t.type)&&Vh(),tn(t),null;case 3:return n=t.stateNode,Kc(),er(Tn),er(ln),i1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(yd(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ei!==null&&(M0(Ei),Ei=null))),C0(r,t),tn(t),null;case 5:n1(t);var i=gs(zu.current);if(e=t.type,r!==null&&t.stateNode!=null)Xk(r,t,e,n,i),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ae(166));return tn(t),null}if(r=gs(ea.current),yd(t)){n=t.stateNode,e=t.type;var a=t.memoizedProps;switch(n[Qi]=t,n[Uu]=a,r=(t.mode&1)!==0,e){case"dialog":Xt("cancel",n),Xt("close",n);break;case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(i=0;i<hu.length;i++)Xt(hu[i],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"details":Xt("toggle",n);break;case"input":p2(n,a),Xt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Xt("invalid",n);break;case"textarea":m2(n,a),Xt("invalid",n)}t0(e,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?n.textContent!==s&&(a.suppressHydrationWarning!==!0&&gd(n.textContent,s,r),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&gd(n.textContent,s,r),i=["children",""+s]):Ou.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Xt("scroll",n)}switch(e){case"input":ld(n),v2(n,a,!0);break;case"textarea":ld(n),g2(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Uh)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ES(e)),r==="http://www.w3.org/1999/xhtml"?e==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(e,{is:n.is}):(r=o.createElement(e),e==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,e),r[Qi]=t,r[Uu]=n,Jk(r,t,!1,!1),t.stateNode=r;e:{switch(o=r0(e,n),e){case"dialog":Xt("cancel",r),Xt("close",r),i=n;break;case"iframe":case"object":case"embed":Xt("load",r),i=n;break;case"video":case"audio":for(i=0;i<hu.length;i++)Xt(hu[i],r);i=n;break;case"source":Xt("error",r),i=n;break;case"img":case"image":case"link":Xt("error",r),Xt("load",r),i=n;break;case"details":Xt("toggle",r),i=n;break;case"input":p2(r,n),i=Yg(r,n),Xt("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=sr({},n,{value:void 0}),Xt("invalid",r);break;case"textarea":m2(r,n),i=Zg(r,n),Xt("invalid",r);break;default:i=n}t0(e,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?AS(r,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CS(r,l)):a==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&Nu(r,l):typeof l=="number"&&Nu(r,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ou.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Xt("scroll",r):l!=null&&jy(r,a,l,o))}switch(e){case"input":ld(r),v2(r,n,!1);break;case"textarea":ld(r),g2(r);break;case"option":n.value!=null&&r.setAttribute("value",""+Co(n.value));break;case"select":r.multiple=!!n.multiple,a=n.value,a!=null?Nc(r,!!n.multiple,a,!1):n.defaultValue!=null&&Nc(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Uh)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tn(t),null;case 6:if(r&&t.stateNode!=null)Zk(r,t,r.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ae(166));if(e=gs(zu.current),gs(ea.current),yd(t)){if(n=t.stateNode,e=t.memoizedProps,n[Qi]=t,(a=n.nodeValue!==e)&&(r=Hn,r!==null))switch(r.tag){case 3:gd(n.nodeValue,e,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&gd(n.nodeValue,e,(r.mode&1)!==0)}a&&(t.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[Qi]=t,t.stateNode=n}return tn(t),null;case 13:if(er(ir),n=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(rr&&Wn!==null&&t.mode&1&&!(t.flags&128))gk(),Hc(),t.flags|=98560,a=!1;else if(a=yd(t),n!==null&&n.dehydrated!==null){if(r===null){if(!a)throw Error(Ae(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ae(317));a[Qi]=t}else Hc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tn(t),a=!1}else Ei!==null&&(M0(Ei),Ei=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(r===null||ir.current&1?Fr===0&&(Fr=3):m1())),t.updateQueue!==null&&(t.flags|=4),tn(t),null);case 4:return Kc(),C0(r,t),r===null&&Bu(t.stateNode.containerInfo),tn(t),null;case 10:return Zy(t.type._context),tn(t),null;case 17:return En(t.type)&&Vh(),tn(t),null;case 19:if(er(ir),a=t.memoizedState,a===null)return tn(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)Zl(a,!1);else{if(Fr!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(o=Qh(r),o!==null){for(t.flags|=128,Zl(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=e,e=t.child;e!==null;)a=e,r=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e=e.sibling;return Yt(ir,ir.current&1|2),t.child}r=r.sibling}a.tail!==null&&xr()>Yc&&(t.flags|=128,n=!0,Zl(a,!1),t.lanes=4194304)}else{if(!n)if(r=Qh(o),r!==null){if(t.flags|=128,n=!0,e=r.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Zl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!rr)return tn(t),null}else 2*xr()-a.renderingStartTime>Yc&&e!==1073741824&&(t.flags|=128,n=!0,Zl(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(e=a.last,e!==null?e.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=xr(),t.sibling=null,e=ir.current,Yt(ir,n?e&1|2:e&1),t):(tn(t),null);case 22:case 23:return v1(),n=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Vn&1073741824&&(tn(t),t.subtreeFlags&6&&(t.flags|=8192)):tn(t),null;case 24:return null;case 25:return null}throw Error(Ae(156,t.tag))}function YO(r,t){switch(Qy(t),t.tag){case 1:return En(t.type)&&Vh(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return Kc(),er(Tn),er(ln),i1(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return n1(t),null;case 13:if(er(ir),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(Ae(340));Hc()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return er(ir),null;case 4:return Kc(),null;case 10:return Zy(t.type._context),null;case 22:case 23:return v1(),null;case 24:return null;default:return null}}var bd=!1,sn=!1,JO=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Cc(r,t){var e=r.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){hr(r,t,n)}else e.current=null}function L0(r,t,e){try{e()}catch(n){hr(r,t,n)}}var ow=!1;function XO(r,t){if(d0=Fh,r=ik(),Gy(r)){if("selectionStart"in r)var e={start:r.selectionStart,end:r.selectionEnd};else e:{e=(e=r.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{e.nodeType,a.nodeType}catch{e=null;break e}var o=0,s=-1,l=-1,c=0,u=0,d=r,v=null;t:for(;;){for(var p;d!==e||i!==0&&d.nodeType!==3||(s=o+i),d!==a||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)v=d,d=p;for(;;){if(d===r)break t;if(v===e&&++c===i&&(s=o),v===a&&++u===n&&(l=o),(p=d.nextSibling)!==null)break;d=v,v=d.parentNode}d=p}e=s===-1||l===-1?null:{start:s,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(h0={focusedElem:r,selectionRange:e},Fh=!1,Be=t;Be!==null;)if(t=Be,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,Be=r;else for(;Be!==null;){t=Be;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,S=y.memoizedState,_=t.stateNode,x=_.getSnapshotBeforeUpdate(t.elementType===t.type?b:Si(t.type,b),S);_.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(T){hr(t,t.return,T)}if(r=t.sibling,r!==null){r.return=t.return,Be=r;break}Be=t.return}return y=ow,ow=!1,y}function ku(r,t,e){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var a=i.destroy;i.destroy=void 0,a!==void 0&&L0(t,e,a)}i=i.next}while(i!==n)}}function Tp(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&r)===r){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}}function A0(r){var t=r.ref;if(t!==null){var e=r.stateNode;switch(r.tag){case 5:r=e;break;default:r=e}typeof t=="function"?t(r):t.current=r}}function e4(r){var t=r.alternate;t!==null&&(r.alternate=null,e4(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[Qi],delete t[Uu],delete t[m0],delete t[jO],delete t[IO])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function t4(r){return r.tag===5||r.tag===3||r.tag===4}function sw(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||t4(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function O0(r,t,e){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(r,t):e.insertBefore(r,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(r,e)):(t=e,t.appendChild(r)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Uh));else if(n!==4&&(r=r.child,r!==null))for(O0(r,t,e),r=r.sibling;r!==null;)O0(r,t,e),r=r.sibling}function N0(r,t,e){var n=r.tag;if(n===5||n===6)r=r.stateNode,t?e.insertBefore(r,t):e.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(N0(r,t,e),r=r.sibling;r!==null;)N0(r,t,e),r=r.sibling}var Kr=null,ki=!1;function no(r,t,e){for(e=e.child;e!==null;)r4(r,t,e),e=e.sibling}function r4(r,t,e){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(yp,e)}catch{}switch(e.tag){case 5:sn||Cc(e,t);case 6:var n=Kr,i=ki;Kr=null,no(r,t,e),Kr=n,ki=i,Kr!==null&&(ki?(r=Kr,e=e.stateNode,r.nodeType===8?r.parentNode.removeChild(e):r.removeChild(e)):Kr.removeChild(e.stateNode));break;case 18:Kr!==null&&(ki?(r=Kr,e=e.stateNode,r.nodeType===8?xm(r.parentNode,e):r.nodeType===1&&xm(r,e),Mu(r)):xm(Kr,e.stateNode));break;case 4:n=Kr,i=ki,Kr=e.stateNode.containerInfo,ki=!0,no(r,t,e),Kr=n,ki=i;break;case 0:case 11:case 14:case 15:if(!sn&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&L0(e,t,o),i=i.next}while(i!==n)}no(r,t,e);break;case 1:if(!sn&&(Cc(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(s){hr(e,t,s)}no(r,t,e);break;case 21:no(r,t,e);break;case 22:e.mode&1?(sn=(n=sn)||e.memoizedState!==null,no(r,t,e),sn=n):no(r,t,e);break;default:no(r,t,e)}}function cw(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var e=r.stateNode;e===null&&(e=r.stateNode=new JO),t.forEach(function(n){var i=s6.bind(null,r,n);e.has(n)||(e.add(n),n.then(i,i))})}}function bi(r,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];try{var a=r,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Kr=s.stateNode,ki=!1;break e;case 3:Kr=s.stateNode.containerInfo,ki=!0;break e;case 4:Kr=s.stateNode.containerInfo,ki=!0;break e}s=s.return}if(Kr===null)throw Error(Ae(160));r4(a,o,i),Kr=null,ki=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){hr(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)n4(t,r),t=t.sibling}function n4(r,t){var e=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bi(t,r),zi(r),n&4){try{ku(3,r,r.return),Tp(3,r)}catch(b){hr(r,r.return,b)}try{ku(5,r,r.return)}catch(b){hr(r,r.return,b)}}break;case 1:bi(t,r),zi(r),n&512&&e!==null&&Cc(e,e.return);break;case 5:if(bi(t,r),zi(r),n&512&&e!==null&&Cc(e,e.return),r.flags&32){var i=r.stateNode;try{Nu(i,"")}catch(b){hr(r,r.return,b)}}if(n&4&&(i=r.stateNode,i!=null)){var a=r.memoizedProps,o=e!==null?e.memoizedProps:a,s=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&PS(i,a),r0(s,o);var c=r0(s,a);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?AS(i,d):u==="dangerouslySetInnerHTML"?CS(i,d):u==="children"?Nu(i,d):jy(i,u,d,c)}switch(s){case"input":Jg(i,a);break;case"textarea":TS(i,a);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Nc(i,!!a.multiple,p,!1):v!==!!a.multiple&&(a.defaultValue!=null?Nc(i,!!a.multiple,a.defaultValue,!0):Nc(i,!!a.multiple,a.multiple?[]:"",!1))}i[Uu]=a}catch(b){hr(r,r.return,b)}}break;case 6:if(bi(t,r),zi(r),n&4){if(r.stateNode===null)throw Error(Ae(162));i=r.stateNode,a=r.memoizedProps;try{i.nodeValue=a}catch(b){hr(r,r.return,b)}}break;case 3:if(bi(t,r),zi(r),n&4&&e!==null&&e.memoizedState.isDehydrated)try{Mu(t.containerInfo)}catch(b){hr(r,r.return,b)}break;case 4:bi(t,r),zi(r);break;case 13:bi(t,r),zi(r),i=r.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(h1=xr())),n&4&&cw(r);break;case 22:if(u=e!==null&&e.memoizedState!==null,r.mode&1?(sn=(c=sn)||u,bi(t,r),sn=c):bi(t,r),zi(r),n&8192){if(c=r.memoizedState!==null,(r.stateNode.isHidden=c)&&!u&&r.mode&1)for(Be=r,u=r.child;u!==null;){for(d=Be=u;Be!==null;){switch(v=Be,p=v.child,v.tag){case 0:case 11:case 14:case 15:ku(4,v,v.return);break;case 1:Cc(v,v.return);var y=v.stateNode;if(typeof y.componentWillUnmount=="function"){n=v,e=v.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(b){hr(n,e,b)}}break;case 5:Cc(v,v.return);break;case 22:if(v.memoizedState!==null){uw(d);continue}}p!==null?(p.return=v,Be=p):uw(d)}u=u.sibling}e:for(u=null,d=r;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=LS("display",o))}catch(b){hr(r,r.return,b)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){hr(r,r.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===r)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bi(t,r),zi(r),n&4&&cw(r);break;case 21:break;default:bi(t,r),zi(r)}}function zi(r){var t=r.flags;if(t&2){try{e:{for(var e=r.return;e!==null;){if(t4(e)){var n=e;break e}e=e.return}throw Error(Ae(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Nu(i,""),n.flags&=-33);var a=sw(r);N0(r,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,s=sw(r);O0(r,s,o);break;default:throw Error(Ae(161))}}catch(l){hr(r,r.return,l)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function ZO(r,t,e){Be=r,i4(r)}function i4(r,t,e){for(var n=(r.mode&1)!==0;Be!==null;){var i=Be,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||bd;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||sn;s=bd;var c=sn;if(bd=o,(sn=l)&&!c)for(Be=i;Be!==null;)o=Be,l=o.child,o.tag===22&&o.memoizedState!==null?fw(i):l!==null?(l.return=o,Be=l):fw(i);for(;a!==null;)Be=a,i4(a),a=a.sibling;Be=i,bd=s,sn=c}lw(r)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Be=a):lw(r)}}function lw(r){for(;Be!==null;){var t=Be;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sn||Tp(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!sn)if(e===null)n.componentDidMount();else{var i=t.elementType===t.type?e.memoizedProps:Si(t.type,e.memoizedProps);n.componentDidUpdate(i,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&G2(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}G2(t,o,e)}break;case 5:var s=t.stateNode;if(e===null&&t.flags&4){e=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Mu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}sn||t.flags&512&&A0(t)}catch(v){hr(t,t.return,v)}}if(t===r){Be=null;break}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}}function uw(r){for(;Be!==null;){var t=Be;if(t===r){Be=null;break}var e=t.sibling;if(e!==null){e.return=t.return,Be=e;break}Be=t.return}}function fw(r){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Tp(4,t)}catch(l){hr(t,e,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){hr(t,i,l)}}var a=t.return;try{A0(t)}catch(l){hr(t,a,l)}break;case 5:var o=t.return;try{A0(t)}catch(l){hr(t,o,l)}}}catch(l){hr(t,t.return,l)}if(t===r){Be=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Be=s;break}Be=t.return}}var e6=Math.ceil,Xh=Ma.ReactCurrentDispatcher,f1=Ma.ReactCurrentOwner,ui=Ma.ReactCurrentBatchConfig,Lt=0,Vr=null,Lr=null,Qr=0,Vn=0,Lc=No(0),Fr=0,Gu=null,Cs=0,Ep=0,d1=0,Pu=null,kn=null,h1=0,Yc=1/0,Pa=null,Zh=!1,R0=null,ko=null,xd=!1,vo=null,ep=0,Tu=0,j0=null,dh=-1,hh=0;function vn(){return Lt&6?xr():dh!==-1?dh:dh=xr()}function Po(r){return r.mode&1?Lt&2&&Qr!==0?Qr&-Qr:DO.transition!==null?(hh===0&&(hh=VS()),hh):(r=Ut,r!==0||(r=window.event,r=r===void 0?16:QS(r.type)),r):1}function Li(r,t,e,n){if(50<Tu)throw Tu=0,j0=null,Error(Ae(185));af(r,e,n),(!(Lt&2)||r!==Vr)&&(r===Vr&&(!(Lt&2)&&(Ep|=e),Fr===4&&ho(r,Qr)),Cn(r,n),e===1&&Lt===0&&!(t.mode&1)&&(Yc=xr()+500,Sp&&Ro()))}function Cn(r,t){var e=r.callbackNode;DA(r,t);var n=Dh(r,r===Vr?Qr:0);if(n===0)e!==null&&w2(e),r.callbackNode=null,r.callbackPriority=0;else if(t=n&-n,r.callbackPriority!==t){if(e!=null&&w2(e),t===1)r.tag===0?MO(dw.bind(null,r)):pk(dw.bind(null,r)),NO(function(){!(Lt&6)&&Ro()}),e=null;else{switch(zS(n)){case 1:e=By;break;case 4:e=$S;break;case 16:e=Mh;break;case 536870912:e=US;break;default:e=Mh}e=d4(e,a4.bind(null,r))}r.callbackPriority=t,r.callbackNode=e}}function a4(r,t){if(dh=-1,hh=0,Lt&6)throw Error(Ae(327));var e=r.callbackNode;if(Dc()&&r.callbackNode!==e)return null;var n=Dh(r,r===Vr?Qr:0);if(n===0)return null;if(n&30||n&r.expiredLanes||t)t=tp(r,n);else{t=n;var i=Lt;Lt|=2;var a=s4();(Vr!==r||Qr!==t)&&(Pa=null,Yc=xr()+500,_s(r,t));do try{n6();break}catch(s){o4(r,s)}while(!0);Xy(),Xh.current=a,Lt=i,Lr!==null?t=0:(Vr=null,Qr=0,t=Fr)}if(t!==0){if(t===2&&(i=s0(r),i!==0&&(n=i,t=I0(r,i))),t===1)throw e=Gu,_s(r,0),ho(r,n),Cn(r,xr()),e;if(t===6)ho(r,n);else{if(i=r.current.alternate,!(n&30)&&!t6(i)&&(t=tp(r,n),t===2&&(a=s0(r),a!==0&&(n=a,t=I0(r,a))),t===1))throw e=Gu,_s(r,0),ho(r,n),Cn(r,xr()),e;switch(r.finishedWork=i,r.finishedLanes=n,t){case 0:case 1:throw Error(Ae(345));case 2:us(r,kn,Pa);break;case 3:if(ho(r,n),(n&130023424)===n&&(t=h1+500-xr(),10<t)){if(Dh(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){vn(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=v0(us.bind(null,r,kn,Pa),t);break}us(r,kn,Pa);break;case 4:if(ho(r,n),(n&4194240)===n)break;for(t=r.eventTimes,i=-1;0<n;){var o=31-Ci(n);a=1<<o,o=t[o],o>i&&(i=o),n&=~a}if(n=i,n=xr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*e6(n/1960))-n,10<n){r.timeoutHandle=v0(us.bind(null,r,kn,Pa),n);break}us(r,kn,Pa);break;case 5:us(r,kn,Pa);break;default:throw Error(Ae(329))}}}return Cn(r,xr()),r.callbackNode===e?a4.bind(null,r):null}function I0(r,t){var e=Pu;return r.current.memoizedState.isDehydrated&&(_s(r,t).flags|=256),r=tp(r,t),r!==2&&(t=kn,kn=e,t!==null&&M0(t)),r}function M0(r){kn===null?kn=r:kn.push.apply(kn,r)}function t6(r){for(var t=r;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var i=e[n],a=i.getSnapshot;i=i.value;try{if(!Ai(a(),i))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ho(r,t){for(t&=~d1,t&=~Ep,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var e=31-Ci(t),n=1<<e;r[e]=-1,t&=~n}}function dw(r){if(Lt&6)throw Error(Ae(327));Dc();var t=Dh(r,0);if(!(t&1))return Cn(r,xr()),null;var e=tp(r,t);if(r.tag!==0&&e===2){var n=s0(r);n!==0&&(t=n,e=I0(r,n))}if(e===1)throw e=Gu,_s(r,0),ho(r,t),Cn(r,xr()),e;if(e===6)throw Error(Ae(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,us(r,kn,Pa),Cn(r,xr()),null}function p1(r,t){var e=Lt;Lt|=1;try{return r(t)}finally{Lt=e,Lt===0&&(Yc=xr()+500,Sp&&Ro())}}function Ls(r){vo!==null&&vo.tag===0&&!(Lt&6)&&Dc();var t=Lt;Lt|=1;var e=ui.transition,n=Ut;try{if(ui.transition=null,Ut=1,r)return r()}finally{Ut=n,ui.transition=e,Lt=t,!(Lt&6)&&Ro()}}function v1(){Vn=Lc.current,er(Lc)}function _s(r,t){r.finishedWork=null,r.finishedLanes=0;var e=r.timeoutHandle;if(e!==-1&&(r.timeoutHandle=-1,OO(e)),Lr!==null)for(e=Lr.return;e!==null;){var n=e;switch(Qy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Vh();break;case 3:Kc(),er(Tn),er(ln),i1();break;case 5:n1(n);break;case 4:Kc();break;case 13:er(ir);break;case 19:er(ir);break;case 10:Zy(n.type._context);break;case 22:case 23:v1()}e=e.return}if(Vr=r,Lr=r=To(r.current,null),Qr=Vn=t,Fr=0,Gu=null,d1=Ep=Cs=0,kn=Pu=null,ms!==null){for(t=0;t<ms.length;t++)if(e=ms[t],n=e.interleaved,n!==null){e.interleaved=null;var i=n.next,a=e.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}e.pending=n}ms=null}return r}function o4(r,t){do{var e=Lr;try{if(Xy(),lh.current=Jh,Yh){for(var n=or.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Yh=!1}if(Es=0,$r=Dr=or=null,Su=!1,Wu=0,f1.current=null,e===null||e.return===null){Fr=1,Gu=t,Lr=null;break}e:{var a=r,o=e.return,s=e,l=t;if(t=Qr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var v=u.alternate;v?(u.updateQueue=v.updateQueue,u.memoizedState=v.memoizedState,u.lanes=v.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Z2(o);if(p!==null){p.flags&=-257,ew(p,o,s,a,t),p.mode&1&&X2(a,c,t),t=p,l=c;var y=t.updateQueue;if(y===null){var b=new Set;b.add(l),t.updateQueue=b}else y.add(l);break e}else{if(!(t&1)){X2(a,c,t),m1();break e}l=Error(Ae(426))}}else if(rr&&s.mode&1){var S=Z2(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),ew(S,o,s,a,t),Yy(Qc(l,s));break e}}a=l=Qc(l,s),Fr!==4&&(Fr=2),Pu===null?Pu=[a]:Pu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var _=zk(a,l,t);H2(a,_);break e;case 1:s=l;var x=a.type,k=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(ko===null||!ko.has(k)))){a.flags|=65536,t&=-t,a.lanes|=t;var T=Wk(a,s,t);H2(a,T);break e}}a=a.return}while(a!==null)}l4(e)}catch(R){t=R,Lr===e&&e!==null&&(Lr=e=e.return);continue}break}while(!0)}function s4(){var r=Xh.current;return Xh.current=Jh,r===null?Jh:r}function m1(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Vr===null||!(Cs&268435455)&&!(Ep&268435455)||ho(Vr,Qr)}function tp(r,t){var e=Lt;Lt|=2;var n=s4();(Vr!==r||Qr!==t)&&(Pa=null,_s(r,t));do try{r6();break}catch(i){o4(r,i)}while(!0);if(Xy(),Lt=e,Xh.current=n,Lr!==null)throw Error(Ae(261));return Vr=null,Qr=0,Fr}function r6(){for(;Lr!==null;)c4(Lr)}function n6(){for(;Lr!==null&&!CA();)c4(Lr)}function c4(r){var t=f4(r.alternate,r,Vn);r.memoizedProps=r.pendingProps,t===null?l4(r):Lr=t,f1.current=null}function l4(r){var t=r;do{var e=t.alternate;if(r=t.return,t.flags&32768){if(e=YO(e,t),e!==null){e.flags&=32767,Lr=e;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Fr=6,Lr=null;return}}else if(e=QO(e,t,Vn),e!==null){Lr=e;return}if(t=t.sibling,t!==null){Lr=t;return}Lr=t=r}while(t!==null);Fr===0&&(Fr=5)}function us(r,t,e){var n=Ut,i=ui.transition;try{ui.transition=null,Ut=1,i6(r,t,e,n)}finally{ui.transition=i,Ut=n}return null}function i6(r,t,e,n){do Dc();while(vo!==null);if(Lt&6)throw Error(Ae(327));e=r.finishedWork;var i=r.finishedLanes;if(e===null)return null;if(r.finishedWork=null,r.finishedLanes=0,e===r.current)throw Error(Ae(177));r.callbackNode=null,r.callbackPriority=0;var a=e.lanes|e.childLanes;if(FA(r,a),r===Vr&&(Lr=Vr=null,Qr=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||xd||(xd=!0,d4(Mh,function(){return Dc(),null})),a=(e.flags&15990)!==0,e.subtreeFlags&15990||a){a=ui.transition,ui.transition=null;var o=Ut;Ut=1;var s=Lt;Lt|=4,f1.current=null,XO(r,e),n4(e,r),kO(h0),Fh=!!d0,h0=d0=null,r.current=e,ZO(e),LA(),Lt=s,Ut=o,ui.transition=a}else r.current=e;if(xd&&(xd=!1,vo=r,ep=i),a=r.pendingLanes,a===0&&(ko=null),NA(e.stateNode),Cn(r,xr()),t!==null)for(n=r.onRecoverableError,e=0;e<t.length;e++)i=t[e],n(i.value,{componentStack:i.stack,digest:i.digest});if(Zh)throw Zh=!1,r=R0,R0=null,r;return ep&1&&r.tag!==0&&Dc(),a=r.pendingLanes,a&1?r===j0?Tu++:(Tu=0,j0=r):Tu=0,Ro(),null}function Dc(){if(vo!==null){var r=zS(ep),t=ui.transition,e=Ut;try{if(ui.transition=null,Ut=16>r?16:r,vo===null)var n=!1;else{if(r=vo,vo=null,ep=0,Lt&6)throw Error(Ae(331));var i=Lt;for(Lt|=4,Be=r.current;Be!==null;){var a=Be,o=a.child;if(Be.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Be=c;Be!==null;){var u=Be;switch(u.tag){case 0:case 11:case 15:ku(8,u,a)}var d=u.child;if(d!==null)d.return=u,Be=d;else for(;Be!==null;){u=Be;var v=u.sibling,p=u.return;if(e4(u),u===c){Be=null;break}if(v!==null){v.return=p,Be=v;break}Be=p}}}var y=a.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}Be=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Be=o;else e:for(;Be!==null;){if(a=Be,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ku(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,Be=_;break e}Be=a.return}}var x=r.current;for(Be=x;Be!==null;){o=Be;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,Be=k;else e:for(o=x;Be!==null;){if(s=Be,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Tp(9,s)}}catch(R){hr(s,s.return,R)}if(s===o){Be=null;break e}var T=s.sibling;if(T!==null){T.return=s.return,Be=T;break e}Be=s.return}}if(Lt=i,Ro(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(yp,r)}catch{}n=!0}return n}finally{Ut=e,ui.transition=t}}return!1}function hw(r,t,e){t=Qc(e,t),t=zk(r,t,1),r=So(r,t,1),t=vn(),r!==null&&(af(r,1,t),Cn(r,t))}function hr(r,t,e){if(r.tag===3)hw(r,r,e);else for(;t!==null;){if(t.tag===3){hw(t,r,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ko===null||!ko.has(n))){r=Qc(e,r),r=Wk(t,r,1),t=So(t,r,1),r=vn(),t!==null&&(af(t,1,r),Cn(t,r));break}}t=t.return}}function a6(r,t,e){var n=r.pingCache;n!==null&&n.delete(t),t=vn(),r.pingedLanes|=r.suspendedLanes&e,Vr===r&&(Qr&e)===e&&(Fr===4||Fr===3&&(Qr&130023424)===Qr&&500>xr()-h1?_s(r,0):d1|=e),Cn(r,t)}function u4(r,t){t===0&&(r.mode&1?(t=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):t=1);var e=vn();r=ja(r,t),r!==null&&(af(r,t,e),Cn(r,e))}function o6(r){var t=r.memoizedState,e=0;t!==null&&(e=t.retryLane),u4(r,e)}function s6(r,t){var e=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(e=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Ae(314))}n!==null&&n.delete(t),u4(r,e)}var f4;f4=function(r,t,e){if(r!==null)if(r.memoizedProps!==t.pendingProps||Tn.current)Pn=!0;else{if(!(r.lanes&e)&&!(t.flags&128))return Pn=!1,KO(r,t,e);Pn=!!(r.flags&131072)}else Pn=!1,rr&&t.flags&1048576&&vk(t,qh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;fh(r,t),r=t.pendingProps;var i=qc(t,ln.current);Mc(t,e),i=o1(null,t,n,r,i,e);var a=s1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,En(n)?(a=!0,zh(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,t1(t),i.updater=Pp,t.stateNode=i,i._reactInternals=t,x0(t,n,r,e),t=P0(null,t,n,!0,a,e)):(t.tag=0,rr&&a&&Ky(t),hn(null,t,i,e),t=t.child),t;case 16:n=t.elementType;e:{switch(fh(r,t),r=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=l6(n),r=Si(n,r),i){case 0:t=k0(null,t,n,r,e);break e;case 1:t=nw(null,t,n,r,e);break e;case 11:t=tw(null,t,n,r,e);break e;case 14:t=rw(null,t,n,Si(n.type,r),e);break e}throw Error(Ae(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Si(n,i),k0(r,t,n,i,e);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Si(n,i),nw(r,t,n,i,e);case 3:e:{if(Kk(t),r===null)throw Error(Ae(387));n=t.pendingProps,a=t.memoizedState,i=a.element,bk(r,t),Kh(t,n,null,e);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Qc(Error(Ae(423)),t),t=iw(r,t,n,e,i);break e}else if(n!==i){i=Qc(Error(Ae(424)),t),t=iw(r,t,n,e,i);break e}else for(Wn=xo(t.stateNode.containerInfo.firstChild),Hn=t,rr=!0,Ei=null,e=_k(t,null,n,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Hc(),n===i){t=Ia(r,t,e);break e}hn(r,t,n,e)}t=t.child}return t;case 5:return xk(t),r===null&&_0(t),n=t.type,i=t.pendingProps,a=r!==null?r.memoizedProps:null,o=i.children,p0(n,i)?o=null:a!==null&&p0(n,a)&&(t.flags|=32),Gk(r,t),hn(r,t,o,e),t.child;case 6:return r===null&&_0(t),null;case 13:return Qk(r,t,e);case 4:return r1(t,t.stateNode.containerInfo),n=t.pendingProps,r===null?t.child=Gc(t,null,n,e):hn(r,t,n,e),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Si(n,i),tw(r,t,n,i,e);case 7:return hn(r,t,t.pendingProps,e),t.child;case 8:return hn(r,t,t.pendingProps.children,e),t.child;case 12:return hn(r,t,t.pendingProps.children,e),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Yt(Hh,n._currentValue),n._currentValue=o,a!==null)if(Ai(a.value,o)){if(a.children===i.children&&!Tn.current){t=Ia(r,t,e);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Oa(-1,e&-e),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=e,l=a.alternate,l!==null&&(l.lanes|=e),w0(a.return,e,t),s.lanes|=e;break}l=l.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ae(341));o.lanes|=e,s=o.alternate,s!==null&&(s.lanes|=e),w0(o,e,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}hn(r,t,i.children,e),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Mc(t,e),i=fi(i),n=n(i),t.flags|=1,hn(r,t,n,e),t.child;case 14:return n=t.type,i=Si(n,t.pendingProps),i=Si(n.type,i),rw(r,t,n,i,e);case 15:return qk(r,t,t.type,t.pendingProps,e);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Si(n,i),fh(r,t),t.tag=1,En(n)?(r=!0,zh(t)):r=!1,Mc(t,e),Vk(t,n,i),x0(t,n,i,e),P0(null,t,n,!0,r,e);case 19:return Yk(r,t,e);case 22:return Hk(r,t,e)}throw Error(Ae(156,t.tag))};function d4(r,t){return BS(r,t)}function c6(r,t,e,n){this.tag=r,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(r,t,e,n){return new c6(r,t,e,n)}function g1(r){return r=r.prototype,!(!r||!r.isReactComponent)}function l6(r){if(typeof r=="function")return g1(r)?1:0;if(r!=null){if(r=r.$$typeof,r===My)return 11;if(r===Dy)return 14}return 2}function To(r,t){var e=r.alternate;return e===null?(e=ci(r.tag,t,r.key,r.mode),e.elementType=r.elementType,e.type=r.type,e.stateNode=r.stateNode,e.alternate=r,r.alternate=e):(e.pendingProps=t,e.type=r.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=r.flags&14680064,e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=r.sibling,e.index=r.index,e.ref=r.ref,e}function ph(r,t,e,n,i,a){var o=2;if(n=r,typeof r=="function")g1(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case _c:return ws(e.children,i,a,t);case Iy:o=8,i|=8;break;case Hg:return r=ci(12,e,t,i|2),r.elementType=Hg,r.lanes=a,r;case Gg:return r=ci(13,e,t,i),r.elementType=Gg,r.lanes=a,r;case Kg:return r=ci(19,e,t,i),r.elementType=Kg,r.lanes=a,r;case xS:return Cp(e,i,a,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case wS:o=10;break e;case bS:o=9;break e;case My:o=11;break e;case Dy:o=14;break e;case lo:o=16,n=null;break e}throw Error(Ae(130,r==null?r:typeof r,""))}return t=ci(o,e,t,i),t.elementType=r,t.type=n,t.lanes=a,t}function ws(r,t,e,n){return r=ci(7,r,n,t),r.lanes=e,r}function Cp(r,t,e,n){return r=ci(22,r,n,t),r.elementType=xS,r.lanes=e,r.stateNode={isHidden:!1},r}function Am(r,t,e){return r=ci(6,r,null,t),r.lanes=e,r}function Om(r,t,e){return t=ci(4,r.children!==null?r.children:[],r.key,t),t.lanes=e,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function u6(r,t,e,n,i){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fm(0),this.expirationTimes=fm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fm(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function y1(r,t,e,n,i,a,o,s,l){return r=new u6(r,t,e,s,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ci(3,null,null,t),r.current=a,a.stateNode=r,a.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},t1(a),r}function f6(r,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yc,key:n==null?null:""+n,children:r,containerInfo:t,implementation:e}}function h4(r){if(!r)return Lo;r=r._reactInternals;e:{if(Is(r)!==r||r.tag!==1)throw Error(Ae(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(En(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ae(171))}if(r.tag===1){var e=r.type;if(En(e))return hk(r,e,t)}return t}function p4(r,t,e,n,i,a,o,s,l){return r=y1(e,n,!0,r,i,a,o,s,l),r.context=h4(null),e=r.current,n=vn(),i=Po(e),a=Oa(n,i),a.callback=t??null,So(e,a,i),r.current.lanes=i,af(r,i,n),Cn(r,n),r}function Lp(r,t,e,n){var i=t.current,a=vn(),o=Po(i);return e=h4(e),t.context===null?t.context=e:t.pendingContext=e,t=Oa(a,o),t.payload={element:r},n=n===void 0?null:n,n!==null&&(t.callback=n),r=So(i,t,o),r!==null&&(Li(r,i,o,a),ch(r,i,o)),o}function rp(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function pw(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var e=r.retryLane;r.retryLane=e!==0&&e<t?e:t}}function _1(r,t){pw(r,t),(r=r.alternate)&&pw(r,t)}function d6(){return null}var v4=typeof reportError=="function"?reportError:function(r){console.error(r)};function w1(r){this._internalRoot=r}Ap.prototype.render=w1.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(Ae(409));Lp(r,t,null,null)};Ap.prototype.unmount=w1.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;Ls(function(){Lp(null,r,null,null)}),t[Ra]=null}};function Ap(r){this._internalRoot=r}Ap.prototype.unstable_scheduleHydration=function(r){if(r){var t=HS();r={blockedOn:null,target:r,priority:t};for(var e=0;e<fo.length&&t!==0&&t<fo[e].priority;e++);fo.splice(e,0,r),e===0&&KS(r)}};function b1(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Op(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function vw(){}function h6(r,t,e,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var c=rp(o);a.call(c)}}var o=p4(t,n,r,0,null,!1,!1,"",vw);return r._reactRootContainer=o,r[Ra]=o.current,Bu(r.nodeType===8?r.parentNode:r),Ls(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var c=rp(l);s.call(c)}}var l=y1(r,0,!1,null,null,!1,!1,"",vw);return r._reactRootContainer=l,r[Ra]=l.current,Bu(r.nodeType===8?r.parentNode:r),Ls(function(){Lp(t,l,e,n)}),l}function Np(r,t,e,n,i){var a=e._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=rp(o);s.call(l)}}Lp(t,o,r,i)}else o=h6(e,t,r,i,n);return rp(o)}WS=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var e=du(t.pendingLanes);e!==0&&($y(t,e|1),Cn(t,xr()),!(Lt&6)&&(Yc=xr()+500,Ro()))}break;case 13:Ls(function(){var n=ja(r,1);if(n!==null){var i=vn();Li(n,r,1,i)}}),_1(r,1)}};Uy=function(r){if(r.tag===13){var t=ja(r,134217728);if(t!==null){var e=vn();Li(t,r,134217728,e)}_1(r,134217728)}};qS=function(r){if(r.tag===13){var t=Po(r),e=ja(r,t);if(e!==null){var n=vn();Li(e,r,t,n)}_1(r,t)}};HS=function(){return Ut};GS=function(r,t){var e=Ut;try{return Ut=r,t()}finally{Ut=e}};i0=function(r,t,e){switch(t){case"input":if(Jg(r,e),t=e.name,e.type==="radio"&&t!=null){for(e=r;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==r&&n.form===r.form){var i=xp(n);if(!i)throw Error(Ae(90));kS(n),Jg(n,i)}}}break;case"textarea":TS(r,e);break;case"select":t=e.value,t!=null&&Nc(r,!!e.multiple,t,!1)}};RS=p1;jS=Ls;var p6={usingClientEntryPoint:!1,Events:[sf,Sc,xp,OS,NS,p1]},eu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v6={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ma.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=DS(r),r===null?null:r.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||d6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{yp=Sd.inject(v6),Zi=Sd}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p6;Kn.createPortal=function(r,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b1(t))throw Error(Ae(200));return f6(r,t,null,e)};Kn.createRoot=function(r,t){if(!b1(r))throw Error(Ae(299));var e=!1,n="",i=v4;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=y1(r,1,!1,null,null,e,!1,n,i),r[Ra]=t.current,Bu(r.nodeType===8?r.parentNode:r),new w1(t)};Kn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(Ae(188)):(r=Object.keys(r).join(","),Error(Ae(268,r)));return r=DS(t),r=r===null?null:r.stateNode,r};Kn.flushSync=function(r){return Ls(r)};Kn.hydrate=function(r,t,e){if(!Op(t))throw Error(Ae(200));return Np(null,r,t,!0,e)};Kn.hydrateRoot=function(r,t,e){if(!b1(r))throw Error(Ae(405));var n=e!=null&&e.hydratedSources||null,i=!1,a="",o=v4;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=p4(t,null,r,1,e??null,i,!1,a,o),r[Ra]=t.current,Bu(r),n)for(r=0;r<n.length;r++)e=n[r],i=e._getVersion,i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i);return new Ap(t)};Kn.render=function(r,t,e){if(!Op(t))throw Error(Ae(200));return Np(null,r,t,!1,e)};Kn.unmountComponentAtNode=function(r){if(!Op(r))throw Error(Ae(40));return r._reactRootContainer?(Ls(function(){Np(null,null,r,!1,function(){r._reactRootContainer=null,r[Ra]=null})}),!0):!1};Kn.unstable_batchedUpdates=p1;Kn.unstable_renderSubtreeIntoContainer=function(r,t,e,n){if(!Op(e))throw Error(Ae(200));if(r==null||r._reactInternals===void 0)throw Error(Ae(38));return Np(r,t,e,!1,n)};Kn.version="18.3.1-next-f1338f8080-20240426";function m4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m4)}catch(r){console.error(r)}}m4(),mS.exports=Kn;var m6=mS.exports,mw=m6;Wg.createRoot=mw.createRoot,Wg.hydrateRoot=mw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ku(){return Ku=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Ku.apply(this,arguments)}var mo;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(mo||(mo={}));const gw="popstate";function g6(r){r===void 0&&(r={});function t(n,i){let{pathname:a,search:o,hash:s}=n.location;return D0("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(n,i){return typeof i=="string"?i:y4(i)}return _6(t,e,null,r)}function Or(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function g4(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function y6(){return Math.random().toString(36).substr(2,8)}function yw(r,t){return{usr:r.state,key:r.key,idx:t}}function D0(r,t,e,n){return e===void 0&&(e=null),Ku({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?ol(t):t,{state:e,key:t&&t.key||n||y6()})}function y4(r){let{pathname:t="/",search:e="",hash:n=""}=r;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ol(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substr(e),r=r.substr(0,e));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function _6(r,t,e,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,s=mo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ku({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){s=mo.Pop;let S=u(),_=S==null?null:S-c;c=S,l&&l({action:s,location:b.location,delta:_})}function v(S,_){s=mo.Push;let x=D0(b.location,S,_);c=u()+1;let k=yw(x,c),T=b.createHref(x);try{o.pushState(k,"",T)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(T)}a&&l&&l({action:s,location:b.location,delta:1})}function p(S,_){s=mo.Replace;let x=D0(b.location,S,_);c=u();let k=yw(x,c),T=b.createHref(x);o.replaceState(k,"",T),a&&l&&l({action:s,location:b.location,delta:0})}function y(S){let _=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof S=="string"?S:y4(S);return x=x.replace(/ $/,"%20"),Or(_,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,_)}let b={get action(){return s},get location(){return r(i,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(gw,d),l=S,()=>{i.removeEventListener(gw,d),l=null}},createHref(S){return t(i,S)},createURL:y,encodeLocation(S){let _=y(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:p,go(S){return o.go(S)}};return b}var _w;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(_w||(_w={}));function w6(r,t,e){return e===void 0&&(e="/"),b6(r,t,e)}function b6(r,t,e,n){let i=typeof t=="string"?ol(t):t,a=b4(i.pathname||"/",e);if(a==null)return null;let o=_4(r);x6(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=j6(a);s=O6(o[l],c)}return s}function _4(r,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(Or(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=bs([n,l.relativePath]),u=e.concat(l);a.children&&a.children.length>0&&(Or(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_4(a.children,t,u,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:L6(c,a.index),routesMeta:u})};return r.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of w4(a.path))i(a,o,l)}),t}function w4(r){let t=r.split("/");if(t.length===0)return[];let[e,...n]=t,i=e.endsWith("?"),a=e.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=w4(n.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>r.startsWith("/")&&l===""?"/":l)}function x6(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:A6(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const S6=/^:[\w-]+$/,k6=3,P6=2,T6=1,E6=10,C6=-2,ww=r=>r==="*";function L6(r,t){let e=r.split("/"),n=e.length;return e.some(ww)&&(n+=C6),t&&(n+=P6),e.filter(i=>!ww(i)).reduce((i,a)=>i+(S6.test(a)?k6:a===""?T6:E6),n)}function A6(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function O6(r,t,e){let{routesMeta:n}=r,i={},a="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],c=s===n.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=N6({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),v=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:bs([a,d.pathname]),pathnameBase:F6(bs([a,d.pathnameBase])),route:v}),d.pathnameBase!=="/"&&(a=bs([a,d.pathnameBase]))}return o}function N6(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,n]=R6(r.path,r.caseSensitive,r.end),i=t.match(e);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((c,u,d)=>{let{paramName:v,isOptional:p}=u;if(v==="*"){let b=s[d]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const y=s[d];return p&&!y?c[v]=void 0:c[v]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:r}}function R6(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),g4(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function j6(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return g4(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function b4(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=r.charAt(e);return n&&n!=="/"?null:r.slice(e)||"/"}function I6(r,t){t===void 0&&(t="/");let{pathname:e,search:n="",hash:i=""}=typeof r=="string"?ol(r):r;return{pathname:e?e.startsWith("/")?e:M6(e,t):t,search:B6(n),hash:$6(i)}}function M6(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function Nm(r,t,e,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function D6(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function x4(r,t){let e=D6(r);return t?e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):e.map(n=>n.pathnameBase)}function S4(r,t,e,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=ol(r):(i=Ku({},r),Or(!i.pathname||!i.pathname.includes("?"),Nm("?","pathname","search",i)),Or(!i.pathname||!i.pathname.includes("#"),Nm("#","pathname","hash",i)),Or(!i.search||!i.search.includes("#"),Nm("#","search","hash",i)));let a=r===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=e;else{let d=t.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),d-=1;i.pathname=v.join("/")}s=d>=0?t[d]:"/"}let l=I6(i,s),c=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const bs=r=>r.join("/").replace(/\/\/+/g,"/"),F6=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),B6=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,$6=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function U6(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const k4=["post","put","patch","delete"];new Set(k4);const V6=["get",...k4];new Set(V6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qu(){return Qu=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Qu.apply(this,arguments)}const x1=fe.createContext(null),z6=fe.createContext(null),lf=fe.createContext(null),Rp=fe.createContext(null),jo=fe.createContext({outlet:null,matches:[],isDataRoute:!1}),P4=fe.createContext(null);function uf(){return fe.useContext(Rp)!=null}function jp(){return uf()||Or(!1),fe.useContext(Rp).location}function T4(r){fe.useContext(lf).static||fe.useLayoutEffect(r)}function E4(){let{isDataRoute:r}=fe.useContext(jo);return r?rN():W6()}function W6(){uf()||Or(!1);let r=fe.useContext(x1),{basename:t,future:e,navigator:n}=fe.useContext(lf),{matches:i}=fe.useContext(jo),{pathname:a}=jp(),o=JSON.stringify(x4(i,e.v7_relativeSplatPath)),s=fe.useRef(!1);return T4(()=>{s.current=!0}),fe.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){n.go(c);return}let d=S4(c,JSON.parse(o),a,u.relative==="path");r==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:bs([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,o,a,r])}function C4(){let{matches:r}=fe.useContext(jo),t=r[r.length-1];return t?t.params:{}}function q6(r,t){return H6(r,t)}function H6(r,t,e,n){uf()||Or(!1);let{navigator:i}=fe.useContext(lf),{matches:a}=fe.useContext(jo),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=jp(),u;if(t){var d;let S=typeof t=="string"?ol(t):t;l==="/"||(d=S.pathname)!=null&&d.startsWith(l)||Or(!1),u=S}else u=c;let v=u.pathname||"/",p=v;if(l!=="/"){let S=l.replace(/^\//,"").split("/");p="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=w6(r,{pathname:p}),b=J6(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},s,S.params),pathname:bs([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:bs([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,e,n);return t&&b?fe.createElement(Rp.Provider,{value:{location:Qu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:mo.Pop}},b):b}function G6(){let r=tN(),t=U6(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return fe.createElement(fe.Fragment,null,fe.createElement("h2",null,"Unexpected Application Error!"),fe.createElement("h3",{style:{fontStyle:"italic"}},t),e?fe.createElement("pre",{style:i},e):null,null)}const K6=fe.createElement(G6,null);class Q6 extends fe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?fe.createElement(jo.Provider,{value:this.props.routeContext},fe.createElement(P4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y6(r){let{routeContext:t,match:e,children:n}=r,i=fe.useContext(x1);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),fe.createElement(jo.Provider,{value:t},n)}function J6(r,t,e,n){var i;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),r==null){var a;if(!e)return null;if(e.errors)r=e.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let o=r,s=(i=e)==null?void 0:i.errors;if(s!=null){let u=o.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||Or(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(e&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:v,errors:p}=e,y=d.route.loader&&v[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,v)=>{let p,y=!1,b=null,S=null;e&&(p=s&&d.route.id?s[d.route.id]:void 0,b=d.route.errorElement||K6,l&&(c<0&&v===0?(nN("route-fallback"),y=!0,S=null):c===v&&(y=!0,S=d.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,v+1)),x=()=>{let k;return p?k=b:y?k=S:d.route.Component?k=fe.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=u,fe.createElement(Y6,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:e!=null},children:k})};return e&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?fe.createElement(Q6,{location:e.location,revalidation:e.revalidation,component:b,error:p,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):x()},null)}var L4=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(L4||{}),A4=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(A4||{});function X6(r){let t=fe.useContext(x1);return t||Or(!1),t}function Z6(r){let t=fe.useContext(z6);return t||Or(!1),t}function eN(r){let t=fe.useContext(jo);return t||Or(!1),t}function O4(r){let t=eN(),e=t.matches[t.matches.length-1];return e.route.id||Or(!1),e.route.id}function tN(){var r;let t=fe.useContext(P4),e=Z6(),n=O4();return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function rN(){let{router:r}=X6(L4.UseNavigateStable),t=O4(A4.UseNavigateStable),e=fe.useRef(!1);return T4(()=>{e.current=!0}),fe.useCallback(function(i,a){a===void 0&&(a={}),e.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,Qu({fromRouteId:t},a)))},[r,t])}const bw={};function nN(r,t,e){bw[r]||(bw[r]=!0)}function iN(r,t){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function aN(r){let{to:t,replace:e,state:n,relative:i}=r;uf()||Or(!1);let{future:a,static:o}=fe.useContext(lf),{matches:s}=fe.useContext(jo),{pathname:l}=jp(),c=E4(),u=S4(t,x4(s,a.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return fe.useEffect(()=>c(JSON.parse(d),{replace:e,state:n,relative:i}),[c,d,i,e,n]),null}function fc(r){Or(!1)}function oN(r){let{basename:t="/",children:e=null,location:n,navigationType:i=mo.Pop,navigator:a,static:o=!1,future:s}=r;uf()&&Or(!1);let l=t.replace(/^\/*/,"/"),c=fe.useMemo(()=>({basename:l,navigator:a,static:o,future:Qu({v7_relativeSplatPath:!1},s)}),[l,s,a,o]);typeof n=="string"&&(n=ol(n));let{pathname:u="/",search:d="",hash:v="",state:p=null,key:y="default"}=n,b=fe.useMemo(()=>{let S=b4(u,l);return S==null?null:{location:{pathname:S,search:d,hash:v,state:p,key:y},navigationType:i}},[l,u,d,v,p,y,i]);return b==null?null:fe.createElement(lf.Provider,{value:c},fe.createElement(Rp.Provider,{children:e,value:b}))}function sN(r){let{children:t,location:e}=r;return q6(F0(t),e)}new Promise(()=>{});function F0(r,t){t===void 0&&(t=[]);let e=[];return fe.Children.forEach(r,(n,i)=>{if(!fe.isValidElement(n))return;let a=[...t,i];if(n.type===fe.Fragment){e.push.apply(e,F0(n.props.children,a));return}n.type!==fc&&Or(!1),!n.props.index||!n.props.children||Or(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=F0(n.props.children,a)),e.push(o)}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function B0(r){return r===void 0&&(r=""),new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((t,e)=>{let n=r[e];return t.concat(Array.isArray(n)?n.map(i=>[e,i]):[[e,n]])},[]))}function cN(r,t){let e=B0(r);return t&&t.forEach((n,i)=>{e.has(i)||t.getAll(i).forEach(a=>{e.append(i,a)})}),e}const lN="6";try{window.__reactRouterVersion=lN}catch{}const uN="startTransition",xw=aA[uN];function fN(r){let{basename:t,children:e,future:n,window:i}=r,a=fe.useRef();a.current==null&&(a.current=g6({window:i,v5Compat:!0}));let o=a.current,[s,l]=fe.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},u=fe.useCallback(d=>{c&&xw?xw(()=>l(d)):l(d)},[l,c]);return fe.useLayoutEffect(()=>o.listen(u),[o,u]),fe.useEffect(()=>iN(n),[n]),fe.createElement(oN,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o,future:n})}var Sw;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Sw||(Sw={}));var kw;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(kw||(kw={}));function N4(r){let t=fe.useRef(B0(r)),e=fe.useRef(!1),n=jp(),i=fe.useMemo(()=>cN(n.search,e.current?null:t.current),[n.search]),a=E4(),o=fe.useCallback((s,l)=>{const c=B0(typeof s=="function"?s(i):s);e.current=!0,a("?"+c,l)},[a,i]);return[i,o]}var S1={exports:{}},Ip={},Jc={},Mp={},dN=function(r){var t=r.location,e=r.URL;return[t,e].some(function(n){return!n})?function(i){return Promise.reject(new Error("Failed to import: "+i+": dynamicImport is not supported"))}:(r.__twilioVideoImportedModules={},function(i){return i in r.__twilioVideoImportedModules?Promise.resolve(r.__twilioVideoImportedModules[i]):new Function("scope","return import('"+new e(i,t)+"').then(m => scope.__twilioVideoImportedModules['"+i+"'] = m);")(r)})}(globalThis),R4=function(){},Yi="undefined",hN=typeof window!==Yi&&typeof window.navigator!==Yi&&/Trident\/|MSIE /.test(window.navigator.userAgent),$0=["trace","debug","info","warn","error"];function Pw(r,t){var e=r[t];if(typeof e.bind=="function")return e.bind(r);try{return Function.prototype.bind.call(e,r)}catch{return function(){return Function.prototype.apply.apply(e,[r,arguments])}}}function pN(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function vN(r){return r==="debug"&&(r="log"),typeof console===Yi?!1:r==="trace"&&hN?pN:console[r]!==void 0?Pw(console,r):console.log!==void 0?Pw(console,"log"):R4}function j4(r,t){for(var e=0;e<$0.length;e++){var n=$0[e];this[n]=e<r?R4:this.methodFactory(n,r,t)}this.log=this.debug}function mN(r,t,e){return function(){typeof console!==Yi&&(j4.call(this,t,e),this[r].apply(this,arguments))}}function gN(r,t,e){return vN(r)||mN.apply(this,arguments)}function I4(r,t,e){var n=this,i,a="loglevel";typeof r=="string"?a+=":"+r:typeof r=="symbol"&&(a=void 0);function o(c){var u=($0[c]||"silent").toUpperCase();if(!(typeof window===Yi||!a)){try{window.localStorage[a]=u;return}catch{}try{window.document.cookie=encodeURIComponent(a)+"="+u+";"}catch{}}}function s(){var c;if(!(typeof window===Yi||!a)){try{c=window.localStorage[a]}catch{}if(typeof c===Yi)try{var u=window.document.cookie,d=u.indexOf(encodeURIComponent(a)+"=");d!==-1&&(c=/^([^;]+)/.exec(u.slice(d))[1])}catch{}return n.levels[c]===void 0&&(c=void 0),c}}n.name=r,n.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},n.methodFactory=e||gN,n.getLevel=function(){return i},n.setLevel=function(c,u){if(typeof c=="string"&&n.levels[c.toUpperCase()]!==void 0&&(c=n.levels[c.toUpperCase()]),typeof c=="number"&&c>=0&&c<=n.levels.SILENT){if(i=c,u!==!1&&o(c),j4.call(n,c,r),typeof console===Yi&&c<n.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+c},n.setDefaultLevel=function(c){s()||n.setLevel(c,!1)},n.enableAll=function(c){n.setLevel(n.levels.TRACE,c)},n.disableAll=function(c){n.setLevel(n.levels.SILENT,c)};var l=s();l==null&&(l=t??"WARN"),n.setLevel(l,!1)}var ta=new I4,U0={};ta.getLogger=function(t){if(typeof t!="symbol"&&typeof t!="string"||t==="")throw new TypeError("You must supply a name when creating a logger.");var e=U0[t];return e||(e=U0[t]=new I4(t,ta.getLevel(),ta.methodFactory)),e};var yN=typeof window!==Yi?window.log:void 0;ta.noConflict=function(){return typeof window!==Yi&&window.log===ta&&(window.log=yN),ta};ta.getLoggers=function(){return U0};ta.default=ta;var M4=ta,k1={exports:{}};const _N="twilio-video",wN="2.32.1",D4={name:_N,version:wN};k1.exports;(function(r){var t=D4;r.exports.SDK_NAME=t.name+".js",r.exports.SDK_VERSION=t.version,r.exports.SDP_FORMAT="unified",r.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},r.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},r.exports.DEFAULT_ENVIRONMENT="prod",r.exports.DEFAULT_REALM="us1",r.exports.DEFAULT_REGION="gll",r.exports.DEFAULT_LOG_LEVEL="warn",r.exports.DEFAULT_LOGGER_NAME="twilio-video",r.exports.WS_SERVER=function(n,i){return i=i==="gll"?"global":encodeURIComponent(i),n==="prod"?"wss://"+i+".vss.twilio.com/signaling":"wss://"+i+".vss."+n+".twilio.com/signaling"},r.exports.PUBLISH_MAX_ATTEMPTS=5,r.exports.PUBLISH_BACKOFF_JITTER=10,r.exports.PUBLISH_BACKOFF_MS=20;function e(n){return["a","e","i","o","u"].includes(n.toLowerCase()[0])?"an":"a"}r.exports.typeErrors={ILLEGAL_INVOKE:function(n,i){return new TypeError("Illegal call to "+n+": "+i)},INVALID_TYPE:function(n,i){return new TypeError(n+" must be "+e(i)+" "+i)},INVALID_VALUE:function(n,i){return new RangeError(n+" must be one of "+i.join(", "))},REQUIRED_ARGUMENT:function(n){return new TypeError(n+" must be specified")}},r.exports.DEFAULT_FRAME_RATE=24,r.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,r.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,r.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,r.exports.DEFAULT_NQ_LEVEL_LOCAL=1,r.exports.DEFAULT_NQ_LEVEL_REMOTE=0,r.exports.MAX_NQ_LEVEL=3,r.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,r.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,r.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:r.exports.DEFAULT_SESSION_TIMEOUT_SEC*1e3,jitter:1},r.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},r.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},r.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},r.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},r.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},r.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}})(k1);var zt=k1.exports,bN=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},xN=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},SN=M4.getLogger,F4=zt,Tw=F4.DEFAULT_LOG_LEVEL,kN=F4.DEFAULT_LOGGER_NAME,vh=zt.typeErrors,tu;function PN(r){if(tu=tu||new Map,tu.has(r))return tu.get(r);var t=new Set;return tu.set(r,t),t}var P1=function(){function r(t,e,n,i,a){if(typeof t!="string")throw vh.INVALID_TYPE("moduleName","string");if(!e)throw vh.REQUIRED_ARGUMENT("component");typeof n!="object"&&(n={}),a=a||SN,Ew(n),Object.defineProperties(this,{_component:{value:e},_logLevels:{value:n},_warnings:{value:new Set},_loggerName:{get:function(){var s=i&&typeof i=="string"?i:kN;return this._logLevelsEqual||(s=s+"-"+t),s}},_logger:{get:function(){var s=a(this._loggerName),l=this._logLevels[t]||Tw;return l=l==="off"?"silent":l,s.setDefaultLevel(l),s}},_logLevelsEqual:{get:function(){return new Set(Object.values(this._logLevels)).size===1}},logLevel:{get:function(){return r.getLevelByName(n[t]||Tw)}},name:{get:e.toString.bind(e)}})}return r.getLevelByName=function(t){return isNaN(t)?(t=t.toUpperCase(),U4(t),r[t]):parseInt(t,10)},r.prototype.createLog=function(t,e){var n=this._loggerName;return this._logLevelsEqual||(n=n.substring(0,n.lastIndexOf("-"))),new r(t,e,this._logLevels,n)},r.prototype.setLevels=function(t){return Ew(t),Object.assign(this._logLevels,t),this},r.prototype.log=function(t,e){var n=r._levels[t];if(!n)throw vh.INVALID_VALUE("logLevel",$4);n=n.toLowerCase();var i=[new Date().toISOString(),n,this.name];return(this._logger[n]||function(){}).apply(void 0,xN([],bN(i.concat(e)))),this},r.prototype.debug=function(){return this.log(r.DEBUG,[].slice.call(arguments))},r.prototype.deprecated=function(t){var e=PN(this._component.constructor);return e.has(t)?this:(e.add(t),this.warn(t))},r.prototype.info=function(){return this.log(r.INFO,[].slice.call(arguments))},r.prototype.warn=function(){return this.log(r.WARN,[].slice.call(arguments))},r.prototype.warnOnce=function(t){return this._warnings.has(t)?this:(this._warnings.add(t),this.warn(t))},r.prototype.error=function(){return this.log(r.ERROR,[].slice.call(arguments))},r.prototype.throw=function(t,e){throw t.clone&&(t=t.clone(e)),this.log(r.ERROR,t),t},r}();Object.defineProperties(P1,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var B4={},$4=[],TN=P1._levels.map(function(r,t){return B4[r]=!0,$4.push(t),r});function U4(r){if(!(r in B4))throw vh.INVALID_VALUE("level",TN)}function Ew(r){Object.keys(r).forEach(function(t){U4(r[t].toUpperCase())})}var Da=P1,EN=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},CN=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Mp,"__esModule",{value:!0});Mp.createNoiseCancellationAudioProcessor=void 0;var LN=dN,AN={krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}},ON=function(r){var t=r.supportedVersion,e=r.plugin,n=r.log;if(!e.getVersion||!e.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var i=e.getVersion();n.debug("Plugin Version = "+i);var a=t.split(".").map(function(c){return Number(c)}),o=i.split(".").map(function(c){return Number(c)});if(a.length!==3||o.length!==3)throw new Error("Unsupported Plugin version format: "+t+", "+i);if(a[0]!==o[0])throw new Error("Major version mismatch: [Plugin version "+i+"],  [Supported Version "+t+"]");if(o[1]<a[1])throw new Error("Minor version mismatch: [Plugin version "+i+"] < [Supported Version "+t+"]");var s=new AudioContext,l=e.isSupported(s);if(s.close(),!l)throw new Error("Noise Cancellation plugin is not supported on your browser")},Cw=new Map;function NN(r,t){return EN(this,void 0,void 0,function(){var e,n,i,a,o,s,l,c,u;return CN(this,function(d){switch(d.label){case 0:if(e=Cw.get(r.vendor),e)return[3,6];if(n=AN[r.vendor],!n)throw new Error("Unsupported NoiseCancellationOptions.vendor: "+r.vendor);i=n.supportedVersion,a=n.pluginFile,o=r.sdkAssetsPath,s=o+"/"+a,d.label=1;case 1:return d.trys.push([1,5,,6]),t.debug("loading noise cancellation sdk: ",s),[4,LN(s)];case 2:return l=d.sent(),t.debug("Loaded noise cancellation sdk:",l),c=l.default,ON({supportedVersion:i,plugin:c,log:t}),c.isInitialized()?[3,4]:(t.debug("initializing noise cancellation sdk: ",o),[4,c.init({rootDir:o})]);case 3:d.sent(),t.debug("noise cancellation sdk initialized!"),d.label=4;case 4:return e={vendor:r.vendor,isInitialized:function(){return c.isInitialized()},isConnected:function(){return c.isConnected()},isEnabled:function(){return c.isEnabled()},disconnect:function(){return c.disconnect()},enable:function(){return c.enable()},disable:function(){return c.disable()},destroy:function(){return c.destroy()},setLogging:function(v){return c.setLogging(v)},connect:function(v){t.debug("connect: ",v.id),c.isConnected()&&c.disconnect();var p=c.connect(new MediaStream([v]));if(!p)throw new Error("Error connecting with noise cancellation sdk");var y=p.getAudioTracks()[0];if(!y)throw new Error("Error getting clean track from noise cancellation sdk");return c.enable(),y}},Cw.set(r.vendor,e),[3,6];case 5:throw u=d.sent(),t.error("Error loading noise cancellation sdk:"+s,u),u;case 6:return[2,e]}})})}Mp.createNoiseCancellationAudioProcessor=NN;var V4=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},z4=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.applyNoiseCancellation=Jc.NoiseCancellationImpl=void 0;var RN=Mp,W4=function(){function r(t,e){this._processor=t,this._sourceTrack=e,this._disabledPermanent=!1}return Object.defineProperty(r.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),r.prototype.enable=function(){if(this._disabledPermanent)throw new Error(this.vendor+" noise cancellation is disabled permanently for this track");return this._processor.enable(),Promise.resolve()},r.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},r.prototype.reacquireTrack=function(t){return V4(this,void 0,void 0,function(){var e,n,i;return z4(this,function(a){switch(a.label){case 0:return e=this._processor.isEnabled(),this._processor.disconnect(),[4,t()];case 1:return n=a.sent(),this._sourceTrack=n,[4,this._processor.connect(n)];case 2:return i=a.sent(),e?this._processor.enable():this._processor.disable(),[2,i]}})})},r.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},r.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},r}();Jc.NoiseCancellationImpl=W4;function jN(r,t,e){return V4(this,void 0,void 0,function(){var n,i,a,o;return z4(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,RN.createNoiseCancellationAudioProcessor(t,e)];case 1:return n=s.sent(),i=n.connect(r),a=new W4(n,r),[2,{cleanTrack:i,noiseCancellation:a}];case 2:return o=s.sent(),e.warn("Failed to create noise cancellation. Returning normal audio track: "+o),[2,{cleanTrack:r}];case 3:return[2]}})})}Jc.applyNoiseCancellation=jN;var $e={},Dt={},q4=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},IN=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};function MN(){var r={};return r.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),r}function DN(r,t,e,n){if(!(n in t)&&!n.match(/^on[a-z]+$/)){var i=!1;try{var a=Object.getOwnPropertyDescriptor(r,n);i=a&&!!a.get}catch{}if(!i){var o;try{o=typeof r[n]}catch{}o==="function"&&(t[n]=function(){return this[e][n].apply(this[e],arguments)})}}}function FN(r,t,e){for(var n in r)DN(r,t,e,n)}function BN(r,t){r=Array.isArray(r)?new Set(r):new Set(r.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var e=new Set;return r.forEach(function(n){t.has(n)||e.add(n)}),e}function $N(r,t){var e=r instanceof Map||r instanceof Set?Array.from(r.values()):r;return e.reduce(function(n,i){return n.concat(t(i))},[])}function T1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:null}function E1(r){return typeof r>"u"&&(r=T1()),/Chrome|CriOS/.test(r)?"chrome":/Firefox|FxiOS/.test(r)?"firefox":/Safari|iPhone|iPad|iPod/.test(r)?"safari":null}function UN(r){typeof r>"u"&&(r=T1());var t={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[E1(r)];if(!t)return null;var e=new RegExp("("+t+")/([^\\s]+)"),n=q4(r.match(e)||[],3),i=n[2];if(!i)return null;var a=i.split(".").map(Number);return{major:isNaN(a[0])?null:a[0],minor:isNaN(a[1])?null:a[1]}}function VN(r){return typeof r>"u"&&(r=T1()),/Mobi/.test(r)&&E1()==="chrome"&&/iPad|iPhone|iPod/.test(r)}function zN(r,t){var e=null;Object.defineProperty(r,"on"+t,{get:function(){return e},set:function(n){e&&this.removeEventListener(t,e),typeof n=="function"?(e=n,this.addEventListener(t,e)):e=null}})}function WN(r,t,e){return t?r.then(t,e):r}function qN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=Math.random()*16|0,e=r==="x"?t:t&3|8;return e.toString(16)})}function HN(r,t,e){Object.getOwnPropertyNames(r).forEach(function(n){GN(r,t,e,n)})}function GN(r,t,e,n){if(!(n in t)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(t,n,{value:null,writable:!0}),e.addEventListener(n.slice(2),function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return t.dispatchEvent.apply(t,IN([],q4(i)))});return}Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}}function KN(){return typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"&&typeof RTCPeerConnection=="function"}function QN(r){if(typeof RTCRtpSender<"u"&&typeof RTCRtpSender.getCapabilities=="function")return Promise.resolve(new Set(RTCRtpSender.getCapabilities(r).codecs.map(function(e){var n=e.mimeType;return n.split("/")[1].toLowerCase()})));if(typeof RTCPeerConnection>"u"||typeof RTCPeerConnection.prototype>"u"||typeof RTCPeerConnection.prototype.addTransceiver!="function"||typeof RTCPeerConnection.prototype.close!="function"||typeof RTCPeerConnection.prototype.createOffer!="function")return Promise.resolve(new Set);var t=new RTCPeerConnection;return t.addTransceiver(r),t.createOffer().then(function(e){var n=e.sdp;return t.close(),new Set((n.match(/^a=rtpmap:.+$/gm)||[]).map(function(i){return i.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()}))},function(){return t.close(),new Set})}var V0=new Map;function YN(r,t){var e=V0.get(t);return e?Promise.resolve(e.has(r.toLowerCase())):QN(t).then(function(n){return V0.set(t,n),n.has(r.toLowerCase())})}function JN(){V0.clear()}Dt.clearCachedSupportedCodecs=JN;Dt.defer=MN;Dt.delegateMethods=FN;Dt.difference=BN;Dt.flatMap=$N;Dt.guessBrowser=E1;Dt.guessBrowserVersion=UN;Dt.isCodecSupported=YN;Dt.isIOSChrome=VN;Dt.interceptEvent=zN;Dt.legacyPromise=WN;Dt.makeUUID=qN;Dt.proxyProperties=HN;Dt.support=KN;var Dp={},Lw="1234567890abcdef",XN=32;function H4(r){for(var t="",e=0;e<XN;e++)t+=Lw.charAt(Math.floor(Math.random()*Lw.length));return""+r+t}Dp.sessionSID=H4("SS");Dp.createSID=H4;var ZN={recordingMediaLost:"recording-media-lost"},G4=ZN,eR=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pn=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},As=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},C1=zt,tR=C1.typeErrors,Rm=C1.trackPriority,rR=Dt,nR=Dp.sessionSID,iR=G4;function aR(r,t){if(r instanceof t.LocalAudioTrack||r instanceof t.LocalVideoTrack||r instanceof t.LocalDataTrack)return r;if(r instanceof t.MediaStreamTrack)return r.kind==="audio"?new t.LocalAudioTrack(r,t):new t.LocalVideoTrack(r,t);throw tR.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function oR(r,t,e,n){var i={audio:n.LocalAudioTrackPublication,video:n.LocalVideoTrackPublication,data:n.LocalDataTrackPublication}[r.kind];return new i(t,r,e,n)}function sR(r){return r[0].toUpperCase()+r.slice(1)}function cR(r,t,e,n){var i=new Set;t.on("newListener",function a(o){e.has(o)&&!i.has(o)&&(n.deprecated(r+"#"+o+" has been deprecated and scheduled for removal in twilio-video.js@2.0.0."+(e.get(o)?" Use "+r+"#"+e.get(o)+" instead.":"")),i.add(o)),i.size>=e.size&&t.removeListener("newListener",a)})}function lR(r,t){r=Array.isArray(r)?new Set(r):new Set(r.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var e=new Set;return r.forEach(function(n){t.has(n)||e.add(n)}),e}function uR(r,t){return Object.keys(r).reduce(function(e,n){return r[n]!==t&&(e[n]=r[n]),e},{})}function fR(r,t){var e=r instanceof Map||r instanceof Set?Array.from(r.values()):r;return t=t||function(i){return i},e.reduce(function(n,i){var a=t(i);return n.concat(a)},[])}function K4(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function dR(){var r=K4(),t=pn(r.match(/\(([^)]+)\)/)||[],2),e=t[1],n=e===void 0?"unknown":e,i=pn(n.split(";").map(function(o){return o.trim()}),1),a=i[0];return a.toLowerCase()}function hR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=Math.random()*16|0,e=r==="x"?t:t&3|8;return e.toString(16)})}function pR(r){var t=null;function e(){t=null,r()}return function(){t&&clearTimeout(t),t=setTimeout(e)}}function vR(r,t,e,n){return new Promise(function(i,a){function o(){var l=[].slice.call(arguments);n&&t.removeListener(n,s),i.apply(void 0,As([],pn(l)))}function s(){var l=[].slice.call(arguments);t.removeListener(e,o),a.apply(void 0,As([],pn(l)))}t.once(e,o),n&&t.once(n,s),r()})}function mR(r,t){return t.split(".").reduce(function(e,n){return e?e[n]:null},r)}function gR(){var r={};return r.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),r}function yR(r,t,e,n){if(!(n in t)&&!n.match(/^on[a-z]+$/)){var i;try{i=typeof r[n]}catch{}i==="function"&&(t[n]=function(){for(var a,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return(a=this[e])[n].apply(a,As([],pn(o)))})}}function _R(r,t,e){for(var n in r)yR(r,t,e,n)}function mh(r,t){if(r===t)return!0;if(typeof r!=typeof t)return!1;if(r===null)return t===null;if(t===null)return!1;if(Array.isArray(r))return Array.isArray(t)&&r.length===t.length&&r.every(function(i,a){return mh(i,t[a])});if(typeof r=="object"){var e=Object.keys(r).sort(),n=Object.keys(t).sort();return!Array.isArray(t)&&mh(e,n)&&e.every(function(i){return mh(r[i],t[i])})}return!1}function Q4(r){return typeof r=="object"&&!Array.isArray(r)}function wR(r,t,e){Object.getOwnPropertyNames(r).forEach(function(n){bR(r,t,e,n)})}function bR(r,t,e,n){if(!(n in t)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(t,n,{value:null,writable:!0}),e.addEventListener(n.slice(2),function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];t.dispatchEvent.apply(t,As([],pn(i)))});return}Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}}function xR(r,t,e){return t?r.then(function(n){t(n)},function(n){e(n)}):r}function SR(r){return typeof r=="string"?{default:r,media:r,signaling:r,webrtc:r}:r}function kR(r,t){return t=t?"Local":"",t+(r.kind||"").replace(/\w{1}/,function(e){return e.toUpperCase()})+"Track"}function PR(r,t){return t=t?"Local":"",t+(r.kind||"").replace(/\w{1}/,function(e){return e.toUpperCase()})+"TrackPublication"}function Y4(r){Object.getOwnPropertyNames(r).forEach(function(t){t.startsWith("_")&&J4(r,t)})}function TR(r,t){return function(e){eR(n,e);function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e.apply(this,As([],pn(i)))||this;return Y4(o),ER(o,t),o}return n}(r)}function J4(r,t){var e=Object.getOwnPropertyDescriptor(r,t);e.enumerable=!1,Object.defineProperty(r,t,e)}function ER(r,t){t===void 0&&(t=[]),t.forEach(function(e){r.hasOwnProperty(e)&&J4(r,e)})}function X4(r){return r.map(Fp)}function CR(r){return X4(As([],pn(r)))}function LR(r){return As([],pn(r.entries())).reduce(function(t,e){var n,i=pn(e,2),a=i[0],o=i[1];return Object.assign((n={},n[a]=Fp(o),n),t)},{})}function AR(r){return Object.entries(r).reduce(function(t,e){var n,i=pn(e,2),a=i[0],o=i[1];return Object.assign((n={},n[a]=Fp(o),n),t)},{})}function Fp(r){return Array.isArray(r)?X4(r):r instanceof Set?CR(r):r instanceof Map?LR(r):r&&typeof r=="object"?AR(r):r}function OR(r){function t(a){return a?"true":"false"}var e={sessionSID:nR,iceServers:(r.iceServers||[]).length,audioTracks:(r.tracks||[]).filter(function(a){return a.kind==="audio"}).length,videoTracks:(r.tracks||[]).filter(function(a){return a.kind==="video"}).length,dataTracks:(r.tracks||[]).filter(function(a){return a.kind==="data"}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(a){var o=pn(a,2),s=o[0],l=o[1];l=l||s,e[l]=t(!!r[s])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(a){var o=pn(a,2),s=o[0],l=o[1];l=l||s,typeof r[s]=="number"?e[l]=r[s]:isNaN(Number(r[s]))||(e[l]=Number(r[s]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(a){var o=pn(a,2),s=o[0],l=o[1];l=l||s,typeof r[s]=="string"?e[l]=r[s]:typeof r[s]=="number"&&s==="name"&&(e[l]=r[s].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(a){a in r&&(e[a]=JSON.stringify(r[a]))}),"networkQuality"in r&&(e.networkQualityConfiguration={},Q4(r.networkQuality)?["local","remote"].forEach(function(a){typeof r.networkQuality[a]=="number"&&(e.networkQualityConfiguration[a]=r.networkQuality[a])}):(e.networkQualityConfiguration.remote=0,e.networkQualityConfiguration.local=r.networkQuality?1:0)),r.bandwidthProfile&&r.bandwidthProfile.video){var n=r.bandwidthProfile.video||{};e.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(a){typeof n[a]=="number"||typeof n[a]=="string"?e.bandwidthProfileOptions[a]=n[a]:typeof n[a]=="boolean"?e.bandwidthProfileOptions[a]=t(n[a]):typeof n[a]=="object"&&(e.bandwidthProfileOptions[a]=JSON.stringify(n[a]))})}var i={RTCPeerConnection:"customRTCPeerConnectionImpl",MediaStream:"customMediaStreamImpl",getUserMedia:"customGetUserMediaImpl",enumerateDevices:"customEnumerateDevicesImpl"};return Object.entries(i).forEach(function(a){var o=pn(a,2),s=o[0],l=o[1];e[l]=t(typeof r[s]<"u")}),{group:"room",name:"connect",level:"info",payload:e}}function NR(r){return Bp(r,[{prop:"video",type:"object",transform:RR}])}function RR(r){return Bp(r,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:IR},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function jR(r,t,e,n,i,a,o){var s={transports:[{type:"data-channel"}]};return Object.assign(r?{active_speaker:s}:{},t?{network_quality:s}:{},a?{render_hints:s}:{},i?{publisher_hints:s}:{},e?{track_priority:s}:{},n?{track_switch_off:s}:{},o?{extension_transcriptions:s}:{})}function jm(r){return Bp(r,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function IR(r){var t=Rm.PRIORITY_HIGH,e=Rm.PRIORITY_LOW,n=Rm.PRIORITY_STANDARD;return Bp(r,[{prop:t,type:"object",transform:jm},{prop:e,type:"object",transform:jm},{prop:n,type:"object",transform:jm}])}function Bp(r,t){return t.reduce(function(e,n){var i,a=n.prop,o=n.type,s=n.payloadProp,l=s===void 0?a:s,c=n.transform,u=c===void 0?function(d){return d}:c;return typeof r[a]===o?Object.assign((i={},i[l]=u(r[a]),i),e):e},{})}function MR(r){return{rules:[{type:r?"include":"exclude",all:!0}],revision:1}}function DR(r){var t,e=(t={},t[iR.recordingMediaLost]="recordings",t);return r.map(function(n){return e[n]}).filter(function(n){return!!n})}function FR(r,t){var e=Math.random();return r-t+Math.floor(2*t*e+.5)}function BR(r,t,e){return t<=r&&r<=e}function $R(r){return rR.guessBrowser()==="chrome"&&r.kind==="video"&&"displaySurface"in r.getSettings()}function UR(r){return r===void 0&&(r=10),new Promise(function(t){return setTimeout(t,r)})}function VR(r,t){return new Promise(function(e){r.addEventListener(t,function n(i){r.removeEventListener(t,n),e(i)})})}$e.constants=C1;$e.createBandwidthProfilePayload=NR;$e.createMediaSignalingPayload=jR;$e.createMediaWarningsPayload=DR;$e.createRoomConnectEventPayload=OR;$e.createSubscribePayload=MR;$e.asLocalTrack=aR;$e.asLocalTrackPublication=oR;$e.capitalize=sR;$e.deprecateEvents=cR;$e.difference=lR;$e.filterObject=uR;$e.flatMap=fR;$e.getPlatform=dR;$e.getUserAgent=K4;$e.hidePrivateProperties=Y4;$e.hidePrivateAndCertainPublicPropertiesInClass=TR;$e.isDeepEqual=mh;$e.isNonArrayObject=Q4;$e.inRange=BR;$e.makeUUID=hR;$e.oncePerTick=pR;$e.promiseFromEvents=vR;$e.getOrNull=mR;$e.defer=gR;$e.delegateMethods=_R;$e.proxyProperties=wR;$e.legacyPromise=xR;$e.buildLogLevels=SR;$e.trackClass=kR;$e.trackPublicationClass=PR;$e.valueToJSON=Fp;$e.withJitter=FR;$e.isChromeScreenShareTrack=$R;$e.waitForSometime=UR;$e.waitForEvent=VR;var On={},Z4=Dt,zR=Z4.flatMap,WR=Z4.guessBrowser,as=null;function qR(){if(typeof as=="boolean")return as;if(typeof RTCPeerConnection>"u")return as=!1,as;try{new RTCPeerConnection({sdpSemantics:"foo"}),as=!1}catch{as=!0}return as}var dc=null;function HR(){dc=null}function GR(){if(!dc)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype){var r=new RTCPeerConnection;try{r.addTransceiver("audio"),dc="unified"}catch{dc="planb"}r.close()}else dc="planb";return dc}function KR(r){return!r||!qR()?GR():{"plan-b":"planb","unified-plan":"unified"}[r]}function QR(){return typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}function YR(r){return{chrome:KR(r),firefox:"unified",safari:QR()}[WR()]||null}function L1(r,t){var e=t.match(new RegExp(r,"gm"))||[];return e.reduce(function(n,i){var a=i.match(new RegExp(r));return a?n.add(a[1]):n},new Set)}function e3(r,t){return L1(r,t)}function t3(r){return e3("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",r)}function r3(r){return e3("^a=msid:.+ +(.+) *$",r)}function n3(r,t){var e="^a=ssrc:([0-9]+) +msid:[^ ]+ +"+t+" *$";return L1(e,r)}function i3(r,t,e){return t===void 0&&(t=".*"),e===void 0&&(e=".*"),r.split(`\r
m=`).slice(1).map(function(n){return"m="+n}).filter(function(n){var i=new RegExp("m="+t,"gm"),a=new RegExp("a="+e,"gm");return i.test(n)&&a.test(n)})}function JR(r){return Array.from(L1("^a=ssrc:([0-9]+) +.*$",r))}function a3(r,t){var e=i3(r),n=new RegExp("^a=msid:[^ ]+ +"+t+" *$","gm"),i=e.filter(function(a){return a.match(n)});return new Set(zR(i,JR))}function o3(r,t,e){return new Map(Array.from(r(e)).map(function(n){return[n,t(e,n)]}))}function XR(r){return o3(t3,n3,r)}function ZR(r){return o3(r3,a3,r)}function s3(r,t,e){var n=r(e),i=new Map;n.forEach(function(s,l){if(!t.has(l)){t.set(l,s);return}var c=Array.from(t.get(l)),u=Array.from(s);c.forEach(function(d,v){var p=u[v];i.set(p,d);var y="^a=ssrc:"+p+" (.*)$",b="a=ssrc:"+d+" $1";e=e.replace(new RegExp(y,"gm"),b)})});var a="^(a=ssrc-group:[^ ]+ +)(.*)$",o=e.match(new RegExp(a,"gm"))||[];return o.forEach(function(s){var l=s.match(new RegExp(a));if(l){var c=l[1],u=l[2],d=u.split(" ").map(function(v){var p=i.get(v);return p||v}).join(" ");e=e.replace(l[0],c+d)}}),e}function e8(r,t){return s3(XR,r,t)}function t8(r,t){return s3(ZR,r,t)}On.clearChromeCachedSdpFormat=HR;On.getSdpFormat=YR;On.getMediaSections=i3;On.getPlanBTrackIds=t3;On.getUnifiedPlanTrackIds=r3;On.getPlanBSSRCs=n3;On.getUnifiedPlanSSRCs=a3;On.updatePlanBTrackIdsToSSRCs=e8;On.updateUnifiedPlanTrackIdsToSSRCs=t8;var Sn=A&&A.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},co=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},A1=Dt,c3=A1.flatMap,r8=A1.guessBrowser,n8=A1.guessBrowserVersion,i8=On.getSdpFormat,O1=r8(),a8=n8(),N1=O1==="chrome",l3=O1==="firefox",u3=O1==="safari",Aw=N1?a8.major:null,o8=32767;function Xc(r,t){return typeof r.get=="function"?r.get(t):r.find(function(e){return e.id===t})}function s8(r,t,e){var n,i,a,o,s,l,c,u,d,v,p,y,b,S,_,x,k,T,R,B,j,F;e===void 0&&(e=!1);var M;if(Array.isArray(r))M=new Map(r.map(function(Fe){return[Fe.id||String(Math.random()),Fe]}));else if(r instanceof Map)M=r;else if(typeof r=="object"&&r!==null){var q=new Map;Object.keys(r).forEach(function(Fe){q.set(Fe,r[Fe])}),M=q}else return new Map;if(!M||!t)return new Map;var O=new Map,L=t.id,z=t.kind,I=null,X=null,Z=null;try{for(var oe=Sn(M),H=oe.next();!H.done;H=oe.next()){var re=co(H.value,2),ue=re[0],ne=re[1];if(e&&ne.type==="inbound-rtp"&&ne.trackIdentifier===L){I=ne,X=ue,Z=ne.ssrc;break}else if(!e&&ne.type==="media-source"&&ne.trackIdentifier===L){I=ne,X=ue;break}else ne.type==="track"&&ne.trackIdentifier===L&&(I||(I=ne,X=ue))}}catch(Fe){n={error:Fe}}finally{try{H&&!H.done&&(i=oe.return)&&i.call(oe)}finally{if(n)throw n.error}}if(!I)if(e){var N=[];try{for(var U=Sn(M),G=U.next();!G.done;G=U.next()){var ee=co(G.value,2),ue=ee[0],ne=ee[1];ne.type==="inbound-rtp"&&(ne.kind===z||ne.mediaType===z)&&N.push({id:ue,stat:ne})}}catch(Fe){a={error:Fe}}finally{try{G&&!G.done&&(o=U.return)&&o.call(U)}finally{if(a)throw a.error}}(N.length===1||N.length>1)&&(I=N[0].stat,X=N[0].id,Z=I.ssrc)}else try{for(var ie=Sn(M),ce=ie.next();!ce.done;ce=ie.next()){var ge=co(ce.value,2),ue=ge[0],ne=ge[1];if(ne.type==="media-source"&&ne.kind===z){I=ne,X=ue;break}}}catch(Fe){s={error:Fe}}finally{try{ce&&!ce.done&&(l=ie.return)&&l.call(ie)}finally{if(s)throw s.error}}if(!I)return O;O.set(X,I);var ve=new Set;if(e){if(I.codecId&&ve.add(I.codecId),I.transportId&&ve.add(I.transportId),I.remoteId&&ve.add(I.remoteId),Z)try{for(var be=Sn(M),Ce=be.next();!Ce.done;Ce=be.next()){var Ie=co(Ce.value,2),ue=Ie[0],ne=Ie[1];ne.type==="remote-outbound-rtp"&&ne.ssrc===Z&&ve.add(ue)}}catch(Fe){c={error:Fe}}finally{try{Ce&&!Ce.done&&(u=be.return)&&u.call(be)}finally{if(c)throw c.error}}try{for(var je=Sn(ve),ye=je.next();!ye.done;ye=je.next()){var J=ye.value;M.has(J)&&O.set(J,M.get(J))}}catch(Fe){d={error:Fe}}finally{try{ye&&!ye.done&&(v=je.return)&&v.call(je)}finally{if(d)throw d.error}}try{for(var we=Sn(M),Oe=we.next();!Oe.done;Oe=we.next()){var Me=co(Oe.value,2),ue=Me[0],ne=Me[1];ne.type==="track"&&ne.trackIdentifier===L&&O.set(ue,ne)}}catch(Fe){p={error:Fe}}finally{try{Oe&&!Oe.done&&(y=we.return)&&y.call(we)}finally{if(p)throw p.error}}}else{try{for(var Pe=Sn(M),De=Pe.next();!De.done;De=Pe.next()){var Ne=co(De.value,2),ue=Ne[0],ne=Ne[1];if(ne.type==="outbound-rtp"&&ne.mediaSourceId===X){O.set(ue,ne),ne.codecId&&ve.add(ne.codecId),ne.transportId&&ve.add(ne.transportId);var ct=ue;try{for(var Ge=(_=void 0,Sn(M)),yt=Ge.next();!yt.done;yt=Ge.next()){var ot=co(yt.value,2),dt=ot[0],At=ot[1];At.type==="remote-inbound-rtp"&&At.localId===ct&&O.set(dt,At)}}catch(mr){_={error:mr}}finally{try{yt&&!yt.done&&(x=Ge.return)&&x.call(Ge)}finally{if(_)throw _.error}}}}}catch(Fe){b={error:Fe}}finally{try{De&&!De.done&&(S=Pe.return)&&S.call(Pe)}finally{if(b)throw b.error}}try{for(var lt=Sn(ve),Ke=lt.next();!Ke.done;Ke=lt.next()){var J=Ke.value;M.has(J)&&O.set(J,M.get(J))}}catch(Fe){k={error:Fe}}finally{try{Ke&&!Ke.done&&(T=lt.return)&&T.call(lt)}finally{if(k)throw k.error}}}var it=null,Xe=new Set;try{for(var Ot=Sn(O.values()),St=Ot.next();!St.done;St=Ot.next()){var ne=St.value;ne.transportId&&Xe.add(ne.transportId)}}catch(Fe){R={error:Fe}}finally{try{St&&!St.done&&(B=Ot.return)&&B.call(Ot)}finally{if(R)throw R.error}}try{for(var We=Sn(Xe),st=We.next();!st.done;st=We.next()){var Nt=st.value;if(M.has(Nt)){var He=M.get(Nt);O.set(Nt,He),He.selectedCandidatePairId&&(it=He.selectedCandidatePairId),He.localCertificateId&&M.has(He.localCertificateId)&&O.set(He.localCertificateId,M.get(He.localCertificateId)),He.remoteCertificateId&&M.has(He.remoteCertificateId)&&O.set(He.remoteCertificateId,M.get(He.remoteCertificateId))}}}catch(Fe){j={error:Fe}}finally{try{st&&!st.done&&(F=We.return)&&F.call(We)}finally{if(j)throw j.error}}if(it&&M.has(it)){var ht=M.get(it);O.set(it,ht),ht.localCandidateId&&M.has(ht.localCandidateId)&&O.set(ht.localCandidateId,M.get(ht.localCandidateId)),ht.remoteCandidateId&&M.has(ht.remoteCandidateId)&&O.set(ht.remoteCandidateId,M.get(ht.remoteCandidateId))}return O}function c8(r,t){return r&&typeof r.getStats=="function"?l8(r,t):Promise.reject(new Error("Given PeerConnection does not support getStats"))}function l8(r,t){var e=kd(r,"audio","local"),n=kd(r,"video","local"),i=kd(r,"audio"),a=kd(r,"video"),o={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},s=c3([[e,"localAudioTrackStats",!1],[n,"localVideoTrackStats",!1],[i,"remoteAudioTrackStats",!0],[a,"remoteVideoTrackStats",!0]],function(l){var c=co(l,3),u=c[0],d=c[1],v=c[2];return u.map(function(p){return p8(r,p,Object.assign({isRemote:v},t)).then(function(y){y.forEach(function(b){b.trackId=p.id,o[d].push(b)})})})});return Promise.all(s).then(function(){return u8(r,t)}).then(function(l){return o.activeIceCandidatePair=l,o})}function u8(r,t){return t===void 0&&(t={}),typeof t.testForChrome<"u"||N1||typeof t.testForSafari<"u"||u3?r.getStats().then(f8):typeof t.testForFirefox<"u"||l3?r.getStats().then(d8):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function f8(r){var t=Array.from(r.values()).find(function(l){var c=l.nominated,u=l.type;return u==="candidate-pair"&&c});if(!t)return null;var e=Xc(r,t.localCandidateId),n=Xc(r,t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],a=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),o=e?a.reduce(function(l,c){var u=c.key,d=c.type;return l[u]=typeof e[u]===d?e[u]:u==="deleted"?!1:null,l},{}):null,s=n?i.reduce(function(l,c){var u=c.key,d=c.type;return l[u]=typeof n[u]===d?n[u]:null,l},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(l){return l==="inprogress"?"in-progress":l}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(l,c){var u=c.key,d=c.type,v=c.fixup;return l[u]=typeof t[u]===d?v?v(t[u]):t[u]:null,l},{localCandidate:o,remoteCandidate:s})}function d8(r){var t=Array.from(r.values()).find(function(c){var u=c.nominated,d=c.type;return d==="candidate-pair"&&u});if(!t)return null;var e=Xc(r,t.localCandidateId),n=Xc(r,t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],a=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),o={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},s=e?a.reduce(function(c,u){var d=u.ffKeys,v=u.key,p=u.type,y=d&&d.find(function(b){return b in e})||v;return c[v]=typeof e[y]===p?y==="candidateType"&&o[e[y]]||e[y]:y==="deleted"?!1:null,c},{}):null,l=n?i.reduce(function(c,u){var d=u.ffKeys,v=u.key,p=u.type,y=d&&d.find(function(b){return b in n})||v;return c[v]=typeof n[y]===p?y==="candidateType"&&o[n[y]]||n[y]:null,c},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(c,u){var d=u.key,v=u.type;return c[d]=typeof t[d]===v?t[d]:null,c},{localCandidate:s,remoteCandidate:l})}function kd(r,t,e){var n=e==="local"?"getSenders":"getReceivers";if(r[n])return r[n]().map(function(o){var s=o.track;return s}).filter(function(o){return o&&o.kind===t});var i=e==="local"?"getLocalStreams":"getRemoteStreams",a=t==="audio"?"getAudioTracks":"getVideoTracks";return c3(r[i](),function(o){return o[a]()})}function h8(r,t){var e,n,i,a,o,s;if(!r||!t)return!1;if(r.getReceivers){var l=r.getReceivers();try{for(var c=Sn(l),u=c.next();!u.done;u=c.next()){var d=u.value;if(d.track&&d.track.id===t.id)return!0}}catch(T){e={error:T}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}}if(r.getRemoteStreams){var v=r.getRemoteStreams();try{for(var p=Sn(v),y=p.next();!y.done;y=p.next()){var b=y.value,S=b.getTracks();try{for(var _=(o=void 0,Sn(S)),x=_.next();!x.done;x=_.next()){var k=x.value;if(k.id===t.id)return!0}}catch(T){o={error:T}}finally{try{x&&!x.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}}}catch(T){i={error:T}}finally{try{y&&!y.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return!1}function p8(r,t,e){return e===void 0&&(e={}),typeof e.testForChrome<"u"||N1?Ow(r,t,e):typeof e.testForFirefox<"u"||l3?v8(r,t,e):typeof e.testForSafari<"u"||u3?typeof e.testForSafari<"u"||i8()==="unified"?Ow(r,t,e):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function Ow(r,t,e){var n=e.log;return Aw&&Aw<67?new Promise(function(i,a){r.getStats(function(o){i([m8(o,t)])},null,a)}):r.getStats(t).then(function(i){return n.info("getStats by track successful"),Nw(i,e)}).catch(function(){return n.warn("getStats by track failed. Getting default stats"),r.getStats().then(function(i){n.info("getStats by default successful");var a=h8(r,t);n.info("Starting filtering stats for "+(a?"remote":"local")+" track");var o=s8(i,t,a);return n.info("Completed filtering stats for "+(a?"remote":"local")+" track"),Nw(o,e)})})}function v8(r,t,e){return r.getStats(t).then(function(n){return[g8(n,e)]})}function m8(r,t){var e=r.result().find(function(i){return i.type==="ssrc"&&i.stat("googTrackId")===t.id}),n={};return e&&(n.timestamp=Math.round(Number(e.timestamp)),n=e.names().reduce(function(i,a){switch(a){case"googCodecName":i.codecName=e.stat(a);break;case"googRtt":i.roundTripTime=Number(e.stat(a));break;case"googJitterReceived":i.jitter=Number(e.stat(a));break;case"googFrameWidthInput":i.frameWidthInput=Number(e.stat(a));break;case"googFrameHeightInput":i.frameHeightInput=Number(e.stat(a));break;case"googFrameWidthSent":i.frameWidthSent=Number(e.stat(a));break;case"googFrameHeightSent":i.frameHeightSent=Number(e.stat(a));break;case"googFrameWidthReceived":i.frameWidthReceived=Number(e.stat(a));break;case"googFrameHeightReceived":i.frameHeightReceived=Number(e.stat(a));break;case"googFrameRateInput":i.frameRateInput=Number(e.stat(a));break;case"googFrameRateSent":i.frameRateSent=Number(e.stat(a));break;case"googFrameRateReceived":i.frameRateReceived=Number(e.stat(a));break;case"ssrc":i[a]=e.stat(a);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":i[a]=Number(e.stat(a));break}return i},n)),n}function Nw(r,t){var e=t.simulateExceptionWhileStandardizingStats,n=e===void 0?!1:e;if(n)throw new Error("Error while gathering stats");var i=null,a=[],o=null,s=null,l=null,c=null,u=null;r.forEach(function(b){var S=b.type;switch(S){case"inbound-rtp":i=b;break;case"outbound-rtp":a.push(b);break;case"media-source":u=b;break;case"track":l=b;break;case"codec":c=b;break;case"remote-inbound-rtp":o=b;break;case"remote-outbound-rtp":s=b;break}});var d=l?l.remoteSource:!u,v=d?[i]:a,p=[],y=d?s:o;return v.forEach(function(b){var S={},_=[b,u,l,c,y&&y.ssrc===b.ssrc?y:null];function x(ee){var ie=_.find(function(ce){return ce&&typeof ce[ee]<"u"})||null;return ie?ie[ee]:null}var k=x("ssrc");typeof k=="number"&&(S.ssrc=String(k));var T=x("timestamp");S.timestamp=Math.round(T);var R=x("mimeType");typeof R=="string"&&(R=R.split("/"),S.codecName=R[R.length-1]);var B=x("roundTripTime");typeof B=="number"&&(S.roundTripTime=Math.round(B*1e3));var j=x("jitter");typeof j=="number"&&(S.jitter=Math.round(j*1e3));var F=x("frameWidth");typeof F=="number"&&(d?S.frameWidthReceived=F:(S.frameWidthSent=F,S.frameWidthInput=l?l.frameWidth:u.width));var M=x("frameHeight");typeof M=="number"&&(d?S.frameHeightReceived=M:(S.frameHeightSent=M,S.frameHeightInput=l?l.frameHeight:u.height));var q=x("framesPerSecond");typeof q=="number"&&(S[d?"frameRateReceived":"frameRateSent"]=q);var O=x("bytesReceived");typeof O=="number"&&(S.bytesReceived=O);var L=x("bytesSent");typeof L=="number"&&(S.bytesSent=L);var z=x("packetsLost");typeof z=="number"&&(S.packetsLost=z);var I=x("packetsReceived");typeof I=="number"&&(S.packetsReceived=I);var X=x("packetsSent");typeof X=="number"&&(S.packetsSent=X);var Z=x("audioLevel");typeof Z=="number"&&(Z=Math.round(Z*o8),d?S.audioOutputLevel=Z:S.audioInputLevel=Z);var oe=x("totalPacketSendDelay");typeof oe=="number"&&(S.totalPacketSendDelay=oe);var H=x("totalEncodeTime");typeof H=="number"&&(S.totalEncodeTime=H);var re=x("framesEncoded");typeof re=="number"&&(S.framesEncoded=re);var ue=x("estimatedPlayoutTimestamp");typeof ue=="number"&&(S.estimatedPlayoutTimestamp=ue);var ne=x("totalDecodeTime");typeof ne=="number"&&(S.totalDecodeTime=ne);var N=x("framesDecoded");typeof N=="number"&&(S.framesDecoded=N);var U=x("jitterBufferDelay");typeof U=="number"&&(S.jitterBufferDelay=U);var G=x("jitterBufferEmittedCount");typeof G=="number"&&(S.jitterBufferEmittedCount=G),p.push(S)}),p}function g8(r,t){r===void 0&&(r=new Map);var e=t.isRemote,n=t.simulateExceptionWhileStandardizingStats,i=n===void 0?!1:n;if(i)throw new Error("Error while gathering stats");var a=null,o=null;r.forEach(function(I){var X=I.isRemote,Z=I.remoteId,oe=I.type;if(!X)switch(oe){case"inbound-rtp":a=I,o=Xc(r,Z);break;case"outbound-rtp":o=I,a=Xc(r,Z);break}});var s=e?a:o,l=e?o:a;function c(I){return s&&typeof s[I]<"u"?s[I]:l&&typeof l[I]<"u"?l[I]:null}var u={},d=c("timestamp");u.timestamp=Math.round(d);var v=c("ssrc");typeof v=="number"&&(u.ssrc=String(v));var p=c("bytesSent");typeof p=="number"&&(u.bytesSent=p);var y=c("packetsLost");typeof y=="number"&&(u.packetsLost=y);var b=c("packetsSent");typeof b=="number"&&(u.packetsSent=b);var S=c("roundTripTime");typeof S=="number"&&(u.roundTripTime=Math.round(S*1e3));var _=c("jitter");typeof _=="number"&&(u.jitter=Math.round(_*1e3));var x=c("framerateMean");typeof x=="number"&&(u.frameRateSent=Math.round(x));var k=c("bytesReceived");typeof k=="number"&&(u.bytesReceived=k);var T=c("packetsReceived");typeof T=="number"&&(u.packetsReceived=T);var R=c("framerateMean");typeof R=="number"&&(u.frameRateReceived=Math.round(R));var B=c("totalPacketSendDelay");typeof B=="number"&&(u.totalPacketSendDelay=B);var j=c("totalEncodeTime");typeof j=="number"&&(u.totalEncodeTime=j);var F=c("framesEncoded");typeof F=="number"&&(u.framesEncoded=F);var M=c("estimatedPlayoutTimestamp");typeof M=="number"&&(u.estimatedPlayoutTimestamp=M);var q=c("totalDecodeTime");typeof q=="number"&&(u.totalDecodeTime=q);var O=c("framesDecoded");typeof O=="number"&&(u.framesDecoded=O);var L=c("jitterBufferDelay");typeof L=="number"&&(u.jitterBufferDelay=L);var z=c("jitterBufferEmittedCount");return typeof z=="number"&&(u.jitterBufferEmittedCount=z),u}var y8=c8;function _8(r){return r===void 0&&(r={audio:!0,video:!0}),typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(r):Promise.reject(new Error("getUserMedia is not supported"))}var w8=_8,z0={exports:{}};typeof MediaStream=="function"?z0.exports=MediaStream:z0.exports=function(){throw new Error("MediaStream is not supported")};var f3=z0.exports,W0={exports:{}};typeof MediaStreamTrack=="function"?W0.exports=MediaStreamTrack:W0.exports=function(){throw new Error("MediaStreamTrack is not supported")};var b8=W0.exports,q0={exports:{}};typeof RTCIceCandidate=="function"?q0.exports=RTCIceCandidate:q0.exports=function(){throw new Error("RTCIceCandidate is not supported")};var x8=q0.exports,hc={exports:{}},Im,Rw;function d3(){if(Rw)return Im;Rw=1;var r=function(){function t(e){this.descriptionInitDict=e;var n=e&&e.type==="rollback"?null:new RTCSessionDescription(e);Object.defineProperties(this,{_description:{get:function(){return n}}})}return Object.defineProperty(t.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),t}();return Im=r,Im}var R1={exports:{}},Fc=typeof Reflect=="object"?Reflect:null,jw=Fc&&typeof Fc.apply=="function"?Fc.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},gh;Fc&&typeof Fc.ownKeys=="function"?gh=Fc.ownKeys:Object.getOwnPropertySymbols?gh=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:gh=function(t){return Object.getOwnPropertyNames(t)};function S8(r){console&&console.warn&&console.warn(r)}var h3=Number.isNaN||function(t){return t!==t};function Vt(){Vt.init.call(this)}R1.exports=Vt;R1.exports.once=E8;Vt.EventEmitter=Vt;Vt.prototype._events=void 0;Vt.prototype._eventsCount=0;Vt.prototype._maxListeners=void 0;var Iw=10;function $p(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Vt,"defaultMaxListeners",{enumerable:!0,get:function(){return Iw},set:function(r){if(typeof r!="number"||r<0||h3(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Iw=r}});Vt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Vt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||h3(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function p3(r){return r._maxListeners===void 0?Vt.defaultMaxListeners:r._maxListeners}Vt.prototype.getMaxListeners=function(){return p3(this)};Vt.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")jw(l,this,e);else for(var c=l.length,u=_3(l,c),n=0;n<c;++n)jw(u[n],this,e);return!0};function v3(r,t,e,n){var i,a,o;if($p(e),a=r._events,a===void 0?(a=r._events=Object.create(null),r._eventsCount=0):(a.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),a=r._events),o=a[t]),o===void 0)o=a[t]=e,++r._eventsCount;else if(typeof o=="function"?o=a[t]=n?[e,o]:[o,e]:n?o.unshift(e):o.push(e),i=p3(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=r,s.type=t,s.count=o.length,S8(s)}return r}Vt.prototype.addListener=function(t,e){return v3(this,t,e,!1)};Vt.prototype.on=Vt.prototype.addListener;Vt.prototype.prependListener=function(t,e){return v3(this,t,e,!0)};function k8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m3(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},i=k8.bind(n);return i.listener=e,n.wrapFn=i,i}Vt.prototype.once=function(t,e){return $p(e),this.on(t,m3(this,t,e)),this};Vt.prototype.prependOnceListener=function(t,e){return $p(e),this.prependListener(t,m3(this,t,e)),this};Vt.prototype.removeListener=function(t,e){var n,i,a,o,s;if($p(e),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():P8(n,a),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,s||e)}return this};Vt.prototype.off=Vt.prototype.removeListener;Vt.prototype.removeAllListeners=function(t){var e,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function g3(r,t,e){var n=r._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?T8(i):_3(i,i.length)}Vt.prototype.listeners=function(t){return g3(this,t,!0)};Vt.prototype.rawListeners=function(t){return g3(this,t,!1)};Vt.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):y3.call(r,t)};Vt.prototype.listenerCount=y3;function y3(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}Vt.prototype.eventNames=function(){return this._eventsCount>0?gh(this._events):[]};function _3(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function P8(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function T8(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function E8(r,t){return new Promise(function(e,n){function i(o){r.removeListener(t,a),n(o)}function a(){typeof r.removeListener=="function"&&r.removeListener("error",i),e([].slice.call(arguments))}w3(r,t,a,{once:!0}),t!=="error"&&C8(r,i,{once:!0})})}function C8(r,t,e){typeof r.on=="function"&&w3(r,"error",t,e)}function w3(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function i(a){n.once&&r.removeEventListener(t,i),e(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var yn=R1.exports,Mm,Mw;function j1(){if(Mw)return Mm;Mw=1;var r=A&&A.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var s=o.call(i),l,c=[],u;try{for(;(a===void 0||a-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(d){u={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(u)throw u.error}}return c},t=A&&A.__spreadArray||function(i,a){for(var o=0,s=a.length,l=i.length;o<s;o++,l++)i[l]=a[o];return i},e=yn.EventEmitter,n=function(){function i(){Object.defineProperties(this,{_eventEmitter:{value:new e}})}return i.prototype.dispatchEvent=function(a){return this._eventEmitter.emit(a.type,a)},i.prototype.addEventListener=function(){var a;return(a=this._eventEmitter).addListener.apply(a,t([],r(arguments)))},i.prototype.removeEventListener=function(){var a;return(a=this._eventEmitter).removeListener.apply(a,t([],r(arguments)))},i}();return Mm=n,Mm}var Dm,Dw;function b3(){if(Dw)return Dm;Dw=1;var r=Dt.defer,t={high:new Set(["low"]),low:new Set(["high"])},e=function(){function i(a){a===void 0&&(a="low");var o=a;Object.defineProperties(this,{_state:{set:function(s){var l=this;if(o!==s){o=s;var c=this._whenDeferreds.get(o);c.forEach(function(u){return u.resolve(l)}),c.clear()}},get:function(){return o}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),i.prototype.lower=function(){return this.transition("low")},i.prototype.raise=function(){return this.transition("high")},i.prototype.transition=function(a){if(!t[this.state].has(a))throw n(this.state,a);return this._state=a,this},i.prototype.when=function(a){if(this.state===a)return Promise.resolve(this);if(!t[this.state].has(a))return Promise.reject(n(this.state,a));var o=r();return this._whenDeferreds.get(a).add(o),o.promise},i}();function n(i,a){return new Error('Cannot transition from "'+i+'" to "'+a+'"')}return Dm=e,Dm}var Fm,Fw;function L8(){if(Fw)return Fm;Fw=1;var r=function(){function t(e){Object.defineProperties(this,{track:{enumerable:!0,value:e,writable:!0}})}return t}();return Fm=r,Fm}var Bm,Bw;function A8(){if(Bw)return Bm;Bw=1;var r=A&&A.__extends||function(){var L=function(z,I){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,Z){X.__proto__=Z}||function(X,Z){for(var oe in Z)Object.prototype.hasOwnProperty.call(Z,oe)&&(X[oe]=Z[oe])},L(z,I)};return function(z,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");L(z,I);function X(){this.constructor=z}z.prototype=I===null?Object.create(I):(X.prototype=I.prototype,new X)}}(),t=A&&A.__read||function(L,z){var I=typeof Symbol=="function"&&L[Symbol.iterator];if(!I)return L;var X=I.call(L),Z,oe=[],H;try{for(;(z===void 0||z-- >0)&&!(Z=X.next()).done;)oe.push(Z.value)}catch(re){H={error:re}}finally{try{Z&&!Z.done&&(I=X.return)&&I.call(X)}finally{if(H)throw H.error}}return oe},e=A&&A.__spreadArray||function(L,z){for(var I=0,X=z.length,Z=L.length;I<X;I++,Z++)L[Z]=z[I];return L},n=d3(),i=j1(),a=b3(),o=f3,s=L8(),l=On,c=l.getSdpFormat,u=l.updatePlanBTrackIdsToSSRCs,d=l.updateUnifiedPlanTrackIdsToSSRCs,v=Dt,p=v.delegateMethods,y=v.interceptEvent,b=v.isIOSChrome,S=v.legacyPromise,_=v.proxyProperties,x=c()==="unified",k=function(L){r(z,L);function z(I,X){I===void 0&&(I={});var Z=L.call(this)||this,oe=Object.assign(I.iceTransportPolicy?{iceTransports:I.iceTransportPolicy}:{},I);y(Z,"datachannel"),y(Z,"signalingstatechange");var H=c(oe.sdpSemantics),re=new RTCPeerConnection(oe,X);return Object.defineProperties(Z,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new o},_peerConnection:{value:re},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:H},_senders:{value:new Map},_signalingStateLatch:{value:new a},_tracksToSSRCs:{value:new Map,writable:!0}}),re.addEventListener("datachannel",function(ue){q(ue.channel),Z.dispatchEvent(ue)}),re.addEventListener("signalingstatechange",function(){for(var ue=[],ne=0;ne<arguments.length;ne++)ue[ne]=arguments[ne];re.signalingState==="stable"&&(Z._appliedTracksToSSRCs=new Map(Z._tracksToSSRCs)),!Z._pendingLocalOffer&&!Z._pendingRemoteOffer&&Z.dispatchEvent.apply(Z,e([],t(ue)))}),re.ontrack=function(){},typeof re.addTrack!="function"&&re.addStream(Z._localStream),_(RTCPeerConnection.prototype,Z,re),Z}return Object.defineProperty(z.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(z.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),z.prototype.addTrack=function(I){for(var X,Z=[],oe=1;oe<arguments.length;oe++)Z[oe-1]=arguments[oe];if(typeof this._peerConnection.addTrack=="function")return(X=this._peerConnection).addTrack.apply(X,e([I],t(Z)));if(this._peerConnection.signalingState==="closed")throw new Error("Cannot add MediaStreamTrack ["+I.id+`, 
        `+I.kind+"]: RTCPeerConnection is closed");var H=this._senders.get(I);if(H&&H.track)throw new Error("Cannot add MediaStreamTrack ['"+I.id+`, 
        `+I.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(I),this._peerConnection.addStream(this._localStream),H=new s(I),this._senders.set(I,H),H},z.prototype.removeTrack=function(I){if(this._peerConnection.signalingState==="closed")throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if(typeof this._peerConnection.addTrack=="function")try{return this._peerConnection.removeTrack(I)}catch{}else{var X=I.track;if(!X)return;I=this._senders.get(X),I&&I.track&&(I.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(X),this._peerConnection.addStream(this._localStream))}},z.prototype.getSenders=function(){return typeof this._peerConnection.addTrack=="function"?this._peerConnection.getSenders():Array.from(this._senders.values())},z.prototype.addIceCandidate=function(I){for(var X=this,Z=[],oe=1;oe<arguments.length;oe++)Z[oe-1]=arguments[oe];var H;return this.signalingState==="have-remote-offer"?H=this._signalingStateLatch.when("low").then(function(){return X._peerConnection.addIceCandidate(I)}):H=this._peerConnection.addIceCandidate(I),Z.length>0?S.apply(void 0,e([H],t(Z))):H},z.prototype.close=function(){this.signalingState!=="closed"&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},z.prototype.createAnswer=function(){for(var I=this,X=[],Z=0;Z<arguments.length;Z++)X[Z]=arguments[Z];var oe;return this._pendingRemoteOffer?oe=this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return I._signalingStateLatch.lower(),I._peerConnection.createAnswer()}).then(function(H){return I._pendingRemoteOffer=null,I._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:O(I._sdpFormat,I._tracksToSSRCs,H.sdp)})},function(H){throw I._pendingRemoteOffer=null,H}):oe=this._peerConnection.createAnswer().then(function(H){return I._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:O(I._sdpFormat,I._tracksToSSRCs,H.sdp)})}),X.length>1?S.apply(void 0,e([oe],t(X))):oe},z.prototype.createOffer=function(){for(var I=this,X=[],Z=0;Z<arguments.length;Z++)X[Z]=arguments[Z];var oe=t(X,3),H=oe[0],re=oe[1],ue=oe[2],ne=ue||H||{};if(b()){if(ne.offerToReceiveVideo&&!this._audioTransceiver&&!(x&&B(this,"audio"))){delete ne.offerToReceiveAudio;try{this._audioTransceiver=x?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(U){return Promise.reject(U)}}if(ne.offerToReceiveVideo&&!this._videoTransceiver&&!(x&&B(this,"video"))){delete ne.offerToReceiveVideo;try{this._videoTransceiver=x?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(U){return Promise.reject(U)}}}var N=this._peerConnection.createOffer(ne).then(function(U){return I._rolledBackTracksToSSRCs.clear(),new n({type:U.type,sdp:O(I._sdpFormat,I._tracksToSSRCs,U.sdp)})});return X.length>1?S(N,H,re):N},z.prototype.createDataChannel=function(I,X){X=M(X);var Z=this._peerConnection.createDataChannel(I,X);return q(Z),Z},z.prototype.setLocalDescription=function(){for(var I=[],X=0;X<arguments.length;X++)I[X]=arguments[X];var Z=t(I,3),oe=Z[0],H=Z[1],re=Z[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var ue=T(this,!0,oe);return I.length>1?S(ue,H,re):ue},z.prototype.setRemoteDescription=function(){for(var I=[],X=0;X<arguments.length;X++)I[X]=arguments[X];var Z=t(I,3),oe=Z[0],H=Z[1],re=Z[2];this._rolledBackTracksToSSRCs.clear();var ue=T(this,!1,oe);return I.length>1?S(ue,H,re):ue},z}(i);p(RTCPeerConnection.prototype,k.prototype,"_peerConnection");function T(L,z,I){function X(U){z?L._pendingLocalOffer=U:L._pendingRemoteOffer=U}function Z(){z?L._pendingLocalOffer=null:L._pendingRemoteOffer=null}var oe=z?L._pendingLocalOffer:L._pendingRemoteOffer,H=z?L._pendingRemoteOffer:L._pendingLocalOffer,re=z?"have-local-offer":"have-remote-offer",ue=z?"setLocalDescription":"setRemoteDescription",ne;if(!z&&H&&I.type==="answer")ne=R(L,I);else if(I.type==="offer"){if(L.signalingState!==re&&L.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+(z?"local":"remote")+" offer in state "+L.signalingState));!oe&&L._signalingStateLatch.state==="low"&&L._signalingStateLatch.raise();var N=L.signalingState;X(j(I)),ne=Promise.resolve(),L.signalingState!==N&&ne.then(function(){return L.dispatchEvent(new Event("signalingstatechange"))})}else I.type==="rollback"&&(L.signalingState!==re?ne=Promise.reject(new Error("Cannot rollback "+(z?"local":"remote")+" description in "+L.signalingState)):(Z(),L._rolledBackTracksToSSRCs=new Map(L._tracksToSSRCs),L._tracksToSSRCs=new Map(L._appliedTracksToSSRCs),ne=Promise.resolve(),ne.then(function(){return L.dispatchEvent(new Event("signalingstatechange"))})));return ne||L._peerConnection[ue](j(I))}function R(L,z){var I=L._pendingLocalOffer;return L._peerConnection.setLocalDescription(I).then(function(){return L._pendingLocalOffer=null,L.setRemoteDescription(z)}).then(function(){L._signalingStateLatch.lower()})}function B(L,z){return!!L.getTransceivers().find(function(I){var X=I.receiver,Z=X===void 0?{}:X,oe=Z.track,H=oe===void 0?{}:oe;return H.kind===z})}function j(L){return L instanceof n&&L._description?L._description:new RTCSessionDescription(L)}function F(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function M(L){return L=Object.assign({},L),F()&&"maxPacketLifeTime"in L&&(L.maxRetransmitTime=L.maxPacketLifeTime),L}function q(L){return Object.defineProperty(L,"maxRetransmits",{value:L.maxRetransmits===65535?null:L.maxRetransmits}),F()&&Object.defineProperty(L,"maxPacketLifeTime",{value:L.maxRetransmitTime===65535?null:L.maxRetransmitTime}),L}function O(L,z,I){return L==="unified"?d(z,I):u(z,I)}return Bm=k,Bm}var $m,$w;function x3(){return $w||($w=1,$m=RTCSessionDescription),$m}var Um,Uw;function O8(){if(Uw)return Um;Uw=1;var r=A&&A.__extends||function(){var b=function(S,_){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,k){x.__proto__=k}||function(x,k){for(var T in k)Object.prototype.hasOwnProperty.call(k,T)&&(x[T]=k[T])},b(S,_)};return function(S,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");b(S,_);function x(){this.constructor=S}S.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}(),t=A&&A.__read||function(b,S){var _=typeof Symbol=="function"&&b[Symbol.iterator];if(!_)return b;var x=_.call(b),k,T=[],R;try{for(;(S===void 0||S-- >0)&&!(k=x.next()).done;)T.push(k.value)}catch(B){R={error:B}}finally{try{k&&!k.done&&(_=x.return)&&_.call(x)}finally{if(R)throw R.error}}return T},e=A&&A.__spreadArray||function(b,S){for(var _=0,x=S.length,k=b.length;_<x;_++,k++)b[k]=S[_];return b},n=j1(),i=x3(),a=On.updateUnifiedPlanTrackIdsToSSRCs,o=Dt,s=o.delegateMethods,l=o.interceptEvent,c=o.legacyPromise,u=o.proxyProperties,d=function(b){r(S,b);function S(_){var x=b.call(this)||this;l(x,"signalingstatechange");var k=new RTCPeerConnection(_);Object.defineProperties(x,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:k},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}});var T;return k.addEventListener("signalingstatechange",function(){for(var R=[],B=0;B<arguments.length;B++)R[B]=arguments[B];!x._rollingBack&&x.signalingState!==T&&(T=x.signalingState,x._isClosed?setTimeout(function(){return x.dispatchEvent.apply(x,e([],t(R)))}):x.dispatchEvent.apply(x,e([],t(R))))}),u(RTCPeerConnection.prototype,x,k),x}return Object.defineProperty(S.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"localDescription",{get:function(){return y(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),S.prototype.createAnswer=function(){for(var _=this,x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var T;return T=this._peerConnection.createAnswer().then(function(R){return p(_,R),y(R,_._initiallyNegotiatedDtlsRole)}),typeof x[0]=="function"?c.apply(void 0,e([T],t(x))):T},S.prototype.createOffer=function(){for(var _=this,x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var T=t(x,3),R=T[0],B=T[1],j=T[2],F=j||R||{},M;if(this.signalingState==="have-local-offer"||this.signalingState==="have-remote-offer"){var q=this.signalingState==="have-local-offer";M=v(this,q,function(){return _.createOffer(F)})}else M=this._peerConnection.createOffer(F);return M=M.then(function(O){return new i({type:O.type,sdp:a(_._tracksToSSRCs,O.sdp)})}),x.length>1?c(M,R,B):M},S.prototype.setLocalDescription=function(){for(var _,x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var T=t(x),R=T[0],B=T.slice(1),j;return R&&R.type==="answer"&&this.signalingState==="have-local-offer"&&(j=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),j?x.length>1?c.apply(void 0,e([j],t(B))):j:(_=this._peerConnection).setLocalDescription.apply(_,e([],t(x)))},S.prototype.setRemoteDescription=function(){for(var _=this,x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var T=t(x),R=T[0],B=T.slice(1),j;return R&&this.signalingState==="have-remote-offer"&&(R.type==="answer"?j=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):R.type==="offer"&&(j=v(this,!1,function(){return _._peerConnection.setRemoteDescription(R)}))),j||(j=this._peerConnection.setRemoteDescription(R)),j=j.then(function(){return p(_,R,!0)}),x.length>1?c.apply(void 0,e([j],t(B))):j},S.prototype.close=function(){this.signalingState!=="closed"&&(this._isClosed=!0,this._peerConnection.close())},S}(n);s(RTCPeerConnection.prototype,d.prototype,"_peerConnection");function v(b,S,_){var x=S?"setLocalDescription":"setRemoteDescription";return b._rollingBack=!0,b._peerConnection[x](new i({type:"rollback"})).then(_).then(function(k){return b._rollingBack=!1,k},function(k){throw b._rollingBack=!1,k})}function p(b,S,_){if(!(b._initiallyNegotiatedDtlsRole||S.type==="offer")){var x=S.sdp.match(/a=setup:([a-z]+)/);if(x){var k=x[1];b._initiallyNegotiatedDtlsRole=_?{active:"passive",passive:"active"}[k]:k}}}function y(b,S){return b&&b.type==="answer"&&S?new i({type:b.type,sdp:b.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+S)}):b}return Um=d,Um}var Vm,Vw;function N8(){if(Vw)return Vm;Vw=1;var r=A&&A.__extends||function(){var T=function(R,B){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,F){j.__proto__=F}||function(j,F){for(var M in F)Object.prototype.hasOwnProperty.call(F,M)&&(j[M]=F[M])},T(R,B)};return function(R,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");T(R,B);function j(){this.constructor=R}R.prototype=B===null?Object.create(B):(j.prototype=B.prototype,new j)}}(),t=A&&A.__read||function(T,R){var B=typeof Symbol=="function"&&T[Symbol.iterator];if(!B)return T;var j=B.call(T),F,M=[],q;try{for(;(R===void 0||R-- >0)&&!(F=j.next()).done;)M.push(F.value)}catch(O){q={error:O}}finally{try{F&&!F.done&&(B=j.return)&&B.call(j)}finally{if(q)throw q.error}}return M},e=A&&A.__spreadArray||function(T,R){for(var B=0,j=R.length,F=T.length;B<j;B++,F++)T[F]=R[B];return T},n=j1(),i=b3(),a=On,o=a.getSdpFormat,s=a.updatePlanBTrackIdsToSSRCs,l=a.updateUnifiedPlanTrackIdsToSSRCs,c=Dt,u=c.delegateMethods,d=c.interceptEvent,v=c.proxyProperties,p=o()==="unified",y=p?l:s,b=function(T){r(R,T);function R(B){var j=T.call(this)||this;d(j,"datachannel"),d(j,"iceconnectionstatechange"),d(j,"signalingstatechange"),d(j,"track");var F=new RTCPeerConnection(B);return Object.defineProperties(j,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:F},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new i},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),F.addEventListener("datachannel",function(M){k(M.channel),j.dispatchEvent(M)}),F.addEventListener("iceconnectionstatechange",function(){for(var M=[],q=0;q<arguments.length;q++)M[q]=arguments[q];j._isClosed||j.dispatchEvent.apply(j,e([],t(M)))}),F.addEventListener("signalingstatechange",function(){for(var M=[],q=0;q<arguments.length;q++)M[q]=arguments[q];j._isClosed||(F.signalingState==="stable"&&(j._appliedTracksToSSRCs=new Map(j._tracksToSSRCs)),!j._pendingLocalOffer&&!j._pendingRemoteOffer&&j.dispatchEvent.apply(j,e([],t(M))))}),F.addEventListener("track",function(M){j._pendingRemoteOffer=null,j.dispatchEvent(M)}),v(RTCPeerConnection.prototype,j,F),j}return Object.defineProperty(R.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),R.prototype.addIceCandidate=function(B){var j=this;return this.signalingState==="have-remote-offer"?this._signalingStateLatch.when("low").then(function(){return j._peerConnection.addIceCandidate(B)}):this._peerConnection.addIceCandidate(B)},R.prototype.createOffer=function(B){var j=this;if(B=Object.assign({},B),B.offerToReceiveVideo&&!this._audioTransceiver&&!(p&&x(this,"audio"))){delete B.offerToReceiveAudio;try{this._audioTransceiver=p?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(F){return Promise.reject(F)}}if(B.offerToReceiveVideo&&!this._videoTransceiver&&!(p&&x(this,"video"))){delete B.offerToReceiveVideo;try{this._videoTransceiver=p?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(F){return Promise.reject(F)}}return this._peerConnection.createOffer(B).then(function(F){return j._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:F.type,sdp:y(j._tracksToSSRCs,F.sdp)})})},R.prototype.createAnswer=function(B){var j=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return j._signalingStateLatch.lower(),j._peerConnection.createAnswer()}).then(function(F){return j._pendingRemoteOffer=null,j._rolledBackTracksToSSRCs.clear(),p?new RTCSessionDescription({type:F.type,sdp:y(j._tracksToSSRCs,F.sdp)}):F},function(F){throw j._pendingRemoteOffer=null,F}):this._peerConnection.createAnswer(B).then(function(F){return j._rolledBackTracksToSSRCs.clear(),p?new RTCSessionDescription({type:F.type,sdp:y(j._tracksToSSRCs,F.sdp)}):F})},R.prototype.createDataChannel=function(B,j){var F=this._peerConnection.createDataChannel(B,j);return k(F),F},R.prototype.removeTrack=function(B){B.replaceTrack(null),this._peerConnection.removeTrack(B)},R.prototype.setLocalDescription=function(B){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),S(this,!0,B)},R.prototype.setRemoteDescription=function(B){return this._rolledBackTracksToSSRCs.clear(),S(this,!1,B)},R.prototype.close=function(){var B=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout(function(){B.dispatchEvent(new Event("iceconnectionstatechange")),B.dispatchEvent(new Event("signalingstatechange"))}))},R}(n);u(RTCPeerConnection.prototype,b.prototype,"_peerConnection");function S(T,R,B){function j(I){R?T._pendingLocalOffer=I:T._pendingRemoteOffer=I}function F(){R?T._pendingLocalOffer=null:T._pendingRemoteOffer=null}var M=R?T._pendingLocalOffer:T._pendingRemoteOffer,q=R?T._pendingRemoteOffer:T._pendingLocalOffer,O=R?"have-local-offer":"have-remote-offer",L=R?"setLocalDescription":"setRemoteDescription";if(!R&&q&&B.type==="answer")return _(T,B);if(B.type==="offer"){if(T.signalingState!==O&&T.signalingState!=="stable")return Promise.reject(new Error("Cannot set "+(R?"local":"remote")+`
        offer in state `+T.signalingState));!M&&T._signalingStateLatch.state==="low"&&T._signalingStateLatch.raise();var z=T.signalingState;return j(B),T.signalingState!==z?Promise.resolve().then(function(){return T.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}else if(B.type==="rollback")return T.signalingState!==O?Promise.reject(new Error(`Cannot rollback 
        `+(R?"local":"remote")+" description in "+T.signalingState)):(F(),T._rolledBackTracksToSSRCs=new Map(T._tracksToSSRCs),T._tracksToSSRCs=new Map(T._appliedTracksToSSRCs),Promise.resolve().then(function(){return T.dispatchEvent(new Event("signalingstatechange"))}));return T._peerConnection[L](B)}function _(T,R){var B=T._pendingLocalOffer;return T._peerConnection.setLocalDescription(B).then(function(){return T._pendingLocalOffer=null,T.setRemoteDescription(R)}).then(function(){return T._signalingStateLatch.lower()})}function x(T,R){return!!T.getTransceivers().find(function(B){var j=B.receiver,F=j===void 0?{}:j,M=F.track,q=M===void 0?{}:M;return q.kind===R})}function k(T){return Object.defineProperties(T,{maxPacketLifeTime:{value:T.maxPacketLifeTime===65535?null:T.maxPacketLifeTime},maxRetransmits:{value:T.maxRetransmits===65535?null:T.maxRetransmits}})}return Vm=b,Vm}if(typeof RTCPeerConnection=="function"){var R8=Dt.guessBrowser;switch(R8()){case"chrome":hc.exports=A8();break;case"firefox":hc.exports=O8();break;case"safari":hc.exports=N8();break;default:hc.exports=RTCPeerConnection;break}}else hc.exports=function(){throw new Error("RTCPeerConnection is not supported")};var j8=hc.exports,pu={exports:{}};if(typeof RTCSessionDescription=="function"){var I8=Dt.guessBrowser;switch(I8()){case"chrome":pu.exports=d3();break;case"firefox":pu.exports=x3();break;default:pu.exports=RTCSessionDescription;break}}else pu.exports=function(){throw new Error("RTCSessionDescription is not supported")};var M8=pu.exports,S3={};Object.defineProperties(S3,{getStats:{enumerable:!0,value:y8},getUserMedia:{enumerable:!0,value:w8},MediaStream:{enumerable:!0,value:f3},MediaStreamTrack:{enumerable:!0,value:b8},RTCIceCandidate:{enumerable:!0,value:x8},RTCPeerConnection:{enumerable:!0,value:j8},RTCSessionDescription:{enumerable:!0,value:M8}});var Ms=S3,I1=function(t,e){if(t&&e)if(t.super_=e,typeof Object.create=="function")t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{var n=function(){function i(){}return i}();n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},D8=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};function F8(){return/Android/.test(navigator.userAgent)}function k3(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function P3(){return k3()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function T3(){return k3()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}function B8(){return P3()||T3()}function $8(){return/Mobi/.test(navigator.userAgent)}function U8(r){return r==="chrome"&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")}function V8(r){if(r!=="chrome")return null;if("brave"in navigator)return"brave";var t=W8(navigator.userAgent),e=t.reduce(function(o,s){return o.replace(s,"")},navigator.userAgent),n=e.match(/[^\s]+/g)||[],i=D8(n.map(function(o){return o.split("/")[0].toLowerCase()})),a=i.slice(2);return a.find(function(o){return!["chrome","mobile","safari"].includes(o)})||null}function z8(r){return r!=="safari"?null:"brave"in navigator?"brave":["edge","edg"].find(function(t){return navigator.userAgent.toLowerCase().includes(t)})||null}function W8(r){for(var t=[],e=[],n=0;n<r.length;n++)if(r[n]==="(")t.push(n);else if(r[n]===")"&&t.length>0){var i=t.pop();t.length===0&&e.push(r.substring(i,n+1))}return e}var Ds={isAndroid:F8,isIOS:B8,isIpad:P3,isIphone:T3,isMobile:$8,isNonChromiumEdge:U8,mobileWebKitBrowser:z8,rebrandedChromeBrowser:V8};function q8(r){return r=typeof r=="number"?r:0,new Promise(function(t){return setTimeout(t,r)})}function H8(r,t,e){e=typeof e=="number"?e:250;var n=r.createMediaStreamSource(t),i=r.createAnalyser();i.fftSize=2048,n.connect(i);var a=new Uint8Array(i.fftSize),o=!1;setTimeout(function(){o=!0},e);function s(){return o?Promise.resolve(!0):(i.getByteTimeDomainData(a),a.some(function(l){return l!==128&&l!==0})?Promise.resolve(!1):q8().then(s))}return s().then(function(l){return n.disconnect(),l},function(l){throw n.disconnect(),l})}var E3=H8,zm,zw;function Up(){if(zw)return zm;zw=1;var r=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,t=function(){function e(n){n=Object.assign({AudioContext:r},n),Object.defineProperties(this,{_AudioContext:{value:n.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:e}})}return e.prototype.getOrCreate=function(n){if(!this._holders.has(n)&&(this._holders.add(n),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},e.prototype.release=function(n){this._holders.has(n)&&(this._holders.delete(n),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},e}();return zm=new t,zm}var G8=E3,K8=3,Q8=250;function Y8(r){var t=Up(),e={},n=t.getOrCreate(e),i=K8;function a(){return i--,G8(n,r.srcObject,Q8).then(function(o){return o?i>0?a():!0:!1}).catch(function(){return!0})}return a().finally(function(){t.release(e)})}var C3=Y8,Pd=$e.defer,J8=function(){function r(){Object.defineProperties(this,{_audio:{value:Pd(),writable:!0},_video:{value:Pd(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return r.prototype.resolveDeferred=function(t){t==="audio"?this._audio.resolve():this._video.resolve()},r.prototype.startDeferred=function(t){t==="audio"?this._audio=Pd():this._video=Pd()},r.prototype.whenResolved=function(t){return t==="audio"?this._audio.promise:this._video.promise},r}(),L3=new J8,X8=yn.EventEmitter,Z8=$e.hidePrivateAndCertainPublicPropertiesInClass,ff=Z8(X8,["domain"]),ej=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),tj=ff,A3=$e,rj=A3.buildLogLevels,nj=A3.valueToJSON,ij=zt.DEFAULT_LOG_LEVEL,aj=Da,oj=0,sj=function(r){ej(t,r);function t(e,n,i){var a=this;i=Object.assign({name:e,log:null,logLevel:ij},i),a=r.call(this)||this;var o=String(i.name),s=rj(i.logLevel),l=i.log?i.log.createLog("media",a):new aj("media",a,s,i.loggerName);return Object.defineProperties(a,{_instanceId:{value:++oj},_log:{value:l},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:o}}),a}return t.prototype.toJSON=function(){return nj(this)},t}(tj),M1=sj,cj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),lj=Ds.isIOS,uj=Ms.MediaStream,O3=$e,fj=O3.waitForEvent,dj=O3.waitForSometime,hj=L3,pj=M1,vj=function(r){cj(t,r);function t(e,n){var i=this;n=Object.assign({playPausedElementsIfNotBackgrounded:lj()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},n),i=r.call(this,e.id,e.kind,n)||this;var a=!1;if(n=Object.assign({MediaStream:uj},n),typeof n.MediaStream!="function")throw new Error("MediaTrack received an invalid MediaStream constructor: "+n.MediaStream);return Object.defineProperties(i,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return a},set:function(o){a=o}},_playPausedElementsIfNotBackgrounded:{value:n.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:n.workaroundWebKitBug212780||n.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement},isStarted:{enumerable:!0,get:function(){return a}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||e.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),i._initialize(),i}return t.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},t.prototype._initialize=function(){var e=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack&&this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("ended",function n(){e._end(),e.mediaStreamTrack.removeEventListener("ended",n)}):this.mediaStreamTrack&&(this.mediaStreamTrack.onended=function(){e._end(),e.mediaStreamTrack.onended=null}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},t.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},t.prototype.attach=function(e){var n=this;if(typeof e=="string"?e=this._selectElement(e):e||(e=this._createElement()),this._log.debug("Attempting to attach to element:",e),e=this._attach(e),this._shouldShimAttachedElements&&!this._elShims.has(e)){var i=this._playPausedElementsIfNotBackgrounded?function(){return mj(e,n._log)}:null;this._elShims.set(e,gj(e,i))}return e},t.prototype._attach=function(e,n){n===void 0&&(n=this.processedTrack||this.mediaStreamTrack);var i=e.srcObject;i instanceof this._MediaStream||(i=new this._MediaStream);var a=n.kind==="audio"?"getAudioTracks":"getVideoTracks";return i[a]().forEach(function(o){i.removeTrack(o)}),i.addTrack(n),this._mapMediaElement&&(this._log.debug("Mapping element using mapMediaElement before attaching media to element"),this._mapMediaElement(e)),e.srcObject=i,e.autoplay=!0,e.playsInline=!0,this._attachments.has(e)||this._attachments.add(e),e},t.prototype._selectElement=function(e){var n=document.querySelector(e);if(!n)throw new Error("Selector matched no element: "+e);return n},t.prototype._updateElementsMediaStreamTrack=function(){var e=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(n){return e._attach(n)})},t.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},t.prototype.detach=function(e){var n;return typeof e=="string"?n=[this._selectElement(e)]:e?n=[e]:n=this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",n),this._detachElements(n),e?n[0]:n},t.prototype._detachElements=function(e){return e.map(this._detachElement.bind(this))},t.prototype._detachElement=function(e){if(!this._attachments.has(e))return e;var n=e.srcObject;if(n instanceof this._MediaStream&&n.removeTrack(this.processedTrack||this.mediaStreamTrack),this._disposeMediaElement&&(this._log.debug("Disposing element using disposeMediaElement after removing media from element"),this._disposeMediaElement(e)),this._attachments.delete(e),this._shouldShimAttachedElements&&this._elShims.has(e)){var i=this._elShims.get(e);i.unShim(),this._elShims.delete(e)}return e},t.prototype._getAllAttachedElements=function(){var e=[];return this._attachments.forEach(function(n){e.push(n)}),e},t}(pj);function mj(r,t){var e=r.tagName.toLowerCase();t.warn("Unintentionally paused:",r),Promise.race([fj(document,"visibilitychange"),dj(1e3)]).then(function(){document.visibilityState==="visible"&&hj.whenResolved("audio").then(function(){return t.info("Playing unintentionally paused <"+e+"> element"),t.debug("Element:",r),r.play()}).then(function(){t.info("Successfully played unintentionally paused <"+e+"> element"),t.debug("Element:",r)}).catch(function(n){t.warn("Error while playing unintentionally paused <"+e+"> element:",{error:n,el:r})})})}function gj(r,t){t===void 0&&(t=null);var e=r.pause,n=r.play,i=!1;r.pause=function(){return i=!0,e.call(r)},r.play=function(){return i=!1,n.call(r)};var a=t?function(){i||t()}:null;return a&&r.addEventListener("pause",a),{pausedIntentionally:function(){return i},unShim:function(){r.pause=e,r.play=n,a&&r.removeEventListener("pause",a)}}}var N3=vj,yj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_j=N3,wj=function(r){yj(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.attach=function(){return r.prototype.attach.apply(this,arguments)},t.prototype.detach=function(){return r.prototype.detach.apply(this,arguments)},t}(_j),R3=wj,H0=null,bj=3,Ww=50,qw=250,Hw=50;function xj(r){try{var t=H0.getContext("2d");t.drawImage(r,0,0,Hw,Ww);var e=t.getImageData(0,0,Hw,Ww),n=e.data.filter(function(a,o){return(o+1)%4}),i=Math.max.apply(Math,n);return i===0}catch(a){return console.log("Error checking silence: ",a),!1}}function Sj(r){return H0=H0||document.createElement("canvas"),new Promise(function(t){var e=bj;setTimeout(function n(){return e--,xj(r)?e>0?setTimeout(n,qw):t(!0):t(!1)},qw)})}var j3=Sj,kj=function(){function r(t){var e=this;t===void 0&&(t=1),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){e._emitVisible(document.visibilityState==="visible")}}});for(var n=0;n<t;n++)this._listeners.push([])}return r.prototype.clear=function(){for(var t=this._listeners.length,e=0;e<t;e++)this._listeners[e]=[]},r.prototype._listenerCount=function(){return this._listeners.reduce(function(t,e){return t+e.length},0)},r.prototype._emitVisible=function(t){for(var e=this,n=Promise.resolve(),i=function(o){n=n.then(function(){return e._emitVisiblePhase(o,t)})},a=1;a<=this._listeners.length;a++)i(a);return n},r.prototype._emitVisiblePhase=function(t,e){var n=this._listeners[t-1];return Promise.all(n.map(function(i){var a=i(e);return a instanceof Promise?a:Promise.resolve(a)}))},r.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},r.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},r.prototype.onVisibilityChange=function(t,e){if(typeof t!="number"||t<=0||t>this._listeners.length)throw new Error("invalid phase: ",t);var n=this._listeners[t-1];return n.push(e),this._listenerCount()===1&&this._start(),this},r.prototype.offVisibilityChange=function(t,e){if(typeof t!="number"||t<=0||t>this._listeners.length)throw new Error("invalid phase: ",t);var n=this._listeners[t-1],i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this._listenerCount()===0&&this._stop()),this},r}(),D1=new kj(2),Pj=E3;function Tj(r,t,e,n,i){n=typeof n=="number"?n:3;var a=0,o=Up(),s={},l=o.getOrCreate(s);function c(){return t(e).then(function(u){var d=e.audio?Pj(l,u,i).catch(function(v){return r.warn("Encountered an error while detecting silence",v),!0}):Promise.resolve(!1);return d.then(function(v){if(v){if(n<=0)return r.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),u}else return r.info("Got a non-silent audio MediaStreamTrack; returning it."),u;return r.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++a+"."),u.getTracks().forEach(function(p){return p.stop()}),n--,c()})})}return c().then(function(u){return o.release(s),u},function(u){throw o.release(s),u})}var I3=Tj,Ej=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Gw=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Kw=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},Cj=yn.EventEmitter,Lj=function(r){Ej(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_queuedEvents:{value:new Map}}),e}return t.prototype.dequeue=function(e){var n=this,i=!0;if(!e)return this._queuedEvents.forEach(function(o,s){i=this.dequeue(s)&&i},this),i;var a=this._queuedEvents.get(e)||[];return this._queuedEvents.delete(e),a.reduce(function(o,s){return n.emit.apply(n,Kw([],Gw([e].concat(s))))&&o},i)},t.prototype.queue=function(){var e=[].slice.call(arguments);if(this.emit.apply(this,Kw([],Gw(e))))return!0;var n=e[0];return this._queuedEvents.has(n)||this._queuedEvents.set(n,[]),this._queuedEvents.get(n).push(e.slice(1)),!1},t}(Cj),M3=Lj,Aj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Oj=M3,Nj=function(r){Aj(t,r);function t(e,n){var i=r.call(this)||this;return Object.defineProperties(i,{id:{enumerable:!0,value:e},kind:{enumerable:!0,value:n}}),i}return t.prototype.stop=function(){this.emit("stopped")},t}(Oj),D3=Nj,Rj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jj=D3,Ij=function(r){Rj(t,r);function t(e,n){var i=r.call(this,e,n.kind)||this;return Object.defineProperties(i,{_track:{value:n,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),i}return t.prototype.stop=function(){this.track.stop(),r.prototype.stop.call(this)},t}(jj),F3=Ij,Mj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Dj=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Fj=F3,Bj=function(r){Mj(t,r);function t(e){var n=r.call(this,e.id,e)||this;return Object.defineProperties(n,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return n.queue("muted")}],["unmute",function(){return n.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),n._reemitMediaStreamTrackEvents(),n}return t.prototype._reemitMediaStreamTrackEvents=function(e){e===void 0&&(e=this._track);var n=this,i=n._eventsToReemitters,a=n._track;if(e.addEventListener?i.forEach(function(s,l){return e.addEventListener(l,s)}):i.forEach(function(s,l){e["on"+l]=s}),a!==e&&(i.forEach(function(s,l){return a.removeEventListener(l,s)}),a.muted!==e.muted)){var o=i.get(e.muted?"mute":"unmute");o()}},t.prototype.clone=function(){var e=new t(this.track.clone());return this._clones.add(e),e},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.setMediaStreamTrack=function(e){var n=this,i=Array.from(this._clones),a=Array.from(this._senders);return Promise.all(i.map(function(o){return o.setMediaStreamTrack(e.clone())}).concat(a.map(function(o){return n._replaceTrack(o,e)}))).finally(function(){n._reemitMediaStreamTrackEvents(e),n._track=e})},t.prototype.addSender=function(e,n){return this._senders.add(e),n&&this._senderToPublisherHintCallbacks.set(e,n),this},t.prototype.removeSender=function(e){return this._senders.delete(e),this._senderToPublisherHintCallbacks.delete(e),this},t.prototype.setPublisherHint=function(e){var n=Dj(Array.from(this._senderToPublisherHintCallbacks.values()),1),i=n[0];return i?i(e):Promise.resolve("COULD_NOT_APPLY_HINT")},t.prototype._replaceTrack=function(e,n){var i=this;return e.replaceTrack(n).then(function(a){return i.setPublisherHint(null).catch(function(){}),i.emit("replaced"),a})},t}(Fj),B3=Bj,$j=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Uj=Ms.getUserMedia,Vj=Ds.isIOS,Vp=$e,Qw=Vp.capitalize,zj=Vp.defer,Wj=Vp.waitForSometime,qj=Vp.waitForEvent,Hj=zt.typeErrors.ILLEGAL_INVOKE,Gj=C3,Kj=j3,Yw=D1,Jw=L3,Qj=I3,Yj=B3;function Jj(r){return function(t){$j(e,t);function e(n,i){var a=this,o=Vj()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string";i=Object.assign({getUserMedia:Uj,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:o,gUMSilentTrackWorkaround:Qj},i);var s=new Yj(n),l=s.kind;return a=t.call(this,s,i)||this,Object.defineProperties(a,{_constraints:{value:typeof i[l]=="object"?i[l]:{},writable:!0},_getUserMedia:{value:i.getUserMedia},_gUMSilentTrackWorkaround:{value:i.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return a.emit("muted",a)}],["unmuted",function(){return a.emit("unmuted",a)}]])},_workaroundWebKitBug1208516:{value:i.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:i.isCreatedByCreateLocalTracks},_noiseCancellation:{value:i.noiseCancellation||null},_trackSender:{value:s},id:{enumerable:!0,value:s.id},isEnabled:{enumerable:!0,get:function(){return s.enabled}},isMuted:{enumerable:!0,get:function(){return s.muted}},isStopped:{enumerable:!0,get:function(){return s.readyState==="ended"}}}),a._workaroundWebKitBug1208516&&(a._workaroundWebKitBug1208516Cleanup=Xw(a)),a._reemitTrackSenderEvents(),a}return e.prototype._end=function(){var n=this;this._didCallEnd||(t.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach(function(i,a){return n._trackSender.removeListener(a,i)}),this.emit("stopped",this))},e.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),t.prototype._initialize.call(this)},e.prototype._reacquireTrack=function(n){var i,a=this,o=a._getUserMedia,s=a._gUMSilentTrackWorkaround,l=a._log,c=a.mediaStreamTrack.kind;l.info("Re-acquiring the MediaStreamTrack"),l.debug("Constraints:",n);var u=Object.assign({audio:!1,video:!1},(i={},i[c]=n,i)),d=this._workaroundWebKitBug1208516Cleanup?s(l,o,u):o(u);return d.then(function(v){return v.getTracks()[0]})},e.prototype._reemitTrackSenderEvents=function(){var n=this;this._eventsToReemitters.forEach(function(i,a){return n._trackSender.on(a,i)}),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},e.prototype._restart=function(n){var i=this,a=this._log;return n=n||this._constraints,this._stop(),this._reacquireTrack(n).catch(function(o){throw a.error("Failed to re-acquire the MediaStreamTrack:",{error:o,constraints:n}),o}).then(function(o){return a.info("Re-acquired the MediaStreamTrack"),a.debug("MediaStreamTrack:",o),i._constraints=Object.assign({},n),i._setMediaStreamTrack(o)})},e.prototype._setMediaStreamTrack=function(n){var i=this;return n.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){i._unprocessedTrack=n}):this._trackSender.setMediaStreamTrack(n).catch(function(a){i._log.warn("setMediaStreamTrack failed:",{error:a,mediaStreamTrack:n})})).then(function(){i._initialize(),i._getAllAttachedElements().forEach(function(a){return i._attach(a)})})},e.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},e.prototype.enable=function(n){return n=typeof n=="boolean"?n:!0,n!==this.mediaStreamTrack.enabled&&(this._log.info((n?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=n,this.emit(n?"enabled":"disabled",this)),this},e.prototype.disable=function(){return this.enable(!1)},e.prototype.restart=function(n){var i=this,a=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(Hj("restart","can only be called on a"+(" Local"+Qw(a)+"Track that is created using createLocalTracks")+(" or createLocal"+Qw(a)+"Track.")));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var o=this._restart(n);return this._workaroundWebKitBug1208516&&(o=o.finally(function(){i._workaroundWebKitBug1208516Cleanup=Xw(i)})),o},e.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},e}(r)}function Xw(r){var t=r._log,e=r.kind,n=r._noiseCancellation,i={audio:Gj,video:Kj}[e],a=function(){return n?n.sourceTrack:r.mediaStreamTrack},o=r._dummyEl,s=a(),l=null;function c(){return o.play().then(function(){return i(o)}).then(function(S){return S?t.warn("Silence detected"):t.info("Non-silence detected"),S}).catch(function(S){t.warn("Failed to detect silence:",S)}).finally(function(){r.processedTrack||o.pause()})}function u(){var S=r._workaroundWebKitBug1208516Cleanup,_=r.isStopped,x=_&&!!S,k=a().muted;return Promise.resolve().then(function(){return document.visibilityState==="visible"&&!l&&(k||x||c())})}function d(){return Promise.race([qj(s,"unmute"),Wj(50)]).then(function(){return u()}).then(function(S){S&&!l&&(l=zj(),r._restart().finally(function(){o=r._dummyEl,y(),s=a(),p(),l.resolve(),l=null}).catch(function(x){t.error("failed to restart track: ",x)}));var _=l&&l.promise||Promise.resolve();return _.finally(function(){return Jw.resolveDeferred(e)})}).catch(function(S){t.error("error in maybeRestart: "+S.message)})}function v(){var S=r._log,_=r.kind;S.info("Muted"),S.debug("LocalMediaTrack:",r),Jw.startDeferred(_)}function p(){s.addEventListener?(s.addEventListener("ended",d),s.addEventListener("mute",v),s.addEventListener("unmute",d)):(s.onended=d,s.onmute=v,s.onunmute=d)}function y(){s.removeEventListener?(s.removeEventListener("ended",d),s.removeEventListener("mute",v),s.removeEventListener("unmute",d)):(s.onended=null,s.onmute=null,s.onunmute=null)}var b=function(S){return S?d():!1};return Yw.onVisibilityChange(1,b),p(),function(){Yw.offVisibilityChange(1,b),y()}}var $3=Jj,Xj=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zj=Ds.isIOS,e7=C3,t7=Dt.isIOSChrome,r7=R3,n7=$3,i7=n7(r7),a7=function(r){Xj(t,r);function t(e,n){var i=this,a=(n==null?void 0:n.noiseCancellation)||null;i=r.call(this,e,n)||this;var o=i._log,s=e.label,l=s===void 0?"":s,c=e.getSettings(),u=c.deviceId,d=u===void 0?"":u,v=c.groupId,p=v===void 0?"":v;return Object.defineProperties(i,{_currentDefaultDeviceInfo:{value:{deviceId:d,groupId:p,label:l},writable:!0},_enumerateDevices:{value:typeof(n==null?void 0:n.enumerateDevices)=="function"?n.enumerateDevices:navigator.mediaDevices.enumerateDevices},_defaultDeviceCaptureMode:{value:(!Zj()||a)&&i._isCreatedByCreateLocalTracks&&typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.addEventListener=="function"&&(typeof(n==null?void 0:n.enumerateDevices)=="function"||typeof navigator.mediaDevices.enumerateDevices=="function")?(n==null?void 0:n.defaultDeviceCaptureMode)||"auto":"manual"},_onDeviceChange:{value:function(){i._enumerateDevices().then(function(y){var b=y.find(function(S){var _=S.deviceId,x=S.kind;return x==="audioinput"&&_!=="default"});b&&["deviceId","groupId"].some(function(S){return b[S]!==i._currentDefaultDeviceInfo[S]})&&(o.info("Default device changed, restarting the LocalAudioTrack"),o.debug('Old default device: "'+i._currentDefaultDeviceInfo.deviceId+'" => "'+i._currentDefaultDeviceInfo.label+'"'),o.debug('New default device: "'+b.deviceId+'" => "'+b.label+'"'),i._currentDefaultDeviceInfo=b,i._restartDefaultDevice().catch(function(S){return o.warn("Failed to restart: "+S.message)}))},function(y){o.warn("Failed to run enumerateDevices(): "+y.message)})}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:a,writable:!1}}),o.debug("defaultDeviceCaptureMode:",i._defaultDeviceCaptureMode),i._maybeRestartOnDefaultDeviceChange(),i}return t.prototype.toString=function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"},t.prototype.attach=function(e){return e=r.prototype.attach.call(this,e),e.muted=!0,e},t.prototype._end=function(){return r.prototype._end.apply(this,arguments)},t.prototype._maybeRestartOnDefaultDeviceChange=function(){var e=this,n=this,i=n._constraints,a=n._defaultDeviceCaptureMode,o=n._log,s=this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack,l=s.getSettings().deviceId,c=function(d){return d!==l||d==="default"},u=function d(v){return v===void 0&&(v={}),typeof v=="string"?c(v):Array.isArray(v)?v.every(c):v.exact?d(v.exact):v.ideal?d(v.ideal):!0}(i.deviceId);a==="auto"&&u?this._restartOnDefaultDeviceChangeCleanup||(o.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){o.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",e._onDeviceChange),e._restartOnDefaultDeviceChangeCleanup=null}):(o.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},t.prototype._reacquireTrack=function(e){var n=this;return this._log.debug("_reacquireTrack: ",e),this.noiseCancellation?this.noiseCancellation.reacquireTrack(function(){return r.prototype._reacquireTrack.call(n,e)}):r.prototype._reacquireTrack.call(this,e)},t.prototype._restartDefaultDevice=function(){var e=this,n=Object.assign({},this._constraints),i=Object.assign({},n,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(i).then(function(){e._constraints=n,e._maybeRestartOnDefaultDeviceChange()})},t.prototype._setMediaStreamTrack=function(e){var n=this,i=this,a=i._log,o=i.noiseCancellation,s=r.prototype._setMediaStreamTrack.call(this,e);return t7()&&o&&(a.debug("iOS Chrome detected, checking if the restarted Krisp audio is silent"),s=s.then(function(){return e7(n._dummyEl)}).then(function(l){return a.debug("Krisp audio is "+(l?"silent, using source audio":"not silent")),l&&o.disablePermanently().then(function(){return r.prototype._setMediaStreamTrack.call(n,o.sourceTrack)})})),s},t.prototype.disable=function(){return r.prototype.disable.apply(this,arguments)},t.prototype.enable=function(){return r.prototype.enable.apply(this,arguments)},t.prototype.restart=function(){return r.prototype.restart.apply(this,arguments)},t.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),r.prototype.stop.apply(this,arguments)},t}(i7),o7=a7,s7=I1,U3=o7;function F1(r,t){var e=new U3(r,t);return Object.setPrototypeOf(e,F1.prototype),e}s7(F1,U3);var c7=F1,V3=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},l7=zt.DEFAULT_FRAME_RATE;function u7(r,t){var e=V3(r.srcObject.getVideoTracks(),1),n=e[0],i=n.getSettings().frameRate,a=i===void 0?l7:i,o,s=new ReadableStream({start:function(c){o=setInterval(function(){return c.enqueue()},1e3/a)}}),l=new TransformStream({transform:function(){return t()}});return s.pipeThrough(l).pipeTo(new WritableStream).then(function(){}),function(){clearInterval(o)}}function f7(r,t,e){var n=V3(r.srcObject.getVideoTracks(),1),i=n[0],a=new MediaStreamTrackProcessor({track:i}).readable,o=new MediaStreamTrackGenerator({kind:"video"}),s=!1,l=new TransformStream({transform:function(c,u){var d=e==="videoframe"?t(c):Promise.resolve(c.close()).then(t);return d.finally(function(){s&&u.terminate()})}});return a.pipeThrough(l).pipeTo(o.writable).then(function(){}),function(){s=!0}}var d7=typeof MediaStreamTrackGenerator=="function"&&typeof MediaStreamTrackProcessor=="function"?f7:u7,h7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),p7=yn.EventEmitter,v7=zt.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,m7=function(r){h7(t,r);function t(e){var n=r.call(this)||this;return Object.defineProperties(n,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:e},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),n.on("add",function(i){n._lastStatsSaveTime=Date.now(),n._lastStatsPublishTime=Date.now(),n._processorInfo=i,n._stats=[],n._reemitEvent("add",n._getEventData())}),n.on("remove",function(){var i=n._getEventData();n._lastStatsSaveTime=null,n._lastStatsPublishTime=null,n._processorInfo=null,n._stats=null,n._reemitEvent("remove",i)}),n.on("start",function(){n._reemitEvent("start",n._getEventData())}),n.on("stop",function(i){n._reemitEvent("stop",Object.assign({message:i},n._getEventData()))}),n.on("stats",function(){return n._maybeEmitStats()}),n}return t.prototype._getEventData=function(){if(!this._processorInfo)return{};var e=this._processorInfo,n=e.processor,i=e.captureHeight,a=e.captureWidth,o=e.inputFrameRate,s=e.isRemoteVideoTrack,l=e.inputFrameBufferType,c=e.outputFrameBufferContextType,u={captureHeight:i,captureWidth:a,inputFrameRate:o,isRemoteVideoTrack:s,inputFrameBufferType:l,outputFrameBufferContextType:c};return u.name=n._name||"VideoProcessor",["assetsPath","blurFilterRadius","debounce","fitType","isSimdEnabled","maskBlurRadius","pipeline","version"].forEach(function(d){var v=n["_"+d];typeof v<"u"&&(u[d]=v)}),Object.keys(u).forEach(function(d){var v=u[d];typeof v=="boolean"&&(u[d]=v?"true":"false")}),u},t.prototype._maybeEmitStats=function(){if(!(!this._stats||!this._processorInfo)){var e=this._processorInfo.processor._benchmark;if(e){var n=Date.now();if(!(n-this._lastStatsSaveTime<1e3)){var i={outputFrameRate:e.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(s){i[s]=e.getAverageDelay(s)}),this._lastStatsSaveTime=n,this._stats.push(i),!(n-this._lastStatsPublishTime<v7)){this._lastStatsPublishTime=n;var a=this._stats.splice(0),o=a.reduce(function(s,l,c){return Object.keys(i).forEach(function(u){s[u]||(s[u]=0),s[u]=(s[u]*c+l[u])/(c+1)}),s},{});Object.keys(o).forEach(function(s){o[s]=parseFloat(o[s].toFixed(2))}),this._reemitEvent("stats",Object.assign({},o,this._getEventData()))}}}}},t.prototype._reemitEvent=function(e,n){this._log.debug("VideoProcessor:"+e,n),this.emit("event",{name:e,data:n})},t}(p7),g7=m7,y7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_7=N3,w7=d7,b7=g7;Dt.guessBrowser;var x7=zt.DEFAULT_FRAME_RATE,B1=function(r){y7(t,r);function t(e,n){var i=r.call(this,e,n)||this;return Object.defineProperties(i,{_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_processorOptions:{value:{},writable:!0},_stopCapture:{value:function(){},writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0},_documentPipWindow:{value:null,writable:!0},_documentPipEnterListener:{value:null,writable:!0},_documentPipExitListener:{value:null,writable:!0}}),i._processorEventObserver=new(n.VideoProcessorEventObserver||b7)(i._log),i}return t.prototype._checkIfCanCaptureFrames=function(e){e===void 0&&(e=!1);var n=!0,i="",a=this.mediaStreamTrack,o=a.enabled,s=a.readyState;return o||(n=!1,i="MediaStreamTrack is disabled"),s==="ended"&&(n=!1,i="MediaStreamTrack is ended"),this.processor||(n=!1,i="VideoProcessor not detected."),!this._attachments.size&&!e&&(n=!1,i="VideoTrack is not publishing and there is no attached element."),i&&this._log.debug(i),{canCaptureFrames:n,message:i}},t.prototype._captureFrames=function(){var e=this;if(this._isCapturing){this._log.debug("Ignoring captureFrames call. Capture is already in progress");return}if(!this._checkIfCanCaptureFrames().canCaptureFrames){this._isCapturing=!1,this._log.debug("Cannot capture frames. Ignoring captureFrames call.");return}this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var n=this._processorOptions.inputFrameBufferType;this._dummyEl.play().then(function(){var i=function(a){var o=e._checkIfCanCaptureFrames();if(!o.canCaptureFrames)return a&&a.close(),e._isCapturing=!1,e._stopCapture(),e._processorEventObserver.emit("stop",o.message),e._log.debug("Cannot capture frames. Stopping capturing frames."),Promise.resolve();var s=e.mediaStreamTrack.getSettings(),l=s.width,c=l===void 0?0:l,u=s.height,d=u===void 0?0:u;e._outputFrame&&e._outputFrame.width!==c&&(e._outputFrame.width=c,e._outputFrame.height=d),e._inputFrame&&(e._inputFrame.width!==c&&(e._inputFrame.width=c,e._inputFrame.height=d),e._inputFrame.getContext("2d").drawImage(e._dummyEl,0,0,c,d));var v=a||(["video","videoframe"].includes(n)?e._dummyEl:e._inputFrame),p=null;try{p=e.processor.processFrame(v,e._outputFrame)}catch(y){e._log.debug("Exception detected after calling processFrame.",y)}return(p instanceof Promise?p:Promise.resolve(p)).then(function(){e._outputFrame&&(typeof e.processedTrack.requestFrame=="function"&&e.processedTrack.requestFrame(),e._processorEventObserver.emit("stats"))})};e._stopCapture=w7(e._dummyEl,i,n)}).catch(function(i){return e._log.error("Video element cannot be played",{error:i,track:e})})},t.prototype._initialize=function(){var e=this;r.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){Zw(e,e._dummyEl)&&(e.dimensions.width=e._dummyEl.videoWidth,e.dimensions.height=e._dummyEl.videoHeight)},this._dummyEl.onresize=function(){Zw(e,e._dummyEl)&&(e.dimensions.width=e._dummyEl.videoWidth,e.dimensions.height=e._dummyEl.videoHeight,e.isStarted&&(e._log.debug("Dimensions changed:",e.dimensions),e.emit(t.DIMENSIONS_CHANGED,e)))})},t.prototype._restartProcessor=function(){var e=this.processor;if(e){var n=Object.assign({},this._processorOptions);this.removeProcessor(e),this.addProcessor(e,n)}},t.prototype._start=function(e){return this.dimensions.width=e.videoWidth,this.dimensions.height=e.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(t.DIMENSIONS_CHANGED,this),r.prototype._start.call(this,e)},t.prototype.addProcessor=function(e,n){var i=this;if(!e||typeof e.processFrame!="function")throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",e),this._unmuteHandler||(this._unmuteHandler=function(){i._log.debug("mediaStreamTrack unmuted"),i.processedTrack.muted&&(i._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),i._restartProcessor())},this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler):this.mediaStreamTrack.onunmute=this._unmuteHandler.bind(this)),this._processorOptions=n||{};var a=this._processorOptions,o=a.inputFrameBufferType,s=a.outputFrameBufferContextType;if(typeof OffscreenCanvas>"u"&&o==="offscreencanvas")throw new Error("OffscreenCanvas is not supported by this browser.");if(o&&o!=="videoframe"&&o!=="video"&&o!=="canvas"&&o!=="offscreencanvas")throw new Error("Invalid inputFrameBufferType of "+o);o||(o=typeof OffscreenCanvas>"u"?"canvas":"offscreencanvas");var l=this.mediaStreamTrack.getSettings(),c=l.width,u=c===void 0?0:c,d=l.height,v=d===void 0?0:d,p=l.frameRate,y=p===void 0?x7:p;o==="offscreencanvas"&&(this._inputFrame=new OffscreenCanvas(u,v)),o==="canvas"&&(this._inputFrame=document.createElement("canvas")),this._inputFrame&&(this._inputFrame.width=u,this._inputFrame.height=v),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=u,this._outputFrame.height=v,s=s||"2d";var b=this._outputFrame.getContext(s);if(!b)throw new Error("Cannot get outputFrameBufferContextType: "+s+".");var S=typeof CanvasCaptureMediaStreamTrack<"u"&&CanvasCaptureMediaStreamTrack.prototype&&typeof CanvasCaptureMediaStreamTrack.prototype.requestFrame=="function"?0:void 0;return this.processedTrack=this._outputFrame.captureStream(S).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=e,this._processorEventObserver.emit("add",{processor:e,captureHeight:v,captureWidth:u,inputFrameRate:y,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack"),inputFrameBufferType:o,outputFrameBufferContextType:s}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},t.prototype.attach=function(){var e=r.prototype.attach.apply(this,arguments);return this._attachments.size===1&&S7(this),this.processor&&this._captureFrames(),e},t.prototype.detach=function(){var e=r.prototype.detach.apply(this,arguments);return this._attachments.size===0&&k7(this),e},t.prototype.removeProcessor=function(e){if(!e)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(e!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",e),this._stopCapture(),this._stopCapture=function(){},this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._processorOptions={},this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},t}(_7);B1.DIMENSIONS_CHANGED="dimensionsChanged";function Zw(r,t){return r.dimensions.width!==t.videoWidth||r.dimensions.height!==t.videoHeight}function S7(r){!r._documentPipEnterListener&&"documentPictureInPicture"in globalThis&&globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.addEventListener=="function"&&(r._documentPipEnterListener=function(t){r._log.debug("document pip entered"),r._documentPipWindow=t.window,r._documentPipExitListener=function(){r._log.debug("document pip exited"),r._documentPipWindow=null,typeof r._onDocumentPipExit=="function"&&r._onDocumentPipExit()},t.window&&typeof t.window.addEventListener=="function"&&t.window.addEventListener("pagehide",r._documentPipExitListener),z3(r),typeof r._onDocumentPipEnter=="function"&&r._onDocumentPipEnter(t)},globalThis.documentPictureInPicture.addEventListener("enter",r._documentPipEnterListener))}function k7(r){r._documentPipEnterListener&&(globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.removeEventListener=="function"&&globalThis.documentPictureInPicture.removeEventListener("enter",r._documentPipEnterListener),r._documentPipWindow&&r._documentPipExitListener&&typeof r._documentPipWindow.removeEventListener=="function"&&r._documentPipWindow.removeEventListener("pagehide",r._documentPipExitListener),r._documentPipEnterListener=null,r._documentPipExitListener=null,r._documentPipWindow=null)}function z3(r){if(r._documentPipWindow)try{var t=new WeakSet(r._documentPipWindow.document.querySelectorAll("video"));r._attachments.forEach(function(e){t.has(e)&&e.paused&&e.play().then(function(){r._log.debug("Successfully played inadvertently paused video element in document PiP window")}).catch(function(n){r._log.debug("Failed to play inadvertently paused video element in document PiP window",n)})})}catch(e){r._log.debug("Error checking document PiP video playback:",e)}}B1._ensureDocumentPipVideosPlaying=z3;var W3=B1,P7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),T7=Ds.isIOS,E7=j3,C7=$3,q3=W3,L7=C7(q3),A7=function(r){P7(t,r);function t(e,n){var i=this;return n=Object.assign({workaroundSilentLocalVideo:T7()&&typeof document<"u"&&typeof document.createElement=="function"},n),i=r.call(this,e,n)||this,Object.defineProperties(i,{_workaroundSilentLocalVideo:{value:n.workaroundSilentLocalVideo?O7:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0},_pipIntersectionObserver:{value:null,writable:!0}}),i._workaroundSilentLocalVideo&&(i._workaroundSilentLocalVideoCleanup=i._workaroundSilentLocalVideo(i,document)),i}return t.prototype.toString=function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"},t.prototype._onDocumentPipEnter=function(){this._log.debug("LocalVideoTrack: Setting up PiP intersection observer"),this._setupPipIntersectionObserver()},t.prototype._onDocumentPipExit=function(){this._log.debug("LocalVideoTrack: Cleaning up PiP intersection observer"),this._cleanupPipIntersectionObserver()},t.prototype._setupPipIntersectionObserver=function(){var e=this;!this._pipIntersectionObserver&&this._documentPipWindow&&(this._log.debug("LocalVideoTrack: Creating PiP intersection observer"),this._pipIntersectionObserver=new IntersectionObserver(function(n){var i=n.some(function(a){return a.isIntersecting});i&&(e._log.debug("LocalVideoTrack: Element visible in PiP, ensuring videos are playing"),q3._ensureDocumentPipVideosPlaying(e))},{threshold:.25}),this._attachments.forEach(function(n){e._log.debug("LocalVideoTrack: Observing element for PiP visibility"),e._pipIntersectionObserver.observe(n)}))},t.prototype._cleanupPipIntersectionObserver=function(){this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Disconnecting PiP intersection observer"),this._pipIntersectionObserver.disconnect(),this._pipIntersectionObserver=null)},t.prototype.attach=function(){var e=r.prototype.attach.apply(this,arguments);return this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Observing newly attached element for PiP visibility"),this._pipIntersectionObserver.observe(e)),e},t.prototype.detach=function(){var e=this,n=r.prototype.detach.apply(this,arguments),i=Array.isArray(n)?n:[n];return this._pipIntersectionObserver&&i.forEach(function(a){e._log.debug("LocalVideoTrack: Unobserving detached element from PiP visibility"),e._pipIntersectionObserver.unobserve(a)}),n},t.prototype._checkIfCanCaptureFrames=function(){return r.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},t.prototype._end=function(){return r.prototype._end.apply(this,arguments)},t.prototype._setSenderMediaStreamTrack=function(e){var n=this,i=this.mediaStreamTrack,a=e?this.processedTrack:i;return this._trackSender.setMediaStreamTrack(a).catch(function(o){return n._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:o,mediaStreamTrack:a})}).then(function(){n._unprocessedTrack=e?i:null})},t.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var e=r.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),e):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},t.prototype.removeProcessor=function(){var e=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var n=r.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return e._updateElementsMediaStreamTrack()}),n},t.prototype.disable=function(){var e=r.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),e},t.prototype.enable=function(e){e===void 0&&(e=!0);var n=r.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=e,e&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),n},t.prototype.restart=function(){var e=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var n=r.prototype.restart.apply(this,arguments);return this.processor&&(n=n.then(function(){return e._restartProcessor()})),this._workaroundSilentLocalVideo&&n.finally(function(){e._workaroundSilentLocalVideoCleanup=e._workaroundSilentLocalVideo(e,document)}),n},t.prototype._restartProcessor=function(){var e=this.processor,n=Object.assign({},this._processorOptions);return r.prototype.removeProcessor.apply(this,[e]),r.prototype.addProcessor.apply(this,[e,n]),this._setSenderMediaStreamTrack(!0)},t.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),this._cleanupPipIntersectionObserver(),r.prototype.stop.apply(this,arguments)},t}(L7);function O7(r,t){var e=r._log,n=r._dummyEl,i=r.mediaStreamTrack;function a(){r.isEnabled&&(e.info("Unmuted, checking silence"),n.play().then(function(){return E7(n)}).then(function(o){if(!o){e.info("Non-silent frames detected, so no need to restart");return}return e.warn("Silence detected, restarting"),r._stop(),r._restart()}).catch(function(o){e.warn("Failed to detect silence and restart:",o)}).finally(function(){n=r._dummyEl,n&&!n.paused&&!r.processedTrack&&n.pause(),i.removeEventListener("unmute",a),i=r.mediaStreamTrack,i.addEventListener?i.addEventListener("unmute",a):i.onunmute=a}))}return i.addEventListener?i.addEventListener("unmute",a):i.onunmute=a,function(){i.removeEventListener?i.removeEventListener("unmute",a):i.onunmute=null}}var N7=A7,R7=I1,H3=N7;function $1(r,t){var e=new H3(r,t);return Object.setPrototypeOf(e,$1.prototype),e}R7($1,H3);var j7=$1,I7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),M7=D3,D7=function(r){I7(t,r);function t(e,n,i,a){var o=r.call(this,e,"data")||this;return Object.defineProperties(o,{maxPacketLifeTime:{enumerable:!0,value:n},maxRetransmits:{enumerable:!0,value:i},ordered:{enumerable:!0,value:a}}),o}return t}(M7),G3=D7,F7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),B7=G3,$7=$e.makeUUID,U7=function(r){F7(t,r);function t(e,n,i){var a=r.call(this,$7(),e,n,i)||this;return Object.defineProperties(a,{_clones:{value:new Set},_dataChannels:{value:new Set}}),a}return t.prototype._addClone=function(e){this._clones.add(e)},t.prototype.removeClone=function(e){this._clones.delete(e)},t.prototype.addDataChannel=function(e){return this._dataChannels.add(e),this},t.prototype.clone=function(){var e=this,n=new t(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(n),n.once("stopped",function(){return e.removeClone(n)}),n},t.prototype.removeDataChannel=function(e){return this._dataChannels.delete(e),this},t.prototype.send=function(e){return this._dataChannels.forEach(function(n){try{n.send(e)}catch{}}),this._clones.forEach(function(n){try{n.send(e)}catch{}}),this},t.prototype.stop=function(){this._dataChannels.forEach(function(e){return e.close()}),this._clones.forEach(function(e){return e.stop()}),r.prototype.stop.call(this)},t}(B7),V7=U7,z7=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),W7=M1,q7=V7,H7=function(r){z7(t,r);function t(e){var n=this;e=Object.assign({DataTrackSender:q7,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},e);var i=e.DataTrackSender,a=new i(e.maxPacketLifeTime,e.maxRetransmits,e.ordered);return n=r.call(this,a.id,"data",e)||this,Object.defineProperties(n,{_trackSender:{value:a},id:{enumerable:!0,value:a.id},maxPacketLifeTime:{enumerable:!0,value:e.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:e.maxRetransmits},ordered:{enumerable:!0,value:e.ordered},reliable:{enumerable:!0,value:e.maxPacketLifeTime===null&&e.maxRetransmits===null}}),n}return t.prototype.send=function(e){this._trackSender.send(e)},t}(W7),G7=H7,K7=I1,K3=G7;function U1(r){var t=new K3(r);return Object.setPrototypeOf(t,U1.prototype),t}K7(U1,K3);var Q7=U1,Bc={LocalAudioTrack:c7,LocalVideoTrack:j7,LocalDataTrack:Q7},Ki=A&&A.__assign||function(){return Ki=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ki.apply(this,arguments)},e5=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},t5=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},r5=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},n5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.createLocalTracks=void 0;var Y7=Jc,J7=$e.buildLogLevels,Q3=Ms,X7=Q3.getUserMedia,Z7=Q3.MediaStreamTrack,V1=Bc,eI=V1.LocalAudioTrack,tI=V1.LocalDataTrack,rI=V1.LocalVideoTrack,nI=Da,z1=zt,iI=z1.DEFAULT_LOG_LEVEL,aI=z1.DEFAULT_LOGGER_NAME,oI=z1.typeErrors.INVALID_VALUE,sI=I3,cI=0;function lI(r){return e5(this,void 0,void 0,function(){var t,e,n,i,a,o,s,l,c,u,d,v,p,y=this;return t5(this,function(b){switch(b.label){case 0:if(t=!(r&&("audio"in r||"video"in r)),e=Ki({audio:t,getUserMedia:X7,loggerName:aI,logLevel:iI,LocalAudioTrack:eI,LocalDataTrack:tI,LocalVideoTrack:rI,MediaStreamTrack:Z7,Log:nI,video:t},r),n="[createLocalTracks #"+ ++cI+"]",i=J7(e.logLevel),a=new e.Log("default",n,i,e.loggerName),o=Object.assign({log:a},e),delete o.name,e.audio===!1&&e.video===!1)return a.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(e.tracks)return a.info("Adding user-provided LocalTracks"),a.debug("LocalTracks:",e.tracks),[2,e.tracks];if(s={audio:typeof e.audio=="object"&&e.audio.name?{name:e.audio.name}:{defaultDeviceCaptureMode:"auto"},video:typeof e.video=="object"&&e.video.name?{name:e.video.name}:{}},s.audio.isCreatedByCreateLocalTracks=!0,s.video.isCreatedByCreateLocalTracks=!0,typeof e.audio=="object")if(typeof e.audio.workaroundWebKitBug1208516=="boolean"&&(s.audio.workaroundWebKitBug1208516=e.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in e.audio&&(l=e.audio.noiseCancellationOptions,delete e.audio.noiseCancellationOptions),!("defaultDeviceCaptureMode"in e.audio))s.audio.defaultDeviceCaptureMode="auto";else{if(["auto","manual"].every(function(S){return S!==e.audio.defaultDeviceCaptureMode}))throw oI("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);s.audio.defaultDeviceCaptureMode=e.audio.defaultDeviceCaptureMode}typeof e.video=="object"&&typeof e.video.workaroundWebKitBug1208516=="boolean"&&(s.video.workaroundWebKitBug1208516=e.video.workaroundWebKitBug1208516),typeof e.audio=="object"&&delete e.audio.name,typeof e.video=="object"&&delete e.video.name,c={audio:e.audio,video:e.video},u=typeof e.audio=="object"&&e.audio.workaroundWebKitBug180748,b.label=1;case 1:return b.trys.push([1,4,,5]),[4,u?sI(a,e.getUserMedia,c):e.getUserMedia(c)];case 2:return d=b.sent(),v=n5(n5([],r5(d.getAudioTracks())),r5(d.getVideoTracks())),a.info("Call to getUserMedia successful; got tracks:",v),[4,Promise.all(v.map(function(S){return e5(y,void 0,void 0,function(){var _,x,k;return t5(this,function(T){switch(T.label){case 0:return S.kind==="audio"&&l?[4,Y7.applyNoiseCancellation(S,l,a)]:[3,2];case 1:return _=T.sent(),x=_.cleanTrack,k=_.noiseCancellation,[2,new o.LocalAudioTrack(x,Ki(Ki(Ki({},s.audio),o),{noiseCancellation:k}))];case 2:if(S.kind==="audio")return[2,new o.LocalAudioTrack(S,Ki(Ki({},s.audio),o))];T.label=3;case 3:return[2,new o.LocalVideoTrack(S,Ki(Ki({},s.video),o))]}})})}))];case 3:return[2,b.sent()];case 4:throw p=b.sent(),a.warn("Call to getUserMedia failed:",p),p;case 5:return[2]}})})}Ip.createLocalTracks=lI;var Zc={},zp={};Object.defineProperty(zp,"__esModule",{value:!0});zp.Timer=void 0;var uI=function(){function r(){this._end=void 0,this.start()}return r.prototype.start=function(){return this._start=Date.now(),this},r.prototype.stop=function(){return this._end=Date.now(),this},r.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:this._end===void 0?void 0:this._end-this._start}},r}();zp.Timer=uI;var el={};Object.defineProperty(el,"__esModule",{value:!0});el.mosToScore=el.calculateMOS=void 0;var i5=94.768;function fI(r,t,e){var n=r+t*2+10,i=0;switch(!0){case n<160:i=i5-n/40;break;case n<1e3:i=i5-(n-120)/10;break}switch(!0){case e<=i/2.5:i=Math.max(i-e*2.5,6.52);break;default:i=0;break}var a=1+.035*i+7e-6*i*(i-60)*(100-i);return a}el.calculateMOS=fI;function dI(r){var t=0;return r?r>4.2?t=5:r>4?t=4:r>3.6?t=3:r>3?t=2:t=1:t=0,t}el.mosToScore=dI;var Wp={},hI=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},pI=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},vI=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.getCombinedConnectionStats=void 0;function io(r,t,e,n){var i=[];return r.forEach(function(a){(n.length===0||n.includes(a.type))&&(e.length===0||e.includes(a.kind))&&typeof a[t]=="number"&&i.push(a[t])}),i}function mI(r){var t=r.publisher,e=r.subscriber;return hI(this,void 0,void 0,function(){var n,i,a,o,s,l,c,u,d,v,p,y,b,S,_;return pI(this,function(x){switch(x.label){case 0:return[4,Promise.all([t,e].map(function(k){return k.getStats()}))];case 1:return n=vI.apply(void 0,[x.sent(),2]),i=n[0],a=n[1],o=io(a,"timestamp",["audio"],["inbound-rtp"]),s=o.length>0?o[0]:0,l=io(a,"jitter",["audio"],["inbound-rtp"]).reduce(function(k,T){return Math.max(k,T)},0),c=io(a,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(k,T){return k+T},0),u=io(a,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(k,T){return k+T},0),d=io(i,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(k,T){return Math.max(k,T)},0),v=io(a,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(k,T){return Math.max(k,T)},0),p=(v||d)*1e3,y=io(i,"bytesSent",[],["candidate-pair"]).reduce(function(k,T){return k+T},0),b=io(a,"bytesReceived",[],["candidate-pair"]).reduce(function(k,T){return k+T},0),S=gI(a),_=[],a.forEach(function(k){(k.type==="local-candidate"||k.type==="remote-candidate")&&_.push(G0(k))}),[2,{timestamp:s,jitter:l,packets:c,packetsLost:u,roundTripTime:p,bytesSent:y,bytesReceived:b,selectedIceCandidatePairStats:S,iceCandidateStats:_}]}})})}Wp.getCombinedConnectionStats=mI;function G0(r){var t=[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}];return t.reduce(function(e,n){var i=[n.key];n.altKeys&&(i=i.concat(n.altKeys));var a=i.find(function(o){return o in r});return a&&typeof r[a]===n.type&&(e[n.key]=r[a]),e},{})}function gI(r){var t=null,e=[];r.forEach(function(s){s.type==="transport"&&s.selectedCandidatePairId?t=s.selectedCandidatePairId:s.type==="candidate-pair"&&e.push(s)});var n=e.find(function(s){return s.selected||t&&s.id===t});if(!n)return null;var i=n,a=r.get(i.localCandidateId),o=r.get(i.remoteCandidateId);return!a||!o?null:{localCandidate:G0(a),remoteCandidate:G0(o)}}var qp={},yI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_I=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},wI=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},bI=yn.EventEmitter,Y3=$e,xI=function(r){yI(t,r);function t(e,n){var i=r.call(this)||this,a=null,o=e;return n=PI(n),Object.defineProperties(i,{_lock:{get:function(){return a},set:function(s){a=s}},_reachableStates:{value:kI(n)},_state:{get:function(){return o},set:function(s){o=s}},_states:{value:n},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return a!==null}},state:{enumerable:!0,get:function(){return o}}}),i.on("stateChanged",function(s){i._whenDeferreds.forEach(function(l){l.when(s,l.resolve,l.reject)})}),i}return t.prototype._whenPromise=function(e){var n=this;if(typeof e!="function")return Promise.reject(new Error("when() executor must be a function"));var i=Y3.defer();return i.when=e,this._whenDeferreds.add(i),i.promise.then(function(a){return n._whenDeferreds.delete(i),a},function(a){throw n._whenDeferreds.delete(i),a})},t.prototype.bracket=function(e,n){var i,a=this;function o(s){if(a.hasLock(i)&&a.releaseLockCompletely(i),s)throw s}return this.takeLock(e).then(function(l){return i=l,n(i)}).then(function(l){return o(),l},o)},t.prototype.hasLock=function(e){return this._lock===e},t.prototype.preempt=function(e,n,i){if(!Td(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');var a;this.isLocked&&(a=this._lock,this._lock=null);var o=null;n&&(o=this.takeLockSync(n));var s=o?null:this.takeLockSync("preemption");return this.transition(e,o||s,i),a&&a.resolve(),s&&this.releaseLock(s),o},t.prototype.releaseLock=function(e){if(this.isLocked){if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");e.depth===0?(this._lock=null,e.resolve()):e.depth--},t.prototype.releaseLockCompletely=function(e){if(this.isLocked){if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock")}else throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");e.depth=0,this._lock=null,e.resolve()},t.prototype.takeLock=function(e){var n=this;if(typeof e=="object"){var i=e;return new Promise(function(s){s(n.takeLockSync(i))})}var a=e;if(this.isLocked){var o=this.takeLock.bind(this,a);return this._lock.promise.then(o)}return Promise.resolve(this.takeLockSync(a))},t.prototype.takeLockSync=function(e){var n=typeof e=="string"?null:e,i=n?n.name:e;if(n&&!this.hasLock(n)||!n&&this.isLocked)throw new Error("Could not take the lock for "+i+" because the lock for "+this._lock.name+" was not released");if(n)return n.depth++,n;var a=SI(i);return this._lock=a,a},t.prototype.transition=function(e,n,i){if(i=i||[],this.isLocked)if(n){if(!this.hasLock(n))throw new Error("Could not transition using the key for "+n.name+" because "+this._lock.name+" has the lock")}else throw new Error("You must provide the key in order to transition");else if(n)throw new Error("Key provided for "+n.name+", but the StateMachine was not locked (possibly due to preemption)");if(!Td(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');this._state=e,this.emit.apply(this,wI([],_I(["stateChanged",e].concat(i))))},t.prototype.tryTransition=function(e,n,i){try{this.transition(e,n,i)}catch{return!1}return!0},t.prototype.when=function(e){var n=this;return this.state===e?Promise.resolve(this):Td(this._reachableStates,this.state,e)?this._whenPromise(function(i,a,o){i===e?a(n):Td(n._reachableStates,i,e)||o(a5(i,e))}):Promise.reject(a5(this.state,e))},t}(bI);function Td(r,t,e){return r.get(t).has(e)}function SI(r){var t=Y3.defer();return t.name=r,t.depth=0,t}function kI(r){return Array.from(r.keys()).reduce(function(t,e){return t.set(e,J3(r,e))},new Map)}function J3(r,t,e){return e=e||new Set,r.get(t).forEach(function(n){e.has(n)||(e.add(n),J3(r,n,e).forEach(e.add,e))}),e}function PI(r){var t=new Map;for(var e in r)t.set(e,new Set(r[e]));return t}function a5(r,t){return new Error('"'+t+'" cannot be reached from "'+r+'"')}var sl=xI,TI=function(){function r(t,e){var n=this;e=Object.assign({navigator,window},e);var i=e.navigator,a=i.connection||{type:null},o=a.type,s=a.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var d=o!==n.type&&n.isOnline;o=n.type,d&&t()}},_target:{value:a}}:{_events:{value:["online"]},_listener:{value:t},_target:{value:e.window}},l=s._events,c=s._listener,u=s._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return typeof i.onLine=="boolean"?i.onLine:!0}},type:{enumerable:!0,get:function(){return a.type||null}},_listener:c,_events:l,_target:u})}return r.prototype.start=function(){var t=this;this._events.forEach(function(e){t._target.addEventListener(e,t._listener)})},r.prototype.stop=function(){var t=this;this._events.forEach(function(e){t._target.removeEventListener(e,t._listener)})},r}(),EI=TI,CI=function(){function r(t,e,n){n===void 0&&(n=!0),Object.defineProperties(this,{_delay:{value:e,writable:!0},_fn:{value:t},_timeout:{value:null,writable:!0}}),n&&this.start()}return Object.defineProperty(r.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),r.prototype.setDelay=function(t){this._delay=t},r.prototype.start=function(){var t=this;this.isSet||(this._timeout=setTimeout(function(){var e=t._fn;t.clear(),e()},this._delay))},r.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},r.prototype.reset=function(){this.clear(),this.start()},r}(),Fs=CI,Wm,o5;function X3(){return o5||(o5=1,Wm=WebSocket),Wm}var LI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),s5=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},AI=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},OI=sl,Z3=$e,NI=Z3.buildLogLevels,RI=Z3.makeUUID,jI=Da,II=EI,nc=Fs,MI=0,DI={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},c5={closed:"close",open:"open",waiting:"waiting"},FI=2,BI=3,$I=3,UI=5e3,VI=15e3,zI=5e3,WI=200,l5=1e3,K0=3e3,Q0=3001,Y0=3002,J0=3003,eP=3004,Ed=3005,X0=3006,tP=3007,u5=globalThis,qI=u5.WebSocket?u5.WebSocket:X3(),Pi={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},HI=new Map([[K0,Pi.TIMEOUT],[Q0,Pi.TIMEOUT],[Y0,Pi.FAILED],[J0,Pi.FAILED],[eP,Pi.TIMEOUT],[X0,Pi.BUSY],[tP,Pi.TIMEOUT]]),rP=function(r){LI(t,r);function t(e,n){var i=r.call(this,"early",DI)||this;n=Object.assign({helloBody:null,maxConsecutiveFailedHellos:$I,maxConsecutiveMissedHeartbeats:BI,requestedHeartbeatTimeout:UI,openTimeout:VI,welcomeTimeout:zI,Log:jI,WebSocket:qI},n);var a=NI(n.logLevel),o=new n.Log("default",i,a,n.loggerName),s=n.networkMonitor?new II(function(){var c=s.type,u="Network changed"+(c?" to "+c:"");o.debug(u),i._close({code:eP,reason:u})}):null;Object.defineProperties(i,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:n.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:n.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++MI},_log:{value:o},_messageQueue:{value:[]},_networkMonitor:{value:s},_options:{value:n},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:e},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var l={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return i.on("stateChanged",function(c){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];c in c5&&i.emit.apply(i,AI([c5[c]],s5(u)));var v={name:c,group:"signaling",level:l[i.state]};if(c==="closed"){var p=s5(u,1),y=p[0];v.payload={reason:y},v.level=y===Pi.LOCAL?"info":"error"}i._eventObserver.emit("event",v)}),i._eventObserver.emit("event",{name:i.state,group:"signaling",level:l[i.state]}),i._connect(),i}return t.prototype.toString=function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"},t.prototype._close=function(e){var n=e.code,i=e.reason;if(this.state!=="closed"){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&n!==Ed&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var a=this._log;n===l5?(a.debug("Closed"),this.transition("closed",null,[Pi.LOCAL])):(a.warn("Closed: "+n+" - "+i),n!==Ed&&this.transition("closed",null,[HI.get(n)||Pi.REMOTE]));var o=this._ws.readyState,s=this._options.WebSocket;o!==s.CLOSING&&o!==s.CLOSED&&this._ws.close(n,i)}},t.prototype._connect=function(){var e=this,n=this._log;if(this.state==="waiting")this.transition("early");else if(this.state!=="early"){n.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');return}this._ws=new this._options.WebSocket(this._serverUrl);var i=this._ws;n.debug("Created a new WebSocket:",i),i.addEventListener("close",function(o){return e._close(o)});var a=this._options.openTimeout;this._openTimeout=new nc(function(){var o="Failed to open in "+a+" ms";e._close({code:tP,reason:o})},a),i.addEventListener("open",function(){n.debug("WebSocket opened:",i),e._openTimeout.clear(),e._startHandshake(),e._networkMonitor&&e._networkMonitor.start()}),i.addEventListener("message",function(o){n.debug("Incoming: "+o.data);try{o=JSON.parse(o.data)}catch(s){e.emit("error",s);return}switch(o.type){case"bad":e._handleBad(o);break;case"busy":e._handleBusy(o);break;case"bye":break;case"msg":e._handleMessage(o);case"heartbeat":e._handleHeartbeat();break;case"welcome":e._handleWelcome(o);break;default:e._log.debug("Unknown message type: "+o.type),e.emit("error",new Error("Unknown message type: "+o.type));break}})},t.prototype._handleBad=function(e){var n=e.reason,i=this._log;if(!["connecting","open"].includes(this.state)){i.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.');return}if(this.state==="connecting"){i.warn("Closing: "+Y0+" - "+n),this._close({code:Y0,reason:n});return}i.debug("Error: "+n),this.emit("error",new Error(n))},t.prototype._handleBusy=function(e){var n=this,i=e.cookie,a=e.keepAlive,o=e.retryAfter,s=this._log;if(!["connecting","waiting"].includes(this.state)){s.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.');return}this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var l=o<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+o+" ms";if(o<0){s.warn("Closing: "+X0+" - "+l),this._close({code:X0,reason:l});return}var c=this._options.maxConsecutiveFailedHellos;this._hellosLeft=c,this._cookie=i||null,a?(s.warn(l),this._busyWaitTimeout=new nc(function(){return n._startHandshake()},o)):(s.warn("Closing: "+Ed+" - "+l),this._close({code:Ed,reason:l}),this._busyWaitTimeout=new nc(function(){return n._connect()},o)),this.transition("waiting",null,[a,o])},t.prototype._handleHeartbeat=function(){if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.');return}this._heartbeatTimeout.reset()},t.prototype._handleHeartbeatTimeout=function(){if(this.state==="open"){var e=this._log,n=this._options.maxConsecutiveMissedHeartbeats;e.debug("Consecutive heartbeats missed: "+n);var i="Missed "+n+' "heartbeat" messages';e.warn("Closing: "+Q0+" - "+i),this._close({code:Q0,reason:i})}},t.prototype._handleMessage=function(e){var n=e.body;if(this.state!=="open"){this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.');return}this.emit("message",n)},t.prototype._handleWelcome=function(e){var n=this,i=e.negotiatedTimeout,a=this._log;if(!["connecting","waiting"].includes(this.state)){a.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.');return}this.state==="waiting"&&(a.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var o=this._options.maxConsecutiveMissedHeartbeats,s=i*o,l=i-WI;this._welcomeTimeout.clear(),this._heartbeatTimeout=new nc(function(){return n._handleHeartbeatTimeout()},s),this._messageQueue.splice(0).forEach(function(c){return n._send(c)}),this._sendHeartbeatTimeout=new nc(function(){return n._sendHeartbeat()},l),this.transition("open")},t.prototype._handleWelcomeTimeout=function(){if(this.state==="connecting"){var e=this._log;if(this._hellosLeft<=0){var n="All handshake attempts failed";e.warn("Closing: "+K0+" - "+n),this._close({code:K0,reason:n});return}var i=this._options.maxConsecutiveFailedHellos;e.warn("Handshake attempt "+(i-this._hellosLeft)+" failed"),this._startHandshake()}},t.prototype._send=function(e){var n=this._ws.readyState,i=this._options.WebSocket;if(n===i.OPEN){var a=JSON.stringify(e);this._log.debug("Outgoing: "+a);try{this._ws.send(a),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var o="Failed to send message";this._log.warn("Closing: "+J0+" - "+o),this._close({code:J0,reason:o})}}},t.prototype._sendHeartbeat=function(){this.state!=="closed"&&this._send({type:"heartbeat"})},t.prototype._sendHello=function(){var e=this._options,n=e.helloBody,i=e.requestedHeartbeatTimeout,a={id:RI(),timeout:i,type:"hello",version:FI};this._cookie&&(a.cookie=this._cookie),n&&(a.body=n),this._send(a)},t.prototype._sendOrEnqueue=function(e){var n=this;if(this.state!=="closed"){var i=this.state==="open"?function(a){return n._send(a)}:function(a){return n._messageQueue.push(a)};i(e)}},t.prototype._startHandshake=function(){var e=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),this.state==="connecting"){this._hellosLeft--,this._sendHello();var n=this._options.welcomeTimeout;this._welcomeTimeout=new nc(function(){return e._handleWelcomeTimeout()},n)}},t.prototype.close=function(){this.state!=="closed"&&(this._sendOrEnqueue({type:"bye"}),this._close({code:l5,reason:"Normal"}))},t.prototype.sendMessage=function(e){this._sendOrEnqueue({body:e,type:"msg"})},t}(OI);rP.CloseReason=Pi;var nP=rP,Ve={},GI=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),KI=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},QI=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},YI=function(r){GI(t,r);function t(e){var n=this,i=[].slice.call(arguments,1);n=r.apply(this,QI([],KI(i)))||this,Object.setPrototypeOf(n,t.prototype);var a=Error.apply(n,i);return a.name="TwilioError",Object.defineProperty(n,"code",{value:e,enumerable:!0}),Object.getOwnPropertyNames(a).forEach(function(o){Object.defineProperty(this,o,{value:a[o],enumerable:!0})},n),n}return t.prototype.toString=function(){var e=this.message?": "+this.message:"";return this.name+" "+this.code+e},t}(Error),JI=YI,nt=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rt=JI,tt={};Ve.createTwilioError=function(t,e){return t=typeof t=="number"?t:0,e=typeof e=="string"&&e?e:"Unknown error",tt[t]?new tt[t]:new rt(t,e)};var iP=function(r){nt(t,r);function t(){var e=r.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.AccessTokenInvalidError=iP;Object.defineProperty(tt,20101,{value:iP});var aP=function(r){nt(t,r);function t(){var e=r.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.AccessTokenHeaderInvalidError=aP;Object.defineProperty(tt,20102,{value:aP});var oP=function(r){nt(t,r);function t(){var e=r.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.AccessTokenIssuerInvalidError=oP;Object.defineProperty(tt,20103,{value:oP});var sP=function(r){nt(t,r);function t(){var e=r.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.AccessTokenExpiredError=sP;Object.defineProperty(tt,20104,{value:sP});var cP=function(r){nt(t,r);function t(){var e=r.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.AccessTokenNotYetValidError=cP;Object.defineProperty(tt,20105,{value:cP});var lP=function(r){nt(t,r);function t(){var e=r.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.AccessTokenGrantsInvalidError=lP;Object.defineProperty(tt,20106,{value:lP});var uP=function(r){nt(t,r);function t(){var e=r.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.AccessTokenSignatureInvalidError=uP;Object.defineProperty(tt,20107,{value:uP});var fP=function(r){nt(t,r);function t(){var e=r.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.SignalingConnectionError=fP;Object.defineProperty(tt,53e3,{value:fP});var dP=function(r){nt(t,r);function t(){var e=r.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.SignalingConnectionDisconnectedError=dP;Object.defineProperty(tt,53001,{value:dP});var hP=function(r){nt(t,r);function t(){var e=r.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.SignalingConnectionTimeoutError=hP;Object.defineProperty(tt,53002,{value:hP});var pP=function(r){nt(t,r);function t(){var e=r.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.SignalingIncomingMessageInvalidError=pP;Object.defineProperty(tt,53003,{value:pP});var vP=function(r){nt(t,r);function t(){var e=r.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.SignalingOutgoingMessageInvalidError=vP;Object.defineProperty(tt,53004,{value:vP});var mP=function(r){nt(t,r);function t(){var e=r.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.SignalingServerBusyError=mP;Object.defineProperty(tt,53006,{value:mP});var gP=function(r){nt(t,r);function t(){var e=r.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomNameInvalidError=gP;Object.defineProperty(tt,53100,{value:gP});var yP=function(r){nt(t,r);function t(){var e=r.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomNameTooLongError=yP;Object.defineProperty(tt,53101,{value:yP});var _P=function(r){nt(t,r);function t(){var e=r.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomNameCharsInvalidError=_P;Object.defineProperty(tt,53102,{value:_P});var wP=function(r){nt(t,r);function t(){var e=r.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomCreateFailedError=wP;Object.defineProperty(tt,53103,{value:wP});var bP=function(r){nt(t,r);function t(){var e=r.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomConnectFailedError=bP;Object.defineProperty(tt,53104,{value:bP});var xP=function(r){nt(t,r);function t(){var e=r.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomMaxParticipantsExceededError=xP;Object.defineProperty(tt,53105,{value:xP});var SP=function(r){nt(t,r);function t(){var e=r.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomNotFoundError=SP;Object.defineProperty(tt,53106,{value:SP});var kP=function(r){nt(t,r);function t(){var e=r.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomMaxParticipantsOutOfRangeError=kP;Object.defineProperty(tt,53107,{value:kP});var PP=function(r){nt(t,r);function t(){var e=r.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomTypeInvalidError=PP;Object.defineProperty(tt,53108,{value:PP});var TP=function(r){nt(t,r);function t(){var e=r.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomTimeoutOutOfRangeError=TP;Object.defineProperty(tt,53109,{value:TP});var EP=function(r){nt(t,r);function t(){var e=r.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomStatusCallbackMethodInvalidError=EP;Object.defineProperty(tt,53110,{value:EP});var CP=function(r){nt(t,r);function t(){var e=r.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomStatusCallbackInvalidError=CP;Object.defineProperty(tt,53111,{value:CP});var LP=function(r){nt(t,r);function t(){var e=r.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomStatusInvalidError=LP;Object.defineProperty(tt,53112,{value:LP});var AP=function(r){nt(t,r);function t(){var e=r.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomRoomExistsError=AP;Object.defineProperty(tt,53113,{value:AP});var OP=function(r){nt(t,r);function t(){var e=r.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomInvalidParametersError=OP;Object.defineProperty(tt,53114,{value:OP});var NP=function(r){nt(t,r);function t(){var e=r.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomMediaRegionInvalidError=NP;Object.defineProperty(tt,53115,{value:NP});var RP=function(r){nt(t,r);function t(){var e=r.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomMediaRegionUnavailableError=RP;Object.defineProperty(tt,53116,{value:RP});var jP=function(r){nt(t,r);function t(){var e=r.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomSubscriptionOperationNotSupportedError=jP;Object.defineProperty(tt,53117,{value:jP});var IP=function(r){nt(t,r);function t(){var e=r.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomCompletedError=IP;Object.defineProperty(tt,53118,{value:IP});var MP=function(r){nt(t,r);function t(){var e=r.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomAudioOnlyFlagNotSupportedError=MP;Object.defineProperty(tt,53124,{value:MP});var DP=function(r){nt(t,r);function t(){var e=r.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.RoomTrackKindNotSupportedError=DP;Object.defineProperty(tt,53125,{value:DP});var FP=function(r){nt(t,r);function t(){var e=r.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.ParticipantIdentityInvalidError=FP;Object.defineProperty(tt,53200,{value:FP});var BP=function(r){nt(t,r);function t(){var e=r.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.ParticipantIdentityTooLongError=BP;Object.defineProperty(tt,53201,{value:BP});var $P=function(r){nt(t,r);function t(){var e=r.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.ParticipantIdentityCharsInvalidError=$P;Object.defineProperty(tt,53202,{value:$P});var UP=function(r){nt(t,r);function t(){var e=r.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.ParticipantMaxTracksExceededError=UP;Object.defineProperty(tt,53203,{value:UP});var VP=function(r){nt(t,r);function t(){var e=r.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.ParticipantNotFoundError=VP;Object.defineProperty(tt,53204,{value:VP});var zP=function(r){nt(t,r);function t(){var e=r.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.ParticipantDuplicateIdentityError=zP;Object.defineProperty(tt,53205,{value:zP});var WP=function(r){nt(t,r);function t(){var e=r.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.TrackInvalidError=WP;Object.defineProperty(tt,53300,{value:WP});var qP=function(r){nt(t,r);function t(){var e=r.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.TrackNameInvalidError=qP;Object.defineProperty(tt,53301,{value:qP});var HP=function(r){nt(t,r);function t(){var e=r.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.TrackNameTooLongError=HP;Object.defineProperty(tt,53302,{value:HP});var GP=function(r){nt(t,r);function t(){var e=r.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.TrackNameCharsInvalidError=GP;Object.defineProperty(tt,53303,{value:GP});var KP=function(r){nt(t,r);function t(){var e=r.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.TrackNameIsDuplicatedError=KP;Object.defineProperty(tt,53304,{value:KP});var QP=function(r){nt(t,r);function t(){var e=r.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.TrackServerTrackCapacityReachedError=QP;Object.defineProperty(tt,53305,{value:QP});var YP=function(r){nt(t,r);function t(){var e=r.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.MediaClientLocalDescFailedError=YP;Object.defineProperty(tt,53400,{value:YP});var JP=function(r){nt(t,r);function t(){var e=r.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.MediaServerLocalDescFailedError=JP;Object.defineProperty(tt,53401,{value:JP});var XP=function(r){nt(t,r);function t(){var e=r.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.MediaClientRemoteDescFailedError=XP;Object.defineProperty(tt,53402,{value:XP});var ZP=function(r){nt(t,r);function t(){var e=r.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.MediaServerRemoteDescFailedError=ZP;Object.defineProperty(tt,53403,{value:ZP});var eT=function(r){nt(t,r);function t(){var e=r.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.MediaNoSupportedCodecError=eT;Object.defineProperty(tt,53404,{value:eT});var tT=function(r){nt(t,r);function t(){var e=r.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.MediaConnectionError=tT;Object.defineProperty(tt,53405,{value:tT});var rT=function(r){nt(t,r);function t(){var e=r.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.MediaDTLSTransportFailedError=rT;Object.defineProperty(tt,53407,{value:rT});var nT=function(r){nt(t,r);function t(){var e=r.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.ConfigurationAcquireFailedError=nT;Object.defineProperty(tt,53500,{value:nT});var iT=function(r){nt(t,r);function t(){var e=r.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(e,t.prototype),e}return t}(rt);Ve.ConfigurationAcquireTurnFailedError=iT;Object.defineProperty(tt,53501,{value:iT});Object.defineProperty(qp,"__esModule",{value:!0});qp.getTurnCredentials=void 0;var XI=nP,ZI=zt.ICE_VERSION,aT=Ve,eM=aT.createTwilioError,tM=aT.SignalingConnectionError,rM=yn;function nM(r,t){return new Promise(function(e,n){var i=new rM.EventEmitter,a={networkMonitor:null,eventObserver:i,helloBody:{edge:"roaming",preflight:!0,token:r,type:"ice",version:ZI}},o=new XI(t,a),s=!1;o.once("close",function(){s||(s=!0,n(new tM))}),o.on("message",function(l){var c=l.code,u=l.message,d=l.ice_servers,v=l.type;(v==="iced"||v==="error")&&!s&&(s=!0,v==="iced"?e(d):n(eM(c,u)),o.close())})})}qp.getTurnCredentials=nM;var Hp={},f5=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},d5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r};Object.defineProperty(Hp,"__esModule",{value:!0});Hp.makeStat=void 0;function iM(r){if(r&&r.length){var t=Math.min.apply(Math,d5([],f5(r))),e=Math.max.apply(Math,d5([],f5(r))),n=r.reduce(function(i,a){return i+a},0)/r.length;return{min:t,max:e,average:n}}return null}Hp.makeStat=iM;var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.syntheticAudio=void 0;function aM(){var r=Up(),t={},e=r.getOrCreate(t),n=e.createOscillator(),i=n.connect(e.createMediaStreamDestination());n.start();var a=i.stream.getAudioTracks()[0],o=a.stop;return a.stop=function(){o.call(a),r.release(t)},a}Gp.syntheticAudio=aM;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.syntheticVideo=void 0;function oM(r){var t=r===void 0?{}:r,e=t.width,n=e===void 0?640:e,i=t.height,a=i===void 0?480:i,o=Object.assign(document.createElement("canvas"),{width:n,height:a}),s=o.getContext("2d");s.fillStyle="green",s.fillRect(0,0,o.width,o.height);var l=!1;requestAnimationFrame(function v(){if(!l){var p=Math.round(Math.random()*255),y=Math.round(Math.random()*255),b=Math.round(Math.random()*255),S=Math.round(Math.random()*255);s.fillStyle="rgba("+p+", "+y+", "+b+", "+S+")",s.fillRect(Math.random()*n,Math.random()*a,50,50),requestAnimationFrame(v)}});var c=o.captureStream(30),u=c.getTracks()[0],d=u.stop;return u.stop=function(){l=!0,d.call(u)},u}Kp.syntheticVideo=oM;var sM=function(){function r(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return r.prototype.get=function(){var t=this._samples,e=t[1].denominator-t[0].denominator||1/0,n=t[1].numerator-t[0].numerator;return n/e},r.prototype.putSample=function(t,e){var n=this._samples;n.shift(),n.push({denominator:e,numerator:t})},r}(),oT=sM,cM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),lM=yn.EventEmitter,uM=["signaling","room","media","quality","video-processor","preflight"],fM=["debug","error","info","warning"],dM=function(r){cM(t,r);function t(e,n,i,a){a===void 0&&(a=null);var o=r.call(this)||this;return o.on("event",function(s){var l=s.name,c=s.group,u=s.level,d=s.payload;if(typeof l!="string")throw i.error("Unexpected name: ",l),new Error("Unexpected name: ",l);if(!uM.includes(c))throw i.error("Unexpected group: ",c),new Error("Unexpected group: ",c);if(!fM.includes(u))throw i.error("Unexpected level: ",u),new Error("Unexpected level: ",u);var v=Date.now(),p=v-n,y=Object.assign({elapsedTime:p,level:u},d||{});e.publish(c,l,y);var b=Object.assign({elapsedTime:p,group:c,level:u,name:l,timestamp:v},d?{payload:d}:{}),S={debug:"debug",error:"error",info:"info",warning:"warn"}[u];i[S]("event",b),a&&c==="signaling"&&a.emit("event",b)}),o}return t}(lM),sT=dM,hM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ac=A&&A.__assign||function(){return Ac=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ac.apply(this,arguments)},pM=yn.EventEmitter,vM=$e.getUserAgent,mM=5,gM=50,yM=1e3,h5=globalThis,_M=h5.WebSocket?h5.WebSocket:X3(),cT=zt,wM=cT.hardwareDevicePublisheriPad,bM=cT.hardwareDevicePublisheriPhone,xM=$e,p5=Ds,SM=function(r){hM(t,r);function t(e,n,i,a,o,s){var l=r.call(this)||this;return s=Object.assign({gateway:kM(a,o)+"/v1/VideoEvents",maxReconnectAttempts:mM,reconnectIntervalMs:gM,userAgent:vM(),WebSocket:_M},s),Object.defineProperties(l,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:xM.defer()},_reconnectAttemptsLeft:{value:s.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:s.WebSocket}}),l._readyToConnect.promise.then(function(c){var u=c.roomSid,d=c.participantSid,v=l;l.on("disconnected",function p(y){if(v._session=null,y&&v._reconnectAttemptsLeft>0){v.emit("reconnecting"),TM(v,e,n,i,u,d,s);return}v.removeListener("disconnected",p)}),Z0(l,e,n,i,u,d,s)}).catch(function(){}),l}return t.prototype.connect=function(e,n){this._readyToConnect.resolve({roomSid:e,participantSid:n})},t.prototype._publish=function(e){e.session=this._session,this._ws.send(JSON.stringify(e))},t.prototype.disconnect=function(){if(this._ws===null||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},t.prototype.publish=function(e,n,i){if(this._ws!==null&&(this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED))return!1;var a=typeof this._session=="string"?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue);return a({group:e,name:n,payload:i,timestamp:Date.now(),type:"event",version:1}),!0},t}(pM);function Z0(r,t,e,n,i,a,o){r._connectTimestamp=Date.now(),r._reconnectAttemptsLeft--,r._ws=new o.WebSocket(o.gateway);var s=r._ws;s.addEventListener("close",function(l){if(l.code===yM){r.emit("disconnected");return}r.emit("disconnected",new Error("WebSocket Error "+l.code+": "+l.reason))}),s.addEventListener("message",function(l){PM(r,JSON.parse(l.data),o)}),s.addEventListener("open",function(){var l={type:"connect",token:t,version:1};l.publisher={name:e,sdkVersion:n,userAgent:o.userAgent,participantSid:a,roomSid:i},p5.isIpad()?l.publisher=Ac(Ac({},l.publisher),wM):p5.isIphone()&&(l.publisher=Ac(Ac({},l.publisher),bM)),s.send(JSON.stringify(l))})}function kM(r,t){return r==="prod"?"wss://sdkgw."+t+".twilio.com":"wss://sdkgw."+r+"-"+t+".twilio.com"}function PM(r,t,e){switch(t.type){case"connected":r._session=t.session,r._reconnectAttemptsLeft=e.maxReconnectAttempts,r._eventQueue.splice(0).forEach(r._publish,r),r.emit("connected");break;case"error":r._ws.close(),r.emit("disconnected",new Error(t.message));break}}function TM(r,t,e,n,i,a,o){var s=Date.now()-r._connectTimestamp,l=o.reconnectIntervalMs-s;if(l>0){setTimeout(function(){Z0(r,t,e,n,i,a,o)},l);return}Z0(r,t,e,n,i,a,o)}var lT=SM,EM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),np=A&&A.__assign||function(){return np=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},np.apply(this,arguments)},ru=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},nu=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Zc,"__esModule",{value:!0});Zc.runPreflight=Zc.PreflightTest=void 0;var ic=zt,ac=zp,CM=el,LM=Wp,AM=qp,Cd=Hp,OM=Gp,NM=Kp,RM=$e,jM=zt.WS_SERVER,IM=Da,MM=ff,qm=oT,DM=sT,FM=lT,uT=Dp,BM=uT.createSID,$M=uT.sessionSID,fT=Ve,UM=fT.SignalingConnectionTimeoutError,v5=fT.MediaConnectionError,dT=1e3,VM=10*dT,os={mediaAcquired:"mediaAcquired",connected:"connected",mediaSubscribed:"mediaSubscribed",mediaStarted:"mediaStarted",dtlsConnected:"dtlsConnected",peerConnectionConnected:"peerConnectionConnected",iceConnected:"iceConnected"};function zM(r){return r!==null&&typeof r<"u"}var WM=0,hT=function(r){EM(t,r);function t(e,n){var i=r.call(this)||this;i._testTiming=new ac.Timer,i._dtlsTiming=new ac.Timer,i._iceTiming=new ac.Timer,i._peerConnectionTiming=new ac.Timer,i._mediaTiming=new ac.Timer,i._connectTiming=new ac.Timer,i._sentBytesMovingAverage=new qm,i._packetLossMovingAverage=new qm,i._progressEvents=[],i._receivedBytesMovingAverage=new qm;var a=n,o=a.environment,s=o===void 0?"prod":o,l=a.region,c=l===void 0?"gll":l,u=a.duration,d=u===void 0?VM:u,v=a.wsServer||jM(s,c);return i._log=new IM("default",i,ic.DEFAULT_LOG_LEVEL,ic.DEFAULT_LOGGER_NAME),i._testDuration=d,i._instanceId=WM++,i._testTiming.start(),i._runPreflightTest(e,s,v),i}return t.prototype.toString=function(){return"[Preflight #"+this._instanceId+"]"},t.prototype.stop=function(){this._stopped=!0},t.prototype._generatePreflightReport=function(e){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:Cd.makeStat(e==null?void 0:e.jitter),rtt:Cd.makeStat(e==null?void 0:e.rtt),packetLoss:Cd.makeStat(e==null?void 0:e.packetLoss)},selectedIceCandidatePairStats:e?e.selectedIceCandidatePairStats:null,iceCandidateStats:e?e.iceCandidateStats:[],progressEvents:this._progressEvents,mos:Cd.makeStat(e==null?void 0:e.mos)}},t.prototype._executePreflightStep=function(e,n,i){return ru(this,void 0,void 0,function(){var a,o,s,l,c;return nu(this,function(u){switch(u.label){case 0:if(this._log.debug("Executing step: ",e),a=this._testDuration+10*dT,this._stopped)throw new Error("stopped");o=Promise.resolve().then(n),s=null,l=new Promise(function(d,v){s=setTimeout(function(){v(i||new Error(e+" timeout."))},a)}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.race([l,o])];case 2:return c=u.sent(),[2,c];case 3:return s!==null&&clearTimeout(s),[7];case 4:return[2]}})})},t.prototype._collectNetworkTimings=function(e){var n=this;return new Promise(function(i){var a;e.addEventListener("iceconnectionstatechange",function(){e.iceConnectionState==="checking"&&n._iceTiming.start(),e.iceConnectionState==="connected"&&(n._iceTiming.stop(),n._updateProgress(os.iceConnected),(!a||a&&a.state==="connected")&&i())}),e.addEventListener("connectionstatechange",function(){e.connectionState==="connecting"&&n._peerConnectionTiming.start(),e.connectionState==="connected"&&(n._peerConnectionTiming.stop(),n._updateProgress(os.peerConnectionConnected))});var o=e.getSenders(),s=o.map(function(l){return l.transport}).find(zM);typeof s<"u"&&(a=s,a.addEventListener("statechange",function(){a.state==="connecting"&&n._dtlsTiming.start(),a.state==="connected"&&(n._dtlsTiming.stop(),n._updateProgress(os.dtlsConnected),e.iceConnectionState==="connected"&&i())}))})},t.prototype._setupInsights=function(e){var n=e.token,i=e.environment,a=i===void 0?ic.DEFAULT_ENVIRONMENT:i,o=e.realm,s=o===void 0?ic.DEFAULT_REALM:o,l={},c=new FM(n,ic.SDK_NAME,ic.SDK_VERSION,a,s,l);c.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var u=new DM(c,Date.now(),this._log),d=void 0;return{reportToInsights:function(v){var p,y,b=v.report,S=b.stats.jitter||d,_=b.stats.rtt||d,x=b.stats.packetLoss||d,k=b.mos||d,T=new Map;b.iceCandidateStats.forEach(function(j){if(j.candidateType&&j.protocol){var F=T.get(j.candidateType)||[];F.indexOf(j.protocol)<0&&F.push(j.protocol),T.set(j.candidateType,F)}});var R=JSON.stringify(Object.fromEntries(T)),B={name:"report",group:"preflight",level:b.error?"error":"info",payload:{sessionSID:$M,preflightSID:BM("PF"),progressEvents:JSON.stringify(b.progressEvents),testTiming:b.testTiming,dtlsTiming:b.networkTiming.dtls,iceTiming:b.networkTiming.ice,peerConnectionTiming:b.networkTiming.peerConnection,connectTiming:b.networkTiming.connect,mediaTiming:b.networkTiming.media,selectedLocalCandidate:(p=b.selectedIceCandidatePairStats)===null||p===void 0?void 0:p.localCandidate,selectedRemoteCandidate:(y=b.selectedIceCandidatePairStats)===null||y===void 0?void 0:y.remoteCandidate,iceCandidateStats:R,jitterStats:S,rttStats:_,packetLossStats:x,mosStats:k,error:b.error}};u.emit("event",B),setTimeout(function(){return c.disconnect()},2e3)}}},t.prototype._runPreflightTest=function(e,n,i){return ru(this,void 0,void 0,function(){var a,o,s,l,c,u,d,v,p,y,b,S,_=this;return nu(this,function(x){switch(x.label){case 0:a=[],o=[],s=this._setupInsights({token:e,environment:n}).reportToInsights,x.label=1;case 1:return x.trys.push([1,8,9,10]),l=[],[4,this._executePreflightStep("Acquire media",function(){return[OM.syntheticAudio(),NM.syntheticVideo({width:640,height:480})]})];case 2:return a=x.sent(),this._updateProgress(os.mediaAcquired),this.emit("debug",{localTracks:a}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return AM.getTurnCredentials(e,i)},new UM)];case 3:return c=x.sent(),this._connectTiming.stop(),this._updateProgress(os.connected),u=new RTCPeerConnection({iceServers:c,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),d=new RTCPeerConnection({iceServers:c,bundlePolicy:"max-bundle"}),o.push(u),o.push(d),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return ru(_,void 0,void 0,function(){var k,T,R,B;return nu(this,function(j){switch(j.label){case 0:return u.addEventListener("icecandidate",function(F){return F.candidate&&d.addIceCandidate(F.candidate)}),d.addEventListener("icecandidate",function(F){return F.candidate&&u.addIceCandidate(F.candidate)}),a.forEach(function(F){return u.addTrack(F)}),k=new Promise(function(F){var M=[];d.addEventListener("track",function(q){M.push(q.track),M.length===a.length&&F(M)})}),[4,u.createOffer()];case 1:return T=j.sent(),R=T,[4,u.setLocalDescription(R)];case 2:return j.sent(),[4,d.setRemoteDescription(R)];case 3:return j.sent(),[4,d.createAnswer()];case 4:return B=j.sent(),[4,d.setLocalDescription(B)];case 5:return j.sent(),[4,u.setRemoteDescription(B)];case 6:return j.sent(),[4,this._collectNetworkTimings(u)];case 7:return j.sent(),[2,k]}})})},new v5)];case 4:return v=x.sent(),this.emit("debug",{remoteTracks:v}),v.forEach(function(k){k.addEventListener("ended",function(){return _._log.warn(k.kind+":ended")}),k.addEventListener("mute",function(){return _._log.warn(k.kind+":muted")}),k.addEventListener("unmute",function(){return _._log.warn(k.kind+":unmuted")})}),this._updateProgress(os.mediaSubscribed),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(k){var T=document.createElement("video");T.autoplay=!0,T.playsInline=!0,T.muted=!0,T.srcObject=new MediaStream(v),l.push(T),_.emit("debugElement",T),T.oncanplay=k})},new v5)];case 5:return x.sent(),this._mediaTiming.stop(),this._updateProgress(os.mediaStarted),[4,this._executePreflightStep("Collect stats for duration",function(){return _._collectRTCStatsForDuration(_._testDuration,qM(),u,d)})];case 6:return p=x.sent(),[4,this._executePreflightStep("Generate report",function(){return _._generatePreflightReport(p)})];case 7:return y=x.sent(),s({report:y}),this.emit("completed",y),[3,10];case 8:return b=x.sent(),S=this._generatePreflightReport(),s({report:np(np({},S),{error:b==null?void 0:b.toString()})}),this.emit("failed",b,S),[3,10];case 9:return o.forEach(function(k){return k.close()}),a.forEach(function(k){return k.stop()}),[7];case 10:return[2]}})})},t.prototype._collectRTCStats=function(e,n,i){return ru(this,void 0,void 0,function(){var a,o,s,l,c,u,d,v,p,y,b,S,_,x;return nu(this,function(k){switch(k.label){case 0:return[4,LM.getCombinedConnectionStats({publisher:n,subscriber:i})];case 1:return a=k.sent(),o=a.timestamp,s=a.bytesSent,l=a.bytesReceived,c=a.packets,u=a.packetsLost,d=a.roundTripTime,v=a.jitter,p=a.selectedIceCandidatePairStats,y=a.iceCandidateStats,b=e.jitter.length>0,e.jitter.push(v),e.rtt.push(d),this._sentBytesMovingAverage.putSample(s,o),this._receivedBytesMovingAverage.putSample(l,o),this._packetLossMovingAverage.putSample(u,c),b&&(e.outgoingBitrate.push(this._sentBytesMovingAverage.get()*1e3*8),e.incomingBitrate.push(this._receivedBytesMovingAverage.get()*1e3*8),S=this._packetLossMovingAverage.get(),_=Math.min(100,S*100),e.packetLoss.push(_),x=CM.calculateMOS(d,v,S),e.mos.push(x)),e.selectedIceCandidatePairStats||(e.selectedIceCandidatePairStats=p),e.iceCandidateStats.length===0&&(e.iceCandidateStats=y),[2]}})})},t.prototype._collectRTCStatsForDuration=function(e,n,i,a){return ru(this,void 0,void 0,function(){var o,s,l;return nu(this,function(c){switch(c.label){case 0:return o=Date.now(),s=Math.min(1e3,e),[4,RM.waitForSometime(s)];case 1:return c.sent(),[4,this._collectRTCStats(n,i,a)];case 2:return c.sent(),l=e-(Date.now()-o),l>0?[4,this._collectRTCStatsForDuration(l,n,i,a)]:[3,4];case 3:n=c.sent(),c.label=4;case 4:return[2,n]}})})},t.prototype._updateProgress=function(e){var n=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:n,name:e}),this.emit("progress",e)},t}(MM);Zc.PreflightTest=hT;function qM(){return{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]}}function HM(r,t){t===void 0&&(t={});var e=new hT(r,t);return e}Zc.runPreflight=HM;var Hm=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Gm=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},GM=function(){function r(t,e){var n=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:e}}),Object.defineProperty(this,"_promise",{value:new Promise(function(i,a){t(function(o){n._isCancelable=!1,i(o)},function(o){n._isCancelable=!1,a(o)},function(){return n._isCanceled})})})}return r.reject=function(t){return new r(function(n,i){i(t)},function(){})},r.resolve=function(t){return new r(function(n){n(t)},function(){})},r.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},r.prototype.catch=function(){var t=[].slice.call(arguments),e=this._promise;return new r(function(i,a){e.catch.apply(e,Gm([],Hm(t))).then(i,a)},this._onCancel)},r.prototype.then=function(){var t=[].slice.call(arguments),e=this._promise;return new r(function(i,a){e.then.apply(e,Gm([],Hm(t))).then(i,a)},this._onCancel)},r.prototype.finally=function(){var t=[].slice.call(arguments),e=this._promise;return new r(function(i,a){e.finally.apply(e,Gm([],Hm(t))).then(i,a)},this._onCancel)},r}(),W1=GM,m5=W1;function KM(r,t,e,n){var i,a=new Error("Canceled");return new m5(function(s,l,c){var u;r(function(v){return c()?m5.reject(a):(u=t(v),e(u).then(function(y){if(c())throw a;return i=y(),i}))}).then(function(v){if(c())throw v.disconnect(),a;s(n(u,v))}).catch(function(v){l(v)})},function(){i&&i.cancel()})}var QM=KM,YM=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),JM=yn.EventEmitter,XM=function(r){YM(t,r);function t(e,n){var i=r.call(this)||this;return e=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},e),Object.defineProperties(i,{maxAudioBitrate:{value:e.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:e.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:n}}),i}return t.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},t.prototype.update=function(e){var n=this;e=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},e);var i=["maxAudioBitrate","maxVideoBitrate"].reduce(function(a,o){return n[o]!==e[o]&&(n[o]=e[o],a=!0),a},!1);i&&this.emit("changed")},t}(JM),ZM=XM,df={},eD=$e.isNonArrayObject,cl=zt,vu=cl.typeErrors,tD=cl.clientTrackSwitchOffControl,rD=cl.videoContentPreferencesMode,nD=cl.subscriptionMode,pT=cl.trackPriority,iD=cl.trackSwitchOffMode;function aD(r){var t=Yu(r,"options.bandwidthProfile");return!r||t||(t=Yu(r.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(rD)},{prop:"dominantSpeakerPriority",values:Object.values(pT)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(nD)},{prop:"clientTrackSwitchOffControl",values:Object.values(tD)},{prop:"trackSwitchOffMode",values:Object.values(iD)}]),t)?t:r.video?"maxTracks"in r.video&&"clientTrackSwitchOffControl"in r.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in r.video&&"contentPreferencesMode"in r.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):sD(r.video.renderDimensions):null}function oD(r,t){if(!(r instanceof t.LocalAudioTrack||r instanceof t.LocalDataTrack||r instanceof t.LocalVideoTrack||r instanceof t.MediaStreamTrack))throw vu.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function Yu(r,t,e){return e===void 0&&(e=[]),typeof r>"u"?null:r===null||!eD(r)?vu.INVALID_TYPE(t,"object"):e.reduce(function(n,i){var a=i.prop,o=i.type,s=i.values;if(n||!(a in r))return n;var l=r[a];return o&&typeof l!==o||o==="number"&&isNaN(l)?vu.INVALID_TYPE(t+"."+a,o):Array.isArray(s)&&!s.includes(l)?vu.INVALID_VALUE(t+"."+a,s):n},null)}function sD(r){var t="options.bandwidthProfile.video.renderDimensions",e=Yu(r,t);return r?e||Object.values(pT).reduce(function(n,i){return n||Yu(r[i],t+"."+i,[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):e}df.validateBandwidthProfile=aD;df.validateLocalTrack=oD;df.validateObject=Yu;var cD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),lD=ff,vT=$e,uD=vT.buildLogLevels,fD=vT.valueToJSON,dD=zt.DEFAULT_LOG_LEVEL,hD=Da,pD=0,vD=function(r){cD(t,r);function t(e,n,i){var a=r.call(this)||this;i=Object.assign({logLevel:dD},i);var o=uD(i.logLevel);return Object.defineProperties(a,{_instanceId:{value:pD++},_log:{value:i.log?i.log.createLog("default",a):new hD("default",a,o,i.loggerName)},trackName:{enumerable:!0,value:e},trackSid:{enumerable:!0,value:n}}),a}return t.prototype.toJSON=function(){return fD(this)},t.prototype.toString=function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(lD),mT=vD,mD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gD=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},yD=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},_D=mT,gT=zt,wD=gT.typeErrors,bD=gT.trackPriority,xD=function(r){mD(t,r);function t(e,n,i,a){var o=r.call(this,n.name,e.sid,a)||this;return Object.defineProperties(o,{_reemitSignalingEvent:{value:function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return o.emit.apply(o,yD([s&&s.length?"warning":"warningsCleared"],gD(s)))}},_reemitTrackEvent:{value:function(){return o.emit(o.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:e},_unpublish:{value:i},isTrackEnabled:{enumerable:!0,get:function(){return this.track.kind==="data"?!0:this.track.isEnabled}},kind:{enumerable:!0,value:n.kind},priority:{enumerable:!0,get:function(){return e.updatedPriority}},track:{enumerable:!0,value:n}}),["disabled","enabled"].forEach(function(s){return n.on(s,o._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(s){return e.on(s,o._reemitSignalingEvent)}),o}return t.prototype.toString=function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype.setPriority=function(e){var n=Object.values(bD);if(!n.includes(e))throw wD.INVALID_VALUE("priority",n);return this._signaling.setPriority(e),this},t.prototype.unpublish=function(){var e=this;return["disabled","enabled"].forEach(function(n){return e.track.removeListener(n,e._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(n){return e._signaling.removeListener(n,e._reemitSignalingEvent)}),this._unpublish(this),this},t}(_D),q1=xD,SD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kD=q1,PD=function(r){SD(t,r);function t(e,n,i,a){return r.call(this,e,n,i,a)||this}return t.prototype.toString=function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(kD),TD=PD,ED=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),CD=q1,LD=function(r){ED(t,r);function t(e,n,i,a){return r.call(this,e,n,i,a)||this}return t.prototype.toString=function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(CD),AD=LD,OD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ND=q1,RD=function(r){OD(t,r);function t(e,n,i,a){return r.call(this,e,n,i,a)||this}return t.prototype.toString=function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(ND),jD=RD,ID=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),MD=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},DD=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},yT=zt,FD=yT.typeErrors,BD=yT.trackPriority,$D=Ds.isIOS,g5=D1;function UD(r){return function(t){ID(e,t);function e(n,i,a,o,s,l,c){var u=this;return c=Object.assign({workaroundWebKitBug212780:$D()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},c),u=t.call(this,i,c)||this,Object.defineProperties(u,{_isEnabled:{value:a,writable:!0},_isSwitchedOff:{value:o,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:s},_setRenderHint:{value:function(d){u._log.debug("updating render hint:",d),l(d)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:n},_workaroundWebKitBug212780:{value:c.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),u}return e.prototype.setPriority=function(n){var i=DD([null],MD(Object.values(BD)));if(!i.includes(n))throw FD.INVALID_VALUE("priority",i);return this._priority!==n&&(this._priority=n,this._setPriority(n)),this},e.prototype._setEnabled=function(n){this._isEnabled!==n&&(this._isEnabled=n,this.emit(this._isEnabled?"enabled":"disabled",this))},e.prototype._setSwitchedOff=function(n){this._isSwitchedOff!==n&&(this._isSwitchedOff=n,this.emit(n?"switchedOff":"switchedOn",this))},e.prototype.attach=function(n){var i=t.prototype.attach.call(this,n);return this.mediaStreamTrack.enabled!==!0&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||VD(this)),i},e.prototype.detach=function(n){var i=t.prototype.detach.call(this,n);return this._attachments.size===0&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),i},e}(r)}function VD(r){var t=r._log,e=r.kind;function n(i){i&&r._attachments.forEach(function(a){var o=r._elShims.get(a),s=a.paused&&o&&!o.pausedIntentionally();s&&(t.info("Playing inadvertently paused <"+e+"> element"),t.debug("Element:",a),t.debug("RemoteMediaTrack:",r),a.play().then(function(){t.info("Successfully played inadvertently paused <"+e+"> element"),t.debug("Element:",a),t.debug("RemoteMediaTrack:",r)}).catch(function(l){t.warn("Error while playing inadvertently paused <"+e+"> element:",{err:l,el:a,remoteMediaTrack:r})}))})}return g5.onVisibilityChange(2,n),function(){g5.offVisibilityChange(2,n)}}var _T=UD,zD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),WD=R3,qD=_T,HD=qD(WD),GD=function(r){zD(t,r);function t(e,n,i,a,o,s,l){return r.call(this,e,n,i,a,o,s,l)||this}return t.prototype.toString=function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype._start=function(){r.prototype._start.call(this),this._dummyEl&&(this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl=null)},t.prototype.setPriority=function(e){return r.prototype.setPriority.call(this,e)},t}(HD),KD=GD,QD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),YD=mT,JD=function(r){QD(t,r);function t(e,n){var i=r.call(this,e.name,e.sid,n)||this;Object.defineProperties(i,{_signaling:{value:e},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return e.isEnabled}},kind:{enumerable:!0,value:e.kind},publishPriority:{enumerable:!0,get:function(){return e.priority}},track:{enumerable:!0,get:function(){return this._track}}});var a=e.error,o=e.isEnabled,s=e.isSwitchedOff,l=e.priority;return e.on("updated",function(){if(a!==e.error){a=e.error,i.emit("subscriptionFailed",e.error);return}o!==e.isEnabled&&(o=e.isEnabled,i.track&&i.track._setEnabled(e.isEnabled),i.emit(e.isEnabled?"trackEnabled":"trackDisabled")),s!==e.isSwitchedOff&&(i._log.debug(i.trackSid+": "+(s?"OFF":"ON")+" => "+(e.isSwitchedOff?"OFF":"ON")),s=e.isSwitchedOff,i.track?(i.track._setSwitchedOff(e.isSwitchedOff),i.emit(s?"trackSwitchedOff":"trackSwitchedOn",i.track)):s&&i._log.warn("Track was not subscribed when switched Off.")),l!==e.priority&&(l=e.priority,i.emit("publishPriorityChanged",l))}),i}return t.prototype.toString=function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t.prototype._subscribed=function(e){!this._track&&e&&(this._track=e,this.emit("subscribed",e))},t.prototype._unsubscribe=function(){if(this._track){var e=this._track;this._track=null,this.emit("unsubscribed",e)}},t}(YD),H1=JD,XD=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ZD=H1,eF=function(r){XD(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.toString=function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(ZD),tF=eF,rF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),nF=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},iF=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},aF=M1,wT=zt,oF=wT.typeErrors,sF=wT.trackPriority,cF=function(r){rF(t,r);function t(e,n,i){var a=r.call(this,n.id,"data",i)||this;return Object.defineProperties(a,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:n.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:n.maxRetransmits},ordered:{enumerable:!0,value:n.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:n.maxPacketLifeTime===null&&n.maxRetransmits===null},sid:{enumerable:!0,value:e}}),n.on("message",function(o){a.emit("message",o,a)}),a}return t.prototype.setPriority=function(e){var n=iF([null],nF(Object.values(sF)));if(!n.includes(e))throw oF.INVALID_VALUE("priority",n);return this._priority=e,this},t.prototype._setEnabled=function(){},t.prototype._setSwitchedOff=function(e){this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit(e?"switchedOff":"switchedOn",this))},t}(aF),lF=cF,uF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),fF=H1,dF=function(r){uF(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.toString=function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(fF),hF=dF,bT=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),G1=function(){function r(t){Object.defineProperties(this,{_callback:{value:t}})}return r.prototype.observe=function(){},r.prototype.unobserve=function(){},r.prototype.makeVisible=function(t){var e=this._makeFakeEntry(t,!0);this._callback([e])},r.prototype.makeInvisible=function(t){var e=this._makeFakeEntry(t,!1);this._callback([e])},r.prototype._makeFakeEntry=function(t,e){return{target:t,isIntersecting:e}},r}();(function(r){bT(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(G1);(function(r){bT(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.resize=function(e){var n=this._makeFakeEntry(e,!0);this._callback([n])},t})(G1);var pF={NullObserver:G1},vF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mF=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},gF=_T,xT=W3,y5=D1,_5=pF.NullObserver,yF=Fs,_F=gF(xT),wF=50,bF=function(r){vF(t,r);function t(e,n,i,a,o,s,l){var c=this;return l=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},l),l=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||l.clientTrackSwitchOffControl!=="auto"?_5:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||l.contentPreferencesMode!=="auto"?_5:ResizeObserver},l),c=r.call(this,e,n,i,a,o,s,l)||this,Object.defineProperties(c,{_enableDocumentVisibilityTurnOff:{value:l.enableDocumentVisibilityTurnOff===!0&&l.clientTrackSwitchOffControl==="auto"},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:l.clientTrackSwitchOffControl},_contentPreferencesMode:{value:l.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new yF(function(){c._setRenderHint({enabled:!1})},wF,!1)},_resizeObserver:{value:new l.ResizeObserver(function(u){var d=u.find(function(v){return!c._invisibleElements.has(v.target)});d&&Ld(c)})},_intersectionObserver:{value:new l.IntersectionObserver(function(u){var d=!1;u.forEach(function(v){var p=!c._invisibleElements.has(v.target);p!==v.isIntersecting&&(v.isIntersecting?(c._log.debug("intersectionObserver detected: Off => On"),c._invisibleElements.delete(v.target)):(c._log.debug("intersectionObserver detected: On => Off"),c._invisibleElements.add(v.target)),d=!0)}),d&&(pc(c),Ld(c))},{threshold:.25})}}),c}return t.prototype._start=function(e){var n=r.prototype._start.call(this,e);return pc(this),n},t.prototype.switchOn=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},t.prototype.switchOff=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},t.prototype.setContentPreferences=function(e){if(this._contentPreferencesMode!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return e.renderDimensions&&this._setRenderHint({renderDimensions:e.renderDimensions}),this},t.prototype._unObservePip=function(e){var n=this._elToPipCallbacks.get(e);n&&(e.removeEventListener("enterpictureinpicture",n.onEnterPip),e.removeEventListener("leavepictureinpicture",n.onLeavePip),this._elToPipCallbacks.delete(e))},t.prototype._observePip=function(e){var n=this,i=this._elToPipCallbacks.get(e);if(!i){var a=function(l){return n._onEnterPip(l,e)},o=function(l){return n._onLeavePip(l,e)},s=function(l){return n._onResizePip(l,e)};e.addEventListener("enterpictureinpicture",a),e.addEventListener("leavepictureinpicture",o),this._elToPipCallbacks.set(e,{onEnterPip:a,onLeavePip:o,onResizePip:s})}},t.prototype._onEnterPip=function(e,n){this._log.debug("onEnterPip");var i=e.pictureInPictureWindow;this._elToPipWindows.set(n,i);var a=this._elToPipCallbacks.get(n).onResizePip;i.addEventListener("resize",a),pc(this)},t.prototype._onLeavePip=function(e,n){this._log.debug("onLeavePip"),this._elToPipWindows.delete(n);var i=this._elToPipCallbacks.get(n).onResizePip,a=e.pictureInPictureWindow;a.removeEventListener("resize",i),pc(this)},t.prototype._onResizePip=function(){Ld(this)},t.prototype.attach=function(e){var n=r.prototype.attach.call(this,e);return this._clientTrackSwitchOffControl==="auto"&&this._invisibleElements.add(n),this._intersectionObserver.observe(n),this._resizeObserver.observe(n),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||SF(this)),this._observePip(n),n},t.prototype.detach=function(e){var n=this,i=r.prototype.detach.call(this,e),a=Array.isArray(i)?i:[i];return a.forEach(function(o){n._intersectionObserver.unobserve(o),n._resizeObserver.unobserve(o),n._invisibleElements.delete(o),n._unObservePip(o)}),this._attachments.size===0&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),pc(this),Ld(this),i},t.prototype.addProcessor=function(){return r.prototype.addProcessor.apply(this,arguments)},t.prototype.removeProcessor=function(){return r.prototype.removeProcessor.apply(this,arguments)},t.prototype.toString=function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"},t.prototype.setPriority=function(e){return r.prototype.setPriority.call(this,e)},t}(_F);function xF(r){if(!("documentPictureInPicture"in globalThis))return!1;var t=globalThis.documentPictureInPicture.window;if(!t)return!1;var e=new WeakSet(t.document.querySelectorAll("video"));return r._getAllAttachedElements().some(function(n){return e.has(n)})}function pc(r){if(r._clientTrackSwitchOffControl==="auto"){var t=r._getAllAttachedElements().filter(function(i){return!r._invisibleElements.has(i)}),e=r._getAllAttachedElements().filter(function(i){return r._elToPipWindows.has(i)}),n=e.length>0||xF(r)||document.visibilityState==="visible"&&t.length>0;n===!0?(r._turnOffTimer.clear(),r._setRenderHint({enabled:!0}),xT._ensureDocumentPipVideosPlaying(r)):r._turnOffTimer.isSet||r._turnOffTimer.start()}}function Ld(r){if(r._contentPreferencesMode==="auto"){var t=r._getAllAttachedElements().filter(function(c){return!r._invisibleElements.has(c)}),e=r._getAllAttachedElements().map(function(c){var u=r._elToPipWindows.get(c);return u?{clientHeight:u.height,clientWidth:u.width}:{clientHeight:0,clientWidth:0}}),n=t.concat(e);if(n.length>0){var i=mF(n.sort(function(c,u){return u.clientHeight+u.clientWidth-c.clientHeight-c.clientWidth-1}),1),a=i[0],o=a.clientHeight,s=a.clientWidth,l={height:o,width:s};r._setRenderHint({renderDimensions:l})}}}function SF(r){function t(){pc(r)}return y5.onVisibilityChange(1,t),function(){y5.offVisibilityChange(1,t)}}var kF=bF,PF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),TF=H1,EF=function(r){PF(t,r);function t(e,n){return r.call(this,e,n)||this}return t.prototype.toString=function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"},t}(TF),CF=EF,LF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ju=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},ey=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},AF=ff,OF=KD,NF=tF,RF=lF,jF=hF,IF=kF,MF=CF,wa=$e,DF=0,FF=function(r){LF(t,r);function t(e,n){var i=r.call(this)||this;n=Object.assign({RemoteAudioTrack:OF,RemoteAudioTrackPublication:NF,RemoteDataTrack:RF,RemoteDataTrackPublication:jF,RemoteVideoTrack:IF,RemoteVideoTrackPublication:MF,tracks:[]},n);var a=BF(n.tracks),o=n.log.createLog("default",i),s=new Map(a.audioTracks),l=new Map(a.dataTracks),c=new Map(a.tracks),u=new Map(a.videoTracks);return Object.defineProperties(i,{_RemoteAudioTrack:{value:n.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:n.RemoteAudioTrackPublication},_RemoteDataTrack:{value:n.RemoteDataTrack},_RemoteDataTrackPublication:{value:n.RemoteDataTrackPublication},_RemoteVideoTrack:{value:n.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:n.RemoteVideoTrackPublication},_audioTracks:{value:s},_dataTracks:{value:l},_instanceId:{value:++DF},_clientTrackSwitchOffControl:{value:n.clientTrackSwitchOffControl},_contentPreferencesMode:{value:n.contentPreferencesMode},_log:{value:o},_signaling:{value:e},_tracks:{value:c},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:u},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return e.identity}},networkQualityLevel:{enumerable:!0,get:function(){return e.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return e.networkQualityStats}},sid:{enumerable:!0,get:function(){return e.sid}},state:{enumerable:!0,get:function(){return e.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement}}),i._tracks.forEach(w5.bind(null,i)),e.on("networkQualityLevelChanged",function(){return i.emit("networkQualityLevelChanged",i.networkQualityLevel,i.networkQualityStats&&(i.networkQualityStats.audio||i.networkQualityStats.video)?i.networkQualityStats:null)}),$F(i,e),o.info("Created a new Participant"+(i.identity?": "+i.identity:"")),i}return t.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},t.prototype._getTrackPublicationEvents=function(){return[]},t.prototype.toString=function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"},t.prototype._addTrack=function(e,n){var i=this._log;if(this._tracks.has(n))return null;this._tracks.set(n,e);var a={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind];return a.set(n,e),w5(this,e,n),i.info("Added a new "+wa.trackClass(e)+":",n),i.debug(wa.trackClass(e)+":",e),e},t.prototype._addTrackPublication=function(e){var n=this._log;if(this.tracks.has(e.trackSid))return null;this.tracks.set(e.trackSid,e);var i={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind];return i.set(e.trackSid,e),UF(this,e),n.info("Added a new "+wa.trackPublicationClass(e)+":",e.trackSid),n.debug(wa.trackPublicationClass(e)+":",e),e},t.prototype._handleTrackSignalingEvents=function(){var e=this,n=e._log,i=e._clientTrackSwitchOffControl,a=e._contentPreferencesMode,o=e._MediaStream,s=e._mapMediaElement,l=e._disposeMediaElement,c=this;if(this.state==="disconnected")return;var u=this._RemoteAudioTrack,d=this._RemoteAudioTrackPublication,v=this._RemoteVideoTrack,p=this._RemoteVideoTrackPublication,y=this._RemoteDataTrack,b=this._RemoteDataTrackPublication,S=this._signaling;function _(R){var B={audio:d,data:b,video:p}[R.kind],j=new B(R,{log:n});c._addTrackPublication(j);var F=R.isSubscribed;F&&k(R),c._trackSignalingUpdatedEventCallbacks.set(R.sid,function(){if(F!==R.isSubscribed){if(F=R.isSubscribed,F){k(R);return}T(R)}}),R.on("updated",c._trackSignalingUpdatedEventCallbacks.get(R.sid))}function x(R){R.isSubscribed&&R.setTrackTransceiver(null);var B=c._trackSignalingUpdatedEventCallbacks.get(R.sid);B&&(R.removeListener("updated",B),c._trackSignalingUpdatedEventCallbacks.delete(R.sid));var j=c.tracks.get(R.sid);j&&c._removeTrackPublication(j)}function k(R){var B=R.isEnabled,j=R.name,F=R.kind,M=R.sid,q=R.trackTransceiver,O=R.isSwitchedOff,L={audio:u,video:v,data:y}[F],z=c.tracks.get(M);if(!(!L||F!==q.kind)){var I={log:n,name:j,clientTrackSwitchOffControl:i,contentPreferencesMode:a,mapMediaElement:s,disposeMediaElement:l};o&&(I.MediaStream=o);var X=function(H){return S.updateSubscriberTrackPriority(M,H)},Z=function(H){R.isSubscribed&&S.updateTrackRenderHint(M,H)},oe=F==="data"?new L(M,q,I):new L(M,q,B,O,X,Z,I);c._addTrack(oe,z,q.id)}}function T(R){var B=Ju(Array.from(c._tracks.entries()).find(function(q){var O=Ju(q,2),L=O[1];return L.sid===R.sid}),2),j=B[0],F=B[1],M=c.tracks.get(R.sid);F&&c._removeTrack(F,M,j)}S.on("trackAdded",_),S.on("trackRemoved",x),S.tracks.forEach(_),S.on("stateChanged",function R(B){B==="disconnected"?(n.debug("Removing event listeners"),S.removeListener("stateChanged",R),S.removeListener("trackAdded",_),S.removeListener("trackRemoved",x)):B==="connected"&&(n.info("reconnected"),setTimeout(function(){return c.emit("reconnected")},0))})},t.prototype._removeTrack=function(e,n){if(!this._tracks.has(n))return null;this._tracks.delete(n);var i={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind];i.delete(n);var a=this._trackEventReemitters.get(n)||new Map;a.forEach(function(s,l){e.removeListener(l,s)});var o=this._log;return o.info("Removed a "+wa.trackClass(e)+":",n),o.debug(wa.trackClass(e)+":",e),e},t.prototype._removeTrackPublication=function(e){if(e=this.tracks.get(e.trackSid),!e)return null;this.tracks.delete(e.trackSid);var n={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind];n.delete(e.trackSid);var i=this._trackPublicationEventReemitters.get(e.trackSid)||new Map;i.forEach(function(o,s){e.removeListener(s,o)});var a=this._log;return a.info("Removed a "+wa.trackPublicationClass(e)+":",e.trackSid),a.debug(wa.trackPublicationClass(e)+":",e),e},t.prototype.toJSON=function(){return wa.valueToJSON(this)},t}(AF);function BF(r){var t=r.map(function(a){return[a.id,a]}),e=t.filter(function(a){return a[1].kind==="audio"}),n=t.filter(function(a){return a[1].kind==="video"}),i=t.filter(function(a){return a[1].kind==="data"});return{audioTracks:e,dataTracks:i,tracks:t,videoTracks:n}}function $F(r,t){var e=r._log;r.state!=="disconnected"&&t.on("stateChanged",function n(i){e.debug("Transitioned to state:",i),r.emit(i,r),i==="disconnected"&&(e.debug("Removing Track event reemitters"),t.removeListener("stateChanged",n),r._tracks.forEach(function(a){var o=r._trackEventReemitters.get(a.id);a&&o&&o.forEach(function(s,l){a.removeListener(l,s)})}),t.tracks.forEach(function(a){var o=r._tracks.get(a.id),s=r._trackEventReemitters.get(a.id);o&&s&&s.forEach(function(l,c){o.removeListener(c,l)})}),r._trackEventReemitters.clear(),r.tracks.forEach(function(a){r._trackPublicationEventReemitters.get(a.trackSid).forEach(function(o,s){a.removeListener(s,o)})}),r._trackPublicationEventReemitters.clear())})}function w5(r,t,e){var n=new Map;r.state!=="disconnected"&&(r._getTrackEvents().forEach(function(i){var a=i[0],o=i[1];n.set(a,function(){var s=[o].concat([].slice.call(arguments));return r.emit.apply(r,ey([],Ju(s)))}),t.on(a,n.get(a))}),r._trackEventReemitters.set(e,n))}function UF(r,t){var e=new Map;r.state!=="disconnected"&&(r._getTrackPublicationEvents().forEach(function(n){var i=Ju(n,2),a=i[0],o=i[1];e.set(a,function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];r.emit.apply(r,ey(ey([o],Ju(s)),[t]))}),t.on(a,e.get(a))}),r._trackPublicationEventReemitters.set(t.trackSid,e))}var ST=FF,VF=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zF=Ms.MediaStreamTrack,K1=$e,WF=K1.asLocalTrack,qF=K1.asLocalTrackPublication,ss=K1.trackClass,kT=zt,ao=kT.typeErrors,Km=kT.trackPriority,HF=df.validateLocalTrack,Q1=Bc,GF=Q1.LocalAudioTrack,KF=Q1.LocalDataTrack,QF=Q1.LocalVideoTrack,YF=TD,JF=AD,XF=jD,ZF=ST,eB=function(r){VF(t,r);function t(e,n,i){var a=this;i=Object.assign({LocalAudioTrack:GF,LocalVideoTrack:QF,LocalDataTrack:KF,MediaStreamTrack:zF,LocalAudioTrackPublication:YF,LocalVideoTrackPublication:XF,LocalDataTrackPublication:JF,shouldStopLocalTracks:!1,tracks:n},i);var o=i.shouldStopLocalTracks?new Set(n.filter(function(s){return s.kind!=="data"})):new Set;return a=r.call(this,e,i)||this,Object.defineProperties(a,{_eventObserver:{value:i.eventObserver},_LocalAudioTrack:{value:i.LocalAudioTrack},_LocalDataTrack:{value:i.LocalDataTrack},_LocalVideoTrack:{value:i.LocalVideoTrack},_MediaStreamTrack:{value:i.MediaStreamTrack},_LocalAudioTrackPublication:{value:i.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:i.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:i.LocalVideoTrackPublication},_tracksToStop:{value:o},signalingRegion:{enumerable:!0,get:function(){return e.signalingRegion}}}),a._handleTrackSignalingEvents(),a}return t.prototype._addTrack=function(e,n,i){var a=r.prototype._addTrack.call(this,e,n);return a&&this.state!=="disconnected"&&this._addLocalTrack(e,i),a},t.prototype._addLocalTrack=function(e,n){var i,a=(i=e.noiseCancellation)===null||i===void 0?void 0:i.vendor;this._signaling.addTrack(e._trackSender,e.name,n,a),this._log.info("Added a new "+ss(e,!0)+":",e.id),this._log.debug(ss(e,!0)+":",e)},t.prototype._removeTrack=function(e,n){var i=r.prototype._removeTrack.call(this,e,n);return i&&this.state!=="disconnected"&&(this._signaling.removeTrack(e._trackSender),this._log.info("Removed a "+ss(e,!0)+":",e.id),this._log.debug(ss(e,!0)+":",e)),i},t.prototype._getTrackEvents=function(){return r.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},t.prototype.toString=function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._handleTrackSignalingEvents=function(){var e=this,n=this._log;if(this.state!=="disconnected"){var i=function(l){var c=e._signaling.getPublication(l._trackSender);c&&(c.disable(),n.debug("Disabled the "+ss(l,!0)+":",l.id))},a=function(l){var c=e._signaling.getPublication(l._trackSender);c&&(c.enable(),n.debug("Enabled the "+ss(l,!0)+":",l.id))},o=function(l){var c=e._signaling.getPublication(l._trackSender);return c&&c.stop(),c},s=function(l){n.debug("Transitioned to state:",l),l==="disconnected"?(n.debug("Removing LocalTrack event listeners"),e._signaling.removeListener("stateChanged",s),e.removeListener("trackDisabled",i),e.removeListener("trackEnabled",a),e.removeListener("trackStopped",o),e._tracks.forEach(function(c){var u=o(c);u&&c._trackSender.removeClone(u._trackTransceiver)}),n.info("LocalParticipant disconnected. Stopping "+e._tracksToStop.size+" automatically-acquired LocalTracks"),e._tracksToStop.forEach(function(c){c.stop()})):l==="connected"&&(n.info("reconnected"),setTimeout(function(){return e.emit("reconnected")},0))};this.on("trackDisabled",i),this.on("trackEnabled",a),this.on("trackStopped",o),this._signaling.on("stateChanged",s),this._tracks.forEach(function(l){e._addLocalTrack(l,Km.PRIORITY_STANDARD),e._getOrCreateLocalTrackPublication(l).catch(function(c){n.warn("Failed to get or create LocalTrackPublication for "+l+":",c)})})}},t.prototype._getOrCreateLocalTrackPublication=function(e){var n=Ad(this.tracks,e);if(n)return Promise.resolve(n);var i=this._log,a=this,o=this._signaling.getPublication(e._trackSender);return o?new Promise(function(s,l){function c(){var u=o.error;if(u){o.removeListener("updated",c),i.warn("Failed to publish the "+ss(e,!0)+": "+u.message),a._removeTrack(e,e.id),setTimeout(function(){a.emit("trackPublicationFailed",u,e)}),l(u);return}if(!a._tracks.has(e.id)){o.removeListener("updated",c),l(new Error("The "+e+" was unpublished"));return}var d=o.sid;if(d){o.removeListener("updated",c);var v={log:i,LocalAudioTrackPublication:a._LocalAudioTrackPublication,LocalDataTrackPublication:a._LocalDataTrackPublication,LocalVideoTrackPublication:a._LocalVideoTrackPublication};n=Ad(a.tracks,e);var p=function(_){return a.emit("trackWarning",_,n)},y=function(){return a.emit("trackWarningsCleared",n)},b=function(_){n.removeListener("trackWarning",p),n.removeListener("trackWarningsCleared",y),a.unpublishTrack(_.track)};n||(n=qF(e,o,b,v),a._addTrackPublication(n)),n.on("warning",p),n.on("warningsCleared",y);var S=a._signaling.state;(S==="connected"||S==="connecting")&&(e._processorEventObserver&&e._processorEventObserver.on("event",function(_){a._eventObserver.emit("event",{name:_.name,payload:_.data,group:"video-processor",level:"info"})}),e.processedTrack&&(e._captureFrames(),e._setSenderMediaStreamTrack(!0))),S==="connected"&&setTimeout(function(){a.emit("trackPublished",n)}),s(n)}}o.on("updated",c)}):Promise.reject(new Error("Unexpected error: The "+e+" cannot be published"))},t.prototype.publishTrack=function(e,n){var i=Ad(this.tracks,e);if(i)return Promise.resolve(i);n=Object.assign({log:this._log,priority:Km.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},n);var a;try{a=WF(e,n)}catch(u){return Promise.reject(u)}var o=a.noiseCancellation,s=this._signaling.audioProcessors;o&&!s.includes(o.vendor)&&(this._log.warn(o.vendor+" is not supported in this room. disabling it permanently"),o.disablePermanently());var l=Object.values(Km);if(!l.includes(n.priority))return Promise.reject(ao.INVALID_VALUE("LocalTrackPublishOptions.priority",l));var c=this._addTrack(a,a.id,n.priority)||this._tracks.get(a.id);return this._getOrCreateLocalTrackPublication(c)},t.prototype.publishTracks=function(e){if(!Array.isArray(e))throw ao.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(e.map(this.publishTrack,this))},t.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},t.prototype.setNetworkQualityConfiguration=function(e){if(typeof e!="object"||e===null)throw ao.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(n){if(n in e&&(typeof e[n]!="number"||isNaN(e[n])))throw ao.INVALID_TYPE("networkQualityConfiguration."+n,"number")}),this._signaling.setNetworkQualityConfiguration(e),this},t.prototype.setParameters=function(e){if(typeof e<"u"&&typeof e!="object")throw ao.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(e){if(this._signaling.getParameters().adaptiveSimulcast&&e.maxVideoBitrate)throw ao.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(n){if(typeof e[n]<"u"&&typeof e[n]!="number"&&e[n]!==null)throw ao.INVALID_TYPE("encodingParameters."+n,"number, null or undefined")})}else e===null&&(e={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(e),this},t.prototype.unpublishTrack=function(e){HF(e,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var n=this._tracks.get(e.id);if(!n)return null;var i=this._signaling.getPublication(n._trackSender);if(i.publishFailed(new Error("The "+n+" was unpublished")),n=this._removeTrack(n,n.id),!n)return null;var a=Ad(this.tracks,n);return a&&this._removeTrackPublication(a),a},t.prototype.unpublishTracks=function(e){var n=this;if(!Array.isArray(e))throw ao.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return e.reduce(function(i,a){var o=n.unpublishTrack(a);return o?i.concat(o):i},[])},t}(ZF);function Ad(r,t){return Array.from(r.values()).find(function(e){return e.track===t||e.track.mediaStreamTrack===t})||null}var tB=eB,rB=function(){function r(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return r.prototype.connect=function(){},r.prototype.disconnect=function(){return this._connected?(this._connected=!1,!0):!1},r.prototype.publish=function(){return this._connected},r}(),nB=rB,iB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),aB=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},oB=yn.EventEmitter,Y1=zt,Od=Y1.DEFAULT_NQ_LEVEL_LOCAL,Nd=Y1.DEFAULT_NQ_LEVEL_REMOTE,b5=Y1.MAX_NQ_LEVEL,Qm=$e.inRange,sB=function(r){iB(t,r);function t(e){var n=r.call(this)||this;return e=Object.assign({local:Od,remote:Nd},e),Object.defineProperties(n,{local:{value:Qm(e.local,Od,b5)?e.local:Od,writable:!0},remote:{value:Qm(e.remote,Nd,b5)?e.remote:Nd,writable:!0}}),n}return t.prototype.update=function(e){var n=this;e=Object.assign({local:this.local,remote:this.remote},e),[["local",Od,3],["remote",Nd,3]].forEach(function(i){var a=aB(i,3),o=a[0],s=a[1],l=a[2];n[o]=typeof e[o]=="number"&&Qm(e[o],s,l)?e[o]:s})},t}(oB),cB=sB,lB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),uB=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},x5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},fB=ST,dB=function(r){lB(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i._handleTrackSignalingEvents(),i.once("disconnected",i._unsubscribeTracks.bind(i)),i}return t.prototype.toString=function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"},t.prototype._addTrack=function(e,n,i){return r.prototype._addTrack.call(this,e,i)?(n._subscribed(e),this.emit("trackSubscribed",e,n),e):null},t.prototype._addTrackPublication=function(e){var n=r.prototype._addTrackPublication.call(this,e);return n?(this.emit("trackPublished",n),n):null},t.prototype._getTrackPublicationEvents=function(){return x5(x5([],uB(r.prototype._getTrackPublicationEvents.call(this))),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])},t.prototype._unsubscribeTracks=function(){var e=this;this.tracks.forEach(function(n){if(n.isSubscribed){var i=n.track;n._unsubscribe(),e.emit("trackUnsubscribed",i,n)}})},t.prototype._removeTrack=function(e,n,i){var a=this._tracks.get(i);return a?(r.prototype._removeTrack.call(this,a,i),n._unsubscribe(),this.emit("trackUnsubscribed",a,n),a):null},t.prototype._removeTrackPublication=function(e){this._signaling.clearTrackHint(e.trackSid);var n=r.prototype._removeTrackPublication.call(this,e);return n?(this.emit("trackUnpublished",n),n):null},t}(fB),hB=dB,pB=function(){function r(t,e){if(typeof t!="string")throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:t,enumerable:!0},trackSid:{value:e.trackSid,enumerable:!0},timestamp:{value:e.timestamp,enumerable:!0},ssrc:{value:e.ssrc,enumerable:!0},packetsLost:{value:typeof e.packetsLost=="number"?e.packetsLost:null,enumerable:!0},codec:{value:typeof e.codecName=="string"?e.codecName:null,enumerable:!0}})}return r}(),PT=pB,vB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),mB=PT,gB=function(r){vB(t,r);function t(e,n,i){var a=r.call(this,e,n)||this;return Object.defineProperties(a,{bytesSent:{value:typeof n.bytesSent=="number"?n.bytesSent:i?0:null,enumerable:!0},packetsSent:{value:typeof n.packetsSent=="number"?n.packetsSent:i?0:null,enumerable:!0},roundTripTime:{value:typeof n.roundTripTime=="number"?n.roundTripTime:i?0:null,enumerable:!0}}),a}return t}(mB),TT=gB,yB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_B=TT,wB=function(r){yB(t,r);function t(e,n,i){var a=r.call(this,e,n,i)||this;return Object.defineProperties(a,{audioLevel:{value:typeof n.audioInputLevel=="number"?n.audioInputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),a}return t}(_B),bB=wB,xB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),SB=TT,kB=function(r){xB(t,r);function t(e,n,i){var a=r.call(this,e,n,i)||this,o=null;typeof n.frameWidthInput=="number"&&typeof n.frameHeightInput=="number"&&(o={},Object.defineProperties(o,{width:{value:n.frameWidthInput,enumerable:!0},height:{value:n.frameHeightInput,enumerable:!0}}));var s=null;return typeof n.frameWidthSent=="number"&&typeof n.frameHeightSent=="number"&&(s={},Object.defineProperties(s,{width:{value:n.frameWidthSent,enumerable:!0},height:{value:n.frameHeightSent,enumerable:!0}})),Object.defineProperties(a,{captureDimensions:{value:o,enumerable:!0},dimensions:{value:s,enumerable:!0},captureFrameRate:{value:typeof n.frameRateInput=="number"?n.frameRateInput:null,enumerable:!0},frameRate:{value:typeof n.frameRateSent=="number"?n.frameRateSent:null,enumerable:!0}}),a}return t}(SB),PB=kB,TB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EB=PT,CB=function(r){TB(t,r);function t(e,n){var i=r.call(this,e,n)||this;return Object.defineProperties(i,{bytesReceived:{value:typeof n.bytesReceived=="number"?n.bytesReceived:null,enumerable:!0},packetsReceived:{value:typeof n.packetsReceived=="number"?n.packetsReceived:null,enumerable:!0}}),i}return t}(EB),ET=CB,LB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),AB=ET,OB=function(r){LB(t,r);function t(e,n){var i=r.call(this,e,n)||this;return Object.defineProperties(i,{audioLevel:{value:typeof n.audioOutputLevel=="number"?n.audioOutputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),i}return t}(AB),NB=OB,RB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jB=ET,IB=function(r){RB(t,r);function t(e,n){var i=r.call(this,e,n)||this,a=null;return typeof n.frameWidthReceived=="number"&&typeof n.frameHeightReceived=="number"&&(a={},Object.defineProperties(a,{width:{value:n.frameWidthReceived,enumerable:!0},height:{value:n.frameHeightReceived,enumerable:!0}})),Object.defineProperties(i,{dimensions:{value:a,enumerable:!0},frameRate:{value:typeof n.frameRateReceived=="number"?n.frameRateReceived:null,enumerable:!0}}),i}return t}(jB),MB=IB,DB=bB,FB=PB,BB=NB,$B=MB,UB=function(){function r(t,e,n){if(typeof t!="string")throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:t,enumerable:!0},localAudioTrackStats:{value:e.localAudioTrackStats.map(function(i){return new DB(i.trackId,i,n)}),enumerable:!0},localVideoTrackStats:{value:e.localVideoTrackStats.map(function(i){return new FB(i.trackId,i,n)}),enumerable:!0},remoteAudioTrackStats:{value:e.remoteAudioTrackStats.map(function(i){return new BB(i.trackId,i)}),enumerable:!0},remoteVideoTrackStats:{value:e.remoteVideoTrackStats.map(function(i){return new $B(i.trackId,i)}),enumerable:!0}})}return r}(),CT=UB,VB=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Xu=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},yh=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},zB=ff,WB=hB,qB=CT,LT=$e,HB=LT.flatMap,GB=LT.valueToJSON,KB=0,QB=function(r){VB(t,r);function t(e,n,i){var a=r.call(this)||this,o=i.log.createLog("default",a),s=new Map;return Object.defineProperties(a,{_log:{value:o},_clientTrackSwitchOffControl:{value:i.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:i.contentPreferencesMode||"disabled"},_instanceId:{value:++KB},_options:{value:i},_participants:{value:s},_signaling:{value:n},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(n.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return n.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:n.name},participants:{enumerable:!0,value:s},sid:{enumerable:!0,value:n.sid},state:{enumerable:!0,get:function(){return n.state}},mediaRegion:{enumerable:!0,value:n.mediaRegion}}),JB(a,e),XB(a,n.recording),ZB(a,n),YB(a),o.info("Created a new Room:",a.name),o.debug("Initial RemoteParticipants:",Array.from(a._participants.values())),a}return t.prototype.toString=function(){return"[Room #"+this._instanceId+": "+this.sid+"]"},t.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},t.prototype.getStats=function(){var e=this;return this._signaling.getStats().then(function(n){return Array.from(n).map(function(i){var a=Xu(i,2),o=a[0],s=a[1];return new qB(o,Object.assign({},s,{localAudioTrackStats:S5(e,s.localAudioTrackStats),localVideoTrackStats:S5(e,s.localVideoTrackStats)}))})})},t.prototype.refreshInactiveMedia=function(){var e=this.localParticipant.tracks,n=Array.from(e.values()).filter(function(l){var c=l.track.kind;return c!=="data"}).map(function(l){var c=l.track;return c}),i=HB(this.participants,function(l){return Array.from(l.tracks.values())}).filter(function(l){var c=l.track;return c&&c.kind!=="data"}).map(function(l){var c=l.track;return c}),a=n.concat(i),o=new Event("unmute");n.forEach(function(l){var c=l.isMuted,u=l.mediaStreamTrack;c&&u.dispatchEvent(o)});var s=new Event("pause");return a.forEach(function(l){var c=l._attachments,u=l._elShims;return c.forEach(function(d){var v=u.get(d),p=d.paused&&v&&!v.pausedIntentionally();p&&d.dispatchEvent(s)})}),this},t.prototype.toJSON=function(){return GB(this)},t}(zB);function YB(r){var t=r.localParticipant._signaling.audioProcessors;r.localParticipant.audioTracks.forEach(function(e){var n=e.track,i=n.noiseCancellation;i&&!t.includes(i.vendor)&&(r._log.warn(i.vendor+" is not supported in this room. disabling it permanently"),i.disablePermanently())})}function S5(r,t){var e=r.localParticipant._signaling;return t.reduce(function(n,i){var a=e.tracks.get(i.trackId),o=e.getSender(a);return o?[Object.assign({},i,{trackId:o.id})].concat(n):n},[])}function k5(r,t){var e=r._log,n=r._clientTrackSwitchOffControl,i=r._contentPreferencesMode,a=r._options,o=a.MediaStream,s=a.mapMediaElement,l=a.disposeMediaElement,c=new WB(t,{log:e,clientTrackSwitchOffControl:n,contentPreferencesMode:i,MediaStream:o,mapMediaElement:s,disposeMediaElement:l});e.info("A new RemoteParticipant connected:",c),r._participants.set(c.sid,c),r.emit("participantConnected",c);var u=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(d){var v=Xu(Array.isArray(d)?d:[d,d],2),p=v[0],y=v[1];function b(){var S=[].slice.call(arguments);S.unshift(y),S.push(c),r.emit.apply(r,yh([],Xu(S)))}return c.on(p,b),[p,b]});c.once("disconnected",function(){var v=r.dominantSpeaker;e.info("RemoteParticipant disconnected:",c),r._participants.delete(c.sid),u.forEach(function(p){c.removeListener(p[0],p[1])}),r.emit("participantDisconnected",c),c===v&&r.emit("dominantSpeakerChanged",r.dominantSpeaker)})}function JB(r,t){var e=["trackWarning","trackWarningsCleared"].map(function(n){return{eventName:n,handler:function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.emit.apply(r,yh([n],Xu(yh(yh([],Xu(i)),[t]))))}}});e.forEach(function(n){var i=n.eventName,a=n.handler;return t.on(i,a)}),r.once("disconnected",function(){return e.forEach(function(n){var i=n.eventName,a=n.handler;return t.removeListener(i,a)})})}function XB(r,t){t.on("updated",function(){var n=t.isEnabled;r._log.info("Recording "+(n?"started":"stopped")),r.emit("recording"+(n?"Started":"Stopped"))})}function ZB(r,t){var e=r._log;e.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),t.participants.forEach(k5.bind(null,r)),e.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),t.on("participantConnected",k5.bind(null,r)),t.on("dominantSpeakerChanged",function(){return r.emit("dominantSpeakerChanged",r.dominantSpeaker)}),t.on("transcription",function(n){return r.emit("transcription",n)}),t.on("stateChanged",function n(i,a){switch(e.info("Transitioned to state:",i),i){case"disconnected":r.participants.forEach(function(o){o._unsubscribeTracks()}),r.emit(i,r,a),r.localParticipant.tracks.forEach(function(o){o.unpublish()}),t.removeListener("stateChanged",n);break;case"reconnecting":setTimeout(function(){return r.emit("reconnecting",a)},0);break;default:setTimeout(function(){return r.emit("reconnected")},0)}})}var e9=QB,t9=function(){function r(t){Object.defineProperties(this,{_min:{value:t.min||100},_max:{value:t.max||1e4},_jitter:{value:t.jitter>0&&t.jitter<=1?t.jitter:0},_factor:{value:t.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var e=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var n=Math.random(),i=Math.floor(n*this._jitter*e);e=Math.floor(n*10)&1?e+i:e-i}return Math.min(e,this._max)|0}},_timeoutID:{value:null,writable:!0}})}return r.prototype.backoff=function(t){var e=this,n=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){e._attempts++,t()},n)},r.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},r}(),AT=t9,_n={},r9=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},OT=$e,Ym=OT.difference,Aa=OT.flatMap;function Jm(){var r=4294967295;return String(Math.floor(Math.random()*r))}var n9=function(){function r(t,e,n){Object.defineProperties(this,{cName:{enumerable:!0,value:n},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:e},trackId:{enumerable:!0,value:t}})}return r.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var t=[Jm(),Jm()];t.forEach(function(e){this.primarySSRCs.add(e)},this),this.rtxPairs.size&&t.forEach(function(e){this.rtxPairs.set(Jm(),e)},this)}},r.prototype.addSSRC=function(t,e,n){e?this.rtxPairs.set(t,e):this.primarySSRCs.add(t),this.isSimulcastEnabled=this.isSimulcastEnabled||n},r.prototype.toSdpLines=function(t){var e=this,n=t?[]:Array.from(this.rtxPairs.entries()).map(function(c){return c.reverse()}),i=Array.from(this.primarySSRCs.values()),a=n.length?Aa(n):i,o=Aa(a,function(c){return["a=ssrc:"+c+" cname:"+e.cName,"a=ssrc:"+c+" msid:"+e.streamId+" "+e.trackId]}),s=n.map(function(c){return"a=ssrc-group:FID "+c.join(" ")}),l=["a=ssrc-group:SIM "+i.join(" ")];return s.concat(o).concat(l)},r}();function ip(r,t){var e=r.match(new RegExp(t,"gm"))||[];return e.map(function(n){var i=n.match(new RegExp(t))||[];return i.slice(1)})}function i9(r){var t="^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$";return new Set(Aa(ip(r,t)))}function a9(r,t,e){var n="a=ssrc:"+t+" "+e+":(.+)";return r.match(new RegExp(n))[1]}function o9(r){var t="^a=ssrc-group:FID ([0-9]+) ([0-9]+)$";return new Map(ip(r,t).map(function(e){return e.reverse()}))}function s9(r){var t=r9(Aa(ip(r,"^a=msid:(.+) (.+)$")),2),e=t[0],n=t[1],i=Aa(ip(r,"^a=ssrc:(.+) cname:.+$"));return i.map(function(a){return[a,e,n]})}function c9(r){var t=i9(r),e=o9(r),n=s9(r);return n.reduce(function(i,a){var o=a[0],s=a[1],l=a[2],c=i.get(l)||new n9(l,s,a9(r,o,"cname")),u=e.get(o)||null;return c.addSSRC(o,u,t.has(o)),i.set(l,c)},new Map)}function l9(r,t){var e=c9(r),n=Array.from(e.keys()),i=Array.from(t.keys()),a=Ym(n,i),o=Ym(i,n),s=Aa(a,function(y){return e.get(y)});s.forEach(function(y){y.addSimulcastSSRCs(),t.set(y.trackId,y)}),i=Array.from(t.keys());var l=Ym(i,o),c=Aa(l,function(y){return t.get(y)}),u=!r.match(/a=rtpmap:[0-9]+ rtx/),d=Aa(c,function(y){return y.toSdpLines(u)}),v=Aa(new Set(r.split(`\r
`).concat(d))),p="a=x-google-flag:conference";return r.match(p)||v.push(p),v.join(`\r
`)}var u9=l9,xs=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},P5=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},NT=$e,f9=NT.difference,ty=NT.flatMap,d9=u9,T5={0:"PCMU",8:"PCMA"};function ll(r){return Array.from(Qp(r)).reduce(function(t,e){var n=e[0],i=e[1],a=t.get(i)||[];return t.set(i,a.concat(n))},new Map)}function ry(r){return ia(r).reduce(function(t,e){var n=tl(e);return n?t.set(n,e):t},new Map)}function Qp(r){return hf(r).reduce(function(t,e){if(t.has(e))return t;var n=new RegExp("a=rtpmap:"+e+" ([^/]+)"),i=r.match(n),a=i?i[1].toLowerCase():T5[e]?T5[e].toLowerCase():"";return t.set(e,a)},new Map)}function ap(r,t){var e=new RegExp("^a=fmtp:"+r+" (.+)$","m"),n=t.match(e);return n&&n[1].split(";").reduce(function(i,a){var o=xs(a.split("="),2),s=o[0],l=o[1];return i[s]=isNaN(l)?l:parseInt(l,10),i},{})}function tl(r){var t=r.match(/^a=mid:(.+)$/m);return t&&t[1]}function ia(r,t,e){return r.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(function(n){return"m="+n}).filter(function(n){var i=new RegExp("m="+(t||".*"),"gm"),a=new RegExp("a="+(e||".*"),"gm");return i.test(n)&&a.test(n)})}function hf(r){var t=r.split(`\r
`)[0],e=t.match(/([0-9]+)/g);return e?e.slice(1).map(function(n){return parseInt(n,10)}):[]}function h9(r,t){t=t.map(function(a){var o=a.codec;return o.toLowerCase()});var e=ty(t,function(a){return r.get(a)||[]}),n=f9(Array.from(r.keys()),t),i=ty(n,function(a){return r.get(a)});return e.concat(i)}function J1(r,t){var e=t.split(`\r
`),n=e[0],i=e.slice(1);return n=n.replace(/([0-9]+\s?)+$/,r.join(" ")),[n].concat(i).join(`\r
`)}function p9(r,t,e){var n=ia(r),i=r.split(`\r
m=`)[0];return[i].concat(n.map(function(a){if(!/^m=(audio|video)/.test(a))return a;var o=a.match(/^m=(audio|video)/)[1],s=ll(a),l=o==="audio"?t:e,c=h9(s,l),u=J1(c,a),d=s.get("pcma")||[],v=s.get("pcmu")||[],p=o==="audio"?new Set(d.concat(v)):new Set;return p.has(c[0])?u.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):u})).join(`\r
`)}function v9(r,t){var e=ia(r),n=r.split(`\r
m=`)[0];return[n].concat(e.map(function(i){if(i=i.replace(/\r\n$/,""),!/^m=video/.test(i))return i;var a=ll(i),o=hf(i),s=new Set(a.get("vp8")||[]),l=o.some(function(c){return s.has(c)});return l?d9(i,t):i})).concat("").join(`\r
`)}function m9(r,t,e,n,i){var a=e.get(r)||[];if(a.length<=1)return a;var o=ap(t,i);if(!o)return a;var s=a.find(function(l){var c=ap(l,n);return c&&Object.keys(o).every(function(u){return o[u]===c[u]})});return typeof s=="number"?[s]:a}function g9(r,t,e){if(!/^m=(audio|video)/.test(r))return r;var n=tl(r),i=n&&t.get(n);if(!i)return r;var a=Qp(i),o=ll(r),s=ty(Array.from(a),function(p){var y=xs(p,2),b=y[0],S=y[1];return S!=="rtx"&&!e.includes(S)?m9(S,b,o,r,i):[]}),l=o.get("rtx")||[],c=l.filter(function(p){var y=ap(p,r);return y&&s.includes(y.apt)});s=Array.from(new Set(P5(P5([],xs(s)),xs(c))));var u=r.split(`\r
`).filter(function(p){var y=p.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),b=y&&y[2];return!y||b&&s.includes(parseInt(b,10))}),d=hf(r).filter(function(p){return s.includes(p)}),v=Array.from(new Set(d));return J1(v,u.join(`\r
`))}function y9(r,t){var e=ia(r),n=r.split(`\r
m=`)[0],i=ry(t);return[n].concat(e.map(function(a){return g9(a,i,[])})).join(`\r
`)}function _9(r,t,e,n){n===void 0&&(n=!1);var i=ry(e),a=ry(t),o=ia(r),s=r.split(`\r
m=`)[0];return[s].concat(o.map(function(l){if(l=l.replace(/\r\n$/,""),!/^m=video/.test(l))return l;var c=l.match(/^a=mid:(.+)$/m),u=c&&c[1];if(!u)return l;var d=i.get(u),v=Qp(d),p=hf(d),y=p.length&&v.get(p[0])==="vp8",b=n||!y;return b?a.get(u).replace(/\r\n$/,""):l})).concat("").join(`\r
`)}function w9(r,t,e){var n=Array.from(e).reduce(function(i,a){var o=xs(a,2),s=o[0],l=o[1],c=ia(r,s,"send(only|recv)"),u=c.map(tl).filter(function(d){return!t.has(d)});return u.forEach(function(d,v){return i.set(d,l[v])}),i},new Map);return RT(r,n)}function RT(r,t){var e=ia(r),n=r.split(`\r
m=`)[0];return[n].concat(e.map(function(i){if(!/^m=(audio|video)/.test(i))return i;var a=tl(i);if(!a)return i;var o=t.get(a);if(!o)return i;var s=(i.match(/^a=msid:(.+)$/m)||[])[1];if(!s)return i;var l=xs(s.split(" "),2),c=l[0],u=l[1],d=new RegExp("msid:"+c+(u?" "+u:"")+"$","gm");return i.replace(d,"msid:"+c+" "+o)})).join(`\r
`)}function b9(r,t){return r.split(`\r
`).filter(function(e){return!t.find(function(n){return new RegExp("a=ssrc:.*"+n+":","g").test(e)})}).join(`\r
`)}function x9(r){var t=ia(r),e=r.split(`\r
m=`)[0];return[e].concat(t.map(function(n){if(!/^m=video/.test(n))return n;var i=ll(n),a=i.get("rtx");if(!a)return n;var o=new Set(hf(n));a.forEach(function(u){return o.delete(u)});var s=n.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),l=s&&s[1],c=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(l?[new RegExp("^a=ssrc:"+l+" .+$")]:[]);return n=n.split(`\r
`).filter(function(u){return c.every(function(d){return!d.test(u)})}).join(`\r
`),J1(Array.from(o),n)})).join(`\r
`)}function E5(r,t){var e=Object.entries(t).map(function(n){var i=xs(n,2),a=i[0],o=i[1];return a+"="+o}).join(";");return"a=fmtp:"+r+" "+e}function S9(r,t){var e=ia(r),n=r.split(`\r
m=`)[0];return t=t||e.filter(function(i){return/^m=audio/.test(i)}).map(tl),[n].concat(e.map(function(i){if(!/^m=audio/.test(i))return i;var a=ll(i),o=a.get("opus");if(!o)return i;var s=ap(o,i);if(!s)return i;var l=E5(o,s),c=new RegExp(l),u=tl(i);t.includes(u)?s.usedtx=1:delete s.usedtx;var d=E5(o,s);return i.replace(c,d)})).join(`\r
`)}_n.addOrRewriteNewTrackIds=w9;_n.addOrRewriteTrackIds=RT;_n.createCodecMapForMediaSection=ll;_n.createPtToCodecName=Qp;_n.disableRtx=x9;_n.enableDtxForOpus=S9;_n.filterLocalCodecs=y9;_n.getMediaSections=ia;_n.removeSSRCAttributes=b9;_n.revertSimulcast=_9;_n.setCodecPreferences=p9;_n.setSimulcast=v9;var k9=function(){function r(t){t=Object.assign({getKey:function(n){return n},getValue:function(n){return n},isLessThanOrEqualTo:function(n,i){return n<=i}},t),Object.defineProperties(this,{_getKey:{value:t.getKey},_getValue:{value:t.getValue},_isLessThanOrEqualTo:{value:t.isLessThanOrEqualTo},_map:{value:new Map}})}return r.prototype.toMap=function(){return new Map(this._map)},r.prototype.updateAndFilter=function(t){return t.filter(this.update,this)},r.prototype.update=function(t){var e=this._getKey(t),n=this._getValue(t);return this._map.has(e)&&this._isLessThanOrEqualTo(n,this._map.get(e))?!1:(this._map.set(e,n),!0)},r}(),P9=k9,T9=P9,E9=function(){function r(){Object.defineProperties(this,{_filter:{value:new T9({getKey:function(e){return e.ufrag},isLessThanOrEqualTo:function(e,n){return e.revision<=n.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return r.prototype.setUfrag=function(t){this._ufrag=t;var e=this._filter.toMap().get(t);return e?e.candidates:[]},r.prototype.update=function(t){t.candidates=t.candidates||[];var e=this._filter.toMap().get(t.ufrag),n=e?e.candidates:[];return this._filter.update(t)&&this._ufrag===t.ufrag?t.candidates.slice(n.length):[]},r}(),C9=E9,jT=zt,L9=jT.ICE_ACTIVITY_CHECK_PERIOD_MS,A9=jT.ICE_INACTIVITY_THRESHOLD_MS,O9=function(){function r(t,e){e=Object.assign({activityCheckPeriodMs:L9,inactivityThresholdMs:A9},e),Object.defineProperties(this,{_activityCheckPeriodMs:{value:e.activityCheckPeriodMs},_inactivityThresholdMs:{value:e.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:t},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return r.prototype._getActivePairStat=function(t){var e=Array.from(t.values()),n=e.find(function(i){return i.type==="candidate-pair"&&i.nominated});return n||{bytesReceived:0,timestamp:Math.round(new Date().getTime())}},r.prototype._getIceConnectionStats=function(){var t=this;return this._peerConnection.getStats().then(function(e){return t._getActivePairStat(e)}).catch(function(){return null})},r.prototype._scheduleInactivityCallback=function(t){var e=this;t&&this._onIceConnectionStateChanged===null?(this._onIceConnectionStateChanged=function(){e._peerConnection.iceConnectionState==="disconnected"&&t()},this._peerConnection.addEventListener?this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=this._onIceConnectionStateChanged):!t&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener?this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=null,this._onIceConnectionStateChanged=null)},r.prototype.start=function(t){var e=this;this.stop(),this._timer=setInterval(function(){e._getIceConnectionStats().then(function(n){n&&((!e._lastActivity||e._lastActivity.bytesReceived!==n.bytesReceived)&&(e._lastActivity=n,e._scheduleInactivityCallback(null)),n.timestamp-e._lastActivity.timestamp>=e._inactivityThresholdMs&&(e._peerConnection.iceConnectionState==="disconnected"?t():e._onIceConnectionStateChanged===null&&e._scheduleInactivityCallback(t)))})},this._activityCheckPeriodMs)},r.prototype.stop=function(){this._scheduleInactivityCallback(null),this._timer!==null&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},r}(),N9=O9,R9=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),j9=yn.EventEmitter,I9=function(r){R9(t,r);function t(e){var n=r.call(this)||this;return Object.defineProperties(n,{_dataChannel:{value:e},_messageQueue:{value:[]}}),e.addEventListener("open",function(){n._messageQueue.splice(0).forEach(function(i){return n._publish(i)})}),e.addEventListener("message",function(i){var a=i.data;try{var o=JSON.parse(a);n.emit("message",o)}catch{}}),n.publish({type:"ready"}),n}return t.prototype._publish=function(e){var n=JSON.stringify(e);try{this._dataChannel.send(n)}catch{}},t.prototype.publish=function(e){var n=this._dataChannel;return n.readyState==="closing"||n.readyState==="closed"?!1:n.readyState==="connecting"?(this._messageQueue.push(e),!0):(this._publish(e),!0)},t}(j9),M9=I9,D9=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),F9=G3,B9=M9,$9=function(r){D9(t,r);function t(e){var n=r.call(this,e.label,e.maxPacketLifeTime,e.maxRetransmits,e.ordered)||this;return Object.defineProperties(n,{_dataChannel:{value:e}}),e.binaryType="arraybuffer",e.addEventListener("message",function(i){n.emit("message",i.data)}),e.addEventListener("close",function(){n.emit("close")}),n}return t.prototype.stop=function(){this._dataChannel.close(),r.prototype.stop.call(this)},t.prototype.toDataTransport=function(){return new B9(this._dataChannel)},t}(F9),U9=$9,V9=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),z9=F3,W9=function(r){V9(t,r);function t(e,n){return r.call(this,e,n)||this}return t}(z9),q9=W9,H9=_n.getMediaSections,G9=function(){function r(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return r.prototype.match=function(t){return this._midsToTrackIds.get(t.transceiver.mid)||null},r.prototype.update=function(t){var e=H9(t,"(audio|video)");this._midsToTrackIds=e.reduce(function(n,i){var a=i.match(/^a=mid:(.+)$/m)||[],o=i.match(/^a=msid:.+ (.+)$/m)||[],s=a[1],l=o[1];return s&&l?n.set(s,l):n},this._midsToTrackIds)},r}(),K9=G9,Q9=Ms.RTCSessionDescription,IT=_n,Y9=IT.createPtToCodecName,J9=IT.getMediaSections;function X9(r){var t={type:r.type};return r.type!=="rollback"&&(t.sdp=Z9(r.sdp)),new Q9(t)}function Z9(r){var t=J9(r),e=r.split(`\r
m=`)[0];return[e].concat(t.map(e$)).join(`\r
`)}function e$(r){var t=Y9(r);r=r$(r,t),r=t$(r);var e=n$(t),n=e.get("rtx")||new Set,i=new Set,a=i$(r,t,n,i),o=a$(a,i),s=Array.from(i),l=["h264","vp8","vp9"],c=l.reduce(function(u,d){var v=e.get(d)||new Set;return Array.from(v).reduce(function(p,y){return o.has(y)?p:p.add(y)},u)},new Set);return c.forEach(function(u){if(s.length){var d=s.shift();r=C5(r,d),r=s$(r,d,u)}}),s.forEach(function(u){r=C5(r,u),r=o$(r,u)}),r}function t$(r){for(var t=r.split(`\r
`),e=new Map,n=96,i=0;i<t.length;i++){var a=t[i].match(/^a=rtpmap:(\d+) ([^/]+)/);if(a){var o=parseInt(a[1],10),s=a[2].toLowerCase();if(e.has(o)&&e.get(o)!==s){for(;e.has(n)||n===o;)n++;var l=n;e.set(l,s),t[i]=t[i].replace("a=rtpmap:"+o,"a=rtpmap:"+l);for(var c=i+1;c<t.length;c++)t[c].match(new RegExp("^a=(fmtp|rtcp-fb):"+o+"\\b"))&&(t[c]=t[c].replace(new RegExp("^a=(fmtp|rtcp-fb):"+o+"\\b"),"a=$1:"+l))}else e.set(o,s)}}return t.join(`\r
`)}function r$(r,t){return Array.from(t.keys()).reduce(function(e,n){var i=new RegExp("^a=rtpmap:"+n+" rtx.+$","gm");return(e.match(i)||[]).slice(t.get(n)==="rtx"?1:0).reduce(function(a,o){var s=new RegExp(`\r
`+o),l=new RegExp(`\r
a=fmtp:`+n+" apt=[0-9]+");return a.replace(s,"").replace(l,"")},e)},r)}function n$(r){var t=new Map;return r.forEach(function(e,n){var i=t.get(e)||new Set;return t.set(e,i.add(n))}),t}function i$(r,t,e,n){return Array.from(e).reduce(function(i,a){var o=new RegExp("a=fmtp:"+a+" apt=(\\d+)"),s=r.match(o);if(!s)return n.add(a),i;var l=Number.parseInt(s[1]);if(!t.has(l))return n.add(a),i;var c=t.get(l);return c==="rtx"?(n.add(a),i):i.set(a,l)},new Map)}function a$(r,t){var e=Array.from(r).reduce(function(n,i){var a=i[0],o=i[1],s=n.get(o)||new Set;return n.set(o,s.add(a))},new Map);return Array.from(e).reduce(function(n,i){var a=i[0],o=Array.from(i[1]);return o.length>1?(o.forEach(function(s){t.add(s)}),n):n.set(a,o[0])},new Map)}function C5(r,t){var e=new RegExp("a=fmtp:"+t+`.*\r
`,"gm");return r.replace(e,"")}function o$(r,t){var e=new RegExp("a=rtpmap:"+t+`.*\r
`,"gm");return r.replace(e,"")}function s$(r,t,e){return r.endsWith(`\r
`)?r+"a=fmtp:"+t+" apt="+e+`\r
`:r+`\r
a=fmtp:`+t+" apt="+e}var c$=X9,l$=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),u$=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},f$=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},d$=AT,Yp=Ms,h$=Yp.RTCIceCandidate,p$=Yp.RTCPeerConnection,v$=Yp.RTCSessionDescription,m$=Yp.getStats,MT=Dt,Jp=zt,g$=Jp.DEFAULT_ICE_GATHERING_TIMEOUT_MS,y$=Jp.DEFAULT_LOG_LEVEL,_$=Jp.DEFAULT_SESSION_TIMEOUT_SEC,w$=Jp.iceRestartBackoffConfig,Ni=_n,b$=Ni.addOrRewriteNewTrackIds,x$=Ni.addOrRewriteTrackIds,DT=Ni.createCodecMapForMediaSection,L5=Ni.disableRtx,Rd=Ni.enableDtxForOpus,S$=Ni.filterLocalCodecs,Eu=Ni.getMediaSections,A5=Ni.removeSSRCAttributes,k$=Ni.revertSimulcast,P$=Ni.setCodecPreferences,T$=Ni.setSimulcast,E$=Fs,FT=Ve,Xm=FT.MediaClientLocalDescFailedError,Zm=FT.MediaClientRemoteDescFailedError,pf=$e,C$=pf.buildLogLevels,L$=pf.getPlatform,A$=pf.isChromeScreenShareTrack,O$=pf.oncePerTick,N$=pf.defer,R$=C9,j$=N9,I$=U9,M$=q9,D$=sl,F$=Da,B$=K9,O5=c$,X1=MT.guessBrowser(),$$=L$(),U$=/android/.test($$),V$=X1==="chrome",ds=X1==="firefox",z$=X1==="safari",W$=0,q$={open:["closed","updating"],updating:["closed","open"],closed:[]},H$=function(r){l$(t,r);function t(e,n,i,a){var o=r.call(this,"open",q$)||this;a=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:A$,iceServers:[],logLevel:y$,offerOptions:{},revertSimulcast:k$,sessionTimeout:_$*1e3,setCodecPreferences:P$,setSimulcast:T$,Backoff:d$,IceConnectionMonitor:j$,RTCIceCandidate:h$,RTCPeerConnection:p$,RTCSessionDescription:v$,Timeout:E$},a);var s=I5(Object.assign({},a,a.rtcConfiguration)),l=C$(a.logLevel),c=a.RTCPeerConnection;a.enableDscp===!0&&(a.chromeSpecificConstraints=a.chromeSpecificConstraints||{},a.chromeSpecificConstraints.optional=a.chromeSpecificConstraints.optional||[],a.chromeSpecificConstraints.optional.push({googDscp:!0}));var u=a.log?a.log.createLog("webrtc",o):new F$("webrtc",o,l,a.loggerName),d=new c(s,a.chromeSpecificConstraints);a.dummyAudioMediaStreamTrack&&d.addTrack(a.dummyAudioMediaStreamTrack),Object.defineProperties(o,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:a.enableDscp},_encodingParameters:{value:n},_isChromeScreenShareTrack:{value:a.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new a.Timeout(function(){return o._handleIceGatheringTimeout()},g$,!1)},_iceRestartBackoff:{value:new a.Backoff(w$)},_instanceId:{value:++W$},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:u},_eventObserver:{value:a.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new a.IceConnectionMonitor(d)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:a.offerOptions},_onEncodingParametersChanged:{value:O$(function(){o._needsAnswer||BT(o)})},_peerConnection:{value:d},_preferredAudioCodecs:{value:i.audio},_preferredVideoCodecs:{value:i.video},_shouldApplyDtx:{value:i.audio.every(function(p){var y=p.codec;return y!=="opus"})||i.audio.some(function(p){var y=p.codec,b=p.dtx;return y==="opus"&&b})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new a.Timeout(function(){u.debug("ICE reconnect timed out"),o.close()},a.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new R$},_setCodecPreferences:{value:ds&&U$&&i.video[0]&&i.video[0].codec.toLowerCase()!=="h264"?function(p){return p}:a.setCodecPreferences},_setSimulcast:{value:a.setSimulcast},_revertSimulcast:{value:a.revertSimulcast},_RTCIceCandidate:{value:a.RTCIceCandidate},_RTCPeerConnection:{value:a.RTCPeerConnection},_RTCSessionDescription:{value:a.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:e}}),n.on("changed",o._onEncodingParametersChanged),d.addEventListener("connectionstatechange",o._handleConnectionStateChange.bind(o)),d.addEventListener("datachannel",o._handleDataChannelEvent.bind(o)),d.addEventListener("icecandidate",o._handleIceCandidateEvent.bind(o)),d.addEventListener("iceconnectionstatechange",o._handleIceConnectionStateChange.bind(o)),d.addEventListener("icegatheringstatechange",o._handleIceGatheringStateChange.bind(o)),d.addEventListener("signalingstatechange",o._handleSignalingStateChange.bind(o)),d.addEventListener("track",o._handleTrackEvent.bind(o));var v=o;return o.on("stateChanged",function p(y){y==="closed"&&(v.removeListener("stateChanged",p),v._dataChannels.forEach(function(b,S){v.removeDataTrackSender(S)}))}),o}return t.prototype.toString=function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"},t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",e),this._preferredVideoCodecs.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=e)})},Object.defineProperty(t.prototype,"_shouldApplySimulcast",{get:function(){if(!V$&&!z$)return!1;var e=this._preferredVideoCodecs.some(function(n){return n.codec.toLowerCase()==="vp8"&&n.simulcast&&n.adaptiveSimulcast!==!1});return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){return this.iceConnectionState==="failed"?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&this._peerConnection.iceConnectionState==="disconnected"||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isApplicationSectionNegotiated",{get:function(){return this._peerConnection.signalingState!=="closed"?this._peerConnection.localDescription?Eu(this._peerConnection.localDescription.sdp,"application").length>0:!1:!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var e=this._preferredVideoCodecs.find(function(n){return"adaptiveSimulcast"in n});return e&&e.adaptiveSimulcast===!0},enumerable:!1,configurable:!0}),t.prototype._maybeUpdateEncodings=function(e,n,i){if(i===void 0&&(i=!1),e.kind!=="video"||e.readyState==="ended")return!1;var a=e.getSettings(),o=a.height,s=a.width;if(typeof o!="number"||typeof s!="number")return!1;var l=MT.guessBrowser();return l==="safari"||l==="chrome"&&this._isAdaptiveSimulcastEnabled?(this._updateEncodings(e,n,i),!0):!1},t.prototype._updateEncodings=function(e,n,i){if(this._isChromeScreenShareTrack(e)){var a=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];n.forEach(function(p,y){var b=a[y];b?(p.scaleResolutionDownBy=b.scaleResolutionDownBy,i&&delete p.active):(p.active=!1,delete p.scaleResolutionDownBy)})}else{var o=e.getSettings(),s=o.width,l=o.height,c=[{pixels:960*540,maxActiveLayers:3},{pixels:480*270,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}],u=s*l,d=c.find(function(p){return u>=p.pixels}),v=Math.min(n.length,d.maxActiveLayers);n.forEach(function(p,y){var b=y<v;b?(p.scaleResolutionDownBy=1<<v-y-1,i&&(p.active=!0)):(p.active=!1,delete p.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",n.map(function(p,y){var b=p.active,S=p.scaleResolutionDownBy;return"["+y+": "+b+", "+(S||0)+"]"}).join(", "))},t.prototype._addIceCandidate=function(e){var n=this;return Promise.resolve().then(function(){return e=new n._RTCIceCandidate(e),n._peerConnection.addIceCandidate(e)}).catch(function(i){n._log.warn("Failed to add RTCIceCandidate "+(e?'"'+e.candidate+'"':"null")+": "+i.message)})},t.prototype._addIceCandidates=function(e){return Promise.all(e.map(this._addIceCandidate,this)).then(function(){})},t.prototype._addOrUpdateTransceiver=function(e){var n=this,i=J$(this,e.kind);if(i&&i.sender){var a=i.sender.track?i.sender.track.id:null;return a&&this._log.warn("Reusing transceiver: "+i.mid+"] "+a+" => "+e.id),this._replaceTrackPromises.set(i,i.sender.replaceTrack(e).then(function(){i.direction="sendrecv"},function(){}).finally(function(){n._replaceTrackPromises.delete(i)})),i}return this._peerConnection.addTransceiver(e,{})},t.prototype._checkIceBox=function(e){var n=j5(e);if(!n)return Promise.resolve();var i=this._remoteCandidates.setUfrag(n);return this._addIceCandidates(i)},t.prototype._answer=function(e){var n=this;return Promise.resolve().then(function(){return n._negotiationRole||(n._negotiationRole="answerer"),n._setRemoteDescription(e)}).catch(function(){throw new Zm}).then(function(){return n._peerConnection.createAnswer()}).then(function(i){ds?i=new n._RTCSessionDescription({sdp:L5(i.sdp),type:i.type}):i=O5(i);var a=A5(i.sdp,["mslabel","label"]);if(n._shouldApplySimulcast){var o=a;a=n._setSimulcast(o,n._trackIdsToAttributes),a=n._revertSimulcast(a,o,e.sdp)}return a=a.replace(/42e015/g,"42e01f"),n._setLocalDescription({type:i.type,sdp:a})}).then(function(){return n._checkIceBox(e)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription)}).catch(function(i){var a=i instanceof Zm?i:new Xm;throw n._publishMediaWarning({message:"Failed to _answer",code:a.code,error:i}),a})},t.prototype._close=function(){return this._iceConnectionMonitor.stop(),this._peerConnection.signalingState!=="closed"?(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0):!1},t.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},t.prototype._handleDataChannelEvent=function(e){var n=this,i=e.channel,a=new I$(i);this._dataTrackReceivers.add(a),i.addEventListener("close",function(){n._dataTrackReceivers.delete(a)}),this.emit("trackAdded",a)},t.prototype._handleGlare=function(e){var n=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return n._trackIdsToAttributes=new Map(n._appliedTrackIdsToAttributes),n._setLocalDescription({type:"rollback"})}).then(function(){return n._needsAnswer=!1,n._answer(e)}).then(function(i){return i?Promise.resolve():n._offer()})},t.prototype._publishMediaWarning=function(e){var n=e.message,i=e.code,a=e.error,o=e.sdp;this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:n,code:i,context:JSON.stringify({error:a.message,sdp:o})}})},t.prototype._handleIceCandidateEvent=function(e){e.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(e.candidate));var n={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};e.candidate||(n.ice.complete=!0),this._isIceLite&&e.candidate||(n.ice.revision=this._localCandidatesRevision++,this.emit("candidates",n))},t.prototype._handleIceConnectionStateChange=function(){var e=this,n=this._peerConnection.iceConnectionState,i=["connected","completed"].includes(n),a=this._log;a.debug('ICE connection state is "'+n+'"'),i&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),this._lastIceConnectionState!=="failed"&&n==="failed"&&!this._shouldRestartIce&&!this._isRestartingIce?(a.warn("ICE failed"),this._initiateIceRestartBackoff()):["disconnected","failed"].includes(this._lastIceConnectionState)&&i&&a.debug("ICE reconnected"),n==="connected"?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){e._iceConnectionMonitor.stop(),!e._shouldRestartIce&&!e._isRestartingIce&&(a.warn("ICE Connection Monitor detected inactivity"),e._isIceConnectionInactive=!0,e._initiateIceRestartBackoff(),e.emit("iceConnectionStateChanged"),e.emit("connectionStateChanged"))})):["disconnected","completed"].includes(n)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=n,this.emit("iceConnectionStateChanged")},t.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},t.prototype._handleIceGatheringStateChange=function(){var e=this._peerConnection.iceGatheringState,n=this._log;n.debug('ICE gathering state is "'+e+'"');var i=this._iceGatheringTimeout,a=i.delay,o=i.isSet;e==="gathering"&&!this._didGenerateLocalCandidates&&!o&&(n.debug("Starting ICE gathering timeout: "+a),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},t.prototype._handleSignalingStateChange=function(){this._peerConnection.signalingState==="stable"&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},t.prototype._handleTrackEvent=function(e){var n=this,i=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new B$,this._trackMatcher.update(i);var a=e.track,o=this._trackMatcher.match(e)||a.id,s=new M$(o,a);this._mediaTrackReceivers.forEach(function(l){l.track.id===s.track.id&&n._mediaTrackReceivers.delete(l)}),this._mediaTrackReceivers.add(s),a.addEventListener?a.addEventListener("ended",function(){return n._mediaTrackReceivers.delete(s)}):a.onended=function(){return n._mediaTrackReceivers.delete(s)},this.emit("trackAdded",s)},t.prototype._initiateIceRestart=function(){if(this._peerConnection.signalingState!=="closed"){var e=this._log;e.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var n=this._iceReconnectTimeout,i=n.delay,a=n.isSet;a||(e.debug("Starting ICE reconnect timeout: "+i),this._iceReconnectTimeout.start()),this.offer().catch(function(o){e.error("offer failed in _initiateIceRestart with: "+o.message)})}},t.prototype._initiateIceRestartBackoff=function(){var e=this;this._peerConnection.signalingState==="closed"||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return e._initiateIceRestart()}))},t.prototype._maybeReoffer=function(e){var n=this._shouldOffer;if(e&&e.sdp){var i=this._peerConnection.getSenders().filter(function(c){return c.track});n=["audio","video"].reduce(function(c,u){var d=Eu(e.sdp,u,"(sendrecv|sendonly)"),v=i.filter(K$.bind(null,u));return c||d.length<v.length},n);var a=this._dataChannels.size>0,o=Eu(e.sdp,"application").length>0,s=a&&!o;n=n||s}var l=n?this._offer():Promise.resolve();return l.then(function(){return n})},t.prototype._offer=function(){var e=this,n=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,n.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return e._peerConnection.createOffer(n)}).catch(function(i){var a=new Xm;throw e._publishMediaWarning({message:"Failed to create offer",code:a.code,error:i}),a}).then(function(i){ds?i=new e._RTCSessionDescription({sdp:L5(i.sdp),type:i.type}):i=O5(i);var a=A5(i.sdp,["mslabel","label"]);a=e._peerConnection.remoteDescription?S$(a,e._peerConnection.remoteDescription.sdp):a;var o=e._setCodecPreferences(a,e._preferredAudioCodecs,e._preferredVideoCodecs);return e._shouldOffer=!1,e._negotiationRole||(e._negotiationRole="offerer"),e._shouldApplySimulcast&&(e._localDescriptionWithoutSimulcast={type:"offer",sdp:o},o=e._setSimulcast(o,e._trackIdsToAttributes)),e._setLocalDescription({type:"offer",sdp:o})})},t.prototype._getMediaTrackSenderId=function(e){var n=Array.from(this._rtpSenders.keys()).find(function(i){var a=i.track.id;return a===e});return n?n.id:e},t.prototype._addOrRewriteLocalTrackIds=function(e){var n=this,i=this._peerConnection.getTransceivers(),a=i.filter(function(v){var p=v.sender,y=v.stopped;return!y&&p&&p.track}),o=a.filter(function(v){var p=v.mid;return p}),s=new Map(o.map(function(v){var p=v.mid,y=v.sender;return[p,n._getMediaTrackSenderId(y.track.id)]})),l=x$(e.sdp,s),c=a.filter(function(v){var p=v.mid;return!p}),u=new Map(["audio","video"].map(function(v){return[v,c.filter(function(p){var y=p.sender;return y.track.kind===v}).map(function(p){var y=p.sender;return n._getMediaTrackSenderId(y.track.id)})]})),d=b$(l,s,u);return new this._RTCSessionDescription({sdp:d,type:e.type})},t.prototype._rollbackAndApplyOffer=function(e){var n=this;return this._setLocalDescription({type:"rollback"}).then(function(){return n._setLocalDescription(e)})},t.prototype._setLocalDescription=function(e){var n=this;return e.type!=="rollback"&&this._shouldApplyDtx&&(e=new this._RTCSessionDescription({sdp:Rd(e.sdp),type:e.type})),this._peerConnection.setLocalDescription(e).catch(function(i){n._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+i.message+'".',i);var a=new Xm,o={message:'Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:a.code,error:i};throw e.sdp&&(n._log.warn("The SDP was "+e.sdp),o.sdp=e.sdp),n._publishMediaWarning(o),a}).then(function(){e.type!=="rollback"&&(n._localDescription=n._addOrRewriteLocalTrackIds(e),n._shouldApplyDtx&&(n._localDescription=new n._RTCSessionDescription({sdp:Rd(n._localDescription.sdp,[]),type:n._localDescription.type})),n._localCandidates=[],e.type==="offer"?n._descriptionRevision++:e.type==="answer"&&(n._lastStableDescriptionRevision=n._descriptionRevision,M5(n)),n._localUfrag=j5(e),n.emit("description",n.getState()))})},t.prototype._setRemoteDescription=function(e){var n=this;return e.sdp&&(e.sdp=this._setCodecPreferences(e.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?e.sdp=Rd(e.sdp):e.sdp=Rd(e.sdp,[]),ds&&(e.sdp=Q$(e.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(e.sdp))),e=new this._RTCSessionDescription(e),Promise.resolve().then(function(){if(e.type==="answer"&&n._localDescriptionWithoutSimulcast){var i=n._preferredVideoCodecs.find(function(s){return"adaptiveSimulcast"in s}),a=!!i&&i.adaptiveSimulcast===!1,o=n._revertSimulcast(n._localDescription.sdp,n._localDescriptionWithoutSimulcast.sdp,e.sdp,a);if(n._localDescriptionWithoutSimulcast=null,o!==n._localDescription.sdp)return n._rollbackAndApplyOffer({type:n._localDescription.type,sdp:o})}}).then(function(){return n._peerConnection.setRemoteDescription(e)}).then(function(){e.type==="answer"&&(n._isRestartingIce&&(n._log.debug("An ICE restart was in-progress and is now completed"),n._isRestartingIce=!1),M5(n))},function(i){throw n._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+i.message+'".',i),e.sdp&&n._log.warn("The SDP was "+e.sdp),i})},t.prototype._updateDescription=function(e){var n=this;switch(e.type){case"answer":case"pranswer":if(e.revision!==this._descriptionRevision||this._peerConnection.signalingState!=="have-local-offer")return Promise.resolve();this._descriptionRevision=e.revision;break;case"close":return this._close();case"create-offer":return e.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._offer());case"offer":return e.revision<=this._lastStableDescriptionRevision||this._peerConnection.signalingState==="closed"?Promise.resolve():this._peerConnection.signalingState==="have-local-offer"?this._needsAnswer&&this._lastStableDescriptionRevision===0?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._handleGlare(e)):(this._descriptionRevision=e.revision,this._answer(e).then(function(){}))}var i=e.revision;return Promise.resolve().then(function(){return n._setRemoteDescription(e)}).catch(function(a){var o=new Zm;throw n._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed',code:o.code,error:a,sdp:e.sdp}),o}).then(function(){return n._lastStableDescriptionRevision=i,n._needsAnswer=!1,n._checkIceBox(e)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription).then(function(){})})},t.prototype._updateIce=function(e){var n=this._remoteCandidates.update(e);return this._addIceCandidates(n)},t.prototype.addDataTrackSender=function(e){if(!this._dataChannels.has(e))try{var n={ordered:e.ordered};e.maxPacketLifeTime!==null&&(n.maxPacketLifeTime=e.maxPacketLifeTime),e.maxRetransmits!==null&&(n.maxRetransmits=e.maxRetransmits);var i=this._peerConnection.createDataChannel(e.id,n);e.addDataChannel(i),this._dataChannels.set(e,i)}catch(a){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+e.id+'": '+a.message)}},t.prototype._handleQueuedPublisherHints=function(){var e=this;this._peerConnection.signalingState==="stable"&&this._mediaTrackSenderToPublisherHints.forEach(function(n,i){var a=n.deferred,o=n.encodings;e._mediaTrackSenderToPublisherHints.delete(i),e._setPublisherHint(i,o).then(function(s){return a.resolve(s)}).catch(function(s){return a.reject(s)})})},t.prototype._setPublisherHint=function(e,n){var i=this;if(ds)return Promise.resolve("COULD_NOT_APPLY_HINT");if(this._mediaTrackSenderToPublisherHints.has(e)){var a=this._mediaTrackSenderToPublisherHints.get(e);a.deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(e)}var o=this._rtpSenders.get(e);if(!o)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if(this._peerConnection.signalingState==="closed")return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if(this._peerConnection.signalingState!=="stable"){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var s=N$();return this._mediaTrackSenderToPublisherHints.set(e,{deferred:s,encodings:n}),s.promise}var l=o.getParameters();return n!==null&&n.forEach(function(c){var u=c.enabled,d=c.layer_index;l.encodings.length>d?(i._log.debug("layer:"+d+", active:"+l.encodings[d].active+" => "+u),l.encodings[d].active=u):i._log.warn("invalid layer:"+d+", active:"+u)}),this._maybeUpdateEncodings(o.track,l.encodings,n===null),o.setParameters(l).then(function(){return"OK"}).catch(function(c){return i._log.error("Failed to apply publisher hints:",c),"COULD_NOT_APPLY_HINT"})},t.prototype.addMediaTrackSender=function(e){var n=this;if(!(this._peerConnection.signalingState==="closed"||this._rtpSenders.has(e))){var i=this._addOrUpdateTransceiver(e.track),a=i.sender;e.addSender(a,function(o){return n._setPublisherHint(e,o)}),this._rtpNewSenders.add(a),this._rtpSenders.set(e,a)}},t.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},t.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},t.prototype.getState=function(){if(!this._localDescription)return null;var e=this._localDescription.type==="answer"?this._lastStableDescriptionRevision:this._descriptionRevision,n={type:this._localDescription.type,revision:e};return this._localDescription.sdp&&(n.sdp=this._localDescription.sdp),{description:n,id:this.id}},t.prototype.offer=function(){var e=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(n){e.transition("updating",n);var i=e._needsAnswer||e._isRestartingIce?Promise.resolve():e._offer();return i.then(function(){e.tryTransition("open",n)},function(a){throw e.tryTransition("open",n),a})})},t.prototype.removeDataTrackSender=function(e){var n=this._dataChannels.get(e);n&&(e.removeDataChannel(n),this._dataChannels.delete(e),n.close())},t.prototype.removeMediaTrackSender=function(e){var n=this._rtpSenders.get(e);if(n){if(this._peerConnection.signalingState!=="closed"&&this._peerConnection.removeTrack(n),e.removeSender(n),this._mediaTrackSenderToPublisherHints.has(e)){var i=this._mediaTrackSenderToPublisherHints.get(e);i.deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(e)}this._rtpNewSenders.delete(n),this._rtpSenders.delete(e)}},t.prototype.setConfiguration=function(e){typeof this._peerConnection.setConfiguration=="function"&&this._peerConnection.setConfiguration(I5(e))},t.prototype.setIceReconnectTimeout=function(e){return this._iceReconnectTimeout.setDelay(e),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},t.prototype.update=function(e){var n=this;return this.bracket("updating",function(i){if(n.state==="closed")return Promise.resolve();n.transition("updating",i);var a=[];return e.ice&&a.push(n._updateIce(e.ice)),e.description&&a.push(n._updateDescription(e.description)),Promise.all(a).then(function(){n.tryTransition("open",i)},function(o){throw n.tryTransition("open",i),o})})},t.prototype.getStats=function(){var e=this;return m$(this._peerConnection,{log:this._log}).then(function(n){return G$(e,n)})},t}(D$);function N5(r,t){var e=r._getMediaTrackSenderId(t.trackId);return Object.assign(t,{trackId:e})}function R5(r,t){var e=f$([],u$(r._mediaTrackReceivers)).find(function(i){return i.track.id===t.trackId}),n=e?e.id:null;return Object.assign(t,{trackId:n})}function G$(r,t){return Object.assign(t,{remoteAudioTrackStats:t.remoteAudioTrackStats.map(function(e){return R5(r,e)}),remoteVideoTrackStats:t.remoteVideoTrackStats.map(function(e){return R5(r,e)}),localAudioTrackStats:t.localAudioTrackStats.map(function(e){return N5(r,e)}),localVideoTrackStats:t.localVideoTrackStats.map(function(e){return N5(r,e)})})}function j5(r){if(r.sdp){var t=r.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(t)return t[1]}return null}function I5(r){return r===void 0&&(r={}),Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},r)}function K$(r,t){var e=t.track;return e&&e.kind===r&&e.readyState!=="ended"}function Q$(r){return r.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}function Y$(r,t){return!r.stopped&&!t._replaceTrackPromises.has(r)&&["inactive","recvonly"].includes(r.direction)}function J$(r,t){var e={audio:r._preferredAudioCodecs.map(function(o){var s=o.codec;return s.toLowerCase()}),video:r._preferredVideoCodecs.map(function(o){var s=o.codec;return s.toLowerCase()})}[t],n=r._recycledTransceivers[t],i=e.find(function(o){return r._localCodecs.has(o)});if(!i)return n.shift();var a=n.find(function(o){var s=r._remoteCodecMaps.get(o.mid);return s&&s.has(i)});return a&&n.splice(n.indexOf(a),1),a}function X$(r){var t=r._peerConnection.localDescription;!t||!t.sdp||Eu(t.sdp).forEach(function(e){var n=DT(e);n.forEach(function(i,a){return r._localCodecs.add(a)})})}function Z$(r){var t=r._peerConnection.remoteDescription;!t||!t.sdp||Eu(t.sdp).forEach(function(e){var n=e.match(/^a=mid:(.+)$/m);if(!(!n||!n[1])){var i=n[1],a=DT(e);r._remoteCodecMaps.set(i,a)}})}function eU(r){r._recycledTransceivers.audio=[],r._recycledTransceivers.video=[],r._peerConnection.getTransceivers().forEach(function(t){if(Y$(t,r)){var e=t.receiver.track;r._recycledTransceivers[e.kind].push(t)}})}function M5(r){eU(r),X$(r),Z$(r),BT(r).then(function(){r._handleQueuedPublisherHints()})}function BT(r){var t=r._encodingParameters,e=t.maxAudioBitrate,n=t.maxVideoBitrate,i=new Map([["audio",e],["video",n]]),a=[];return r._peerConnection.getSenders().filter(function(o){return o.track}).forEach(function(o){var s=i.get(o.track.kind),l=o.getParameters();s===null||s===0?tU(l):r._isChromeScreenShareTrack(o.track)?r._log.warn("Not setting maxBitrate for "+o.track.kind+" Track "+o.track.id+" because it appears to be screen share track: "+o.track.label):rU(l,s),!ds&&l.encodings.length>0&&(o.track.kind==="audio"?l.encodings[0].priority="high":r._isChromeScreenShareTrack(o.track)&&(l.encodings[0].priority="medium"),r._enableDscp&&(l.encodings[0].networkPriority="high"));var c=r._rtpNewSenders.has(o);r._maybeUpdateEncodings(o.track,l.encodings,c),r._rtpNewSenders.delete(o);var u=o.setParameters(l).catch(function(d){r._log.warn("Error while setting encodings parameters for "+o.track.kind+" Track "+o.track.id+": "+(d.message||d.name))});a.push(u)}),Promise.all(a)}function tU(r){Array.isArray(r.encodings)&&r.encodings.forEach(function(t){return delete t.maxBitrate})}function rU(r,t){ds?r.encodings=[{maxBitrate:t}]:r.encodings.forEach(function(e){e.maxBitrate=t})}var nU=H$,iU=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$T=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},UT=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},aU=Dt.guessBrowser,oU=nU,sU=B3,cU=M3,go=$e,lU=Ve.MediaConnectionError,uU=aU()==="firefox",fU=function(r){iU(t,r);function t(e,n,i){var a=r.call(this)||this;i=Object.assign({audioContextFactory:uU?Up():null,PeerConnectionV2:oU},i);var o=i.audioContextFactory?i.audioContextFactory.getOrCreate(a):null,s=o?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(a,{_audioContextFactory:{value:i.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:go.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:o?new sU(dU(o)):null},_encodingParameters:{value:e},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:s},_peerConnections:{value:new Map},_preferredCodecs:{value:n},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:i.PeerConnectionV2}}),a}return t.prototype.setEffectiveAdaptiveSimulcast=function(e){this._peerConnections.forEach(function(n){return n.setEffectiveAdaptiveSimulcast(e)}),this._preferredCodecs.video.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=e)})},Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._closeAbsentPeerConnections=function(e){var n=new Set(e.map(function(i){return i.id}));return this._peerConnections.forEach(function(i){n.has(i.id)||i._close()}),this},t.prototype._getConfiguration=function(){return this._configurationDeferred.promise},t.prototype._getOrCreate=function(e,n){var i=this,a=this,o=this._peerConnections.get(e);if(!o){var s=this._PeerConnectionV2,l=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},n);try{o=new s(e,this._encodingParameters,this._preferredCodecs,l)}catch{throw new lU}this._peerConnections.set(o.id,o),o.on("candidates",this.queue.bind(this,"candidates")),o.on("description",this.queue.bind(this,"description")),o.on("trackAdded",this.queue.bind(this,"trackAdded")),o.on("stateChanged",function c(u){u==="closed"&&(o.removeListener("stateChanged",c),a._dataTrackSenders.forEach(function(d){return o.removeDataTrackSender(d)}),a._mediaTrackSenders.forEach(function(d){return o.removeMediaTrackSender(d)}),a._peerConnections.delete(o.id),a._closedPeerConnectionIds.add(o.id),D5(a),jd(a))}),o.on("connectionStateChanged",function(){return D5(i)}),o.on("iceConnectionStateChanged",function(){return jd(i)}),this._dataTrackSenders.forEach(o.addDataTrackSender,o),this._mediaTrackSenders.forEach(o.addMediaTrackSender,o),jd(this)}return o},t.prototype.close=function(){return this._peerConnections.forEach(function(e){e.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),jd(this),this},t.prototype.createAndOffer=function(){var e=this;return this._getConfiguration().then(function(n){var i;do i=go.makeUUID();while(e._peerConnections.has(i));return e._getOrCreate(i,n)}).then(function(n){return n.offer()}).then(function(){return e})},t.prototype.getTrackReceivers=function(){return go.flatMap(this._peerConnections,function(e){return e.getTrackReceivers()})},t.prototype.getStates=function(){var e=[];return this._peerConnections.forEach(function(n){var i=n.getState();i&&e.push(i)}),e},t.prototype.setConfiguration=function(e){return this._configuration&&(this._configurationDeferred=go.defer(),this._peerConnections.forEach(function(n){n.setConfiguration(e)})),this._configuration=e,this._configurationDeferred.resolve(e),this},t.prototype.setIceReconnectTimeout=function(e){return this._sessionTimeout===null&&(this._peerConnections.forEach(function(n){n.setIceReconnectTimeout(e)}),this._sessionTimeout=e),this},t.prototype.setTrackSenders=function(e){var n=new Set(e.filter(function(o){return o.kind==="data"})),i=new Set(e.filter(function(o){return o&&(o.kind==="audio"||o.kind==="video")})),a=vU(this,n,i);return this._dataTrackSenders=n,this._mediaTrackSenders=i,hU(this,a),this},t.prototype.update=function(e,n){var i=this;return n===void 0&&(n=!1),n&&this._closeAbsentPeerConnections(e),this._getConfiguration().then(function(a){return Promise.all(e.map(function(o){if(i._closedPeerConnectionIds.has(o.id))return null;var s=i._getOrCreate(o.id,a);return s.update(o)}))}).then(function(){return i})},t.prototype.getStats=function(){var e=Array.from(this._peerConnections.values());return Promise.all(e.map(function(n){return n.getStats().then(function(i){return[n.id,i]})})).then(function(n){return new Map(n)})},t}(cU);function dU(r){var t=r.createMediaStreamDestination();return t.stream.getAudioTracks()[0]}function hU(r,t){(t.data.add.size||t.data.remove.size||t.media.add.size||t.media.remove.size)&&r._peerConnections.forEach(function(e){t.data.remove.forEach(e.removeDataTrackSender,e),t.media.remove.forEach(e.removeMediaTrackSender,e),t.data.add.forEach(e.addDataTrackSender,e),t.media.add.forEach(e.addMediaTrackSender,e),(t.media.add.size||t.media.remove.size||t.data.add.size&&!e.isApplicationSectionNegotiated)&&e.offer()})}function pU(r,t){var e=go.difference(t,r._dataTrackSenders),n=go.difference(r._dataTrackSenders,t);return{add:e,remove:n}}function vU(r,t,e){return{data:pU(r,t),media:mU(r,e)}}function mU(r,t){var e=go.difference(t,r._mediaTrackSenders),n=go.difference(r._mediaTrackSenders,t);return{add:e,remove:n}}var op={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3},eg;function gU(){return Object.keys(op).reduce(function(r,t){var e;return Object.assign(r,(e={},e[op[t]]=t,e))},{})}function VT(r){return r.length?(eg=eg||gU(),r.reduce(function(t,e){return eg[Math.max(op[t],op[e])]})):"new"}function jd(r){r._lastIceConnectionState=r.iceConnectionState,r._iceConnectionState=VT(UT([],$T(r._peerConnections.values())).map(function(t){return t.iceConnectionState})),r.iceConnectionState!==r._lastIceConnectionState&&r.emit("iceConnectionStateChanged")}function D5(r){r._lastConnectionState=r.connectionState,r._connectionState=VT(UT([],$T(r._peerConnections.values())).map(function(t){return t.connectionState})),r.connectionState!==r._lastConnectionState&&r.emit("connectionStateChanged")}var yU=fU,_U=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wU=yn,bU=0,xU=function(r){_U(t,r);function t(e,n,i){var a=r.call(this)||this;return Object.defineProperties(a,{_instanceId:{value:bU++},channel:{value:n},_log:{value:i.log.createLog("default",a)},_getReceiver:{value:e},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),a}return Object.defineProperty(t.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[MediaSignaling #"+this._instanceId+":"+this.channel+"]"},t.prototype.setup=function(e){var n=this;this._teardown(),this._log.info("setting up msp transport for id:",e);var i=this._getReceiver(e).then(function(a){if(a.kind!=="data"&&n._log.error("Expected a DataTrackReceiver"),n._receiverPromise===i){try{n._transport=a.toDataTransport(),n.emit("ready",n._transport)}catch(o){n._log.error("Failed to toDataTransport: "+o.message)}a.once("close",function(){return n._teardown()})}});this._receiverPromise=i},t.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},t}(wU),Bs=xU,SU=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kU=Bs,PU=function(r){SU(t,r);function t(e,n){var i=r.call(this,e,"active_speaker",n)||this;return Object.defineProperties(i,{_loudestParticipantSid:{value:null,writable:!0}}),i.on("ready",function(a){a.on("message",function(o){switch(o.type){case"active_speaker":i._setLoudestParticipantSid(o.participant);break}})}),i}return Object.defineProperty(t.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),t.prototype._setLoudestParticipantSid=function(e){this.loudestParticipantSid!==e&&(this._loudestParticipantSid=e,this.emit("updated"))},t}(kU),TU=PU,EU=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),CU=Bs,LU=function(r){EU(t,r);function t(e,n){var i=r.call(this,e,"extension_transcriptions",n)||this;return i.on("ready",function(a){a.on("message",function(o){switch(o.type){case"extension_transcriptions":i.emit("transcription",o);break}})}),i}return t}(CU),AU=LU,OU=function(){function r(t,e,n,i){Object.defineProperties(this,{availableSend:{enumerable:!0,value:n},recv:{enumerable:!0,value:e},rtt:{enumerable:!0,value:i},send:{enumerable:!0,value:t}})}return r.of=function(t,e){var n=(e.timestamp-t.timestamp)/1e3,i=e.bytesSent-t.bytesSent,a=e.bytesReceived-t.bytesReceived,o=n>0?i/n*8:0,s=n>0?a/n*8:0,l=e.availableOutgoingBitrate,c=e.currentRoundTripTime;return new r(o,s,l,c)},r}(),NU=OU,tg=NU,RU=function(){function r(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new tg(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return r.prototype.next=function(t){var e=this.lastStats;if(this.lastStats=t,e){var n=e.id===t.id?tg.of(e,t):new tg(0,0);this.lastReport=n}return this.lastReport},r}(),jU=RU;function IU(r){return r=r.filter(function(t){return typeof t=="number"}),r.length<1?void 0:r.reduce(function(t,e){return e+t})/r.length}var zT=IU,MU=function(){function r(t,e,n){Object.defineProperties(this,{id:{enumerable:!0,value:t},trackId:{enumerable:!0,value:e},bitrate:{enumerable:!0,value:n}})}return r}(),WT=MU;function DU(r){return r.reduce(function(t,e){return typeof e=="number"?e+t:t},0)}var qT=DU,FU=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),F5=zT,BU=WT,$U=qT,UU=function(r){FU(t,r);function t(e,n,i,a,o,s,l){var c=r.call(this,e,n,i)||this,u=o>0?a/o:0;return Object.defineProperties(c,{deltaPacketsLost:{enumerable:!0,value:a},deltaPacketsReceived:{enumerable:!0,value:o},fractionLost:{enumerable:!0,value:s},jitter:{enumerable:!0,value:l},phonyFractionLost:{enumerable:!0,value:u}}),c}return t.of=function(e,n,i){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var a=(i.timestamp-n.timestamp)/1e3,o=i.bytesReceived-n.bytesReceived,s=a>0?o/a*8:0,l=Math.max(i.packetsLost-n.packetsLost,0),c=i.packetsReceived-n.packetsReceived,u=i.fractionLost,d=i.jitter;return new t(n.id,e,s,l,c,u,d)},t.summarize=function(e){var n=e.map(function(s){return s.summarize()}),i=$U(n.map(function(s){return s.bitrate})),a=F5(n.map(function(s){return s.fractionLost})),o=F5(n.map(function(s){return s.jitter}));return{bitrate:i,fractionLost:a,jitter:o}},t.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:typeof this.fractionLost=="number"?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},t}(BU),HT=UU,VU=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zU=zT,WU=WT,qU=qT,HU=function(r){VU(t,r);function t(e,n,i,a){var o=r.call(this,e,n,i)||this;return Object.defineProperties(o,{rtt:{enumerable:!0,value:a}}),o}return t.of=function(e,n,i,a){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var o=(i.timestamp-n.timestamp)/1e3,s=i.bytesSent-n.bytesSent,l=o>0?s/o*8:0,c=a&&typeof a.roundTripTime=="number"?a.roundTripTime/1e3:void 0;return new t(n.id,e,l,c)},t.summarize=function(e){var n=qU(e.map(function(a){return a.bitrate})),i=zU(e.map(function(a){return a.rtt}));return{bitrate:n,rtt:i}},t}(WU),GT=HU,rg=HT,ng=GT,GU=function(){function r(t,e,n){Object.defineProperties(this,{ice:{enumerable:!0,value:t},audio:{enumerable:!0,value:e},video:{enumerable:!0,value:n}})}return r.prototype.summarize=function(){var t=this.audio.send.concat(this.video.send),e=ng.summarize(t),n=this.audio.recv.concat(this.video.recv),i=rg.summarize(n);return{ice:this.ice,send:e,recv:i,audio:{send:ng.summarize(this.audio.send),recv:rg.summarize(this.audio.recv)},video:{send:ng.summarize(this.video.send),recv:rg.summarize(this.video.recv)}}},r}(),KU=GU,QU=function(){function r(t,e,n){Object.defineProperties(this,{id:{enumerable:!0,value:t,writable:!0},trackId:{enumerable:!0,value:e,writable:!0},lastStats:{enumerable:!0,value:n,writable:!0}})}return r}(),KT=QU,YU=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),JU=HT,XU=KT,ZU=function(r){YU(t,r);function t(e,n){var i=r.call(this,n.id,e,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return t.prototype.next=function(e,n){var i=this.lastStats;this.lastStats=n,this.trackId=e;var a=JU.of(e,i,n);return this.lastReport=a,a},t}(XU),eV=ZU,tV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rV=KT,nV=GT,iV=function(r){tV(t,r);function t(e,n){var i=r.call(this,n.id,e,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return t.prototype.next=function(e,n,i){var a=this.lastStats;this.lastStats=n,this.trackId=e;var o=nV.of(e,a,n,i);return this.lastReport=o,o},t}(rV),aV=iV,mu=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Id=A&&A.__spreadArray||function(r,t){for(var e=0,n=t.length,i=r.length;e<n;e++,i++)r[i]=t[e];return r},Zu=A&&A.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},QT=Dt.guessBrowser,oV=jU,sV=KU,cV=eV,lV=aV,uV=function(){function r(t){Object.defineProperties(this,{pc:{enumerable:!0,value:t},ice:{enumerable:!0,value:new oV},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return r.prototype.next=function(){var t=this,e=QT()==="firefox"?hV(this):pV(this);return e.then(function(){var n=Id([],mu(t.audio.send.values())),i=Id([],mu(t.video.send.values())),a=Id([],mu(t.audio.recv.values())),o=Id([],mu(t.video.recv.values())),s=new sV(t.ice.lastReport,{send:n.map(function(l){return l.lastReport}).filter(function(l){return l}),recv:a.map(function(l){return l.lastReport}).filter(function(l){return l})},{send:i.map(function(l){return l.lastReport}).filter(function(l){return l}),recv:o.map(function(l){return l.lastReport}).filter(function(l){return l})});return t.lastReport=s,s})},r}();function B5(r){return Promise.all(r.map(function(t){var e=t.track.id;return t.getStats().then(function(n){var i,a;try{for(var o=Zu(n.values()),s=o.next();!s.done;s=o.next()){var l=s.value;l.type==="inbound-rtp"&&(l.id=e+"-"+l.id)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return[e,n]})})).then(function(t){return new Map(t)})}function YT(r,t,e,n,i){var a=t[n.mediaType];if(!i){var o=e.get(n.trackId);o&&(i=o.trackIdentifier)}if(a&&i){if(a.has(n.id))return a.get(n.id);var s=new r(i,n);a.set(n.id,s)}return null}function Z1(r){return{audio:r.audio.send,video:r.video.send}}function e_(r){return{audio:r.audio.recv,video:r.video.recv}}function fV(r,t,e,n){return YT(lV,Z1(r),t,e,n)}function dV(r,t,e,n){return YT(cV,e_(r),t,e,n)}function JT(r){return{audio:new Set(r.audio.send.keys()),video:new Set(r.video.send.keys())}}function XT(r){return{audio:new Set(r.audio.recv.keys()),video:new Set(r.video.recv.keys())}}function ZT(r,t,e,n){var i,a;try{for(var o=Zu(t.values()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l.type==="outbound-rtp"&&!l.isRemote){if(QT()!=="firefox"&&!l.trackId)continue;var c=e[l.mediaType];c&&c.delete(l.id);var u=fV(r,t,l,n);if(u){var d=t.get(l.remoteId);u.next(n||u.trackId,l,d)}}}}catch(v){i={error:v}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function eE(r,t,e,n){var i,a;try{for(var o=Zu(t.values()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l.type==="inbound-rtp"&&!l.isRemote){var c=e[l.mediaType];c&&c.delete(l.id);var u=dV(r,t,l,n);u&&u.next(n||u.trackId,l)}}}catch(d){i={error:d}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}}function sp(r,t){var e=function(i){var a=r[i],o=t[i];o.forEach(function(s){return a.delete(s)})};for(var n in t)e(n)}function tE(r,t){var e,n,i,a,o;try{for(var s=Zu(t.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.type==="transport"&&(o=t.get(c.selectedCandidatePairId))}}catch(v){e={error:v}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}if(o){r.next(o);return}try{for(var u=Zu(t.values()),d=u.next();!d.done;d=u.next()){var c=d.value;c.type==="candidate-pair"&&c.nominated&&(!("selected"in c)||c.selected)&&r.next(c)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}}function hV(r){var t=r.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/send/)&&n.sender.track}).map(function(n){return n.sender}),e=r.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/recv/)}).map(function(n){return n.receiver});return Promise.all([B5(t),B5(e),r.pc.getStats()]).then(function(n){var i=mu(n,3),a=i[0],o=i[1],s=i[2],l=Z1(r),c=JT(r);a.forEach(function(v,p){return ZT(r,v,c,p)}),sp(l,c);var u=e_(r),d=XT(r);o.forEach(function(v,p){return eE(r,v,d,p)}),sp(u,d),tE(r.ice,s)})}function pV(r){return r.pc.getStats().then(function(t){var e=Z1(r),n=JT(r);ZT(r,t,n),sp(e,n);var i=e_(r),a=XT(r);eE(r,t,a),sp(i,a),tE(r.ice,t)})}var vV=uV,mV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),gV=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},yV=yn,_V=vV,wV=function(r){mV(t,r);function t(e,n){var i=r.call(this)||this;return Object.defineProperties(i,{_factories:{value:new WeakMap},_manager:{value:e},_signaling:{value:n}}),n.on("updated",function(){return i.emit("updated")}),i}return Object.defineProperty(t.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e=this;this.stop();var n=setTimeout(function(){e._timeout===n&&bV(e).then(function(i){if(e._timeout===n){if(i.length){var a=gV(i,1),o=a[0];e._signaling.put(o)}e.start()}})},200);this._timeout=n},t.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},t}(yV);function bV(r){var t=r._manager._peerConnections?Array.from(r._manager._peerConnections.values()):[],e=t.map(function(a){return a._peerConnection}).filter(function(a){return a.signalingState!=="closed"}),n=e.map(function(a){if(r._factories.has(a))return r._factories.get(a);var o=new _V(a);return r._factories.set(a,o),o}),i=n.map(function(a){return a.next().catch(function(){return null})});return Promise.all(i).then(function(a){return a.filter(function(o){return o}).map(function(o){return o.summarize()})})}var xV=wV,SV=$e.defer,kV=function(){function r(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return r.prototype.put=function(t){this._hasValue=!0,this._value=t;var e=this._deferreds.shift();return e&&e.resolve(t),this},r.prototype.take=function(){var t=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var e=SV();return this._deferreds.push(e),e.promise.then(function(n){return t._hasValue=!1,n})},r}(),PV=kV,TV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EV=Bs,CV=PV,LV=Fs,$5=5e3,AV=function(r){TV(t,r);function t(e,n,i){var a=r.call(this,e,"network_quality",i)||this;return Object.defineProperties(a,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new CV},_resendTimer:{value:new LV(function(){a._resendTimer.setDelay(a._resendTimer.delay*1.5),a._sendNetworkQualityInputs()},$5,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:n.local,remoteReportLevel:n.remote}}}}),a.on("ready",function(o){o.on("message",function(s){switch(a._log.debug("Incoming: ",s),s.type){case"network_quality":a._handleNetworkQualityMessage(s);break}})}),a._sendNetworkQualityInputs(),a}return Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),t.prototype._handleNetworkQualityMessage=function(e){var n=this,i=!1,a=null,o=e?e.local:null;typeof o=="number"?(a=o,this._levels=null):typeof o=="object"&&o&&(this._levels=o,a=typeof o.level=="number"?o.level:Math.min(o.audio.send,o.audio.recv,o.video.send,o.video.recv)),a!==null&&this.level!==a&&(this._level=a,i=!0),this._remoteLevels=e&&e.remotes?e.remotes.reduce(function(s,l){var c=n._remoteLevels.get(l.sid)||{};return c.level!==l.level&&(i=!0),s.set(l.sid,l)},new Map):this._remoteLevels,i&&this.emit("updated"),this._resendTimer.setDelay($5),this._resendTimer.isSet&&setTimeout(function(){return n._sendNetworkQualityInputs()},1e3)},t.prototype._sendNetworkQualityInputs=function(){var e=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(n){e._transport&&e._transport.publish(OV(n,e._networkQualityReportLevels))}).finally(function(){e._resendTimer.start()})},t.prototype.put=function(e){this._networkQualityInputs.put(e)},t}(EV);function OV(r,t){return Object.assign({type:"network_quality"},r,t)}var NV=AV,RV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jV=yn.EventEmitter,IV=function(r){RV(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),e}return t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return e=typeof e=="boolean"?e:!0,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},t}(jV),rE=IV,MV=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),DV=rE,FV=function(r){MV(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_revision:{value:1,writable:!0}}),e}return t.prototype.update=function(e){return e.revision<this._revision?this:(this._revision=e.revision,this.enable(e.is_recording))},t}(DV),BV=FV,$V=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),UV=rE,VV=sl,zV=Fs,WV=$e.buildLogLevels,qV=zt.DEFAULT_LOG_LEVEL,HV=Da,t_=Ve,GV=t_.MediaConnectionError,KV=t_.MediaDTLSTransportFailedError,QV=t_.SignalingConnectionDisconnectedError,YV=0,JV={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},XV=function(r){$V(t,r);function t(e,n,i,a){var o=this;a=Object.assign({logLevel:qV,RecordingSignaling:UV,Timeout:zV},a);var s=WV(a.logLevel);o=r.call(this,"connected",JV)||this;var l=a.RecordingSignaling,c=new a.Timeout(function(){o._disconnect(o._reconnectingError)},a.sessionTimeout,!1);return Object.defineProperties(o,{_instanceId:{value:YV++},_log:{value:a.log?a.log.createLog("default",o):new HV("default",o,s,a.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:a},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:c},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:i},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new l},sid:{enumerable:!0,value:n}}),o.on("connectionStateChanged",function(){o.connectionState==="failed"&&!["disconnected","failed"].includes(o.iceConnectionState)&&o._disconnect(new KV)}),o.on("iceConnectionStateChanged",function(){return ig(o)}),o.on("signalingConnectionStateChanged",function(){return ig(o)}),setTimeout(function(){return ig(o)}),o}return t.prototype._disconnect=function(e){return this.state!=="disconnected"?(this.preempt("disconnected",null,[e]),!0):!1},t.prototype.toString=function(){return"[RoomSignaling #"+this._instanceId+": "+(this.localParticipant?this.localParticipant.sid:"null")+"]"},t.prototype.connectParticipant=function(e){var n=this;return e.state==="disconnected"||this.participants.has(e.sid)?!1:(this.participants.set(e.sid,e),e.on("stateChanged",function i(a){a==="disconnected"&&(e.removeListener("stateChanged",i),n.participants.delete(e.sid),n.emit("participantDisconnected",e))}),this.emit("participantConnected",e),!0)},t.prototype.disconnect=function(){return this._disconnect()},t.prototype.setDominantSpeaker=function(e){this.dominantSpeakerSid=e,this.emit("dominantSpeakerChanged")},t}(VV);function ig(r){if(r.state==="disconnected"||r.signalingConnectionState==="disconnected"){r._sessionTimeout.clear();return}var t;r.signalingConnectionState==="reconnecting"?t=r.signalingConnectionState:r.iceConnectionState==="failed"?(r._mediaConnectionIsReconnecting=!0,t="reconnecting"):r.iceConnectionState==="new"||r.iceConnectionState==="checking"?t=r._mediaConnectionIsReconnecting?"reconnecting":"connected":(r._mediaConnectionIsReconnecting=!1,r._reconnectingError=null,r._sessionTimeout.clear(),t="connected"),t!==r.state&&(t==="reconnecting"?(r._reconnectingError=r.signalingConnectionState==="reconnecting"?new QV:new GV,r._sessionTimeout.start(),r.preempt(t,null,[r._reconnectingError])):r.preempt(t))}var nE=XV,ZV=function(){function r(t){var e=t.actual,n=e===void 0?null:e,i=t.available,a=i===void 0?null:i,o=t.level,s=o===void 0?null:o;Object.defineProperties(this,{actual:{value:n,enumerable:!0},available:{value:a,enumerable:!0},level:{value:s,enumerable:!0}})}return r}(),ez=ZV,tz=function(){function r(t){var e=t.fractionLost,n=e===void 0?null:e,i=t.level,a=i===void 0?null:i;Object.defineProperties(this,{fractionLost:{value:n,enumerable:!0},level:{value:a,enumerable:!0}})}return r}(),rz=tz,nz=function(){function r(t){var e=t.jitter,n=e===void 0?null:e,i=t.rtt,a=i===void 0?null:i,o=t.level,s=o===void 0?null:o;Object.defineProperties(this,{jitter:{value:n,enumerable:!0},rtt:{value:a,enumerable:!0},level:{value:s,enumerable:!0}})}return r}(),iz=nz,az=ez,oz=rz,sz=iz,cz=function(){function r(t){var e=t.bandwidth,n=e===void 0?null:e,i=t.fractionLost,a=i===void 0?null:i,o=t.latency,s=o===void 0?null:o;Object.defineProperties(this,{bandwidth:{value:n?new az(n):null,enumerable:!0},fractionLost:{value:a?new oz(a):null,enumerable:!0},latency:{value:s?new sz(s):null,enumerable:!0}})}return r}(),iE=cz,lz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),uz=iE,fz=function(r){lz(t,r);function t(e){return r.call(this,e)||this}return t}(uz),dz=fz,hz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pz=iE,vz=function(r){hz(t,r);function t(e){return r.call(this,e)||this}return t}(pz),mz=vz,gz=dz,yz=mz,_z=function(){function r(t){var e=t.send,n=t.recv,i=t.sendStats,a=i===void 0?null:i,o=t.recvStats,s=o===void 0?null:o;Object.defineProperties(this,{send:{value:e,enumerable:!0},recv:{value:n,enumerable:!0},sendStats:{value:a?new gz(a):null,enumerable:!0},recvStats:{value:s?new yz(s):null,enumerable:!0}})}return r}(),aE=_z,wz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),bz=aE,xz=function(r){wz(t,r);function t(e){return r.call(this,e)||this}return t}(bz),Sz=xz,kz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Pz=aE,Tz=function(r){kz(t,r);function t(e){return r.call(this,e)||this}return t}(Pz),Ez=Tz,Cz=Sz,Lz=Ez,Az=function(){function r(t){var e=t.level,n=t.audio,i=t.video;Object.defineProperties(this,{level:{value:e,enumerable:!0},audio:{value:n?new Cz(n):null,enumerable:!0},video:{value:i?new Lz(i):null,enumerable:!0}})}return r}(),Oz=Az,Nz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Rz=sl,jz=Oz,Iz={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},Mz=function(r){Nz(t,r);function t(){var e=r.call(this,"connecting",Iz)||this;return Object.defineProperties(e,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),e}return Object.defineProperty(t.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(e){return this.tracks.set(e.id||e.sid,e),this.emit("trackAdded",e),this},t.prototype.disconnect=function(){return this.state!=="disconnected"?(this.preempt("disconnected"),!0):!1},t.prototype.removeTrack=function(e){var n=this.tracks.get(e.id||e.sid);return this.tracks.delete(e.id||e.sid),n&&this.emit("trackRemoved",e),n||null},t.prototype.setNetworkQualityLevel=function(e,n){this._networkQualityLevel!==e&&(this._networkQualityLevel=e,this._networkQualityStats=n&&(n.audio||n.video)?new jz(n):null,this.emit("networkQualityLevelChanged"))},t.prototype.connect=function(e,n){return this.state==="connecting"||this.state==="reconnecting"?(this._sid||(this._sid=e),this._identity||(this._identity=n),this.preempt("connected"),!0):!1},t.prototype.reconnecting=function(){return this.state==="connecting"||this.state==="connected"?(this.preempt("reconnecting"),!0):!1},t}(Rz),r_=Mz,Dz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fz=r_,Bz=function(r){Dz(t,r);function t(e,n){var i=r.call(this)||this;return i.connect(e,n),i}return t}(Fz),$z=Bz,Uz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vz=yn.EventEmitter,zz=function(r){Uz(t,r);function t(e,n,i,a){var o=r.call(this)||this,s=null;return Object.defineProperties(o,{_error:{value:null,writable:!0},_isEnabled:{value:i,writable:!0},_priority:{value:a,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return s},set:function(l){s===null&&(s=l)}},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:e}}),o}return Object.defineProperty(t.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(e){return e=typeof e=="boolean"?e:!0,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this},t.prototype.setTrackTransceiver=function(e){return e=e||null,this.trackTransceiver!==e&&(this._trackTransceiver=e,this.emit("updated")),this},t.prototype.setSid=function(e){return this.sid===null&&(this._sid=e,this.emit("updated")),this},t}(Vz),oE=zz,Wz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qz=oE,Hz=function(r){Wz(t,r);function t(e,n,i,a,o,s){var l=r.call(this,n,i,a,o)||this;return Object.defineProperties(l,{_isSwitchedOff:{value:s,writable:!0}}),l.setSid(e),l}return Object.defineProperty(t.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),t.prototype.subscribeFailed=function(e){return this.error||(this._error=e,this.emit("updated")),this},t.prototype.setPriority=function(e){return this._priority!==e&&(this._priority=e,this.emit("updated")),this},t.prototype.setSwitchedOff=function(e){return this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit("updated")),this},t}(qz),Gz=Hz,Kz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Qz=Gz,Yz=function(r){Kz(t,r);function t(e,n){return r.call(this,e.sid,e.name,e.kind,e.enabled,e.priority,n)||this}return t.prototype.update=function(e){return this.enable(e.enabled),this.setPriority(e.priority),this},t}(Qz),Jz=Yz,Xz=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Zz=$z,eW=Jz,tW=function(r){Xz(t,r);function t(e,n,i,a,o,s){var l=r.call(this,e.sid,e.identity)||this;return s=Object.assign({RemoteTrackPublicationV2:eW},s),Object.defineProperties(l,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:s.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:n},updateSubscriberTrackPriority:{value:function(c,u){return i(c,u)}},updateTrackRenderHint:{value:function(c,u){return a(c,u)}},clearTrackHint:{value:function(c){return o(c)}},revision:{enumerable:!0,get:function(){return this._revision}}}),l.update(e)}return t.prototype._getOrCreateTrack=function(e){var n=this._RemoteTrackPublicationV2,i=this.tracks.get(e.sid);if(!i){var a=this._getInitialTrackSwitchOffState(e.sid);i=new n(e,a),this.addTrack(i)}return i},t.prototype.update=function(e){var n=this;if(this.revision!==null&&e.revision<=this.revision)return this;this._revision=e.revision;var i=new Set;switch(e.tracks.forEach(function(a){var o=n._getOrCreateTrack(a);o.update(a),i.add(o)}),this.tracks.forEach(function(a){i.has(a)||n.removeTrack(a)}),e.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity);break}return this},t}(Zz),rW=tW,nW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),iW=Bs,aW=function(r){nW(t,r);function t(e,n){var i=r.call(this,e,"track_priority",n)||this;return Object.defineProperties(i,{_enqueuedPriorityUpdates:{value:new Map}}),i.on("ready",function(a){Array.from(i._enqueuedPriorityUpdates.keys()).forEach(function(o){a.publish({type:"track_priority",track:o,subscribe:i._enqueuedPriorityUpdates.get(o)})})}),i}return t.prototype.sendTrackPriorityUpdate=function(e,n,i){if(n!=="subscribe")throw new Error("only subscribe priorities are supported, found: "+n);this._enqueuedPriorityUpdates.set(e,i),this._transport&&this._transport.publish({type:"track_priority",track:e,subscribe:i})},t}(iW),oW=aW,sW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cW=Bs,lW=function(r){sW(t,r);function t(e,n){var i=r.call(this,e,"track_switch_off",n)||this;return i.on("ready",function(a){a.on("message",function(o){switch(o.type){case"track_switch_off":i._setTrackSwitchOffUpdates(o.off||[],o.on||[]);break}})}),i}return t.prototype._setTrackSwitchOffUpdates=function(e,n){this.emit("updated",e,n)},t}(cW),uW=lW,fW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),dW=Bs,hW=Fs,pW=$e.isDeepEqual,U5=2e3,vW=1,mW=function(r){fW(t,r);function t(e,n){var i=r.call(this,e,"render_hints",n)||this;return Object.defineProperties(i,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new hW(function(){i._sendAllHints(),i._responseTimer.setDelay(i._responseTimer.delay*2)},U5,!1)}}),i.on("ready",function(a){a.on("message",function(o){switch(i._log.debug("Incoming: ",o),o.type){case"render_hints":i._processHintResults(o&&o.subscriber&&o.subscriber.hints||[]);break;default:i._log.warn("Unknown message type: ",o.type);break}}),i._sendAllHints()}),i}return t.prototype._sendAllHints=function(){var e=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(n){var i=e._trackSidsToRenderHints.get(n);i.renderDimensions&&(i.isDimensionDirty=!0),"enabled"in i&&(i.isEnabledDirty=!0)}),this._sendHints()},t.prototype._processHintResults=function(e){var n=this;this._responseTimer.clear(),this._responseTimer.setDelay(U5),e.forEach(function(i){i.result!=="OK"&&n._log.debug("Server error processing hint:",i)}),this._sendHints()},t.prototype._sendHints=function(){var e=this;if(!(!this._transport||this._responseTimer.isSet)){var n=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(a){var o=e._trackSidsToRenderHints.get(a);if(o.isEnabledDirty||o.isDimensionDirty){var s={track:a};o.isEnabledDirty&&(s.enabled=o.enabled,o.isEnabledDirty=!1),o.isDimensionDirty&&(s.render_dimensions=o.renderDimensions,o.isDimensionDirty=!1),n.push(s)}}),n.length>0){var i={type:"render_hints",subscriber:{id:vW++,hints:n}};this._log.debug("Outgoing: ",i),this._transport.publish(i),this._responseTimer.start()}}},t.prototype.setTrackHint=function(e,n){var i=this._trackSidsToRenderHints.get(e)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in n&&i.enabled!==n.enabled&&(i.enabled=!!n.enabled,i.isEnabledDirty=!0),n.renderDimensions&&!pW(n.renderDimensions,i.renderDimensions)&&(i.renderDimensions=n.renderDimensions,i.isDimensionDirty=!0),this._trackSidsToRenderHints.set(e,i),this._sendHints()},t.prototype.clearTrackHint=function(e){this._trackSidsToRenderHints.delete(e)},t}(dW),gW=mW,yW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_W=Bs,wW=1,bW=function(r){yW(t,r);function t(e,n){var i=r.call(this,e,"publisher_hints",n)||this;return i.on("ready",function(a){i._log.debug("publisher_hints transport ready:",a),a.on("message",function(o){switch(i._log.debug("Incoming: ",o),o.type){case"publisher_hints":o.publisher&&o.publisher.hints&&o.publisher.id&&i._processPublisherHints(o.publisher.hints,o.publisher.id);break;default:i._log.warn("Unknown message type: ",o.type);break}})}),i}return t.prototype.sendTrackReplaced=function(e){var n=e.trackSid;if(this._transport){var i={type:"client_reset",track:n,id:wW++};this._log.debug("Outgoing: ",i),this._transport.publish(i)}},t.prototype.sendHintResponse=function(e){var n=e.id,i=e.hints;if(this._transport){var a={type:"publisher_hints",id:n,hints:i};this._log.debug("Outgoing: ",a),this._transport.publish(a)}},t.prototype._processPublisherHints=function(e,n){try{this.emit("updated",e,n)}catch(i){this._log.error("error processing hints:",i)}},t}(_W),xW=bW,SW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sE=A&&A.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},kW=TU,PW=AU,TW=xV,EW=NV,CW=BV,LW=nE,AW=rW,OW=CT,NW=oW,RW=uW,jW=gW,IW=xW,$s=$e,MW=$s.constants.DEFAULT_SESSION_TIMEOUT_SEC,DW=$s.createBandwidthProfilePayload,FW=$s.defer,BW=$s.difference,ag=$s.filterObject,n_=$s.flatMap,V5=$s.oncePerTick,cp=oT,$W=Ve.createTwilioError,UW=1e4,VW=function(r){SW(t,r);function t(e,n,i,a,o){var s=this;n.options=Object.assign({session_timeout:MW},n.options),o=Object.assign({DominantSpeakerSignaling:kW,TranscriptionSignaling:PW,NetworkQualityMonitor:TW,NetworkQualitySignaling:EW,RecordingSignaling:CW,RemoteParticipantV2:AW,TrackPrioritySignaling:NW,TrackSwitchOffSignaling:RW,bandwidthProfile:null,sessionTimeout:n.options.session_timeout*1e3,statsPublishIntervalMs:UW},o),e.setBandwidthProfile(o.bandwidthProfile);var l=n.options,c=l.signaling_region,u=l.audio_processors,d=u===void 0?[]:u;e.setSignalingRegion(c),d.includes("krisp")&&d.push("rnnoise"),e.setAudioProcessors(d),a.setIceReconnectTimeout(o.sessionTimeout),s=r.call(this,e,n.sid,n.name,o)||this;var v=function(y){return s._getTrackReceiver(y)},p=s._log;return Object.defineProperties(s,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:o.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:e.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:e.networkQualityConfiguration},_peerConnectionManager:{value:a},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:o.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new o.DominantSpeakerSignaling(v,{log:p})},_transcriptionSignaling:{value:new o.TranscriptionSignaling(v,{log:p})},_networkQualitySignaling:{value:new o.NetworkQualitySignaling(v,e.networkQualityConfiguration,{log:p})},_renderHintsSignaling:{value:new jW(v,{log:p})},_publisherHintsSignaling:{value:new IW(v,{log:p})},_trackPrioritySignaling:{value:new o.TrackPrioritySignaling(v,{log:p})},_trackSwitchOffSignaling:{value:new o.TrackSwitchOffSignaling(v,{log:p})},_pendingSwitchOffStates:{value:new Map},_transport:{value:i},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:n.options.media_region||null}}),s._initTrackSwitchOffSignaling(),s._initDominantSpeakerSignaling(),s._initTranscriptionSignaling(),s._initNetworkQualityMonitorSignaling(),s._initPublisherHintSignaling(),zW(s,e),WW(s,a),qW(s,i),HW(s,i,o.statsPublishIntervalMs),s._update(n),s._peerConnectionManager.setEffectiveAdaptiveSimulcast(s._publisherHintsSignaling.isSetup),s}return Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signalingConnectionState",{get:function(){return this._transport.state==="syncing"?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),t.prototype._deleteTrackReceiverDeferred=function(e){return this._trackReceiverDeferreds.delete(e)},t.prototype._getOrCreateTrackReceiverDeferred=function(e){var n=this._trackReceiverDeferreds.get(e)||FW(),i=this._peerConnectionManager.getTrackReceivers(),a=i.find(function(o){return o.id===e&&o.readyState!=="ended"});return a?n.resolve(a):this._trackReceiverDeferreds.set(e,n),n},t.prototype._addTrackReceiver=function(e){var n=this._getOrCreateTrackReceiverDeferred(e.id);return n.resolve(e),this},t.prototype._disconnect=function(e){var n=r.prototype._disconnect.call(this,e);return n&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(i){i.publishFailed(e||new Error("LocalParticipant disconnected"))}),n},t.prototype._getTrackReceiver=function(e){var n=this;return this._getOrCreateTrackReceiverDeferred(e).promise.then(function(i){return n._deleteTrackReceiverDeferred(e),i})},t.prototype._getInitialTrackSwitchOffState=function(e){var n=this._pendingSwitchOffStates.get(e)||!1;return this._pendingSwitchOffStates.delete(e),n&&this._log.warn("["+e+"] was initially switched off! "),n},t.prototype._getTrackSidsToTrackSignalings=function(){var e=n_(this.participants,function(n){return Array.from(n.tracks)});return new Map(e)},t.prototype._getOrCreateRemoteParticipant=function(e){var n=this,i=this._RemoteParticipantV2,a=this.participants.get(e.sid),o=this;return a||(a=new i(e,function(s){return n._getInitialTrackSwitchOffState(s)},function(s,l){return n._trackPrioritySignaling.sendTrackPriorityUpdate(s,"subscribe",l)},function(s,l){return n._renderHintsSignaling.setTrackHint(s,l)},function(s){return n._renderHintsSignaling.clearTrackHint(s)}),a.on("stateChanged",function s(l){l==="disconnected"&&(a.removeListener("stateChanged",s),o.participants.delete(a.sid),o._disconnectedParticipantRevisions.set(a.sid,a.revision))}),this.connectParticipant(a)),a},t.prototype._getState=function(){return{participant:this.localParticipant.getState()}},t.prototype._maybeAddBandwidthProfile=function(e){var n=this.localParticipant,i=n.bandwidthProfile,a=n.bandwidthProfileRevision;return i&&this._lastBandwidthProfileRevision<a?(this._lastBandwidthProfileRevision=a,Object.assign({bandwidth_profile:DW(i)},e)):e},t.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},t.prototype._publishPeerConnectionState=function(e){this._transport.publish(Object.assign({peer_connections:[e]},this._getState()))},t.prototype._update=function(e){var n=this;if(e.subscribed&&e.subscribed.revision>this._subscribedRevision){this._subscribedRevision=e.subscribed.revision,e.subscribed.tracks.forEach(function(o){o.id?(n._subscriptionFailures.delete(o.sid),n._subscribed.set(o.sid,o.id)):o.error&&!n._subscriptionFailures.has(o.sid)&&n._subscriptionFailures.set(o.sid,o.error)});var i=new Set(e.subscribed.tracks.filter(function(o){return!!o.id}).map(function(o){return o.sid}));this._subscribed.forEach(function(o,s){i.has(s)||n._subscribed.delete(s)})}var a=new Set;return(e.participants||[]).forEach(function(o){if(o.sid!==n.localParticipant.sid){var s=n._disconnectedParticipantRevisions.get(o.sid);if(!(s&&o.revision<=s)){s&&n._disconnectedParticipantRevisions.delete(o.sid);var l=n._getOrCreateRemoteParticipant(o);l.update(o),a.add(l)}}}),e.type==="synced"&&this.participants.forEach(function(o){a.has(o)||o.disconnect()}),GW(this),e.peer_connections&&this._peerConnectionManager.update(e.peer_connections,e.type==="synced"),e.recording&&this.recording.update(e.recording),e.published&&e.published.revision>this._publishedRevision&&(this._publishedRevision=e.published.revision,e.published.tracks.forEach(function(o){o.sid&&n._published.set(o.id,o.sid)}),this.localParticipant.update(e.published)),e.participant&&this.localParticipant.connect(e.participant.sid,e.participant.identity),[this._dominantSpeakerSignaling,this._transcriptionSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(o){var s=o.channel;!o.isSetup&&e.media_signaling&&e.media_signaling[s]&&e.media_signaling[s].transport&&e.media_signaling[s].transport.type==="data-channel"&&o.setup(e.media_signaling[s].transport.label)}),e.type==="warning"&&e.states&&e.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=e.states.revision,this.localParticipant.updateMediaStates(e.states)),this},t.prototype._initPublisherHintSignaling=function(){var e=this;this._publisherHintsSignaling.on("updated",function(i,a){Promise.all(i.map(function(o){return e.localParticipant.setPublisherHint(o.track,o.encodings).then(function(s){return{track:o.track,result:s}})})).then(function(o){e._publisherHintsSignaling.sendHintResponse({id:a,hints:o})})});var n=function(i){i.kind==="video"&&i.trackTransceiver.on("replaced",function(){e._publisherHintsSignaling.sendTrackReplaced({trackSid:i.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(i){return n(i)}),this.localParticipant.on("trackAdded",function(i){return n(i)})},t.prototype._initTrackSwitchOffSignaling=function(){var e=this;this._trackSwitchOffSignaling.on("updated",function(n,i){try{e._log.debug("received trackSwitch: ",{tracksOn:i,tracksOff:n});var a=new Map;i.forEach(function(o){return a.set(o,!0)}),n.forEach(function(o){a.get(o)&&e._log.warn(o+" is DUPLICATED in both tracksOff and tracksOn list"),a.set(o,!1)}),e.participants.forEach(function(o){o.tracks.forEach(function(s){var l=a.get(s.sid);typeof l<"u"&&(s.setSwitchedOff(!l),a.delete(s.sid))})}),a.forEach(function(o,s){return e._pendingSwitchOffStates.set(s,!o)})}catch(o){e._log.error("error processing track switch off:",o)}})},t.prototype._initDominantSpeakerSignaling=function(){var e=this;this._dominantSpeakerSignaling.on("updated",function(){return e.setDominantSpeaker(e._dominantSpeakerSignaling.loudestParticipantSid)})},t.prototype._initTranscriptionSignaling=function(){var e=this;this._transcriptionSignaling.on("transcription",function(n){e.emit("transcription",n)})},t.prototype._initNetworkQualityMonitorSignaling=function(){var e=this;this._networkQualitySignaling.on("ready",function(){var n=new e._NetworkQualityMonitor(e._peerConnectionManager,e._networkQualitySignaling);e._networkQualityMonitor=n,n.on("updated",function(){e.iceConnectionState!=="failed"&&(e.localParticipant.setNetworkQualityLevel(n.level,n.levels),e.participants.forEach(function(i){var a=n.remoteLevels.get(i.sid);a&&i.setNetworkQualityLevel(a.level,a)}))}),n.start()}),this._networkQualitySignaling.on("teardown",function(){return e._teardownNetworkQualityMonitor()})},t.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},t.prototype.getStats=function(){var e=this;return this._peerConnectionManager.getStats().then(function(n){return new Map(Array.from(n).map(function(i){var a=sE(i,2),o=a[0],s=a[1];return[o,Object.assign({},s,{localAudioTrackStats:z5(e,s.localAudioTrackStats),localVideoTrackStats:z5(e,s.localVideoTrackStats),remoteAudioTrackStats:W5(e,s.remoteAudioTrackStats),remoteVideoTrackStats:W5(e,s.remoteVideoTrackStats)})]}))})},t}(LW);function cE(r,t){return t.reduce(function(e,n){var i=r.get(n.trackId);return i?[Object.assign({},n,{trackSid:i})].concat(e):e},[])}function z5(r,t){return cE(r._published,t)}function W5(r,t){var e=new Map(Array.from(r._subscribed.entries()).map(function(n){var i=sE(n,2),a=i[0],o=i[1];return[o,a]}));return cE(e,t)}function zW(r,t){var e=V5(function(){r._publishNewLocalParticipantState()}),n=V5(function(){var i=n_(t.tracks,function(a){return a.trackTransceiver});r._peerConnectionManager.setTrackSenders(i)});t.on("trackAdded",n),t.on("trackRemoved",n),t.on("updated",e),r.on("stateChanged",function i(a){a==="disconnected"&&(t.removeListener("trackAdded",n),t.removeListener("trackRemoved",n),t.removeListener("updated",e),r.removeListener("stateChanged",i),t.disconnect())}),r.on("signalingConnectionStateChanged",function(){var i=r.localParticipant,a=r.signalingConnectionState,o=i.identity,s=i.sid;switch(a){case"connected":i.connect(s,o);break;case"reconnecting":i.reconnecting();break}})}function WW(r,t){t.on("description",function(n){r._publishPeerConnectionState(n)}),t.dequeue("description"),t.on("candidates",function(n){r._publishPeerConnectionState(n)}),t.dequeue("candidates"),t.on("trackAdded",r._addTrackReceiver.bind(r)),t.dequeue("trackAdded"),t.getTrackReceivers().forEach(r._addTrackReceiver,r),t.on("connectionStateChanged",function(){r.emit("connectionStateChanged")}),t.on("iceConnectionStateChanged",function(){r.emit("iceConnectionStateChanged"),r.iceConnectionState==="failed"&&(r.localParticipant.networkQualityLevel!==null&&r.localParticipant.setNetworkQualityLevel(0),r.participants.forEach(function(e){e.networkQualityLevel!==null&&e.setNetworkQualityLevel(0)}))})}function qW(r,t){t.on("message",r._update.bind(r)),t.on("stateChanged",function e(n,i){n==="disconnected"&&(r.state!=="disconnected"&&r._disconnect(i),t.removeListener("stateChanged",e)),r.emit("signalingConnectionStateChanged")})}function HW(r,t,e){var n=new Map,i=!1,a=setInterval(function(){r.getStats().then(function(o){i=!i,o.forEach(function(s,l){var c=new OW(l,s,!0);t.publishEvent("quality","stats-report","info",{audioTrackStats:c.remoteAudioTrackStats.map(function(p,y){return H5(p,s.remoteAudioTrackStats[y],n)}),localAudioTrackStats:c.localAudioTrackStats.map(function(p,y){return q5(p,s.localAudioTrackStats[y],n)}),localVideoTrackStats:c.localVideoTrackStats.map(function(p,y){return q5(p,s.localVideoTrackStats[y],n)}),peerConnectionId:c.peerConnectionId,videoTrackStats:c.remoteVideoTrackStats.map(function(p,y){return H5(p,s.remoteVideoTrackStats[y],n)})});var u=n_(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(p){return c[p].map(function(y){var b=y.ssrc,S=y.trackSid;return S+"+"+b})}),d=BW(Array.from(n.keys()),u);if(d.forEach(function(p){return n.delete(p)}),i){var v=KW(s.activeIceCandidatePair,c.peerConnectionId);t.publishEvent("quality","active-ice-candidate-pair","info",v)}})},function(){})},e);r.on("stateChanged",function o(s){s==="disconnected"&&(clearInterval(a),r.removeListener("stateChanged",o))})}function GW(r){var t=r._getTrackSidsToTrackSignalings();r._subscriptionFailures.forEach(function(e,n){var i=t.get(n);i&&(r._subscriptionFailures.delete(n),i.subscribeFailed($W(e.code,e.message)))}),t.forEach(function(e){var n=r._subscribed.get(e.sid);(!n||e.isSubscribed&&e.trackTransceiver.id!==n)&&e.setTrackTransceiver(null),n&&r._getTrackReceiver(n).then(function(i){return e.setTrackTransceiver(i)})})}function q5(r,t,e){var n=t.framesEncoded,i=t.packetsSent,a=t.totalEncodeTime,o=t.totalPacketSendDelay,s=Object.assign({},r),l=r.trackSid+"+"+r.ssrc,c=e.get(l)||new Map;if(typeof a=="number"&&typeof n=="number"){var u=c.get("avgEncodeDelay")||new cp;u.putSample(a*1e3,n),s.avgEncodeDelay=Math.round(u.get()),c.set("avgEncodeDelay",u)}if(typeof o=="number"&&typeof i=="number"){var d=c.get("avgPacketSendDelay")||new cp;d.putSample(o*1e3,i),s.avgPacketSendDelay=Math.round(d.get()),c.set("avgPacketSendDelay",d)}return e.set(l,c),s}function H5(r,t,e){var n=t.estimatedPlayoutTimestamp,i=t.framesDecoded,a=t.jitterBufferDelay,o=t.jitterBufferEmittedCount,s=t.totalDecodeTime,l=Object.assign({},r),c=r.trackSid+"+"+r.ssrc,u=e.get(c)||new Map;if(typeof n=="number"&&(l.estimatedPlayoutTimestamp=n),typeof i=="number"&&typeof s=="number"){var d=u.get("avgDecodeDelay")||new cp;d.putSample(s*1e3,i),l.avgDecodeDelay=Math.round(d.get()),u.set("avgDecodeDelay",d)}if(typeof a=="number"&&typeof o=="number"){var v=u.get("avgJitterBufferDelay")||new cp;v.putSample(a*1e3,o),l.avgJitterBufferDelay=Math.round(v.get()),u.set("avgJitterBufferDelay",v)}return e.set(c,u),l}function KW(r,t){return r=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:t,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},ag(r||{},null)),r.localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},ag(r.localCandidate||{},null)),r.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},ag(r.remoteCandidate||{},null)),r}var QW=VW,YW=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),JW=sl,lE=nP,XW=AT,ZW=zt.reconnectBackoffConfig,eq=Fs,i_=zt,tq=i_.SDK_NAME,rq=i_.SDK_VERSION,nq=i_.SDP_FORMAT,ul=$e,iq=ul.createBandwidthProfilePayload,aq=ul.createMediaSignalingPayload,oq=ul.createMediaWarningsPayload,sq=ul.createSubscribePayload,cq=ul.getUserAgent,lq=ul.isNonArrayObject,Xp=Ve,uq=Xp.createTwilioError,og=Xp.RoomCompletedError,fq=Xp.SignalingConnectionError,dq=Xp.SignalingServerBusyError,hq=1,sg=2,pq={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},vq=function(r){YW(t,r);function t(e,n,i,a,o,s){var l=this;return s=Object.assign({Backoff:XW,TwilioConnection:lE,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:cq()},s),l=r.call(this,"connecting",pq)||this,Object.defineProperties(l,{_accessToken:{value:n},_adaptiveSimulcast:{value:s.adaptiveSimulcast},_automaticSubscription:{value:s.automaticSubscription},_bandwidthProfile:{value:s.bandwidthProfile},_dominantSpeaker:{value:s.dominantSpeaker},_receiveTranscriptions:{value:s.receiveTranscriptions},_eventObserver:{value:s.eventObserver,writable:!1},_renderHints:{value:s.renderHints},_iceServersStatus:{value:Array.isArray(s.iceServers)?"overrode":"acquire"},_localParticipant:{value:i},_name:{value:e},_networkQuality:{value:lq(s.networkQuality)||s.networkQuality},_notifyWarnings:{value:s.notifyWarnings},_options:{value:s},_peerConnectionManager:{value:a},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new s.Backoff(ZW)},_session:{value:null,writable:!0},_trackPriority:{value:s.trackPriority},_trackSwitchOff:{value:s.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:s.userAgent},_wsServer:{value:o}}),gq(l),l}return t.prototype._createConnectOrSyncOrDisconnectMessage=function(){if(this.state==="connected")return null;if(this.state==="disconnected")return{session:this._session,type:"disconnect",version:sg};var e={connecting:"connect",syncing:"sync"}[this.state],n={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:e,version:sg};return n.type==="connect"?(n.ice_servers=this._iceServersStatus,n.publisher={name:tq,sdk_version:rq,user_agent:this._userAgent},this._bandwidthProfile&&(n.bandwidth_profile=iq(this._bandwidthProfile)),this._notifyWarnings&&(n.participant.media_warnings=oq(this._notifyWarnings)),n.media_signaling=aq(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints,this._receiveTranscriptions),n.subscribe=sq(this._automaticSubscription),n.format=nq,n.token=this._accessToken):n.type==="sync"?(n.session=this._session,n.token=this._accessToken):n.type==="update"&&(n.session=this._session),n},t.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:hq}},t.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var e=this._createConnectOrSyncOrDisconnectMessage();e&&this._twilioConnection.sendMessage(e)},t.prototype.disconnect=function(e){return this.state!=="disconnected"?(this.preempt("disconnected",null,[e]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0):!1},t.prototype.publish=function(e){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:sg},e)),!0;case"connecting":case"syncing":return this._updatesToSend.push(e),!0;case"disconnected":default:return!1}},t.prototype.publishEvent=function(e,n,i,a){this._eventObserver.emit("event",{group:e,name:n,level:i,payload:a})},t.prototype.sync=function(){return this.state==="connected"?(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0):!1},t.prototype._setSession=function(e,n){this._session=e,this._sessionTimeoutMS=n*1e3},t.prototype._getReconnectTimer=function(){var e=this;return this._sessionTimeoutMS===0?null:(this._sessionTimer||(this._sessionTimer=new eq(function(){e._sessionTimer&&(e._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(n){e._reconnectBackoff.backoff(n)}))},t.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},t}(JW);function G5(r){return Array.from(r.reduce(function(t,e){var n=t.get(e.id)||e;return(!n.description&&e.description||n.description&&e.description&&e.description.revision>n.description.revision)&&(n.description=e.description),(!n.ice&&e.ice||n.ice&&e.ice&&e.ice.revision>n.ice.revision)&&(n.ice=e.ice),t.set(n.id,n),t},new Map).values())}function mq(r){return r.reduce(function(t,e){return(!t.participant&&e.participant||t.participant&&e.participant&&e.participant.revision>t.participant.revision)&&(t.participant=e.participant),!t.peer_connections&&e.peer_connections?t.peer_connections=G5(e.peer_connections):t.peer_connections&&e.peer_connections&&(t.peer_connections=G5(t.peer_connections.concat(e.peer_connections))),t},{})}function gq(r){function t(){if(r.state!=="disconnected"){r._twilioConnection&&r._twilioConnection.removeListener("message",n);var l=r._iceServersStatus,c=r._options,u=r._wsServer,d=r.state,v=c.TwilioConnection,p=new v(u,Object.assign({helloBody:d==="connecting"&&l==="acquire"?r._createIceMessage():r._createConnectOrSyncOrDisconnectMessage()},c));p.once("close",function(y){y===v.CloseReason.LOCAL?e():e(new Error(y))}),p.on("message",n),r._twilioConnection=p}}function e(l){if(r.state!=="disconnected"){if(!l){r.disconnect();return}var c=r._getReconnectTimer();if(!c){var u=l.message===lE.CloseReason.BUSY?new dq:new fq;r.disconnect(u);return}r.state==="connected"&&r.preempt("syncing"),c.then(t)}}function n(l){if(r.state!=="disconnected"){if(l.type==="error"){r.disconnect(uq(l.code,l.message));return}switch(r.state){case"connected":switch(l.type){case"connected":case"synced":case"update":case"warning":r.emit("message",l);return;case"disconnected":r.disconnect(l.status==="completed"?new og:null);return;default:return}case"connecting":switch(l.type){case"iced":r._options.onIced(l.ice_servers).then(function(){r._sendConnectOrSyncOrDisconnectMessage()});return;case"connected":r._setSession(l.session,l.options.session_timeout),r.emit("connected",l),r.preempt("connected");return;case"synced":case"update":r._updatesReceived.push(l);return;case"disconnected":r.disconnect(l.status==="completed"?new og:null);return;default:return}case"syncing":switch(l.type){case"connected":case"update":r._updatesReceived.push(l);return;case"synced":r._clearReconnectTimer(),r.emit("message",l),r.preempt("connected");return;case"disconnected":r.disconnect(l.status==="completed"?new og:null);return;default:return}default:return}}}r.on("stateChanged",function l(c){switch(c){case"connected":{var u=r._updatesToSend.splice(0);u.length&&r.publish(mq(u)),r._updatesReceived.splice(0).forEach(function(d){return r.emit("message",d)});return}case"disconnected":r._twilioConnection.removeListener("message",n),r.removeListener("stateChanged",l);return;case"syncing":return;default:return}});var i=r._options,a=r._iceServersStatus,o=i.iceServers,s=i.onIced;a==="overrode"?s(o).then(t):t()}var yq=vq,_q=W1,wq=yU,bq=QW,xq=yq,uE=Ve,Sq=uE.SignalingConnectionDisconnectedError,kq=uE.SignalingIncomingMessageInvalidError,fE=$e,Pq=fE.flatMap,Tq=fE.createRoomConnectEventPayload;function Eq(r,t,e,n,i,a){a=Object.assign({PeerConnectionManager:wq,RoomV2:bq,Transport:xq},a);var o=i.video[0]&&i.video[0].adaptiveSimulcast===!0,s=a.PeerConnectionManager,l=a.RoomV2,c=a.Transport,u=a.iceServers,d=a.log,v=new s(n,i,a),p=Pq(e.tracks,function(_){return[_.trackTransceiver]});v.setTrackSenders(p);var y=new Error("Canceled"),b,S=new _q(function(_,x,k){var T=function(G){return k()?(x(y),Promise.reject(y)):(d.debug("Got ICE servers:",G),a.iceServers=G,v.setConfiguration(a),v.createAndOffer().then(function(){if(k())throw x(y),y;d.debug("createAndOffer() succeeded."),v.dequeue("description")}).catch(function(ee){throw d.error("createAndOffer() failed:",ee),x(ee),ee}))},R=a.automaticSubscription,B=a.bandwidthProfile,j=a.dominantSpeaker,F=a.receiveTranscriptions,M=a.environment,q=a.eventObserver,O=a.loggerName,L=a.logLevel,z=a.name,I=a.networkMonitor,X=a.networkQuality,Z=a.notifyWarnings,oe=a.realm,H=a.sdpSemantics,re=!!B,ue=!!B,ne=!!B&&(a.clientTrackSwitchOffControl!=="disabled"||a.contentPreferencesMode!=="disabled"),N=Object.assign({adaptiveSimulcast:o,automaticSubscription:R,dominantSpeaker:j,receiveTranscriptions:F,environment:M,eventObserver:q,loggerName:O,logLevel:L,networkMonitor:I,networkQuality:X,notifyWarnings:Z,iceServers:u,onIced:T,realm:oe,renderHints:ne,sdpSemantics:H,trackPriority:re,trackSwitchOff:ue},B?{bandwidthProfile:B}:{});b=new c(z,r,e,v,t,N);var U=Tq(a);q.emit("event",U),b.once("connected",function(G){if(d.debug("Transport connected:",G),k()){x(y);return}var ee=G.participant;if(!ee){x(new kq);return}_(new l(e,G,b,v,a))}),b.once("stateChanged",function(G,ee){G==="disconnected"?(b=null,x(ee||new Sq)):d.debug("Transport state changed:",G)})},function(){b&&(b.disconnect(),b=null)});return S.catch(function(){b&&(b.disconnect(),b=null),v.close()}),S}var Cq=Eq,Lq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Aq=r_,Oq=function(r){Lq(t,r);function t(){var e=r.call(this)||this;return Object.defineProperties(e,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),e}return t.prototype.addTrack=function(e,n,i,a){a===void 0&&(a=null);var o=this._createLocalTrackPublicationSignaling(e,n,i,a);return this._trackSendersToPublications.set(e,o),this._publicationsToTrackSenders.set(o,e),r.prototype.addTrack.call(this,o),this},t.prototype.getPublication=function(e){return this._trackSendersToPublications.get(e)||null},t.prototype.getSender=function(e){return this._publicationsToTrackSenders.get(e)||null},t.prototype.removeTrack=function(e){var n=this._trackSendersToPublications.get(e);if(!n)return null;this._trackSendersToPublications.delete(e),this._publicationsToTrackSenders.delete(n);var i=r.prototype.removeTrack.call(this,n);return i&&n.stop(),n},t}(Aq),Nq=Oq,Rq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jq=oE,Iq=function(r){Rq(t,r);function t(e,n,i){var a=this,o=e.clone();e.kind!=="data"&&(o.track.enabled=e.track.enabled),e=o;var s=e.kind==="data"?!0:e.track.enabled;return a=r.call(this,n,e.kind,s,i)||this,a.setTrackTransceiver(e),Object.defineProperties(a,{_updatedPriority:{value:i,writable:!0},id:{enumerable:!0,value:e.id}}),a}return Object.defineProperty(t.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),t.prototype.enable=function(e){return e=typeof e=="boolean"?e:!0,this.trackTransceiver.track.enabled=e,r.prototype.enable.call(this,e)},t.prototype.publishFailed=function(e){return Mq(this,e)&&this.emit("updated"),this},t.prototype.setPriority=function(e){return this._updatedPriority!==e&&(this._updatedPriority=e,this.emit("updated")),this},t.prototype.setSid=function(e){return this._error?this:r.prototype.setSid.call(this,e)},t.prototype.stop=function(){this.trackTransceiver.stop()},t}(jq);function Mq(r,t){return r._sid!==null||r._error?!1:(r._error=t,!0)}var Dq=Iq,Fq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bq=Dq,$q=G4,Uq=Ve.createTwilioError,Vq=function(r){Fq(t,r);function t(e,n,i,a,o){var s=r.call(this,e,n,i)||this;return Object.defineProperties(s,{_log:{value:o.log.createLog("default",s)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:a}}),s}return t.prototype.getState=function(){var e={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(e.audio_processor=this._noiseCancellationVendor),e},t.prototype.toString=function(){return"[LocalTrackPublicationV2: "+this.sid+"]"},t.prototype.update=function(e){switch(e.state){case"ready":this.setSid(e.sid);break;case"failed":{var n=e.error;this.publishFailed(Uq(n.code,n.message));break}}return this},t.prototype.updateMediaStates=function(e){if(!e||!e.recordings||this._mediaStates.recordings===e.recordings)return this;switch(this._mediaStates.recordings=e.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",$q.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: "+this._mediaStates.recordings);break}return this},t}(Bq),zq=Vq,Wq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qq=Nq,Hq=zq,Gq=zt.DEFAULT_LOG_LEVEL,Kq=Da,dE=$e,Qq=dE.buildLogLevels,Yq=dE.isDeepEqual,Jq=function(r){Wq(t,r);function t(e,n,i){var a=this;i=Object.assign({logLevel:Gq,LocalTrackPublicationV2:Hq},i),a=r.call(this)||this;var o=Qq(i.logLevel);return Object.defineProperties(a,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:e},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:i.LocalTrackPublicationV2},_log:{value:i.log?i.log.createLog("default",a):new Kq("default",a,o,i.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:n},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),a}return t.prototype.toString=function(){return"[LocalParticipantSignaling: "+this.sid+"]"},t.prototype.setSignalingRegion=function(e){this._signalingRegion||(this._signalingRegion=e)},t.prototype.setBandwidthProfile=function(e){Yq(this._bandwidthProfile,e)||(this._bandwidthProfile=JSON.parse(JSON.stringify(e)),this._bandwidthProfileRevision++,this.didUpdate())},t.prototype.setAudioProcessors=function(e){this.audioProcessors=e},t.prototype.getParameters=function(){return this._encodingParameters},t.prototype.setParameters=function(e){return this._encodingParameters.update(e),this},t.prototype.update=function(e){return this._publishedRevision>=e.revision?this:(this._publishedRevision=e.revision,e.tracks.forEach(function(n){var i=this.tracks.get(n.id);i&&i.update(n)},this),this)},t.prototype.updateMediaStates=function(e){return!e||!e.tracks?this:(Array.from(this.tracks.values()).forEach(function(n){var i=e.tracks[n.sid];i&&n.updateMediaStates(i)}),this)},t.prototype._createLocalTrackPublicationSignaling=function(e,n,i,a){return new this._LocalTrackPublicationV2(e,n,i,a,{log:this._log})},t.prototype.addTrack=function(e,n,i,a){var o=this;r.prototype.addTrack.call(this,e,n,i,a);var s=this.getPublication(e),l=s.isEnabled,c=s.updatedPriority,u=function(){(l!==s.isEnabled||c!==s.updatedPriority)&&(o.didUpdate(),l=s.isEnabled,c=s.updatedPriority)};return s.on("updated",u),this._removeListener(s),this._removeListeners.set(s,function(){return s.removeListener("updated",u)}),this.didUpdate(),this},t.prototype._removeListener=function(e){var n=this._removeListeners.get(e);n&&n()},t.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(e){return e.getState()})}},t.prototype.didUpdate=function(){this._revision++,this.emit("updated")},t.prototype.removeTrack=function(e){var n=r.prototype.removeTrack.call(this,e);return n&&(e.removeClone(n.trackTransceiver),this._removeListener(n),this.didUpdate()),n},t.prototype.setNetworkQualityConfiguration=function(e){this.networkQualityConfiguration.update(e)},t.prototype.setPublisherHint=function(e,n){var i=Array.from(this.tracks.values()).find(function(a){return a.sid===e});return i?i.trackTransceiver.setPublisherHint(n):(this._log.warn("track:"+e+" not found"),Promise.resolve("UNKNOWN_TRACK"))},t}(qq),Xq=Jq,Zq=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),eH=r_,tH=nE,rH=sl,nH={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},iH=function(r){Zq(t,r);function t(){return r.call(this,"closed",nH)||this}return t.prototype._close=function(e){return this.transition("closing",e),this.transition("closed",e),Promise.resolve(this)},t.prototype._connect=function(e,n,i,a,o){e.connect("PA00000000000000000000000000000000","test");var s="RM00000000000000000000000000000000",l=Promise.resolve(new tH(e,s,o));return l.cancel=function(){},l},t.prototype._open=function(e){return this.transition("opening",e),this.transition("open",e),Promise.resolve(this)},t.prototype.close=function(){var e=this;return this.bracket("close",function(n){switch(e.state){case"closed":return e;case"open":return e._close(n);default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},t.prototype.connect=function(e,n,i,a,o){var s=this;return this.bracket("connect",function l(c){switch(s.state){case"closed":return s._open(c).then(l.bind(null,c));case"open":return s.releaseLockCompletely(c),s._connect(e,n,i,a,o);default:throw new Error('Unexpected Signaling state "'+s.state+'"')}})},t.prototype.createLocalParticipantSignaling=function(){return new eH},t.prototype.open=function(){var e=this;return this.bracket("open",function(n){switch(e.state){case"closed":return e._open(n);case"open":return e;default:throw new Error('Unexpected Signaling state "'+e.state+'"')}})},t}(rH),aH=iH,oH=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sH=Cq,cH=Xq,lH=aH,uH=function(r){oH(t,r);function t(e,n){var i=this;return n=Object.assign({createCancelableRoomSignalingPromise:sH},n),i=r.call(this)||this,Object.defineProperties(i,{_createCancelableRoomSignalingPromise:{value:n.createCancelableRoomSignalingPromise},_options:{value:n},_wsServer:{value:e}}),i}return t.prototype._connect=function(e,n,i,a,o){return o=Object.assign({},this._options,o),this._createCancelableRoomSignalingPromise.bind(null,n,this._wsServer,e,i,a,o)},t.prototype.createLocalParticipantSignaling=function(e,n){return new cH(e,n)},t}(lH),fH=uH,dH=Ms.MediaStreamTrack,a_=Dt,hH=a_.guessBrowser,pH=a_.guessBrowserVersion,vH=a_.isCodecSupported,mH=QM,gH=ZM,yH=tB,_H=lT,wH=nB,o_=Bc,bH=o_.LocalAudioTrack,xH=o_.LocalDataTrack,SH=o_.LocalVideoTrack,kH=cB,PH=e9,TH=fH,Zp=$e,EH=Zp.asLocalTrack,CH=Zp.buildLogLevels,LH=Zp.filterObject,K5=Zp.isNonArrayObject,Fa=zt,AH=Fa.DEFAULT_ENVIRONMENT,OH=Fa.DEFAULT_LOG_LEVEL,NH=Fa.DEFAULT_LOGGER_NAME,RH=Fa.DEFAULT_REALM,jH=Fa.DEFAULT_REGION,IH=Fa.WS_SERVER,MH=Fa.SDK_NAME,DH=Fa.SDK_VERSION,Md=Fa.typeErrors,cs=W1,FH=sT,BH=Da,$H=df.validateBandwidthProfile,cg=hH()==="safari"&&pH(),UH=0,Q5=!1,hE=!1;if(cg){var Y5=cg.major,VH=cg.minor;hE=Y5<12||Y5===12&&VH<1}var zH=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),WH=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function qH(r,t){if(typeof t>"u"&&(t={}),!K5(t))return cs.reject(Md.INVALID_TYPE("options","object"));var e=t.Log||BH,n=t.loggerName||NH,i=t.logLevel||OH,a=CH(i),o="[connect #"+ ++UH+"]",s;try{s=new e("default",o,a,n)}catch(B){return cs.reject(B)}J5(t,s,zH);var l=t.preferredVideoCodecs==="auto";if(l&&(t.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),t.maxVideoBitrate&&l)return s.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),cs.reject(Md.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));t=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,receiveTranscriptions:!1,environment:AH,eventListener:null,insights:!0,LocalAudioTrack:bH,LocalDataTrack:xH,LocalParticipant:yH,LocalVideoTrack:SH,Log:e,MediaStreamTrack:dH,loggerName:n,logLevel:i,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:RH,region:jH,signaling:TH},LH(t));var c={};typeof t.wsServerInsights=="string"&&(c.gateway=t.wsServerInsights);var u=t.insights?_H:wH,d=new u(r,MH,DH,t.environment,t.realm,c),v=IH(t.environment,t.region),p=new FH(d,Date.now(),s,t.eventListener);if(t=Object.assign({eventObserver:p,wsServer:v},t),t.log=s,hE&&!Q5&&s.logLevel!=="error"&&s.logLevel!=="off"&&(Q5=!0,s.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),typeof r!="string")return cs.reject(Md.INVALID_TYPE("token","string"));var y=Object.assign({},t);if(delete y.name,"tracks"in t){if(!Array.isArray(t.tracks))return cs.reject(Md.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{t.tracks=t.tracks.map(function(B){return EH(B,y)})}catch(B){return cs.reject(B)}}var b=$H(t.bandwidthProfile);if(b)return cs.reject(b);t.clientTrackSwitchOffControl="disabled",t.contentPreferencesMode="disabled",t.bandwidthProfile&&(t.clientTrackSwitchOffControl="auto",t.contentPreferencesMode="auto",t.bandwidthProfile.video&&(J5(t.bandwidthProfile.video,s,WH),"maxTracks"in t.bandwidthProfile.video?t.clientTrackSwitchOffControl="disabled":t.bandwidthProfile.video.clientTrackSwitchOffControl==="manual"?t.clientTrackSwitchOffControl="manual":t.clientTrackSwitchOffControl="auto","renderDimensions"in t.bandwidthProfile.video?t.contentPreferencesMode="disabled":t.bandwidthProfile.video.contentPreferencesMode==="manual"?t.contentPreferencesMode="manual":t.contentPreferencesMode="auto"));var S=t.signaling,_=new S(t.wsServer,t);s.info("Connecting to a Room"),s.debug("Options:",t);var x=new gH({maxAudioBitrate:t.maxAudioBitrate,maxVideoBitrate:t.maxVideoBitrate},l),k={audio:t.preferredAudioCodecs.map(X5),video:t.preferredVideoCodecs.map(X5)},T=new kH(K5(t.networkQuality)?t.networkQuality:{});["audio","video"].forEach(function(B){return k[B].forEach(function(j){var F=j.codec;return vH(F,B).then(function(M){return!M&&s.warn("The preferred "+B+' codec "'+F+'" will be ignored as it is not supported by the browser.')})})});var R=mH(QH.bind(null,t),HH.bind(null,_,s,x,T,t),KH.bind(null,r,t,_,x,k),GH.bind(null,t));return R.then(function(B){return d.connect(B.sid,B.localParticipant.sid),s.info("Connected to Room:",B.toString()),s.info("Room name:",B.name),s.debug("Room:",B),B.once("disconnected",function(){return d.disconnect()}),B},function(B){d.disconnect(),R._isCanceled?s.info("Attempt to connect to a Room was canceled"):s.info("Error while connecting to a Room:",B)}),R}function J5(r,t,e){e.forEach(function(n){var i=n.didWarn,a=n.name,o=n.newName,s=n.shouldDelete;a in r&&typeof r[a]<"u"&&(o&&s&&(r[o]=r[a]),s&&delete r[a],!i&&!["error","off"].includes(t.level)&&(t.warn('The ConnectOptions "'+a+'" is '+(o?'deprecated and scheduled for removal. Please use "'+o+'" instead.':"no longer applicable and will be ignored.")),n.didWarn=!0))})}function HH(r,t,e,n,i,a){var o=r.createLocalParticipantSignaling(e,n);return t.debug("Creating a new LocalParticipant:",o),new i.LocalParticipant(o,a,i)}function GH(r,t,e){var n=new PH(t,e,r),i=r.log;return i.debug("Creating a new Room:",n),e.on("stateChanged",function a(o){o==="disconnected"&&(i.info("Disconnected from Room:",n.toString()),e.removeListener("stateChanged",a))}),n}function KH(r,t,e,n,i,a){return t.log.debug("Creating a new RoomSignaling"),e.connect(a._signaling,r,n,i,t)}function QH(r,t){var e=r.log;return r.shouldStopLocalTracks=!r.tracks,r.shouldStopLocalTracks?e.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(e.info("Getting LocalTracks"),e.debug("Options:",r)),r.createLocalTracks(r).then(function(i){var a=t(i);return a.catch(function(){r.shouldStopLocalTracks&&(e.info("The automatically acquired LocalTracks will now be stopped"),i.forEach(function(s){s.stop()}))}),a})}function X5(r){var t=typeof r=="string"?{codec:r}:r;switch(t.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},t);case"vp8":return Object.assign({simulcast:!1},t);default:return t}}var YH=qH,pE=zt,JH=pE.DEFAULT_LOG_LEVEL,XH=pE.DEFAULT_LOGGER_NAME;function vE(r,t){t=Object.assign({loggerName:XH,logLevel:JH},t);var e={};e.loggerName=t.loggerName,e.logLevel=t.logLevel,delete t.loggerName,delete t.logLevel;var n=["getUserMedia","enumerateDevices","MediaStream","mapMediaElement","disposeMediaElement"];n.forEach(function(a){a in t&&(e[a]=t[a],delete t[a])});var i=t.createLocalTracks;return delete t.createLocalTracks,e[r]=Object.keys(t).length>0?t:!0,i(e).then(function(a){return a[0]})}function ZH(r){return vE("audio",r)}function eG(r){return vE("video",r)}var Z5={audio:ZH,video:eG},mE=Dt,tG=mE.guessBrowser,rG=mE.support,nG=On.getSdpFormat,vf=Ds,iG=vf.isAndroid,aG=vf.isMobile,oG=vf.isNonChromiumEdge,sG=vf.rebrandedChromeBrowser,cG=vf.mobileWebKitBrowser,lG=["crios","edg","edge","electron","headlesschrome"],uG=["chrome","firefox"],fG=["chrome","safari"],dG=[];function hG(){var r=tG();if(!r)return!1;var t=sG(r),e=cG(r),n=iG()?uG:fG;return!!r&&rG()&&nG()==="unified"&&(!t||lG.includes(t))&&!oG(r)&&(!e||dG.includes(e))&&(!aG()||n.includes(r))}var pG=hG,vG=S1.exports,ef=A&&A.__assign||function(){return ef=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ef.apply(this,arguments)};Object.defineProperty(vG,"__esModule",{value:!0});var ev=Ip,mG=Zc,Ba={connect:YH,createLocalAudioTrack:Z5.audio,createLocalVideoTrack:Z5.video,isSupported:pG(),version:D4.version,Logger:M4,LocalAudioTrack:Bc.LocalAudioTrack,LocalDataTrack:Bc.LocalDataTrack,LocalVideoTrack:Bc.LocalVideoTrack};function gG(r,t){var e=ef({createLocalTracks:ev.createLocalTracks},t);return Ba.connect(r,e)}function yG(r){var t=ef({createLocalTracks:ev.createLocalTracks},r);return Ba.createLocalAudioTrack(t)}function _G(r){var t=ef({createLocalTracks:ev.createLocalTracks},r);return Ba.createLocalVideoTrack(t)}var wG=Ba.isSupported,bG=Ba.version,xG=Ba.Logger,SG=Ba.LocalAudioTrack,kG=Ba.LocalVideoTrack,PG=Ba.LocalDataTrack;S1.exports={connect:gG,createLocalAudioTrack:yG,createLocalVideoTrack:_G,createLocalTracks:ev.createLocalTracks,runPreflight:mG.runPreflight,isSupported:wG,version:bG,Logger:xG,LocalAudioTrack:SG,LocalVideoTrack:kG,LocalDataTrack:PG};var TG=S1.exports;const EG=nS(TG);function gE(r,t){return function(){return r.apply(t,arguments)}}const{toString:CG}=Object.prototype,{getPrototypeOf:s_}=Object,{iterator:tv,toStringTag:yE}=Symbol,rv=(r=>t=>{const e=CG.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Ri=r=>(r=r.toLowerCase(),t=>rv(t)===r),nv=r=>t=>typeof t===r,{isArray:fl}=Array,rl=nv("undefined");function mf(r){return r!==null&&!rl(r)&&r.constructor!==null&&!rl(r.constructor)&&Ln(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const _E=Ri("ArrayBuffer");function LG(r){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(r):t=r&&r.buffer&&_E(r.buffer),t}const AG=nv("string"),Ln=nv("function"),wE=nv("number"),gf=r=>r!==null&&typeof r=="object",OG=r=>r===!0||r===!1,_h=r=>{if(rv(r)!=="object")return!1;const t=s_(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(yE in r)&&!(tv in r)},NG=r=>{if(!gf(r)||mf(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},RG=Ri("Date"),jG=Ri("File"),IG=Ri("Blob"),MG=Ri("FileList"),DG=r=>gf(r)&&Ln(r.pipe),FG=r=>{let t;return r&&(typeof FormData=="function"&&r instanceof FormData||Ln(r.append)&&((t=rv(r))==="formdata"||t==="object"&&Ln(r.toString)&&r.toString()==="[object FormData]"))},BG=Ri("URLSearchParams"),[$G,UG,VG,zG]=["ReadableStream","Request","Response","Headers"].map(Ri),WG=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yf(r,t,{allOwnKeys:e=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),fl(r))for(n=0,i=r.length;n<i;n++)t.call(null,r[n],n,r);else{if(mf(r))return;const a=e?Object.getOwnPropertyNames(r):Object.keys(r),o=a.length;let s;for(n=0;n<o;n++)s=a[n],t.call(null,r[s],s,r)}}function bE(r,t){if(mf(r))return null;t=t.toLowerCase();const e=Object.keys(r);let n=e.length,i;for(;n-- >0;)if(i=e[n],t===i.toLowerCase())return i;return null}const ys=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xE=r=>!rl(r)&&r!==ys;function ny(){const{caseless:r,skipUndefined:t}=xE(this)&&this||{},e={},n=(i,a)=>{const o=r&&bE(e,a)||a;_h(e[o])&&_h(i)?e[o]=ny(e[o],i):_h(i)?e[o]=ny({},i):fl(i)?e[o]=i.slice():(!t||!rl(i))&&(e[o]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&yf(arguments[i],n);return e}const qG=(r,t,e,{allOwnKeys:n}={})=>(yf(t,(i,a)=>{e&&Ln(i)?r[a]=gE(i,e):r[a]=i},{allOwnKeys:n}),r),HG=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),GG=(r,t,e,n)=>{r.prototype=Object.create(t.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:t.prototype}),e&&Object.assign(r.prototype,e)},KG=(r,t,e,n)=>{let i,a,o;const s={};if(t=t||{},r==null)return t;do{for(i=Object.getOwnPropertyNames(r),a=i.length;a-- >0;)o=i[a],(!n||n(o,r,t))&&!s[o]&&(t[o]=r[o],s[o]=!0);r=e!==!1&&s_(r)}while(r&&(!e||e(r,t))&&r!==Object.prototype);return t},QG=(r,t,e)=>{r=String(r),(e===void 0||e>r.length)&&(e=r.length),e-=t.length;const n=r.indexOf(t,e);return n!==-1&&n===e},YG=r=>{if(!r)return null;if(fl(r))return r;let t=r.length;if(!wE(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=r[t];return e},JG=(r=>t=>r&&t instanceof r)(typeof Uint8Array<"u"&&s_(Uint8Array)),XG=(r,t)=>{const n=(r&&r[tv]).call(r);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(r,a[0],a[1])}},ZG=(r,t)=>{let e;const n=[];for(;(e=r.exec(t))!==null;)n.push(e);return n},eK=Ri("HTMLFormElement"),tK=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,i){return n.toUpperCase()+i}),eb=(({hasOwnProperty:r})=>(t,e)=>r.call(t,e))(Object.prototype),rK=Ri("RegExp"),SE=(r,t)=>{const e=Object.getOwnPropertyDescriptors(r),n={};yf(e,(i,a)=>{let o;(o=t(i,a,r))!==!1&&(n[a]=o||i)}),Object.defineProperties(r,n)},nK=r=>{SE(r,(t,e)=>{if(Ln(r)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=r[e];if(Ln(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},iK=(r,t)=>{const e={},n=i=>{i.forEach(a=>{e[a]=!0})};return fl(r)?n(r):n(String(r).split(t)),e},aK=()=>{},oK=(r,t)=>r!=null&&Number.isFinite(r=+r)?r:t;function sK(r){return!!(r&&Ln(r.append)&&r[yE]==="FormData"&&r[tv])}const cK=r=>{const t=new Array(10),e=(n,i)=>{if(gf(n)){if(t.indexOf(n)>=0)return;if(mf(n))return n;if(!("toJSON"in n)){t[i]=n;const a=fl(n)?[]:{};return yf(n,(o,s)=>{const l=e(o,i+1);!rl(l)&&(a[s]=l)}),t[i]=void 0,a}}return n};return e(r,0)},lK=Ri("AsyncFunction"),uK=r=>r&&(gf(r)||Ln(r))&&Ln(r.then)&&Ln(r.catch),kE=((r,t)=>r?setImmediate:t?((e,n)=>(ys.addEventListener("message",({source:i,data:a})=>{i===ys&&a===e&&n.length&&n.shift()()},!1),i=>{n.push(i),ys.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ln(ys.postMessage)),fK=typeof queueMicrotask<"u"?queueMicrotask.bind(ys):typeof process<"u"&&process.nextTick||kE,dK=r=>r!=null&&Ln(r[tv]),me={isArray:fl,isArrayBuffer:_E,isBuffer:mf,isFormData:FG,isArrayBufferView:LG,isString:AG,isNumber:wE,isBoolean:OG,isObject:gf,isPlainObject:_h,isEmptyObject:NG,isReadableStream:$G,isRequest:UG,isResponse:VG,isHeaders:zG,isUndefined:rl,isDate:RG,isFile:jG,isBlob:IG,isRegExp:rK,isFunction:Ln,isStream:DG,isURLSearchParams:BG,isTypedArray:JG,isFileList:MG,forEach:yf,merge:ny,extend:qG,trim:WG,stripBOM:HG,inherits:GG,toFlatObject:KG,kindOf:rv,kindOfTest:Ri,endsWith:QG,toArray:YG,forEachEntry:XG,matchAll:ZG,isHTMLForm:eK,hasOwnProperty:eb,hasOwnProp:eb,reduceDescriptors:SE,freezeMethods:nK,toObjectSet:iK,toCamelCase:tK,noop:aK,toFiniteNumber:oK,findKey:bE,global:ys,isContextDefined:xE,isSpecCompliantForm:sK,toJSONObject:cK,isAsyncFn:lK,isThenable:uK,setImmediate:kE,asap:fK,isIterable:dK};function wt(r,t,e,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}me.inherits(wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}});const PE=wt.prototype,TE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{TE[r]={value:r}});Object.defineProperties(wt,TE);Object.defineProperty(PE,"isAxiosError",{value:!0});wt.from=(r,t,e,n,i,a)=>{const o=Object.create(PE);me.toFlatObject(r,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const s=r&&r.message?r.message:"Error",l=t==null&&r?r.code:t;return wt.call(o,s,l,e,n,i),r&&o.cause==null&&Object.defineProperty(o,"cause",{value:r,configurable:!0}),o.name=r&&r.name||"Error",a&&Object.assign(o,a),o};const hK=null;function iy(r){return me.isPlainObject(r)||me.isArray(r)}function EE(r){return me.endsWith(r,"[]")?r.slice(0,-2):r}function tb(r,t,e){return r?r.concat(t).map(function(i,a){return i=EE(i),!e&&a?"["+i+"]":i}).join(e?".":""):t}function pK(r){return me.isArray(r)&&!r.some(iy)}const vK=me.toFlatObject(me,{},null,function(t){return/^is[A-Z]/.test(t)});function iv(r,t,e){if(!me.isObject(r))throw new TypeError("target must be an object");t=t||new FormData,e=me.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,S){return!me.isUndefined(S[b])});const n=e.metaTokens,i=e.visitor||u,a=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(t);if(!me.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(me.isDate(y))return y.toISOString();if(me.isBoolean(y))return y.toString();if(!l&&me.isBlob(y))throw new wt("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(y)||me.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,b,S){let _=y;if(y&&!S&&typeof y=="object"){if(me.endsWith(b,"{}"))b=n?b:b.slice(0,-2),y=JSON.stringify(y);else if(me.isArray(y)&&pK(y)||(me.isFileList(y)||me.endsWith(b,"[]"))&&(_=me.toArray(y)))return b=EE(b),_.forEach(function(k,T){!(me.isUndefined(k)||k===null)&&t.append(o===!0?tb([b],T,a):o===null?b:b+"[]",c(k))}),!1}return iy(y)?!0:(t.append(tb(S,b,a),c(y)),!1)}const d=[],v=Object.assign(vK,{defaultVisitor:u,convertValue:c,isVisitable:iy});function p(y,b){if(!me.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+b.join("."));d.push(y),me.forEach(y,function(_,x){(!(me.isUndefined(_)||_===null)&&i.call(t,_,me.isString(x)?x.trim():x,b,v))===!0&&p(_,b?b.concat(x):[x])}),d.pop()}}if(!me.isObject(r))throw new TypeError("data must be an object");return p(r),t}function rb(r){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function c_(r,t){this._pairs=[],r&&iv(r,this,t)}const CE=c_.prototype;CE.append=function(t,e){this._pairs.push([t,e])};CE.toString=function(t){const e=t?function(n){return t.call(this,n,rb)}:rb;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function mK(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function LE(r,t,e){if(!t)return r;const n=e&&e.encode||mK;me.isFunction(e)&&(e={serialize:e});const i=e&&e.serialize;let a;if(i?a=i(t,e):a=me.isURLSearchParams(t)?t.toString():new c_(t,e).toString(n),a){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+a}return r}class nb{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){me.forEach(this.handlers,function(n){n!==null&&t(n)})}}const AE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gK=typeof URLSearchParams<"u"?URLSearchParams:c_,yK=typeof FormData<"u"?FormData:null,_K=typeof Blob<"u"?Blob:null,wK={isBrowser:!0,classes:{URLSearchParams:gK,FormData:yK,Blob:_K},protocols:["http","https","file","blob","url","data"]},l_=typeof window<"u"&&typeof document<"u",ay=typeof navigator=="object"&&navigator||void 0,bK=l_&&(!ay||["ReactNative","NativeScript","NS"].indexOf(ay.product)<0),xK=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",SK=l_&&window.location.href||"http://localhost",kK=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:l_,hasStandardBrowserEnv:bK,hasStandardBrowserWebWorkerEnv:xK,navigator:ay,origin:SK},Symbol.toStringTag,{value:"Module"})),cn={...kK,...wK};function PK(r,t){return iv(r,new cn.classes.URLSearchParams,{visitor:function(e,n,i,a){return cn.isNode&&me.isBuffer(e)?(this.append(n,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function TK(r){return me.matchAll(/\w+|\[(\w*)]/g,r).map(t=>t[0]==="[]"?"":t[1]||t[0])}function EK(r){const t={},e=Object.keys(r);let n;const i=e.length;let a;for(n=0;n<i;n++)a=e[n],t[a]=r[a];return t}function OE(r){function t(e,n,i,a){let o=e[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),l=a>=e.length;return o=!o&&me.isArray(i)?i.length:o,l?(me.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s):((!i[o]||!me.isObject(i[o]))&&(i[o]=[]),t(e,n,i[o],a)&&me.isArray(i[o])&&(i[o]=EK(i[o])),!s)}if(me.isFormData(r)&&me.isFunction(r.entries)){const e={};return me.forEachEntry(r,(n,i)=>{t(TK(n),i,e,0)}),e}return null}function CK(r,t,e){if(me.isString(r))try{return(t||JSON.parse)(r),me.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(r)}const _f={transitional:AE,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,a=me.isObject(t);if(a&&me.isHTMLForm(t)&&(t=new FormData(t)),me.isFormData(t))return i?JSON.stringify(OE(t)):t;if(me.isArrayBuffer(t)||me.isBuffer(t)||me.isStream(t)||me.isFile(t)||me.isBlob(t)||me.isReadableStream(t))return t;if(me.isArrayBufferView(t))return t.buffer;if(me.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return PK(t,this.formSerializer).toString();if((s=me.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return iv(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||i?(e.setContentType("application/json",!1),CK(t)):t}],transformResponse:[function(t){const e=this.transitional||_f.transitional,n=e&&e.forcedJSONParsing,i=this.responseType==="json";if(me.isResponse(t)||me.isReadableStream(t))return t;if(t&&me.isString(t)&&(n&&!this.responseType||i)){const o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(s){if(o)throw s.name==="SyntaxError"?wt.from(s,wt.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cn.classes.FormData,Blob:cn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],r=>{_f.headers[r]={}});const LK=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AK=r=>{const t={};let e,n,i;return r&&r.split(`
`).forEach(function(o){i=o.indexOf(":"),e=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!e||t[e]&&LK[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},ib=Symbol("internals");function iu(r){return r&&String(r).trim().toLowerCase()}function wh(r){return r===!1||r==null?r:me.isArray(r)?r.map(wh):String(r)}function OK(r){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(r);)t[n[1]]=n[2];return t}const NK=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function lg(r,t,e,n,i){if(me.isFunction(n))return n.call(this,t,e);if(i&&(t=e),!!me.isString(t)){if(me.isString(n))return t.indexOf(n)!==-1;if(me.isRegExp(n))return n.test(t)}}function RK(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function jK(r,t){const e=me.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+e,{value:function(i,a,o){return this[n].call(this,t,i,a,o)},configurable:!0})})}let An=class{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function a(s,l,c){const u=iu(l);if(!u)throw new Error("header name must be a non-empty string");const d=me.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=wh(s))}const o=(s,l)=>me.forEach(s,(c,u)=>a(c,u,l));if(me.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(me.isString(t)&&(t=t.trim())&&!NK(t))o(AK(t),e);else if(me.isObject(t)&&me.isIterable(t)){let s={},l,c;for(const u of t){if(!me.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[c=u[0]]=(l=s[c])?me.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(s,e)}else t!=null&&a(e,t,n);return this}get(t,e){if(t=iu(t),t){const n=me.findKey(this,t);if(n){const i=this[n];if(!e)return i;if(e===!0)return OK(i);if(me.isFunction(e))return e.call(this,i,n);if(me.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=iu(t),t){const n=me.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||lg(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let i=!1;function a(o){if(o=iu(o),o){const s=me.findKey(n,o);s&&(!e||lg(n,n[s],s,e))&&(delete n[s],i=!0)}}return me.isArray(t)?t.forEach(a):a(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const a=e[n];(!t||lg(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const e=this,n={};return me.forEach(this,(i,a)=>{const o=me.findKey(n,a);if(o){e[o]=wh(i),delete e[a];return}const s=t?RK(a):String(a).trim();s!==a&&delete e[a],e[s]=wh(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return me.forEach(this,(n,i)=>{n!=null&&n!==!1&&(e[i]=t&&me.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[ib]=this[ib]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=iu(o);n[s]||(jK(i,o),n[s]=!0)}return me.isArray(t)?t.forEach(a):a(t),this}};An.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(An.prototype,({value:r},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(n){this[e]=n}}});me.freezeMethods(An);function ug(r,t){const e=this||_f,n=t||e,i=An.from(n.headers);let a=n.data;return me.forEach(r,function(s){a=s.call(e,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function NE(r){return!!(r&&r.__CANCEL__)}function dl(r,t,e){wt.call(this,r??"canceled",wt.ERR_CANCELED,t,e),this.name="CanceledError"}me.inherits(dl,wt,{__CANCEL__:!0});function RE(r,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?r(e):t(new wt("Request failed with status code "+e.status,[wt.ERR_BAD_REQUEST,wt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function IK(r){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return t&&t[1]||""}function MK(r,t){r=r||10;const e=new Array(r),n=new Array(r);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=n[a];o||(o=c),e[i]=l,n[i]=c;let d=a,v=0;for(;d!==i;)v+=e[d++],d=d%r;if(i=(i+1)%r,i===a&&(a=(a+1)%r),c-o<t)return;const p=u&&c-u;return p?Math.round(v*1e3/p):void 0}}function DK(r,t){let e=0,n=1e3/t,i,a;const o=(c,u=Date.now())=>{e=u,i=null,a&&(clearTimeout(a),a=null),r(...c)};return[(...c)=>{const u=Date.now(),d=u-e;d>=n?o(c,u):(i=c,a||(a=setTimeout(()=>{a=null,o(i)},n-d)))},()=>i&&o(i)]}const lp=(r,t,e=3)=>{let n=0;const i=MK(50,250);return DK(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,l=o-n,c=i(l),u=o<=s;n=o;const d={loaded:o,total:s,progress:s?o/s:void 0,bytes:l,rate:c||void 0,estimated:c&&s&&u?(s-o)/c:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};r(d)},e)},ab=(r,t)=>{const e=r!=null;return[n=>t[0]({lengthComputable:e,total:r,loaded:n}),t[1]]},ob=r=>(...t)=>me.asap(()=>r(...t)),FK=cn.hasStandardBrowserEnv?((r,t)=>e=>(e=new URL(e,cn.origin),r.protocol===e.protocol&&r.host===e.host&&(t||r.port===e.port)))(new URL(cn.origin),cn.navigator&&/(msie|trident)/i.test(cn.navigator.userAgent)):()=>!0,BK=cn.hasStandardBrowserEnv?{write(r,t,e,n,i,a){const o=[r+"="+encodeURIComponent(t)];me.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),me.isString(n)&&o.push("path="+n),me.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(r){const t=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function $K(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function UK(r,t){return t?r.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):r}function jE(r,t,e){let n=!$K(t);return r&&(n||e==!1)?UK(r,t):t}const sb=r=>r instanceof An?{...r}:r;function Os(r,t){t=t||{};const e={};function n(c,u,d,v){return me.isPlainObject(c)&&me.isPlainObject(u)?me.merge.call({caseless:v},c,u):me.isPlainObject(u)?me.merge({},u):me.isArray(u)?u.slice():u}function i(c,u,d,v){if(me.isUndefined(u)){if(!me.isUndefined(c))return n(void 0,c,d,v)}else return n(c,u,d,v)}function a(c,u){if(!me.isUndefined(u))return n(void 0,u)}function o(c,u){if(me.isUndefined(u)){if(!me.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function s(c,u,d){if(d in t)return n(c,u);if(d in r)return n(void 0,c)}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(c,u,d)=>i(sb(c),sb(u),d,!0)};return me.forEach(Object.keys({...r,...t}),function(u){const d=l[u]||i,v=d(r[u],t[u],u);me.isUndefined(v)&&d!==s||(e[u]=v)}),e}const IE=r=>{const t=Os({},r);let{data:e,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;if(t.headers=o=An.from(o),t.url=LE(jE(t.baseURL,t.url,t.allowAbsoluteUrls),r.params,r.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),me.isFormData(e)){if(cn.hasStandardBrowserEnv||cn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(me.isFunction(e.getHeaders)){const l=e.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(cn.hasStandardBrowserEnv&&(n&&me.isFunction(n)&&(n=n(t)),n||n!==!1&&FK(t.url))){const l=i&&a&&BK.read(a);l&&o.set(i,l)}return t},VK=typeof XMLHttpRequest<"u",zK=VK&&function(r){return new Promise(function(e,n){const i=IE(r);let a=i.data;const o=An.from(i.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:c}=i,u,d,v,p,y;function b(){p&&p(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function _(){if(!S)return;const k=An.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),R={data:!s||s==="text"||s==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:k,config:r,request:S};RE(function(j){e(j),b()},function(j){n(j),b()},R),S=null}"onloadend"in S?S.onloadend=_:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(_)},S.onabort=function(){S&&(n(new wt("Request aborted",wt.ECONNABORTED,r,S)),S=null)},S.onerror=function(T){const R=T&&T.message?T.message:"Network Error",B=new wt(R,wt.ERR_NETWORK,r,S);B.event=T||null,n(B),S=null},S.ontimeout=function(){let T=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const R=i.transitional||AE;i.timeoutErrorMessage&&(T=i.timeoutErrorMessage),n(new wt(T,R.clarifyTimeoutError?wt.ETIMEDOUT:wt.ECONNABORTED,r,S)),S=null},a===void 0&&o.setContentType(null),"setRequestHeader"in S&&me.forEach(o.toJSON(),function(T,R){S.setRequestHeader(R,T)}),me.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),s&&s!=="json"&&(S.responseType=i.responseType),c&&([v,y]=lp(c,!0),S.addEventListener("progress",v)),l&&S.upload&&([d,p]=lp(l),S.upload.addEventListener("progress",d),S.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=k=>{S&&(n(!k||k.type?new dl(null,r,S):k),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const x=IK(i.url);if(x&&cn.protocols.indexOf(x)===-1){n(new wt("Unsupported protocol "+x+":",wt.ERR_BAD_REQUEST,r));return}S.send(a||null)})},WK=(r,t)=>{const{length:e}=r=r?r.filter(Boolean):[];if(t||e){let n=new AbortController,i;const a=function(c){if(!i){i=!0,s();const u=c instanceof Error?c:this.reason;n.abort(u instanceof wt?u:new dl(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,a(new wt(`timeout ${t} of ms exceeded`,wt.ETIMEDOUT))},t);const s=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),r=null)};r.forEach(c=>c.addEventListener("abort",a));const{signal:l}=n;return l.unsubscribe=()=>me.asap(s),l}},qK=function*(r,t){let e=r.byteLength;if(e<t){yield r;return}let n=0,i;for(;n<e;)i=n+t,yield r.slice(n,i),n=i},HK=async function*(r,t){for await(const e of GK(r))yield*qK(e,t)},GK=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const t=r.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},cb=(r,t,e,n)=>{const i=HK(r,t);let a=0,o,s=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){s(),l.close();return}let d=u.byteLength;if(e){let v=a+=d;e(v)}l.enqueue(new Uint8Array(u))}catch(c){throw s(c),c}},cancel(l){return s(l),i.return()}},{highWaterMark:2})},lb=64*1024,{isFunction:Dd}=me,KK=(({Request:r,Response:t})=>({Request:r,Response:t}))(me.global),{ReadableStream:ub,TextEncoder:fb}=me.global,db=(r,...t)=>{try{return!!r(...t)}catch{return!1}},QK=r=>{r=me.merge.call({skipUndefined:!0},KK,r);const{fetch:t,Request:e,Response:n}=r,i=t?Dd(t):typeof fetch=="function",a=Dd(e),o=Dd(n);if(!i)return!1;const s=i&&Dd(ub),l=i&&(typeof fb=="function"?(y=>b=>y.encode(b))(new fb):async y=>new Uint8Array(await new e(y).arrayBuffer())),c=a&&s&&db(()=>{let y=!1;const b=new e(cn.origin,{body:new ub,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!b}),u=o&&s&&db(()=>me.isReadableStream(new n("").body)),d={stream:u&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!d[y]&&(d[y]=(b,S)=>{let _=b&&b[y];if(_)return _.call(b);throw new wt(`Response type '${y}' is not supported`,wt.ERR_NOT_SUPPORT,S)})});const v=async y=>{if(y==null)return 0;if(me.isBlob(y))return y.size;if(me.isSpecCompliantForm(y))return(await new e(cn.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(me.isArrayBufferView(y)||me.isArrayBuffer(y))return y.byteLength;if(me.isURLSearchParams(y)&&(y=y+""),me.isString(y))return(await l(y)).byteLength},p=async(y,b)=>{const S=me.toFiniteNumber(y.getContentLength());return S??v(b)};return async y=>{let{url:b,method:S,data:_,signal:x,cancelToken:k,timeout:T,onDownloadProgress:R,onUploadProgress:B,responseType:j,headers:F,withCredentials:M="same-origin",fetchOptions:q}=IE(y),O=t||fetch;j=j?(j+"").toLowerCase():"text";let L=WK([x,k&&k.toAbortSignal()],T),z=null;const I=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let X;try{if(B&&c&&S!=="get"&&S!=="head"&&(X=await p(F,_))!==0){let ne=new e(b,{method:"POST",body:_,duplex:"half"}),N;if(me.isFormData(_)&&(N=ne.headers.get("content-type"))&&F.setContentType(N),ne.body){const[U,G]=ab(X,lp(ob(B)));_=cb(ne.body,lb,U,G)}}me.isString(M)||(M=M?"include":"omit");const Z=a&&"credentials"in e.prototype,oe={...q,signal:L,method:S.toUpperCase(),headers:F.normalize().toJSON(),body:_,duplex:"half",credentials:Z?M:void 0};z=a&&new e(b,oe);let H=await(a?O(z,q):O(b,oe));const re=u&&(j==="stream"||j==="response");if(u&&(R||re&&I)){const ne={};["status","statusText","headers"].forEach(ee=>{ne[ee]=H[ee]});const N=me.toFiniteNumber(H.headers.get("content-length")),[U,G]=R&&ab(N,lp(ob(R),!0))||[];H=new n(cb(H.body,lb,U,()=>{G&&G(),I&&I()}),ne)}j=j||"text";let ue=await d[me.findKey(d,j)||"text"](H,y);return!re&&I&&I(),await new Promise((ne,N)=>{RE(ne,N,{data:ue,headers:An.from(H.headers),status:H.status,statusText:H.statusText,config:y,request:z})})}catch(Z){throw I&&I(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new wt("Network Error",wt.ERR_NETWORK,y,z),{cause:Z.cause||Z}):wt.from(Z,Z&&Z.code,y,z)}}},YK=new Map,ME=r=>{let t=r?r.env:{};const{fetch:e,Request:n,Response:i}=t,a=[n,i,e];let o=a.length,s=o,l,c,u=YK;for(;s--;)l=a[s],c=u.get(l),c===void 0&&u.set(l,c=s?new Map:QK(t)),u=c;return c};ME();const oy={http:hK,xhr:zK,fetch:{get:ME}};me.forEach(oy,(r,t)=>{if(r){try{Object.defineProperty(r,"name",{value:t})}catch{}Object.defineProperty(r,"adapterName",{value:t})}});const hb=r=>`- ${r}`,JK=r=>me.isFunction(r)||r===null||r===!1,DE={getAdapter:(r,t)=>{r=me.isArray(r)?r:[r];const{length:e}=r;let n,i;const a={};for(let o=0;o<e;o++){n=r[o];let s;if(i=n,!JK(n)&&(i=oy[(s=String(n)).toLowerCase()],i===void 0))throw new wt(`Unknown adapter '${s}'`);if(i&&(me.isFunction(i)||(i=i.get(t))))break;a[s||"#"+o]=i}if(!i){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?o.length>1?`since :
`+o.map(hb).join(`
`):" "+hb(o[0]):"as no adapter specified";throw new wt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i},adapters:oy};function fg(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new dl(null,r)}function pb(r){return fg(r),r.headers=An.from(r.headers),r.data=ug.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),DE.getAdapter(r.adapter||_f.adapter,r)(r).then(function(n){return fg(r),n.data=ug.call(r,r.transformResponse,n),n.headers=An.from(n.headers),n},function(n){return NE(n)||(fg(r),n&&n.response&&(n.response.data=ug.call(r,r.transformResponse,n.response),n.response.headers=An.from(n.response.headers))),Promise.reject(n)})}const FE="1.12.2",av={};["object","boolean","number","function","string","symbol"].forEach((r,t)=>{av[r]=function(n){return typeof n===r||"a"+(t<1?"n ":" ")+r}});const vb={};av.transitional=function(t,e,n){function i(a,o){return"[Axios v"+FE+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,s)=>{if(t===!1)throw new wt(i(o," has been removed"+(e?" in "+e:"")),wt.ERR_DEPRECATED);return e&&!vb[o]&&(vb[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,o,s):!0}};av.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function XK(r,t,e){if(typeof r!="object")throw new wt("options must be an object",wt.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const a=n[i],o=t[a];if(o){const s=r[a],l=s===void 0||o(s,a,r);if(l!==!0)throw new wt("option "+a+" must be "+l,wt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new wt("Unknown option "+a,wt.ERR_BAD_OPTION)}}const bh={assertOptions:XK,validators:av},Wi=bh.validators;let Ss=class{constructor(t){this.defaults=t||{},this.interceptors={request:new nb,response:new nb}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Os(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:a}=e;n!==void 0&&bh.assertOptions(n,{silentJSONParsing:Wi.transitional(Wi.boolean),forcedJSONParsing:Wi.transitional(Wi.boolean),clarifyTimeoutError:Wi.transitional(Wi.boolean)},!1),i!=null&&(me.isFunction(i)?e.paramsSerializer={serialize:i}:bh.assertOptions(i,{encode:Wi.function,serialize:Wi.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),bh.assertOptions(e,{baseUrl:Wi.spelling("baseURL"),withXsrfToken:Wi.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=a&&me.merge(a.common,a[e.method]);a&&me.forEach(["delete","get","head","post","put","patch","common"],y=>{delete a[y]}),e.headers=An.concat(o,a);const s=[];let l=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(e)===!1||(l=l&&b.synchronous,s.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let u,d=0,v;if(!l){const y=[pb.bind(this),void 0];for(y.unshift(...s),y.push(...c),v=y.length,u=Promise.resolve(e);d<v;)u=u.then(y[d++],y[d++]);return u}v=s.length;let p=e;for(;d<v;){const y=s[d++],b=s[d++];try{p=y(p)}catch(S){b.call(this,S);break}}try{u=pb.call(this,p)}catch(y){return Promise.reject(y)}for(d=0,v=c.length;d<v;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=Os(this.defaults,t);const e=jE(t.baseURL,t.url,t.allowAbsoluteUrls);return LE(e,t.params,t.paramsSerializer)}};me.forEach(["delete","get","head","options"],function(t){Ss.prototype[t]=function(e,n){return this.request(Os(n||{},{method:t,url:e,data:(n||{}).data}))}});me.forEach(["post","put","patch"],function(t){function e(n){return function(a,o,s){return this.request(Os(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Ss.prototype[t]=e(),Ss.prototype[t+"Form"]=e(!0)});let ZK=class BE{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{n.subscribe(s),a=s}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},t(function(a,o,s){n.reason||(n.reason=new dl(a,o,s),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new BE(function(i){t=i}),cancel:t}}};function eQ(r){return function(e){return r.apply(null,e)}}function tQ(r){return me.isObject(r)&&r.isAxiosError===!0}const sy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sy).forEach(([r,t])=>{sy[t]=r});function $E(r){const t=new Ss(r),e=gE(Ss.prototype.request,t);return me.extend(e,Ss.prototype,t,{allOwnKeys:!0}),me.extend(e,t,null,{allOwnKeys:!0}),e.create=function(i){return $E(Os(r,i))},e}const pr=$E(_f);pr.Axios=Ss;pr.CanceledError=dl;pr.CancelToken=ZK;pr.isCancel=NE;pr.VERSION=FE;pr.toFormData=iv;pr.AxiosError=wt;pr.Cancel=pr.CanceledError;pr.all=function(t){return Promise.all(t)};pr.spread=eQ;pr.isAxiosError=tQ;pr.mergeConfig=Os;pr.AxiosHeaders=An;pr.formToJSON=r=>OE(me.isHTMLForm(r)?new FormData(r):r);pr.getAdapter=DE.getAdapter;pr.HttpStatusCode=sy;pr.default=pr;const{Axios:rte,AxiosError:nte,CanceledError:ite,isCancel:ate,CancelToken:ote,VERSION:ste,all:cte,Cancel:lte,isAxiosError:ute,spread:fte,toFormData:dte,AxiosHeaders:hte,HttpStatusCode:pte,formToJSON:vte,getAdapter:mte,mergeConfig:gte}=pr,rQ="";class nQ{constructor(){jt(this,"client");this.client=pr.create({baseURL:rQ,headers:{"Content-Type":"application/json"}})}async getVideoToken(t,e){return(await this.client.post("/api/video/token",{identity:t,roomName:e})).data.data.token}async createRoom(t,e){return(await this.client.post("/api/video/rooms",{roomName:t,type:e})).data.data}async getRoom(t){return(await this.client.get(`/api/video/rooms/${t}`)).data.data}async endRoom(t){return(await this.client.post(`/api/video/rooms/${t}/end`)).data.data}async listParticipants(t){return(await this.client.get(`/api/video/rooms/${t}/participants`)).data.data}async trackParticipantConnected(t,e,n,i){await this.client.post("/api/video/events/participant-connected",{roomName:t,identity:e,role:n,documento:i})}async trackParticipantDisconnected(t,e){await this.client.post("/api/video/events/participant-disconnected",{roomName:t,identity:e})}async sendWhatsApp(t,e){await this.client.post("/api/video/whatsapp/send",{phone:t,message:e})}async getMedicalHistory(t){return(await this.client.get(`/api/video/medical-history/${t}`)).data.data}async updateMedicalHistory(t){await this.client.post("/api/video/medical-history",t)}async generateAISuggestions(t){return(await this.client.post("/api/video/ai-suggestions",{patientData:t})).data.data.suggestions}async makeVoiceCall(t,e){await this.client.post("/api/twilio/voice-call",{phoneNumber:t,patientName:e})}}const Ji=new nQ,mb=()=>{try{const r=new(window.AudioContext||window.webkitAudioContext),t=r.createOscillator(),e=r.createGain();t.connect(e),e.connect(r.destination),t.frequency.value=800,t.type="sine",e.gain.setValueAtTime(0,r.currentTime),e.gain.linearRampToValueAtTime(.3,r.currentTime+.01),e.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),t.start(r.currentTime),t.stop(r.currentTime+.5),console.log("🔔 Notification sound played")}catch(r){console.error("Error playing notification sound:",r)}},iQ=r=>{try{if("speechSynthesis"in window){window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(r);t.lang="es-ES",t.rate=1,t.pitch=1,t.volume=1,mb(),setTimeout(()=>{window.speechSynthesis.speak(t),console.log("🔊 Speaking:",r)},600)}else console.warn("speechSynthesis no está disponible en este navegador"),mb()}catch(t){console.error("Error in speakText:",t)}},aQ=({identity:r,roomName:t,role:e,documento:n})=>{const[i,a]=fe.useState(null),[o,s]=fe.useState(null),[l,c]=fe.useState(new Map),[u,d]=fe.useState(!1),[v,p]=fe.useState(!1),[y,b]=fe.useState(null),[S,_]=fe.useState(!0),[x,k]=fe.useState(!0),[T,R]=fe.useState(null),B=fe.useCallback(async()=>{var q;try{d(!0),b(null);const O=await Ji.getVideoToken(r,t),L=await EG.connect(O,{name:t,audio:!0,video:{width:640,height:480},networkQuality:{local:1,remote:1}});a(L),s(L.localParticipant),p(!0);const z=(q=Array.from(L.localParticipant.videoTracks.values())[0])==null?void 0:q.track;if(z&&R(z),e)try{await Ji.trackParticipantConnected(t,r,e,n)}catch(I){console.error("Error tracking participant connection:",I)}L.participants.forEach(I=>{c(X=>new Map(X).set(I.sid,I))}),L.on("participantConnected",I=>{if(console.log(`Participant connected: ${I.identity}`),c(X=>new Map(X).set(I.sid,I)),e==="doctor"){const X=I.identity;iQ(`Paciente ${X} conectado`)}}),L.on("participantDisconnected",I=>{console.log(`Participant disconnected: ${I.identity}`),c(X=>{const Z=new Map(X);return Z.delete(I.sid),Z})}),L.on("disconnected",()=>{console.log("Disconnected from room"),p(!1),a(null),s(null),c(new Map)}),console.log(`Successfully connected to room: ${t}`)}catch(O){console.error("Error connecting to room:",O),b(O instanceof Error?O.message:"Failed to connect to room")}finally{d(!1)}},[r,t,e]),j=fe.useCallback(()=>{if(i){if(e)try{Ji.trackParticipantDisconnected(t,r)}catch(q){console.error("Error tracking participant disconnection:",q)}i.disconnect(),a(null),s(null),c(new Map),p(!1)}},[i,e,t,r]),F=fe.useCallback(()=>{o&&o.audioTracks.forEach(q=>{const O=q.track;O.isEnabled?(O.disable(),_(!1)):(O.enable(),_(!0))})},[o]),M=fe.useCallback(()=>{o&&o.videoTracks.forEach(q=>{const O=q.track;O.isEnabled?(O.disable(),k(!1)):(O.enable(),k(!0))})},[o]);return fe.useEffect(()=>{const q=()=>{if(i&&e){const L="/api/video/events/participant-disconnected",z=JSON.stringify({roomName:t,identity:r});navigator.sendBeacon(L,new Blob([z],{type:"application/json"})),i.disconnect()}};return window.addEventListener("beforeunload",q),()=>{if(window.removeEventListener("beforeunload",q),i){if(e)try{Ji.trackParticipantDisconnected(t,r)}catch(O){console.error("Error tracking participant disconnection:",O)}i.disconnect()}}},[i,e,t,r]),{room:i,localParticipant:o,remoteParticipants:l,isConnecting:u,isConnected:v,error:y,connectToRoom:B,disconnectFromRoom:j,toggleAudio:F,toggleVideo:M,isAudioEnabled:S,isVideoEnabled:x,localVideoTrack:T}};var cy={},ov={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.WASM_INFERENCE_DIMENSIONS=ar.TWILIO_VIRTUAL_BACKGROUND_PROCESSOR_PIPELINE_WORKER=ar.TWILIO_GAUSSIAN_BLUR_BACKGROUND_PROCESSOR_PIPELINE_WORKER=ar.TFLITE_SIMD_LOADER_NAME=ar.TFLITE_LOADER_NAME=ar.MODEL_NAME=ar.MASK_BLUR_RADIUS=ar.BLUR_FILTER_RADIUS=void 0;ar.BLUR_FILTER_RADIUS=15;ar.MASK_BLUR_RADIUS=8;ar.MODEL_NAME="selfie_segmentation_landscape.tflite";ar.TFLITE_LOADER_NAME="tflite-1-0-0.js";ar.TFLITE_SIMD_LOADER_NAME="tflite-simd-1-0-0.js";ar.TWILIO_GAUSSIAN_BLUR_BACKGROUND_PROCESSOR_PIPELINE_WORKER="twilio-gaussian-blur-background-processor-pipeline-worker.js";ar.TWILIO_VIRTUAL_BACKGROUND_PROCESSOR_PIPELINE_WORKER="twilio-virtual-background-processor-pipeline-worker.js";ar.WASM_INFERENCE_DIMENSIONS={width:256,height:144};var wf={},bf={};Object.defineProperty(bf,"__esModule",{value:!0});bf.version=void 0;bf.version="3.1.0";var sv={};Object.defineProperty(sv,"__esModule",{value:!0});sv.Processor=void 0;var oQ=function(){function r(){}return r}();sv.Processor=oQ;var cv={},hl={},xf={},ly=A&&A.__assign||function(){return ly=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ly.apply(this,arguments)};Object.defineProperty(xf,"__esModule",{value:!0});xf.Benchmark=void 0;var sQ=function(){function r(){this._timingCache=new Map,this._timings=new Map}return r.prototype.end=function(t){var e=this._timings.get(t);e&&(e.end=Date.now(),e.delay=e.end-e.start,this._save(t,ly({},e)))},r.prototype.getAverageDelay=function(t){var e=this._timingCache.get(t);if(!(!e||!e.length))return e.map(function(n){return n.delay}).reduce(function(n,i){return n+=i},0)/e.length},r.prototype.getNames=function(){return Array.from(this._timingCache.keys())},r.prototype.getRate=function(t){var e=this._timingCache.get(t);if(!(!e||e.length<2)){var n=e[e.length-1].end-e[0].start;return e.length/n*1e3}},r.prototype.merge=function(t){var e=this,n=t._timingCache,i=t._timings;n.forEach(function(a,o){return e._timingCache.set(o,a)}),i.forEach(function(a,o){return e._timings.set(o,a)})},r.prototype.start=function(t){var e=this._timings.get(t);e||(e={},this._timings.set(t,e)),e.start=Date.now(),delete e.end,delete e.delay},r.prototype._save=function(t,e){var n=this._timingCache.get(t);n||(n=[],this._timingCache.set(t,n)),n.push(e),n.length>r.cacheSize&&n.splice(0,n.length-r.cacheSize)},r.cacheSize=41,r}();xf.Benchmark=sQ;var li={},ba=A&&A.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(li,"__esModule",{value:!0});li.isSupported=li.isCanvasBlurSupported=li.isChromiumImageBitmap=li.isBrowserSupported=void 0;function UE(){return typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function cQ(){if(typeof window>"u"||typeof document>"u")return null;var r=UE();return r.getContext("webgl2")?"webgl2":r.getContext("2d")?"2d":null}function VE(){return cQ()!==null}li.isBrowserSupported=VE;function lQ(){return/Chrome/.test(navigator.userAgent)&&typeof createImageBitmap=="function"}li.isChromiumImageBitmap=lQ;li.isCanvasBlurSupported=function(){var r=[0,0,0,255],t=[255,255,255,255],e=new ImageData(new Uint8ClampedArray(ba(ba(ba(ba(ba(ba(ba(ba(ba([],r,!0),r,!0),r,!0),r,!0),t,!0),r,!0),r,!0),r,!0),r,!0)),3,3),n=UE(),i=n.getContext("2d");n.width=3,n.height=3,i.putImageData(e,0,0),i.filter="blur(1px)",i.drawImage(n,0,0);var a=i.getImageData(0,0,3,3).data;return a[0]>0}();li.isSupported=VE();var lv={},dg=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},hg=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(lv,"__esModule",{value:!0});lv.TwilioTFLite=void 0;var gb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,pg=new Set,Fd,uQ=function(){function r(){this._inputBuffer=null,this._isSimdEnabled=null,this._tflite=null}return Object.defineProperty(r.prototype,"isSimdEnabled",{get:function(){return this._isSimdEnabled},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e,n,i){return dg(this,void 0,void 0,function(){var a,o,s,l,c;return hg(this,function(u){switch(u.label){case 0:return this._tflite?[2]:(gb&&(t=""),[4,Promise.all([this._loadWasmModule(t,n,i),fetch("".concat(t).concat(e))])]);case 1:return a=u.sent(),o=a[1],s=Fd,s?[3,3]:[4,o.arrayBuffer()];case 2:s=u.sent(),u.label=3;case 3:return Fd=s,l=this._tflite,c=l._getModelBufferMemoryOffset(),l.HEAPU8.set(new Uint8Array(Fd),c),l._loadModel(Fd.byteLength),[2]}})})},r.prototype.loadInputBuffer=function(t){for(var e=this._tflite,n=e._getInputHeight(),i=e._getInputWidth(),a=i*n,o=e._getInputMemoryOffset()/4,s=0;s<a;s++){var l=o+s*3,c=s*4;e.HEAPF32[l]=t[c]/255,e.HEAPF32[l+1]=t[c+1]/255,e.HEAPF32[l+2]=t[c+2]/255}this._inputBuffer=t},r.prototype.runInference=function(){var t=this._tflite,e=t._getInputHeight(),n=t._getInputWidth(),i=n*e,a=t._getOutputMemoryOffset()/4;t._runInference();for(var o=this._inputBuffer||new Uint8ClampedArray(i*4),s=0;s<i;s++)o[s*4+3]=Math.round(t.HEAPF32[a+s]*255);return o},r.prototype._loadScript=function(t){return dg(this,void 0,void 0,function(){return hg(this,function(e){return pg.has(t)?[2]:gb?(importScripts(t),pg.add(t),[2]):[2,new Promise(function(n,i){var a=document.createElement("script");a.onload=function(){pg.add(t),n()},a.onerror=function(){i()},document.head.append(a),a.src=t})]})})},r.prototype._loadWasmModule=function(t,e,n){return dg(this,void 0,void 0,function(){var i,a;return hg(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,6]),[4,this._loadScript("".concat(t).concat(n))];case 1:return o.sent(),i=this,[4,createTwilioTFLiteSIMDModule()];case 2:return i._tflite=o.sent(),this._isSimdEnabled=!0,[3,6];case 3:return o.sent(),[4,this._loadScript("".concat(t).concat(e))];case 4:return o.sent(),a=this,[4,createTwilioTFLiteModule()];case 5:return a._tflite=o.sent(),this._isSimdEnabled=!1,[3,6];case 6:return[2]}})})},r}();lv.TwilioTFLite=uQ;var pl={},Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.Pipeline=void 0;var fQ=function(){function r(){this._stages=[]}return r.prototype.addStage=function(t){this._stages.push(t)},r.prototype.render=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._stages.forEach(function(n){n.render.apply(n,t)})},r}();Sf.Pipeline=fQ;var uv={},fv={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.initBuffer=zn.createTexture=zn.compileShader=zn.createProgram=zn.createPipelineStageProgram=void 0;function dQ(r,t,e,n,i){var a=zE(r,t,e),o=r.getAttribLocation(a,"a_position");r.enableVertexAttribArray(o),r.bindBuffer(r.ARRAY_BUFFER,n),r.vertexAttribPointer(o,2,r.FLOAT,!1,0,0);var s=r.getAttribLocation(a,"a_texCoord");return r.enableVertexAttribArray(s),r.bindBuffer(r.ARRAY_BUFFER,i),r.vertexAttribPointer(s,2,r.FLOAT,!1,0,0),a}zn.createPipelineStageProgram=dQ;function zE(r,t,e){var n=r.createProgram();if(r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw new Error("Could not link WebGL program: ".concat(r.getProgramInfoLog(n)));return n}zn.createProgram=zE;function hQ(r,t,e){var n=r.createShader(t);if(r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error("Could not compile shader: ".concat(r.getShaderInfoLog(n)));return n}zn.compileShader=hQ;function pQ(r,t,e,n,i,a){i===void 0&&(i=r.NEAREST),a===void 0&&(a=r.NEAREST);var o=r.createTexture();return r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a),r.texStorage2D(r.TEXTURE_2D,1,t,e,n),o}zn.createTexture=pQ;function vQ(r,t){var e=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW),e}zn.initBuffer=vQ;Object.defineProperty(fv,"__esModule",{value:!0});fv.WebGL2PipelineInputStage=void 0;var yb=zn,mQ=function(){function r(t){this._inputTexture=null;var e=t.canvas,n=e.height,i=e.width;this._glOut=t,this._inputFrameTexture=(0,yb.createTexture)(t,t.RGBA8,i,n,t.NEAREST,t.NEAREST)}return r.prototype.cleanUp=function(){var t=this,e=t._glOut,n=t._inputFrameTexture,i=t._inputTexture;e.deleteTexture(n),e.deleteTexture(i)},r.prototype.render=function(t,e){var n=this,i=n._glOut,a=n._inputFrameTexture,o=i.canvas,s=o.height,l=o.width;if(i.viewport(0,0,l,s),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t&&(i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a),i.texSubImage2D(i.TEXTURE_2D,0,0,0,l,s,i.RGBA,i.UNSIGNED_BYTE,t)),!!e){var c=e.data,u=e.height,d=e.width;this._inputTexture||(this._inputTexture=(0,yb.createTexture)(i,i.RGBA8,d,u,i.NEAREST,i.NEAREST)),i.viewport(0,0,d,u),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,this._inputTexture),i.texSubImage2D(i.TEXTURE_2D,0,0,0,d,u,i.RGBA,i.UNSIGNED_BYTE,c)}},r}();fv.WebGL2PipelineInputStage=mQ;var dv={},_b=A&&A.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(dv,"__esModule",{value:!0});dv.WebGL2PipelineProcessingStage=void 0;var oc=zn,gQ=function(){function r(t,e){this._outputFramebuffer=null,this._outputTexture=null;var n=t.textureName,i=t.textureUnit,a=e.glOut;this._glOut=a;var o=e.fragmentShaderSource,s=e.height,l=s===void 0?a.canvas.height:s,c=e.textureUnit,u=c===void 0?i+1:c,d=e.type,v=e.uniformVars,p=v===void 0?[]:v,y=e.vertexShaderSource,b=y===void 0?`#version 300 es
        in vec2 a_position;
        in vec2 a_texCoord;

        out vec2 v_texCoord;

        void main() {
          gl_Position = vec4(a_position`.concat(d==="canvas"?" * vec2(1.0, -1.0)":"",`, 0.0, 1.0);
          v_texCoord = a_texCoord;
        }
      `):y,S=e.width,_=S===void 0?a.canvas.width:S;this._outputDimensions={height:l,width:_},this._outputTextureUnit=u,this._fragmentShader=(0,oc.compileShader)(a,a.FRAGMENT_SHADER,o),this._vertexShader=(0,oc.compileShader)(a,a.VERTEX_SHADER,b),this._positionBuffer=(0,oc.initBuffer)(a,[-1,-1,1,-1,-1,1,1,1]),this._texCoordBuffer=(0,oc.initBuffer)(a,[0,0,1,0,0,1,1,1]),d==="texture"&&(this._outputTexture=(0,oc.createTexture)(a,a.RGBA8,_,l),this._outputFramebuffer=a.createFramebuffer(),a.bindFramebuffer(a.FRAMEBUFFER,this._outputFramebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._outputTexture,0));var x=(0,oc.createPipelineStageProgram)(a,this._vertexShader,this._fragmentShader,this._positionBuffer,this._texCoordBuffer);this._program=x,this._setUniformVars(_b([{name:n,type:"int",values:[i]}],p,!0))}return r.prototype.cleanUp=function(){var t=this,e=t._fragmentShader,n=t._glOut,i=t._positionBuffer,a=t._program,o=t._texCoordBuffer,s=t._vertexShader;n.deleteProgram(a),n.deleteBuffer(o),n.deleteBuffer(i),n.deleteShader(s),n.deleteShader(e)},r.prototype.render=function(){var t=this,e=t._glOut,n=t._outputDimensions,i=n.height,a=n.width,o=t._outputFramebuffer,s=t._outputTexture,l=t._outputTextureUnit,c=t._program;e.viewport(0,0,a,i),e.useProgram(c),s&&(e.activeTexture(e.TEXTURE0+l),e.bindTexture(e.TEXTURE_2D,s)),e.bindFramebuffer(e.FRAMEBUFFER,o),e.drawArrays(e.TRIANGLE_STRIP,0,4)},r.prototype._setUniformVars=function(t){var e=this,n=e._glOut,i=e._program;n.useProgram(i),t.forEach(function(a){var o=a.name,s=a.type,l=a.values,c=n.getUniformLocation(i,o),u=s.split(":")[1]==="v";u?n["uniform1".concat(s[0],"v")](c,l):n["uniform".concat(l.length).concat(s[0])].apply(n,_b([c],l,!1))})},r}();dv.WebGL2PipelineProcessingStage=gQ;var yQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(uv,"__esModule",{value:!0});uv.WebGL2Pipeline=void 0;var _Q=Sf,wQ=fv,bQ=dv,xQ=function(r){yQ(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._stages=[],e}return t.prototype.cleanUp=function(){this._stages.forEach(function(e){return e.cleanUp()})},t.prototype.render=function(e,n){var i=this._stages,a=i[0],o=i.slice(1);a.render(e,n),o.forEach(function(s){return s.render()})},t.InputStage=wQ.WebGL2PipelineInputStage,t.ProcessingStage=bQ.WebGL2PipelineProcessingStage,t}(_Q.Pipeline);uv.WebGL2Pipeline=xQ;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebGL2Pipeline=r.Pipeline=void 0;var t=Sf;Object.defineProperty(r,"Pipeline",{enumerable:!0,get:function(){return t.Pipeline}});var e=uv;Object.defineProperty(r,"WebGL2Pipeline",{enumerable:!0,get:function(){return e.WebGL2Pipeline}})})(pl);var hv={},SQ=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},kQ=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(hv,"__esModule",{value:!0});hv.InputFrameDowscaleStage=void 0;var PQ=function(){function r(t,e){this._inputFrameDownscaleMode=e,this._outputContext=t.getContext("2d",{willReadFrequently:!0})}return r.prototype.render=function(t){return SQ(this,void 0,void 0,function(){var e,n,i,a,o,s,l,c;return kQ(this,function(u){switch(u.label){case 0:return e=this,n=e._outputContext,i=e._inputFrameDownscaleMode,a=n.canvas,o=a.height,s=a.width,i!=="image-bitmap"?[3,2]:[4,createImageBitmap(t,{resizeWidth:s,resizeHeight:o,resizeQuality:"pixelated"})];case 1:return l=u.sent(),n.drawImage(l,0,0),l.close(),[3,3];case 2:n.drawImage(t,0,0,s,o),u.label=3;case 3:return c=n.getImageData(0,0,s,o).data,[2,c]}})})},r}();hv.InputFrameDowscaleStage=PQ;var pv={},vv={},mv={},TQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mv,"__esModule",{value:!0});mv.SinglePassBilateralFilterStage=void 0;var EQ=pl;function CQ(r,t,e){return"0".repeat(r).split("").map(function(n,i){var a=(i+1)*e;return Math.exp(-.5*a*a/t/t)})}function LQ(r){return"0".repeat(256).split("").map(function(t,e){var n=e/255;return Math.exp(-.5*n*n/r/r)})}var AQ=function(r){TQ(t,r);function t(e,n,i,a,o,s,l){var c=this;l===void 0&&(l=s+1);var u=o.height,d=o.width;return c=r.call(this,{textureName:"u_segmentationMask",textureUnit:s},{fragmentShaderSource:`#version 300 es
          precision highp float;

          uniform sampler2D u_inputFrame;
          uniform sampler2D u_segmentationMask;
          uniform vec2 u_texelSize;
          uniform float u_direction;
          uniform float u_radius;
          uniform float u_step;
          uniform float u_spaceWeights[128];
          uniform float u_colorWeights[256];

          in vec2 v_texCoord;

          out vec4 outColor;

          float calculateColorWeight(vec2 coord, vec3 centerColor) {
            vec3 coordColor = texture(u_inputFrame, coord).rgb;
            float x = distance(centerColor, coordColor);
            return u_colorWeights[int(x * 255.0)];
          }

          float edgePixelsAverageAlpha(float outAlpha) {
            float totalAlpha = outAlpha;
            float totalPixels = 1.0;

            for (float i = -u_radius; u_radius > 0.0 && i <= u_radius; i += u_radius) {
              for (float j = -u_radius; j <= u_radius; j += u_radius * (j == 0.0 ? 2.0 : 1.0)) {
                vec2 shift = vec2(i, j) * u_texelSize;
                vec2 coord = vec2(v_texCoord + shift);
                totalAlpha += texture(u_segmentationMask, coord).a;
                totalPixels++;
              }
            }

            return totalAlpha / totalPixels;
          }

          void main() {
            vec3 centerColor = texture(u_inputFrame, v_texCoord).rgb;
            float outAlpha = texture(u_segmentationMask, v_texCoord).a;
            float averageAlpha = edgePixelsAverageAlpha(outAlpha);
            float totalWeight = 1.0;

            if (averageAlpha == 0.0 || averageAlpha == 1.0) {
              outColor = vec4(averageAlpha * centerColor, averageAlpha);
              return;
            }

            for (float i = 1.0; i <= u_radius; i += u_step) {
              float x = (1.0 - u_direction) * i;
              float y = u_direction * i;
              vec2 shift = vec2(x, y) * u_texelSize;
              vec2 coord = vec2(v_texCoord + shift);
              float spaceWeight = u_spaceWeights[int(i - 1.0)];
              float colorWeight = calculateColorWeight(coord, centerColor);
              float weight = spaceWeight * colorWeight;
              float alpha = texture(u_segmentationMask, coord).a;
              totalWeight += weight;
              outAlpha += weight * alpha;

              shift = vec2(-x, -y) * u_texelSize;
              coord = vec2(v_texCoord + shift);
              colorWeight = calculateColorWeight(coord, centerColor);
              weight = spaceWeight * colorWeight;
              alpha = texture(u_segmentationMask, coord).a;
              totalWeight += weight;
              outAlpha += weight * alpha;
            }

            outAlpha /= totalWeight;
            outColor = vec4(outAlpha * centerColor, outAlpha);
          }
        `,glOut:e,height:u,textureUnit:l,type:i,width:d,uniformVars:[{name:"u_inputFrame",type:"int",values:[0]},{name:"u_direction",type:"float",values:[n==="vertical"?1:0]},{name:"u_texelSize",type:"float",values:[1/d,1/u]}]})||this,c._direction=n,c._inputDimensions=a,c.updateSigmaColor(0),c.updateSigmaSpace(0),c}return t.prototype.updateSigmaColor=function(e){this._setUniformVars([{name:"u_colorWeights",type:"float:v",values:LQ(e)}])},t.prototype.updateSigmaSpace=function(e){var n=this._inputDimensions,i=n.height,a=n.width,o=this._outputDimensions,s=o.height,l=o.width;e*=Math.max(l/a,s/i);var c=Math.floor(.5*e/Math.log(e)),u=Math.max(1/l,1/s)*e,d=1/(this._direction==="horizontal"?l:s);this._setUniformVars([{name:"u_radius",type:"float",values:[e]},{name:"u_spaceWeights",type:"float:v",values:CQ(e,u,d)},{name:"u_step",type:"float",values:[c]}])},t}(EQ.WebGL2Pipeline.ProcessingStage);mv.SinglePassBilateralFilterStage=AQ;var OQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(vv,"__esModule",{value:!0});vv.PersonMaskUpscalePipeline=void 0;var wb=pl,bb=mv,NQ=function(r){OQ(t,r);function t(e,n,i){var a=r.call(this)||this;a._isWebGL2Supported=!0,a._outputCanvas=n,a._inputDimensions=e,a._maskBlurRadius=i;var o=n.getContext("webgl2");return o?a.initializeWebGL2Pipeline(o):(a._isWebGL2Supported=!1,console.warn("Downgraded to Canvas2D for person mask upscaling due to missing WebGL2 support.")),a}return t.prototype.initializeWebGL2Pipeline=function(e){var n={height:this._outputCanvas.height,width:this._outputCanvas.width};this.addStage(new wb.WebGL2Pipeline.InputStage(e)),this.addStage(new bb.SinglePassBilateralFilterStage(e,"horizontal","texture",this._inputDimensions,n,1,2)),this.addStage(new bb.SinglePassBilateralFilterStage(e,"vertical","canvas",this._inputDimensions,n,2))},t.prototype.render=function(e,n){this._isWebGL2Supported?r.prototype.render.call(this,e,n):this._renderFallback(e,n)},t.prototype._renderFallback=function(e,n){var i=new OffscreenCanvas(n.width,n.height),a=i.getContext("2d");a.putImageData(n,0,0);var o=this._outputCanvas.getContext("2d");o.save(),o.filter="blur(".concat(this._maskBlurRadius,"px)"),o.globalCompositeOperation="copy",o.drawImage(i,0,0,this._outputCanvas.width,this._outputCanvas.height),o.filter="none",o.globalCompositeOperation="source-in",o.drawImage(e,0,0,this._outputCanvas.width,this._outputCanvas.height),o.restore()},t.prototype.updateBilateralFilterConfig=function(e){var n=e.sigmaSpace;if(typeof n=="number"){if(!this._isWebGL2Supported){this._maskBlurRadius=n;return}var i=this._stages,a=i.slice(1);a.forEach(function(o){o.updateSigmaColor(.1),o.updateSigmaSpace(n)})}},t.prototype.cleanUp=function(){this._isWebGL2Supported&&r.prototype.cleanUp.call(this)},t}(wb.WebGL2Pipeline);vv.PersonMaskUpscalePipeline=NQ;Object.defineProperty(pv,"__esModule",{value:!0});pv.PostProcessingStage=void 0;var RQ=vv,jQ=function(){function r(t,e,n,i,a){this._personMaskUpscalePipeline=null,this._inputDimensions=t,this._maskBlurRadius=i,this._outputContext=n.getContext("2d"),this._webgl2Canvas=e,this._setBackground=a}return r.prototype.render=function(t,e){var n=this,i=n._outputContext,a=n._setBackground,o=n._webgl2Canvas;this._personMaskUpscalePipeline||this.resetPersonMaskUpscalePipeline(),this._personMaskUpscalePipeline.render(t,e),i.save(),i.globalCompositeOperation="copy",i.drawImage(o,0,0),i.globalCompositeOperation="destination-over",a(t),i.restore()},r.prototype.resetPersonMaskUpscalePipeline=function(){var t,e=this,n=e._inputDimensions,i=e._maskBlurRadius,a=e._webgl2Canvas;(t=this._personMaskUpscalePipeline)===null||t===void 0||t.cleanUp(),this._personMaskUpscalePipeline=new RQ.PersonMaskUpscalePipeline(n,a,i),this._personMaskUpscalePipeline.updateBilateralFilterConfig({sigmaSpace:i})},r.prototype.updateMaskBlurRadius=function(t){var e;this._maskBlurRadius!==t&&(this._maskBlurRadius=t,(e=this._personMaskUpscalePipeline)===null||e===void 0||e.updateBilateralFilterConfig({sigmaSpace:t}))},r}();pv.PostProcessingStage=jQ;var IQ=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bd=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},$d=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(hl,"__esModule",{value:!0});hl.BackgroundProcessorPipeline=void 0;var sc=ar,MQ=xf,DQ=li,FQ=lv,BQ=pl,$Q=hv,UQ=pv,VQ=function(r){IQ(t,r);function t(e,n){n===void 0&&(n=function(){});var i=r.call(this)||this;i._outputCanvas=new OffscreenCanvas(1,1),i._webgl2Canvas=new OffscreenCanvas(1,1),i._benchmark=new MQ.Benchmark,i._inferenceInputCanvas=new OffscreenCanvas(sc.WASM_INFERENCE_DIMENSIONS.width,sc.WASM_INFERENCE_DIMENSIONS.height),i._inputFrameDownscaleMode=(0,DQ.isChromiumImageBitmap)()?"image-bitmap":"canvas";var a=e.assetsPath,o=e.deferInputFrameDownscale,s=e.maskBlurRadius;return i._assetsPath=a,i._deferInputFrameDownscale=o,i._onResizeWebGL2Canvas=n,i.addStage(new $Q.InputFrameDowscaleStage(i._inferenceInputCanvas,i._inputFrameDownscaleMode)),i.addStage(new UQ.PostProcessingStage(sc.WASM_INFERENCE_DIMENSIONS,i._webgl2Canvas,i._outputCanvas,s,function(l){return i._setBackground(l)})),i}return t.prototype.loadTwilioTFLite=function(){return Bd(this,void 0,void 0,function(){var e;return $d(this,function(n){switch(n.label){case 0:return e=t._twilioTFLite,e?[3,2]:(e=new FQ.TwilioTFLite,[4,e.initialize(this._assetsPath,sc.MODEL_NAME,sc.TFLITE_LOADER_NAME,sc.TFLITE_SIMD_LOADER_NAME)]);case 1:n.sent(),t._twilioTFLite=e,n.label=2;case 2:return[2,e.isSimdEnabled]}})})},t.prototype.render=function(e){return Bd(this,void 0,void 0,function(){var n,i,a,o,s,l,c,u,d,v,p,y,b,S,_,x,k,T,R,B,j;return $d(this,function(F){switch(F.label){case 0:return t._twilioTFLite?(n=this._stages,i=n[0],a=n[1],o=this,s=o._benchmark,l=o._deferInputFrameDownscale,c=o._inferenceInputCanvas,u=c.height,d=c.width,v=o._outputCanvas,p=o._webgl2Canvas,y=t._twilioTFLite,b=typeof VideoFrame=="function"&&e instanceof VideoFrame,S=b?{height:e.displayHeight,width:e.displayWidth}:e,_=S.height,x=S.width,k=v.width!==x,T=v.height!==_,R=k||T,k&&(v.width=x,p.width=x),T&&(v.height=_,p.height=_),R&&(a.resetPersonMaskUpscalePipeline(),this._onResizeWebGL2Canvas()),s.start("inputImageResizeDelay"),B=i.render(e).then(function(M){y.loadInputBuffer(M)}),l?[3,2]:[4,B]):[2,null];case 1:F.sent(),F.label=2;case 2:return s.end("inputImageResizeDelay"),s.start("segmentationDelay"),j=new ImageData(y.runInference(),d,u),s.end("segmentationDelay"),s.start("imageCompositionDelay"),a.render(e,j),s.end("imageCompositionDelay"),(typeof VideoFrame=="function"&&e instanceof VideoFrame||typeof ImageBitmap=="function"&&e instanceof ImageBitmap)&&e.close(),[2,this._outputCanvas]}})})},t.prototype.setDeferInputFrameDownscale=function(e){return Bd(this,void 0,void 0,function(){return $d(this,function(n){return this._deferInputFrameDownscale=e,[2]})})},t.prototype.setMaskBlurRadius=function(e){return Bd(this,void 0,void 0,function(){return $d(this,function(n){return this._stages[1].updateMaskBlurRadius(e),[2]})})},t._twilioTFLite=null,t}(BQ.Pipeline);hl.BackgroundProcessorPipeline=VQ;var vl={};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u_=Symbol("Comlink.proxy"),WE=Symbol("Comlink.endpoint"),qE=Symbol("Comlink.releaseProxy"),xh=Symbol("Comlink.finalizer"),Sh=Symbol("Comlink.thrown"),HE=r=>typeof r=="object"&&r!==null||typeof r=="function",zQ={canHandle:r=>HE(r)&&r[u_],serialize(r){const{port1:t,port2:e}=new MessageChannel;return d_(r,t),[e,[e]]},deserialize(r){return r.start(),KE(r)}},WQ={canHandle:r=>HE(r)&&Sh in r,serialize({value:r}){let t;return r instanceof Error?t={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:t={isError:!1,value:r},[t,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},f_=new Map([["proxy",zQ],["throw",WQ]]);function qQ(r,t){for(const e of r)if(t===e||e==="*"||e instanceof RegExp&&e.test(t))return!0;return!1}function d_(r,t=globalThis,e=["*"]){t.addEventListener("message",function n(i){if(!i||!i.data)return;if(!qQ(e,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:o,path:s}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(hs);let c;try{const u=s.slice(0,-1).reduce((v,p)=>v[p],r),d=s.reduce((v,p)=>v[p],r);switch(o){case"GET":c=d;break;case"SET":u[s.slice(-1)[0]]=hs(i.data.value),c=!0;break;case"APPLY":c=d.apply(u,l);break;case"CONSTRUCT":{const v=new d(...l);c=XE(v)}break;case"ENDPOINT":{const{port1:v,port2:p}=new MessageChannel;d_(r,p),c=JE(v,[v])}break;case"RELEASE":c=void 0;break;default:return}}catch(u){c={value:u,[Sh]:0}}Promise.resolve(c).catch(u=>({value:u,[Sh]:0})).then(u=>{const[d,v]=dp(u);t.postMessage(Object.assign(Object.assign({},d),{id:a}),v),o==="RELEASE"&&(t.removeEventListener("message",n),GE(t),xh in r&&typeof r[xh]=="function"&&r[xh]())}).catch(u=>{const[d,v]=dp({value:new TypeError("Unserializable return value"),[Sh]:0});t.postMessage(Object.assign(Object.assign({},d),{id:a}),v)})}),t.start&&t.start()}function HQ(r){return r.constructor.name==="MessagePort"}function GE(r){HQ(r)&&r.close()}function KE(r,t){const e=new Map;return r.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const o=e.get(a.id);if(o)try{o(a)}finally{e.delete(a.id)}}),uy(r,e,[],t)}function Ud(r){if(r)throw new Error("Proxy has been released and is not useable")}function QE(r){return vc(r,new Map,{type:"RELEASE"}).then(()=>{GE(r)})}const up=new WeakMap,fp="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const t=(up.get(r)||0)-1;up.set(r,t),t===0&&QE(r)});function GQ(r,t){const e=(up.get(t)||0)+1;up.set(t,e),fp&&fp.register(r,t,r)}function KQ(r){fp&&fp.unregister(r)}function uy(r,t,e=[],n=function(){}){let i=!1;const a=new Proxy(n,{get(o,s){if(Ud(i),s===qE)return()=>{KQ(a),QE(r),t.clear(),i=!0};if(s==="then"){if(e.length===0)return{then:()=>a};const l=vc(r,t,{type:"GET",path:e.map(c=>c.toString())}).then(hs);return l.then.bind(l)}return uy(r,t,[...e,s])},set(o,s,l){Ud(i);const[c,u]=dp(l);return vc(r,t,{type:"SET",path:[...e,s].map(d=>d.toString()),value:c},u).then(hs)},apply(o,s,l){Ud(i);const c=e[e.length-1];if(c===WE)return vc(r,t,{type:"ENDPOINT"}).then(hs);if(c==="bind")return uy(r,t,e.slice(0,-1));const[u,d]=xb(l);return vc(r,t,{type:"APPLY",path:e.map(v=>v.toString()),argumentList:u},d).then(hs)},construct(o,s){Ud(i);const[l,c]=xb(s);return vc(r,t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},c).then(hs)}});return GQ(a,r),a}function QQ(r){return Array.prototype.concat.apply([],r)}function xb(r){const t=r.map(dp);return[t.map(e=>e[0]),QQ(t.map(e=>e[1]))]}const YE=new WeakMap;function JE(r,t){return YE.set(r,t),r}function XE(r){return Object.assign(r,{[u_]:!0})}function YQ(r,t=globalThis,e="*"){return{postMessage:(n,i)=>r.postMessage(n,e,i),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function dp(r){for(const[t,e]of f_)if(e.canHandle(r)){const[n,i]=e.serialize(r);return[{type:"HANDLER",name:t,value:n},i]}return[{type:"RAW",value:r},YE.get(r)||[]]}function hs(r){switch(r.type){case"HANDLER":return f_.get(r.name).deserialize(r.value);case"RAW":return r.value}}function vc(r,t,e,n){return new Promise(i=>{const a=JQ();t.set(a,i),r.start&&r.start(),r.postMessage(Object.assign({id:a},e),n)})}function JQ(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const XQ=Object.freeze(Object.defineProperty({__proto__:null,createEndpoint:WE,expose:d_,finalizer:xh,proxy:XE,proxyMarker:u_,releaseProxy:qE,transfer:JE,transferHandlers:f_,windowEndpoint:YQ,wrap:KE},Symbol.toStringTag,{value:"Module"})),h_=zL(XQ);var Vd=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},zd=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(vl,"__esModule",{value:!0});vl.BackgroundProcessorPipelineProxy=void 0;var ZQ=h_,eY=xf,tY=function(){function r(t){this._benchmark=new eY.Benchmark,this._pipelineWorkerPromise=t}return r.prototype.loadTwilioTFLite=function(){return Vd(this,void 0,void 0,function(){var t;return zd(this,function(e){switch(e.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return t=e.sent(),[2,t.loadTwilioTFLite()]}})})},r.prototype.render=function(t){return Vd(this,void 0,void 0,function(){var e,n,i,a;return zd(this,function(o){switch(o.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return e=o.sent(),[4,e.render((0,ZQ.transfer)(t,[t]))];case 2:return n=o.sent(),a=(i=this._benchmark).merge,[4,e._benchmark];case 3:return a.apply(i,[o.sent()]),[2,n]}})})},r.prototype.setDeferInputFrameDownscale=function(t){return Vd(this,void 0,void 0,function(){var e;return zd(this,function(n){switch(n.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return e=n.sent(),[2,e.setDeferInputFrameDownscale(t)]}})})},r.prototype.setMaskBlurRadius=function(t){return Vd(this,void 0,void 0,function(){var e;return zd(this,function(n){switch(n.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return e=n.sent(),[2,e.setMaskBlurRadius(t)]}})})},r}();vl.BackgroundProcessorPipelineProxy=tY;var gv={},yv={},_v={},rY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_v,"__esModule",{value:!0});_v.SinglePassGaussianBlurFilterStage=void 0;var nY=pl;function iY(r){var t=1/Math.sqrt(2*Math.PI)/r;return"0".repeat(r+1).split("").map(function(e,n){return t*Math.exp(-.5*n*n/r/r)})}var aY=function(r){rY(t,r);function t(e,n,i,a,o){var s=this;o===void 0&&(o=a+1);var l=e.canvas,c=l.height,u=l.width;return s=r.call(this,{textureName:"u_inputTexture",textureUnit:a},{fragmentShaderSource:`#version 300 es
          precision highp float;

          uniform sampler2D u_inputTexture;
          uniform vec2 u_texelSize;
          uniform float u_direction;
          uniform float u_radius;
          uniform float u_gaussianBlurWeights[128];

          in vec2 v_texCoord;

          out vec4 outColor;

          void main() {
            float totalWeight = u_gaussianBlurWeights[0];
            vec3 newColor = totalWeight * texture(u_inputTexture, v_texCoord).rgb;

            for (float i = 1.0; i <= u_radius; i += 1.0) {
              float x = (1.0 - u_direction) * i;
              float y = u_direction * i;

              vec2 shift = vec2(x, y) * u_texelSize;
              vec2 coord = vec2(v_texCoord + shift);
              float weight = u_gaussianBlurWeights[int(i)];
              newColor += weight * texture(u_inputTexture, coord).rgb;
              totalWeight += weight;

              shift = vec2(-x, -y) * u_texelSize;
              coord = vec2(v_texCoord + shift);
              newColor += weight * texture(u_inputTexture, coord).rgb;
              totalWeight += weight;
            }

            newColor /= totalWeight;
            outColor = vec4(newColor, 1.0);
          }
        `,glOut:e,height:c,textureUnit:o,type:i,width:u,uniformVars:[{name:"u_direction",type:"float",values:[n==="vertical"?1:0]},{name:"u_texelSize",type:"float",values:[1/u,1/c]}]})||this,s.updateRadius(0),s}return t.prototype.updateRadius=function(e){this._setUniformVars([{name:"u_radius",type:"float",values:[e]},{name:"u_gaussianBlurWeights",type:"float:v",values:iY(e)}])},t}(nY.WebGL2Pipeline.ProcessingStage);_v.SinglePassGaussianBlurFilterStage=aY;var oY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(yv,"__esModule",{value:!0});yv.GaussianBlurFilterPipeline=void 0;var sY=pl,Sb=_v,cY=function(r){oY(t,r);function t(e,n){var i=r.call(this)||this;i._isWebGL2Supported=!0,i._outputCanvas=e,i._blurFilterRadius=n;var a=e.getContext("webgl2");return a?i.initializeWebGL2Pipeline(a):(i._isWebGL2Supported=!1,console.warn("Downgraded to Canvas2D for Gaussian blur due to missing WebGL2 support.")),i}return t.prototype.render=function(){this._isWebGL2Supported?r.prototype.render.call(this):this._renderFallback()},t.prototype._renderFallback=function(){var e=this._outputCanvas.getContext("2d");e.filter="blur(".concat(this._blurFilterRadius,"px)")},t.prototype.initializeWebGL2Pipeline=function(e){this.addStage(new Sb.SinglePassGaussianBlurFilterStage(e,"horizontal","texture",0,2)),this.addStage(new Sb.SinglePassGaussianBlurFilterStage(e,"vertical","canvas",2))},t.prototype.updateRadius=function(e){this._blurFilterRadius=e,this._isWebGL2Supported&&this._stages.forEach(function(n){return n.updateRadius(e)})},t.prototype.cleanUp=function(){this._isWebGL2Supported&&r.prototype.cleanUp.call(this)},t}(sY.WebGL2Pipeline);yv.GaussianBlurFilterPipeline=cY;var lY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),uY=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},fY=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(gv,"__esModule",{value:!0});gv.GaussianBlurBackgroundProcessorPipeline=void 0;var dY=li,hY=yv,pY=hl,vY=function(r){lY(t,r);function t(e){var n=r.call(this,e,function(){return n._resetGaussianBlurFilterPipeline()})||this;n._gaussianBlurFilterPipeline=null;var i=e.blurFilterRadius;return n._blurFilterRadius=i,n}return t.prototype.setBlurFilterRadius=function(e){var n;return uY(this,void 0,void 0,function(){return fY(this,function(i){return this._blurFilterRadius=e,[2,(n=this._gaussianBlurFilterPipeline)===null||n===void 0?void 0:n.updateRadius(this._blurFilterRadius)]})})},t.prototype._setBackground=function(e){var n=this,i=n._blurFilterRadius,a=n._outputCanvas,o=n._webgl2Canvas,s=a.getContext("2d");if(dY.isCanvasBlurSupported){s.filter="blur(".concat(i,"px)"),s.drawImage(e,0,0),s.filter="none";return}this._gaussianBlurFilterPipeline||this._resetGaussianBlurFilterPipeline(),this._gaussianBlurFilterPipeline.render(),s.drawImage(o,0,0)},t.prototype._resetGaussianBlurFilterPipeline=function(){var e,n=this,i=n._blurFilterRadius,a=n._webgl2Canvas;(e=this._gaussianBlurFilterPipeline)===null||e===void 0||e.cleanUp(),this._gaussianBlurFilterPipeline=new hY.GaussianBlurFilterPipeline(a,i),this._gaussianBlurFilterPipeline.updateRadius(i)},t}(pY.BackgroundProcessorPipeline);gv.GaussianBlurBackgroundProcessorPipeline=vY;var wv={},kf={},kb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},Pb=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(kf,"__esModule",{value:!0});kf.CorsWorker=void 0;var mY=function(r){var t=fetch;fetch=function(e,n){return t("".concat(r).concat(e),n)}},gY=function(r){var t=importScripts;importScripts=function(e){return t("".concat(r).concat(e))}},yY=function(){function r(t){!/:\/\//.test(t)||new RegExp("^".concat(window.location.origin)).test(t)?this.workerPromise=this._loadSameOrigin(t):this.workerPromise=this._loadCrossOrigin(t)}return r.prototype._loadCrossOrigin=function(t){return kb(this,void 0,void 0,function(){var e,n,i,a,o,s,l;return Pb(this,function(c){switch(c.label){case 0:return[4,fetch(t)];case 1:return e=c.sent(),[4,e.text()];case 2:return n=c.sent(),i="application/javascript",a="".concat(t.split("/").slice(0,-1).join("/"),"/"),o=["data:".concat(i,","),encodeURIComponent("(".concat(mY,')("').concat(a,'");')),encodeURIComponent("(".concat(gY,')("').concat(a,'");')),encodeURIComponent(n)].join(""),s=new Blob(['importScripts("'.concat(o,'")')],{type:i}),l=URL.createObjectURL(s),[2,new Worker(l)]}})})},r.prototype._loadSameOrigin=function(t){return kb(this,void 0,void 0,function(){return Pb(this,function(e){return[2,new Worker(t)]})})},r}();kf.CorsWorker=yY;var _Y=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wY=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},bY=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(wv,"__esModule",{value:!0});wv.GaussianBlurBackgroundProcessorPipelineProxy=void 0;var xY=h_,SY=ar,kY=kf,PY=vl,vg,TY=function(r){_Y(t,r);function t(e){var n=this,i=new kY.CorsWorker("".concat(e.assetsPath).concat(SY.TWILIO_GAUSSIAN_BLUR_BACKGROUND_PROCESSOR_PIPELINE_WORKER)),a=i.workerPromise.then(function(o){return vg||(vg=(0,xY.wrap)(o)),new vg(e)});return n=r.call(this,a)||this,n._pipelineWorkerPromise=a,n}return t.prototype.setBlurFilterRadius=function(e){return wY(this,void 0,void 0,function(){var n;return bY(this,function(i){switch(i.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return n=i.sent(),[2,n.setBlurFilterRadius(e)]}})})},t}(PY.BackgroundProcessorPipelineProxy);wv.GaussianBlurBackgroundProcessorPipelineProxy=TY;var bv={},ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.ImageFit=void 0;var Tb;(function(r){r.Contain="Contain",r.Cover="Cover",r.Fill="Fill",r.None="None"})(Tb||(ml.ImageFit=Tb={}));var EY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Eb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},Cb=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(bv,"__esModule",{value:!0});bv.VirtualBackgroundProcessorPipeline=void 0;var Wd=ml,CY=hl,LY=function(r){EY(t,r);function t(e){var n=r.call(this,e)||this,i=e.fitType;return n._backgroundImage=null,n._fitType=i,n}return t.prototype.setBackgroundImage=function(e){var n;return Eb(this,void 0,void 0,function(){return Cb(this,function(i){return(n=this._backgroundImage)===null||n===void 0||n.close(),this._backgroundImage=e,[2]})})},t.prototype.setFitType=function(e){return Eb(this,void 0,void 0,function(){return Cb(this,function(n){return this._fitType=e,[2]})})},t.prototype._setBackground=function(){var e=this,n=e._backgroundImage,i=e._fitType,a=e._outputCanvas;if(n){var o=a.getContext("2d"),s=n.width,l=n.height,c=a.width,u=a.height;if(i===Wd.ImageFit.Fill)o.drawImage(n,0,0,s,l,0,0,c,u);else if(i===Wd.ImageFit.None)o.drawImage(n,0,0,s,l);else{var d=this._getFitPosition(s,l,c,u,i),v=d.x,p=d.y,y=d.w,b=d.h;o.drawImage(n,0,0,s,l,v,p,y,b)}}},t.prototype._getFitPosition=function(e,n,i,a,o){var s=i/e,l=i,c=s*n;(o===Wd.ImageFit.Contain&&c>a||o===Wd.ImageFit.Cover&&a>c)&&(s=a/c,l=s*l,c=a);var u=(i-l)/2,d=(a-c)/2;return{x:u,y:d,w:l,h:c}},t}(CY.BackgroundProcessorPipeline);bv.VirtualBackgroundProcessorPipeline=LY;var xv={},AY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Lb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},Ab=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(xv,"__esModule",{value:!0});xv.VirtualBackgroundProcessorPipelineProxy=void 0;var Ob=h_,OY=ar,NY=kf,RY=vl,mg,jY=function(r){AY(t,r);function t(e){var n=this,i=new NY.CorsWorker("".concat(e.assetsPath).concat(OY.TWILIO_VIRTUAL_BACKGROUND_PROCESSOR_PIPELINE_WORKER)),a=i.workerPromise.then(function(o){return mg||(mg=(0,Ob.wrap)(o)),new mg(e)});return n=r.call(this,a)||this,n._pipelineWorkerPromise=a,n}return t.prototype.setBackgroundImage=function(e){return Lb(this,void 0,void 0,function(){var n;return Ab(this,function(i){switch(i.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return n=i.sent(),[2,n.setBackgroundImage((0,Ob.transfer)(e,[e]))]}})})},t.prototype.setFitType=function(e){return Lb(this,void 0,void 0,function(){var n;return Ab(this,function(i){switch(i.label){case 0:return[4,this._pipelineWorkerPromise];case 1:return n=i.sent(),[2,n.setFitType(e)]}})})},t}(RY.BackgroundProcessorPipelineProxy);xv.VirtualBackgroundProcessorPipelineProxy=jY;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.VirtualBackgroundProcessorPipelineProxy=r.VirtualBackgroundProcessorPipeline=r.GaussianBlurBackgroundProcessorPipelineProxy=r.GaussianBlurBackgroundProcessorPipeline=r.BackgroundProcessorPipelineProxy=r.BackgroundProcessorPipeline=void 0;var t=hl;Object.defineProperty(r,"BackgroundProcessorPipeline",{enumerable:!0,get:function(){return t.BackgroundProcessorPipeline}});var e=vl;Object.defineProperty(r,"BackgroundProcessorPipelineProxy",{enumerable:!0,get:function(){return e.BackgroundProcessorPipelineProxy}});var n=gv;Object.defineProperty(r,"GaussianBlurBackgroundProcessorPipeline",{enumerable:!0,get:function(){return n.GaussianBlurBackgroundProcessorPipeline}});var i=wv;Object.defineProperty(r,"GaussianBlurBackgroundProcessorPipelineProxy",{enumerable:!0,get:function(){return i.GaussianBlurBackgroundProcessorPipelineProxy}});var a=bv;Object.defineProperty(r,"VirtualBackgroundProcessorPipeline",{enumerable:!0,get:function(){return a.VirtualBackgroundProcessorPipeline}});var o=xv;Object.defineProperty(r,"VirtualBackgroundProcessorPipelineProxy",{enumerable:!0,get:function(){return o.VirtualBackgroundProcessorPipelineProxy}})})(cv);var IY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Nb=A&&A.__awaiter||function(r,t,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(r,t||[])).next())})},Rb=A&&A.__generator||function(r,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(r,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(wf,"__esModule",{value:!0});wf.BackgroundProcessor=void 0;var gg=ar,MY=bf,DY=sv,FY=cv,BY=function(r){IY(t,r);function t(e,n){var i=r.call(this)||this;i._deferInputFrameDownscale=!1,i._inputFrameCanvas=new OffscreenCanvas(1,1),i._inputFrameContext=i._inputFrameCanvas.getContext("2d",{willReadFrequently:!0}),i._isSimdEnabled=null,i._maskBlurRadius=gg.MASK_BLUR_RADIUS,i._outputFrameBuffer=null,i._outputFrameBufferContext=null,i._version=MY.version;var a=n.assetsPath,o=n.deferInputFrameDownscale,s=o===void 0?i._deferInputFrameDownscale:o,l=n.maskBlurRadius,c=l===void 0?i._maskBlurRadius:l;if(typeof a!="string")throw new Error("assetsPath parameter must be a string");return i._assetsPath=a.replace(/([^/])$/,"$1/"),i._backgroundProcessorPipeline=e,i._benchmark=i._backgroundProcessorPipeline._benchmark,i.deferInputFrameDownscale=s,i.maskBlurRadius=c,i}return Object.defineProperty(t.prototype,"deferInputFrameDownscale",{get:function(){return this._deferInputFrameDownscale},set:function(e){typeof e!="boolean"&&(console.warn("Provided deferInputFrameDownscale is not a boolean."),e=this._deferInputFrameDownscale),this._deferInputFrameDownscale!==e&&(this._deferInputFrameDownscale=e,this._backgroundProcessorPipeline.setDeferInputFrameDownscale(this._deferInputFrameDownscale).catch(function(){}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maskBlurRadius",{get:function(){return this._maskBlurRadius},set:function(e){(typeof e!="number"||e<0)&&(console.warn("Valid mask blur radius not found. Using ".concat(gg.MASK_BLUR_RADIUS," as default.")),e=gg.MASK_BLUR_RADIUS),this._maskBlurRadius!==e&&(this._maskBlurRadius=e,this._backgroundProcessorPipeline.setMaskBlurRadius(this._maskBlurRadius).catch(function(){}))},enumerable:!1,configurable:!0}),t.prototype.loadModel=function(){return Nb(this,void 0,void 0,function(){var e;return Rb(this,function(n){switch(n.label){case 0:return e=this,[4,this._backgroundProcessorPipeline.loadTwilioTFLite()];case 1:return e._isSimdEnabled=n.sent(),[2]}})})},t.prototype.processFrame=function(e,n){return Nb(this,void 0,void 0,function(){var i,a,o,s,l,c,u,d,v,p,y;return Rb(this,function(b){switch(b.label){case 0:if(!e||!n)throw new Error("Missing input or output frame buffer");return i=this,a=i._backgroundProcessorPipeline,o=i._benchmark,s=i._outputFrameBufferContext,o.end("captureFrameDelay"),o.end("totalProcessingDelay"),o.start("totalProcessingDelay"),o.start("processFrameDelay"),l=this._getFrameDimensions(e),c=l.width,u=l.height,this._outputFrameBuffer!==n&&(this._outputFrameBuffer=n,this._outputFrameBufferContext=n.getContext("2d")||n.getContext("bitmaprenderer")),this._inputFrameCanvas.width!==c&&(this._inputFrameCanvas.width=c),this._inputFrameCanvas.height!==u&&(this._inputFrameCanvas.height=u),e instanceof HTMLVideoElement?(this._inputFrameContext.drawImage(e,0,0),d=this._inputFrameCanvas):d=e,a instanceof FY.BackgroundProcessorPipeline?[4,a.render(d)]:[3,2];case 1:return p=b.sent(),[3,4];case 2:return[4,a.render(d instanceof OffscreenCanvas?d.transferToImageBitmap():d)];case 3:p=b.sent(),b.label=4;case 4:return v=p,s instanceof ImageBitmapRenderingContext?(y=v instanceof OffscreenCanvas?v.transferToImageBitmap():v,s.transferFromImageBitmap(y)):s instanceof CanvasRenderingContext2D&&v&&s.drawImage(v,0,0),o.end("processFrameDelay"),o.start("captureFrameDelay"),[2]}})})},t.prototype._getFrameDimensions=function(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e instanceof VideoFrame?{width:e.displayWidth,height:e.displayHeight}:{width:e.width,height:e.height}},t}(DY.Processor);wf.BackgroundProcessor=BY;var $Y=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ov,"__esModule",{value:!0});ov.GaussianBlurBackgroundProcessor=void 0;var au=ar,UY=wf,jb=cv,VY=function(r){$Y(t,r);function t(e){var n=this,i=e.blurFilterRadius,a=i===void 0?au.BLUR_FILTER_RADIUS:i,o=e.deferInputFrameDownscale,s=o===void 0?!1:o,l=e.maskBlurRadius,c=l===void 0?au.MASK_BLUR_RADIUS:l,u=e.useWebWorker,d=u===void 0?!0:u,v=e.assetsPath.replace(/([^/])$/,"$1/"),p=d?jb.GaussianBlurBackgroundProcessorPipelineProxy:jb.GaussianBlurBackgroundProcessorPipeline,y=new p({assetsPath:v,blurFilterRadius:a,deferInputFrameDownscale:s,maskBlurRadius:c});return n=r.call(this,y,e)||this,n._blurFilterRadius=au.BLUR_FILTER_RADIUS,n._name="GaussianBlurBackgroundProcessor",n.blurFilterRadius=e.blurFilterRadius,n}return Object.defineProperty(t.prototype,"blurFilterRadius",{get:function(){return this._blurFilterRadius},set:function(e){e||(console.warn("Valid blur filter radius not found. Using ".concat(au.BLUR_FILTER_RADIUS," as default.")),e=au.BLUR_FILTER_RADIUS),this._blurFilterRadius=e,this._backgroundProcessorPipeline.setBlurFilterRadius(this._blurFilterRadius).catch(function(){})},enumerable:!1,configurable:!0}),t}(UY.BackgroundProcessor);ov.GaussianBlurBackgroundProcessor=VY;var Sv={},zY=A&&A.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Sv,"__esModule",{value:!0});Sv.VirtualBackgroundProcessor=void 0;var qd=ml,WY=ar,qY=wf,Ib=cv,HY=function(r){zY(t,r);function t(e){var n=this,i=e.backgroundImage,a=e.deferInputFrameDownscale,o=a===void 0?!1:a,s=e.fitType,l=s===void 0?qd.ImageFit.Fill:s,c=e.maskBlurRadius,u=c===void 0?WY.MASK_BLUR_RADIUS:c,d=e.useWebWorker,v=d===void 0?!0:d,p=e.assetsPath.replace(/([^/])$/,"$1/"),y=v?Ib.VirtualBackgroundProcessorPipelineProxy:Ib.VirtualBackgroundProcessorPipeline,b=new y({assetsPath:p,deferInputFrameDownscale:o,fitType:l,maskBlurRadius:u});return n=r.call(this,b,e)||this,n._name="VirtualBackgroundProcessor",n.backgroundImage=i,n.fitType=l,n}return Object.defineProperty(t.prototype,"backgroundImage",{get:function(){return this._backgroundImage},set:function(e){var n=this;if(!e||!e.complete||!e.naturalHeight)throw new Error("Invalid image. Make sure that the image is an HTMLImageElement and has been successfully loaded");this._backgroundImage=e,createImageBitmap(this._backgroundImage).then(function(i){return n._backgroundProcessorPipeline.setBackgroundImage(i)}).catch(function(){})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fitType",{get:function(){return this._fitType},set:function(e){var n=Object.keys(qd.ImageFit);n.includes(e)||(console.warn("Valid fitType not found. Using '".concat(qd.ImageFit.Fill,"' as default.")),e=qd.ImageFit.Fill),this._fitType=e,this._backgroundProcessorPipeline.setFitType(this._fitType).catch(function(){})},enumerable:!1,configurable:!0}),t}(qY.BackgroundProcessor);Sv.VirtualBackgroundProcessor=HY;(function(r){var t=A&&A.__assign||function(){return t=Object.assign||function(s){for(var l,c=1,u=arguments.length;c<u;c++){l=arguments[c];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])}return s},t.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.VirtualBackgroundProcessor=r.version=r.isSupported=r.ImageFit=r.GaussianBlurBackgroundProcessor=void 0;var e=ov;Object.defineProperty(r,"GaussianBlurBackgroundProcessor",{enumerable:!0,get:function(){return e.GaussianBlurBackgroundProcessor}});var n=Sv;Object.defineProperty(r,"VirtualBackgroundProcessor",{enumerable:!0,get:function(){return n.VirtualBackgroundProcessor}});var i=ml;Object.defineProperty(r,"ImageFit",{enumerable:!0,get:function(){return i.ImageFit}});var a=li;Object.defineProperty(r,"isSupported",{enumerable:!0,get:function(){return a.isSupported}});var o=bf;Object.defineProperty(r,"version",{enumerable:!0,get:function(){return o.version}}),typeof window<"u"&&(window.Twilio=window.Twilio||{},window.Twilio.VideoProcessors=t(t({},window.Twilio.VideoProcessors),{GaussianBlurBackgroundProcessor:e.GaussianBlurBackgroundProcessor,ImageFit:i.ImageFit,isSupported:a.isSupported,version:o.version,VirtualBackgroundProcessor:n.VirtualBackgroundProcessor}))})(cy);const GY=()=>{const[r,t]=fe.useState("none"),[e,n]=fe.useState(!1),[i,a]=fe.useState(null),o=fe.useCallback(async c=>{try{n(!0),i&&(await c.removeProcessor(i),a(null)),t("none")}catch(u){console.error("Error removing background effect:",u)}finally{n(!1)}},[i]),s=fe.useCallback(async c=>{try{n(!0),i&&await c.removeProcessor(i);const u=new cy.GaussianBlurBackgroundProcessor({assetsPath:"/twilio-processors",maskBlurRadius:15,blurFilterRadius:15});await u.loadModel(),await c.addProcessor(u),a(u),t("blur")}catch(u){console.error("Error applying blur effect:",u),t("none")}finally{n(!1)}},[i]),l=fe.useCallback(async(c,u)=>{try{n(!0),i&&await c.removeProcessor(i);const d=new Image;d.crossOrigin="anonymous",d.src=u,await new Promise((p,y)=>{d.onload=p,d.onerror=y});const v=new cy.VirtualBackgroundProcessor({assetsPath:"/twilio-processors",backgroundImage:d,maskBlurRadius:5});await v.loadModel(),await c.addProcessor(v),a(v),t("virtual")}catch(d){console.error("Error applying virtual background:",d),t("none")}finally{n(!1)}},[i]);return{currentEffect:r,isProcessing:e,applyBlur:s,applyVirtualBackground:l,removeEffect:o}},na=Object.create(null);na.open="0";na.close="1";na.ping="2";na.pong="3";na.message="4";na.upgrade="5";na.noop="6";const kh=Object.create(null);Object.keys(na).forEach(r=>{kh[na[r]]=r});const fy={type:"error",data:"parser error"},ZE=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",eC=typeof ArrayBuffer=="function",tC=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,p_=({type:r,data:t},e,n)=>ZE&&t instanceof Blob?e?n(t):Mb(t,n):eC&&(t instanceof ArrayBuffer||tC(t))?e?n(t):Mb(new Blob([t]),n):n(na[r]+(t||"")),Mb=(r,t)=>{const e=new FileReader;return e.onload=function(){const n=e.result.split(",")[1];t("b"+(n||""))},e.readAsDataURL(r)};function Db(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let yg;function KY(r,t){if(ZE&&r.data instanceof Blob)return r.data.arrayBuffer().then(Db).then(t);if(eC&&(r.data instanceof ArrayBuffer||tC(r.data)))return t(Db(r.data));p_(r,!1,e=>{yg||(yg=new TextEncoder),t(yg.encode(e))})}const Fb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<Fb.length;r++)gu[Fb.charCodeAt(r)]=r;const QY=r=>{let t=r.length*.75,e=r.length,n,i=0,a,o,s,l;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);const c=new ArrayBuffer(t),u=new Uint8Array(c);for(n=0;n<e;n+=4)a=gu[r.charCodeAt(n)],o=gu[r.charCodeAt(n+1)],s=gu[r.charCodeAt(n+2)],l=gu[r.charCodeAt(n+3)],u[i++]=a<<2|o>>4,u[i++]=(o&15)<<4|s>>2,u[i++]=(s&3)<<6|l&63;return c},YY=typeof ArrayBuffer=="function",v_=(r,t)=>{if(typeof r!="string")return{type:"message",data:rC(r,t)};const e=r.charAt(0);return e==="b"?{type:"message",data:JY(r.substring(1),t)}:kh[e]?r.length>1?{type:kh[e],data:r.substring(1)}:{type:kh[e]}:fy},JY=(r,t)=>{if(YY){const e=QY(r);return rC(e,t)}else return{base64:!0,data:r}},rC=(r,t)=>{switch(t){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},nC="",XY=(r,t)=>{const e=r.length,n=new Array(e);let i=0;r.forEach((a,o)=>{p_(a,!1,s=>{n[o]=s,++i===e&&t(n.join(nC))})})},ZY=(r,t)=>{const e=r.split(nC),n=[];for(let i=0;i<e.length;i++){const a=v_(e[i],t);if(n.push(a),a.type==="error")break}return n};function eJ(){return new TransformStream({transform(r,t){KY(r,e=>{const n=e.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,n)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(e)})}})}let _g;function Hd(r){return r.reduce((t,e)=>t+e.length,0)}function Gd(r,t){if(r[0].length===t)return r.shift();const e=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)e[i]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),e}function tJ(r,t){_g||(_g=new TextDecoder);const e=[];let n=0,i=-1,a=!1;return new TransformStream({transform(o,s){for(e.push(o);;){if(n===0){if(Hd(e)<1)break;const l=Gd(e,1);a=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Hd(e)<2)break;const l=Gd(e,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(Hd(e)<8)break;const l=Gd(e,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){s.enqueue(fy);break}i=u*Math.pow(2,32)+c.getUint32(4),n=3}else{if(Hd(e)<i)break;const l=Gd(e,i);s.enqueue(v_(a?l:_g.decode(l),t)),n=0}if(i===0||i>r){s.enqueue(fy);break}}}})}const iC=4;function Ar(r){if(r)return rJ(r)}function rJ(r){for(var t in Ar.prototype)r[t]=Ar.prototype[t];return r}Ar.prototype.on=Ar.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};Ar.prototype.once=function(r,t){function e(){this.off(r,e),t.apply(this,arguments)}return e.fn=t,this.on(r,e),this};Ar.prototype.off=Ar.prototype.removeListener=Ar.prototype.removeAllListeners=Ar.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,i=0;i<e.length;i++)if(n=e[i],n===t||n.fn===t){e.splice(i,1);break}return e.length===0&&delete this._callbacks["$"+r],this};Ar.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+r],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,i=e.length;n<i;++n)e[n].apply(this,t)}return this};Ar.prototype.emitReserved=Ar.prototype.emit;Ar.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Ar.prototype.hasListeners=function(r){return!!this.listeners(r).length};const kv=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),si=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),nJ="arraybuffer";function aC(r,...t){return t.reduce((e,n)=>(r.hasOwnProperty(n)&&(e[n]=r[n]),e),{})}const iJ=si.setTimeout,aJ=si.clearTimeout;function Pv(r,t){t.useNativeTimers?(r.setTimeoutFn=iJ.bind(si),r.clearTimeoutFn=aJ.bind(si)):(r.setTimeoutFn=si.setTimeout.bind(si),r.clearTimeoutFn=si.clearTimeout.bind(si))}const oJ=1.33;function sJ(r){return typeof r=="string"?cJ(r):Math.ceil((r.byteLength||r.size)*oJ)}function cJ(r){let t=0,e=0;for(let n=0,i=r.length;n<i;n++)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function oC(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function lJ(r){let t="";for(let e in r)r.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t}function uJ(r){let t={},e=r.split("&");for(let n=0,i=e.length;n<i;n++){let a=e[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class fJ extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class m_ extends Ar{constructor(t){super(),this.writable=!1,Pv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new fJ(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=v_(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=lJ(t);return e.length?"?"+e:""}}class dJ extends m_{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};ZY(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,XY(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=oC()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let sC=!1;try{sC=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const hJ=sC;function pJ(){}class vJ extends dJ{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}}class ra extends Ar{constructor(t,e,n){super(),this.createRequest=t,Pv(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const e=aC(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=ra.requestsCount++,ra.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=pJ,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ra.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ra.requestsCount=0;ra.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Bb);else if(typeof addEventListener=="function"){const r="onpagehide"in si?"pagehide":"unload";addEventListener(r,Bb,!1)}}function Bb(){for(let r in ra.requests)ra.requests.hasOwnProperty(r)&&ra.requests[r].abort()}const mJ=function(){const r=cC({xdomain:!1});return r&&r.responseType!==null}();class gJ extends vJ{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=mJ&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new ra(cC,this.uri(),t)}}function cC(r){const t=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||hJ))return new XMLHttpRequest}catch{}if(!t)try{return new si[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const lC=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yJ extends m_{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,n=lC?{}:aC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],i=e===t.length-1;p_(n,this.supportsBinary,a=>{try{this.doWrite(n,a)}catch{}i&&kv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=oC()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const wg=si.WebSocket||si.MozWebSocket;class _J extends yJ{createSocket(t,e,n){return lC?new wg(t,e,n):e?new wg(t,e):new wg(t)}doWrite(t,e){this.ws.send(e)}}class wJ extends m_{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=tJ(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),i=eJ();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{n.read().then(({done:s,value:l})=>{s||(this.onPacket(l),a())}).catch(s=>{})};a();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],i=e===t.length-1;this._writer.write(n).then(()=>{i&&kv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const bJ={websocket:_J,webtransport:wJ,polling:gJ},xJ=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,SJ=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function dy(r){if(r.length>8e3)throw"URI too long";const t=r,e=r.indexOf("["),n=r.indexOf("]");e!=-1&&n!=-1&&(r=r.substring(0,e)+r.substring(e,n).replace(/:/g,";")+r.substring(n,r.length));let i=xJ.exec(r||""),a={},o=14;for(;o--;)a[SJ[o]]=i[o]||"";return e!=-1&&n!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=kJ(a,a.path),a.queryKey=PJ(a,a.query),a}function kJ(r,t){const e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function PJ(r,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,a){i&&(e[i]=a)}),e}const hy=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ph=[];hy&&addEventListener("offline",()=>{Ph.forEach(r=>r())},!1);class Eo extends Ar{constructor(t,e){if(super(),this.binaryType=nJ,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const n=dy(t);e.hostname=n.host,e.secure=n.protocol==="https"||n.protocol==="wss",e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=dy(e.host).host);Pv(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=uJ(this.opts.query)),hy&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ph.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=iC,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Eo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Eo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+=sJ(i)),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,kv(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,n){return this._sendPacket("message",t,e,n),this}send(t,e,n){return this._sendPacket("message",t,e,n),this}_sendPacket(t,e,n,i){if(typeof e=="function"&&(i=e,e=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const a={type:t,data:e,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Eo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hy&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Ph.indexOf(this._offlineEventListener);n!==-1&&Ph.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}Eo.protocol=iC;class TJ extends Eo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;Eo.priorWebsocketSuccess=!1;const i=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Eo.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=e.name,this.emitReserved("upgradeError",v)}}))};function a(){n||(n=!0,u(),e.close(),e=null)}const o=d=>{const v=new Error("probe error: "+d);v.transport=e.name,a(),this.emitReserved("upgradeError",v)};function s(){o("transport closed")}function l(){o("socket closed")}function c(d){e&&d.name!==e.name&&a()}const u=()=>{e.removeListener("open",i),e.removeListener("error",o),e.removeListener("close",s),this.off("close",l),this.off("upgrading",c)};e.once("open",i),e.once("error",o),e.once("close",s),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}let EJ=class extends TJ{constructor(t,e={}){const n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>bJ[i]).filter(i=>!!i)),super(t,n)}};function CJ(r,t="",e){let n=r;e=e||typeof location<"u"&&location,r==null&&(r=e.protocol+"//"+e.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=e.protocol+r:r=e.host+r),/^(https?|wss?):\/\//.test(r)||(typeof e<"u"?r=e.protocol+"//"+r:r="https://"+r),n=dy(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const a=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(e&&e.port===n.port?"":":"+n.port),n}const LJ=typeof ArrayBuffer=="function",AJ=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,uC=Object.prototype.toString,OJ=typeof Blob=="function"||typeof Blob<"u"&&uC.call(Blob)==="[object BlobConstructor]",NJ=typeof File=="function"||typeof File<"u"&&uC.call(File)==="[object FileConstructor]";function g_(r){return LJ&&(r instanceof ArrayBuffer||AJ(r))||OJ&&r instanceof Blob||NJ&&r instanceof File}function Th(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let e=0,n=r.length;e<n;e++)if(Th(r[e]))return!0;return!1}if(g_(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Th(r.toJSON(),!0);for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&Th(r[e]))return!0;return!1}function RJ(r){const t=[],e=r.data,n=r;return n.data=py(e,t),n.attachments=t.length,{packet:n,buffers:t}}function py(r,t){if(!r)return r;if(g_(r)){const e={_placeholder:!0,num:t.length};return t.push(r),e}else if(Array.isArray(r)){const e=new Array(r.length);for(let n=0;n<r.length;n++)e[n]=py(r[n],t);return e}else if(typeof r=="object"&&!(r instanceof Date)){const e={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=py(r[n],t));return e}return r}function jJ(r,t){return r.data=vy(r.data,t),delete r.attachments,r}function vy(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=vy(r[e],t);else if(typeof r=="object")for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=vy(r[e],t));return r}const IJ=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],MJ=5;var Tt;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Tt||(Tt={}));class DJ{constructor(t){this.replacer=t}encode(t){return(t.type===Tt.EVENT||t.type===Tt.ACK)&&Th(t)?this.encodeAsBinary({type:t.type===Tt.EVENT?Tt.BINARY_EVENT:Tt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Tt.BINARY_EVENT||t.type===Tt.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=RJ(t),n=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(n),i}}function $b(r){return Object.prototype.toString.call(r)==="[object Object]"}class y_ extends Ar{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===Tt.BINARY_EVENT;n||e.type===Tt.BINARY_ACK?(e.type=n?Tt.EVENT:Tt.ACK,this.reconstructor=new FJ(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(g_(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(Tt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Tt.BINARY_EVENT||n.type===Tt.BINARY_ACK){const a=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const o=t.substring(a,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(e+1)==="/"){const a=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(a,e)}else n.nsp="/";const i=t.charAt(e+1);if(i!==""&&Number(i)==i){const a=e+1;for(;++e;){const o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}n.id=Number(t.substring(a,e+1))}if(t.charAt(++e)){const a=this.tryParse(t.substr(e));if(y_.isPayloadValid(n.type,a))n.data=a;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case Tt.CONNECT:return $b(e);case Tt.DISCONNECT:return e===void 0;case Tt.CONNECT_ERROR:return typeof e=="string"||$b(e);case Tt.EVENT:case Tt.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&IJ.indexOf(e[0])===-1);case Tt.ACK:case Tt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class FJ{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=jJ(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const BJ=Object.freeze(Object.defineProperty({__proto__:null,Decoder:y_,Encoder:DJ,get PacketType(){return Tt},protocol:MJ},Symbol.toStringTag,{value:"Module"}));function Ti(r,t,e){return r.on(t,e),function(){r.off(t,e)}}const $J=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fC extends Ar{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ti(t,"open",this.onopen.bind(this)),Ti(t,"packet",this.onpacket.bind(this)),Ti(t,"error",this.onerror.bind(this)),Ti(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,i,a;if($J.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:Tt.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const u=this.ids++,d=e.pop();this._registerAckCallback(u,d),o.id=u}const s=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!s||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[t]=e;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);e.call(this,new Error("operation has timed out"))},i),o=(...s)=>{this.io.clearTimeoutFn(a),e.apply(this,s)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((n,i)=>{const a=(o,s)=>o?i(o):n(s);a.withError=!0,e.push(a),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(i)):(this._queue.shift(),e&&e(null,...a)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Tt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Tt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tt.EVENT:case Tt.BINARY_EVENT:this.onevent(t);break;case Tt.ACK:case Tt.BINARY_ACK:this.onack(t);break;case Tt.DISCONNECT:this.ondisconnect();break;case Tt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...i){n||(n=!0,e.packet({type:Tt.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Tt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function gl(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}gl.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*r);r=Math.floor(t*10)&1?r+e:r-e}return Math.min(r,this.max)|0};gl.prototype.reset=function(){this.attempts=0};gl.prototype.setMin=function(r){this.ms=r};gl.prototype.setMax=function(r){this.max=r};gl.prototype.setJitter=function(r){this.jitter=r};class my extends Ar{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Pv(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new gl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||BJ;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new EJ(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=Ti(e,"open",function(){n.onopen(),t&&t()}),a=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),t?t(s):this.maybeReconnectOnOpen()},o=Ti(e,"error",a);if(this._timeout!==!1){const s=this._timeout,l=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),e.close()},s);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ti(t,"ping",this.onping.bind(this)),Ti(t,"data",this.ondata.bind(this)),Ti(t,"error",this.onerror.bind(this)),Ti(t,"close",this.onclose.bind(this)),Ti(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){kv(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new fC(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ou={};function Cu(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};const e=CJ(r,t.path||"/socket.io"),n=e.source,i=e.id,a=e.path,o=ou[i]&&a in ou[i].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return s?l=new my(n,t):(ou[i]||(ou[i]=new my(n,t)),l=ou[i]),e.query&&!t.query&&(t.query=e.queryKey),l.socket(e.path,t)}Object.assign(Cu,{Manager:my,Socket:fC,io:Cu,connect:Cu});const UJ=({roomName:r,doctorIdentity:t,role:e,enabled:n})=>{const[i,a]=fe.useState(!1),[o,s]=fe.useState(!1),[l,c]=fe.useState(!1),[u,d]=fe.useState(null),[v,p]=fe.useState(!1),[y,b]=fe.useState(null),S=fe.useRef(null);fe.useEffect(()=>{const T=window.location.origin;console.log("[Postural Analysis] Connecting to Socket.io:",T);const R=Cu(`${T}/telemedicine`,{transports:["websocket","polling"],reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5});return S.current=R,R.on("connect",()=>{console.log("[Postural Analysis] Connected to Socket.io"),a(!0),b(null)}),R.on("disconnect",()=>{console.log("[Postural Analysis] Disconnected from Socket.io"),a(!1),s(!1)}),R.on("connect_error",B=>{console.error("[Postural Analysis] Connection error:",B),b("Error connecting to telemedicine service")}),R.on("session-created",B=>{console.log("[Postural Analysis] Session created:",B),s(!0),c(B.patientConnected)}),R.on("session-joined",B=>{console.log("[Postural Analysis] Session joined:",B)}),R.on("patient-connected",B=>{console.log("[Postural Analysis] Patient connected:",B),c(!0)}),R.on("session-activated-by-doctor",B=>{console.log("[Postural Analysis] Session activated by doctor:",B),s(!0)}),R.on("patient-disconnected",()=>{console.log("[Postural Analysis] Patient disconnected"),c(!1)}),R.on("session-ended",B=>{console.log("[Postural Analysis] Session ended:",B),s(!1),c(!1)}),e==="doctor"&&R.on("pose-data-update",B=>{var j,F,M,q;console.log("[Doctor] 📊 Received pose data:",{landmarksCount:((j=B.landmarks)==null?void 0:j.length)||0,timestamp:B.timestamp,hasMetrics:!!B.metrics,hasPosture:!!((F=B.metrics)!=null&&F.posture),hasJoints:!!((M=B.metrics)!=null&&M.joints),hasSymmetry:!!((q=B.metrics)!=null&&q.symmetry)}),d(B),p(!0)}),R.on("session-error",B=>{console.error("[Postural Analysis] Session error:",B),b(B.message)}),R.on("join-error",B=>{console.error("[Postural Analysis] Join error:",B),b(B.message)}),()=>{console.log("[Postural Analysis] Cleaning up Socket.io connection"),R.disconnect()}},[n,e]);const _=fe.useCallback(()=>{if(!S.current||!i){console.warn("[Postural Analysis] ⚠️ Cannot start session: not connected");return}console.log("[Postural Analysis] ✅ Starting session:",r),p(!1),S.current.emit("create-analysis-session",{roomName:r,doctorIdentity:t})},[i,r,t]),x=fe.useCallback(()=>{if(!S.current||!i){console.warn("[Postural Analysis] Cannot end session: not connected");return}console.log("[Postural Analysis] Ending session:",r),S.current.emit("end-analysis-session",{roomName:r}),s(!1),c(!1),d(null),p(!1)},[i,r]),k=fe.useCallback(T=>{!S.current||!i||!o||S.current.emit("pose-data",{roomName:r,poseData:T})},[i,o,r]);return fe.useEffect(()=>{var T;!i||e!=="patient"||(console.log("[Postural Analysis] Patient attempting to join session:",r),(T=S.current)==null||T.emit("join-analysis-session",{roomName:r,patientIdentity:"Patient"}))},[n,i,e,r]),{isConnected:i,sessionActive:o,patientConnected:l,latestPoseData:u,hasReceivedFirstFrame:v,error:y,startSession:_,endSession:x,sendPoseData:k}},bg=({participant:r,isLocal:t=!1})=>{const e=fe.useRef(null),n=fe.useRef(null),[i,a]=fe.useState(null),[o,s]=fe.useState(null);return fe.useEffect(()=>{if(i&&e.current){try{i.attach(e.current),console.log("Video track attached successfully for",r.identity)}catch(l){console.error("Error attaching video track:",l)}return()=>{i.detach().forEach(l=>l.remove())}}},[i,r.identity]),fe.useEffect(()=>{if(o&&n.current&&!t){try{o.attach(n.current),console.log("Audio track attached successfully for",r.identity)}catch(l){console.error("Error attaching audio track:",l)}return()=>{o.detach().forEach(l=>l.remove())}}},[o,t,r.identity]),fe.useEffect(()=>{const l=u=>{console.log(`Track ${u.kind} subscribed for ${r.identity}`,u),u.kind==="video"?a(u):u.kind==="audio"&&s(u)},c=u=>{console.log(`Track ${u.kind} unsubscribed for ${r.identity}`),u.kind==="video"?a(null):u.kind==="audio"&&s(null)};return console.log(`Setting up participant: ${r.identity}, tracks:`,r.tracks.size),r.tracks.forEach(u=>{if("isSubscribed"in u){const d=u;if(console.log("Publication:",d.trackName,d.isSubscribed,d.track),d.isSubscribed&&d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&l(v)}}else{const d=u;if(console.log("Publication:",d.trackName,d.track),d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&l(v)}}}),t?(r.on("trackPublished",u=>{u.track&&(u.track.kind==="video"||u.track.kind==="audio")&&l(u.track)}),r.on("trackUnpublished",u=>{u.track&&(u.track.kind==="video"||u.track.kind==="audio")&&c(u.track)})):(r.on("trackSubscribed",l),r.on("trackUnsubscribed",c)),()=>{r.tracks.forEach(u=>{if("isSubscribed"in u){const d=u;if(d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&c(v)}}else{const d=u;if(d.track){const v=d.track;(v.kind==="video"||v.kind==="audio")&&c(v)}}})}},[r,t]),m.jsxs("div",{className:`relative bg-gray-900 overflow-hidden ${t?"h-full rounded-lg":"h-full w-full"}`,children:[i?m.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:t,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:m.jsx("div",{className:`text-white font-bold ${t?"text-4xl":"text-6xl sm:text-7xl md:text-8xl"}`,children:r.identity.charAt(0).toUpperCase()})}),!t&&m.jsx("audio",{ref:n,autoPlay:!0}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/60 to-transparent p-3 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-white font-semibold text-sm sm:text-base drop-shadow-lg",children:t?"Tú":r.identity}),m.jsxs("div",{className:"flex gap-2",children:[!o&&m.jsx("span",{className:"text-red-400 text-xs sm:text-sm drop-shadow-lg",children:"🔇 Silenciado"}),!i&&m.jsx("span",{className:"text-red-400 text-xs sm:text-sm drop-shadow-lg",children:"📹 Sin video"})]})]})})]})},VJ=({onApplyBlur:r,onApplyVirtualBackground:t,onRemoveEffect:e,isProcessing:n,currentEffect:i})=>{const[a,o]=fe.useState(!1),s=[{id:"office",name:"Oficina",url:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=1920&h=1080&fit=crop"},{id:"nature",name:"Naturaleza",url:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop"},{id:"abstract",name:"Abstracto",url:"https://images.unsplash.com/photo-1557683316-973673baf926?w=1920&h=1080&fit=crop"}];return m.jsxs("div",{className:"relative",children:[m.jsxs("button",{onClick:()=>o(!a),className:"bg-[#2a3942] text-white p-3 rounded-full hover:bg-[#374850] transition flex items-center gap-2",title:"Cambiar fondo",disabled:n,children:[m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),n&&m.jsx("span",{className:"text-xs",children:"..."})]}),a&&m.jsxs("div",{className:"absolute bottom-full mb-2 right-0 bg-[#1f2c34] rounded-xl shadow-2xl p-3 min-w-[250px] border border-gray-700",children:[m.jsx("h3",{className:"text-white text-sm font-semibold mb-3 px-2",children:"Efectos de fondo"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("button",{onClick:()=>{e(),o(!1)},disabled:n,className:`w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-3 ${i==="none"?"bg-[#00a884] text-white":"text-gray-300 hover:bg-[#2a3942]"} disabled:opacity-50`,children:[m.jsx("div",{className:"w-12 h-8 bg-gray-600 rounded flex items-center justify-center",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m.jsx("span",{className:"text-sm",children:"Sin efecto"})]}),m.jsxs("button",{onClick:()=>{r(),o(!1)},disabled:n,className:`w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-3 ${i==="blur"?"bg-[#00a884] text-white":"text-gray-300 hover:bg-[#2a3942]"} disabled:opacity-50`,children:[m.jsx("div",{className:"w-12 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded blur-sm"}),m.jsx("span",{className:"text-sm",children:"Desenfocar fondo"})]}),m.jsxs("div",{className:"border-t border-gray-700 my-2 pt-2",children:[m.jsx("p",{className:"text-xs text-gray-500 px-2 mb-2",children:"Fondos virtuales"}),s.map(l=>m.jsxs("button",{onClick:()=>{t(l.url),o(!1)},disabled:n,className:"w-full text-left px-3 py-2 rounded-lg transition flex items-center gap-3 text-gray-300 hover:bg-[#2a3942] disabled:opacity-50 mb-1",children:[m.jsx("div",{className:"w-12 h-8 rounded bg-cover bg-center",style:{backgroundImage:`url(${l.url})`}}),m.jsx("span",{className:"text-sm",children:l.name})]},l.id))]})]}),m.jsx("button",{onClick:()=>o(!1),className:"w-full mt-3 text-xs text-gray-500 hover:text-white transition py-1",children:"Cerrar"})]})]})},zJ=({isAudioEnabled:r,isVideoEnabled:t,onToggleAudio:e,onToggleVideo:n,onLeave:i,showBackgroundControls:a=!1,onApplyBlur:o,onApplyVirtualBackground:s,onRemoveEffect:l,isProcessingBackground:c=!1,currentBackgroundEffect:u="none",showPosturalAnalysis:d=!1,onOpenPosturalAnalysis:v})=>m.jsxs("div",{className:"bg-gradient-to-t from-black/80 via-black/60 to-transparent pb-safe",children:[m.jsxs("div",{className:"px-6 py-6 flex items-center justify-center gap-6",children:[a&&o&&s&&l&&m.jsx(VJ,{onApplyBlur:o,onApplyVirtualBackground:s,onRemoveEffect:l,isProcessing:c,currentEffect:u}),m.jsx("button",{onClick:n,className:`w-14 h-14 rounded-full transition-all flex items-center justify-center ${t?"bg-[#374045] hover:bg-[#4a5459] text-white":"bg-white/90 hover:bg-white text-gray-800"}`,title:t?"Apagar cámara":"Encender cámara",children:t?m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}):m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"})})}),m.jsx("button",{onClick:e,className:`w-14 h-14 rounded-full transition-all flex items-center justify-center ${r?"bg-[#374045] hover:bg-[#4a5459] text-white":"bg-white/90 hover:bg-white text-gray-800"}`,title:r?"Silenciar":"Activar micrófono",children:r?m.jsxs("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),m.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}):m.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"})})}),d&&v&&m.jsx("button",{onClick:v,className:"w-14 h-14 rounded-full bg-[#374045] hover:bg-[#4a5459] text-white transition-all flex items-center justify-center",title:"Análisis Postural",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),m.jsx("button",{onClick:i,className:"w-16 h-16 rounded-full bg-[#ff3b30] hover:bg-[#ff1f1f] text-white transition-all flex items-center justify-center shadow-lg",title:"Finalizar llamada",children:m.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"})})})]}),m.jsxs("div",{className:"flex items-center justify-center gap-2 pb-4 text-xs text-gray-500",children:[m.jsx("span",{children:"Powered by"}),m.jsx("span",{className:"font-medium",children:"BSL Tech. +"})]})]}),WJ="modulepreload",qJ=function(r){return"/"+r},Ub={},xg=function(t,e,n){let i=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(e.map(l=>{if(l=qJ(l),l in Ub)return;Ub[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":WJ,c||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),c)return new Promise((v,p)=>{d.addEventListener("load",v),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};function $t(r){"@babel/helpers - typeof";return $t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(r)}var Oi=Uint8Array,qn=Uint16Array,__=Int32Array,w_=new Oi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),b_=new Oi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Vb=new Oi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dC=function(r,t){for(var e=new qn(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var i=new __(e[30]),n=1;n<30;++n)for(var a=e[n];a<e[n+1];++a)i[a]=a-e[n]<<5|n;return{b:e,r:i}},hC=dC(w_,2),HJ=hC.b,gy=hC.r;HJ[28]=258,gy[258]=28;var GJ=dC(b_,0),zb=GJ.r,yy=new qn(32768);for(var Zt=0;Zt<32768;++Zt){var oo=(Zt&43690)>>1|(Zt&21845)<<1;oo=(oo&52428)>>2|(oo&13107)<<2,oo=(oo&61680)>>4|(oo&3855)<<4,yy[Zt]=((oo&65280)>>8|(oo&255)<<8)>>1}var Lu=function(r,t,e){for(var n=r.length,i=0,a=new qn(t);i<n;++i)r[i]&&++a[r[i]-1];var o=new qn(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(e){s=new qn(1<<t);var l=15-t;for(i=0;i<n;++i)if(r[i])for(var c=i<<4|r[i],u=t-r[i],d=o[r[i]-1]++<<u,v=d|(1<<u)-1;d<=v;++d)s[yy[d]>>l]=c}else for(s=new qn(n),i=0;i<n;++i)r[i]&&(s[i]=yy[o[r[i]-1]++]>>15-r[i]);return s},Ns=new Oi(288);for(var Zt=0;Zt<144;++Zt)Ns[Zt]=8;for(var Zt=144;Zt<256;++Zt)Ns[Zt]=9;for(var Zt=256;Zt<280;++Zt)Ns[Zt]=7;for(var Zt=280;Zt<288;++Zt)Ns[Zt]=8;var hp=new Oi(32);for(var Zt=0;Zt<32;++Zt)hp[Zt]=5;var KJ=Lu(Ns,9,0),QJ=Lu(hp,5,0),pC=function(r){return(r+7)/8|0},YJ=function(r,t,e){return(e==null||e>r.length)&&(e=r.length),new Oi(r.subarray(t,e))},xa=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8},su=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},Sg=function(r,t){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var i=e.length,a=e.slice();if(!i)return{t:mC,l:0};if(i==1){var o=new Oi(e[0].s+1);return o[e[0].s]=1,{t:o,l:1}}e.sort(function(R,B){return R.f-B.f}),e.push({s:-1,f:25001});var s=e[0],l=e[1],c=0,u=1,d=2;for(e[0]={s:-1,f:s.f+l.f,l:s,r:l};u!=i-1;)s=e[e[c].f<e[d].f?c++:d++],l=e[c!=u&&e[c].f<e[d].f?c++:d++],e[u++]={s:-1,f:s.f+l.f,l:s,r:l};for(var v=a[0].s,n=1;n<i;++n)a[n].s>v&&(v=a[n].s);var p=new qn(v+1),y=_y(e[u-1],p,0);if(y>t){var n=0,b=0,S=y-t,_=1<<S;for(a.sort(function(B,j){return p[j.s]-p[B.s]||B.f-j.f});n<i;++n){var x=a[n].s;if(p[x]>t)b+=_-(1<<y-p[x]),p[x]=t;else break}for(b>>=S;b>0;){var k=a[n].s;p[k]<t?b-=1<<t-p[k]++-1:++n}for(;n>=0&&b;--n){var T=a[n].s;p[T]==t&&(--p[T],++b)}y=t}return{t:new Oi(p),l:y}},_y=function(r,t,e){return r.s==-1?Math.max(_y(r.l,t,e+1),_y(r.r,t,e+1)):t[r.s]=e},Wb=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new qn(++t),n=0,i=r[0],a=1,o=function(l){e[n++]=l},s=1;s<=t;++s)if(r[s]==i&&s!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=r[s]}return{c:e.subarray(0,n),n:t}},cu=function(r,t){for(var e=0,n=0;n<t.length;++n)e+=r[n]*t[n];return e},vC=function(r,t,e){var n=e.length,i=pC(t+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var a=0;a<n;++a)r[i+a+4]=e[a];return(i+4+n)*8},qb=function(r,t,e,n,i,a,o,s,l,c,u){xa(t,u++,e),++i[256];for(var d=Sg(i,15),v=d.t,p=d.l,y=Sg(a,15),b=y.t,S=y.l,_=Wb(v),x=_.c,k=_.n,T=Wb(b),R=T.c,B=T.n,j=new qn(19),F=0;F<x.length;++F)++j[x[F]&31];for(var F=0;F<R.length;++F)++j[R[F]&31];for(var M=Sg(j,7),q=M.t,O=M.l,L=19;L>4&&!q[Vb[L-1]];--L);var z=c+5<<3,I=cu(i,Ns)+cu(a,hp)+o,X=cu(i,v)+cu(a,b)+o+14+3*L+cu(j,q)+2*j[16]+3*j[17]+7*j[18];if(l>=0&&z<=I&&z<=X)return vC(t,u,r.subarray(l,l+c));var Z,oe,H,re;if(xa(t,u,1+(X<I)),u+=2,X<I){Z=Lu(v,p,0),oe=v,H=Lu(b,S,0),re=b;var ue=Lu(q,O,0);xa(t,u,k-257),xa(t,u+5,B-1),xa(t,u+10,L-4),u+=14;for(var F=0;F<L;++F)xa(t,u+3*F,q[Vb[F]]);u+=3*L;for(var ne=[x,R],N=0;N<2;++N)for(var U=ne[N],F=0;F<U.length;++F){var G=U[F]&31;xa(t,u,ue[G]),u+=q[G],G>15&&(xa(t,u,U[F]>>5&127),u+=U[F]>>12)}}else Z=KJ,oe=Ns,H=QJ,re=hp;for(var F=0;F<s;++F){var ee=n[F];if(ee>255){var G=ee>>18&31;su(t,u,Z[G+257]),u+=oe[G+257],G>7&&(xa(t,u,ee>>23&31),u+=w_[G]);var ie=ee&31;su(t,u,H[ie]),u+=re[ie],ie>3&&(su(t,u,ee>>5&8191),u+=b_[ie])}else su(t,u,Z[ee]),u+=oe[ee]}return su(t,u,Z[256]),u+oe[256]},JJ=new __([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),mC=new Oi(0),XJ=function(r,t,e,n,i,a){var o=a.z||r.length,s=new Oi(n+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(n,s.length-i),c=a.l,u=(a.r||0)&7;if(t){u&&(l[0]=a.r>>3);for(var d=JJ[t-1],v=d>>13,p=d&8191,y=(1<<e)-1,b=a.p||new qn(32768),S=a.h||new qn(y+1),_=Math.ceil(e/3),x=2*_,k=function(ye){return(r[ye]^r[ye+1]<<_^r[ye+2]<<x)&y},T=new __(25e3),R=new qn(288),B=new qn(32),j=0,F=0,M=a.i||0,q=0,O=a.w||0,L=0;M+2<o;++M){var z=k(M),I=M&32767,X=S[z];if(b[I]=X,S[z]=I,O<=M){var Z=o-M;if((j>7e3||q>24576)&&(Z>423||!c)){u=qb(r,l,0,T,R,B,F,q,L,M-L,u),q=j=F=0,L=M;for(var oe=0;oe<286;++oe)R[oe]=0;for(var oe=0;oe<30;++oe)B[oe]=0}var H=2,re=0,ue=p,ne=I-X&32767;if(Z>2&&z==k(M-ne))for(var N=Math.min(v,Z)-1,U=Math.min(32767,M),G=Math.min(258,Z);ne<=U&&--ue&&I!=X;){if(r[M+H]==r[M+H-ne]){for(var ee=0;ee<G&&r[M+ee]==r[M+ee-ne];++ee);if(ee>H){if(H=ee,re=ne,ee>N)break;for(var ie=Math.min(ne,ee-2),ce=0,oe=0;oe<ie;++oe){var ge=M-ne+oe&32767,ve=b[ge],be=ge-ve&32767;be>ce&&(ce=be,X=ge)}}}I=X,X=b[I],ne+=I-X&32767}if(re){T[q++]=268435456|gy[H]<<18|zb[re];var Ce=gy[H]&31,Ie=zb[re]&31;F+=w_[Ce]+b_[Ie],++R[257+Ce],++B[Ie],O=M+H,++j}else T[q++]=r[M],++R[r[M]]}}for(M=Math.max(M,O);M<o;++M)T[q++]=r[M],++R[r[M]];u=qb(r,l,c,T,R,B,F,q,L,M-L,u),c||(a.r=u&7|l[u/8|0]<<3,u-=7,a.h=S,a.p=b,a.i=M,a.w=O)}else{for(var M=a.w||0;M<o+c;M+=65535){var je=M+65535;je>=o&&(l[u/8|0]=c,je=o),u=vC(l,u+1,r.subarray(M,je))}a.i=o}return YJ(s,0,n+pC(u)+i)},gC=function(){var r=1,t=0;return{p:function(e){for(var n=r,i=t,a=e.length|0,o=0;o!=a;){for(var s=Math.min(o+2655,a);o<s;++o)i+=n+=e[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,t=i},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},ZJ=function(r,t,e,n,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new Oi(a.length+r.length);o.set(a),o.set(r,a.length),r=o,i.w=a.length}return XJ(r,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,e,n,i)},yC=function(r,t,e){for(;e;++t)r[t]=e,e>>>=8},eX=function(r,t){var e=t.level,n=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=n<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var i=gC();i.p(t.dictionary),yC(r,2,i.d())}};function wy(r,t){t||(t={});var e=gC();e.p(r);var n=ZJ(r,t,t.dictionary?6:2,4);return eX(n,t),yC(n,n.length-4,e.d()),n}var tX=typeof TextDecoder<"u"&&new TextDecoder,rX=0;try{tX.decode(mC,{stream:!0}),rX=1}catch{}function nX(r){if(Array.isArray(r))return r}function iX(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(e=e.call(r)).next,t!==0)for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Hb(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function aX(r,t){if(r){if(typeof r=="string")return Hb(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Hb(r,t):void 0}}function oX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gb(r,t){return nX(r)||iX(r,t)||aX(r,t)||oX()}function Kb(r,t="utf8"){return new TextDecoder(t).decode(r)}const sX=new TextEncoder;function cX(r){return sX.encode(r)}const lX=1024*8,uX=(()=>{const r=new Uint8Array(4),t=new Uint32Array(r.buffer);return!((t[0]=1)&r[0])})(),kg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class x_{constructor(t=lX,e={}){jt(this,"buffer");jt(this,"byteLength");jt(this,"byteOffset");jt(this,"length");jt(this,"offset");jt(this,"lastWrittenByte");jt(this,"littleEndian");jt(this,"_data");jt(this,"_mark");jt(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=e.offset?e.offset>>>0:0,a=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof x_)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const n=kg[e].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===uX&&e!=="uint8"&&e!=="int8"){const s=new Uint8Array(this.buffer.slice(i,i+n));s.reverse();const l=new kg[e](s.buffer);return this.offset+=n,l.reverse(),l}const o=new kg[e](a);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let n=0;n<t;n++)e+=this.readChar();return e}readUtf8(t=1){return Kb(this.readBytes(t))}decodeText(t=1,e="utf8"){return Kb(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(cX(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function yl(r){let t=r.length;for(;--t>=0;)r[t]=0}const fX=3,dX=258,_C=29,hX=256,pX=hX+1+_C,wC=30,vX=512,mX=new Array((pX+2)*2);yl(mX);const gX=new Array(wC*2);yl(gX);const yX=new Array(vX);yl(yX);const _X=new Array(dX-fX+1);yl(_X);const wX=new Array(_C);yl(wX);const bX=new Array(wC);yl(bX);const xX=(r,t,e,n)=>{let i=r&65535|0,a=r>>>16&65535|0,o=0;for(;e!==0;){o=e>2e3?2e3:e,e-=o;do i=i+t[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var by=xX;const SX=()=>{let r,t=[];for(var e=0;e<256;e++){r=e;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t},kX=new Uint32Array(SX()),PX=(r,t,e,n)=>{const i=kX,a=n+e;r^=-1;for(let o=n;o<a;o++)r=r>>>8^i[(r^t[o])&255];return r^-1};var qi=PX,xy={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bC={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const TX=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var EX=function(r){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)TX(e,n)&&(r[n]=e[n])}}return r},CX=r=>{let t=0;for(let n=0,i=r.length;n<i;n++)t+=r[n].length;const e=new Uint8Array(t);for(let n=0,i=0,a=r.length;n<a;n++){let o=r[n];e.set(o,i),i+=o.length}return e},xC={assign:EX,flattenChunks:CX};let SC=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{SC=!1}const tf=new Uint8Array(256);for(let r=0;r<256;r++)tf[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;tf[254]=tf[254]=1;var LX=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let t,e,n,i,a,o=r.length,s=0;for(i=0;i<o;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)e=r.charCodeAt(i),(e&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),i++)),e<128?t[a++]=e:e<2048?(t[a++]=192|e>>>6,t[a++]=128|e&63):e<65536?(t[a++]=224|e>>>12,t[a++]=128|e>>>6&63,t[a++]=128|e&63):(t[a++]=240|e>>>18,t[a++]=128|e>>>12&63,t[a++]=128|e>>>6&63,t[a++]=128|e&63);return t};const AX=(r,t)=>{if(t<65534&&r.subarray&&SC)return String.fromCharCode.apply(null,r.length===t?r:r.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(r[n]);return e};var OX=(r,t)=>{const e=t||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,t));let n,i;const a=new Array(e*2);for(i=0,n=0;n<e;){let o=r[n++];if(o<128){a[i++]=o;continue}let s=tf[o];if(s>4){a[i++]=65533,n+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&n<e;)o=o<<6|r[n++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return AX(a,i)},NX=(r,t)=>{t=t||r.length,t>r.length&&(t=r.length);let e=t-1;for(;e>=0&&(r[e]&192)===128;)e--;return e<0||e===0?t:e+tf[r[e]]>t?e:t},Sy={string2buf:LX,buf2string:OX,utf8border:NX};function RX(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var jX=RX;const Kd=16209,IX=16191;var MX=function(t,e){let n,i,a,o,s,l,c,u,d,v,p,y,b,S,_,x,k,T,R,B,j,F,M,q;const O=t.state;n=t.next_in,M=t.input,i=n+(t.avail_in-5),a=t.next_out,q=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),l=O.dmax,c=O.wsize,u=O.whave,d=O.wnext,v=O.window,p=O.hold,y=O.bits,b=O.lencode,S=O.distcode,_=(1<<O.lenbits)-1,x=(1<<O.distbits)-1;e:do{y<15&&(p+=M[n++]<<y,y+=8,p+=M[n++]<<y,y+=8),k=b[p&_];t:for(;;){if(T=k>>>24,p>>>=T,y-=T,T=k>>>16&255,T===0)q[a++]=k&65535;else if(T&16){R=k&65535,T&=15,T&&(y<T&&(p+=M[n++]<<y,y+=8),R+=p&(1<<T)-1,p>>>=T,y-=T),y<15&&(p+=M[n++]<<y,y+=8,p+=M[n++]<<y,y+=8),k=S[p&x];r:for(;;){if(T=k>>>24,p>>>=T,y-=T,T=k>>>16&255,T&16){if(B=k&65535,T&=15,y<T&&(p+=M[n++]<<y,y+=8,y<T&&(p+=M[n++]<<y,y+=8)),B+=p&(1<<T)-1,B>l){t.msg="invalid distance too far back",O.mode=Kd;break e}if(p>>>=T,y-=T,T=a-o,B>T){if(T=B-T,T>u&&O.sane){t.msg="invalid distance too far back",O.mode=Kd;break e}if(j=0,F=v,d===0){if(j+=c-T,T<R){R-=T;do q[a++]=v[j++];while(--T);j=a-B,F=q}}else if(d<T){if(j+=c+d-T,T-=d,T<R){R-=T;do q[a++]=v[j++];while(--T);if(j=0,d<R){T=d,R-=T;do q[a++]=v[j++];while(--T);j=a-B,F=q}}}else if(j+=d-T,T<R){R-=T;do q[a++]=v[j++];while(--T);j=a-B,F=q}for(;R>2;)q[a++]=F[j++],q[a++]=F[j++],q[a++]=F[j++],R-=3;R&&(q[a++]=F[j++],R>1&&(q[a++]=F[j++]))}else{j=a-B;do q[a++]=q[j++],q[a++]=q[j++],q[a++]=q[j++],R-=3;while(R>2);R&&(q[a++]=q[j++],R>1&&(q[a++]=q[j++]))}}else if(T&64){t.msg="invalid distance code",O.mode=Kd;break e}else{k=S[(k&65535)+(p&(1<<T)-1)];continue r}break}}else if(T&64)if(T&32){O.mode=IX;break e}else{t.msg="invalid literal/length code",O.mode=Kd;break e}else{k=b[(k&65535)+(p&(1<<T)-1)];continue t}break}}while(n<i&&a<s);R=y>>3,n-=R,y-=R<<3,p&=(1<<y)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=a<s?257+(s-a):257-(a-s),O.hold=p,O.bits=y};const cc=15,Qb=852,Yb=592,Jb=0,Pg=1,Xb=2,DX=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),FX=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),BX=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$X=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),UX=(r,t,e,n,i,a,o,s)=>{const l=s.bits;let c=0,u=0,d=0,v=0,p=0,y=0,b=0,S=0,_=0,x=0,k,T,R,B,j,F=null,M;const q=new Uint16Array(cc+1),O=new Uint16Array(cc+1);let L=null,z,I,X;for(c=0;c<=cc;c++)q[c]=0;for(u=0;u<n;u++)q[t[e+u]]++;for(p=l,v=cc;v>=1&&q[v]===0;v--);if(p>v&&(p=v),v===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(d=1;d<v&&q[d]===0;d++);for(p<d&&(p=d),S=1,c=1;c<=cc;c++)if(S<<=1,S-=q[c],S<0)return-1;if(S>0&&(r===Jb||v!==1))return-1;for(O[1]=0,c=1;c<cc;c++)O[c+1]=O[c]+q[c];for(u=0;u<n;u++)t[e+u]!==0&&(o[O[t[e+u]]++]=u);if(r===Jb?(F=L=o,M=20):r===Pg?(F=DX,L=FX,M=257):(F=BX,L=$X,M=0),x=0,u=0,c=d,j=a,y=p,b=0,R=-1,_=1<<p,B=_-1,r===Pg&&_>Qb||r===Xb&&_>Yb)return 1;for(;;){z=c-b,o[u]+1<M?(I=0,X=o[u]):o[u]>=M?(I=L[o[u]-M],X=F[o[u]-M]):(I=96,X=0),k=1<<c-b,T=1<<y,d=T;do T-=k,i[j+(x>>b)+T]=z<<24|I<<16|X|0;while(T!==0);for(k=1<<c-1;x&k;)k>>=1;if(k!==0?(x&=k-1,x+=k):x=0,u++,--q[c]===0){if(c===v)break;c=t[e+o[u]]}if(c>p&&(x&B)!==R){for(b===0&&(b=p),j+=d,y=c-b,S=1<<y;y+b<v&&(S-=q[y+b],!(S<=0));)y++,S<<=1;if(_+=1<<y,r===Pg&&_>Qb||r===Xb&&_>Yb)return 1;R=x&B,i[R]=p<<24|y<<16|j-a|0}}return x!==0&&(i[j+x]=c-b<<24|64<<16|0),s.bits=p,0};var Au=UX;const VX=0,kC=1,PC=2,{Z_FINISH:Zb,Z_BLOCK:zX,Z_TREES:Qd,Z_OK:Rs,Z_STREAM_END:WX,Z_NEED_DICT:qX,Z_STREAM_ERROR:hi,Z_DATA_ERROR:TC,Z_MEM_ERROR:EC,Z_BUF_ERROR:HX,Z_DEFLATED:ex}=bC,Tv=16180,tx=16181,rx=16182,nx=16183,ix=16184,ax=16185,ox=16186,sx=16187,cx=16188,lx=16189,pp=16190,Sa=16191,Tg=16192,ux=16193,Eg=16194,fx=16195,dx=16196,hx=16197,px=16198,Yd=16199,Jd=16200,vx=16201,mx=16202,gx=16203,yx=16204,_x=16205,Cg=16206,wx=16207,bx=16208,tr=16209,CC=16210,LC=16211,GX=852,KX=592,QX=15,YX=QX,xx=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function JX(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Us=r=>{if(!r)return 1;const t=r.state;return!t||t.strm!==r||t.mode<Tv||t.mode>LC?1:0},AC=r=>{if(Us(r))return hi;const t=r.state;return r.total_in=r.total_out=t.total=0,r.msg="",t.wrap&&(r.adler=t.wrap&1),t.mode=Tv,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(GX),t.distcode=t.distdyn=new Int32Array(KX),t.sane=1,t.back=-1,Rs},OC=r=>{if(Us(r))return hi;const t=r.state;return t.wsize=0,t.whave=0,t.wnext=0,AC(r)},NC=(r,t)=>{let e;if(Us(r))return hi;const n=r.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?hi:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,OC(r))},RC=(r,t)=>{if(!r)return hi;const e=new JX;r.state=e,e.strm=r,e.window=null,e.mode=Tv;const n=NC(r,t);return n!==Rs&&(r.state=null),n},XX=r=>RC(r,YX);let Sx=!0,Lg,Ag;const ZX=r=>{if(Sx){Lg=new Int32Array(512),Ag=new Int32Array(32);let t=0;for(;t<144;)r.lens[t++]=8;for(;t<256;)r.lens[t++]=9;for(;t<280;)r.lens[t++]=7;for(;t<288;)r.lens[t++]=8;for(Au(kC,r.lens,0,288,Lg,0,r.work,{bits:9}),t=0;t<32;)r.lens[t++]=5;Au(PC,r.lens,0,32,Ag,0,r.work,{bits:5}),Sx=!1}r.lencode=Lg,r.lenbits=9,r.distcode=Ag,r.distbits=5},jC=(r,t,e,n)=>{let i;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(e-n,e-n+i),a.wnext),n-=i,n?(a.window.set(t.subarray(e-n,e),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},eZ=(r,t)=>{let e,n,i,a,o,s,l,c,u,d,v,p,y,b,S=0,_,x,k,T,R,B,j,F;const M=new Uint8Array(4);let q,O;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Us(r)||!r.output||!r.input&&r.avail_in!==0)return hi;e=r.state,e.mode===Sa&&(e.mode=Tg),o=r.next_out,i=r.output,l=r.avail_out,a=r.next_in,n=r.input,s=r.avail_in,c=e.hold,u=e.bits,d=s,v=l,F=Rs;e:for(;;)switch(e.mode){case Tv:if(e.wrap===0){e.mode=Tg;break}for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.wrap&2&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,M[0]=c&255,M[1]=c>>>8&255,e.check=qi(e.check,M,2,0),c=0,u=0,e.mode=tx;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((c&255)<<8)+(c>>8))%31){r.msg="incorrect header check",e.mode=tr;break}if((c&15)!==ex){r.msg="unknown compression method",e.mode=tr;break}if(c>>>=4,u-=4,j=(c&15)+8,e.wbits===0&&(e.wbits=j),j>15||j>e.wbits){r.msg="invalid window size",e.mode=tr;break}e.dmax=1<<e.wbits,e.flags=0,r.adler=e.check=1,e.mode=c&512?lx:Sa,c=0,u=0;break;case tx:for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.flags=c,(e.flags&255)!==ex){r.msg="unknown compression method",e.mode=tr;break}if(e.flags&57344){r.msg="unknown header flags set",e.mode=tr;break}e.head&&(e.head.text=c>>8&1),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,e.check=qi(e.check,M,2,0)),c=0,u=0,e.mode=rx;case rx:for(;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.head&&(e.head.time=c),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,M[2]=c>>>16&255,M[3]=c>>>24&255,e.check=qi(e.check,M,4,0)),c=0,u=0,e.mode=nx;case nx:for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.head&&(e.head.xflags=c&255,e.head.os=c>>8),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,e.check=qi(e.check,M,2,0)),c=0,u=0,e.mode=ix;case ix:if(e.flags&1024){for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.length=c,e.head&&(e.head.extra_len=c),e.flags&512&&e.wrap&4&&(M[0]=c&255,M[1]=c>>>8&255,e.check=qi(e.check,M,2,0)),c=0,u=0}else e.head&&(e.head.extra=null);e.mode=ax;case ax:if(e.flags&1024&&(p=e.length,p>s&&(p=s),p&&(e.head&&(j=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(a,a+p),j)),e.flags&512&&e.wrap&4&&(e.check=qi(e.check,n,p,a)),s-=p,a+=p,e.length-=p),e.length))break e;e.length=0,e.mode=ox;case ox:if(e.flags&2048){if(s===0)break e;p=0;do j=n[a+p++],e.head&&j&&e.length<65536&&(e.head.name+=String.fromCharCode(j));while(j&&p<s);if(e.flags&512&&e.wrap&4&&(e.check=qi(e.check,n,p,a)),s-=p,a+=p,j)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=sx;case sx:if(e.flags&4096){if(s===0)break e;p=0;do j=n[a+p++],e.head&&j&&e.length<65536&&(e.head.comment+=String.fromCharCode(j));while(j&&p<s);if(e.flags&512&&e.wrap&4&&(e.check=qi(e.check,n,p,a)),s-=p,a+=p,j)break e}else e.head&&(e.head.comment=null);e.mode=cx;case cx:if(e.flags&512){for(;u<16;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.wrap&4&&c!==(e.check&65535)){r.msg="header crc mismatch",e.mode=tr;break}c=0,u=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),r.adler=e.check=0,e.mode=Sa;break;case lx:for(;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}r.adler=e.check=xx(c),c=0,u=0,e.mode=pp;case pp:if(e.havedict===0)return r.next_out=o,r.avail_out=l,r.next_in=a,r.avail_in=s,e.hold=c,e.bits=u,qX;r.adler=e.check=1,e.mode=Sa;case Sa:if(t===zX||t===Qd)break e;case Tg:if(e.last){c>>>=u&7,u-=u&7,e.mode=Cg;break}for(;u<3;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}switch(e.last=c&1,c>>>=1,u-=1,c&3){case 0:e.mode=ux;break;case 1:if(ZX(e),e.mode=Yd,t===Qd){c>>>=2,u-=2;break e}break;case 2:e.mode=dx;break;case 3:r.msg="invalid block type",e.mode=tr}c>>>=2,u-=2;break;case ux:for(c>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){r.msg="invalid stored block lengths",e.mode=tr;break}if(e.length=c&65535,c=0,u=0,e.mode=Eg,t===Qd)break e;case Eg:e.mode=fx;case fx:if(p=e.length,p){if(p>s&&(p=s),p>l&&(p=l),p===0)break e;i.set(n.subarray(a,a+p),o),s-=p,a+=p,l-=p,o+=p,e.length-=p;break}e.mode=Sa;break;case dx:for(;u<14;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.nlen=(c&31)+257,c>>>=5,u-=5,e.ndist=(c&31)+1,c>>>=5,u-=5,e.ncode=(c&15)+4,c>>>=4,u-=4,e.nlen>286||e.ndist>30){r.msg="too many length or distance symbols",e.mode=tr;break}e.have=0,e.mode=hx;case hx:for(;e.have<e.ncode;){for(;u<3;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.lens[L[e.have++]]=c&7,c>>>=3,u-=3}for(;e.have<19;)e.lens[L[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,q={bits:e.lenbits},F=Au(VX,e.lens,0,19,e.lencode,0,e.work,q),e.lenbits=q.bits,F){r.msg="invalid code lengths set",e.mode=tr;break}e.have=0,e.mode=px;case px:for(;e.have<e.nlen+e.ndist;){for(;S=e.lencode[c&(1<<e.lenbits)-1],_=S>>>24,x=S>>>16&255,k=S&65535,!(_<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(k<16)c>>>=_,u-=_,e.lens[e.have++]=k;else{if(k===16){for(O=_+2;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(c>>>=_,u-=_,e.have===0){r.msg="invalid bit length repeat",e.mode=tr;break}j=e.lens[e.have-1],p=3+(c&3),c>>>=2,u-=2}else if(k===17){for(O=_+3;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=_,u-=_,j=0,p=3+(c&7),c>>>=3,u-=3}else{for(O=_+7;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=_,u-=_,j=0,p=11+(c&127),c>>>=7,u-=7}if(e.have+p>e.nlen+e.ndist){r.msg="invalid bit length repeat",e.mode=tr;break}for(;p--;)e.lens[e.have++]=j}}if(e.mode===tr)break;if(e.lens[256]===0){r.msg="invalid code -- missing end-of-block",e.mode=tr;break}if(e.lenbits=9,q={bits:e.lenbits},F=Au(kC,e.lens,0,e.nlen,e.lencode,0,e.work,q),e.lenbits=q.bits,F){r.msg="invalid literal/lengths set",e.mode=tr;break}if(e.distbits=6,e.distcode=e.distdyn,q={bits:e.distbits},F=Au(PC,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,q),e.distbits=q.bits,F){r.msg="invalid distances set",e.mode=tr;break}if(e.mode=Yd,t===Qd)break e;case Yd:e.mode=Jd;case Jd:if(s>=6&&l>=258){r.next_out=o,r.avail_out=l,r.next_in=a,r.avail_in=s,e.hold=c,e.bits=u,MX(r,v),o=r.next_out,i=r.output,l=r.avail_out,a=r.next_in,n=r.input,s=r.avail_in,c=e.hold,u=e.bits,e.mode===Sa&&(e.back=-1);break}for(e.back=0;S=e.lencode[c&(1<<e.lenbits)-1],_=S>>>24,x=S>>>16&255,k=S&65535,!(_<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(x&&!(x&240)){for(T=_,R=x,B=k;S=e.lencode[B+((c&(1<<T+R)-1)>>T)],_=S>>>24,x=S>>>16&255,k=S&65535,!(T+_<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=T,u-=T,e.back+=T}if(c>>>=_,u-=_,e.back+=_,e.length=k,x===0){e.mode=_x;break}if(x&32){e.back=-1,e.mode=Sa;break}if(x&64){r.msg="invalid literal/length code",e.mode=tr;break}e.extra=x&15,e.mode=vx;case vx:if(e.extra){for(O=e.extra;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=mx;case mx:for(;S=e.distcode[c&(1<<e.distbits)-1],_=S>>>24,x=S>>>16&255,k=S&65535,!(_<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(!(x&240)){for(T=_,R=x,B=k;S=e.distcode[B+((c&(1<<T+R)-1)>>T)],_=S>>>24,x=S>>>16&255,k=S&65535,!(T+_<=u);){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}c>>>=T,u-=T,e.back+=T}if(c>>>=_,u-=_,e.back+=_,x&64){r.msg="invalid distance code",e.mode=tr;break}e.offset=k,e.extra=x&15,e.mode=gx;case gx:if(e.extra){for(O=e.extra;u<O;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,u-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){r.msg="invalid distance too far back",e.mode=tr;break}e.mode=yx;case yx:if(l===0)break e;if(p=v-l,e.offset>p){if(p=e.offset-p,p>e.whave&&e.sane){r.msg="invalid distance too far back",e.mode=tr;break}p>e.wnext?(p-=e.wnext,y=e.wsize-p):y=e.wnext-p,p>e.length&&(p=e.length),b=e.window}else b=i,y=o-e.offset,p=e.length;p>l&&(p=l),l-=p,e.length-=p;do i[o++]=b[y++];while(--p);e.length===0&&(e.mode=Jd);break;case _x:if(l===0)break e;i[o++]=e.length,l--,e.mode=Jd;break;case Cg:if(e.wrap){for(;u<32;){if(s===0)break e;s--,c|=n[a++]<<u,u+=8}if(v-=l,r.total_out+=v,e.total+=v,e.wrap&4&&v&&(r.adler=e.check=e.flags?qi(e.check,i,v,o-v):by(e.check,i,v,o-v)),v=l,e.wrap&4&&(e.flags?c:xx(c))!==e.check){r.msg="incorrect data check",e.mode=tr;break}c=0,u=0}e.mode=wx;case wx:if(e.wrap&&e.flags){for(;u<32;){if(s===0)break e;s--,c+=n[a++]<<u,u+=8}if(e.wrap&4&&c!==(e.total&4294967295)){r.msg="incorrect length check",e.mode=tr;break}c=0,u=0}e.mode=bx;case bx:F=WX;break e;case tr:F=TC;break e;case CC:return EC;case LC:default:return hi}return r.next_out=o,r.avail_out=l,r.next_in=a,r.avail_in=s,e.hold=c,e.bits=u,(e.wsize||v!==r.avail_out&&e.mode<tr&&(e.mode<Cg||t!==Zb))&&jC(r,r.output,r.next_out,v-r.avail_out),d-=r.avail_in,v-=r.avail_out,r.total_in+=d,r.total_out+=v,e.total+=v,e.wrap&4&&v&&(r.adler=e.check=e.flags?qi(e.check,i,v,r.next_out-v):by(e.check,i,v,r.next_out-v)),r.data_type=e.bits+(e.last?64:0)+(e.mode===Sa?128:0)+(e.mode===Yd||e.mode===Eg?256:0),(d===0&&v===0||t===Zb)&&F===Rs&&(F=HX),F},tZ=r=>{if(Us(r))return hi;let t=r.state;return t.window&&(t.window=null),r.state=null,Rs},rZ=(r,t)=>{if(Us(r))return hi;const e=r.state;return e.wrap&2?(e.head=t,t.done=!1,Rs):hi},nZ=(r,t)=>{const e=t.length;let n,i,a;return Us(r)||(n=r.state,n.wrap!==0&&n.mode!==pp)?hi:n.mode===pp&&(i=1,i=by(i,t,e,0),i!==n.check)?TC:(a=jC(r,t,e,e),a?(n.mode=CC,EC):(n.havedict=1,Rs))};var iZ=OC,aZ=NC,oZ=AC,sZ=XX,cZ=RC,lZ=eZ,uZ=tZ,fZ=rZ,dZ=nZ,hZ="pako inflate (from Nodeca project)",Ea={inflateReset:iZ,inflateReset2:aZ,inflateResetKeep:oZ,inflateInit:sZ,inflateInit2:cZ,inflate:lZ,inflateEnd:uZ,inflateGetHeader:fZ,inflateSetDictionary:dZ,inflateInfo:hZ};function pZ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var vZ=pZ;const IC=Object.prototype.toString,{Z_NO_FLUSH:mZ,Z_FINISH:gZ,Z_OK:rf,Z_STREAM_END:Og,Z_NEED_DICT:Ng,Z_STREAM_ERROR:yZ,Z_DATA_ERROR:kx,Z_MEM_ERROR:_Z}=bC;function Pf(r){this.options=xC.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(r&&r.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jX,this.strm.avail_out=0;let e=Ea.inflateInit2(this.strm,t.windowBits);if(e!==rf)throw new Error(xy[e]);if(this.header=new vZ,Ea.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Sy.string2buf(t.dictionary):IC.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=Ea.inflateSetDictionary(this.strm,t.dictionary),e!==rf)))throw new Error(xy[e])}Pf.prototype.push=function(r,t){const e=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?gZ:mZ,IC.call(r)==="[object ArrayBuffer]"?e.input=new Uint8Array(r):e.input=r,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),a=Ea.inflate(e,o),a===Ng&&i&&(a=Ea.inflateSetDictionary(e,i),a===rf?a=Ea.inflate(e,o):a===kx&&(a=Ng));e.avail_in>0&&a===Og&&e.state.wrap>0&&r[e.next_in]!==0;)Ea.inflateReset(e),a=Ea.inflate(e,o);switch(a){case yZ:case kx:case Ng:case _Z:return this.onEnd(a),this.ended=!0,!1}if(s=e.avail_out,e.next_out&&(e.avail_out===0||a===Og))if(this.options.to==="string"){let l=Sy.utf8border(e.output,e.next_out),c=e.next_out-l,u=Sy.buf2string(e.output,l);e.next_out=c,e.avail_out=n-c,c&&e.output.set(e.output.subarray(l,l+c),0),this.onData(u)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(a===rf&&s===0)){if(a===Og)return a=Ea.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};Pf.prototype.onData=function(r){this.chunks.push(r)};Pf.prototype.onEnd=function(r){r===rf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=xC.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function wZ(r,t){const e=new Pf(t);if(e.push(r),e.err)throw e.msg||xy[e.err];return e.result}var bZ=Pf,xZ=wZ,SZ={Inflate:bZ,inflate:xZ};const{Inflate:kZ,inflate:PZ}=SZ;var Px=kZ,TZ=PZ;const MC=[];for(let r=0;r<256;r++){let t=r;for(let e=0;e<8;e++)t&1?t=3988292384^t>>>1:t=t>>>1;MC[r]=t}const Tx=4294967295;function EZ(r,t,e){let n=r;for(let i=0;i<e;i++)n=MC[(n^t[i])&255]^n>>>8;return n}function CZ(r,t){return(EZ(Tx,r,t)^Tx)>>>0}function Ex(r,t,e){const n=r.readUint32(),i=CZ(new Uint8Array(r.buffer,r.byteOffset+r.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${e}. Expected ${n}, found ${i}`)}function DC(r,t,e){for(let n=0;n<e;n++)t[n]=r[n]}function FC(r,t,e,n){let i=0;for(;i<n;i++)t[i]=r[i];for(;i<e;i++)t[i]=r[i]+t[i-n]&255}function BC(r,t,e,n){let i=0;if(e.length===0)for(;i<n;i++)t[i]=r[i];else for(;i<n;i++)t[i]=r[i]+e[i]&255}function $C(r,t,e,n,i){let a=0;if(e.length===0){for(;a<i;a++)t[a]=r[a];for(;a<n;a++)t[a]=r[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=r[a]+(e[a]>>1)&255;for(;a<n;a++)t[a]=r[a]+(t[a-i]+e[a]>>1)&255}}function UC(r,t,e,n,i){let a=0;if(e.length===0){for(;a<i;a++)t[a]=r[a];for(;a<n;a++)t[a]=r[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=r[a]+e[a]&255;for(;a<n;a++)t[a]=r[a]+LZ(t[a-i],e[a],e[a-i])&255}}function LZ(r,t,e){const n=r+t-e,i=Math.abs(n-r),a=Math.abs(n-t),o=Math.abs(n-e);return i<=a&&i<=o?r:a<=o?t:e}function AZ(r,t,e,n,i,a){switch(r){case 0:DC(t,e,i);break;case 1:FC(t,e,i,a);break;case 2:BC(t,e,n,i);break;case 3:$C(t,e,n,i,a);break;case 4:UC(t,e,n,i,a);break;default:throw new Error(`Unsupported filter: ${r}`)}}const OZ=new Uint16Array([255]),NZ=new Uint8Array(OZ.buffer),RZ=NZ[0]===255;function jZ(r){const{data:t,width:e,height:n,channels:i,depth:a}=r,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],s=Math.ceil(a/8)*i,l=new Uint8Array(n*e*s);let c=0;for(let u=0;u<7;u++){const d=o[u],v=Math.ceil((e-d.x)/d.xStep),p=Math.ceil((n-d.y)/d.yStep);if(v<=0||p<=0)continue;const y=v*s,b=new Uint8Array(y);for(let S=0;S<p;S++){const _=t[c++],x=t.subarray(c,c+y);c+=y;const k=new Uint8Array(y);AZ(_,x,k,b,y,s),b.set(k);for(let T=0;T<v;T++){const R=d.x+T*d.xStep,B=d.y+S*d.yStep;if(!(R>=e||B>=n))for(let j=0;j<s;j++)l[(B*e+R)*s+j]=k[T*s+j]}}}if(a===16){const u=new Uint16Array(l.buffer);if(RZ)for(let d=0;d<u.length;d++)u[d]=IZ(u[d]);return u}else return l}function IZ(r){return(r&255)<<8|r>>8&255}const MZ=new Uint16Array([255]),DZ=new Uint8Array(MZ.buffer),FZ=DZ[0]===255,BZ=new Uint8Array(0);function Cx(r){const{data:t,width:e,height:n,channels:i,depth:a}=r,o=Math.ceil(a/8)*i,s=Math.ceil(a/8*i*e),l=new Uint8Array(n*s);let c=BZ,u=0,d,v;for(let p=0;p<n;p++){switch(d=t.subarray(u+1,u+1+s),v=l.subarray(p*s,(p+1)*s),t[u]){case 0:DC(d,v,s);break;case 1:FC(d,v,s,o);break;case 2:BC(d,v,c,s);break;case 3:$C(d,v,c,s,o);break;case 4:UC(d,v,c,s,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}c=v,u+=s+1}if(a===16){const p=new Uint16Array(l.buffer);if(FZ)for(let y=0;y<p.length;y++)p[y]=$Z(p[y]);return p}else return l}function $Z(r){return(r&255)<<8|r>>8&255}const Eh=Uint8Array.of(137,80,78,71,13,10,26,10);function Lx(r){if(!UZ(r.readBytes(Eh.length)))throw new Error("wrong PNG signature")}function UZ(r){if(r.length<Eh.length)return!1;for(let t=0;t<Eh.length;t++)if(r[t]!==Eh[t])return!1;return!0}const VZ="tEXt",zZ=0,VC=new TextDecoder("latin1");function WZ(r){if(HZ(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const qZ=/^[\u0000-\u00FF]*$/;function HZ(r){if(!qZ.test(r))throw new Error("invalid latin1 text")}function GZ(r,t,e){const n=zC(t);r[n]=KZ(t,e-n.length-1)}function zC(r){for(r.mark();r.readByte()!==zZ;);const t=r.offset;r.reset();const e=VC.decode(r.readBytes(t-r.offset-1));return r.skip(1),WZ(e),e}function KZ(r,t){return VC.decode(r.readBytes(t))}const Un={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Rg={UNKNOWN:-1,DEFLATE:0},Ax={UNKNOWN:-1,ADAPTIVE:0},jg={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Xd={NONE:0,BACKGROUND:1,PREVIOUS:2},Ig={SOURCE:0,OVER:1};class QZ extends x_{constructor(e,n={}){super(e);jt(this,"_checkCrc");jt(this,"_inflator");jt(this,"_png");jt(this,"_apng");jt(this,"_end");jt(this,"_hasPalette");jt(this,"_palette");jt(this,"_hasTransparency");jt(this,"_transparency");jt(this,"_compressionMethod");jt(this,"_filterMethod");jt(this,"_interlaceMethod");jt(this,"_colorType");jt(this,"_isAnimated");jt(this,"_numberOfFrames");jt(this,"_numberOfPlays");jt(this,"_frames");jt(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new Px,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Rg.UNKNOWN,this._filterMethod=Ax.UNKNOWN,this._interlaceMethod=jg.UNKNOWN,this._colorType=Un.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Lx(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(Lx(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case VZ:GZ(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Ex(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=i+e;break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Ex(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=YZ(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Un.GREYSCALE:i=1;break;case Un.TRUECOLOUR:i=3;break;case Un.INDEXED_COLOUR:i=1;break;case Un.GREYSCALE_ALPHA:i=2;break;case Un.TRUECOLOUR_ALPHA:i=4;break;case Un.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Rg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Un.GREYSCALE:case Un.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case Un.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Un.UNKNOWN:case Un.GREYSCALE_ALPHA:case Un.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=zC(this),i=this.readUint8();if(i!==Rg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:TZ(a)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:e,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(e);if(i){if(i.data=Cx({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,i){switch(e.disposeOp){case Xd.NONE:break;case Xd.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const s=(a*e.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[s+l]=0}break;case Xd.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const i=1<<this._png.depth,a=(o,s)=>{const l=((o+n.yOffset)*this._png.width+n.xOffset+s)*this._png.channels,c=(o*n.width+s)*this._png.channels;return{index:l,frameIndex:c}};switch(n.blendOp){case Ig.SOURCE:for(let o=0;o<n.height;o++)for(let s=0;s<n.width;s++){const{index:l,frameIndex:c}=a(o,s);for(let u=0;u<this._png.channels;u++)e.data[l+u]=n.data[c+u]}break;case Ig.OVER:for(let o=0;o<n.height;o++)for(let s=0;s<n.width;s++){const{index:l,frameIndex:c}=a(o,s);for(let u=0;u<this._png.channels;u++){const d=n.data[c+this._png.channels-1]/i,v=u%(this._png.channels-1)===0?1:n.data[c+u],p=Math.floor(d*v+(1-d)*e.data[l+u]);e.data[l+u]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Ax.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===jg.NO_INTERLACE)this._png.data=Cx({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===jg.ADAM7)this._png.data=jZ({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Xd.NONE,blendOp:Ig.SOURCE,data:e}),this._inflator=new Px,this._writingDataChunks=!1}}function YZ(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Ox;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Ox||(Ox={}));function JZ(r,t){return new QZ(r,t).decode()}var ut=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Mg(){ut.console&&typeof ut.console.log=="function"&&ut.console.log.apply(ut.console,arguments)}var Gt={log:Mg,warn:function(r){ut.console&&(typeof ut.console.warn=="function"?ut.console.warn.apply(ut.console,arguments):Mg.call(null,arguments))},error:function(r){ut.console&&(typeof ut.console.error=="function"?ut.console.error.apply(ut.console,arguments):Mg(r))}};function Dg(r,t,e){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){fs(n.response,t,e)},n.onerror=function(){Gt.error("could not download file")},n.send()}function Nx(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Zd(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var fs=ut.saveAs||((typeof window>"u"?"undefined":$t(window))!=="object"||window!==ut?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,e){var n=ut.URL||ut.webkitURL,i=document.createElement("a");t=t||r.name||"download",i.download=t,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?Nx(i.href)?Dg(r,t,e):Zd(i,i.target="_blank"):Zd(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Zd(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,e){if(t=t||r.name||"download",typeof r=="string")if(Nx(r))Dg(r,t,e);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Zd(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:$t(a)!=="object"&&(Gt.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(r,e),t)}:function(r,t,e,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Dg(r,t,e);var i=r.type==="application/octet-stream",a=/constructor/i.test(ut.HTMLElement)||ut.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":$t(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var u=s.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},s.readAsDataURL(r)}else{var l=ut.URL||ut.webkitURL,c=l.createObjectURL(r);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function WC(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<e.length;n++){var i=e[n].re,a=e[n].process,o=i.exec(r);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+s+l+c}}var Ch=ut.atob.bind(ut),Rx=ut.btoa.bind(ut);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Fg(r,t){var e=r[0],n=r[1],i=r[2],a=r[3];e=rn(e,n,i,a,t[0],7,-680876936),a=rn(a,e,n,i,t[1],12,-389564586),i=rn(i,a,e,n,t[2],17,606105819),n=rn(n,i,a,e,t[3],22,-1044525330),e=rn(e,n,i,a,t[4],7,-176418897),a=rn(a,e,n,i,t[5],12,1200080426),i=rn(i,a,e,n,t[6],17,-1473231341),n=rn(n,i,a,e,t[7],22,-45705983),e=rn(e,n,i,a,t[8],7,1770035416),a=rn(a,e,n,i,t[9],12,-1958414417),i=rn(i,a,e,n,t[10],17,-42063),n=rn(n,i,a,e,t[11],22,-1990404162),e=rn(e,n,i,a,t[12],7,1804603682),a=rn(a,e,n,i,t[13],12,-40341101),i=rn(i,a,e,n,t[14],17,-1502002290),e=nn(e,n=rn(n,i,a,e,t[15],22,1236535329),i,a,t[1],5,-165796510),a=nn(a,e,n,i,t[6],9,-1069501632),i=nn(i,a,e,n,t[11],14,643717713),n=nn(n,i,a,e,t[0],20,-373897302),e=nn(e,n,i,a,t[5],5,-701558691),a=nn(a,e,n,i,t[10],9,38016083),i=nn(i,a,e,n,t[15],14,-660478335),n=nn(n,i,a,e,t[4],20,-405537848),e=nn(e,n,i,a,t[9],5,568446438),a=nn(a,e,n,i,t[14],9,-1019803690),i=nn(i,a,e,n,t[3],14,-187363961),n=nn(n,i,a,e,t[8],20,1163531501),e=nn(e,n,i,a,t[13],5,-1444681467),a=nn(a,e,n,i,t[2],9,-51403784),i=nn(i,a,e,n,t[7],14,1735328473),e=an(e,n=nn(n,i,a,e,t[12],20,-1926607734),i,a,t[5],4,-378558),a=an(a,e,n,i,t[8],11,-2022574463),i=an(i,a,e,n,t[11],16,1839030562),n=an(n,i,a,e,t[14],23,-35309556),e=an(e,n,i,a,t[1],4,-1530992060),a=an(a,e,n,i,t[4],11,1272893353),i=an(i,a,e,n,t[7],16,-155497632),n=an(n,i,a,e,t[10],23,-1094730640),e=an(e,n,i,a,t[13],4,681279174),a=an(a,e,n,i,t[0],11,-358537222),i=an(i,a,e,n,t[3],16,-722521979),n=an(n,i,a,e,t[6],23,76029189),e=an(e,n,i,a,t[9],4,-640364487),a=an(a,e,n,i,t[12],11,-421815835),i=an(i,a,e,n,t[15],16,530742520),e=on(e,n=an(n,i,a,e,t[2],23,-995338651),i,a,t[0],6,-198630844),a=on(a,e,n,i,t[7],10,1126891415),i=on(i,a,e,n,t[14],15,-1416354905),n=on(n,i,a,e,t[5],21,-57434055),e=on(e,n,i,a,t[12],6,1700485571),a=on(a,e,n,i,t[3],10,-1894986606),i=on(i,a,e,n,t[10],15,-1051523),n=on(n,i,a,e,t[1],21,-2054922799),e=on(e,n,i,a,t[8],6,1873313359),a=on(a,e,n,i,t[15],10,-30611744),i=on(i,a,e,n,t[6],15,-1560198380),n=on(n,i,a,e,t[13],21,1309151649),e=on(e,n,i,a,t[4],6,-145523070),a=on(a,e,n,i,t[11],10,-1120210379),i=on(i,a,e,n,t[2],15,718787259),n=on(n,i,a,e,t[9],21,-343485551),r[0]=yo(e,r[0]),r[1]=yo(n,r[1]),r[2]=yo(i,r[2]),r[3]=yo(a,r[3])}function Ev(r,t,e,n,i,a){return t=yo(yo(t,r),yo(n,a)),yo(t<<i|t>>>32-i,e)}function rn(r,t,e,n,i,a,o){return Ev(t&e|~t&n,r,t,i,a,o)}function nn(r,t,e,n,i,a,o){return Ev(t&n|e&~n,r,t,i,a,o)}function an(r,t,e,n,i,a,o){return Ev(t^e^n,r,t,i,a,o)}function on(r,t,e,n,i,a,o){return Ev(e^(t|~n),r,t,i,a,o)}function qC(r){var t,e=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)Fg(n,XZ(r.substring(t-64,t)));r=r.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Fg(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*e,Fg(n,i),n}function XZ(r){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}var jx="0123456789abcdef".split("");function ZZ(r){for(var t="",e=0;e<4;e++)t+=jx[r>>8*e+4&15]+jx[r>>8*e&15];return t}function eee(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function ky(r){return qC(r).map(eee).join("")}var tee=function(r){for(var t=0;t<r.length;t++)r[t]=ZZ(r[t]);return r.join("")}(qC("hello"))!="5d41402abc4b2a76b9719d911017c592";function yo(r,t){if(tee){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}return r+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Py(r,t){var e,n,i,a;if(r!==e){for(var o=(i=r,a=1+(256/r.length|0),new Array(a+1).join(i)),s=[],l=0;l<256;l++)s[l]=l;var c=0;for(l=0;l<256;l++){var u=s[l];c=(c+u+o.charCodeAt(l))%256,s[l]=s[c],s[c]=u}e=r,n=s}else s=n;var d=t.length,v=0,p=0,y="";for(l=0;l<d;l++)p=(p+(u=s[v=(v+1)%256]))%256,s[v]=s[p],s[p]=u,o=s[(s[v]+s[p])%256],y+=String.fromCharCode(t.charCodeAt(l)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Ix={print:4,modify:8,copy:16,"annot-forms":32};function mc(r,t,e,n){this.v=1,this.r=2;var i=192;r.forEach(function(s){if(Ix.perm!==void 0)throw new Error("Invalid permission: "+s);i+=Ix[s]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=ky(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Py(this.encryptionKey,this.padding)}function gc(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",e=r.length,n=0;n<e;n++){var i=r.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return t}function Mx(r){if($t(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,i){if(i=i||!1,typeof e!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[n,!!i],a},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[e]){var o=t[e][a];try{o[0].apply(r,n)}catch(s){ut.console&&Gt.error("jsPDF PubSub Error",s.message,s)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function vp(r){if(!(this instanceof vp))return new vp(r);var t="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function HC(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function ps(r,t,e,n,i){if(!(this instanceof ps))return new ps(r,t,e,n,i);this.type=r==="axial"?2:3,this.coords=t,this.colors=e,HC.call(this,n,i)}function Oc(r,t,e,n,i){if(!(this instanceof Oc))return new Oc(r,t,e,n,i);this.boundingBox=r,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,HC.call(this,n,i)}function et(r){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],s=1,l=16,c="S",u=null;$t(r=r||{})==="object"&&(e=r.orientation,n=r.unit||n,i=r.format||i,a=r.compress||r.compressPdf||a,(u=r.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(l=r.floatPrecision),c=r.defaultPathOperation||"S"),o=r.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",e=(""+(e||"P")).toLowerCase();var d=r.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=Mx;var y="1.3",b=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(g){y=g};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return S};var _=p.__private__.getPageFormat=function(g){return S[g]};i=i||"a4";var x="compat",k="advanced",T=x;function R(){this.saveGraphicsState(),J(new at(it,0,0,-it,0,Go()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),c="n",T=k}function B(){this.restoreGraphicsState(),c="S",T=x}var j=p.__private__.combineFontStyleAndFontWeight=function(g,E){if(g=="bold"&&E=="normal"||g=="bold"&&E==400||g=="normal"&&E=="italic"||g=="bold"&&E=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return E&&(g=E==400||E==="normal"?g==="italic"?"italic":"normal":E!=700&&E!=="bold"||g!=="normal"?(E==700?"bold":E)+""+g:"bold"),g};p.advancedAPI=function(g){var E=T===x;return E&&R.call(this),typeof g!="function"||(g(this),E&&B.call(this)),this},p.compatAPI=function(g){var E=T===k;return E&&B.call(this),typeof g!="function"||(g(this),E&&R.call(this)),this},p.isAdvancedAPI=function(){return T===k};var F,M=function(g){if(T!==k)throw new Error(g+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},q=p.roundToPrecision=p.__private__.roundToPrecision=function(g,E){var Y=t||E;if(isNaN(g)||isNaN(Y))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return g.toFixed(Y).replace(/0+$/,"")};F=p.hpf=p.__private__.hpf=typeof l=="number"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return q(g,l)}:l==="smart"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return q(g,g>-1&&g<1?16:5)}:function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return q(g,16)};var O=p.f2=p.__private__.f2=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f2");return q(g,2)},L=p.__private__.f3=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f3");return q(g,3)},z=p.scale=p.__private__.scale=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.scale");return T===x?g*it:T===k?g:void 0},I=function(g){return z(function(E){return T===x?Go()-E:T===k?E:void 0}(g))};p.__private__.setPrecision=p.setPrecision=function(g){typeof parseInt(g,10)=="number"&&(t=parseInt(g,10))};var X,Z="00000000000000000000000000000000",oe=p.__private__.getFileId=function(){return Z},H=p.__private__.setFileId=function(g){return Z=g!==void 0&&/^[a-fA-F0-9]{32}$/.test(g)?g.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(gr=new mc(u.userPermissions,u.userPassword,u.ownerPassword,Z)),Z};p.setFileId=function(g){return H(g),this},p.getFileId=function(){return oe()};var re=p.__private__.convertDateToPDFDate=function(g){var E=g.getTimezoneOffset(),Y=E<0?"+":"-",te=Math.floor(Math.abs(E/60)),le=Math.abs(E%60),Se=[Y,G(te),"'",G(le),"'"].join("");return["D:",g.getFullYear(),G(g.getMonth()+1),G(g.getDate()),G(g.getHours()),G(g.getMinutes()),G(g.getSeconds()),Se].join("")},ue=p.__private__.convertPDFDateToDate=function(g){var E=parseInt(g.substr(2,4),10),Y=parseInt(g.substr(6,2),10)-1,te=parseInt(g.substr(8,2),10),le=parseInt(g.substr(10,2),10),Se=parseInt(g.substr(12,2),10),Ee=parseInt(g.substr(14,2),10);return new Date(E,Y,te,le,Se,Ee,0)},ne=p.__private__.setCreationDate=function(g){var E;if(g===void 0&&(g=new Date),g instanceof Date)E=re(g);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(g))throw new Error("Invalid argument passed to jsPDF.setCreationDate");E=g}return X=E},N=p.__private__.getCreationDate=function(g){var E=X;return g==="jsDate"&&(E=ue(X)),E};p.setCreationDate=function(g){return ne(g),this},p.getCreationDate=function(g){return N(g)};var U,G=p.__private__.padd2=function(g){return("0"+parseInt(g)).slice(-2)},ee=p.__private__.padd2Hex=function(g){return("00"+(g=g.toString())).substr(g.length)},ie=0,ce=[],ge=[],ve=0,be=[],Ce=[],Ie=!1,je=ge;p.__private__.setCustomOutputDestination=function(g){Ie=!0,je=g};var ye=function(g){Ie||(je=g)};p.__private__.resetCustomOutputDestination=function(){Ie=!1,je=ge};var J=p.__private__.out=function(g){return g=g.toString(),ve+=g.length+1,je.push(g),je},we=p.__private__.write=function(g){return J(arguments.length===1?g.toString():Array.prototype.join.call(arguments," "))},Oe=p.__private__.getArrayBuffer=function(g){for(var E=g.length,Y=new ArrayBuffer(E),te=new Uint8Array(Y);E--;)te[E]=g.charCodeAt(E);return Y},Me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Me};var Pe=r.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(g){return Pe=T===k?g/it:g,this};var De,Ne=p.__private__.getFontSize=p.getFontSize=function(){return T===x?Pe:Pe*it},ct=r.R2L||!1;p.__private__.setR2L=p.setR2L=function(g){return ct=g,this},p.__private__.getR2L=p.getR2L=function(){return ct};var Ge,yt=p.__private__.setZoomMode=function(g){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(g))De=g;else if(isNaN(g)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(g)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+g+'" is not recognized.');De=g}else De=parseInt(g,10)};p.__private__.getZoomMode=function(){return De};var ot,dt=p.__private__.setPageMode=function(g){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(g)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+g+'" is not recognized.');Ge=g};p.__private__.getPageMode=function(){return Ge};var At=p.__private__.setLayoutMode=function(g){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(g)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+g+'" is not recognized.');ot=g};p.__private__.getLayoutMode=function(){return ot},p.__private__.setDisplayMode=p.setDisplayMode=function(g,E,Y){return yt(g),At(E),dt(Y),this};var lt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(g){if(Object.keys(lt).indexOf(g)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return lt[g]},p.__private__.getDocumentProperties=function(){return lt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(g){for(var E in lt)lt.hasOwnProperty(E)&&g[E]&&(lt[E]=g[E]);return this},p.__private__.setDocumentProperty=function(g,E){if(Object.keys(lt).indexOf(g)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return lt[g]=E};var Ke,it,Xe,Ot,St,We={},st={},Nt=[],He={},ht={},Fe={},vr={},mr=null,Wt=0,pt=[],It=new Mx(p),Io=r.hotfixes||[],Jr={},oa={},Mi=[],at=function g(E,Y,te,le,Se,Ee){if(!(this instanceof g))return new g(E,Y,te,le,Se,Ee);isNaN(E)&&(E=1),isNaN(Y)&&(Y=0),isNaN(te)&&(te=0),isNaN(le)&&(le=1),isNaN(Se)&&(Se=0),isNaN(Ee)&&(Ee=0),this._matrix=[E,Y,te,le,Se,Ee]};Object.defineProperty(at.prototype,"sx",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(at.prototype,"shy",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(at.prototype,"shx",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(at.prototype,"sy",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(at.prototype,"tx",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(at.prototype,"ty",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(at.prototype,"a",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(at.prototype,"b",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(at.prototype,"c",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(at.prototype,"d",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(at.prototype,"e",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(at.prototype,"f",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(at.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(at.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(at.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(at.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),at.prototype.join=function(g){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(g)},at.prototype.multiply=function(g){var E=g.sx*this.sx+g.shy*this.shx,Y=g.sx*this.shy+g.shy*this.sy,te=g.shx*this.sx+g.sy*this.shx,le=g.shx*this.shy+g.sy*this.sy,Se=g.tx*this.sx+g.ty*this.shx+this.tx,Ee=g.tx*this.shy+g.ty*this.sy+this.ty;return new at(E,Y,te,le,Se,Ee)},at.prototype.decompose=function(){var g=this.sx,E=this.shy,Y=this.shx,te=this.sy,le=this.tx,Se=this.ty,Ee=Math.sqrt(g*g+E*E),qe=(g/=Ee)*Y+(E/=Ee)*te;Y-=g*qe,te-=E*qe;var Je=Math.sqrt(Y*Y+te*te);return qe/=Je,g*(te/=Je)<E*(Y/=Je)&&(g=-g,E=-E,qe=-qe,Ee=-Ee),{scale:new at(Ee,0,0,Je,0,0),translate:new at(1,0,0,1,le,Se),rotate:new at(g,E,-E,g,0,0),skew:new at(1,0,qe,1,0,0)}},at.prototype.toString=function(g){return this.join(" ")},at.prototype.inversed=function(){var g=this.sx,E=this.shy,Y=this.shx,te=this.sy,le=this.tx,Se=this.ty,Ee=1/(g*te-E*Y),qe=te*Ee,Je=-E*Ee,ft=-Y*Ee,mt=g*Ee;return new at(qe,Je,ft,mt,-qe*le-ft*Se,-Je*le-mt*Se)},at.prototype.applyToPoint=function(g){var E=g.x*this.sx+g.y*this.shx+this.tx,Y=g.x*this.shy+g.y*this.sy+this.ty;return new qo(E,Y)},at.prototype.applyToRectangle=function(g){var E=this.applyToPoint(g),Y=this.applyToPoint(new qo(g.x+g.w,g.y+g.h));return new Ll(E.x,E.y,Y.x-E.x,Y.y-E.y)},at.prototype.clone=function(){var g=this.sx,E=this.shy,Y=this.shx,te=this.sy,le=this.tx,Se=this.ty;return new at(g,E,Y,te,le,Se)},p.Matrix=at;var sa=p.matrixMult=function(g,E){return E.multiply(g)},ca=new at(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=ca;var Yn=function(g,E){if(!ht[g]){var Y=(E instanceof ps?"Sh":"P")+(Object.keys(He).length+1).toString(10);E.id=Y,ht[g]=Y,He[Y]=E,It.publish("addPattern",E)}};p.ShadingPattern=ps,p.TilingPattern=Oc,p.addShadingPattern=function(g,E){return M("addShadingPattern()"),Yn(g,E),this},p.beginTilingPattern=function(g){M("beginTilingPattern()"),Al(g.boundingBox[0],g.boundingBox[1],g.boundingBox[2]-g.boundingBox[0],g.boundingBox[3]-g.boundingBox[1],g.matrix)},p.endTilingPattern=function(g,E){M("endTilingPattern()"),E.stream=Ce[U].join(`
`),Yn(g,E),It.publish("endTilingPattern",E),Mi.pop().restore()};var Jn,cr=p.__private__.newObject=function(){var g=Br();return zr(g,!0),g},Br=p.__private__.newObjectDeferred=function(){return ie++,ce[ie]=function(){return ve},ie},zr=function(g,E){return E=typeof E=="boolean"&&E,ce[g]=ve,E&&J(g+" 0 obj"),g},Mo=p.__private__.newAdditionalObject=function(){var g={objId:Br(),content:""};return be.push(g),g},$a=Br(),pi=Br(),Di=p.__private__.decodeColorString=function(g){var E=g.split(" ");if(E.length!==2||E[1]!=="g"&&E[1]!=="G")E.length!==5||E[4]!=="k"&&E[4]!=="K"||(E=[(1-E[0])*(1-E[3]),(1-E[1])*(1-E[3]),(1-E[2])*(1-E[3]),"r"]);else{var Y=parseFloat(E[0]);E=[Y,Y,Y,"r"]}for(var te="#",le=0;le<3;le++)te+=("0"+Math.floor(255*parseFloat(E[le])).toString(16)).slice(-2);return te},vi=p.__private__.encodeColorString=function(g){var E;typeof g=="string"&&(g={ch1:g});var Y=g.ch1,te=g.ch2,le=g.ch3,Se=g.ch4,Ee=g.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Y=="string"&&Y.charAt(0)!=="#"){var qe=new WC(Y);if(qe.ok)Y=qe.toHex();else if(!/^\d*\.?\d*$/.test(Y))throw new Error('Invalid color "'+Y+'" passed to jsPDF.encodeColorString.')}if(typeof Y=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Y)&&(Y="#"+Y[1]+Y[1]+Y[2]+Y[2]+Y[3]+Y[3]),typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y)){var Je=parseInt(Y.substr(1),16);Y=Je>>16&255,te=Je>>8&255,le=255&Je}if(te===void 0||Se===void 0&&Y===te&&te===le)E=typeof Y=="string"?Y+" "+Ee[0]:g.precision===2?O(Y/255)+" "+Ee[0]:L(Y/255)+" "+Ee[0];else if(Se===void 0||$t(Se)==="object"){if(Se&&!isNaN(Se.a)&&Se.a===0)return["1.","1.","1.",Ee[1]].join(" ");E=typeof Y=="string"?[Y,te,le,Ee[1]].join(" "):g.precision===2?[O(Y/255),O(te/255),O(le/255),Ee[1]].join(" "):[L(Y/255),L(te/255),L(le/255),Ee[1]].join(" ")}else E=typeof Y=="string"?[Y,te,le,Se,Ee[2]].join(" "):g.precision===2?[O(Y),O(te),O(le),O(Se),Ee[2]].join(" "):[L(Y),L(te),L(le),L(Se),Ee[2]].join(" ");return E},mi=p.__private__.getFilters=function(){return o},Xn=p.__private__.putStream=function(g){var E=(g=g||{}).data||"",Y=g.filters||mi(),te=g.alreadyAppliedFilters||[],le=g.addLength1||!1,Se=E.length,Ee=g.objectId,qe=function(Nr){return Nr};if(u!==null&&Ee===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(qe=gr.encryptor(Ee,0));var Je={};Y===!0&&(Y=["FlateEncode"]);var ft=g.additionalKeyValues||[],mt=(Je=et.API.processDataByFilters!==void 0?et.API.processDataByFilters(E,Y):{data:E,reverseChain:[]}).reverseChain+(Array.isArray(te)?te.join(" "):te.toString());if(Je.data.length!==0&&(ft.push({key:"Length",value:Je.data.length}),le===!0&&ft.push({key:"Length1",value:Se})),mt.length!=0)if(mt.split("/").length-1==1)ft.push({key:"Filter",value:mt});else{ft.push({key:"Filter",value:"["+mt+"]"});for(var Rt=0;Rt<ft.length;Rt+=1)if(ft[Rt].key==="DecodeParms"){for(var nr=[],Er=0;Er<Je.reverseChain.split("/").length-1;Er+=1)nr.push("null");nr.push(ft[Rt].value),ft[Rt].value="["+nr.join(" ")+"]"}}J("<<");for(var Kt=0;Kt<ft.length;Kt++)J("/"+ft[Kt].key+" "+ft[Kt].value);J(">>"),Je.data.length!==0&&(J("stream"),J(qe(Je.data)),J("endstream"))},Do=p.__private__.putPage=function(g){var E=g.number,Y=g.data,te=g.objId,le=g.contentsObjId;zr(te,!0),J("<</Type /Page"),J("/Parent "+g.rootDictionaryObjId+" 0 R"),J("/Resources "+g.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(F(g.mediaBox.bottomLeftX))+" "+parseFloat(F(g.mediaBox.bottomLeftY))+" "+F(g.mediaBox.topRightX)+" "+F(g.mediaBox.topRightY)+"]"),g.cropBox!==null&&J("/CropBox ["+F(g.cropBox.bottomLeftX)+" "+F(g.cropBox.bottomLeftY)+" "+F(g.cropBox.topRightX)+" "+F(g.cropBox.topRightY)+"]"),g.bleedBox!==null&&J("/BleedBox ["+F(g.bleedBox.bottomLeftX)+" "+F(g.bleedBox.bottomLeftY)+" "+F(g.bleedBox.topRightX)+" "+F(g.bleedBox.topRightY)+"]"),g.trimBox!==null&&J("/TrimBox ["+F(g.trimBox.bottomLeftX)+" "+F(g.trimBox.bottomLeftY)+" "+F(g.trimBox.topRightX)+" "+F(g.trimBox.topRightY)+"]"),g.artBox!==null&&J("/ArtBox ["+F(g.artBox.bottomLeftX)+" "+F(g.artBox.bottomLeftY)+" "+F(g.artBox.topRightX)+" "+F(g.artBox.topRightY)+"]"),typeof g.userUnit=="number"&&g.userUnit!==1&&J("/UserUnit "+g.userUnit),It.publish("putPage",{objId:te,pageContext:pt[E],pageNumber:E,page:Y}),J("/Contents "+le+" 0 R"),J(">>"),J("endobj");var Se=Y.join(`
`);return T===k&&(Se+=`
Q`),zr(le,!0),Xn({data:Se,filters:mi(),objectId:le}),J("endobj"),te},Fi=p.__private__.putPages=function(){var g,E,Y=[];for(g=1;g<=Wt;g++)pt[g].objId=Br(),pt[g].contentsObjId=Br();for(g=1;g<=Wt;g++)Y.push(Do({number:g,data:Ce[g],objId:pt[g].objId,contentsObjId:pt[g].contentsObjId,mediaBox:pt[g].mediaBox,cropBox:pt[g].cropBox,bleedBox:pt[g].bleedBox,trimBox:pt[g].trimBox,artBox:pt[g].artBox,userUnit:pt[g].userUnit,rootDictionaryObjId:$a,resourceDictionaryObjId:pi}));zr($a,!0),J("<</Type /Pages");var te="/Kids [";for(E=0;E<Wt;E++)te+=Y[E]+" 0 R ";J(te+"]"),J("/Count "+Wt),J(">>"),J("endobj"),It.publish("postPutPages")},Fo=function(g){It.publish("putFont",{font:g,out:J,newObject:cr,putStream:Xn}),g.isAlreadyPutted!==!0&&(g.objectNumber=cr(),J("<<"),J("/Type /Font"),J("/BaseFont /"+gc(g.postScriptName)),J("/Subtype /Type1"),typeof g.encoding=="string"&&J("/Encoding /"+g.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},zs=function(g){g.objectNumber=cr();var E=[];E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Form"}),E.push({key:"BBox",value:"["+[F(g.x),F(g.y),F(g.x+g.width),F(g.y+g.height)].join(" ")+"]"}),E.push({key:"Matrix",value:"["+g.matrix.toString()+"]"});var Y=g.pages[1].join(`
`);Xn({data:Y,additionalKeyValues:E,objectId:g.objectNumber}),J("endobj")},Ws=function(g,E){E||(E=21);var Y=cr(),te=function(Ee,qe){var Je,ft=[],mt=1/(qe-1);for(Je=0;Je<1;Je+=mt)ft.push(Je);if(ft.push(1),Ee[0].offset!=0){var Rt={offset:0,color:Ee[0].color};Ee.unshift(Rt)}if(Ee[Ee.length-1].offset!=1){var nr={offset:1,color:Ee[Ee.length-1].color};Ee.push(nr)}for(var Er="",Kt=0,Nr=0;Nr<ft.length;Nr++){for(Je=ft[Nr];Je>Ee[Kt+1].offset;)Kt++;var Cr=Ee[Kt].offset,Wr=(Je-Cr)/(Ee[Kt+1].offset-Cr),ei=Ee[Kt].color,wn=Ee[Kt+1].color;Er+=ee(Math.round((1-Wr)*ei[0]+Wr*wn[0]).toString(16))+ee(Math.round((1-Wr)*ei[1]+Wr*wn[1]).toString(16))+ee(Math.round((1-Wr)*ei[2]+Wr*wn[2]).toString(16))}return Er.trim()}(g.colors,E),le=[];le.push({key:"FunctionType",value:"0"}),le.push({key:"Domain",value:"[0.0 1.0]"}),le.push({key:"Size",value:"["+E+"]"}),le.push({key:"BitsPerSample",value:"8"}),le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xn({data:te,additionalKeyValues:le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Y}),J("endobj"),g.objectNumber=cr(),J("<< /ShadingType "+g.type),J("/ColorSpace /DeviceRGB");var Se="/Coords ["+F(parseFloat(g.coords[0]))+" "+F(parseFloat(g.coords[1]))+" ";g.type===2?Se+=F(parseFloat(g.coords[2]))+" "+F(parseFloat(g.coords[3])):Se+=F(parseFloat(g.coords[2]))+" "+F(parseFloat(g.coords[3]))+" "+F(parseFloat(g.coords[4]))+" "+F(parseFloat(g.coords[5])),J(Se+="]"),g.matrix&&J("/Matrix ["+g.matrix.toString()+"]"),J("/Function "+Y+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},qs=function(g,E){var Y=Br(),te=cr();E.push({resourcesOid:Y,objectOid:te}),g.objectNumber=te;var le=[];le.push({key:"Type",value:"/Pattern"}),le.push({key:"PatternType",value:"1"}),le.push({key:"PaintType",value:"1"}),le.push({key:"TilingType",value:"1"}),le.push({key:"BBox",value:"["+g.boundingBox.map(F).join(" ")+"]"}),le.push({key:"XStep",value:F(g.xStep)}),le.push({key:"YStep",value:F(g.yStep)}),le.push({key:"Resources",value:Y+" 0 R"}),g.matrix&&le.push({key:"Matrix",value:"["+g.matrix.toString()+"]"}),Xn({data:g.stream,additionalKeyValues:le,objectId:g.objectNumber}),J("endobj")},Cv=function(g){for(var E in g.objectNumber=cr(),J("<<"),g)switch(E){case"opacity":J("/ca "+O(g[E]));break;case"stroke-opacity":J("/CA "+O(g[E]))}J(">>"),J("endobj")},_l=function(g){zr(g.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var E in J("/Font <<"),We)We.hasOwnProperty(E)&&(d===!1||d===!0&&v.hasOwnProperty(E))&&J("/"+E+" "+We[E].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(He).length>0){for(var E in J("/Shading <<"),He)He.hasOwnProperty(E)&&He[E]instanceof ps&&He[E].objectNumber>=0&&J("/"+E+" "+He[E].objectNumber+" 0 R");It.publish("putShadingPatternDict"),J(">>")}}(),function(E){if(Object.keys(He).length>0){for(var Y in J("/Pattern <<"),He)He.hasOwnProperty(Y)&&He[Y]instanceof p.TilingPattern&&He[Y].objectNumber>=0&&He[Y].objectNumber<E&&J("/"+Y+" "+He[Y].objectNumber+" 0 R");It.publish("putTilingPatternDict"),J(">>")}}(g.objectOid),function(){if(Object.keys(Fe).length>0){var E;for(E in J("/ExtGState <<"),Fe)Fe.hasOwnProperty(E)&&Fe[E].objectNumber>=0&&J("/"+E+" "+Fe[E].objectNumber+" 0 R");It.publish("putGStateDict"),J(">>")}}(),function(){for(var E in J("/XObject <<"),Jr)Jr.hasOwnProperty(E)&&Jr[E].objectNumber>=0&&J("/"+E+" "+Jr[E].objectNumber+" 0 R");It.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},Tf=function(g){st[g.fontName]=st[g.fontName]||{},st[g.fontName][g.fontStyle]=g.id},Ef=function(g,E,Y,te,le){var Se={id:"F"+(Object.keys(We).length+1).toString(10),postScriptName:g,fontName:E,fontStyle:Y,encoding:te,isStandardFont:le||!1,metadata:{}};return It.publish("addFont",{font:Se,instance:this}),We[Se.id]=Se,Tf(Se),Se.id},Zn=p.__private__.pdfEscape=p.pdfEscape=function(g,E){return function(Y,te){var le,Se,Ee,qe,Je,ft,mt,Rt,nr;if(Ee=(te=te||{}).sourceEncoding||"Unicode",Je=te.outputEncoding,(te.autoencode||Je)&&We[Ke].metadata&&We[Ke].metadata[Ee]&&We[Ke].metadata[Ee].encoding&&(qe=We[Ke].metadata[Ee].encoding,!Je&&We[Ke].encoding&&(Je=We[Ke].encoding),!Je&&qe.codePages&&(Je=qe.codePages[0]),typeof Je=="string"&&(Je=qe[Je]),Je)){for(mt=!1,ft=[],le=0,Se=Y.length;le<Se;le++)(Rt=Je[Y.charCodeAt(le)])?ft.push(String.fromCharCode(Rt)):ft.push(Y[le]),ft[le].charCodeAt(0)>>8&&(mt=!0);Y=ft.join("")}for(le=Y.length;mt===void 0&&le!==0;)Y.charCodeAt(le-1)>>8&&(mt=!0),le--;if(!mt)return Y;for(ft=te.noBOM?[]:[254,255],le=0,Se=Y.length;le<Se;le++){if((nr=(Rt=Y.charCodeAt(le))>>8)>>8)throw new Error("Character at position "+le+" of string '"+Y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ft.push(nr),ft.push(Rt-(nr<<8))}return String.fromCharCode.apply(void 0,ft)}(g,E).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wl=p.__private__.beginPage=function(g){Ce[++Wt]=[],pt[Wt]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(g[0]),topRightY:Number(g[1])}},Lf(Wt),ye(Ce[U])},Cf=function(g,E){var Y,te,le;switch(e=E||e,typeof g=="string"&&(Y=_(g.toLowerCase()),Array.isArray(Y)&&(te=Y[0],le=Y[1])),Array.isArray(g)&&(te=g[0]*it,le=g[1]*it),isNaN(te)&&(te=i[0],le=i[1]),(te>14400||le>14400)&&(Gt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),te=Math.min(14400,te),le=Math.min(14400,le)),i=[te,le],e.substr(0,1)){case"l":le>te&&(i=[le,te]);break;case"p":te>le&&(i=[le,te])}wl(i),Dv(Pl),J(Gs),El!==0&&J(El+" J"),Cl!==0&&J(Cl+" j"),It.publish("addPage",{pageNumber:Wt})},bl=function(g){g>0&&g<=Wt&&(Ce.splice(g,1),pt.splice(g,1),Wt--,U>Wt&&(U=Wt),this.setPage(U))},Lf=function(g){g>0&&g<=Wt&&(U=g)},Af=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ce.length-1},Of=function(g,E,Y){var te,le=void 0;return Y=Y||{},g=g!==void 0?g:We[Ke].fontName,E=E!==void 0?E:We[Ke].fontStyle,te=g.toLowerCase(),st[te]!==void 0&&st[te][E]!==void 0?le=st[te][E]:st[g]!==void 0&&st[g][E]!==void 0?le=st[g][E]:Y.disableWarning===!1&&Gt.warn("Unable to look up font label for font '"+g+"', '"+E+"'. Refer to getFontList() for available fonts."),le||Y.noFallback||(le=st.times[E])==null&&(le=st.times.normal),le},Hs=p.__private__.putInfo=function(){var g=cr(),E=function(te){return te};for(var Y in u!==null&&(E=gr.encryptor(g,0)),J("<<"),J("/Producer ("+Zn(E("jsPDF "+et.version))+")"),lt)lt.hasOwnProperty(Y)&&lt[Y]&&J("/"+Y.substr(0,1).toUpperCase()+Y.substr(1)+" ("+Zn(E(lt[Y]))+")");J("/CreationDate ("+Zn(E(X))+")"),J(">>"),J("endobj")},Lv=p.__private__.putCatalog=function(g){var E=(g=g||{}).rootDictionaryObjId||$a;switch(cr(),J("<<"),J("/Type /Catalog"),J("/Pages "+E+" 0 R"),De||(De="fullwidth"),De){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Y=""+De;Y.substr(Y.length-1)==="%"&&(De=parseInt(De)/100),typeof De=="number"&&J("/OpenAction [3 0 R /XYZ null null "+O(De)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}Ge&&J("/PageMode /"+Ge),It.publish("putCatalog"),J(">>"),J("endobj")},Tr=p.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(ie+1)),J("/Root "+ie+" 0 R"),J("/Info "+(ie-1)+" 0 R"),u!==null&&J("/Encrypt "+gr.oid+" 0 R"),J("/ID [ <"+Z+"> <"+Z+"> ]"),J(">>")},Nf=p.__private__.putHeader=function(){J("%PDF-"+y),J("%ºß¬à")},Rf=p.__private__.putXRef=function(){var g="0000000000";J("xref"),J("0 "+(ie+1)),J("0000000000 65535 f ");for(var E=1;E<=ie;E++)typeof ce[E]=="function"?J((g+ce[E]()).slice(-10)+" 00000 n "):ce[E]!==void 0?J((g+ce[E]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},la=p.__private__.buildDocument=function(){var g;ie=0,ve=0,ge=[],ce=[],be=[],$a=Br(),pi=Br(),ye(ge),It.publish("buildDocument"),Nf(),Fi(),function(){It.publish("putAdditionalObjects");for(var Y=0;Y<be.length;Y++){var te=be[Y];zr(te.objId,!0),J(te.content),J("endobj")}It.publish("postPutAdditionalObjects")}(),g=[],function(){for(var Y in We)We.hasOwnProperty(Y)&&(d===!1||d===!0&&v.hasOwnProperty(Y))&&Fo(We[Y])}(),function(){var Y;for(Y in Fe)Fe.hasOwnProperty(Y)&&Cv(Fe[Y])}(),function(){for(var Y in Jr)Jr.hasOwnProperty(Y)&&zs(Jr[Y])}(),function(Y){var te;for(te in He)He.hasOwnProperty(te)&&(He[te]instanceof ps?Ws(He[te]):He[te]instanceof Oc&&qs(He[te],Y))}(g),It.publish("putResources"),g.forEach(_l),_l({resourcesOid:pi,objectOid:Number.MAX_SAFE_INTEGER}),It.publish("postPutResources"),u!==null&&(gr.oid=cr(),J("<<"),J("/Filter /Standard"),J("/V "+gr.v),J("/R "+gr.r),J("/U <"+gr.toHexString(gr.U)+">"),J("/O <"+gr.toHexString(gr.O)+">"),J("/P "+gr.P),J(">>"),J("endobj")),Hs(),Lv();var E=ve;return Rf(),Tr(),J("startxref"),J(""+E),J("%%EOF"),ye(Ce[U]),ge.join(`
`)},Bo=p.__private__.getBlob=function(g){return new Blob([Oe(g)],{type:"application/pdf"})},gi=p.output=p.__private__.output=(Jn=function(g,E){switch(typeof(E=E||{})=="string"?E={filename:E}:E.filename=E.filename||"generated.pdf",g){case void 0:return la();case"save":p.save(E.filename);break;case"arraybuffer":return Oe(la());case"blob":return Bo(la());case"bloburi":case"bloburl":if(ut.URL!==void 0&&typeof ut.URL.createObjectURL=="function")return ut.URL&&ut.URL.createObjectURL(Bo(la()))||void 0;Gt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Y="",te=la();try{Y=Rx(te)}catch{Y=Rx(unescape(encodeURIComponent(te)))}return"data:application/pdf;filename="+E.filename+";base64,"+Y;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ut)==="[object Window]"){var le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Se=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';E.pdfObjectUrl&&(le=E.pdfObjectUrl,Se="");var Ee='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+le+'"'+Se+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(E)+");<\/script></body></html>",qe=ut.open();return qe!==null&&qe.document.write(Ee),qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ut)==="[object Window]"){var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(E.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+E.filename+'" width="500px" height="400px" /></body></html>',ft=ut.open();if(ft!==null){ft.document.write(Je);var mt=this;ft.document.documentElement.querySelector("#pdfViewer").onload=function(){ft.document.title=E.filename,ft.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mt.output("bloburl"))}}return ft}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ut)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",E)+'"></iframe></body></html>',nr=ut.open();if(nr!==null&&(nr.document.write(Rt),nr.document.title=E.filename),nr||typeof safari>"u")return nr;break;case"datauri":case"dataurl":return ut.document.location.href=this.output("datauristring",E);default:return null}},Jn.foo=function(){try{return Jn.apply(this,arguments)}catch(Y){var g=Y.stack||"";~g.indexOf(" at ")&&(g=g.split(" at ")[1]);var E="Error in function "+g.split(`
`)[0].split("<")[0]+": "+Y.message;if(!ut.console)throw new Error(E);ut.console.error(E,Y),ut.alert&&alert(E)}},Jn.foo.bar=Jn,Jn.foo),$o=function(g){return Array.isArray(Io)===!0&&Io.indexOf(g)>-1};switch(n){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=$o("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);it=n}var gr=null;ne(),H();var xl=p.__private__.getPageInfo=p.getPageInfo=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pt[g].objId,pageNumber:g,pageContext:pt[g]}},Av=p.__private__.getPageInfoByObjId=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var E in pt)if(pt[E].objId===g)break;return xl(E)},Ov=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:pt[U].objId,pageNumber:U,pageContext:pt[U]}};p.addPage=function(){return Cf.apply(this,arguments),this},p.setPage=function(){return Lf.apply(this,arguments),ye.call(this,Ce[U]),this},p.insertPage=function(g){return this.addPage(),this.movePage(U,g),this},p.movePage=function(g,E){var Y,te;if(g>E){Y=Ce[g],te=pt[g];for(var le=g;le>E;le--)Ce[le]=Ce[le-1],pt[le]=pt[le-1];Ce[E]=Y,pt[E]=te,this.setPage(E)}else if(g<E){Y=Ce[g],te=pt[g];for(var Se=g;Se<E;Se++)Ce[Se]=Ce[Se+1],pt[Se]=pt[Se+1];Ce[E]=Y,pt[E]=te,this.setPage(E)}return this},p.deletePage=function(){return bl.apply(this,arguments),this},p.__private__.text=p.text=function(g,E,Y,te,le){var Se,Ee,qe,Je,ft,mt,Rt,nr,Er,Kt=(te=te||{}).scope||this;if(typeof g=="number"&&typeof E=="number"&&(typeof Y=="string"||Array.isArray(Y))){var Nr=Y;Y=E,E=g,g=Nr}if(arguments[3]instanceof at==0?(qe=arguments[4],Je=arguments[5],$t(Rt=arguments[3])==="object"&&Rt!==null||(typeof qe=="string"&&(Je=qe,qe=null),typeof Rt=="string"&&(Je=Rt,Rt=null),typeof Rt=="number"&&(qe=Rt,Rt=null),te={flags:Rt,angle:qe,align:Je})):(M("The transform parameter of text() with a Matrix value"),Er=le),isNaN(E)||isNaN(Y)||g==null)throw new Error("Invalid arguments passed to jsPDF.text");if(g.length===0)return Kt;var Cr,Wr="",ei=typeof te.lineHeightFactor=="number"?te.lineHeightFactor:Vo,wn=Kt.internal.scaleFactor;function Uf(Mt){return Mt=Mt.split("	").join(Array(te.TabLen||9).join(" ")),Zn(Mt,Rt)}function Js(Mt){for(var qt,_r=Mt.concat(),Rr=[],ma=_r.length;ma--;)typeof(qt=_r.shift())=="string"?Rr.push(qt):Array.isArray(Mt)&&(qt.length===1||qt[1]===void 0&&qt[2]===void 0)?Rr.push(qt[0]):Rr.push([qt[0],qt[1],qt[2]]);return Rr}function Ko(Mt,qt){var _r;if(typeof Mt=="string")_r=qt(Mt)[0];else if(Array.isArray(Mt)){for(var Rr,ma,$l=Mt.concat(),ec=[],Wf=$l.length;Wf--;)typeof(Rr=$l.shift())=="string"?ec.push(qt(Rr)[0]):Array.isArray(Rr)&&typeof Rr[0]=="string"&&(ma=qt(Rr[0],Rr[1],Rr[2]),ec.push([ma[0],ma[1],ma[2]]));_r=ec}return _r}var za=!1,Qo=!0;if(typeof g=="string")za=!0;else if(Array.isArray(g)){var Yo=g.concat();Ee=[];for(var Jo,Xr=Yo.length;Xr--;)(typeof(Jo=Yo.shift())!="string"||Array.isArray(Jo)&&typeof Jo[0]!="string")&&(Qo=!1);za=Qo}if(za===!1)throw new Error('Type of text must be string or Array. "'+g+'" is not recognized.');typeof g=="string"&&(g=g.match(/[\r?\n]/)?g.split(/\r\n|\r|\n/g):[g]);var Xo=Pe/Kt.internal.scaleFactor,Zo=Xo*(ei-1);switch(te.baseline){case"bottom":Y-=Zo;break;case"top":Y+=Xo-Zo;break;case"hanging":Y+=Xo-2*Zo;break;case"middle":Y+=Xo/2-Zo}if((mt=te.maxWidth||0)>0&&(typeof g=="string"?g=Kt.splitTextToSize(g,mt):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(Mt,qt){return Mt.concat(Kt.splitTextToSize(qt,mt))},[]))),Se={text:g,x:E,y:Y,options:te,mutex:{pdfEscape:Zn,activeFontKey:Ke,fonts:We,activeFontSize:Pe}},It.publish("preProcessText",Se),g=Se.text,qe=(te=Se.options).angle,Er instanceof at==0&&qe&&typeof qe=="number"){qe*=Math.PI/180,te.rotationDirection===0&&(qe=-qe),T===k&&(qe=-qe);var Ol=Math.cos(qe),Nl=Math.sin(qe);Er=new at(Ol,Nl,-Nl,Ol,0,0)}else qe&&qe instanceof at&&(Er=qe);T!==k||Er||(Er=ca),(ft=te.charSpace||Qs)!==void 0&&(Wr+=F(z(ft))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(nr=te.horizontalScale)!==void 0&&(Wr+=F(100*nr)+` Tz
`),te.lang;var lr=-1,pa=te.renderingMode!==void 0?te.renderingMode:te.stroke,Xs=Kt.internal.getCurrentPageInfo().pageContext;switch(pa){case 0:case!1:case"fill":lr=0;break;case 1:case!0:case"stroke":lr=1;break;case 2:case"fillThenStroke":lr=2;break;case 3:case"invisible":lr=3;break;case 4:case"fillAndAddForClipping":lr=4;break;case 5:case"strokeAndAddPathForClipping":lr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":lr=6;break;case 7:case"addToPathForClipping":lr=7}var Vf=Xs.usedRenderingMode!==void 0?Xs.usedRenderingMode:-1;lr!==-1?Wr+=lr+` Tr
`:Vf!==-1&&(Wr+=`0 Tr
`),lr!==-1&&(Xs.usedRenderingMode=lr),Je=te.align||"left";var ti,es=Pe*ei,Rl=Kt.internal.pageSize.getWidth(),jl=We[Ke];ft=te.charSpace||Qs,mt=te.maxWidth||0,Rt=Object.assign({autoencode:!0,noBOM:!0},te.flags);var Wa=[],ts=function(Mt){return Kt.getStringUnitWidth(Mt,{font:jl,charSpace:ft,fontSize:Pe,doKerning:!1})*Pe/wn};if(Object.prototype.toString.call(g)==="[object Array]"){var Rn;Ee=Js(g),Je!=="left"&&(ti=Ee.map(ts));var jn,qa=0;if(Je==="right"){E-=ti[0],g=[],Xr=Ee.length;for(var va=0;va<Xr;va++)va===0?(jn=ua(E),Rn=fa(Y)):(jn=z(qa-ti[va]),Rn=-es),g.push([Ee[va],jn,Rn]),qa=ti[va]}else if(Je==="center"){E-=ti[0]/2,g=[],Xr=Ee.length;for(var Ha=0;Ha<Xr;Ha++)Ha===0?(jn=ua(E),Rn=fa(Y)):(jn=z((qa-ti[Ha])/2),Rn=-es),g.push([Ee[Ha],jn,Rn]),qa=ti[Ha]}else if(Je==="left"){g=[],Xr=Ee.length;for(var Il=0;Il<Xr;Il++)g.push(Ee[Il])}else if(Je==="justify"&&jl.encoding==="Identity-H"){g=[],Xr=Ee.length,mt=mt!==0?mt:Rl;for(var Zs=0,yr=0;yr<Xr;yr++)if(Rn=yr===0?fa(Y):-es,jn=yr===0?ua(E):Zs,yr<Xr-1){var zf=z((mt-ti[yr])/(Ee[yr].split(" ").length-1)),$i=Ee[yr].split(" ");g.push([$i[0]+" ",jn,Rn]),Zs=0;for(var Ui=1;Ui<$i.length;Ui++){var Ml=(ts($i[Ui-1]+" "+$i[Ui])-ts($i[Ui]))*wn+zf;Ui==$i.length-1?g.push([$i[Ui],Ml,0]):g.push([$i[Ui]+" ",Ml,0]),Zs-=Ml}}else g.push([Ee[yr],jn,Rn]);g.push(["",Zs,0])}else{if(Je!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(g=[],Xr=Ee.length,mt=mt!==0?mt:Rl,yr=0;yr<Xr;yr++){Rn=yr===0?fa(Y):-es,jn=yr===0?ua(E):0;var Dl=Ee[yr].split(" ").length-1,Fl=Dl>0?(mt-ti[yr])/Dl:0;yr<Xr-1?Wa.push(F(z(Fl))):Wa.push(0),g.push([Ee[yr],jn,Rn])}}}(typeof te.R2L=="boolean"?te.R2L:ct)===!0&&(g=Ko(g,function(Mt,qt,_r){return[Mt.split("").reverse().join(""),qt,_r]})),Se={text:g,x:E,y:Y,options:te,mutex:{pdfEscape:Zn,activeFontKey:Ke,fonts:We,activeFontSize:Pe}},It.publish("postProcessText",Se),g=Se.text,Cr=Se.mutex.isHex||!1;var Bl=We[Ke].encoding;Bl!=="WinAnsiEncoding"&&Bl!=="StandardEncoding"||(g=Ko(g,function(Mt,qt,_r){return[Uf(Mt),qt,_r]})),Ee=Js(g),g=[];for(var Ga,Ka,Qa,rs=Array.isArray(Ee[0])?1:0,Ya="",ns=function(Mt,qt,_r){var Rr="";return _r instanceof at?(_r=typeof te.angle=="number"?sa(_r,new at(1,0,0,1,Mt,qt)):sa(new at(1,0,0,1,Mt,qt),_r),T===k&&(_r=sa(new at(1,0,0,-1,0,0),_r)),Rr=_r.join(" ")+` Tm
`):Rr=F(Mt)+" "+F(qt)+` Td
`,Rr},ri=0;ri<Ee.length;ri++){switch(Ya="",rs){case 1:Qa=(Cr?"<":"(")+Ee[ri][0]+(Cr?">":")"),Ga=parseFloat(Ee[ri][1]),Ka=parseFloat(Ee[ri][2]);break;case 0:Qa=(Cr?"<":"(")+Ee[ri]+(Cr?">":")"),Ga=ua(E),Ka=fa(Y)}Wa!==void 0&&Wa[ri]!==void 0&&(Ya=Wa[ri]+` Tw
`),ri===0?g.push(Ya+ns(Ga,Ka,Er)+Qa):rs===0?g.push(Ya+Qa):rs===1&&g.push(Ya+ns(Ga,Ka,Er)+Qa)}g=rs===0?g.join(` Tj
T* `):g.join(` Tj
`),g+=` Tj
`;var Vi=`BT
/`;return Vi+=Ke+" "+Pe+` Tf
`,Vi+=F(Pe*ei)+` TL
`,Vi+=zo+`
`,Vi+=Wr,Vi+=g,J(Vi+="ET"),v[Ke]=!0,Kt};var Nv=p.__private__.clip=p.clip=function(g){return J(g==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Nv("evenodd")},p.__private__.discardPath=p.discardPath=function(){return J("n"),this};var Bi=p.__private__.isValidStyle=function(g){var E=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(g)!==-1&&(E=!0),E};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(g){return Bi(g)&&(c=g),this};var jf=p.__private__.getStyle=p.getStyle=function(g){var E=c;switch(g){case"D":case"S":E="S";break;case"F":E="f";break;case"FD":case"DF":E="B";break;case"f":case"f*":case"B":case"B*":E=g}return E},If=p.close=function(){return J("h"),this};p.stroke=function(){return J("S"),this},p.fill=function(g){return Ua("f",g),this},p.fillEvenOdd=function(g){return Ua("f*",g),this},p.fillStroke=function(g){return Ua("B",g),this},p.fillStrokeEvenOdd=function(g){return Ua("B*",g),this};var Ua=function(g,E){$t(E)==="object"?jv(E,g):J(g)},Sl=function(g){g===null||T===k&&g===void 0||(g=jf(g),J(g))};function Rv(g,E,Y,te,le){var Se=new Oc(E||this.boundingBox,Y||this.xStep,te||this.yStep,this.gState,le||this.matrix);Se.stream=this.stream;var Ee=g+"$$"+this.cloneIndex+++"$$";return Yn(Ee,Se),Se}var jv=function(g,E){var Y=ht[g.key],te=He[Y];if(te instanceof ps)J("q"),J(Iv(E)),te.gState&&p.setGState(te.gState),J(g.matrix.toString()+" cm"),J("/"+Y+" sh"),J("Q");else if(te instanceof Oc){var le=new at(1,0,0,-1,0,Go());g.matrix&&(le=le.multiply(g.matrix||ca),Y=Rv.call(te,g.key,g.boundingBox,g.xStep,g.yStep,le).id),J("q"),J("/Pattern cs"),J("/"+Y+" scn"),te.gState&&p.setGState(te.gState),J(E),J("Q")}},Iv=function(g){switch(g){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},kl=p.moveTo=function(g,E){return J(F(z(g))+" "+F(I(E))+" m"),this},Uo=p.lineTo=function(g,E){return J(F(z(g))+" "+F(I(E))+" l"),this},Va=p.curveTo=function(g,E,Y,te,le,Se){return J([F(z(g)),F(I(E)),F(z(Y)),F(I(te)),F(z(le)),F(I(Se)),"c"].join(" ")),this};p.__private__.line=p.line=function(g,E,Y,te,le){if(isNaN(g)||isNaN(E)||isNaN(Y)||isNaN(te)||!Bi(le))throw new Error("Invalid arguments passed to jsPDF.line");return T===x?this.lines([[Y-g,te-E]],g,E,[1,1],le||"S"):this.lines([[Y-g,te-E]],g,E,[1,1]).stroke()},p.__private__.lines=p.lines=function(g,E,Y,te,le,Se){var Ee,qe,Je,ft,mt,Rt,nr,Er,Kt,Nr,Cr,Wr;if(typeof g=="number"&&(Wr=Y,Y=E,E=g,g=Wr),te=te||[1,1],Se=Se||!1,isNaN(E)||isNaN(Y)||!Array.isArray(g)||!Array.isArray(te)||!Bi(le)||typeof Se!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(kl(E,Y),Ee=te[0],qe=te[1],ft=g.length,Nr=E,Cr=Y,Je=0;Je<ft;Je++)(mt=g[Je]).length===2?(Nr=mt[0]*Ee+Nr,Cr=mt[1]*qe+Cr,Uo(Nr,Cr)):(Rt=mt[0]*Ee+Nr,nr=mt[1]*qe+Cr,Er=mt[2]*Ee+Nr,Kt=mt[3]*qe+Cr,Nr=mt[4]*Ee+Nr,Cr=mt[5]*qe+Cr,Va(Rt,nr,Er,Kt,Nr,Cr));return Se&&If(),Sl(le),this},p.path=function(g){for(var E=0;E<g.length;E++){var Y=g[E],te=Y.c;switch(Y.op){case"m":kl(te[0],te[1]);break;case"l":Uo(te[0],te[1]);break;case"c":Va.apply(this,te);break;case"h":If()}}return this},p.__private__.rect=p.rect=function(g,E,Y,te,le){if(isNaN(g)||isNaN(E)||isNaN(Y)||isNaN(te)||!Bi(le))throw new Error("Invalid arguments passed to jsPDF.rect");return T===x&&(te=-te),J([F(z(g)),F(I(E)),F(z(Y)),F(z(te)),"re"].join(" ")),Sl(le),this},p.__private__.triangle=p.triangle=function(g,E,Y,te,le,Se,Ee){if(isNaN(g)||isNaN(E)||isNaN(Y)||isNaN(te)||isNaN(le)||isNaN(Se)||!Bi(Ee))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Y-g,te-E],[le-Y,Se-te],[g-le,E-Se]],g,E,[1,1],Ee,!0),this},p.__private__.roundedRect=p.roundedRect=function(g,E,Y,te,le,Se,Ee){if(isNaN(g)||isNaN(E)||isNaN(Y)||isNaN(te)||isNaN(le)||isNaN(Se)||!Bi(Ee))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qe=4/3*(Math.SQRT2-1);return le=Math.min(le,.5*Y),Se=Math.min(Se,.5*te),this.lines([[Y-2*le,0],[le*qe,0,le,Se-Se*qe,le,Se],[0,te-2*Se],[0,Se*qe,-le*qe,Se,-le,Se],[2*le-Y,0],[-le*qe,0,-le,-Se*qe,-le,-Se],[0,2*Se-te],[0,-Se*qe,le*qe,-Se,le,-Se]],g+le,E,[1,1],Ee,!0),this},p.__private__.ellipse=p.ellipse=function(g,E,Y,te,le){if(isNaN(g)||isNaN(E)||isNaN(Y)||isNaN(te)||!Bi(le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Se=4/3*(Math.SQRT2-1)*Y,Ee=4/3*(Math.SQRT2-1)*te;return kl(g+Y,E),Va(g+Y,E-Ee,g+Se,E-te,g,E-te),Va(g-Se,E-te,g-Y,E-Ee,g-Y,E),Va(g-Y,E+Ee,g-Se,E+te,g,E+te),Va(g+Se,E+te,g+Y,E+Ee,g+Y,E),Sl(le),this},p.__private__.circle=p.circle=function(g,E,Y,te){if(isNaN(g)||isNaN(E)||isNaN(Y)||!Bi(te))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(g,E,Y,Y,te)},p.setFont=function(g,E,Y){return Y&&(E=j(E,Y)),Ke=Of(g,E,{disableWarning:!1}),this};var Mv=p.__private__.getFont=p.getFont=function(){return We[Of.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var g,E,Y={};for(g in st)if(st.hasOwnProperty(g))for(E in Y[g]=[],st[g])st[g].hasOwnProperty(E)&&Y[g].push(E);return Y},p.addFont=function(g,E,Y,te,le){var Se=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Se.indexOf(arguments[3])!==-1?le=arguments[3]:arguments[3]&&Se.indexOf(arguments[3])==-1&&(Y=j(Y,te)),Ef.call(this,g,E,Y,le=le||"Identity-H")};var Vo,Pl=r.lineWidth||.200025,vt=p.__private__.getLineWidth=p.getLineWidth=function(){return Pl},Dv=p.__private__.setLineWidth=p.setLineWidth=function(g){return Pl=g,J(F(z(g))+" w"),this};p.__private__.setLineDash=et.API.setLineDash=et.API.setLineDashPattern=function(g,E){if(g=g||[],E=E||0,isNaN(E)||!Array.isArray(g))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return g=g.map(function(Y){return F(z(Y))}).join(" "),E=F(z(E)),J("["+g+"] "+E+" d"),this};var Fv=p.__private__.getLineHeight=p.getLineHeight=function(){return Pe*Vo};p.__private__.getLineHeight=p.getLineHeight=function(){return Pe*Vo};var Bv=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(g){return typeof(g=g||1.15)=="number"&&(Vo=g),this},$v=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Vo};Bv(r.lineHeight);var ua=p.__private__.getHorizontalCoordinate=function(g){return z(g)},fa=p.__private__.getVerticalCoordinate=function(g){return T===k?g:pt[U].mediaBox.topRightY-pt[U].mediaBox.bottomLeftY-z(g)},Uv=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(g){return F(ua(g))},Vv=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(g){return F(fa(g))},Gs=r.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Di(Gs)},p.__private__.setStrokeColor=p.setDrawColor=function(g,E,Y,te){return Gs=vi({ch1:g,ch2:E,ch3:Y,ch4:te,pdfColorType:"draw",precision:2}),J(Gs),this};var Tl=r.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Di(Tl)},p.__private__.setFillColor=p.setFillColor=function(g,E,Y,te){return Tl=vi({ch1:g,ch2:E,ch3:Y,ch4:te,pdfColorType:"fill",precision:2}),J(Tl),this};var zo=r.textColor||"0 g",Ks=p.__private__.getTextColor=p.getTextColor=function(){return Di(zo)};p.__private__.setTextColor=p.setTextColor=function(g,E,Y,te){return zo=vi({ch1:g,ch2:E,ch3:Y,ch4:te,pdfColorType:"text",precision:3}),this};var Qs=r.charSpace,zv=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Qs||0)};p.__private__.setCharSpace=p.setCharSpace=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qs=g,this};var El=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(g){var E=p.CapJoinStyles[g];if(E===void 0)throw new Error("Line cap style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return El=E,J(E+" J"),this};var Cl=0;p.__private__.setLineJoin=p.setLineJoin=function(g){var E=p.CapJoinStyles[g];if(E===void 0)throw new Error("Line join style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cl=E,J(E+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(g){if(g=g||0,isNaN(g))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(F(z(g))+" M"),this},p.GState=vp,p.setGState=function(g){(g=typeof g=="string"?Fe[vr[g]]:Wo(null,g)).equals(mr)||(J("/"+g.id+" gs"),mr=g)};var Wo=function(g,E){if(!g||!vr[g]){var Y=!1;for(var te in Fe)if(Fe.hasOwnProperty(te)&&Fe[te].equals(E)){Y=!0;break}if(Y)E=Fe[te];else{var le="GS"+(Object.keys(Fe).length+1).toString(10);Fe[le]=E,E.id=le}return g&&(vr[g]=E.id),It.publish("addGState",E),E}};p.addGState=function(g,E){return Wo(g,E),this},p.saveGraphicsState=function(){return J("q"),Nt.push({key:Ke,size:Pe,color:zo}),this},p.restoreGraphicsState=function(){J("Q");var g=Nt.pop();return Ke=g.key,Pe=g.size,zo=g.color,mr=null,this},p.setCurrentTransformationMatrix=function(g){return J(g.toString()+" cm"),this},p.comment=function(g){return J("#"+g),this};var qo=function(g,E){var Y=g||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Y},set:function(Se){isNaN(Se)||(Y=parseFloat(Se))}});var te=E||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return te},set:function(Se){isNaN(Se)||(te=parseFloat(Se))}});var le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return le},set:function(Se){le=Se.toString()}}),this},Ll=function(g,E,Y,te){qo.call(this,g,E),this.type="rect";var le=Y||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return le},set:function(Ee){isNaN(Ee)||(le=parseFloat(Ee))}});var Se=te||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Se},set:function(Ee){isNaN(Ee)||(Se=parseFloat(Ee))}}),this},Ys=function(){this.page=Wt,this.currentPage=U,this.pages=Ce.slice(0),this.pagesContext=pt.slice(0),this.x=Xe,this.y=Ot,this.matrix=St,this.width=Mf(U),this.height=da(U),this.outputDestination=je,this.id="",this.objectNumber=-1};Ys.prototype.restore=function(){Wt=this.page,U=this.currentPage,pt=this.pagesContext,Ce=this.pages,Xe=this.x,Ot=this.y,St=this.matrix,Df(U,this.width),ha(U,this.height),je=this.outputDestination};var Al=function(g,E,Y,te,le){Mi.push(new Ys),Wt=U=0,Ce=[],Xe=g,Ot=E,St=le,wl([Y,te])};for(var Ho in p.beginFormObject=function(g,E,Y,te,le){return Al(g,E,Y,te,le),this},p.endFormObject=function(g){return function(E){if(oa[E])Mi.pop().restore();else{var Y=new Ys,te="Xo"+(Object.keys(Jr).length+1).toString(10);Y.id=te,oa[E]=te,Jr[te]=Y,It.publish("addFormObject",Y),Mi.pop().restore()}}(g),this},p.doFormObject=function(g,E){var Y=Jr[oa[g]];return J("q"),J(E.toString()+" cm"),J("/"+Y.id+" Do"),J("Q"),this},p.getFormObject=function(g){var E=Jr[oa[g]];return{x:E.x,y:E.y,width:E.width,height:E.height,matrix:E.matrix}},p.save=function(g,E){return g=g||"generated.pdf",(E=E||{}).returnPromise=E.returnPromise||!1,E.returnPromise===!1?(fs(Bo(la()),g),typeof fs.unload=="function"&&ut.setTimeout&&setTimeout(fs.unload,911),this):new Promise(function(Y,te){try{var le=fs(Bo(la()),g);typeof fs.unload=="function"&&ut.setTimeout&&setTimeout(fs.unload,911),Y(le)}catch(Se){te(Se.message)}})},et.API)et.API.hasOwnProperty(Ho)&&(Ho==="events"&&et.API.events.length?function(g,E){var Y,te,le;for(le=E.length-1;le!==-1;le--)Y=E[le][0],te=E[le][1],g.subscribe.apply(g,[Y].concat(typeof te=="function"?[te]:te))}(It,et.API.events):p[Ho]=et.API[Ho]);function Mf(g){return pt[g].mediaBox.topRightX-pt[g].mediaBox.bottomLeftX}function Df(g,E){pt[g].mediaBox.topRightX=E+pt[g].mediaBox.bottomLeftX}function da(g){return pt[g].mediaBox.topRightY-pt[g].mediaBox.bottomLeftY}function ha(g,E){pt[g].mediaBox.topRightY=E+pt[g].mediaBox.bottomLeftY}var Ff=p.getPageWidth=function(g){return Mf(g=g||U)/it},Bf=p.setPageWidth=function(g,E){Df(g,E*it)},Go=p.getPageHeight=function(g){return da(g=g||U)/it},$f=p.setPageHeight=function(g,E){ha(g,E*it)};return p.internal={pdfEscape:Zn,getStyle:jf,getFont:Mv,getFontSize:Ne,getCharSpace:zv,getTextColor:Ks,getLineHeight:Fv,getLineHeightFactor:$v,getLineWidth:vt,write:we,getHorizontalCoordinate:ua,getVerticalCoordinate:fa,getCoordinateString:Uv,getVerticalCoordinateString:Vv,collections:{},newObject:cr,newAdditionalObject:Mo,newObjectDeferred:Br,newObjectDeferredBegin:zr,getFilters:mi,putStream:Xn,events:It,scaleFactor:it,pageSize:{getWidth:function(){return Ff(U)},setWidth:function(g){Bf(U,g)},getHeight:function(){return Go(U)},setHeight:function(g){$f(U,g)}},encryptionOptions:u,encryption:gr,getEncryptor:function(g){return u!==null?gr.encryptor(g,0):function(E){return E}},output:gi,getNumberOfPages:Af,pages:Ce,out:J,f2:O,f3:L,getPageInfo:xl,getPageInfoByObjId:Av,getCurrentPageInfo:Ov,getPDFVersion:b,Point:qo,Rectangle:Ll,Matrix:at,hasHotfix:$o},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Ff(U)},set:function(g){Bf(U,g)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Go(U)},set:function(g){$f(U,g)},enumerable:!0,configurable:!0}),(function(g){for(var E=0,Y=Me.length;E<Y;E++){var te=Ef.call(this,g[E][0],g[E][1],g[E][2],Me[E][3],!0);d===!1&&(v[te]=!0);var le=g[E][0].split("-");Tf({id:te,fontName:le[0],fontStyle:le[1]||""})}It.publish("addFonts",{fonts:We,dictionary:st})}).call(p,Me),Ke="F1",Cf(i,e),It.publish("initialized"),p}mc.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},mc.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mc.prototype.hexToBytes=function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return t.join("")},mc.prototype.processOwnerPassword=function(r,t){return Py(ky(t).substr(0,5),r)},mc.prototype.encryptor=function(r,t){var e=ky(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Py(e,n)}},vp.prototype.equals=function(r){var t,e="id,objectNumber,equals";if(!r||$t(r)!==$t(this))return!1;var n=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;n++}for(t in r)r.hasOwnProperty(t)&&e.indexOf(t)<0&&n--;return n===0},et.API={events:[]},et.version="3.0.3";var dr=et.API,S_=1,Vs=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},lc=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},gt=function(r){return r.toFixed(2)},so=function(r){return r.toFixed(5)};dr.__acroform__={};var Nn=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},Dx=function(r){return r*S_},Hi=function(r){var t=new KC,e=ze.internal.getHeight(r)||0,n=ze.internal.getWidth(r)||0;return t.BBox=[0,0,Number(gt(n)),Number(gt(e))],t},ree=dr.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<t},nee=dr.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<t)},iee=dr.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<t?1:0},Sr=dr.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return iee(r,t-1)},kr=dr.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ree(r,t-1)},Pr=dr.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nee(r,t-1)},aee=dr.__acroform__.calculateCoordinates=function(r,t){var e=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=r[0],a=r[1],o=r[2],s=r[3],l={};return l.lowerLeft_X=e(i)||0,l.lowerLeft_Y=n(a+s)||0,l.upperRight_X=e(i+o)||0,l.upperRight_Y=n(a)||0,[Number(gt(l.lowerLeft_X)),Number(gt(l.lowerLeft_Y)),Number(gt(l.upperRight_X)),Number(gt(l.upperRight_Y))]},oee=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],e=r._V||r.DV,n=Ty(r,e),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+i+" "+gt(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=Hi(r);return a.scope=r.scope,a.stream=t.join(`
`),a}},Ty=function(r,t){var e=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=r.multiline?i.map(function(O){return O.split(`
`)}):i.map(function(O){return[O]});var a=e,o=ze.internal.getHeight(r)||0;o=o<0?-o:o;var s=ze.internal.getWidth(r)||0;s=s<0?-s:s;var l=function(O,L,z){if(O+1<i.length){var I=L+" "+i[O+1][0];return eh(I,r,z).width<=s-4}return!1};a++;e:for(;a>0;){t="",a--;var c,u,d=eh("3",r,a).height,v=r.multiline?o-a:(o-d)/2,p=v+=2,y=0,b=0,S=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+eh(t,r,a=12).width+", FieldWidth:"+s+`
`;break}for(var _="",x=0,k=0;k<i.length;k++)if(i.hasOwnProperty(k)){var T=!1;if(i[k].length!==1&&S!==i[k].length-1){if((d+2)*(x+2)+2>o)continue e;_+=i[k][S],T=!0,b=k,k--}else{_=(_+=i[k][S]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var R=parseInt(k),B=l(R,_,a),j=k>=i.length-1;if(B&&!j){_+=" ",S=0;continue}if(B||j){if(j)b=R;else if(r.multiline&&(d+2)*(x+2)+2>o)continue e}else{if(!r.multiline||(d+2)*(x+2)+2>o)continue e;b=R}}for(var F="",M=y;M<=b;M++){var q=i[M];if(r.multiline){if(M===b){F+=q[S]+" ",S=(S+1)%q.length;continue}if(M===y){F+=q[q.length-1]+" ";continue}}F+=q[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,u=eh(F,r,a).width,r.textAlign){case"right":c=s-u-2;break;case"center":c=(s-u)/2;break;default:c=2}t+=gt(c)+" "+gt(p)+` Td
`,t+="("+Vs(F)+`) Tj
`,t+=-gt(c)+` 0 Td
`,p=-(a+2),u=0,y=T?b:b+1,x++,_=""}break}return n.text=t,n.fontSize=a,n},eh=function(r,t,e){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:i}},see={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},cee=function(r,t){var e={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===e.type&&n.object===e.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(e)},lee=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(ji.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(see)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");S_=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new QC,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&cee(a,e)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(e){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var s=n[o],l=[],c=s.Rect;if(s.Rect&&(s.Rect=aee(s.Rect,i)),i.internal.newObjectDeferredBegin(s.objId,!0),s.DA=ze.createDefaultAppearanceStream(s),$t(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=c,s.hasAppearanceStream&&!s.appearanceStreamContent){var u=oee(s);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(s.appearanceStreamContent){var d="";for(var v in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(v)){var p=s.appearanceStreamContent[v];if(d+="/"+v+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(i,s)),d+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:s.objId}),i.internal.out("endobj")}a&&function(b,S){for(var _ in b)if(b.hasOwnProperty(_)){var x=_,k=b[_];S.internal.newObjectDeferredBegin(k.objId,!0),$t(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete b[x]}}(i.internal.acroformPlugin.xForms,i)})(e,r)}),r.internal.acroformPlugin.isInitialized=!0}},GC=dr.__acroform__.arrayToPdfArray=function(r,t,e){var n=function(o){return o};if(Array.isArray(r)){for(var i="[",a=0;a<r.length;a++)switch(a!==0&&(i+=" "),$t(r[a])){case"boolean":case"number":case"object":i+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(t!==void 0&&e&&(n=e.internal.getEncryptor(t)),i+="("+Vs(n(r[a].toString()))+")"):i+=r[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Bg=function(r,t,e){var n=function(i){return i};return t!==void 0&&e&&(n=e.internal.getEncryptor(t)),(r=r||"").toString(),"("+Vs(n(r))+")"},Xi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Xi.prototype.toString=function(){return this.objId+" 0 R"},Xi.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Xi.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var n=t[e],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:GC(i,this.objId,this.scope)}):i instanceof Xi?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var KC=function(){Xi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};Nn(KC,Xi);var QC=function(){Xi.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(n){return n};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Vs(e(r))+")"}},set:function(e){r=e}})};Nn(QC,Xi);var ji=function r(){Xi.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Sr(t,3)},set:function(_){_?this.F=kr(t,3):this.F=Pr(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');e=_}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(_){n=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(_){n[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(_){n[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(_){n[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(_){n[3]=_}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof mp)return;a="FieldObject"+r.FieldNum++}var _=function(x){return x};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Vs(_(a))+")"},set:function(_){a=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(_){a=_}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(_){s=_}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/S_:c},set:function(_){c=_}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof mp||this instanceof ks))return Bg(d,this.objId,this.scope)},set:function(_){_=_.toString(),d=_}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Ur==0?Bg(v,this.objId,this.scope):v},set:function(_){_=_.toString(),v=this instanceof Ur==0?_.substr(0,1)==="("?lc(_.substr(1,_.length-2)):lc(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ur==1?lc(v.substr(1,v.length-1)):v},set:function(_){_=_.toString(),v=this instanceof Ur==1?"/"+_:_}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ur==0?Bg(p,this.objId,this.scope):p},set:function(_){_=_.toString(),p=this instanceof Ur==0?_.substr(0,1)==="("?lc(_.substr(1,_.length-2)):lc(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ur==1?lc(p.substr(1,p.length-1)):p},set:function(_){_=_.toString(),p=this instanceof Ur==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(_){_=!!_,b=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(_){y=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,1)},set:function(_){_?this.Ff=kr(this.Ff,1):this.Ff=Pr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,2)},set:function(_){_?this.Ff=kr(this.Ff,2):this.Ff=Pr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,3)},set:function(_){_?this.Ff=kr(this.Ff,3):this.Ff=Pr(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');S=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(S){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};Nn(ji,Xi);var $c=function(){ji.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return GC(t,this.objId,this.scope)},set:function(e){var n,i;i=[],typeof(n=e)=="string"&&(i=function(a,o,s){s||(s=1);for(var l,c=[];l=o.exec(a);)c.push(l[s]);return c}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,18)},set:function(e){e?this.Ff=kr(this.Ff,18):this.Ff=Pr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=kr(this.Ff,19):this.Ff=Pr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,20)},set:function(e){e?(this.Ff=kr(this.Ff,20),t.sort()):this.Ff=Pr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,22)},set:function(e){e?this.Ff=kr(this.Ff,22):this.Ff=Pr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,23)},set:function(e){e?this.Ff=kr(this.Ff,23):this.Ff=Pr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,27)},set:function(e){e?this.Ff=kr(this.Ff,27):this.Ff=Pr(this.Ff,27)}}),this.hasAppearanceStream=!1};Nn($c,ji);var Uc=function(){$c.call(this),this.fontName="helvetica",this.combo=!1};Nn(Uc,$c);var Vc=function(){Uc.call(this),this.combo=!0};Nn(Vc,Uc);var Lh=function(){Vc.call(this),this.edit=!0};Nn(Lh,Vc);var Ur=function(){ji.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,15)},set:function(e){e?this.Ff=kr(this.Ff,15):this.Ff=Pr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,16)},set:function(e){e?this.Ff=kr(this.Ff,16):this.Ff=Pr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,17)},set:function(e){e?this.Ff=kr(this.Ff,17):this.Ff=Pr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,26)},set:function(e){e?this.Ff=kr(this.Ff,26):this.Ff=Pr(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(a){return a};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+Vs(e(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(e){$t(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}})};Nn(Ur,ji);var Ah=function(){Ur.call(this),this.pushButton=!0};Nn(Ah,Ur);var zc=function(){Ur.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};Nn(zc,Ur);var mp=function(){var r,t;ji.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(s){return s};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+Vs(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){$t(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ze.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Nn(mp,ji),zc.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},zc.prototype.createOption=function(r){var t=new mp;return t.Parent=this,t.optionName=r,this.Kids.push(t),uee.call(this.scope,t),t};var Oh=function(){Ur.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ze.CheckBox.createAppearanceStream()};Nn(Oh,Ur);var ks=function(){ji.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,13)},set:function(t){t?this.Ff=kr(this.Ff,13):this.Ff=Pr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,21)},set:function(t){t?this.Ff=kr(this.Ff,21):this.Ff=Pr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,23)},set:function(t){t?this.Ff=kr(this.Ff,23):this.Ff=Pr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,24)},set:function(t){t?this.Ff=kr(this.Ff,24):this.Ff=Pr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,25)},set:function(t){t?this.Ff=kr(this.Ff,25):this.Ff=Pr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,26)},set:function(t){t?this.Ff=kr(this.Ff,26):this.Ff=Pr(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Nn(ks,ji);var Nh=function(){ks.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Sr(this.Ff,14)},set:function(r){r?this.Ff=kr(this.Ff,14):this.Ff=Pr(this.Ff,14)}}),this.password=!0};Nn(Nh,ks);var ze={CheckBox:{createAppearanceStream:function(){return{N:{On:ze.CheckBox.YesNormal},D:{On:ze.CheckBox.YesPushDown,Off:ze.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),a=Ty(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+gt(ze.internal.getWidth(r))+" "+gt(ze.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+n+" "+gt(a.fontSize)+" Tf "+i),e.push("BT"),e.push(a.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(r){var t=Hi(r);t.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],a=ze.internal.getHeight(r),o=ze.internal.getWidth(r),s=Ty(r,r.caption);return i.push("1 g"),i.push("0 0 "+gt(o)+" "+gt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+gt(o-1)+" "+gt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+e+" "+gt(s.fontSize)+" Tf "+n),i.push(s.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+gt(ze.internal.getWidth(r))+" "+gt(ze.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:ze.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=ze.RadioButton.Circle.YesNormal,t.D[r]=ze.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=ze.internal.getWidth(r)<=ze.internal.getHeight(r)?ze.internal.getWidth(r)/4:ze.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=ze.internal.Bezier_C,a=Number((n*i).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+so(ze.internal.getWidth(r)/2)+" "+so(ze.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),e.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),e.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),e.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=ze.internal.getWidth(r)<=ze.internal.getHeight(r)?ze.internal.getWidth(r)/4:ze.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*ze.internal.Bezier_C).toFixed(5)),o=Number((n*ze.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+so(ze.internal.getWidth(r)/2)+" "+so(ze.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+so(ze.internal.getWidth(r)/2)+" "+so(ze.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),e.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),e.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),e.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=ze.internal.getWidth(r)<=ze.internal.getHeight(r)?ze.internal.getWidth(r)/4:ze.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*ze.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+so(ze.internal.getWidth(r)/2)+" "+so(ze.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:ze.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=ze.RadioButton.Cross.YesNormal,t.D[r]=ze.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=Hi(r);t.scope=r.scope;var e=[],n=ze.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+gt(ze.internal.getWidth(r)-2)+" "+gt(ze.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(gt(n.x1.x)+" "+gt(n.x1.y)+" m"),e.push(gt(n.x2.x)+" "+gt(n.x2.y)+" l"),e.push(gt(n.x4.x)+" "+gt(n.x4.y)+" m"),e.push(gt(n.x3.x)+" "+gt(n.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=ze.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+gt(ze.internal.getWidth(r))+" "+gt(ze.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+gt(ze.internal.getWidth(r)-2)+" "+gt(ze.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(gt(e.x1.x)+" "+gt(e.x1.y)+" m"),n.push(gt(e.x2.x)+" "+gt(e.x2.y)+" l"),n.push(gt(e.x4.x)+" "+gt(e.x4.y)+" m"),n.push(gt(e.x3.x)+" "+gt(e.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(r){var t=Hi(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+gt(ze.internal.getWidth(r))+" "+gt(ze.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+e}};ze.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=ze.internal.getWidth(r),e=ze.internal.getHeight(r),n=Math.min(t,e);return{x1:{x:(t-n)/2,y:(e-n)/2+n},x2:{x:(t-n)/2+n,y:(e-n)/2},x3:{x:(t-n)/2,y:(e-n)/2},x4:{x:(t-n)/2+n,y:(e-n)/2+n}}}},ze.internal.getWidth=function(r){var t=0;return $t(r)==="object"&&(t=Dx(r.Rect[2])),t},ze.internal.getHeight=function(r){var t=0;return $t(r)==="object"&&(t=Dx(r.Rect[3])),t};var uee=dr.addField=function(r){if(lee(this,r),!(r instanceof ji))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};dr.AcroFormChoiceField=$c,dr.AcroFormListBox=Uc,dr.AcroFormComboBox=Vc,dr.AcroFormEditBox=Lh,dr.AcroFormButton=Ur,dr.AcroFormPushButton=Ah,dr.AcroFormRadioButton=zc,dr.AcroFormCheckBox=Oh,dr.AcroFormTextField=ks,dr.AcroFormPasswordField=Nh,dr.AcroFormAppearance=ze,dr.AcroForm={ChoiceField:$c,ListBox:Uc,ComboBox:Vc,EditBox:Lh,Button:Ur,PushButton:Ah,RadioButton:zc,CheckBox:Oh,TextField:ks,PasswordField:Nh,Appearance:ze},et.AcroForm={ChoiceField:$c,ListBox:Uc,ComboBox:Vc,EditBox:Lh,Button:Ur,PushButton:Ah,RadioButton:zc,CheckBox:Oh,TextField:ks,PasswordField:Nh,Appearance:ze};et.AcroForm;function YC(r){return r.reduce(function(t,e,n){return t[e]=n,t},{})}(function(r){var t="addImage_";r.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(O,L){var z,I,X,Z,oe,H=e;if((L=L||e)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(B(O))for(oe in n)for(X=n[oe],z=0;z<X.length;z+=1){for(Z=!0,I=0;I<X[z].length;I+=1)if(X[z][I]!==void 0&&X[z][I]!==O[I]){Z=!1;break}if(Z===!0){H=oe;break}}else for(oe in n)for(X=n[oe],z=0;z<X.length;z+=1){for(Z=!0,I=0;I<X[z].length;I+=1)if(X[z][I]!==void 0&&X[z][I]!==O.charCodeAt(I)){Z=!1;break}if(Z===!0){H=oe;break}}return H===e&&L!==e&&(H=L),H},a=function O(L){for(var z=this.internal.write,I=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:L.width}),Z.push({key:"Height",value:L.height}),L.colorSpace===_.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===_.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var oe="",H=0,re=L.transparency.length;H<re;H++)oe+=L.transparency[H]+" "+L.transparency[H]+" ";Z.push({key:"Mask",value:"["+oe+"]"})}L.sMask!==void 0&&Z.push({key:"SMask",value:L.objectId+1+" 0 R"});var ue=L.filter!==void 0?["/"+L.filter]:void 0;if(I({data:L.data,additionalKeyValues:Z,alreadyAppliedFilters:ue,objectId:L.objectId}),z("endobj"),"sMask"in L&&L.sMask!==void 0){var ne,N=(ne=L.sMaskBitsPerComponent)!==null&&ne!==void 0?ne:L.bitsPerComponent,U={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:N,data:L.sMask};"filter"in L&&(U.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(N," /Columns ").concat(L.width),U.filter=L.filter),O.call(this,U)}if(L.colorSpace===_.INDEXED){var G=this.internal.newObject();I({data:F(new Uint8Array(L.palette)),objectId:G}),z("endobj")}},o=function(){var O=this.internal.collections[t+"images"];for(var L in O)a.call(this,O[L])},s=function(){var O,L=this.internal.collections[t+"images"],z=this.internal.write;for(var I in L)z("/I"+(O=L[I]).index,O.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},c=function(){var O=this.internal.collections[t+"images"];return l.call(this),O},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},d=function(O){return typeof r["process"+O.toUpperCase()]=="function"},v=function(O){return $t(O)==="object"&&O.nodeType===1},p=function(O,L){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var z=""+O.getAttribute("src");if(z.indexOf("data:image/")===0)return Ch(unescape(z).split("base64,").pop());var I=r.loadFile(z,!0);if(I!==void 0)return I}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var X;switch(L){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;default:X="image/jpeg"}return Ch(O.toDataURL(X,1).split("base64,").pop())}},y=function(O){var L=this.internal.collections[t+"images"];if(L){for(var z in L)if(O===L[z].alias)return L[z]}},b=function(O,L,z){return O||L||(O=-96,L=-96),O<0&&(O=-1*z.width*72/O/this.internal.scaleFactor),L<0&&(L=-1*z.height*72/L/this.internal.scaleFactor),O===0&&(O=L*z.width/z.height),L===0&&(L=O*z.height/z.width),[O,L]},S=function(O,L,z,I,X,Z){var oe=b.call(this,z,I,X),H=this.internal.getCoordinateString,re=this.internal.getVerticalCoordinateString,ue=c.call(this);if(z=oe[0],I=oe[1],ue[X.index]=X,Z){Z*=Math.PI/180;var ne=Math.cos(Z),N=Math.sin(Z),U=function(ee){return ee.toFixed(4)},G=[U(ne),U(N),U(-1*N),U(ne),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,H(O),re(L+I),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([H(z),"0","0",H(I),"0","0","cm"].join(" "))):this.internal.write([H(z),"0","0",H(I),H(O),re(L+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},_=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=r.__addimage__.sHashCode=function(O){var L,z,I=0;if(typeof O=="string")for(z=O.length,L=0;L<z;L++)I=(I<<5)-I+O.charCodeAt(L),I|=0;else if(B(O))for(z=O.byteLength/2,L=0;L<z;L++)I=(I<<5)-I+O[L],I|=0;return I},T=r.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var L=!0;return O.length===0&&(L=!1),O.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(L=!1),L},R=r.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var L=O.indexOf(",");return L<0?null:O.substring(0,L).trim().endsWith("base64")?O.substring(L+1):null};r.__addimage__.isArrayBuffer=function(O){return O instanceof ArrayBuffer};var B=r.__addimage__.isArrayBufferView=function(O){return O instanceof Int8Array||O instanceof Uint8Array||O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array},j=r.__addimage__.binaryStringToUint8Array=function(O){for(var L=O.length,z=new Uint8Array(L),I=0;I<L;I++)z[I]=O.charCodeAt(I);return z},F=r.__addimage__.arrayBufferToBinaryString=function(O){for(var L="",z=B(O)?O:new Uint8Array(O),I=0;I<z.length;I+=8192)L+=String.fromCharCode.apply(null,z.subarray(I,I+8192));return L};r.addImage=function(){var O,L,z,I,X,Z,oe,H,re;if(typeof arguments[1]=="number"?(L=e,z=arguments[1],I=arguments[2],X=arguments[3],Z=arguments[4],oe=arguments[5],H=arguments[6],re=arguments[7]):(L=arguments[1],z=arguments[2],I=arguments[3],X=arguments[4],Z=arguments[5],oe=arguments[6],H=arguments[7],re=arguments[8]),$t(O=arguments[0])==="object"&&!v(O)&&"imageData"in O){var ue=O;O=ue.imageData,L=ue.format||L||e,z=ue.x||z||0,I=ue.y||I||0,X=ue.w||ue.width||X,Z=ue.h||ue.height||Z,oe=ue.alias||oe,H=ue.compression||H,re=ue.rotation||ue.angle||re}var ne=this.internal.getFilters();if(H===void 0&&ne.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(z)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var N=M.call(this,O,L,oe,H);return S.call(this,z,I,X,Z,N,re),this};var M=function(O,L,z,I){var X,Z,oe;if(typeof O=="string"&&i(O)===e){O=unescape(O);var H=q(O,!1);(H!==""||(H=r.loadFile(O,!0))!==void 0)&&(O=H)}if(v(O)&&(O=p(O,L)),L=i(O,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((oe=z)==null||oe.length===0)&&(z=function(re){return typeof re=="string"||B(re)?k(re):B(re.data)?k(re.data):null}(O)),(X=y.call(this,z))||(O instanceof Uint8Array||L==="RGBA"||(Z=O,O=j(O)),X=this["process"+L.toUpperCase()](O,u.call(this),z,function(re){return re&&typeof re=="string"&&(re=re.toUpperCase()),re in r.image_compression?re:x.NONE}(I),Z)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},q=r.__addimage__.convertBase64ToBinaryString=function(O,L){L=typeof L!="boolean"||L;var z,I="";if(typeof O=="string"){var X;z=(X=R(O))!==null&&X!==void 0?X:O;try{I=Ch(z)}catch(Z){if(L)throw T(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return I};r.getImageProperties=function(O){var L,z,I="";if(v(O)&&(O=p(O)),typeof O=="string"&&i(O)===e&&((I=q(O,!1))===""&&(I=r.loadFile(O)||""),O=I),z=i(O),!d(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(O instanceof Uint8Array||(O=j(O)),!(L=this["process"+z.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=z,L}})(et.API),function(r){var t=function(e){if(e!==void 0&&e!="")return!0};et.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var n,i,a,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((n=c[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){n=c[v];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(b.objId),x=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+p(_(n.contents))+")",a+=" /Popup "+S.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+p(_(x))+") >>",b.content=a;var k=b.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+k,n.open&&(a+=" /Open true"),a+=" >>",S.content=a,this.internal.write(b.objId,"0 R",S.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var T=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(y(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var R=this.annotations._nameMap[n.options.name];n.options.pageNumber=R.page,n.options.top=R.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var B=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+B+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var n=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":n.pageContext.annotations.push(e)}},r.link=function(e,n,i,a,o){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(e),y:c(n),w:l(e+i),h:c(n+a)},options:o,type:"link"})},r.textWithLink=function(e,n,i,a){var o,s,l=this.getTextWidth(e),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var u=this.splitTextToSize(e,s).length;o=Math.ceil(c*u)}else s=l,o=c;return this.text(e,n,i,a),i+=.2*c,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-c,s,o,a),l},r.getTextWidth=function(e){var n=this.internal.getFontSize();return this.getStringUnitWidth(e)*n/this.internal.scaleFactor}}(et.API),function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(b){return t[b.charCodeAt(0)]!==void 0},o=r.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},s=r.__arabicParser__.isArabicEndLetter=function(b){return o(b)&&a(b)&&t[b.charCodeAt(0)].length<=2},l=r.__arabicParser__.isArabicAlfLetter=function(b){return o(b)&&i.indexOf(b.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return o(b)&&a(b)&&t[b.charCodeAt(0)].length>=1};var c=r.__arabicParser__.arabicLetterHasFinalForm=function(b){return o(b)&&a(b)&&t[b.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(b){return o(b)&&a(b)&&t[b.charCodeAt(0)].length>=3};var u=r.__arabicParser__.arabicLetterHasMedialForm=function(b){return o(b)&&a(b)&&t[b.charCodeAt(0)].length==4},d=r.__arabicParser__.resolveLigatures=function(b){var S=0,_=e,x="",k=0;for(S=0;S<b.length;S+=1)_[b.charCodeAt(S)]!==void 0?(k++,typeof(_=_[b.charCodeAt(S)])=="number"&&(x+=String.fromCharCode(_),_=e,k=0),S===b.length-1&&(_=e,x+=b.charAt(S-(k-1)),S-=k-1,k=0)):(_=e,x+=b.charAt(S-k),S-=k,k=0);return x};r.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&n[b.charCodeAt(0)]!==void 0};var v=r.__arabicParser__.getCorrectForm=function(b,S,_){return o(b)?a(b)===!1?-1:!c(b)||!o(S)&&!o(_)||!o(_)&&s(S)||s(b)&&!o(S)||s(b)&&l(S)||s(b)&&s(S)?0:u(b)&&o(S)&&!s(S)&&o(_)&&c(_)?3:s(b)||!o(_)?1:2:-1},p=function(b){var S=0,_=0,x=0,k="",T="",R="",B=(b=b||"").split("\\s+"),j=[];for(S=0;S<B.length;S+=1){for(j.push(""),_=0;_<B[S].length;_+=1)k=B[S][_],T=B[S][_-1],R=B[S][_+1],o(k)?(x=v(k,T,R),j[S]+=x!==-1?String.fromCharCode(t[k.charCodeAt(0)][x]):k):j[S]+=k;j[S]=d(j[S])}return j.join(" ")},y=r.__arabicParser__.processArabic=r.processArabic=function(){var b,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(S)){var x=0;for(_=[],x=0;x<S.length;x+=1)Array.isArray(S[x])?_.push([p(S[x][0]),S[x][1],S[x][2]]):_.push([p(S[x])]);b=_}else b=p(S);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};r.events.push(["preProcessText",y])}(et.API),et.API.autoPrint=function(r){var t;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(r){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(s){e=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,n){var i;if((e=e||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(et.API),function(r){var t={left:0,top:0,bottom:0,right:0},e=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(b){l=b}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(b){v=b}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(b){y=b}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},r.getTextDimensions=function(l,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,p=0,y=0,b=0,S=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var _=c.maxWidth;_>0?typeof l=="string"?l=this.splitTextToSize(l,_):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(k,T){return k.concat(S.splitTextToSize(T,_))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)p<(b=this.getStringUnitWidth(l[x],{font:d})*u)&&(p=b);return p!==0&&(y=l.length),{w:p/=v,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/v,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=r.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};r.table=function(l,c,u,d,v){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,y,b,S,_=[],x=[],k=[],T={},R={},B=[],j=[],F=(v=v||{}).autoSize||!1,M=v.printHeaders!==!1,q=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,O=v.margins||Object.assign({width:this.getPageWidth()},t),L=typeof v.padding=="number"?v.padding:3,z=v.headerBackgroundColor||"#c8c8c8",I=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=q,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=I,this.setFontSize(q),d==null)x=_=Object.keys(u[0]),k=_.map(function(){return"left"});else if(Array.isArray(d)&&$t(d[0])==="object")for(_=d.map(function(ue){return ue.name}),x=d.map(function(ue){return ue.prompt||ue.name||""}),k=d.map(function(ue){return ue.align||"left"}),p=0;p<d.length;p+=1)R[d[p].name]=.7499990551181103*d[p].width;else Array.isArray(d)&&typeof d[0]=="string"&&(x=_=d,k=_.map(function(){return"left"}));if(F||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<_.length;p+=1){for(T[S=_[p]]=u.map(function(ue){return ue[S]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(x[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=T[S],this.setFont(void 0,"normal"),b=0;b<y.length;b+=1)B.push(this.getTextDimensions(y[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[S]=Math.max.apply(null,B)+L+L,B=[]}if(M){var X={};for(p=0;p<_.length;p+=1)X[_[p]]={},X[_[p]].text=x[p],X[_[p]].align=k[p];var Z=s.call(this,X,R);j=_.map(function(ue){return new a(l,c,R[ue],Z,X[ue].text,void 0,X[ue].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var oe=d.reduce(function(ue,ne){return ue[ne.name]=ne.align,ue},{});for(p=0;p<u.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:u[p]},this);var H=s.call(this,u[p],R);for(b=0;b<_.length;b+=1){var re=u[p][_[b]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:b,data:re},this),o.call(this,new a(l,c,R[_[b]],H,re,p+2,oe[_[b]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var s=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(p){var y=l[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/v+u+u},this).reduce(function(p,y){return Math.max(p,y)},0)};r.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},r.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,v.push(u)),u.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),e=!1}}(et.API);var JC={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},XC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ey=YC(XC),ZC=[100,200,300,400,500,600,700,800,900],fee=YC(ZC);function $g(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),e=function(a){return JC[a=a||"normal"]?a:"normal"}(r.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(r.weight),i=function(a){return typeof Ey[a=a||"normal"]=="number"?a:"normal"}(r.stretch);return{family:t,style:e,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:t,style:[i,e,n].join(" ")}}}function Fx(r,t,e,n){var i;for(i=e;i>=0&&i<t.length;i+=n)if(r[t[i]])return r[t[i]];for(i=e;i>=0&&i<t.length;i-=n)if(r[t[i]])return r[t[i]]}var dee={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Bx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $x(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Ux(r){return r.trimLeft()}function hee(r,t){for(var e=0;e<r.length;){if(r.charAt(e)===t)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function pee(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var th,Vx,zx,uc,rh,Wx,qx,Hx,Ug=["times"];function Gx(r,t,e,n,i){var a=4,o=Qx;switch(i){case et.API.image_compression.FAST:a=1,o=Kx;break;case et.API.image_compression.MEDIUM:a=6,o=Yx;break;case et.API.image_compression.SLOW:a=9,o=Jx}r=function(l,c,u,d){for(var v,p=l.length/c,y=new Uint8Array(l.length+p),b=[vee,Kx,Qx,Yx,Jx],S=0;S<p;S+=1){var _=S*c,x=l.subarray(_,_+c);if(d)y.set(d(x,u,v),_+S);else{for(var k=b.length,T=[],R=0;R<k;R+=1)T[R]=b[R](x,u,v);var B=gee(T.concat());y.set(T[B],_+S)}v=x}return y}(r,t,Math.ceil(e*n/8),o);var s=wy(r,{level:a});return et.API.__addimage__.arrayBufferToBinaryString(s)}function vee(r){var t=Array.apply([],r);return t.unshift(0),t}function Kx(r,t){var e=r.length,n=[];n[0]=1;for(var i=0;i<e;i+=1){var a=r[i-t]||0;n[i+1]=r[i]-a+256&255}return n}function Qx(r,t,e){var n=r.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var o=e&&e[a]||0;i[a+1]=r[a]-o+256&255}return i}function Yx(r,t,e){var n=r.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var o=r[a-t]||0,s=e&&e[a]||0;i[a+1]=r[a]+256-(o+s>>>1)&255}return i}function Jx(r,t,e){var n=r.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var o=mee(r[a-t]||0,e&&e[a]||0,e&&e[a-t]||0);i[a+1]=r[a]-o+256&255}return i}function mee(r,t,e){if(r===t&&t===e)return r;var n=Math.abs(t-e),i=Math.abs(r-e),a=Math.abs(r+t-e-e);return n<=i&&n<=a?r:i<=a?t:e}function gee(r){var t=r.map(function(e){return e.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function Vg(r,t,e){var n=t*e,i=Math.floor(n/8),a=16-(n-8*i+e),o=(1<<e)-1;return eL(r,i)>>a&o}function Xx(r,t,e,n){var i=e*n,a=Math.floor(i/8),o=16-(i-8*a+n),s=(1<<n)-1,l=(t&s)<<o;(function(c,u,d){if(u+1<c.byteLength)c.setUint16(u,d,!1);else{var v=d>>8&255;c.setUint8(u,v)}})(r,a,eL(r,a)&~(s<<o)&65535|l)}function eL(r,t){return t+1<r.byteLength?r.getUint16(t,!1):r.getUint8(t)<<8}function yee(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[t++]|r[t++]<<8,n=r[t++]|r[t++]<<8,i=r[t++],a=i>>7,o=1<<1+(7&i);r[t++],r[t++];var s=null,l=null;a&&(s=t,l=o,t+=3*o);var c=!0,u=[],d=0,v=null,p=0,y=null;for(this.width=e,this.height=n;c&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,y=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((O=r[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var b=r[t++];d=r[t++]|r[t++]<<8,v=r[t++],1&b||(v=null),p=b>>2&7,t++;break;case 254:for(;;){if(!((O=r[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var S=r[t++]|r[t++]<<8,_=r[t++]|r[t++]<<8,x=r[t++]|r[t++]<<8,k=r[t++]|r[t++]<<8,T=r[t++],R=T>>6&1,B=1<<1+(7&T),j=s,F=l,M=!1;T>>7&&(M=!0,j=t,F=B,t+=3*B);var q=t;for(t++;;){var O;if(!((O=r[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}u.push({x:S,y:_,width:x,height:k,has_local_palette:M,palette_offset:j,palette_size:F,data_offset:q,data_length:t-q,transparent_index:v,interlaced:!!R,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(L){if(L<0||L>=u.length)throw new Error("Frame index out of range.");return u[L]},this.decodeAndBlitFrameBGRA=function(L,z){var I=this.frameInfo(L),X=I.width*I.height,Z=new Uint8Array(X);Zx(r,I.data_offset,Z,X);var oe=I.palette_offset,H=I.transparent_index;H===null&&(H=256);var re=I.width,ue=e-re,ne=re,N=4*(I.y*e+I.x),U=4*((I.y+I.height)*e+I.x),G=N,ee=4*ue;I.interlaced===!0&&(ee+=4*e*7);for(var ie=8,ce=0,ge=Z.length;ce<ge;++ce){var ve=Z[ce];if(ne===0&&(ne=re,(G+=ee)>=U&&(ee=4*ue+4*e*(ie-1),G=N+(re+ue)*(ie<<1),ie>>=1)),ve===H)G+=4;else{var be=r[oe+3*ve],Ce=r[oe+3*ve+1],Ie=r[oe+3*ve+2];z[G++]=Ie,z[G++]=Ce,z[G++]=be,z[G++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(L,z){var I=this.frameInfo(L),X=I.width*I.height,Z=new Uint8Array(X);Zx(r,I.data_offset,Z,X);var oe=I.palette_offset,H=I.transparent_index;H===null&&(H=256);var re=I.width,ue=e-re,ne=re,N=4*(I.y*e+I.x),U=4*((I.y+I.height)*e+I.x),G=N,ee=4*ue;I.interlaced===!0&&(ee+=4*e*7);for(var ie=8,ce=0,ge=Z.length;ce<ge;++ce){var ve=Z[ce];if(ne===0&&(ne=re,(G+=ee)>=U&&(ee=4*ue+4*e*(ie-1),G=N+(re+ue)*(ie<<1),ie>>=1)),ve===H)G+=4;else{var be=r[oe+3*ve],Ce=r[oe+3*ve+1],Ie=r[oe+3*ve+2];z[G++]=be,z[G++]=Ce,z[G++]=Ie,z[G++]=255}--ne}}}function Zx(r,t,e,n){for(var i=r[t++],a=1<<i,o=a+1,s=o+1,l=i+1,c=(1<<l)-1,u=0,d=0,v=0,p=r[t++],y=new Int32Array(4096),b=null;;){for(;u<16&&p!==0;)d|=r[t++]<<u,u+=8,p===1?p=r[t++]:--p;if(u<l)break;var S=d&c;if(d>>=l,u-=l,S!==a){if(S===o)break;for(var _=S<s?S:b,x=0,k=_;k>a;)k=y[k]>>8,++x;var T=k;if(v+x+(_!==S?1:0)>n)return void Gt.log("Warning, gif stream longer than expected.");e[v++]=T;var R=v+=x;for(_!==S&&(e[v++]=T),k=_;x--;)k=y[k],e[--R]=255&k,k>>=8;b!==null&&s<4096&&(y[s++]=b<<8|T,s>=c+1&&l<12&&(++l,c=c<<1|1)),b=S}else s=o+1,c=(1<<(l=i+1))-1,b=null}return v!==n&&Gt.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function zg(r){var t,e,n,i,a,o=Math.floor,s=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),v=new Array(65535),p=new Array(64),y=new Array(64),b=[],S=0,_=7,x=new Array(64),k=new Array(64),T=new Array(64),R=new Array(256),B=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(N,U){for(var G=0,ee=0,ie=new Array,ce=1;ce<=16;ce++){for(var ge=1;ge<=N[ce];ge++)ie[U[ee]]=[],ie[U[ee]][0]=G,ie[U[ee]][1]=ce,ee++,G++;G*=2}return ie}function oe(N){for(var U=N[0],G=N[1]-1;G>=0;)U&1<<G&&(S|=1<<_),G--,--_<0&&(S==255?(H(255),H(0)):H(S),_=7,S=0)}function H(N){b.push(N)}function re(N){H(N>>8&255),H(255&N)}function ue(N,U,G,ee,ie){for(var ce,ge=ie[0],ve=ie[240],be=function(Pe,De){var Ne,ct,Ge,yt,ot,dt,At,lt,Ke,it,Xe=0;for(Ke=0;Ke<8;++Ke){Ne=Pe[Xe],ct=Pe[Xe+1],Ge=Pe[Xe+2],yt=Pe[Xe+3],ot=Pe[Xe+4],dt=Pe[Xe+5],At=Pe[Xe+6];var Ot=Ne+(lt=Pe[Xe+7]),St=Ne-lt,We=ct+At,st=ct-At,Nt=Ge+dt,He=Ge-dt,ht=yt+ot,Fe=yt-ot,vr=Ot+ht,mr=Ot-ht,Wt=We+Nt,pt=We-Nt;Pe[Xe]=vr+Wt,Pe[Xe+4]=vr-Wt;var It=.707106781*(pt+mr);Pe[Xe+2]=mr+It,Pe[Xe+6]=mr-It;var Io=.382683433*((vr=Fe+He)-(pt=st+St)),Jr=.5411961*vr+Io,oa=1.306562965*pt+Io,Mi=.707106781*(Wt=He+st),at=St+Mi,sa=St-Mi;Pe[Xe+5]=sa+Jr,Pe[Xe+3]=sa-Jr,Pe[Xe+1]=at+oa,Pe[Xe+7]=at-oa,Xe+=8}for(Xe=0,Ke=0;Ke<8;++Ke){Ne=Pe[Xe],ct=Pe[Xe+8],Ge=Pe[Xe+16],yt=Pe[Xe+24],ot=Pe[Xe+32],dt=Pe[Xe+40],At=Pe[Xe+48];var ca=Ne+(lt=Pe[Xe+56]),Yn=Ne-lt,Jn=ct+At,cr=ct-At,Br=Ge+dt,zr=Ge-dt,Mo=yt+ot,$a=yt-ot,pi=ca+Mo,Di=ca-Mo,vi=Jn+Br,mi=Jn-Br;Pe[Xe]=pi+vi,Pe[Xe+32]=pi-vi;var Xn=.707106781*(mi+Di);Pe[Xe+16]=Di+Xn,Pe[Xe+48]=Di-Xn;var Do=.382683433*((pi=$a+zr)-(mi=cr+Yn)),Fi=.5411961*pi+Do,Fo=1.306562965*mi+Do,zs=.707106781*(vi=zr+cr),Ws=Yn+zs,qs=Yn-zs;Pe[Xe+40]=qs+Fi,Pe[Xe+24]=qs-Fi,Pe[Xe+8]=Ws+Fo,Pe[Xe+56]=Ws-Fo,Xe++}for(Ke=0;Ke<64;++Ke)it=Pe[Ke]*De[Ke],p[Ke]=it>0?it+.5|0:it-.5|0;return p}(N,U),Ce=0;Ce<64;++Ce)y[j[Ce]]=be[Ce];var Ie=y[0]-G;G=y[0],Ie==0?oe(ee[0]):(oe(ee[v[ce=32767+Ie]]),oe(d[ce]));for(var je=63;je>0&&y[je]==0;)je--;if(je==0)return oe(ge),G;for(var ye,J=1;J<=je;){for(var we=J;y[J]==0&&J<=je;)++J;var Oe=J-we;if(Oe>=16){ye=Oe>>4;for(var Me=1;Me<=ye;++Me)oe(ve);Oe&=15}ce=32767+y[J],oe(ie[(Oe<<4)+v[ce]]),oe(d[ce]),J++}return je!=63&&oe(ge),G}function ne(N){N=Math.min(Math.max(N,1),100),a!=N&&(function(U){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var ie=o((G[ee]*U+50)/100);ie=Math.min(Math.max(ie,1),255),s[j[ee]]=ie}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var ve=o((ce[ge]*U+50)/100);ve=Math.min(Math.max(ve,1),255),l[j[ge]]=ve}for(var be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,Ie=0;Ie<8;Ie++)for(var je=0;je<8;je++)c[Ce]=1/(s[j[Ce]]*be[Ie]*be[je]*8),u[Ce]=1/(l[j[Ce]]*be[Ie]*be[je]*8),Ce++}(N<50?Math.floor(5e3/N):Math.floor(200-2*N)),a=N)}this.encode=function(N,U){U&&ne(U),b=new Array,S=0,_=7,re(65496),re(65504),re(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),re(1),re(1),H(0),H(0),function(){re(65499),re(132),H(0);for(var ct=0;ct<64;ct++)H(s[ct]);H(1);for(var Ge=0;Ge<64;Ge++)H(l[Ge])}(),function(ct,Ge){re(65472),re(17),H(8),re(Ge),re(ct),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(N.width,N.height),function(){re(65476),re(418),H(0);for(var ct=0;ct<16;ct++)H(F[ct+1]);for(var Ge=0;Ge<=11;Ge++)H(M[Ge]);H(16);for(var yt=0;yt<16;yt++)H(q[yt+1]);for(var ot=0;ot<=161;ot++)H(O[ot]);H(1);for(var dt=0;dt<16;dt++)H(L[dt+1]);for(var At=0;At<=11;At++)H(z[At]);H(17);for(var lt=0;lt<16;lt++)H(I[lt+1]);for(var Ke=0;Ke<=161;Ke++)H(X[Ke])}(),re(65498),re(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var G=0,ee=0,ie=0;S=0,_=7,this.encode.displayName="_encode_";for(var ce,ge,ve,be,Ce,Ie,je,ye,J,we=N.data,Oe=N.width,Me=N.height,Pe=4*Oe,De=0;De<Me;){for(ce=0;ce<Pe;){for(Ce=Pe*De+ce,je=-1,ye=0,J=0;J<64;J++)Ie=Ce+(ye=J>>3)*Pe+(je=4*(7&J)),De+ye>=Me&&(Ie-=Pe*(De+1+ye-Me)),ce+je>=Pe&&(Ie-=ce+je-Pe+4),ge=we[Ie++],ve=we[Ie++],be=we[Ie++],x[J]=(B[ge]+B[ve+256|0]+B[be+512|0]>>16)-128,k[J]=(B[ge+768|0]+B[ve+1024|0]+B[be+1280|0]>>16)-128,T[J]=(B[ge+1280|0]+B[ve+1536|0]+B[be+1792|0]>>16)-128;G=ue(x,c,G,t,n),ee=ue(k,u,ee,e,i),ie=ue(T,u,ie,e,i),ce+=32}De+=8}if(_>=0){var Ne=[];Ne[1]=_+1,Ne[0]=(1<<_+1)-1,oe(Ne)}return re(65497),new Uint8Array(b)},r=r||50,function(){for(var N=String.fromCharCode,U=0;U<256;U++)R[U]=N(U)}(),t=Z(F,M),e=Z(L,z),n=Z(q,O),i=Z(I,X),function(){for(var N=1,U=2,G=1;G<=15;G++){for(var ee=N;ee<U;ee++)v[32767+ee]=G,d[32767+ee]=[],d[32767+ee][1]=G,d[32767+ee][0]=ee;for(var ie=-(U-1);ie<=-N;ie++)v[32767+ie]=G,d[32767+ie]=[],d[32767+ie][1]=G,d[32767+ie][0]=U-1+ie;N<<=1,U<<=1}}(),function(){for(var N=0;N<256;N++)B[N]=19595*N,B[N+256|0]=38470*N,B[N+512|0]=7471*N+32768,B[N+768|0]=-11059*N,B[N+1024|0]=-21709*N,B[N+1280|0]=32768*N+8421375,B[N+1536|0]=-27439*N,B[N+1792|0]=-5329*N}(),ne(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xi(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function eS(r){function t(M){if(!M)throw Error("assert :P")}function e(M,q,O){for(var L=0;4>L;L++)if(M[q+L]!=O.charCodeAt(L))return!0;return!1}function n(M,q,O,L,z){for(var I=0;I<z;I++)M[q+I]=O[L+I]}function i(M,q,O,L){for(var z=0;z<L;z++)M[q+z]=O}function a(M){return new Int32Array(M)}function o(M,q){for(var O=[],L=0;L<M;L++)O.push(new q);return O}function s(M,q){var O=[];return function L(z,I,X){for(var Z=X[I],oe=0;oe<Z&&(z.push(X.length>I+1?[]:new q),!(X.length<I+1));oe++)L(z[oe],I+1,X)}(O,0,M),O}var l=function(){var M=this;function q(f,h){for(var w=1<<h-1>>>0;f&w;)w>>>=1;return w?(f&w-1)+w:f}function O(f,h,w,P,C){t(!(P%w));do f[h+(P-=w)]=C;while(0<P)}function L(f,h,w,P,C){if(t(2328>=C),512>=C)var D=a(512);else if((D=a(C))==null)return 0;return function($,V,W,K,ae,pe){var Q,se,de=V,_e=1<<W,he=a(16),xe=a(16);for(t(ae!=0),t(K!=null),t($!=null),t(0<W),se=0;se<ae;++se){if(15<K[se])return 0;++he[K[se]]}if(he[0]==ae)return 0;for(xe[1]=0,Q=1;15>Q;++Q){if(he[Q]>1<<Q)return 0;xe[Q+1]=xe[Q]+he[Q]}for(se=0;se<ae;++se)Q=K[se],0<K[se]&&(pe[xe[Q]++]=se);if(xe[15]==1)return(K=new z).g=0,K.value=pe[0],O($,de,1,_e,K),_e;var ke,Le=-1,Te=_e-1,Ze=0,Ue=1,bt=1,Qe=1<<W;for(se=0,Q=1,ae=2;Q<=W;++Q,ae<<=1){if(Ue+=bt<<=1,0>(bt-=he[Q]))return 0;for(;0<he[Q];--he[Q])(K=new z).g=Q,K.value=pe[se++],O($,de+Ze,ae,Qe,K),Ze=q(Ze,Q)}for(Q=W+1,ae=2;15>=Q;++Q,ae<<=1){if(Ue+=bt<<=1,0>(bt-=he[Q]))return 0;for(;0<he[Q];--he[Q]){if(K=new z,(Ze&Te)!=Le){for(de+=Qe,ke=1<<(Le=Q)-W;15>Le&&!(0>=(ke-=he[Le]));)++Le,ke<<=1;_e+=Qe=1<<(ke=Le-W),$[V+(Le=Ze&Te)].g=ke+W,$[V+Le].value=de-V-Le}K.g=Q-W,K.value=pe[se++],O($,de+(Ze>>W),ae,Qe,K),Ze=q(Ze,Q)}}return Ue!=2*xe[15]-1?0:_e}(f,h,w,P,C,D)}function z(){this.value=this.g=0}function I(){this.value=this.g=0}function X(){this.G=o(5,z),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ts,I)}function Z(f,h,w,P){t(f!=null),t(h!=null),t(2147483648>P),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=h,f.pa=w,f.Jd=h,f.Yc=w+P,f.Zc=4<=P?w+P-4+1:w,ge(f)}function oe(f,h){for(var w=0;0<h--;)w|=be(f,128)<<h;return w}function H(f,h){var w=oe(f,h);return ve(f)?-w:w}function re(f,h,w,P){var C,D=0;for(t(f!=null),t(h!=null),t(4294967288>P),f.Sb=P,f.Ra=0,f.u=0,f.h=0,4<P&&(P=4),C=0;C<P;++C)D+=h[w+C]<<8*C;f.Ra=D,f.bb=P,f.oa=h,f.pa=w}function ue(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<qa-8>>>0,++f.bb,f.u-=8;ee(f)&&(f.h=1,f.u=0)}function ne(f,h){if(t(0<=h),!f.h&&h<=jn){var w=G(f)&Rn[h];return f.u+=h,ue(f),w}return f.h=1,f.u=0}function N(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(f){return f.Ra>>>(f.u&qa-1)>>>0}function ee(f){return t(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>qa}function ie(f,h){f.u=h,f.h=ee(f)}function ce(f){f.u>=va&&(t(f.u>=va),ue(f))}function ge(f){t(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(t(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function ve(f){return oe(f,1)}function be(f,h){var w=f.Ca;0>f.b&&ge(f);var P=f.b,C=w*h>>>8,D=(f.I>>>P>C)+0;for(D?(w-=C,f.I-=C+1<<P>>>0):w=C+1,P=w,C=0;256<=P;)C+=8,P>>=8;return P=7^C+Ha[P],f.b-=P,f.Ca=(w<<P)-1,D}function Ce(f,h,w){f[h+0]=w>>24&255,f[h+1]=w>>16&255,f[h+2]=w>>8&255,f[h+3]=255&w}function Ie(f,h){return f[h+0]|f[h+1]<<8}function je(f,h){return Ie(f,h)|f[h+2]<<16}function ye(f,h){return Ie(f,h)|Ie(f,h+2)<<16}function J(f,h){var w=1<<h;return t(f!=null),t(0<h),f.X=a(w),f.X==null?0:(f.Mb=32-h,f.Xa=h,1)}function we(f,h){t(f!=null),t(h!=null),t(f.Xa==h.Xa),n(h.X,0,f.X,0,1<<h.Xa)}function Oe(){this.X=[],this.Xa=this.Mb=0}function Me(f,h,w,P){t(w!=null),t(P!=null);var C=w[0],D=P[0];return C==0&&(C=(f*D+h/2)/h),D==0&&(D=(h*C+f/2)/f),0>=C||0>=D?0:(w[0]=C,P[0]=D,1)}function Pe(f,h){return f+(1<<h)-1>>>h}function De(f,h){return((4278255360&f)+(4278255360&h)>>>0&4278255360)+((16711935&f)+(16711935&h)>>>0&16711935)>>>0}function Ne(f,h){M[h]=function(w,P,C,D,$,V,W){var K;for(K=0;K<$;++K){var ae=M[f](V[W+K-1],C,D+K);V[W+K]=De(w[P+K],ae)}}}function ct(){this.ud=this.hd=this.jd=0}function Ge(f,h){return((4278124286&(f^h))>>>1)+(f&h)>>>0}function yt(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function ot(f,h){return yt(f+(f-h+.5>>1))}function dt(f,h,w){return Math.abs(h-w)-Math.abs(f-w)}function At(f,h,w,P,C,D,$){for(P=D[$-1],w=0;w<C;++w)D[$+w]=P=De(f[h+w],P)}function lt(f,h,w,P,C){var D;for(D=0;D<w;++D){var $=f[h+D],V=$>>8&255,W=16711935&(W=(W=16711935&$)+((V<<16)+V));P[C+D]=(4278255360&$)+W>>>0}}function Ke(f,h){h.jd=255&f,h.hd=f>>8&255,h.ud=f>>16&255}function it(f,h,w,P,C,D){var $;for($=0;$<P;++$){var V=h[w+$],W=V>>>8,K=V,ae=255&(ae=(ae=V>>>16)+((f.jd<<24>>24)*(W<<24>>24)>>>5));K=255&(K=(K+=(f.hd<<24>>24)*(W<<24>>24)>>>5)+((f.ud<<24>>24)*(ae<<24>>24)>>>5)),C[D+$]=(4278255360&V)+(ae<<16)+K}}function Xe(f,h,w,P,C){M[h]=function(D,$,V,W,K,ae,pe,Q,se){for(W=pe;W<Q;++W)for(pe=0;pe<se;++pe)K[ae++]=C(V[P(D[$++])])},M[f]=function(D,$,V,W,K,ae,pe){var Q=8>>D.b,se=D.Ea,de=D.K[0],_e=D.w;if(8>Q)for(D=(1<<D.b)-1,_e=(1<<Q)-1;$<V;++$){var he,xe=0;for(he=0;he<se;++he)he&D||(xe=P(W[K++])),ae[pe++]=C(de[xe&_e]),xe>>=Q}else M["VP8LMapColor"+w](W,K,de,_e,ae,pe,$,V,se)}}function Ot(f,h,w,P,C){for(w=h+w;h<w;){var D=f[h++];P[C++]=D>>16&255,P[C++]=D>>8&255,P[C++]=255&D}}function St(f,h,w,P,C){for(w=h+w;h<w;){var D=f[h++];P[C++]=D>>16&255,P[C++]=D>>8&255,P[C++]=255&D,P[C++]=D>>24&255}}function We(f,h,w,P,C){for(w=h+w;h<w;){var D=($=f[h++])>>16&240|$>>12&15,$=240&$|$>>28&15;P[C++]=D,P[C++]=$}}function st(f,h,w,P,C){for(w=h+w;h<w;){var D=($=f[h++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;P[C++]=D,P[C++]=$}}function Nt(f,h,w,P,C){for(w=h+w;h<w;){var D=f[h++];P[C++]=255&D,P[C++]=D>>8&255,P[C++]=D>>16&255}}function He(f,h,w,P,C,D){if(D==0)for(w=h+w;h<w;)Ce(P,((D=f[h++])[0]>>24|D[1]>>8&65280|D[2]<<8&16711680|D[3]<<24)>>>0),C+=32;else n(P,C,f,h,w)}function ht(f,h){M[h][0]=M[f+"0"],M[h][1]=M[f+"1"],M[h][2]=M[f+"2"],M[h][3]=M[f+"3"],M[h][4]=M[f+"4"],M[h][5]=M[f+"5"],M[h][6]=M[f+"6"],M[h][7]=M[f+"7"],M[h][8]=M[f+"8"],M[h][9]=M[f+"9"],M[h][10]=M[f+"10"],M[h][11]=M[f+"11"],M[h][12]=M[f+"12"],M[h][13]=M[f+"13"],M[h][14]=M[f+"0"],M[h][15]=M[f+"0"]}function Fe(f){return f==Hv||f==Gv||f==Yf||f==Kv}function vr(){this.eb=[],this.size=this.A=this.fb=0}function mr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vr,this.f.kb=new mr,this.sd=null}function pt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Io(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Jr(f,h){var w=f.T,P=h.ba.f.RGBA,C=P.eb,D=P.fb+f.ka*P.A,$=ii[h.ba.S],V=f.y,W=f.O,K=f.f,ae=f.N,pe=f.ea,Q=f.W,se=h.cc,de=h.dc,_e=h.Mc,he=h.Nc,xe=f.ka,ke=f.ka+f.T,Le=f.U,Te=Le+1>>1;for(xe==0?$(V,W,null,null,K,ae,pe,Q,K,ae,pe,Q,C,D,null,null,Le):($(h.ec,h.fc,V,W,se,de,_e,he,K,ae,pe,Q,C,D-P.A,C,D,Le),++w);xe+2<ke;xe+=2)se=K,de=ae,_e=pe,he=Q,ae+=f.Rc,Q+=f.Rc,D+=2*P.A,$(V,(W+=2*f.fa)-f.fa,V,W,se,de,_e,he,K,ae,pe,Q,C,D-P.A,C,D,Le);return W+=f.fa,f.j+ke<f.o?(n(h.ec,h.fc,V,W,Le),n(h.cc,h.dc,K,ae,Te),n(h.Mc,h.Nc,pe,Q,Te),w--):1&ke||$(V,W,null,null,K,ae,pe,Q,K,ae,pe,Q,C,D+P.A,null,null,Le),w}function oa(f,h,w){var P=f.F,C=[f.J];if(P!=null){var D=f.U,$=h.ba.S,V=$==Qf||$==Yf;h=h.ba.f.RGBA;var W=[0],K=f.ka;W[0]=f.T,f.Kb&&(K==0?--W[0]:(--K,C[0]-=f.width),f.j+f.ka+f.T==f.o&&(W[0]=f.o-f.j-K));var ae=h.eb;K=h.fb+K*h.A,f=N_(P,C[0],f.width,D,W,ae,K+(V?0:3),h.A),t(w==W),f&&Fe($)&&Ul(ae,K,V,D,W,h.A)}return 0}function Mi(f){var h=f.ma,w=h.ba.S,P=11>w,C=w==Gf||w==Kf||w==Qf||w==qv||w==12||Fe(w);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Rl(h.Oa,f,C?11:12))return 0;if(C&&Fe(w)&&Uf(),f.da)alert("todo:use_scaling");else{if(P){if(h.Ib=Io,f.Kb){if(w=f.U+1>>1,h.memory=a(f.U+2*w),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+f.U,h.Mc=h.cc,h.Nc=h.dc+w,h.Ib=Jr,Uf()}}else alert("todo:EmitYUV");C&&(h.Jb=oa,P&&ei())}if(P&&!K_){for(f=0;256>f;++f)bL[f]=89858*(f-128)+Xf>>Jf,kL[f]=-22014*(f-128)+Xf,SL[f]=-45773*(f-128),xL[f]=113618*(f-128)+Xf>>Jf;for(f=zl;f<Jv;++f)h=76283*(f-16)+Xf>>Jf,PL[f-zl]=lr(h,255),TL[f-zl]=lr(h+8>>4,15);K_=1}return 1}function at(f){var h=f.ma,w=f.U,P=f.T;return t(!(1&f.ka)),0>=w||0>=P?0:(w=h.Ib(f,h),h.Jb!=null&&h.Jb(f,h,w),h.Dc+=w,1)}function sa(f){f.ma.memory=null}function ca(f,h,w,P){return ne(f,8)!=47?0:(h[0]=ne(f,14)+1,w[0]=ne(f,14)+1,P[0]=ne(f,1),ne(f,3)!=0?0:!f.h)}function Yn(f,h){if(4>f)return f+1;var w=f-2>>1;return(2+(1&f)<<w)+ne(h,w)+1}function Jn(f,h){return 120<h?h-120:1<=(w=((w=sL[h-1])>>4)*f+(8-(15&w)))?w:1;var w}function cr(f,h,w){var P=G(w),C=f[h+=255&P].g-8;return 0<C&&(ie(w,w.u+8),P=G(w),h+=f[h].value,h+=P&(1<<C)-1),ie(w,w.u+f[h].g),f[h].value}function Br(f,h,w){return w.g+=f.g,w.value+=f.value<<h>>>0,t(8>=w.g),f.g}function zr(f,h,w){var P=f.xc;return t((h=P==0?0:f.vc[f.md*(w>>P)+(h>>P)])<f.Wb),f.Ya[h]}function Mo(f,h,w,P){var C=f.ab,D=f.c*h,$=f.C;h=$+h;var V=w,W=P;for(P=f.Ta,w=f.Ua;0<C--;){var K=f.gc[C],ae=$,pe=h,Q=V,se=W,de=(W=P,V=w,K.Ea);switch(t(ae<pe),t(pe<=K.nc),K.hc){case 2:yr(Q,se,(pe-ae)*de,W,V);break;case 0:var _e=ae,he=pe,xe=W,ke=V,Le=(Qe=K).Ea;_e==0&&(Il(Q,se,null,null,1,xe,ke),At(Q,se+1,0,0,Le-1,xe,ke+1),se+=Le,ke+=Le,++_e);for(var Te=1<<Qe.b,Ze=Te-1,Ue=Pe(Le,Qe.b),bt=Qe.K,Qe=Qe.w+(_e>>Qe.b)*Ue;_e<he;){var Pt=bt,jr=Qe,xt=1;for(Zs(Q,se,xe,ke-Le,1,xe,ke);xt<Le;){var Ye=(xt&~Ze)+Te;Ye>Le&&(Ye=Le),(0,Dl[Pt[jr++]>>8&15])(Q,se+ +xt,xe,ke+xt-Le,Ye-xt,xe,ke+xt),xt=Ye}se+=Le,ke+=Le,++_e&Ze||(Qe+=Ue)}pe!=K.nc&&n(W,V-de,W,V+(pe-ae-1)*de,de);break;case 1:for(de=Q,he=se,Le=(Q=K.Ea)-(ke=Q&~(xe=(se=1<<K.b)-1)),_e=Pe(Q,K.b),Te=K.K,K=K.w+(ae>>K.b)*_e;ae<pe;){for(Ze=Te,Ue=K,bt=new ct,Qe=he+ke,Pt=he+Q;he<Qe;)Ke(Ze[Ue++],bt),Fl(bt,de,he,se,W,V),he+=se,V+=se;he<Pt&&(Ke(Ze[Ue++],bt),Fl(bt,de,he,Le,W,V),he+=Le,V+=Le),++ae&xe||(K+=_e)}break;case 3:if(Q==W&&se==V&&0<K.b){for(he=W,Q=de=V+(pe-ae)*de-(ke=(pe-ae)*Pe(K.Ea,K.b)),se=W,xe=V,_e=[],ke=(Le=ke)-1;0<=ke;--ke)_e[ke]=se[xe+ke];for(ke=Le-1;0<=ke;--ke)he[Q+ke]=_e[ke];zf(K,ae,pe,W,de,W,V)}else zf(K,ae,pe,Q,se,W,V)}V=P,W=w}W!=w&&n(P,w,V,W,D)}function $a(f,h){var w=f.V,P=f.Ba+f.c*f.C,C=h-f.C;if(t(h<=f.l.o),t(16>=C),0<C){var D=f.l,$=f.Ta,V=f.Ua,W=D.width;if(Mo(f,C,w,P),C=V=[V],t((w=f.C)<(P=h)),t(D.v<D.va),P>D.o&&(P=D.o),w<D.j){var K=D.j-w;w=D.j,C[0]+=K*W}if(w>=P?w=0:(C[0]+=4*D.v,D.ka=w-D.j,D.U=D.va-D.v,D.T=P-w,w=1),w){if(V=V[0],11>(w=f.ca).S){var ae=w.f.RGBA,pe=(P=w.S,C=D.U,D=D.T,K=ae.eb,ae.A),Q=D;for(ae=ae.fb+f.Ma*ae.A;0<Q--;){var se=$,de=V,_e=C,he=K,xe=ae;switch(P){case Hf:Bl(se,de,_e,he,xe);break;case Gf:Ga(se,de,_e,he,xe);break;case Hv:Ga(se,de,_e,he,xe),Ul(he,xe,0,_e,1,0);break;case B_:rs(se,de,_e,he,xe);break;case Kf:He(se,de,_e,he,xe,1);break;case Gv:He(se,de,_e,he,xe,1),Ul(he,xe,0,_e,1,0);break;case Qf:He(se,de,_e,he,xe,0);break;case Yf:He(se,de,_e,he,xe,0),Ul(he,xe,1,_e,1,0);break;case qv:Ka(se,de,_e,he,xe);break;case Kv:Ka(se,de,_e,he,xe),O_(he,xe,_e,1,0);break;case $_:Qa(se,de,_e,he,xe);break;default:t(0)}V+=W,ae+=pe}f.Ma+=D}else alert("todo:EmitRescaledRowsYUVA");t(f.Ma<=w.height)}}f.C=h,t(f.C<=f.i)}function pi(f){var h;if(0<f.ua)return 0;for(h=0;h<f.Wb;++h){var w=f.Ya[h].G,P=f.Ya[h].H;if(0<w[1][P[1]+0].g||0<w[2][P[2]+0].g||0<w[3][P[3]+0].g)return 0}return 1}function Di(f,h,w,P,C,D){if(f.Z!=0){var $=f.qd,V=f.rd;for(t(Xa[f.Z]!=null);h<w;++h)Xa[f.Z]($,V,P,C,P,C,D),$=P,V=C,C+=D;f.qd=$,f.rd=V}}function vi(f,h){var w=f.l.ma,P=w.Z==0||w.Z==1?f.l.j:f.C;if(P=f.C<P?P:f.C,t(h<=f.l.o),h>P){var C=f.l.width,D=w.ca,$=w.tb+C*P,V=f.V,W=f.Ba+f.c*P,K=f.gc;t(f.ab==1),t(K[0].hc==3),Ui(K[0],P,h,V,W,D,$),Di(w,P,h,D,$,C)}f.C=f.Ma=h}function mi(f,h,w,P,C,D,$){var V=f.$/P,W=f.$%P,K=f.m,ae=f.s,pe=w+f.$,Q=pe;C=w+P*C;var se=w+P*D,de=280+ae.ua,_e=f.Pb?V:16777216,he=0<ae.ua?ae.Wa:null,xe=ae.wc,ke=pe<se?zr(ae,W,V):null;t(f.C<D),t(se<=C);var Le=!1;e:for(;;){for(;Le||pe<se;){var Te=0;if(V>=_e){var Ze=pe-w;t((_e=f).Pb),_e.wd=_e.m,_e.xd=Ze,0<_e.s.ua&&we(_e.s.Wa,_e.s.vb),_e=V+lL}if(W&xe||(ke=zr(ae,W,V)),t(ke!=null),ke.Qb&&(h[pe]=ke.qb,Le=!0),!Le)if(ce(K),ke.jc){Te=K,Ze=h;var Ue=pe,bt=ke.pd[G(Te)&ts-1];t(ke.jc),256>bt.g?(ie(Te,Te.u+bt.g),Ze[Ue]=bt.value,Te=0):(ie(Te,Te.u+bt.g-256),t(256<=bt.value),Te=bt.value),Te==0&&(Le=!0)}else Te=cr(ke.G[0],ke.H[0],K);if(K.h)break;if(Le||256>Te){if(!Le)if(ke.nd)h[pe]=(ke.qb|Te<<8)>>>0;else{if(ce(K),Le=cr(ke.G[1],ke.H[1],K),ce(K),Ze=cr(ke.G[2],ke.H[2],K),Ue=cr(ke.G[3],ke.H[3],K),K.h)break;h[pe]=(Ue<<24|Le<<16|Te<<8|Ze)>>>0}if(Le=!1,++pe,++W>=P&&(W=0,++V,$!=null&&V<=D&&!(V%16)&&$(f,V),he!=null))for(;Q<pe;)Te=h[Q++],he.X[(506832829*Te&4294967295)>>>he.Mb]=Te}else if(280>Te){if(Te=Yn(Te-256,K),Ze=cr(ke.G[4],ke.H[4],K),ce(K),Ze=Jn(P,Ze=Yn(Ze,K)),K.h)break;if(pe-w<Ze||C-pe<Te)break e;for(Ue=0;Ue<Te;++Ue)h[pe+Ue]=h[pe+Ue-Ze];for(pe+=Te,W+=Te;W>=P;)W-=P,++V,$!=null&&V<=D&&!(V%16)&&$(f,V);if(t(pe<=C),W&xe&&(ke=zr(ae,W,V)),he!=null)for(;Q<pe;)Te=h[Q++],he.X[(506832829*Te&4294967295)>>>he.Mb]=Te}else{if(!(Te<de))break e;for(Le=Te-280,t(he!=null);Q<pe;)Te=h[Q++],he.X[(506832829*Te&4294967295)>>>he.Mb]=Te;Te=pe,t(!(Le>>>(Ze=he).Xa)),h[Te]=Ze.X[Le],Le=!0}Le||t(K.h==ee(K))}if(f.Pb&&K.h&&pe<C)t(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&we(f.s.vb,f.s.Wa);else{if(K.h)break e;$!=null&&$(f,V>D?D:V),f.a=0,f.$=pe-w}return 1}return f.a=3,0}function Xn(f){t(f!=null),f.vc=null,f.yc=null,f.Ya=null;var h=f.Wa;h!=null&&(h.X=null),f.vb=null,t(f!=null)}function Do(){var f=new Je;return f==null?null:(f.a=0,f.xb=z_,ht("Predictor","VP8LPredictors"),ht("Predictor","VP8LPredictors_C"),ht("PredictorAdd","VP8LPredictorsAdd"),ht("PredictorAdd","VP8LPredictorsAdd_C"),yr=lt,Fl=it,Bl=Ot,Ga=St,Ka=We,Qa=st,rs=Nt,M.VP8LMapColor32b=$i,M.VP8LMapColor8b=Ml,f)}function Fi(f,h,w,P,C){var D=1,$=[f],V=[h],W=P.m,K=P.s,ae=null,pe=0;e:for(;;){if(w)for(;D&&ne(W,1);){var Q=$,se=V,de=P,_e=1,he=de.m,xe=de.gc[de.ab],ke=ne(he,2);if(de.Oc&1<<ke)D=0;else{switch(de.Oc|=1<<ke,xe.hc=ke,xe.Ea=Q[0],xe.nc=se[0],xe.K=[null],++de.ab,t(4>=de.ab),ke){case 0:case 1:xe.b=ne(he,3)+2,_e=Fi(Pe(xe.Ea,xe.b),Pe(xe.nc,xe.b),0,de,xe.K),xe.K=xe.K[0];break;case 3:var Le,Te=ne(he,8)+1,Ze=16<Te?0:4<Te?1:2<Te?2:3;if(Q[0]=Pe(xe.Ea,Ze),xe.b=Ze,Le=_e=Fi(Te,1,0,de,xe.K)){var Ue,bt=Te,Qe=xe,Pt=1<<(8>>Qe.b),jr=a(Pt);if(jr==null)Le=0;else{var xt=Qe.K[0],Ye=Qe.w;for(jr[0]=Qe.K[0][0],Ue=1;Ue<1*bt;++Ue)jr[Ue]=De(xt[Ye+Ue],jr[Ue-1]);for(;Ue<4*Pt;++Ue)jr[Ue]=0;Qe.K[0]=null,Qe.K[0]=jr,Le=1}}_e=Le;break;case 2:break;default:t(0)}D=_e}}if($=$[0],V=V[0],D&&ne(W,1)&&!(D=1<=(pe=ne(W,4))&&11>=pe)){P.a=3;break e}var Re;if(Re=D)t:{var wr,_t,Et,Jt=P,qr=$,un=V,ur=pe,Zr=w,fn=Jt.m,Ir=Jt.s,Ct=[null],Ft=1,fr=0,Bt=cL[ur];r:for(;;){if(Zr&&ne(fn,1)){var Hr=ne(fn,3)+2,_i=Pe(qr,Hr),br=Pe(un,Hr),bn=_i*br;if(!Fi(_i,br,0,Jt,Ct))break r;for(Ct=Ct[0],Ir.xc=Hr,wr=0;wr<bn;++wr){var Ht=Ct[wr]>>8&65535;Ct[wr]=Ht,Ht>=Ft&&(Ft=Ht+1)}}if(fn.h)break r;for(_t=0;5>_t;++_t){var Mr=U_[_t];!_t&&0<ur&&(Mr+=1<<ur),fr<Mr&&(fr=Mr)}var Mn=o(Ft*Bt,z),dn=Ft,Dn=o(dn,X);if(Dn==null)var Fn=null;else t(65536>=dn),Fn=Dn;var xn=a(fr);if(Fn==null||xn==null||Mn==null){Jt.a=1;break r}var Bn=Mn;for(wr=Et=0;wr<Ft;++wr){var Qt=Fn[wr],$n=Qt.G,wi=Qt.H,is=0,ya=1,Gr=0;for(_t=0;5>_t;++_t){Mr=U_[_t],$n[_t]=Bn,wi[_t]=Et,!_t&&0<ur&&(Mr+=1<<ur);i:{var ed,Xv=Mr,td=Jt,Wl=xn,LL=Bn,AL=Et,Zv=0,Za=td.m,OL=ne(Za,1);if(i(Wl,0,0,Xv),OL){var NL=ne(Za,1)+1,RL=ne(Za,1),J_=ne(Za,RL==0?1:8);Wl[J_]=1,NL==2&&(Wl[J_=ne(Za,8)]=1);var rd=1}else{var X_=a(19),Z_=ne(Za,4)+4;if(19<Z_){td.a=3;var nd=0;break i}for(ed=0;ed<Z_;++ed)X_[oL[ed]]=ne(Za,3);var em=void 0,ql=void 0,e2=td,jL=X_,id=Xv,t2=Wl,tm=0,eo=e2.m,r2=8,n2=o(128,z);n:for(;L(n2,0,7,jL,19);){if(ne(eo,1)){var IL=2+2*ne(eo,3);if((em=2+ne(eo,IL))>id)break n}else em=id;for(ql=0;ql<id&&em--;){ce(eo);var i2=n2[0+(127&G(eo))];ie(eo,eo.u+i2.g);var tc=i2.value;if(16>tc)t2[ql++]=tc,tc!=0&&(r2=tc);else{var ML=tc==16,a2=tc-16,DL=iL[a2],o2=ne(eo,nL[a2])+DL;if(ql+o2>id)break n;for(var FL=ML?r2:0;0<o2--;)t2[ql++]=FL}}tm=1;break n}tm||(e2.a=3),rd=tm}(rd=rd&&!Za.h)&&(Zv=L(LL,AL,8,Wl,Xv)),rd&&Zv!=0?nd=Zv:(td.a=3,nd=0)}if(nd==0)break r;if(ya&&aL[_t]==1&&(ya=Bn[Et].g==0),is+=Bn[Et].g,Et+=nd,3>=_t){var Hl,rm=xn[0];for(Hl=1;Hl<Mr;++Hl)xn[Hl]>rm&&(rm=xn[Hl]);Gr+=rm}}if(Qt.nd=ya,Qt.Qb=0,ya&&(Qt.qb=($n[3][wi[3]+0].value<<24|$n[1][wi[1]+0].value<<16|$n[2][wi[2]+0].value)>>>0,is==0&&256>$n[0][wi[0]+0].value&&(Qt.Qb=1,Qt.qb+=$n[0][wi[0]+0].value<<8)),Qt.jc=!Qt.Qb&&6>Gr,Qt.jc){var ad,_a=Qt;for(ad=0;ad<ts;++ad){var to=ad,ro=_a.pd[to],od=_a.G[0][_a.H[0]+to];256<=od.value?(ro.g=od.g+256,ro.value=od.value):(ro.g=0,ro.value=0,to>>=Br(od,8,ro),to>>=Br(_a.G[1][_a.H[1]+to],16,ro),to>>=Br(_a.G[2][_a.H[2]+to],0,ro),Br(_a.G[3][_a.H[3]+to],24,ro))}}}Ir.vc=Ct,Ir.Wb=Ft,Ir.Ya=Fn,Ir.yc=Mn,Re=1;break t}Re=0}if(!(D=Re)){P.a=3;break e}if(0<pe){if(K.ua=1<<pe,!J(K.Wa,pe)){P.a=1,D=0;break e}}else K.ua=0;var nm=P,s2=$,BL=V,im=nm.s,am=im.xc;if(nm.c=s2,nm.i=BL,im.md=Pe(s2,am),im.wc=am==0?-1:(1<<am)-1,w){P.xb=mL;break e}if((ae=a($*V))==null){P.a=1,D=0;break e}D=(D=mi(P,ae,0,$,V,V,null))&&!W.h;break e}return D?(C!=null?C[0]=ae:(t(ae==null),t(w)),P.$=0,w||Xn(K)):Xn(K),D}function Fo(f,h){var w=f.c*f.i,P=w+h+16*h;return t(f.c<=h),f.V=a(P),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+w+h,1)}function zs(f,h){var w=f.C,P=h-w,C=f.V,D=f.Ba+f.c*w;for(t(h<=f.l.o);0<P;){var $=16<P?16:P,V=f.l.ma,W=f.l.width,K=W*$,ae=V.ca,pe=V.tb+W*w,Q=f.Ta,se=f.Ua;Mo(f,$,C,D),R_(Q,se,ae,pe,K),Di(V,w,w+$,ae,pe,W),P-=$,C+=$*f.c,w+=$}t(w==h),f.C=f.Ma=h}function Ws(){this.ub=this.yd=this.td=this.Rb=0}function qs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Cv(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function _l(){this.Yb=function(){var f=[];return function h(w,P,C){for(var D=C[P],$=0;$<D&&(w.push(C.length>P+1?[]:0),!(C.length<P+1));$++)h(w[$],P+1,C)}(f,0,[3,11]),f}()}function Tf(){this.jb=a(3),this.Wc=s([4,8],_l),this.Xc=s([4,17],_l)}function Ef(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Zn(){this.ld=this.La=this.dd=this.tc=0}function wl(){this.Na=this.la=0}function Cf(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bl(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Lf(){this.uc=this.M=this.Nb=0,this.wa=Array(new Zn),this.Y=0,this.ya=Array(new bl),this.aa=0,this.l=new Hs}function Af(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Of(){this.cb=this.a=0,this.sc="",this.m=new N,this.Od=new Ws,this.Kc=new qs,this.ed=new Ef,this.Qa=new Cv,this.Ic=this.$c=this.Aa=0,this.D=new Lf,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,N),this.ia=0,this.pb=o(4,Cf),this.Pa=new Tf,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Af),this.Hd=0,this.rb=Array(new wl),this.sb=0,this.wa=Array(new Zn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bl),this.L=this.aa=0,this.gd=s([4,2],Zn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Hs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Lv(){var f=new Of;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,Vl||(Vl=la)),f}function Tr(f,h,w){return f.a==0&&(f.a=h,f.sc=w,f.cb=0),0}function Nf(f,h,w){return 3<=w&&f[h+0]==157&&f[h+1]==1&&f[h+2]==42}function Rf(f,h){if(f==null)return 0;if(f.a=0,f.sc="OK",h==null)return Tr(f,2,"null VP8Io passed to VP8GetHeaders()");var w=h.data,P=h.w,C=h.ha;if(4>C)return Tr(f,7,"Truncated header.");var D=w[P+0]|w[P+1]<<8|w[P+2]<<16,$=f.Od;if($.Rb=!(1&D),$.td=D>>1&7,$.yd=D>>4&1,$.ub=D>>5,3<$.td)return Tr(f,3,"Incorrect keyframe parameters.");if(!$.yd)return Tr(f,4,"Frame not displayable.");P+=3,C-=3;var V=f.Kc;if($.Rb){if(7>C)return Tr(f,7,"cannot parse picture header");if(!Nf(w,P,C))return Tr(f,3,"Bad code word");V.c=16383&(w[P+4]<<8|w[P+3]),V.Td=w[P+4]>>6,V.i=16383&(w[P+6]<<8|w[P+5]),V.Ud=w[P+6]>>6,P+=7,C-=7,f.za=V.c+15>>4,f.Ub=V.i+15>>4,h.width=V.c,h.height=V.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((D=f.Pa).jb,0,255,D.jb.length),t((D=f.Qa)!=null),D.Cb=0,D.Bb=0,D.Fb=1,i(D.Zb,0,0,D.Zb.length),i(D.Lb,0,0,D.Lb)}if($.ub>C)return Tr(f,7,"bad partition length");Z(D=f.m,w,P,$.ub),P+=$.ub,C-=$.ub,$.Rb&&(V.Ld=ve(D),V.Kd=ve(D)),V=f.Qa;var W,K=f.Pa;if(t(D!=null),t(V!=null),V.Cb=ve(D),V.Cb){if(V.Bb=ve(D),ve(D)){for(V.Fb=ve(D),W=0;4>W;++W)V.Zb[W]=ve(D)?H(D,7):0;for(W=0;4>W;++W)V.Lb[W]=ve(D)?H(D,6):0}if(V.Bb)for(W=0;3>W;++W)K.jb[W]=ve(D)?oe(D,8):255}else V.Bb=0;if(D.Ka)return Tr(f,3,"cannot parse segment header");if((V=f.ed).zd=ve(D),V.Tb=oe(D,6),V.wb=oe(D,3),V.Pc=ve(D),V.Pc&&ve(D)){for(K=0;4>K;++K)ve(D)&&(V.vd[K]=H(D,6));for(K=0;4>K;++K)ve(D)&&(V.od[K]=H(D,6))}if(f.L=V.Tb==0?0:V.zd?1:2,D.Ka)return Tr(f,3,"cannot parse filter header");var ae=C;if(C=W=P,P=W+ae,V=ae,f.Xb=(1<<oe(f.m,2))-1,ae<3*(K=f.Xb))w=7;else{for(W+=3*K,V-=3*K,ae=0;ae<K;++ae){var pe=w[C+0]|w[C+1]<<8|w[C+2]<<16;pe>V&&(pe=V),Z(f.Jc[+ae],w,W,pe),W+=pe,V-=pe,C+=3}Z(f.Jc[+K],w,W,V),w=W<P?0:5}if(w!=0)return Tr(f,w,"cannot parse partitions");for(w=oe(W=f.m,7),C=ve(W)?H(W,4):0,P=ve(W)?H(W,4):0,V=ve(W)?H(W,4):0,K=ve(W)?H(W,4):0,W=ve(W)?H(W,4):0,ae=f.Qa,pe=0;4>pe;++pe){if(ae.Cb){var Q=ae.Zb[pe];ae.Fb||(Q+=w)}else{if(0<pe){f.pb[pe]=f.pb[0];continue}Q=w}var se=f.pb[pe];se.Sc[0]=Qv[lr(Q+C,127)],se.Sc[1]=Yv[lr(Q+0,127)],se.Eb[0]=2*Qv[lr(Q+P,127)],se.Eb[1]=101581*Yv[lr(Q+V,127)]>>16,8>se.Eb[1]&&(se.Eb[1]=8),se.Qc[0]=Qv[lr(Q+K,117)],se.Qc[1]=Yv[lr(Q+W,127)],se.lc=Q+W}if(!$.Rb)return Tr(f,4,"Not a key frame.");for(ve(D),$=f.Pa,w=0;4>w;++w){for(C=0;8>C;++C)for(P=0;3>P;++P)for(V=0;11>V;++V)K=be(D,pL[w][C][P][V])?oe(D,8):dL[w][C][P][V],$.Wc[w][C].Yb[P][V]=K;for(C=0;17>C;++C)$.Xc[w][C]=$.Wc[w][vL[C]]}return f.kc=ve(D),f.kc&&(f.Bd=oe(D,8)),f.cb=1}function la(f,h,w,P,C,D,$){var V=h[C].Yb[w];for(w=0;16>C;++C){if(!be(f,V[w+0]))return C;for(;!be(f,V[w+1]);)if(V=h[++C].Yb[0],w=0,C==16)return 16;var W=h[C+1].Yb;if(be(f,V[w+2])){var K=f,ae=0;if(be(K,(Q=V)[(pe=w)+3]))if(be(K,Q[pe+6])){for(V=0,pe=2*(ae=be(K,Q[pe+8]))+(Q=be(K,Q[pe+9+ae])),ae=0,Q=uL[pe];Q[V];++V)ae+=ae+be(K,Q[V]);ae+=3+(8<<pe)}else be(K,Q[pe+7])?(ae=7+2*be(K,165),ae+=be(K,145)):ae=5+be(K,159);else ae=be(K,Q[pe+4])?3+be(K,Q[pe+5]):2;V=W[2]}else ae=1,V=W[1];W=$+fL[C],0>(K=f).b&&ge(K);var pe,Q=K.b,se=(pe=K.Ca>>1)-(K.I>>Q)>>31;--K.b,K.Ca+=se,K.Ca|=1,K.I-=(pe+1&se)<<Q,D[W]=((ae^se)-se)*P[(0<C)+0]}return 16}function Bo(f){var h=f.rb[f.sb-1];h.la=0,h.Na=0,i(f.zc,0,0,f.zc.length),f.ja=0}function gi(f,h,w,P,C){C=f[h+w+32*P]+(C>>3),f[h+w+32*P]=-256&C?0>C?0:255:C}function $o(f,h,w,P,C,D){gi(f,h,0,w,P+C),gi(f,h,1,w,P+D),gi(f,h,2,w,P-D),gi(f,h,3,w,P-C)}function gr(f){return(20091*f>>16)+f}function xl(f,h,w,P){var C,D=0,$=a(16);for(C=0;4>C;++C){var V=f[h+0]+f[h+8],W=f[h+0]-f[h+8],K=(35468*f[h+4]>>16)-gr(f[h+12]),ae=gr(f[h+4])+(35468*f[h+12]>>16);$[D+0]=V+ae,$[D+1]=W+K,$[D+2]=W-K,$[D+3]=V-ae,D+=4,h++}for(C=D=0;4>C;++C)V=(f=$[D+0]+4)+$[D+8],W=f-$[D+8],K=(35468*$[D+4]>>16)-gr($[D+12]),gi(w,P,0,0,V+(ae=gr($[D+4])+(35468*$[D+12]>>16))),gi(w,P,1,0,W+K),gi(w,P,2,0,W-K),gi(w,P,3,0,V-ae),D++,P+=32}function Av(f,h,w,P){var C=f[h+0]+4,D=35468*f[h+4]>>16,$=gr(f[h+4]),V=35468*f[h+1]>>16;$o(w,P,0,C+$,f=gr(f[h+1]),V),$o(w,P,1,C+D,f,V),$o(w,P,2,C-D,f,V),$o(w,P,3,C-$,f,V)}function Ov(f,h,w,P,C){xl(f,h,w,P),C&&xl(f,h+16,w,P+4)}function Nv(f,h,w,P){ns(f,h+0,w,P,1),ns(f,h+32,w,P+128,1)}function Bi(f,h,w,P){var C;for(f=f[h+0]+4,C=0;4>C;++C)for(h=0;4>h;++h)gi(w,P,h,C,f)}function jf(f,h,w,P){f[h+0]&&Mt(f,h+0,w,P),f[h+16]&&Mt(f,h+16,w,P+4),f[h+32]&&Mt(f,h+32,w,P+128),f[h+48]&&Mt(f,h+48,w,P+128+4)}function If(f,h,w,P){var C,D=a(16);for(C=0;4>C;++C){var $=f[h+0+C]+f[h+12+C],V=f[h+4+C]+f[h+8+C],W=f[h+4+C]-f[h+8+C],K=f[h+0+C]-f[h+12+C];D[0+C]=$+V,D[8+C]=$-V,D[4+C]=K+W,D[12+C]=K-W}for(C=0;4>C;++C)$=(f=D[0+4*C]+3)+D[3+4*C],V=D[1+4*C]+D[2+4*C],W=D[1+4*C]-D[2+4*C],K=f-D[3+4*C],w[P+0]=$+V>>3,w[P+16]=K+W>>3,w[P+32]=$-V>>3,w[P+48]=K-W>>3,P+=64}function Ua(f,h,w){var P,C=h-32,D=In,$=255-f[C-1];for(P=0;P<w;++P){var V,W=D,K=$+f[h-1];for(V=0;V<w;++V)f[h+V]=W[K+f[C+V]];h+=32}}function Sl(f,h){Ua(f,h,4)}function Rv(f,h){Ua(f,h,8)}function jv(f,h){Ua(f,h,16)}function Iv(f,h){var w;for(w=0;16>w;++w)n(f,h+32*w,f,h-32,16)}function kl(f,h){var w;for(w=16;0<w;--w)i(f,h,f[h-1],16),h+=32}function Uo(f,h,w){var P;for(P=0;16>P;++P)i(h,w+32*P,f,16)}function Va(f,h){var w,P=16;for(w=0;16>w;++w)P+=f[h-1+32*w]+f[h+w-32];Uo(P>>5,f,h)}function Mv(f,h){var w,P=8;for(w=0;16>w;++w)P+=f[h-1+32*w];Uo(P>>4,f,h)}function Vo(f,h){var w,P=8;for(w=0;16>w;++w)P+=f[h+w-32];Uo(P>>4,f,h)}function Pl(f,h){Uo(128,f,h)}function vt(f,h,w){return f+2*h+w+2>>2}function Dv(f,h){var w,P=h-32;for(P=new Uint8Array([vt(f[P-1],f[P+0],f[P+1]),vt(f[P+0],f[P+1],f[P+2]),vt(f[P+1],f[P+2],f[P+3]),vt(f[P+2],f[P+3],f[P+4])]),w=0;4>w;++w)n(f,h+32*w,P,0,P.length)}function Fv(f,h){var w=f[h-1],P=f[h-1+32],C=f[h-1+64],D=f[h-1+96];Ce(f,h+0,16843009*vt(f[h-1-32],w,P)),Ce(f,h+32,16843009*vt(w,P,C)),Ce(f,h+64,16843009*vt(P,C,D)),Ce(f,h+96,16843009*vt(C,D,D))}function Bv(f,h){var w,P=4;for(w=0;4>w;++w)P+=f[h+w-32]+f[h-1+32*w];for(P>>=3,w=0;4>w;++w)i(f,h+32*w,P,4)}function $v(f,h){var w=f[h-1+0],P=f[h-1+32],C=f[h-1+64],D=f[h-1-32],$=f[h+0-32],V=f[h+1-32],W=f[h+2-32],K=f[h+3-32];f[h+0+96]=vt(P,C,f[h-1+96]),f[h+1+96]=f[h+0+64]=vt(w,P,C),f[h+2+96]=f[h+1+64]=f[h+0+32]=vt(D,w,P),f[h+3+96]=f[h+2+64]=f[h+1+32]=f[h+0+0]=vt($,D,w),f[h+3+64]=f[h+2+32]=f[h+1+0]=vt(V,$,D),f[h+3+32]=f[h+2+0]=vt(W,V,$),f[h+3+0]=vt(K,W,V)}function ua(f,h){var w=f[h+1-32],P=f[h+2-32],C=f[h+3-32],D=f[h+4-32],$=f[h+5-32],V=f[h+6-32],W=f[h+7-32];f[h+0+0]=vt(f[h+0-32],w,P),f[h+1+0]=f[h+0+32]=vt(w,P,C),f[h+2+0]=f[h+1+32]=f[h+0+64]=vt(P,C,D),f[h+3+0]=f[h+2+32]=f[h+1+64]=f[h+0+96]=vt(C,D,$),f[h+3+32]=f[h+2+64]=f[h+1+96]=vt(D,$,V),f[h+3+64]=f[h+2+96]=vt($,V,W),f[h+3+96]=vt(V,W,W)}function fa(f,h){var w=f[h-1+0],P=f[h-1+32],C=f[h-1+64],D=f[h-1-32],$=f[h+0-32],V=f[h+1-32],W=f[h+2-32],K=f[h+3-32];f[h+0+0]=f[h+1+64]=D+$+1>>1,f[h+1+0]=f[h+2+64]=$+V+1>>1,f[h+2+0]=f[h+3+64]=V+W+1>>1,f[h+3+0]=W+K+1>>1,f[h+0+96]=vt(C,P,w),f[h+0+64]=vt(P,w,D),f[h+0+32]=f[h+1+96]=vt(w,D,$),f[h+1+32]=f[h+2+96]=vt(D,$,V),f[h+2+32]=f[h+3+96]=vt($,V,W),f[h+3+32]=vt(V,W,K)}function Uv(f,h){var w=f[h+0-32],P=f[h+1-32],C=f[h+2-32],D=f[h+3-32],$=f[h+4-32],V=f[h+5-32],W=f[h+6-32],K=f[h+7-32];f[h+0+0]=w+P+1>>1,f[h+1+0]=f[h+0+64]=P+C+1>>1,f[h+2+0]=f[h+1+64]=C+D+1>>1,f[h+3+0]=f[h+2+64]=D+$+1>>1,f[h+0+32]=vt(w,P,C),f[h+1+32]=f[h+0+96]=vt(P,C,D),f[h+2+32]=f[h+1+96]=vt(C,D,$),f[h+3+32]=f[h+2+96]=vt(D,$,V),f[h+3+64]=vt($,V,W),f[h+3+96]=vt(V,W,K)}function Vv(f,h){var w=f[h-1+0],P=f[h-1+32],C=f[h-1+64],D=f[h-1+96];f[h+0+0]=w+P+1>>1,f[h+2+0]=f[h+0+32]=P+C+1>>1,f[h+2+32]=f[h+0+64]=C+D+1>>1,f[h+1+0]=vt(w,P,C),f[h+3+0]=f[h+1+32]=vt(P,C,D),f[h+3+32]=f[h+1+64]=vt(C,D,D),f[h+3+64]=f[h+2+64]=f[h+0+96]=f[h+1+96]=f[h+2+96]=f[h+3+96]=D}function Gs(f,h){var w=f[h-1+0],P=f[h-1+32],C=f[h-1+64],D=f[h-1+96],$=f[h-1-32],V=f[h+0-32],W=f[h+1-32],K=f[h+2-32];f[h+0+0]=f[h+2+32]=w+$+1>>1,f[h+0+32]=f[h+2+64]=P+w+1>>1,f[h+0+64]=f[h+2+96]=C+P+1>>1,f[h+0+96]=D+C+1>>1,f[h+3+0]=vt(V,W,K),f[h+2+0]=vt($,V,W),f[h+1+0]=f[h+3+32]=vt(w,$,V),f[h+1+32]=f[h+3+64]=vt(P,w,$),f[h+1+64]=f[h+3+96]=vt(C,P,w),f[h+1+96]=vt(D,C,P)}function Tl(f,h){var w;for(w=0;8>w;++w)n(f,h+32*w,f,h-32,8)}function zo(f,h){var w;for(w=0;8>w;++w)i(f,h,f[h-1],8),h+=32}function Ks(f,h,w){var P;for(P=0;8>P;++P)i(h,w+32*P,f,8)}function Qs(f,h){var w,P=8;for(w=0;8>w;++w)P+=f[h+w-32]+f[h-1+32*w];Ks(P>>4,f,h)}function zv(f,h){var w,P=4;for(w=0;8>w;++w)P+=f[h+w-32];Ks(P>>3,f,h)}function El(f,h){var w,P=4;for(w=0;8>w;++w)P+=f[h-1+32*w];Ks(P>>3,f,h)}function Cl(f,h){Ks(128,f,h)}function Wo(f,h,w){var P=f[h-w],C=f[h+0],D=3*(C-P)+Wv[1020+f[h-2*w]-f[h+w]],$=qf[112+(D+4>>3)];f[h-w]=In[255+P+qf[112+(D+3>>3)]],f[h+0]=In[255+C-$]}function qo(f,h,w,P){var C=f[h+0],D=f[h+w];return ni[255+f[h-2*w]-f[h-w]]>P||ni[255+D-C]>P}function Ll(f,h,w,P){return 4*ni[255+f[h-w]-f[h+0]]+ni[255+f[h-2*w]-f[h+w]]<=P}function Ys(f,h,w,P,C){var D=f[h-3*w],$=f[h-2*w],V=f[h-w],W=f[h+0],K=f[h+w],ae=f[h+2*w],pe=f[h+3*w];return 4*ni[255+V-W]+ni[255+$-K]>P?0:ni[255+f[h-4*w]-D]<=C&&ni[255+D-$]<=C&&ni[255+$-V]<=C&&ni[255+pe-ae]<=C&&ni[255+ae-K]<=C&&ni[255+K-W]<=C}function Al(f,h,w,P){var C=2*P+1;for(P=0;16>P;++P)Ll(f,h+P,w,C)&&Wo(f,h+P,w)}function Ho(f,h,w,P){var C=2*P+1;for(P=0;16>P;++P)Ll(f,h+P*w,1,C)&&Wo(f,h+P*w,1)}function Mf(f,h,w,P){var C;for(C=3;0<C;--C)Al(f,h+=4*w,w,P)}function Df(f,h,w,P){var C;for(C=3;0<C;--C)Ho(f,h+=4,w,P)}function da(f,h,w,P,C,D,$,V){for(D=2*D+1;0<C--;){if(Ys(f,h,w,D,$))if(qo(f,h,w,V))Wo(f,h,w);else{var W=f,K=h,ae=w,pe=W[K-2*ae],Q=W[K-ae],se=W[K+0],de=W[K+ae],_e=W[K+2*ae],he=27*(ke=Wv[1020+3*(se-Q)+Wv[1020+pe-de]])+63>>7,xe=18*ke+63>>7,ke=9*ke+63>>7;W[K-3*ae]=In[255+W[K-3*ae]+ke],W[K-2*ae]=In[255+pe+xe],W[K-ae]=In[255+Q+he],W[K+0]=In[255+se-he],W[K+ae]=In[255+de-xe],W[K+2*ae]=In[255+_e-ke]}h+=P}}function ha(f,h,w,P,C,D,$,V){for(D=2*D+1;0<C--;){if(Ys(f,h,w,D,$))if(qo(f,h,w,V))Wo(f,h,w);else{var W=f,K=h,ae=w,pe=W[K-ae],Q=W[K+0],se=W[K+ae],de=qf[112+(4+(_e=3*(Q-pe))>>3)],_e=qf[112+(_e+3>>3)],he=de+1>>1;W[K-2*ae]=In[255+W[K-2*ae]+he],W[K-ae]=In[255+pe+_e],W[K+0]=In[255+Q-de],W[K+ae]=In[255+se-he]}h+=P}}function Ff(f,h,w,P,C,D){da(f,h,w,1,16,P,C,D)}function Bf(f,h,w,P,C,D){da(f,h,1,w,16,P,C,D)}function Go(f,h,w,P,C,D){var $;for($=3;0<$;--$)ha(f,h+=4*w,w,1,16,P,C,D)}function $f(f,h,w,P,C,D){var $;for($=3;0<$;--$)ha(f,h+=4,1,w,16,P,C,D)}function g(f,h,w,P,C,D,$,V){da(f,h,C,1,8,D,$,V),da(w,P,C,1,8,D,$,V)}function E(f,h,w,P,C,D,$,V){da(f,h,1,C,8,D,$,V),da(w,P,1,C,8,D,$,V)}function Y(f,h,w,P,C,D,$,V){ha(f,h+4*C,C,1,8,D,$,V),ha(w,P+4*C,C,1,8,D,$,V)}function te(f,h,w,P,C,D,$,V){ha(f,h+4,1,C,8,D,$,V),ha(w,P+4,1,C,8,D,$,V)}function le(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Se(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ee(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function qe(){this.ua=0,this.Wa=new Oe,this.vb=new Oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new z}function Je(){this.xb=this.a=0,this.l=new Hs,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new qe,this.ab=0,this.gc=o(4,Ee),this.Oc=0}function ft(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Hs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mt(f,h,w,P,C,D,$){for(f=f==null?0:f[h+0],h=0;h<$;++h)C[D+h]=f+w[P+h]&255,f=C[D+h]}function Rt(f,h,w,P,C,D,$){var V;if(f==null)mt(null,null,w,P,C,D,$);else for(V=0;V<$;++V)C[D+V]=f[h+V]+w[P+V]&255}function nr(f,h,w,P,C,D,$){if(f==null)mt(null,null,w,P,C,D,$);else{var V,W=f[h+0],K=W,ae=W;for(V=0;V<$;++V)K=ae+(W=f[h+V])-K,ae=w[P+V]+(-256&K?0>K?0:255:K)&255,K=W,C[D+V]=ae}}function Er(f,h,w,P){var C=h.width,D=h.o;if(t(f!=null&&h!=null),0>w||0>=P||w+P>D)return null;if(!f.Cc){if(f.ga==null){var $;if(f.ga=new ft,($=f.ga==null)||($=h.width*h.o,t(f.Gb.length==0),f.Gb=a($),f.Uc=0,f.Gb==null?$=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,$=1),$=!$),!$){$=f.ga;var V=f.Fa,W=f.P,K=f.qc,ae=f.mb,pe=f.nb,Q=W+1,se=K-1,de=$.l;if(t(V!=null&&ae!=null&&h!=null),Xa[0]=null,Xa[1]=mt,Xa[2]=Rt,Xa[3]=nr,$.ca=ae,$.tb=pe,$.c=h.width,$.i=h.height,t(0<$.c&&0<$.i),1>=K)h=0;else if($.$a=3&V[W+0],$.Z=V[W+0]>>2&3,$.Lc=V[W+0]>>4&3,W=V[W+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||W)h=0;else if(de.put=at,de.ac=Mi,de.bc=sa,de.ma=$,de.width=h.width,de.height=h.height,de.Da=h.Da,de.v=h.v,de.va=h.va,de.j=h.j,de.o=h.o,$.$a)e:{t($.$a==1),h=Do();t:for(;;){if(h==null){h=0;break e}if(t($!=null),$.mc=h,h.c=$.c,h.i=$.i,h.l=$.l,h.l.ma=$,h.l.width=$.c,h.l.height=$.i,h.a=0,re(h.m,V,Q,se),!Fi($.c,$.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&pi(h.s)?($.ic=1,V=h.c*h.i,h.Ta=null,h.Ua=0,h.V=a(V),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):($.ic=0,h=Fo(h,$.c)),!h))break t;h=1;break e}$.mc=null,h=0}else h=se>=$.c*$.i;$=!h}if($)return null;f.ga.Lc!=1?f.Ga=0:P=D-w}t(f.ga!=null),t(w+P<=D);e:{if(h=(V=f.ga).c,D=V.l.o,V.$a==0){if(Q=f.rc,se=f.Vc,de=f.Fa,W=f.P+1+w*h,K=f.mb,ae=f.nb+w*h,t(W<=f.P+f.qc),V.Z!=0)for(t(Xa[V.Z]!=null),$=0;$<P;++$)Xa[V.Z](Q,se,de,W,K,ae,h),Q=K,se=ae,ae+=h,W+=h;else for($=0;$<P;++$)n(K,ae,de,W,h),Q=K,se=ae,ae+=h,W+=h;f.rc=Q,f.Vc=se}else{if(t(V.mc!=null),h=w+P,t(($=V.mc)!=null),t(h<=$.i),$.C>=h)h=1;else if(V.ic||ei(),V.ic){V=$.V,Q=$.Ba,se=$.c;var _e=$.i,he=(de=1,W=$.$/se,K=$.$%se,ae=$.m,pe=$.s,$.$),xe=se*_e,ke=se*h,Le=pe.wc,Te=he<ke?zr(pe,K,W):null;t(he<=xe),t(h<=_e),t(pi(pe));t:for(;;){for(;!ae.h&&he<ke;){if(K&Le||(Te=zr(pe,K,W)),t(Te!=null),ce(ae),256>(_e=cr(Te.G[0],Te.H[0],ae)))V[Q+he]=_e,++he,++K>=se&&(K=0,++W<=h&&!(W%16)&&vi($,W));else{if(!(280>_e)){de=0;break t}_e=Yn(_e-256,ae);var Ze,Ue=cr(Te.G[4],Te.H[4],ae);if(ce(ae),!(he>=(Ue=Jn(se,Ue=Yn(Ue,ae)))&&xe-he>=_e)){de=0;break t}for(Ze=0;Ze<_e;++Ze)V[Q+he+Ze]=V[Q+he+Ze-Ue];for(he+=_e,K+=_e;K>=se;)K-=se,++W<=h&&!(W%16)&&vi($,W);he<ke&&K&Le&&(Te=zr(pe,K,W))}t(ae.h==ee(ae))}vi($,W>h?h:W);break t}!de||ae.h&&he<xe?(de=0,$.a=ae.h?5:3):$.$=he,h=de}else h=mi($,$.V,$.Ba,$.c,$.i,h,zs);if(!h){P=0;break e}}w+P>=D&&(f.Cc=1),P=1}if(!P)return null;if(f.Cc&&((P=f.ga)!=null&&(P.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+w*C}function Kt(f,h,w,P,C,D){for(;0<C--;){var $,V=f,W=h+(w?1:0),K=f,ae=h+(w?0:3);for($=0;$<P;++$){var pe=K[ae+4*$];pe!=255&&(pe*=32897,V[W+4*$+0]=V[W+4*$+0]*pe>>23,V[W+4*$+1]=V[W+4*$+1]*pe>>23,V[W+4*$+2]=V[W+4*$+2]*pe>>23)}h+=D}}function Nr(f,h,w,P,C){for(;0<P--;){var D;for(D=0;D<w;++D){var $=f[h+2*D+0],V=15&(K=f[h+2*D+1]),W=4369*V,K=(240&K|K>>4)*W>>16;f[h+2*D+0]=(240&$|$>>4)*W>>16&240|(15&$|$<<4)*W>>16>>4&15,f[h+2*D+1]=240&K|V}h+=C}}function Cr(f,h,w,P,C,D,$,V){var W,K,ae=255;for(K=0;K<C;++K){for(W=0;W<P;++W){var pe=f[h+W];D[$+4*W]=pe,ae&=pe}h+=w,$+=V}return ae!=255}function Wr(f,h,w,P,C){var D;for(D=0;D<C;++D)w[P+D]=f[h+D]>>8}function ei(){Ul=Kt,O_=Nr,N_=Cr,R_=Wr}function wn(f,h,w){M[f]=function(P,C,D,$,V,W,K,ae,pe,Q,se,de,_e,he,xe,ke,Le){var Te,Ze=Le-1>>1,Ue=V[W+0]|K[ae+0]<<16,bt=pe[Q+0]|se[de+0]<<16;t(P!=null);var Qe=3*Ue+bt+131074>>2;for(h(P[C+0],255&Qe,Qe>>16,_e,he),D!=null&&(Qe=3*bt+Ue+131074>>2,h(D[$+0],255&Qe,Qe>>16,xe,ke)),Te=1;Te<=Ze;++Te){var Pt=V[W+Te]|K[ae+Te]<<16,jr=pe[Q+Te]|se[de+Te]<<16,xt=Ue+Pt+bt+jr+524296,Ye=xt+2*(Pt+bt)>>3;Qe=Ye+Ue>>1,Ue=(xt=xt+2*(Ue+jr)>>3)+Pt>>1,h(P[C+2*Te-1],255&Qe,Qe>>16,_e,he+(2*Te-1)*w),h(P[C+2*Te-0],255&Ue,Ue>>16,_e,he+(2*Te-0)*w),D!=null&&(Qe=xt+bt>>1,Ue=Ye+jr>>1,h(D[$+2*Te-1],255&Qe,Qe>>16,xe,ke+(2*Te-1)*w),h(D[$+2*Te+0],255&Ue,Ue>>16,xe,ke+(2*Te+0)*w)),Ue=Pt,bt=jr}1&Le||(Qe=3*Ue+bt+131074>>2,h(P[C+Le-1],255&Qe,Qe>>16,_e,he+(Le-1)*w),D!=null&&(Qe=3*bt+Ue+131074>>2,h(D[$+Le-1],255&Qe,Qe>>16,xe,ke+(Le-1)*w)))}}function Uf(){ii[Hf]=gL,ii[Gf]=W_,ii[B_]=yL,ii[Kf]=q_,ii[Qf]=H_,ii[qv]=G_,ii[$_]=_L,ii[Hv]=W_,ii[Gv]=q_,ii[Yf]=H_,ii[Kv]=G_}function Js(f){return f&-16384?0>f?0:255:f>>wL}function Ko(f,h){return Js((19077*f>>8)+(26149*h>>8)-14234)}function za(f,h,w){return Js((19077*f>>8)-(6419*h>>8)-(13320*w>>8)+8708)}function Qo(f,h){return Js((19077*f>>8)+(33050*h>>8)-17685)}function Yo(f,h,w,P,C){P[C+0]=Ko(f,w),P[C+1]=za(f,h,w),P[C+2]=Qo(f,h)}function Jo(f,h,w,P,C){P[C+0]=Qo(f,h),P[C+1]=za(f,h,w),P[C+2]=Ko(f,w)}function Xr(f,h,w,P,C){var D=za(f,h,w);h=D<<3&224|Qo(f,h)>>3,P[C+0]=248&Ko(f,w)|D>>5,P[C+1]=h}function Xo(f,h,w,P,C){var D=240&Qo(f,h)|15;P[C+0]=240&Ko(f,w)|za(f,h,w)>>4,P[C+1]=D}function Zo(f,h,w,P,C){P[C+0]=255,Yo(f,h,w,P,C+1)}function Ol(f,h,w,P,C){Jo(f,h,w,P,C),P[C+3]=255}function Nl(f,h,w,P,C){Yo(f,h,w,P,C),P[C+3]=255}function lr(f,h){return 0>f?0:f>h?h:f}function pa(f,h,w){M[f]=function(P,C,D,$,V,W,K,ae,pe){for(var Q=ae+(-2&pe)*w;ae!=Q;)h(P[C+0],D[$+0],V[W+0],K,ae),h(P[C+1],D[$+0],V[W+0],K,ae+w),C+=2,++$,++W,ae+=2*w;1&pe&&h(P[C+0],D[$+0],V[W+0],K,ae)}}function Xs(f,h,w){return w==0?f==0?h==0?6:5:h==0?4:0:w}function Vf(f,h,w,P,C){switch(f>>>30){case 3:ns(h,w,P,C,0);break;case 2:ri(h,w,P,C);break;case 1:Mt(h,w,P,C)}}function ti(f,h){var w,P,C=h.M,D=h.Nb,$=f.oc,V=f.pc+40,W=f.oc,K=f.pc+584,ae=f.oc,pe=f.pc+600;for(w=0;16>w;++w)$[V+32*w-1]=129;for(w=0;8>w;++w)W[K+32*w-1]=129,ae[pe+32*w-1]=129;for(0<C?$[V-1-32]=W[K-1-32]=ae[pe-1-32]=129:(i($,V-32-1,127,21),i(W,K-32-1,127,9),i(ae,pe-32-1,127,9)),P=0;P<f.za;++P){var Q=h.ya[h.aa+P];if(0<P){for(w=-1;16>w;++w)n($,V+32*w-4,$,V+32*w+12,4);for(w=-1;8>w;++w)n(W,K+32*w-4,W,K+32*w+4,4),n(ae,pe+32*w-4,ae,pe+32*w+4,4)}var se=f.Gd,de=f.Hd+P,_e=Q.ad,he=Q.Hc;if(0<C&&(n($,V-32,se[de].y,0,16),n(W,K-32,se[de].f,0,8),n(ae,pe-32,se[de].ea,0,8)),Q.Za){var xe=$,ke=V-32+16;for(0<C&&(P>=f.za-1?i(xe,ke,se[de].y[15],4):n(xe,ke,se[de+1].y,0,4)),w=0;4>w;w++)xe[ke+128+w]=xe[ke+256+w]=xe[ke+384+w]=xe[ke+0+w];for(w=0;16>w;++w,he<<=2)xe=$,ke=V+Q_[w],yi[Q.Ob[w]](xe,ke),Vf(he,_e,16*+w,xe,ke)}else if(xe=Xs(P,C,Q.Ob[0]),Ja[xe]($,V),he!=0)for(w=0;16>w;++w,he<<=2)Vf(he,_e,16*+w,$,V+Q_[w]);for(w=Q.Gc,xe=Xs(P,C,Q.Dd),ga[xe](W,K),ga[xe](ae,pe),he=_e,xe=W,ke=K,255&(Q=0|w)&&(170&Q?Vi(he,256,xe,ke):qt(he,256,xe,ke)),Q=ae,he=pe,255&(w>>=8)&&(170&w?Vi(_e,320,Q,he):qt(_e,320,Q,he)),C<f.Ub-1&&(n(se[de].y,0,$,V+480,16),n(se[de].f,0,W,K+224,8),n(se[de].ea,0,ae,pe+224,8)),w=8*D*f.B,se=f.sa,de=f.ta+16*P+16*D*f.R,_e=f.qa,Q=f.ra+8*P+w,he=f.Ha,xe=f.Ia+8*P+w,w=0;16>w;++w)n(se,de+w*f.R,$,V+32*w,16);for(w=0;8>w;++w)n(_e,Q+w*f.B,W,K+32*w,8),n(he,xe+w*f.B,ae,pe+32*w,8)}}function es(f,h,w,P,C,D,$,V,W){var K=[0],ae=[0],pe=0,Q=W!=null?W.kd:0,se=W??new Se;if(f==null||12>w)return 7;se.data=f,se.w=h,se.ha=w,h=[h],w=[w],se.gb=[se.gb];e:{var de=h,_e=w,he=se.gb;if(t(f!=null),t(_e!=null),t(he!=null),he[0]=0,12<=_e[0]&&!e(f,de[0],"RIFF")){if(e(f,de[0]+8,"WEBP")){he=3;break e}var xe=ye(f,de[0]+4);if(12>xe||4294967286<xe){he=3;break e}if(Q&&xe>_e[0]-8){he=7;break e}he[0]=xe,de[0]+=12,_e[0]-=12}he=0}if(he!=0)return he;for(xe=0<se.gb[0],w=w[0];;){e:{var ke=f;_e=h,he=w;var Le=K,Te=ae,Ze=de=[0];if((Qe=pe=[pe])[0]=0,8>he[0])he=7;else{if(!e(ke,_e[0],"VP8X")){if(ye(ke,_e[0]+4)!=10){he=3;break e}if(18>he[0]){he=7;break e}var Ue=ye(ke,_e[0]+8),bt=1+je(ke,_e[0]+12);if(2147483648<=bt*(ke=1+je(ke,_e[0]+15))){he=3;break e}Ze!=null&&(Ze[0]=Ue),Le!=null&&(Le[0]=bt),Te!=null&&(Te[0]=ke),_e[0]+=18,he[0]-=18,Qe[0]=1}he=0}}if(pe=pe[0],de=de[0],he!=0)return he;if(_e=!!(2&de),!xe&&pe)return 3;if(D!=null&&(D[0]=!!(16&de)),$!=null&&($[0]=_e),V!=null&&(V[0]=0),$=K[0],de=ae[0],pe&&_e&&W==null){he=0;break}if(4>w){he=7;break}if(xe&&pe||!xe&&!pe&&!e(f,h[0],"ALPH")){w=[w],se.na=[se.na],se.P=[se.P],se.Sa=[se.Sa];e:{Ue=f,he=h,xe=w;var Qe=se.gb;Le=se.na,Te=se.P,Ze=se.Sa,bt=22,t(Ue!=null),t(xe!=null),ke=he[0];var Pt=xe[0];for(t(Le!=null),t(Ze!=null),Le[0]=null,Te[0]=null,Ze[0]=0;;){if(he[0]=ke,xe[0]=Pt,8>Pt){he=7;break e}var jr=ye(Ue,ke+4);if(4294967286<jr){he=3;break e}var xt=8+jr+1&-2;if(bt+=xt,0<Qe&&bt>Qe){he=3;break e}if(!e(Ue,ke,"VP8 ")||!e(Ue,ke,"VP8L")){he=0;break e}if(Pt[0]<xt){he=7;break e}e(Ue,ke,"ALPH")||(Le[0]=Ue,Te[0]=ke+8,Ze[0]=jr),ke+=xt,Pt-=xt}}if(w=w[0],se.na=se.na[0],se.P=se.P[0],se.Sa=se.Sa[0],he!=0)break}w=[w],se.Ja=[se.Ja],se.xa=[se.xa];e:if(Qe=f,he=h,xe=w,Le=se.gb[0],Te=se.Ja,Ze=se.xa,Ue=he[0],ke=!e(Qe,Ue,"VP8 "),bt=!e(Qe,Ue,"VP8L"),t(Qe!=null),t(xe!=null),t(Te!=null),t(Ze!=null),8>xe[0])he=7;else{if(ke||bt){if(Qe=ye(Qe,Ue+4),12<=Le&&Qe>Le-12){he=3;break e}if(Q&&Qe>xe[0]-8){he=7;break e}Te[0]=Qe,he[0]+=8,xe[0]-=8,Ze[0]=bt}else Ze[0]=5<=xe[0]&&Qe[Ue+0]==47&&!(Qe[Ue+4]>>5),Te[0]=xe[0];he=0}if(w=w[0],se.Ja=se.Ja[0],se.xa=se.xa[0],h=h[0],he!=0)break;if(4294967286<se.Ja)return 3;if(V==null||_e||(V[0]=se.xa?2:1),$=[$],de=[de],se.xa){if(5>w){he=7;break}V=$,Q=de,_e=D,f==null||5>w?f=0:5<=w&&f[h+0]==47&&!(f[h+4]>>5)?(xe=[0],Qe=[0],Le=[0],re(Te=new U,f,h,w),ca(Te,xe,Qe,Le)?(V!=null&&(V[0]=xe[0]),Q!=null&&(Q[0]=Qe[0]),_e!=null&&(_e[0]=Le[0]),f=1):f=0):f=0}else{if(10>w){he=7;break}V=de,f==null||10>w||!Nf(f,h+3,w-3)?f=0:(Q=f[h+0]|f[h+1]<<8|f[h+2]<<16,_e=16383&(f[h+7]<<8|f[h+6]),f=16383&(f[h+9]<<8|f[h+8]),1&Q||3<(Q>>1&7)||!(Q>>4&1)||Q>>5>=se.Ja||!_e||!f?f=0:($&&($[0]=_e),V&&(V[0]=f),f=1))}if(!f||($=$[0],de=de[0],pe&&(K[0]!=$||ae[0]!=de)))return 3;W!=null&&(W[0]=se,W.offset=h-W.w,t(4294967286>h-W.w),t(W.offset==W.ha-w));break}return he==0||he==7&&pe&&W==null?(D!=null&&(D[0]|=se.na!=null&&0<se.na.length),P!=null&&(P[0]=$),C!=null&&(C[0]=de),0):he}function Rl(f,h,w){var P=h.width,C=h.height,D=0,$=0,V=P,W=C;if(h.Da=f!=null&&0<f.Da,h.Da&&(V=f.cd,W=f.bd,D=f.v,$=f.j,11>w||(D&=-2,$&=-2),0>D||0>$||0>=V||0>=W||D+V>P||$+W>C))return 0;if(h.v=D,h.j=$,h.va=D+V,h.o=$+W,h.U=V,h.T=W,h.da=f!=null&&0<f.da,h.da){if(!Me(V,W,w=[f.ib],D=[f.hb]))return 0;h.ib=w[0],h.hb=D[0]}return h.ob=f!=null&&f.ob,h.Kb=f==null||!f.Sd,h.da&&(h.ob=h.ib<3*P/4&&h.hb<3*C/4,h.Kb=0),1}function jl(f){if(f==null)return 2;if(11>f.S){var h=f.f.RGBA;h.fb+=(f.height-1)*h.A,h.A=-h.A}else h=f.f.kb,f=f.height,h.O+=(f-1)*h.fa,h.fa=-h.fa,h.N+=(f-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(f-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(f-1)*h.lb,h.lb=-h.lb);return 0}function Wa(f,h,w,P){if(P==null||0>=f||0>=h)return 2;if(w!=null){if(w.Da){var C=w.cd,D=w.bd,$=-2&w.v,V=-2&w.j;if(0>$||0>V||0>=C||0>=D||$+C>f||V+D>h)return 2;f=C,h=D}if(w.da){if(!Me(f,h,C=[w.ib],D=[w.hb]))return 2;f=C[0],h=D[0]}}P.width=f,P.height=h;e:{var W=P.width,K=P.height;if(f=P.S,0>=W||0>=K||!(f>=Hf&&13>f))f=2;else{if(0>=P.Rd&&P.sd==null){$=D=C=h=0;var ae=(V=W*Y_[f])*K;if(11>f||(D=(K+1)/2*(h=(W+1)/2),f==12&&($=(C=W)*K)),(K=a(ae+2*D+$))==null){f=1;break e}P.sd=K,11>f?((W=P.f.RGBA).eb=K,W.fb=0,W.A=V,W.size=ae):((W=P.f.kb).y=K,W.O=0,W.fa=V,W.Fd=ae,W.f=K,W.N=0+ae,W.Ab=h,W.Cd=D,W.ea=K,W.W=0+ae+D,W.Db=h,W.Ed=D,f==12&&(W.F=K,W.J=0+ae+2*D),W.Tc=$,W.lb=C)}if(h=1,C=P.S,D=P.width,$=P.height,C>=Hf&&13>C)if(11>C)f=P.f.RGBA,h&=(V=Math.abs(f.A))*($-1)+D<=f.size,h&=V>=D*Y_[C],h&=f.eb!=null;else{f=P.f.kb,V=(D+1)/2,ae=($+1)/2,W=Math.abs(f.fa),K=Math.abs(f.Ab);var pe=Math.abs(f.Db),Q=Math.abs(f.lb),se=Q*($-1)+D;h&=W*($-1)+D<=f.Fd,h&=K*(ae-1)+V<=f.Cd,h=(h&=pe*(ae-1)+V<=f.Ed)&W>=D&K>=V&pe>=V,h&=f.y!=null,h&=f.f!=null,h&=f.ea!=null,C==12&&(h&=Q>=D,h&=se<=f.Tc,h&=f.F!=null)}else h=0;f=h?0:2}}return f!=0||w!=null&&w.fd&&(f=jl(P)),f}var ts=64,Rn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jn=24,qa=32,va=8,Ha=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ne("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(f){return f},M.Predictor2=function(f,h,w){return h[w+0]},M.Predictor3=function(f,h,w){return h[w+1]},M.Predictor4=function(f,h,w){return h[w-1]},M.Predictor5=function(f,h,w){return Ge(Ge(f,h[w+1]),h[w+0])},M.Predictor6=function(f,h,w){return Ge(f,h[w-1])},M.Predictor7=function(f,h,w){return Ge(f,h[w+0])},M.Predictor8=function(f,h,w){return Ge(h[w-1],h[w+0])},M.Predictor9=function(f,h,w){return Ge(h[w+0],h[w+1])},M.Predictor10=function(f,h,w){return Ge(Ge(f,h[w-1]),Ge(h[w+0],h[w+1]))},M.Predictor11=function(f,h,w){var P=h[w+0];return 0>=dt(P>>24&255,f>>24&255,(h=h[w-1])>>24&255)+dt(P>>16&255,f>>16&255,h>>16&255)+dt(P>>8&255,f>>8&255,h>>8&255)+dt(255&P,255&f,255&h)?P:f},M.Predictor12=function(f,h,w){var P=h[w+0];return(yt((f>>24&255)+(P>>24&255)-((h=h[w-1])>>24&255))<<24|yt((f>>16&255)+(P>>16&255)-(h>>16&255))<<16|yt((f>>8&255)+(P>>8&255)-(h>>8&255))<<8|yt((255&f)+(255&P)-(255&h)))>>>0},M.Predictor13=function(f,h,w){var P=h[w-1];return(ot((f=Ge(f,h[w+0]))>>24&255,P>>24&255)<<24|ot(f>>16&255,P>>16&255)<<16|ot(f>>8&255,P>>8&255)<<8|ot(255&f,255&P))>>>0};var Il=M.PredictorAdd0;M.PredictorAdd1=At,Ne("Predictor2","PredictorAdd2"),Ne("Predictor3","PredictorAdd3"),Ne("Predictor4","PredictorAdd4"),Ne("Predictor5","PredictorAdd5"),Ne("Predictor6","PredictorAdd6"),Ne("Predictor7","PredictorAdd7"),Ne("Predictor8","PredictorAdd8"),Ne("Predictor9","PredictorAdd9"),Ne("Predictor10","PredictorAdd10"),Ne("Predictor11","PredictorAdd11"),Ne("Predictor12","PredictorAdd12"),Ne("Predictor13","PredictorAdd13");var Zs=M.PredictorAdd2;Xe("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Xe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var yr,zf=M.ColorIndexInverseTransform,$i=M.MapARGB,Ui=M.VP8LColorIndexInverseTransformAlpha,Ml=M.MapAlpha,Dl=M.VP8LPredictorsAdd=[];Dl.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var Fl,Bl,Ga,Ka,Qa,rs,Ya,ns,ri,Vi,Mt,qt,_r,Rr,ma,$l,ec,Wf,P_,T_,E_,C_,L_,A_,Ul,O_,N_,R_,j_=a(511),I_=a(2041),M_=a(225),D_=a(767),F_=0,Wv=I_,qf=M_,In=D_,ni=j_,Hf=0,Gf=1,B_=2,Kf=3,Qf=4,qv=5,$_=6,Hv=7,Gv=8,Yf=9,Kv=10,nL=[2,3,7],iL=[3,3,11],U_=[280,256,256,256,40],aL=[0,1,1,1,0],oL=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sL=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cL=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],lL=8,Qv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Yv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vl=null,uL=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],fL=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],V_=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dL=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hL=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pL=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vL=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ja=[],yi=[],ga=[],mL=1,z_=2,Xa=[],ii=[];wn("UpsampleRgbLinePair",Yo,3),wn("UpsampleBgrLinePair",Jo,3),wn("UpsampleRgbaLinePair",Nl,4),wn("UpsampleBgraLinePair",Ol,4),wn("UpsampleArgbLinePair",Zo,4),wn("UpsampleRgba4444LinePair",Xo,2),wn("UpsampleRgb565LinePair",Xr,2);var gL=M.UpsampleRgbLinePair,yL=M.UpsampleBgrLinePair,W_=M.UpsampleRgbaLinePair,q_=M.UpsampleBgraLinePair,H_=M.UpsampleArgbLinePair,G_=M.UpsampleRgba4444LinePair,_L=M.UpsampleRgb565LinePair,Jf=16,Xf=1<<Jf-1,zl=-227,Jv=482,wL=6,K_=0,bL=a(256),xL=a(256),SL=a(256),kL=a(256),PL=a(Jv-zl),TL=a(Jv-zl);pa("YuvToRgbRow",Yo,3),pa("YuvToBgrRow",Jo,3),pa("YuvToRgbaRow",Nl,4),pa("YuvToBgraRow",Ol,4),pa("YuvToArgbRow",Zo,4),pa("YuvToRgba4444Row",Xo,2),pa("YuvToRgb565Row",Xr,2);var Q_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Zf=[0,2,8],EL=[8,7,6,4,4,2,2,2,1,1,1,1],CL=1;this.WebPDecodeRGBA=function(f,h,w,P,C){var D=Gf,$=new le,V=new Wt;$.ba=V,V.S=D,V.width=[V.width],V.height=[V.height];var W=V.width,K=V.height,ae=new pt;if(ae==null||f==null)var pe=2;else t(ae!=null),pe=es(f,h,w,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(pe!=0?W=0:(W!=null&&(W[0]=ae.width[0]),K!=null&&(K[0]=ae.height[0]),W=1),W){V.width=V.width[0],V.height=V.height[0],P!=null&&(P[0]=V.width),C!=null&&(C[0]=V.height);e:{if(P=new Hs,(C=new Se).data=f,C.w=h,C.ha=w,C.kd=1,h=[0],t(C!=null),((f=es(C.data,C.w,C.ha,null,null,null,h,null,C))==0||f==7)&&h[0]&&(f=4),(h=f)==0){if(t($!=null),P.data=C.data,P.w=C.w+C.offset,P.ha=C.ha-C.offset,P.put=at,P.ac=Mi,P.bc=sa,P.ma=$,C.xa){if((f=Do())==null){$=1;break e}if(function(Q,se){var de=[0],_e=[0],he=[0];t:for(;;){if(Q==null)return 0;if(se==null)return Q.a=2,0;if(Q.l=se,Q.a=0,re(Q.m,se.data,se.w,se.ha),!ca(Q.m,de,_e,he)){Q.a=3;break t}if(Q.xb=z_,se.width=de[0],se.height=_e[0],!Fi(de[0],_e[0],1,Q,null))break t;return 1}return t(Q.a!=0),0}(f,P)){if(P=(h=Wa(P.width,P.height,$.Oa,$.ba))==0){t:{P=f;r:for(;;){if(P==null){P=0;break t}if(t(P.s.yc!=null),t(P.s.Ya!=null),t(0<P.s.Wb),t((w=P.l)!=null),t((C=w.ma)!=null),P.xb!=0){if(P.ca=C.ba,P.tb=C.tb,t(P.ca!=null),!Rl(C.Oa,w,Kf)){P.a=2;break r}if(!Fo(P,w.width)||w.da)break r;if((w.da||Fe(P.ca.S))&&ei(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&ei()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!J(P.s.vb,P.s.Wa.Xa)){P.a=1;break r}P.xb=0}if(!mi(P,P.V,P.Ba,P.c,P.i,w.o,$a))break r;C.Dc=P.Ma,P=1;break t}t(P.a!=0),P=0}P=!P}P&&(h=f.a)}else h=f.a}else{if((f=new Lv)==null){$=1;break e}if(f.Fa=C.na,f.P=C.P,f.qc=C.Sa,Rf(f,P)){if((h=Wa(P.width,P.height,$.Oa,$.ba))==0){if(f.Aa=0,w=$.Oa,t((C=f)!=null),w!=null){if(0<(W=0>(W=w.Md)?0:100<W?255:255*W/100)){for(K=ae=0;4>K;++K)12>(pe=C.pb[K]).lc&&(pe.ia=W*EL[0>pe.lc?0:pe.lc]>>3),ae|=pe.ia;ae&&(alert("todo:VP8InitRandom"),C.ia=1)}C.Ga=w.Id,100<C.Ga?C.Ga=100:0>C.Ga&&(C.Ga=0)}(function(Q,se){if(Q==null)return 0;if(se==null)return Tr(Q,2,"NULL VP8Io parameter in VP8Decode().");if(!Q.cb&&!Rf(Q,se))return 0;if(t(Q.cb),se.ac==null||se.ac(se)){se.ob&&(Q.L=0);var de=Zf[Q.L];if(Q.L==2?(Q.yb=0,Q.zb=0):(Q.yb=se.v-de>>4,Q.zb=se.j-de>>4,0>Q.yb&&(Q.yb=0),0>Q.zb&&(Q.zb=0)),Q.Va=se.o+15+de>>4,Q.Hb=se.va+15+de>>4,Q.Hb>Q.za&&(Q.Hb=Q.za),Q.Va>Q.Ub&&(Q.Va=Q.Ub),0<Q.L){var _e=Q.ed;for(de=0;4>de;++de){var he;if(Q.Qa.Cb){var xe=Q.Qa.Lb[de];Q.Qa.Fb||(xe+=_e.Tb)}else xe=_e.Tb;for(he=0;1>=he;++he){var ke=Q.gd[de][he],Le=xe;if(_e.Pc&&(Le+=_e.vd[0],he&&(Le+=_e.od[0])),0<(Le=0>Le?0:63<Le?63:Le)){var Te=Le;0<_e.wb&&(Te=4<_e.wb?Te>>2:Te>>1)>9-_e.wb&&(Te=9-_e.wb),1>Te&&(Te=1),ke.dd=Te,ke.tc=2*Le+Te,ke.ld=40<=Le?2:15<=Le?1:0}else ke.tc=0;ke.La=he}}}de=0}else Tr(Q,6,"Frame setup failed"),de=Q.a;if(de=de==0){if(de){Q.$c=0,0<Q.Aa||(Q.Ic=CL);t:{de=Q.Ic,_e=4*(Te=Q.za);var Ze=32*Te,Ue=Te+1,bt=0<Q.L?Te*(0<Q.Aa?2:1):0,Qe=(Q.Aa==2?2:1)*Te;if((ke=_e+832+(he=3*(16*de+Zf[Q.L])/2*Ze)+(xe=Q.Fa!=null&&0<Q.Fa.length?Q.Kc.c*Q.Kc.i:0))!=ke)de=0;else{if(ke>Q.Vb){if(Q.Vb=0,Q.Ec=a(ke),Q.Fc=0,Q.Ec==null){de=Tr(Q,1,"no memory during frame initialization.");break t}Q.Vb=ke}ke=Q.Ec,Le=Q.Fc,Q.Ac=ke,Q.Bc=Le,Le+=_e,Q.Gd=o(Ze,Af),Q.Hd=0,Q.rb=o(Ue+1,wl),Q.sb=1,Q.wa=bt?o(bt,Zn):null,Q.Y=0,Q.D.Nb=0,Q.D.wa=Q.wa,Q.D.Y=Q.Y,0<Q.Aa&&(Q.D.Y+=Te),t(!0),Q.oc=ke,Q.pc=Le,Le+=832,Q.ya=o(Qe,bl),Q.aa=0,Q.D.ya=Q.ya,Q.D.aa=Q.aa,Q.Aa==2&&(Q.D.aa+=Te),Q.R=16*Te,Q.B=8*Te,Te=(Ze=Zf[Q.L])*Q.R,Ze=Ze/2*Q.B,Q.sa=ke,Q.ta=Le+Te,Q.qa=Q.sa,Q.ra=Q.ta+16*de*Q.R+Ze,Q.Ha=Q.qa,Q.Ia=Q.ra+8*de*Q.B+Ze,Q.$c=0,Le+=he,Q.mb=xe?ke:null,Q.nb=xe?Le:null,t(Le+xe<=Q.Fc+Q.Vb),Bo(Q),i(Q.Ac,Q.Bc,0,_e),de=1}}if(de){if(se.ka=0,se.y=Q.sa,se.O=Q.ta,se.f=Q.qa,se.N=Q.ra,se.ea=Q.Ha,se.Vd=Q.Ia,se.fa=Q.R,se.Rc=Q.B,se.F=null,se.J=0,!F_){for(de=-255;255>=de;++de)j_[255+de]=0>de?-de:de;for(de=-1020;1020>=de;++de)I_[1020+de]=-128>de?-128:127<de?127:de;for(de=-112;112>=de;++de)M_[112+de]=-16>de?-16:15<de?15:de;for(de=-255;510>=de;++de)D_[255+de]=0>de?0:255<de?255:de;F_=1}Ya=If,ns=Ov,Vi=Nv,Mt=Bi,qt=jf,ri=Av,_r=Ff,Rr=Bf,ma=g,$l=E,ec=Go,Wf=$f,P_=Y,T_=te,E_=Al,C_=Ho,L_=Mf,A_=Df,yi[0]=Bv,yi[1]=Sl,yi[2]=Dv,yi[3]=Fv,yi[4]=$v,yi[5]=fa,yi[6]=ua,yi[7]=Uv,yi[8]=Gs,yi[9]=Vv,Ja[0]=Va,Ja[1]=jv,Ja[2]=Iv,Ja[3]=kl,Ja[4]=Mv,Ja[5]=Vo,Ja[6]=Pl,ga[0]=Qs,ga[1]=Rv,ga[2]=Tl,ga[3]=zo,ga[4]=El,ga[5]=zv,ga[6]=Cl,de=1}else de=0}de&&(de=function(Pt,jr){for(Pt.M=0;Pt.M<Pt.Va;++Pt.M){var xt,Ye=Pt.Jc[Pt.M&Pt.Xb],Re=Pt.m,wr=Pt;for(xt=0;xt<wr.za;++xt){var _t=Re,Et=wr,Jt=Et.Ac,qr=Et.Bc+4*xt,un=Et.zc,ur=Et.ya[Et.aa+xt];if(Et.Qa.Bb?ur.$b=be(_t,Et.Pa.jb[0])?2+be(_t,Et.Pa.jb[2]):be(_t,Et.Pa.jb[1]):ur.$b=0,Et.kc&&(ur.Ad=be(_t,Et.Bd)),ur.Za=!be(_t,145)+0,ur.Za){var Zr=ur.Ob,fn=0;for(Et=0;4>Et;++Et){var Ir,Ct=un[0+Et];for(Ir=0;4>Ir;++Ir){Ct=hL[Jt[qr+Ir]][Ct];for(var Ft=V_[be(_t,Ct[0])];0<Ft;)Ft=V_[2*Ft+be(_t,Ct[Ft])];Ct=-Ft,Jt[qr+Ir]=Ct}n(Zr,fn,Jt,qr,4),fn+=4,un[0+Et]=Ct}}else Ct=be(_t,156)?be(_t,128)?1:3:be(_t,163)?2:0,ur.Ob[0]=Ct,i(Jt,qr,Ct,4),i(un,0,Ct,4);ur.Dd=be(_t,142)?be(_t,114)?be(_t,183)?1:3:2:0}if(wr.m.Ka)return Tr(Pt,7,"Premature end-of-partition0 encountered.");for(;Pt.ja<Pt.za;++Pt.ja){if(wr=Ye,_t=(Re=Pt).rb[Re.sb-1],Jt=Re.rb[Re.sb+Re.ja],xt=Re.ya[Re.aa+Re.ja],qr=Re.kc?xt.Ad:0)_t.la=Jt.la=0,xt.Za||(_t.Na=Jt.Na=0),xt.Hc=0,xt.Gc=0,xt.ia=0;else{var fr,Bt;if(_t=Jt,Jt=wr,qr=Re.Pa.Xc,un=Re.ya[Re.aa+Re.ja],ur=Re.pb[un.$b],Et=un.ad,Zr=0,fn=Re.rb[Re.sb-1],Ct=Ir=0,i(Et,Zr,0,384),un.Za)var Hr=0,_i=qr[3];else{Ft=a(16);var br=_t.Na+fn.Na;if(br=Vl(Jt,qr[1],br,ur.Eb,0,Ft,0),_t.Na=fn.Na=(0<br)+0,1<br)Ya(Ft,0,Et,Zr);else{var bn=Ft[0]+3>>3;for(Ft=0;256>Ft;Ft+=16)Et[Zr+Ft]=bn}Hr=1,_i=qr[0]}var Ht=15&_t.la,Mr=15&fn.la;for(Ft=0;4>Ft;++Ft){var Mn=1&Mr;for(bn=Bt=0;4>bn;++bn)Ht=Ht>>1|(Mn=(br=Vl(Jt,_i,br=Mn+(1&Ht),ur.Sc,Hr,Et,Zr))>Hr)<<7,Bt=Bt<<2|(3<br?3:1<br?2:Et[Zr+0]!=0),Zr+=16;Ht>>=4,Mr=Mr>>1|Mn<<7,Ir=(Ir<<8|Bt)>>>0}for(_i=Ht,Hr=Mr>>4,fr=0;4>fr;fr+=2){for(Bt=0,Ht=_t.la>>4+fr,Mr=fn.la>>4+fr,Ft=0;2>Ft;++Ft){for(Mn=1&Mr,bn=0;2>bn;++bn)br=Mn+(1&Ht),Ht=Ht>>1|(Mn=0<(br=Vl(Jt,qr[2],br,ur.Qc,0,Et,Zr)))<<3,Bt=Bt<<2|(3<br?3:1<br?2:Et[Zr+0]!=0),Zr+=16;Ht>>=2,Mr=Mr>>1|Mn<<5}Ct|=Bt<<4*fr,_i|=Ht<<4<<fr,Hr|=(240&Mr)<<fr}_t.la=_i,fn.la=Hr,un.Hc=Ir,un.Gc=Ct,un.ia=43690&Ct?0:ur.ia,qr=!(Ir|Ct)}if(0<Re.L&&(Re.wa[Re.Y+Re.ja]=Re.gd[xt.$b][xt.Za],Re.wa[Re.Y+Re.ja].La|=!qr),wr.Ka)return Tr(Pt,7,"Premature end-of-file encountered.")}if(Bo(Pt),Re=jr,wr=1,xt=(Ye=Pt).D,_t=0<Ye.L&&Ye.M>=Ye.zb&&Ye.M<=Ye.Va,Ye.Aa==0)t:{if(xt.M=Ye.M,xt.uc=_t,ti(Ye,xt),wr=1,xt=(Bt=Ye.D).Nb,_t=(Ct=Zf[Ye.L])*Ye.R,Jt=Ct/2*Ye.B,Ft=16*xt*Ye.R,bn=8*xt*Ye.B,qr=Ye.sa,un=Ye.ta-_t+Ft,ur=Ye.qa,Et=Ye.ra-Jt+bn,Zr=Ye.Ha,fn=Ye.Ia-Jt+bn,Mr=(Ht=Bt.M)==0,Ir=Ht>=Ye.Va-1,Ye.Aa==2&&ti(Ye,Bt),Bt.uc)for(Mn=(br=Ye).D.M,t(br.D.uc),Bt=br.yb;Bt<br.Hb;++Bt){Hr=Bt,_i=Mn;var dn=(Dn=(Gr=br).D).Nb;fr=Gr.R;var Dn=Dn.wa[Dn.Y+Hr],Fn=Gr.sa,xn=Gr.ta+16*dn*fr+16*Hr,Bn=Dn.dd,Qt=Dn.tc;if(Qt!=0)if(t(3<=Qt),Gr.L==1)0<Hr&&C_(Fn,xn,fr,Qt+4),Dn.La&&A_(Fn,xn,fr,Qt),0<_i&&E_(Fn,xn,fr,Qt+4),Dn.La&&L_(Fn,xn,fr,Qt);else{var $n=Gr.B,wi=Gr.qa,is=Gr.ra+8*dn*$n+8*Hr,ya=Gr.Ha,Gr=Gr.Ia+8*dn*$n+8*Hr;dn=Dn.ld,0<Hr&&(Rr(Fn,xn,fr,Qt+4,Bn,dn),$l(wi,is,ya,Gr,$n,Qt+4,Bn,dn)),Dn.La&&(Wf(Fn,xn,fr,Qt,Bn,dn),T_(wi,is,ya,Gr,$n,Qt,Bn,dn)),0<_i&&(_r(Fn,xn,fr,Qt+4,Bn,dn),ma(wi,is,ya,Gr,$n,Qt+4,Bn,dn)),Dn.La&&(ec(Fn,xn,fr,Qt,Bn,dn),P_(wi,is,ya,Gr,$n,Qt,Bn,dn))}}if(Ye.ia&&alert("todo:DitherRow"),Re.put!=null){if(Bt=16*Ht,Ht=16*(Ht+1),Mr?(Re.y=Ye.sa,Re.O=Ye.ta+Ft,Re.f=Ye.qa,Re.N=Ye.ra+bn,Re.ea=Ye.Ha,Re.W=Ye.Ia+bn):(Bt-=Ct,Re.y=qr,Re.O=un,Re.f=ur,Re.N=Et,Re.ea=Zr,Re.W=fn),Ir||(Ht-=Ct),Ht>Re.o&&(Ht=Re.o),Re.F=null,Re.J=null,Ye.Fa!=null&&0<Ye.Fa.length&&Bt<Ht&&(Re.J=Er(Ye,Re,Bt,Ht-Bt),Re.F=Ye.mb,Re.F==null&&Re.F.length==0)){wr=Tr(Ye,3,"Could not decode alpha data.");break t}Bt<Re.j&&(Ct=Re.j-Bt,Bt=Re.j,t(!(1&Ct)),Re.O+=Ye.R*Ct,Re.N+=Ye.B*(Ct>>1),Re.W+=Ye.B*(Ct>>1),Re.F!=null&&(Re.J+=Re.width*Ct)),Bt<Ht&&(Re.O+=Re.v,Re.N+=Re.v>>1,Re.W+=Re.v>>1,Re.F!=null&&(Re.J+=Re.v),Re.ka=Bt-Re.j,Re.U=Re.va-Re.v,Re.T=Ht-Bt,wr=Re.put(Re))}xt+1!=Ye.Ic||Ir||(n(Ye.sa,Ye.ta-_t,qr,un+16*Ye.R,_t),n(Ye.qa,Ye.ra-Jt,ur,Et+8*Ye.B,Jt),n(Ye.Ha,Ye.Ia-Jt,Zr,fn+8*Ye.B,Jt))}if(!wr)return Tr(Pt,6,"Output aborted.")}return 1}(Q,se)),se.bc!=null&&se.bc(se),de&=1}return de?(Q.cb=0,de):0})(f,P)||(h=f.a)}}else h=f.a}h==0&&$.Oa!=null&&$.Oa.fd&&(h=jl($.ba))}$=h}D=$!=0?null:11>D?V.f.RGBA.eb:V.f.kb.y}else D=null;return D};var Y_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(M,q){for(var O="",L=0;L<4;L++)O+=String.fromCharCode(M[q++]);return O}function u(M,q){return M[q+0]|M[q+1]<<8}function d(M,q){return(M[q+0]|M[q+1]<<8|M[q+2]<<16)>>>0}function v(M,q){return(M[q+0]|M[q+1]<<8|M[q+2]<<16|M[q+3]<<24)>>>0}new l;var p=[0],y=[0],b=[],S=new l,_=r,x=function(M,q){var O={},L=0,z=!1,I=0,X=0;if(O.frames=[],!function(N,U){for(var G=0;G<4;G++)if(N[U+G]!="RIFF".charCodeAt(G))return!0;return!1}(M,q)){for(v(M,q+=4),q+=8;q<M.length;){var Z=c(M,q),oe=v(M,q+=4);q+=4;var H=oe+(1&oe);switch(Z){case"VP8 ":case"VP8L":O.frames[L]===void 0&&(O.frames[L]={}),(ne=O.frames[L]).src_off=z?X:q-8,ne.src_size=I+oe+8,L++,z&&(z=!1,I=0,X=0);break;case"VP8X":(ne=O.header={}).feature_flags=M[q];var re=q+4;ne.canvas_width=1+d(M,re),re+=3,ne.canvas_height=1+d(M,re),re+=3;break;case"ALPH":z=!0,I=H+8,X=q-8;break;case"ANIM":(ne=O.header).bgcolor=v(M,q),re=q+4,ne.loop_count=u(M,re),re+=2;break;case"ANMF":var ue,ne;(ne=O.frames[L]={}).offset_x=2*d(M,q),q+=3,ne.offset_y=2*d(M,q),q+=3,ne.width=1+d(M,q),q+=3,ne.height=1+d(M,q),q+=3,ne.duration=d(M,q),q+=3,ue=M[q++],ne.dispose=1&ue,ne.blend=ue>>1&1}Z!="ANMF"&&(q+=H)}return O}}(_,0);x.response=_,x.rgbaoutput=!0,x.dataurl=!1;var k=x.header?x.header:null,T=x.frames?x.frames:null;if(k){k.loop_counter=k.loop_count,p=[k.canvas_height],y=[k.canvas_width];for(var R=0;R<T.length&&T[R].blend!=0;R++);}var B=T[0],j=S.WebPDecodeRGBA(_,B.src_off,B.src_size,y,p);B.rgba=j,B.imgwidth=y[0],B.imgheight=p[0];for(var F=0;F<y[0]*p[0]*4;F++)b[F]=j[F];return this.width=y,this.height=p,this.data=b,this}(function(r){var t,e,n,i,a,o,s,l,c,u=function(N){return N=N||{},this.isStrokeTransparent=N.isStrokeTransparent||!1,this.strokeOpacity=N.strokeOpacity||1,this.strokeStyle=N.strokeStyle||"#000000",this.fillStyle=N.fillStyle||"#000000",this.isFillTransparent=N.isFillTransparent||!1,this.fillOpacity=N.fillOpacity||1,this.font=N.font||"10px sans-serif",this.textBaseline=N.textBaseline||"alphabetic",this.textAlign=N.textAlign||"left",this.lineWidth=N.lineWidth||1,this.lineJoin=N.lineJoin||"miter",this.lineCap=N.lineCap||"butt",this.path=N.path||[],this.transform=N.transform!==void 0?N.transform.clone():new l,this.globalCompositeOperation=N.globalCompositeOperation||"normal",this.globalAlpha=N.globalAlpha||1,this.clip_path=N.clip_path||[],this.currentPoint=N.currentPoint||new o,this.miterLimit=N.miterLimit||10,this.lastPoint=N.lastPoint||new o,this.lineDashOffset=N.lineDashOffset||0,this.lineDash=N.lineDash||[],this.margin=N.margin||[0,0,0,0],this.prevPageLastElemOffset=N.prevPageLastElemOffset||0,this.ignoreClearRect=typeof N.ignoreClearRect!="boolean"||N.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,e=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(N){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=N;Object.defineProperty(this,"pdf",{get:function(){return U}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(ye){G=!!ye}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(ye){ee=!!ye}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(ye){isNaN(ye)||(ie=ye)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(ye){isNaN(ye)||(ce=ye)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ye){var J;typeof ye=="number"?J=[ye,ye,ye,ye]:((J=new Array(4))[0]=ye[0],J[1]=ye.length>=2?ye[1]:J[0],J[2]=ye.length>=3?ye[2]:J[0],J[3]=ye.length>=4?ye[3]:J[1]),c.margin=J}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(ye){ge=ye}});var ve=0;Object.defineProperty(this,"lastBreak",{get:function(){return ve},set:function(ye){ve=ye}});var be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return be},set:function(ye){be=ye}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ye){ye instanceof u&&(c=ye)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ye){c.path=ye}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(ye){Ce=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var J;J=v(ye),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var J=v(ye);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Ie=null,je=null;Object.defineProperty(this,"fontFaces",{get:function(){return je},set:function(ye){Ie=null,je=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var J;if(this.ctx.font=ye,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var we=J[1];J[2];var Oe=J[3],Me=J[4];J[5];var Pe=J[6],De=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor(De==="px"?parseFloat(Me)*this.pdf.internal.scaleFactor:De==="em"?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var Ne=function(it){var Xe,Ot,St=[],We=it.trim();if(We==="")return Ug;if(We in Bx)return[Bx[We]];for(;We!=="";){switch(Ot=null,Xe=(We=Ux(We)).charAt(0)){case'"':case"'":Ot=hee(We.substring(1),Xe);break;default:Ot=pee(We)}if(Ot===null||(St.push(Ot[0]),(We=Ux(Ot[1]))!==""&&We.charAt(0)!==","))return Ug;We=We.replace(/^,/,"")}return St}(Pe);if(this.fontFaces){var ct=function(it,Xe){if(Ie===null){var Ot=function(St){var We=[];return Object.keys(St).forEach(function(st){St[st].forEach(function(Nt){var He=null;switch(Nt){case"bold":He={family:st,weight:"bold"};break;case"italic":He={family:st,style:"italic"};break;case"bolditalic":He={family:st,weight:"bold",style:"italic"};break;case"":case"normal":He={family:st}}He!==null&&(He.ref={name:st,style:Nt},We.push(He))})}),We}(it.getFontList());Ie=function(St){for(var We={},st=0;st<St.length;++st){var Nt=$g(St[st]),He=Nt.family,ht=Nt.stretch,Fe=Nt.style,vr=Nt.weight;We[He]=We[He]||{},We[He][ht]=We[He][ht]||{},We[He][ht][Fe]=We[He][ht][Fe]||{},We[He][ht][Fe][vr]=Nt}return We}(Ot.concat(Xe))}return Ie}(this.pdf,this.fontFaces),Ge=Ne.map(function(it){return{family:it,stretch:"normal",weight:Oe,style:we}}),yt=function(it,Xe,Ot){for(var St=(Ot=Ot||{}).defaultFontFamily||"times",We=Object.assign({},dee,Ot.genericFontFamilies||{}),st=null,Nt=null,He=0;He<Xe.length;++He)if(We[(st=$g(Xe[He])).family]&&(st.family=We[st.family]),it.hasOwnProperty(st.family)){Nt=it[st.family];break}if(!(Nt=Nt||it[St]))throw new Error("Could not find a font-family for the rule '"+$x(st)+"' and default family '"+St+"'.");if(Nt=function(ht,Fe){if(Fe[ht])return Fe[ht];var vr=Ey[ht],mr=vr<=Ey.normal?-1:1,Wt=Fx(Fe,XC,vr,mr);if(!Wt)throw new Error("Could not find a matching font-stretch value for "+ht);return Wt}(st.stretch,Nt),Nt=function(ht,Fe){if(Fe[ht])return Fe[ht];for(var vr=JC[ht],mr=0;mr<vr.length;++mr)if(Fe[vr[mr]])return Fe[vr[mr]];throw new Error("Could not find a matching font-style for "+ht)}(st.style,Nt),!(Nt=function(ht,Fe){if(Fe[ht])return Fe[ht];if(ht===400&&Fe[500])return Fe[500];if(ht===500&&Fe[400])return Fe[400];var vr=fee[ht],mr=Fx(Fe,ZC,vr,ht<400?-1:1);if(!mr)throw new Error("Could not find a matching font-weight for value "+ht);return mr}(st.weight,Nt)))throw new Error("Failed to resolve a font for the rule '"+$x(st)+"'.");return Nt}(ct,Ge);this.pdf.setFont(yt.ref.name,yt.ref.style)}else{var ot="";(Oe==="bold"||parseInt(Oe,10)>=700||we==="bold")&&(ot="bold"),we==="italic"&&(ot+="italic"),ot.length===0&&(ot="normal");for(var dt="",At={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},lt=0;lt<Ne.length;lt++){if(this.pdf.internal.getFont(Ne[lt],ot,{noFallback:!0,disableWarning:!0})!==void 0){dt=Ne[lt];break}if(ot==="bolditalic"&&this.pdf.internal.getFont(Ne[lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)dt=Ne[lt],ot="bold";else if(this.pdf.internal.getFont(Ne[lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){dt=Ne[lt],ot="normal";break}}if(dt===""){for(var Ke=0;Ke<Ne.length;Ke++)if(At[Ne[Ke]]){dt=At[Ne[Ke]];break}}dt=dt===""?"Times":dt,this.pdf.setFont(dt,ot)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};d.prototype.setLineDash=function(N){this.lineDash=N},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){T.call(this,"fill",!1)},d.prototype.stroke=function(){T.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(N,U){if(isNaN(N)||isNaN(U))throw Gt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(N,U));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(N,U)},d.prototype.closePath=function(){var N=new o(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&$t(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){N=new o(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(N.x,N.y)},d.prototype.lineTo=function(N,U){if(isNaN(N)||isNaN(U))throw Gt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(N,U));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},d.prototype.quadraticCurveTo=function(N,U,G,ee){if(isNaN(G)||isNaN(ee)||isNaN(N)||isNaN(U))throw Gt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new o(G,ee)),ce=this.ctx.transform.applyToPoint(new o(N,U));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},d.prototype.bezierCurveTo=function(N,U,G,ee,ie,ce){if(isNaN(ie)||isNaN(ce)||isNaN(N)||isNaN(U)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new o(ie,ce)),ve=this.ctx.transform.applyToPoint(new o(N,U)),be=this.ctx.transform.applyToPoint(new o(G,ee));this.path.push({type:"bct",x1:ve.x,y1:ve.y,x2:be.x,y2:be.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},d.prototype.arc=function(N,U,G,ee,ie,ce){if(isNaN(N)||isNaN(U)||isNaN(G)||isNaN(ee)||isNaN(ie))throw Gt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new o(N,U));N=ge.x,U=ge.y;var ve=this.ctx.transform.applyToPoint(new o(0,G)),be=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(ve.x-be.x,2)+Math.pow(ve.y-be.y,2))}Math.abs(ie-ee)>=2*Math.PI&&(ee=0,ie=2*Math.PI),this.path.push({type:"arc",x:N,y:U,radius:G,startAngle:ee,endAngle:ie,counterclockwise:ce})},d.prototype.arcTo=function(N,U,G,ee,ie){throw new Error("arcTo not implemented.")},d.prototype.rect=function(N,U,G,ee){if(isNaN(N)||isNaN(U)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(N,U),this.lineTo(N+G,U),this.lineTo(N+G,U+ee),this.lineTo(N,U+ee),this.lineTo(N,U),this.lineTo(N+G,U),this.lineTo(N,U)},d.prototype.fillRect=function(N,U,G,ee){if(isNaN(N)||isNaN(U)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(N,U,G,ee),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},d.prototype.strokeRect=function(N,U,G,ee){if(isNaN(N)||isNaN(U)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(N,U,G,ee),this.stroke())},d.prototype.clearRect=function(N,U,G,ee){if(isNaN(N)||isNaN(U)||isNaN(G)||isNaN(ee))throw Gt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(N,U,G,ee))},d.prototype.save=function(N){N=typeof N!="boolean"||N;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),N){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},d.prototype.restore=function(N){N=typeof N!="boolean"||N;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(U),N&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(N){var U,G,ee,ie;if(N.isCanvasGradient===!0&&(N=N.getColor()),!N)return{r:0,g:0,b:0,a:0,style:N};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(N))U=0,G=0,ee=0,ie=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(N);if(ce!==null)U=parseInt(ce[1]),G=parseInt(ce[2]),ee=parseInt(ce[3]),ie=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(N))!==null)U=parseInt(ce[1]),G=parseInt(ce[2]),ee=parseInt(ce[3]),ie=parseFloat(ce[4]);else{if(ie=1,typeof N=="string"&&N.charAt(0)!=="#"){var ge=new WC(N);N=ge.ok?ge.toHex():"#000000"}N.length===4?(U=N.substring(1,2),U+=U,G=N.substring(2,3),G+=G,ee=N.substring(3,4),ee+=ee):(U=N.substring(1,3),G=N.substring(3,5),ee=N.substring(5,7)),U=parseInt(U,16),G=parseInt(G,16),ee=parseInt(ee,16)}}return{r:U,g:G,b:ee,a:ie,style:N}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(N,U,G,ee){if(isNaN(U)||isNaN(G)||typeof N!="string")throw Gt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var ie=H(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;L.call(this,{text:N,x:U,y:G,scale:ce,angle:ie,align:this.textAlign,maxWidth:ee})}},d.prototype.strokeText=function(N,U,G,ee){if(isNaN(U)||isNaN(G)||typeof N!="string")throw Gt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){ee=isNaN(ee)?void 0:ee;var ie=H(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;L.call(this,{text:N,x:U,y:G,scale:ce,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:ee})}},d.prototype.measureText=function(N){if(typeof N!="string")throw Gt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,G=this.pdf.internal.scaleFactor,ee=U.internal.getFontSize(),ie=U.getStringUnitWidth(N)*ee/U.internal.scaleFactor;return new function(ce){var ge=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this}({width:ie*=Math.round(96*G/72*1e4)/1e4})},d.prototype.scale=function(N,U){if(isNaN(N)||isNaN(U))throw Gt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new l(N,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},d.prototype.rotate=function(N){if(isNaN(N))throw Gt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new l(Math.cos(N),Math.sin(N),-Math.sin(N),Math.cos(N),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.translate=function(N,U){if(isNaN(N)||isNaN(U))throw Gt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new l(1,0,0,1,N,U);this.ctx.transform=this.ctx.transform.multiply(G)},d.prototype.transform=function(N,U,G,ee,ie,ce){if(isNaN(N)||isNaN(U)||isNaN(G)||isNaN(ee)||isNaN(ie)||isNaN(ce))throw Gt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new l(N,U,G,ee,ie,ce);this.ctx.transform=this.ctx.transform.multiply(ge)},d.prototype.setTransform=function(N,U,G,ee,ie,ce){N=isNaN(N)?1:N,U=isNaN(U)?0:U,G=isNaN(G)?0:G,ee=isNaN(ee)?1:ee,ie=isNaN(ie)?0:ie,ce=isNaN(ce)?0:ce,this.ctx.transform=new l(N,U,G,ee,ie,ce)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(N,U,G,ee,ie,ce,ge,ve,be){var Ce=this.pdf.getImageProperties(N),Ie=1,je=1,ye=1,J=1;ee!==void 0&&ve!==void 0&&(ye=ve/ee,J=be/ie,Ie=Ce.width/ee*ve/ee,je=Ce.height/ie*be/ie),ce===void 0&&(ce=U,ge=G,U=0,G=0),ee!==void 0&&ve===void 0&&(ve=ee,be=ie),ee===void 0&&ve===void 0&&(ve=Ce.width,be=Ce.height);for(var we,Oe=this.ctx.transform.decompose(),Me=H(Oe.rotate.shx),Pe=new l,De=(Pe=(Pe=(Pe=Pe.multiply(Oe.translate)).multiply(Oe.skew)).multiply(Oe.scale)).applyToRectangle(new s(ce-U*ye,ge-G*J,ee*Ie,ie*je)),Ne=S.call(this,De),ct=[],Ge=0;Ge<Ne.length;Ge+=1)ct.indexOf(Ne[Ge])===-1&&ct.push(Ne[Ge]);if(k(ct),this.autoPaging)for(var yt=ct[0],ot=ct[ct.length-1],dt=yt;dt<ot+1;dt++){this.pdf.setPage(dt);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],lt=dt===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=dt===1?0:Ke+(dt-2)*it;if(this.ctx.clip_path.length!==0){var Ot=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(we,this.posX+this.margin[3],-Xe+lt+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=Ot}var St=JSON.parse(JSON.stringify(De));St=x([St],this.posX+this.margin[3],-Xe+lt+this.ctx.prevPageLastElemOffset)[0];var We=(dt>yt||dt<ot)&&b.call(this);We&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,it,null).clip().discardPath()),this.pdf.addImage(N,"JPEG",St.x,St.y,St.w,St.h,null,null,Me),We&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(N,"JPEG",De.x,De.y,De.w,De.h,null,null,Me)};var S=function(N,U,G){var ee=[];U=U||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(N.type){default:case"mt":case"lt":ee.push(Math.floor((N.y+ie)/G)+1);break;case"arc":ee.push(Math.floor((N.y+ie-N.radius)/G)+1),ee.push(Math.floor((N.y+ie+N.radius)/G)+1);break;case"qct":var ce=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x,N.y);ee.push(Math.floor((ce.y+ie)/G)+1),ee.push(Math.floor((ce.y+ce.h+ie)/G)+1);break;case"bct":var ge=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x2,N.y2,N.x,N.y);ee.push(Math.floor((ge.y+ie)/G)+1),ee.push(Math.floor((ge.y+ge.h+ie)/G)+1);break;case"rect":ee.push(Math.floor((N.y+ie)/G)+1),ee.push(Math.floor((N.y+N.h+ie)/G)+1)}for(var ve=0;ve<ee.length;ve+=1)for(;this.pdf.internal.getNumberOfPages()<ee[ve];)_.call(this);return ee},_=function(){var N=this.fillStyle,U=this.strokeStyle,G=this.font,ee=this.lineCap,ie=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=N,this.strokeStyle=U,this.font=G,this.lineCap=ee,this.lineWidth=ie,this.lineJoin=ce},x=function(N,U,G){for(var ee=0;ee<N.length;ee++)switch(N[ee].type){case"bct":N[ee].x2+=U,N[ee].y2+=G;case"qct":N[ee].x1+=U,N[ee].y1+=G;default:N[ee].x+=U,N[ee].y+=G}return N},k=function(N){return N.sort(function(U,G){return U-G})},T=function(N,U){for(var G,ee,ie=this.fillStyle,ce=this.strokeStyle,ge=this.lineCap,ve=this.lineWidth,be=Math.abs(ve*this.ctx.transform.scaleX),Ce=this.lineJoin,Ie=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),ye=[],J=0;J<je.length;J++)if(je[J].x!==void 0)for(var we=S.call(this,je[J]),Oe=0;Oe<we.length;Oe+=1)ye.indexOf(we[Oe])===-1&&ye.push(we[Oe]);for(var Me=0;Me<ye.length;Me++)for(;this.pdf.internal.getNumberOfPages()<ye[Me];)_.call(this);if(k(ye),this.autoPaging)for(var Pe=ye[0],De=ye[ye.length-1],Ne=Pe;Ne<De+1;Ne++){this.pdf.setPage(Ne),this.fillStyle=ie,this.strokeStyle=ce,this.lineCap=ge,this.lineWidth=be,this.lineJoin=Ce;var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Ne===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=Ne===1?0:yt+(Ne-2)*ot;if(this.ctx.clip_path.length!==0){var At=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(G,this.posX+this.margin[3],-dt+Ge+this.ctx.prevPageLastElemOffset),R.call(this,N,!0),this.path=At}if(ee=JSON.parse(JSON.stringify(Ie)),this.path=x(ee,this.posX+this.margin[3],-dt+Ge+this.ctx.prevPageLastElemOffset),U===!1||Ne===0){var lt=(Ne>Pe||Ne<De)&&b.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,ot,null).clip().discardPath()),R.call(this,N,U),lt&&this.pdf.restoreGraphicsState()}this.lineWidth=ve}else this.lineWidth=be,R.call(this,N,U),this.lineWidth=ve;this.path=Ie},R=function(N,U){if((N!=="stroke"||U||!y.call(this))&&(N==="stroke"||U||!p.call(this))){for(var G,ee,ie=[],ce=this.path,ge=0;ge<ce.length;ge++){var ve=ce[ge];switch(ve.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:ve,deltas:[],abs:[]});break;case"lt":var be=ie.length;if(ce[ge-1]&&!isNaN(ce[ge-1].x)&&(G=[ve.x-ce[ge-1].x,ve.y-ce[ge-1].y],be>0)){for(;be>=0;be--)if(ie[be-1].close!==!0&&ie[be-1].begin!==!0){ie[be-1].deltas.push(G),ie[be-1].abs.push(ve);break}}break;case"bct":G=[ve.x1-ce[ge-1].x,ve.y1-ce[ge-1].y,ve.x2-ce[ge-1].x,ve.y2-ce[ge-1].y,ve.x-ce[ge-1].x,ve.y-ce[ge-1].y],ie[ie.length-1].deltas.push(G);break;case"qct":var Ce=ce[ge-1].x+2/3*(ve.x1-ce[ge-1].x),Ie=ce[ge-1].y+2/3*(ve.y1-ce[ge-1].y),je=ve.x+2/3*(ve.x1-ve.x),ye=ve.y+2/3*(ve.y1-ve.y),J=ve.x,we=ve.y;G=[Ce-ce[ge-1].x,Ie-ce[ge-1].y,je-ce[ge-1].x,ye-ce[ge-1].y,J-ce[ge-1].x,we-ce[ge-1].y],ie[ie.length-1].deltas.push(G);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(ve)}}ee=U?null:N==="stroke"?"stroke":"fill";for(var Oe=!1,Me=0;Me<ie.length;Me++)if(ie[Me].arc)for(var Pe=ie[Me].abs,De=0;De<Pe.length;De++){var Ne=Pe[De];Ne.type==="arc"?F.call(this,Ne.x,Ne.y,Ne.radius,Ne.startAngle,Ne.endAngle,Ne.counterclockwise,void 0,U,!Oe):z.call(this,Ne.x,Ne.y),Oe=!0}else if(ie[Me].close===!0)this.pdf.internal.out("h"),Oe=!1;else if(ie[Me].begin!==!0){var ct=ie[Me].start.x,Ge=ie[Me].start.y;I.call(this,ie[Me].deltas,ct,Ge),Oe=!0}ee&&M.call(this,ee),U&&q.call(this)}},B=function(N){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return N-G;case"top":return N+U-G;case"hanging":return N+U-2*G;case"middle":return N+U/2-G;default:return N}},j=function(N){return N+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var N=function(){};return N.colorStops=[],N.addColorStop=function(U,G){this.colorStops.push([U,G])},N.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},N.isCanvasGradient=!0,N},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(N,U,G,ee,ie,ce,ge,ve,be){for(var Ce=Z.call(this,G,ee,ie,ce),Ie=0;Ie<Ce.length;Ie++){var je=Ce[Ie];Ie===0&&(be?O.call(this,je.x1+N,je.y1+U):z.call(this,je.x1+N,je.y1+U)),X.call(this,N,U,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}ve?q.call(this):M.call(this,ge)},M=function(N){switch(N){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},q=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(N,U){this.pdf.internal.out(e(N)+" "+n(U)+" m")},L=function(N){var U;switch(N.align){case"right":case"end":U="right";break;case"center":U="center";break;default:U="left"}var G=this.pdf.getTextDimensions(N.text),ee=B.call(this,N.y),ie=j.call(this,ee)-G.h,ce=this.ctx.transform.applyToPoint(new o(N.x,ee)),ge=this.ctx.transform.decompose(),ve=new l;ve=(ve=(ve=ve.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var be,Ce,Ie,je=this.ctx.transform.applyToRectangle(new s(N.x,ee,G.w,G.h)),ye=ve.applyToRectangle(new s(N.x,ie,G.w,G.h)),J=S.call(this,ye),we=[],Oe=0;Oe<J.length;Oe+=1)we.indexOf(J[Oe])===-1&&we.push(J[Oe]);if(k(we),this.autoPaging)for(var Me=we[0],Pe=we[we.length-1],De=Me;De<Pe+1;De++){this.pdf.setPage(De);var Ne=De===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],yt=Ge-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],dt=ot-this.margin[3],At=De===1?0:ct+(De-2)*yt;if(this.ctx.clip_path.length!==0){var lt=this.path;be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(be,this.posX+this.margin[3],-1*At+Ne),R.call(this,"fill",!0),this.path=lt}var Ke=x([JSON.parse(JSON.stringify(ye))],this.posX+this.margin[3],-At+Ne+this.ctx.prevPageLastElemOffset)[0];N.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*N.scale),Ie=this.lineWidth,this.lineWidth=Ie*N.scale);var it=this.autoPaging!=="text";if(it||Ke.y+Ke.h<=Ge){if(it||Ke.y>=Ne&&Ke.x<=ot){var Xe=it?N.text:this.pdf.splitTextToSize(N.text,N.maxWidth||ot-Ke.x)[0],Ot=x([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-At+Ne+this.ctx.prevPageLastElemOffset)[0],St=it&&(De>Me||De<Pe)&&b.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,yt,null).clip().discardPath()),this.pdf.text(Xe,Ot.x,Ot.y,{angle:N.angle,align:U,renderingMode:N.renderingMode}),St&&this.pdf.restoreGraphicsState()}}else Ke.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-Ke.y);N.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ie)}else N.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*N.scale),Ie=this.lineWidth,this.lineWidth=Ie*N.scale),this.pdf.text(N.text,ce.x+this.posX,ce.y+this.posY,{angle:N.angle,align:U,renderingMode:N.renderingMode,maxWidth:N.maxWidth}),N.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Ie)},z=function(N,U,G,ee){G=G||0,ee=ee||0,this.pdf.internal.out(e(N+G)+" "+n(U+ee)+" l")},I=function(N,U,G){return this.pdf.lines(N,U,G,null,null)},X=function(N,U,G,ee,ie,ce,ge,ve){this.pdf.internal.out([t(i(G+N)),t(a(ee+U)),t(i(ie+N)),t(a(ce+U)),t(i(ge+N)),t(a(ve+U)),"c"].join(" "))},Z=function(N,U,G,ee){for(var ie=2*Math.PI,ce=Math.PI/2;U>G;)U-=ie;var ge=Math.abs(G-U);ge<ie&&ee&&(ge=ie-ge);for(var ve=[],be=ee?-1:1,Ce=U;ge>1e-5;){var Ie=Ce+be*Math.min(ge,ce);ve.push(oe.call(this,N,Ce,Ie)),ge-=Math.abs(Ie-Ce),Ce=Ie}return ve},oe=function(N,U,G){var ee=(G-U)/2,ie=N*Math.cos(ee),ce=N*Math.sin(ee),ge=ie,ve=-ce,be=ge*ge+ve*ve,Ce=be+ge*ie+ve*ce,Ie=4/3*(Math.sqrt(2*be*Ce)-Ce)/(ge*ce-ve*ie),je=ge-Ie*ve,ye=ve+Ie*ge,J=je,we=-ye,Oe=ee+U,Me=Math.cos(Oe),Pe=Math.sin(Oe);return{x1:N*Math.cos(U),y1:N*Math.sin(U),x2:je*Me-ye*Pe,y2:je*Pe+ye*Me,x3:J*Me-we*Pe,y3:J*Pe+we*Me,x4:N*Math.cos(G),y4:N*Math.sin(G)}},H=function(N){return 180*N/Math.PI},re=function(N,U,G,ee,ie,ce){var ge=N+.5*(G-N),ve=U+.5*(ee-U),be=ie+.5*(G-ie),Ce=ce+.5*(ee-ce),Ie=Math.min(N,ie,ge,be),je=Math.max(N,ie,ge,be),ye=Math.min(U,ce,ve,Ce),J=Math.max(U,ce,ve,Ce);return new s(Ie,ye,je-Ie,J-ye)},ue=function(N,U,G,ee,ie,ce,ge,ve){var be,Ce,Ie,je,ye,J,we,Oe,Me,Pe,De,Ne,ct,Ge,yt=G-N,ot=ee-U,dt=ie-G,At=ce-ee,lt=ge-ie,Ke=ve-ce;for(Ce=0;Ce<41;Ce++)Me=(we=(Ie=N+(be=Ce/40)*yt)+be*((ye=G+be*dt)-Ie))+be*(ye+be*(ie+be*lt-ye)-we),Pe=(Oe=(je=U+be*ot)+be*((J=ee+be*At)-je))+be*(J+be*(ce+be*Ke-J)-Oe),Ce==0?(De=Me,Ne=Pe,ct=Me,Ge=Pe):(De=Math.min(De,Me),Ne=Math.min(Ne,Pe),ct=Math.max(ct,Me),Ge=Math.max(Ge,Pe));return new s(Math.round(De),Math.round(Ne),Math.round(ct-De),Math.round(Ge-Ne))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var N,U,G=(N=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:N,lineDashOffset:U}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(et.API),function(r){var t=function(o){var s,l,c,u,d,v,p,y,b,S;for(l=[],c=0,u=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;u>c;c+=4)(d=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(v=(d=((d=((d=((d=(d-(S=d%85))/85)-(b=d%85))/85)-(y=d%85))/85)-(p=d%85))/85)%85,l.push(v+33,p+33,y+33,b+33,S+33)):l.push(122);return function(_,x){for(var k=x;k>0;k--)_.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},e=function(o){var s,l,c,u,d,v=String,p="length",y=255,b="charCodeAt",S="slice",_="replace";for(o[S](-2),o=o[S](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),c=[],u=0,d=(o+=s="uuuuu"[S](o[p]%5||5))[p];d>u;u+=5)l=52200625*(o[b](u)-33)+614125*(o[b](u+1)-33)+7225*(o[b](u+2)-33)+85*(o[b](u+3)-33)+(o[b](u+4)-33),c.push(y&l>>24,y&l>>16,y&l>>8,y&l);return function(x,k){for(var T=k;T>0;T--)x.pop()}(c,s[p]),v.fromCharCode.apply(v,c)},n=function(o){return o.split("").map(function(s){return("0"+s.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var l="",c=0;c<o.length;c+=2)l+=String.fromCharCode("0x"+(o[c]+o[c+1]));return l},a=function(o){for(var s=new Uint8Array(o.length),l=o.length;l--;)s[l]=o.charCodeAt(l);return(s=wy(s)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};r.processDataByFilters=function(o,s){var l=0,c=o||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":c=e(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(et.API),function(r){r.loadFile=function(t,e,n){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(l,c,u){var d=new XMLHttpRequest,v=0,p=function(y){var b=y.length,S=[],_=String.fromCharCode;for(v=0;v<b;v+=1)S.push(_(255&y.charCodeAt(v)));return S.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(p(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)}(i,a,o)}catch{}return s}(t,e,n)},r.loadImageFile=r.loadFile}(et.API),function(r){function t(){return(ut.html2canvas?Promise.resolve(ut.html2canvas):xg(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function e(){return(ut.DOMPurify?Promise.resolve(ut.DOMPurify):xg(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var n=function(s){var l=$t(s);return l==="undefined"?"undefined":l==="string"||s instanceof String?"string":l==="number"||s instanceof Number?"number":l==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(s,l){var c=document.createElement(s);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},a=function s(l,c){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(s(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},o=function s(l){var c=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),c);return(u=u.setProgress(1,s,1,[s])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,l){return s.__proto__=l||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s),l){case"string":return this.then(e).then(function(c){return this.set({src:i("div",{innerHTML:s,dompurify:c})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var p=0;p<u.length;++p){var y=u[p],b=y.src.find(function(S){return S.format==="truetype"});b&&c.addFont(b.url,y.ref.name,y.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,c.context2d.save(!0),l(this.prop.container,v)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(s,l):this.outputPdf(s,l)},o.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(n(s)!=="object")return this;var l=Object.keys(s||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=s[c]};switch(c){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[c]=s[c]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(s,l){return this.then(function(){var c=s in o.template.prop?this.prop[s]:this.opt[s];return l?l(c):c})},o.prototype.setMargin=function(s){return this.then(function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(s=s||et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,l,c,u){return s!=null&&(this.progress.val=s),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,l,c,u){return this.setProgress(s?this.progress.val+s:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(s,l){var c=this;return this.thenCore(s,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(v){return c.updateProgress(null,u),v}).then(u,d).then(function(v){return c.updateProgress(1),v})})},o.prototype.thenCore=function(s,l,c){c=c||Promise.prototype.then;var u=this;s&&(s=s.bind(u)),l&&(l=l.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),v=c.call(d,s,l);return o.convert(v,u.__proto__)},o.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},o.prototype.thenList=function(s){var l=this;return s.forEach(function(c){l=l.thenCore(c)}),l},o.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return o.convert(l,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,et.getPageSize=function(s,l,c){if($t(s)==="object"){var u=s;s=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",s=(""+(s||"P")).toLowerCase();var d,v=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var y,b=0,S=0;if(p.hasOwnProperty(v))b=p[v][1]/d,S=p[v][0]/d;else try{b=c[1],S=c[0]}catch{throw new Error("Invalid format: "+c)}if(s==="p"||s==="portrait")s="p",S>b&&(y=S,S=b,b=y);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",b>S&&(y=S,S=b,b=y)}return{width:S,height:b,unit:l,k:d,orientation:s}},r.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map($g):null;var c=new o(l);return l.worker?c:c.from(s).doCallback()}}(et.API),et.API.addJS=function(r){return zx=r,this.internal.events.subscribe("postPutResources",function(){th=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(th+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Vx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+zx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){th!==void 0&&Vx!==void 0&&this.internal.out("/Names <</JavaScript "+th+" 0 R>>")}),this},function(r){var t;r.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=e.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],s=n.exec(o);if(s!=null){var l=s[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(a=0;a<c;a++){var d=e.internal.newObject();u.push(d);var v=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<u.length;a++)e.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+p+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(n){n.id=e.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},e.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},e.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var l=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},e.outline.line=function(n){this.ctx.val+=n+`\r
`},e.outline.makeRef=function(n){return n.id+" 0 R"},e.outline.makeString=function(n){return"("+e.internal.pdfEscape(n)+")"},e.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(et.API),function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,n,i,a,o,s){var l,c=this.decode.DCT_DECODE,u=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,l=function(d){for(var v,p=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,b={width:0,height:0,numcomponents:1},S=4;S<y;S+=2){if(S+=p,t.indexOf(d.charCodeAt(S+1))!==-1){v=256*d.charCodeAt(S+5)+d.charCodeAt(S+6),b={width:256*d.charCodeAt(S+7)+d.charCodeAt(S+8),height:v,numcomponents:d.charCodeAt(S+9)};break}p=256*d.charCodeAt(S+2)+d.charCodeAt(S+3)}return b}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),l.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}u={data:e,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:c,index:n,alias:i}}return u}}(et.API),et.API.processPNG=function(r,t,e,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,a=JZ(r,{checkCrc:!0}),o=a.width,s=a.height,l=a.channels,c=a.palette,u=a.depth;i=c&&l===1?function(F){for(var M=F.width,q=F.height,O=F.data,L=F.palette,z=F.depth,I=!1,X=[],Z=[],oe=void 0,H=!1,re=0,ue=0;ue<L.length;ue++){var ne=Gb(L[ue],4),N=ne[0],U=ne[1],G=ne[2],ee=ne[3];X.push(N,U,G),ee!=null&&(ee===0?(re++,Z.length<1&&Z.push(ue)):ee<255&&(H=!0))}if(H||re>1){I=!0,Z=void 0;var ie=M*q;oe=new Uint8Array(ie);for(var ce=new DataView(O.buffer),ge=0;ge<ie;ge++){var ve=Vg(ce,ge,z),be=Gb(L[ve],4)[3];oe[ge]=be}}else re===0&&(Z=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:I?8:void 0,colorBytes:O,alphaBytes:oe,needSMask:I,palette:X,mask:Z}}(a):l===2||l===4?function(F){for(var M=F.data,q=F.width,O=F.height,L=F.channels,z=F.depth,I=L===2?"DeviceGray":"DeviceRGB",X=L-1,Z=q*O,oe=X,H=Z*oe,re=1*Z,ue=Math.ceil(H*z/8),ne=Math.ceil(re*z/8),N=new Uint8Array(ue),U=new Uint8Array(ne),G=new DataView(M.buffer),ee=new DataView(N.buffer),ie=new DataView(U.buffer),ce=!1,ge=0;ge<Z;ge++){for(var ve=ge*L,be=0;be<oe;be++)Xx(ee,Vg(G,ve+be,z),ge*oe+be,z);var Ce=Vg(G,ve+oe,z);Ce<(1<<z)-1&&(ce=!0),Xx(ie,Ce,1*ge,z)}return{colorSpace:I,colorsPerPixel:X,sMaskBitsPerComponent:ce?z:void 0,colorBytes:N,alphaBytes:U,needSMask:ce}}(a):function(F){var M=F.data,q=F.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:q,colorsPerPixel:q==="DeviceGray"?1:3,colorBytes:M instanceof Uint16Array?function(O){for(var L=O.length,z=new Uint8Array(2*L),I=new DataView(z.buffer,z.byteOffset,z.byteLength),X=0;X<L;X++)I.setUint16(2*X,O[X],!1);return z}(M):M,needSMask:!1}}(a);var d,v,p,y=i,b=y.colorSpace,S=y.colorsPerPixel,_=y.sMaskBitsPerComponent,x=y.colorBytes,k=y.alphaBytes,T=y.needSMask,R=y.palette,B=y.mask,j=null;return n!==et.API.image_compression.NONE&&typeof wy=="function"?(j=function(F){var M;switch(F){case et.API.image_compression.FAST:M=11;break;case et.API.image_compression.MEDIUM:M=13;break;case et.API.image_compression.SLOW:M=14;break;default:M=12}return M}(n),d=this.decode.FLATE_DECODE,v="/Predictor ".concat(j," /Colors ").concat(S," /BitsPerComponent ").concat(u," /Columns ").concat(o),r=Gx(x,Math.ceil(o*S*u/8),S,u,n),T&&(p=Gx(k,Math.ceil(o*_/8),1,_,n))):(d=void 0,v=void 0,r=x,T&&(p=k)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:e,data:r,index:t,filter:d,decodeParameters:v,transparency:B,palette:R,sMask:p,predictor:j,width:o,height:s,bitsPerComponent:u,sMaskBitsPerComponent:_,colorSpace:b}}},function(r){r.processGIF89A=function(t,e,n,i){var a=new yee(t),o=a.width,s=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:s},u=new zg(100).encode(c,100);return r.processJPEG.call(this,u,e,n,i)},r.processGIF87A=r.processGIF89A}(et.API),xi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var e=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:e,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xi.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[r]()}catch(e){Gt.log("bit decode error:"+e)}},xi.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),e=t%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,s=0;s<8&&8*i+s<this.width;s++){var l=this.palette[a>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}e!==0&&(this.pos+=4-e)}},xi.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<r;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,s=a>>4,l=15&a,c=this.palette[s];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},xi.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},xi.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,s=(a>>5&t)/t*255|0,l=(a>>10&t)/t*255|0,c=a>>15?255:0,u=n*this.width*4+4*i;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=o,this.data[u+3]=c}this.pos+=r}},xi.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,l=(o>>5&e)/e*255|0,c=(o>>11)/t*255|0,u=i*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=r}},xi.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},xi.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*e;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=o}},xi.prototype.getData=function(){return this.data},function(r){r.processBMP=function(t,e,n,i){var a=new xi(t,!1),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},c=new zg(100).encode(l,100);return r.processJPEG.call(this,c,e,n,i)}}(et.API),eS.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(t,e,n,i){var a=new eS(t),o=a.width,s=a.height,l={data:a.getData(),width:o,height:s},c=new zg(100).encode(l,100);return r.processJPEG.call(this,c,e,n,i)}}(et.API),et.API.processRGBA=function(r,t,e){for(var n=r.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),s=0,l=0,c=0;c<i;c+=4){var u=n[c],d=n[c+1],v=n[c+2],p=n[c+3];a[s++]=u,a[s++]=d,a[s++]=v,o[l++]=p}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},et.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},uc=et.API,rh=uc.getCharWidthsArray=function(r,t){var e,n,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:i.metadata.Unicode.widths,l=s.fof?s.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=t.doKerning!==!1,v=0,p=r.length,y=0,b=s[0]||l,S=[];for(e=0;e<p;e++)n=r.charCodeAt(e),typeof i.metadata.widthOfString=="function"?S.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(v=d&&$t(c[n])==="object"&&!isNaN(parseInt(c[n][y],10))?c[n][y]/u:0,S.push((s[n]||b)/l+v)),y=n;return S},Wx=uc.getStringUnitWidth=function(r,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return uc.processArabic&&(r=uc.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,e,i)/e:rh.apply(this,arguments).reduce(function(a,o){return a+o},0)},qx=function(r,t,e,n){for(var i=[],a=0,o=r.length,s=0;a!==o&&s+t[a]<e;)s+=t[a],a++;i.push(r.slice(0,a));var l=a;for(s=0;a!==o;)s+t[a]>n&&(i.push(r.slice(l,a)),s=0,l=a),s+=t[a],a++;return l!==a&&i.push(r.slice(l,a)),i},Hx=function(r,t,e){e||(e={});var n,i,a,o,s,l,c,u=[],d=[u],v=e.textIndent||0,p=0,y=0,b=r.split(" "),S=rh.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?b[0].length+2:e.lineIndent||0){var _=Array(l).join(" "),x=[];b.map(function(T){(T=T.split(/\s*\n/)).length>1?x=x.concat(T.map(function(R,B){return(B&&R.length?`
`:"")+R})):x.push(T[0])}),b=x,l=Wx.apply(this,[_,e])}for(a=0,o=b.length;a<o;a++){var k=0;if(n=b[a],l&&n[0]==`
`&&(n=n.substr(1),k=1),v+p+(y=(i=rh.apply(this,[n,e])).reduce(function(T,R){return T+R},0))>t||k){if(y>t){for(s=qx.apply(this,[n,i,t-(v+p),t]),u.push(s.shift()),u=[s.pop()];s.length;)d.push([s.shift()]);y=i.slice(n.length-(u[0]?u[0].length:0)).reduce(function(T,R){return T+R},0)}else u=[n];d.push(u),v=y+l,p=S}else u.push(n),v+=p+y,p=S}return c=l?function(T,R){return(R?_:"")+T.join(" ")}:function(T){return T.join(" ")},d.map(c)},uc.splitTextToSize=function(r,t,e){var n,i=(e=e||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),v="Unicode";return d.metadata[v]?{widths:d.metadata[v].widths||{0:1},kerning:d.metadata[v].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,e);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;a.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=e.lineIndent;var s,l,c=[];for(s=0,l=n.length;s<l;s++)c=c.concat(Hx.apply(this,[n[s],o,a]));return c},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="0123456789abcdef",e="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[e[a]]=t[a],i[t[a]]=e[a];var o=function(v){return"0x"+parseInt(v,10).toString(16)},s=r.__fontmetrics__.compress=function(v){var p,y,b,S,_=["{"];for(var x in v){if(p=v[x],isNaN(parseInt(x,10))?y="'"+x+"'":(x=parseInt(x,10),y=(y=o(x).slice(2)).slice(0,-1)+i[y.slice(-1)]),typeof p=="number")p<0?(b=o(p).slice(3),S="-"):(b=o(p).slice(2),S=""),b=S+b.slice(0,-1)+i[b.slice(-1)];else{if($t(p)!=="object")throw new Error("Don't know what to do with value type "+$t(p)+".");b=s(p)}_.push(y+b)}return _.push("}"),_.join("")},l=r.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,y,b,S,_={},x=1,k=_,T=[],R="",B="",j=v.length-1,F=1;F<j;F+=1)(S=v[F])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(S):S=="{"?(T.push([k,b]),k={},b=void 0):S=="}"?((y=T.pop())[0][y[1]]=k,b=void 0,k=y[0]):S=="-"?x=-1:b===void 0?n.hasOwnProperty(S)?(R+=n[S],b=parseInt(R,16)*x,x=1,R=""):R+=S:n.hasOwnProperty(S)?(B+=n[S],k[b]=parseInt(B,16)*x,x=1,b=void 0,B=""):B+=S;return _},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(v){var p=v.font,y=d.Unicode[p.postScriptName];y&&(p.metadata.Unicode={},p.metadata.Unicode.widths=y.widths,p.metadata.Unicode.kerning=y.kerning);var b=u.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])}(et.API),function(r){var t=function(e){for(var n=e.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=e.charCodeAt(a);return i};r.API.events.push(["addFont",function(e){var n=void 0,i=e.font,a=e.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(Ch(s)),o.metadata=r.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(et),et.API.addSvgAsImage=function(r,t,e,n,i,a,o,s){if(isNaN(t)||isNaN(e))throw Gt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Gt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(ut.canvg?Promise.resolve(ut.canvg):xg(()=>import("./index.es-DbiCp_aM.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(c,r,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(u)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),t,e,n,i,o,s)})},et.API.putTotalPages=function(r){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,e);return this},et.API.viewerPreferences=function(r,t){var e;r=r||{},t=t||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],c=0,u=0,d=0;function v(y,b){var S,_=!1;for(S=0;S<y.length;S+=1)y[S]===b&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var p=s.length;for(d=0;d<p;d+=1)e[s[d]].value=e[s[d]].defaultValue,e[s[d]].explicitSet=!1}if($t(r)==="object"){for(i in r)if(a=r[i],v(s,i)&&a!==void 0){if(e[i].type==="boolean"&&typeof a=="boolean")e[i].value=a;else if(e[i].type==="name"&&v(e[i].valueSet,a))e[i].value=a;else if(e[i].type==="integer"&&Number.isInteger(a))e[i].value=a;else if(e[i].type==="array"){for(c=0;c<a.length;c+=1)if(n=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(u=0;u<a[c].length;u+=1)typeof a[c][u]!="number"&&(n=!1);n===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}e[i].value="["+l.join(" ")+"]"}else e[i].value=e[i].defaultValue;e[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,b=[];for(y in e)e[y].explicitSet===!0&&(e[y].type==="name"?b.push("/"+y+" /"+e[y].value):b.push("/"+y+" "+e[y].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(r){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=a.length+o.length+s.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+s+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(et.API),function(r){var t=r.API,e=t.pdfEscape16=function(a,o){for(var s,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,v=a.length;d<v;++d){if(s=o.metadata.characterToGlyph(a.charCodeAt(d)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=a.charCodeAt(d),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return u.join("");s=s.toString(16),u.push(c[4-s.length],s)}return u.join("")},n=function(a){var o,s,l,c,u,d,v;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,v=(s=Object.keys(a).sort(function(p,y){return p-y})).length;d<v;d++)o=s[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(c=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,c=o.newObject,u=o.putStream;if(s.metadata instanceof r.API.TTFFont&&s.encoding==="Identity-H"){for(var d=s.metadata.Unicode.widths,v=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),p="",y=0;y<v.length;y++)p+=String.fromCharCode(v[y]);var b=c();u({data:p,addLength1:!0,objectId:b}),l("endobj");var S=c();u({data:n(s.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var _=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+gc(s.fontName)),l("/FontFile2 "+b+" 0 R"),l("/FontBBox "+r.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+gc(s.fontName)),l("/FontDescriptor "+_+" 0 R"),l("/W "+r.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+gc(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(o){var s=o.font,l=o.out,c=o.newObject,u=o.putStream;if(s.metadata instanceof r.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var d=s.metadata.rawData,v="",p=0;p<d.length;p++)v+=String.fromCharCode(d[p]);var y=c();u({data:v,addLength1:!0,objectId:y}),l("endobj");var b=c();u({data:n(s.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var S=c();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+r.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+gc(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=c();for(var _=0;_<s.metadata.hmtx.widths.length;_++)s.metadata.hmtx.widths[_]=parseInt(s.metadata.hmtx.widths[_]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+gc(s.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,s=a.text||"",l=a.x,c=a.y,u=a.options||{},d=a.mutex||{},v=d.pdfEscape,p=d.activeFontKey,y=d.fonts,b=p,S="",_=0,x="",k=y[b].encoding;if(y[b].encoding!=="Identity-H")return{text:s,x:l,y:c,options:u,mutex:d};for(x=s,b=p,Array.isArray(s)&&(x=s[0]),_=0;_<x.length;_+=1)y[b].metadata.hasOwnProperty("cmap")&&(o=y[b].metadata.cmap.unicode.codeMap[x[_].charCodeAt(0)]),o||x[_].charCodeAt(0)<256&&y[b].metadata.hasOwnProperty("Unicode")?S+=x[_]:S+="";var T="";return parseInt(b.slice(1))<14||k==="WinAnsiEncoding"?T=v(S,b).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(T=e(S,y[b])),d.isHex=!0,{text:T,x:l,y:c,options:u,mutex:d}};t.events.push(["postProcessText",function(a){var o=a.text||"",s=[],l={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?s.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):s.push(i(Object.assign({},l,{text:o[c]})).text);a.text=s}else a.text=i(Object.assign({},l,{text:o})).text}])}(et),function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},r.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(et.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,a,o,s,l,c,u,d=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,k=0;this.__bidiEngine__={};var T=function(O){var L=O.charCodeAt(),z=L>>8,I=b[z];return I!==void 0?d[256*I+(255&L)]:z===252||z===253?"AL":_.test(z)?"L":z===8?"R":"N"},R=function(O){for(var L,z=0;z<O.length;z++){if((L=T(O.charAt(z)))==="L")return!1;if(L==="R")return!0}return!1},B=function(O,L,z,I){var X,Z,oe,H,re=L[I];switch(re){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"N":case"AN":break;case"EN":x&&(re="AN");break;case"AL":x=!0,re="R";break;case"WS":case"BN":re="N";break;case"CS":I<1||I+1>=L.length||(X=z[I-1])!=="EN"&&X!=="AN"||(Z=L[I+1])!=="EN"&&Z!=="AN"?re="N":x&&(Z="AN"),re=Z===X?Z:"N";break;case"ES":re=(X=I>0?z[I-1]:"B")==="EN"&&I+1<L.length&&L[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&z[I-1]==="EN"){re="EN";break}if(x){re="N";break}for(oe=I+1,H=L.length;oe<H&&L[oe]==="ET";)oe++;re=oe<H&&L[oe]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(H=L.length,oe=I+1;oe<H&&L[oe]==="NSM";)oe++;if(oe<H){var ue=O[I],ne=ue>=1425&&ue<=2303||ue===64286;if(X=L[oe],ne&&(X==="R"||X==="AL")){re="R";break}}}re=I<1||(X=L[I-1])==="B"?"N":z[I-1];break;case"B":x=!1,i=!0,re=k;break;case"S":a=!0,re="N"}return re},j=function(O,L,z){var I=O.split("");return z&&F(I,z,{hiLevel:k}),I.reverse(),L&&L.reverse(),I.join("")},F=function(O,L,z){var I,X,Z,oe,H,re=-1,ue=O.length,ne=0,N=[],U=k?p:v,G=[];for(x=!1,i=!1,a=!1,X=0;X<ue;X++)G[X]=T(O[X]);for(Z=0;Z<ue;Z++){if(H=ne,N[Z]=B(O,G,N,Z),I=240&(ne=U[H][y[N[Z]]]),ne&=15,L[Z]=oe=U[ne][5],I>0)if(I===16){for(X=re;X<Z;X++)L[X]=1;re=-1}else re=-1;if(U[ne][6])re===-1&&(re=Z);else if(re>-1){for(X=re;X<Z;X++)L[X]=oe;re=-1}G[Z]==="B"&&(L[Z]=0),z.hiLevel|=oe}a&&function(ee,ie,ce){for(var ge=0;ge<ce;ge++)if(ee[ge]==="S"){ie[ge]=k;for(var ve=ge-1;ve>=0&&ee[ve]==="WS";ve--)ie[ve]=k}}(G,L,ue)},M=function(O,L,z,I,X){if(!(X.hiLevel<O)){if(O===1&&k===1&&!i)return L.reverse(),void(z&&z.reverse());for(var Z,oe,H,re,ue=L.length,ne=0;ne<ue;){if(I[ne]>=O){for(H=ne+1;H<ue&&I[H]>=O;)H++;for(re=ne,oe=H-1;re<oe;re++,oe--)Z=L[re],L[re]=L[oe],L[oe]=Z,z&&(Z=z[re],z[re]=z[oe],z[oe]=Z);ne=H}ne++}}},q=function(O,L,z){var I=O.split(""),X={hiLevel:k};return z||(z=[]),F(I,z,X),function(Z,oe,H){if(H.hiLevel!==0&&u)for(var re,ue=0;ue<Z.length;ue++)oe[ue]===1&&(re=S.indexOf(Z[ue]))>=0&&(Z[ue]=S[re+1])}(I,z,X),M(2,I,L,z,X),M(1,I,L,z,X),I.join("")};return this.__bidiEngine__.doBidiReorder=function(O,L,z){if(function(X,Z){if(Z)for(var oe=0;oe<X.length;oe++)Z[oe]=oe;s===void 0&&(s=R(X)),c===void 0&&(c=R(X))}(O,L),o||!l||c)if(o&&l&&s^c)k=s?1:0,O=j(O,L,z);else if(!o&&l&&c)k=s?1:0,O=q(O,L,z),O=j(O,L);else if(!o||s||l||c){if(o&&!l&&s^c)O=j(O,L),s?(k=0,O=q(O,L,z)):(k=1,O=q(O,L,z),O=j(O,L));else if(o&&s&&!l&&c)k=1,O=q(O,L,z),O=j(O,L);else if(!o&&!l&&s^c){var I=u;s?(k=1,O=q(O,L,z),k=0,u=!1,O=q(O,L,z),u=I):(k=0,O=q(O,L,z),O=j(O,L),k=1,u=!1,O=q(O,L,z),u=I,O=j(O,L))}}else k=0,O=q(O,L,z);else k=s?1:0,O=q(O,L,z);return O},this.__bidiEngine__.setOptions=function(O){O&&(o=O.isInputVisual,l=O.isOutputVisual,s=O.isInputRtl,c=O.isOutputRtl,u=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,e.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var s=0;for(o=[],s=0;s<i.length;s+=1)Object.prototype.toString.call(i[s])==="[object Array]"?o.push([e.doBidiReorder(i[s][0]),i[s][1],i[s][2]]):o.push([e.doBidiReorder(i[s])]);n.text=o}else n.text=e.doBidiReorder(i);e.setOptions({isInputVisual:!0})}])}(et),et.API.TTFFont=function(){function r(t){var e;if(this.rawData=t,e=this.contents=new Ao(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new Ree(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new _ee(this.contents),this.head=new bee(this),this.name=new Tee(this),this.cmap=new tL(this),this.toUnicode={},this.hhea=new xee(this),this.maxp=new Eee(this),this.hmtx=new Cee(this),this.post=new kee(this),this.os2=new See(this),this.loca=new Nee(this),this.glyf=new Lee(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,e,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,l,c;for(c=[],o=0,s=(l=this.bbox).length;o<s;o++)t=l[o],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(e=i>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},r.prototype.widthOfString=function(t,e,n){var i,a,o,s;for(o=0,a=0,s=(t=""+t).length;0<=s?a<s:a>s;a=0<=s?++a:--a)i=t.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return o*(e/1e3)},r.prototype.lineHeight=function(t,e){var n;return e==null&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},r}();var Ii,Ao=function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,e,n,i,a,o,s,l;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^s)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*a+65536*o+256*s+l},r.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},r.prototype.write=function(t){var e,n,i,a;for(a=[],n=0,i=t.length;n<i;n++)e=t[n],a.push(this.writeByte(e));return a},r}(),_ee=function(){var r;function t(e){var n,i,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(e){var n,i,a,o,s,l,c,u,d,v,p,y,b;for(b in p=Object.keys(e).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),o=Math.floor(d/l),u=16*p-d,(i=new Ao).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(o),i.writeShort(u),a=16*p,c=i.pos+a,s=null,y=[],e)for(v=e[b],i.writeString(b),i.writeInt(r(v)),i.writeInt(c),i.writeInt(v.length),y=y.concat(v),b==="head"&&(s=c),c+=v.length;c%4;)y.push(0),c++;return i.write(y),n=2981146554-r(i.data),i.pos=s+8,i.writeUInt32(n),i.data},r=function(e){var n,i,a,o;for(e=rL.call(e);e.length%4;)e.push(0);for(a=new Ao(e),i=0,n=0,o=e.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},t}(),wee={}.hasOwnProperty,aa=function(r,t){for(var e in t)wee.call(t,e)&&(r[e]=t[e]);function n(){this.constructor=r}return n.prototype=t.prototype,r.prototype=new n,r.__super__=t.prototype,r};Ii=function(){function r(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var bee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="head",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},r.prototype.encode=function(t){var e;return(e=new Ao).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},r}(),tS=function(){function r(t,e){var n,i,a,o,s,l,c,u,d,v,p,y,b,S,_,x,k;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),v=p/2,t.pos+=6,a=function(){var T,R;for(R=[],l=T=0;0<=v?T<v:T>v;l=0<=v?++T:--T)R.push(t.readUInt16());return R}(),t.pos+=2,b=function(){var T,R;for(R=[],l=T=0;0<=v?T<v:T>v;l=0<=v?++T:--T)R.push(t.readUInt16());return R}(),c=function(){var T,R;for(R=[],l=T=0;0<=v?T<v:T>v;l=0<=v?++T:--T)R.push(t.readUInt16());return R}(),u=function(){var T,R;for(R=[],l=T=0;0<=v?T<v:T>v;l=0<=v?++T:--T)R.push(t.readUInt16());return R}(),i=(this.length-t.pos+this.offset)/2,s=function(){var T,R;for(R=[],l=T=0;0<=i?T<i:T>i;l=0<=i?++T:--T)R.push(t.readUInt16());return R}(),l=_=0,k=a.length;_<k;l=++_)for(S=a[l],n=x=y=b[l];y<=S?x<=S:x>=S;n=y<=S?++x:--x)u[l]===0?o=n+c[l]:(o=s[u[l]/2+(n-y)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[n]=65535&o}t.pos=d}return r.encode=function(t,e){var n,i,a,o,s,l,c,u,d,v,p,y,b,S,_,x,k,T,R,B,j,F,M,q,O,L,z,I,X,Z,oe,H,re,ue,ne,N,U,G,ee,ie,ce,ge,ve,be,Ce,Ie;switch(I=new Ao,o=Object.keys(t).sort(function(je,ye){return je-ye}),e){case"macroman":for(b=0,S=function(){var je=[];for(y=0;y<256;++y)je.push(0);return je}(),x={0:0},a={},X=0,re=o.length;X<re;X++)x[ve=t[i=o[X]]]==null&&(x[ve]=++b),a[i]={old:t[i],new:x[t[i]]},S[i]=x[t[i]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(S),{charMap:a,subtable:I.data,maxGlyphID:b+1};case"unicode":for(L=[],d=[],k=0,x={},n={},_=c=null,Z=0,ue=o.length;Z<ue;Z++)x[R=t[i=o[Z]]]==null&&(x[R]=++k),n[i]={old:R,new:x[R]},s=x[R]-i,_!=null&&s===c||(_&&d.push(_),L.push(i),c=s),_=i;for(_&&d.push(_),d.push(65535),L.push(65535),q=2*(M=L.length),F=2*Math.pow(Math.log(M)/Math.LN2,2),v=Math.log(F/2)/Math.LN2,j=2*M-F,l=[],B=[],p=[],y=oe=0,ne=L.length;oe<ne;y=++oe){if(O=L[y],u=d[y],O===65535){l.push(0),B.push(0);break}if(O-(z=n[O].new)>=32768)for(l.push(0),B.push(2*(p.length+M-y)),i=H=O;O<=u?H<=u:H>=u;i=O<=u?++H:--H)p.push(n[i].new);else l.push(z-O),B.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*M+2*p.length),I.writeUInt16(0),I.writeUInt16(q),I.writeUInt16(F),I.writeUInt16(v),I.writeUInt16(j),ce=0,N=d.length;ce<N;ce++)i=d[ce],I.writeUInt16(i);for(I.writeUInt16(0),ge=0,U=L.length;ge<U;ge++)i=L[ge],I.writeUInt16(i);for(be=0,G=l.length;be<G;be++)s=l[be],I.writeUInt16(s);for(Ce=0,ee=B.length;Ce<ee;Ce++)T=B[Ce],I.writeUInt16(T);for(Ie=0,ie=p.length;Ie<ie;Ie++)b=p[Ie],I.writeUInt16(b);return{charMap:n,subtable:I.data,maxGlyphID:k+1}}},r}(),tL=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="cmap",r.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e=new tS(t,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},r.encode=function(t,e){var n,i;return e==null&&(e="macroman"),n=tS.encode(t,e),(i=new Ao).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r}(),xee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="hhea",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},r}(),See=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="OS/2",r.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},r}(),kee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="post",r.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,s,l;for(l=[],a=o=0,s=this.file.maxp.numGlyphs;0<=s?o<s:o>s;a=0<=s?++o:--o)l.push(t.readUInt32());return l}).call(this)}},r}(),Pee=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Tee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="name",r.prototype.parse=function(t){var e,n,i,a,o,s,l,c,u,d,v;for(t.pos=this.offset,t.readShort(),e=t.readShort(),s=t.readShort(),n=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(l={},a=u=0,d=n.length;u<d;a=++u)i=n[a],t.pos=i.offset,c=t.readString(i.length),o=new Pee(c,i),l[v=i.nameID]==null&&(l[v]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},r}(),Eee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="maxp",r.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},r}(),Cee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="hmtx",r.prototype.parse=function(t){var e,n,i,a,o,s,l;for(t.pos=this.offset,this.metrics=[],e=0,s=this.file.hhea.numberOfMetrics;0<=s?e<s:e>s;e=0<=s?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],e=c=0;0<=i?c<i:c>i;e=0<=i?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,d,v;for(v=[],c=0,u=(d=this.metrics).length;c<u;c++)a=d[c],v.push(a.advance);return v}).call(this),n=this.widths[this.widths.length-1],l=[],e=o=0;0<=i?o<i:o>i;e=0<=i?++o:--o)l.push(this.widths.push(n));return l},r.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},r}(),rL=[].slice,Lee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(t){var e,n,i,a,o,s,l,c,u,d;return t in this.cache?this.cache[t]:(a=this.file.loca,e=this.file.contents,n=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(e.pos=this.offset+n,o=(s=new Ao(e.read(i))).readShort(),c=s.readShort(),d=s.readShort(),l=s.readShort(),u=s.readShort(),this.cache[t]=o===-1?new Oee(s,c,d,l,u):new Aee(s,o,c,d,l,u),this.cache[t]))},r.prototype.encode=function(t,e,n){var i,a,o,s,l;for(o=[],a=[],s=0,l=e.length;s<l;s++)i=t[e[s]],a.push(o.length),i&&(o=o.concat(i.encode(n)));return a.push(o.length),{table:o,offsets:a}},r}(),Aee=function(){function r(t,e,n,i,a,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),Oee=function(){function r(t,e,n,i,a){var o,s;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return r.prototype.encode=function(){var t,e,n;for(e=new Ao(rL.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},r}(),Nee=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return aa(r,Ii),r.prototype.tag="loca",r.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(t.readUInt32());return a}).call(this)},r.prototype.indexOf=function(t){return this.offsets[t]},r.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},r.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<n.length;++o)if(n[o]=i,a<e.length&&e[a]==o){++a,n[o]=i;var s=this.offsets[o],l=this.offsets[o+1]-s;l>0&&(i+=l)}for(var c=new Array(4*n.length),u=0;u<n.length;++u)c[4*u+3]=255&n[u],c[4*u+2]=(65280&n[u])>>8,c[4*u+1]=(16711680&n[u])>>16,c[4*u]=(4278190080&n[u])>>24;return c},r}(),Ree=function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,e,n,i,a;for(e in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)n=a[e],t[e]=i[n];return t},r.prototype.glyphsFor=function(t){var e,n,i,a,o,s,l;for(i={},o=0,s=t.length;o<s;o++)i[a=t[o]]=this.font.glyf.glyphFor(a);for(a in e=[],i)(n=i[a])!=null&&n.compound&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(a in l=this.glyphsFor(e))n=l[a],i[a]=n;return i},r.prototype.encode=function(t,e){var n,i,a,o,s,l,c,u,d,v,p,y,b,S,_;for(i in n=tL.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},_=n.charMap)p[(l=_[i]).old]=l.new;for(y in v=n.maxGlyphID,o)y in p||(p[y]=v++);return u=function(x){var k,T;for(k in T={},x)T[x[k]]=k;return T}(p),d=Object.keys(u).sort(function(x,k){return x-k}),b=function(){var x,k,T;for(T=[],x=0,k=d.length;x<k;x++)s=d[x],T.push(u[s]);return T}(),a=this.font.glyf.encode(o,b,p),c=this.font.loca.encode(a.offsets,b),S={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},r}();et.API.PDFObject=function(){var r;function t(){}return r=function(e,n){return(Array(n+1).join("0")+e).slice(-n)},t.convert=function(e){var n,i,a,o;if(Array.isArray(e))return"["+function(){var s,l,c;for(c=[],s=0,l=e.length;s<l;s++)n=e[s],c.push(t.convert(n));return c}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(i in a=["<<"],e)o=e[i],a.push("/"+i+" "+t.convert(o));return a.push(">>"),a.join(`
`)}return""+e},t}();const jee=({poseData:r})=>{const t=fe.useRef(null);fe.useEffect(()=>{var a;if(console.log("[Canvas] 🎨 Attempting to draw:",{hasCanvas:!!t.current,hasPoseData:!!r,landmarksCount:((a=r==null?void 0:r.landmarks)==null?void 0:a.length)||0,timestamp:r==null?void 0:r.timestamp}),!t.current||!r||!r.landmarks){console.warn("[Canvas] ⚠️ Missing data for drawing:",{canvas:!!t.current,poseData:!!r,landmarks:!!(r!=null&&r.landmarks)});return}const n=t.current,i=n.getContext("2d");if(!i){console.error("[Canvas] ❌ Failed to get 2D context");return}i.clearRect(0,0,n.width,n.height),i.fillStyle="#0b141a",i.fillRect(0,0,n.width,n.height),e(i,r.landmarks,n.width,n.height),console.log("[Canvas] ✅ Successfully drew skeleton with",r.landmarks.length,"landmarks")},[r]);const e=(n,i,a,o)=>{const s=[[11,12],[11,23],[12,24],[23,24],[11,13],[13,15],[12,14],[14,16],[23,25],[25,27],[24,26],[26,28],[0,1],[0,4]];n.strokeStyle="#00ff00",n.lineWidth=3,s.forEach(([l,c])=>{const u=i[l],d=i[c];u&&d&&u.visibility>.5&&d.visibility>.5&&(n.beginPath(),n.moveTo(u.x*a,u.y*o),n.lineTo(d.x*a,d.y*o),n.stroke())}),i.forEach((l,c)=>{if(l.visibility>.5){let u="#ff0000";c===0?u="#ffff00":c>=11&&c<=16?u="#ff00ff":c>=23&&c<=28&&(u="#00ffff"),n.fillStyle=u,n.beginPath(),n.arc(l.x*a,l.y*o,6,0,2*Math.PI),n.fill(),n.strokeStyle="#ffffff",n.lineWidth=2,n.stroke()}}),n.fillStyle="#00ff00",n.font="12px monospace",n.fillText(`FPS: ${(1e3/66.67).toFixed(1)}`,10,20),n.fillText(`Landmarks: ${i.length}`,10,40)};return m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#0b141a] rounded-lg",children:m.jsx("canvas",{ref:t,width:640,height:480,className:"max-w-full max-h-full border border-gray-700 rounded-lg"})})};function Iee(r){if(!r||r.length===0)return"";const t=[];return t.push("=== ANÁLISIS POSTURAL ==="),t.push(`Fecha: ${new Date().toLocaleDateString("es-CO")}`),t.push(`Total de ejercicios evaluados: ${r.length}`),t.push(""),r.forEach((e,n)=>{const a=new Date(e.timestamp).toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"});t.push(`${n+1}. ${e.description.toUpperCase()} (${a})`),e.metrics.posture&&(t.push("   Postura:"),t.push(`   - Ángulo del tronco: ${e.metrics.posture.trunkAngle}°`),t.push(`   - Alineación: ${e.metrics.posture.alignment}`)),e.metrics.joints&&(t.push("   Ángulos articulares:"),t.push(`   - Codo izquierdo: ${e.metrics.joints.leftElbow}°`),t.push(`   - Codo derecho: ${e.metrics.joints.rightElbow}°`),t.push(`   - Rodilla izquierda: ${e.metrics.joints.leftKnee}°`),t.push(`   - Rodilla derecha: ${e.metrics.joints.rightKnee}°`)),e.metrics.symmetry&&(t.push("   Simetría corporal:"),t.push(`   - Hombros: ${e.metrics.symmetry.shoulders} (diferencia: ${e.metrics.symmetry.shoulderDiff}%)`),t.push(`   - Caderas: ${e.metrics.symmetry.hips} (diferencia: ${e.metrics.symmetry.hipDiff}%)`)),t.push("")}),t.push("=== FIN ANÁLISIS POSTURAL ==="),t.join(`
`)}const Mee=({isOpen:r,onClose:t,roomName:e,sessionActive:n,patientConnected:i,latestPoseData:a,hasReceivedFirstFrame:o=!1,onStartSession:s,onEndSession:l,onAppendToObservaciones:c})=>{var T,R,B;const[u,d]=fe.useState([]),[v,p]=fe.useState(""),[y,b]=fe.useState(!1),S=()=>{if(!a){alert("No hay datos de pose disponibles para capturar");return}p(`Ejercicio ${u.length+1}`),b(!0)},_=()=>{if(!a){alert("No hay datos de pose disponibles para capturar");return}const j=document.querySelector("canvas"),F=j?j.toDataURL("image/png"):void 0,M={...a,description:v||`Ejercicio ${u.length+1}`,canvasImage:F};if(c){const q=Iee([M]);c(q),console.log("[Capture] Snapshot data appended to observations field")}d(q=>[...q,M]),console.log("[Capture] Snapshot captured:",M),b(!1),p("")},x=j=>{d(F=>F.filter((M,q)=>q!==j))},k=()=>{if(u.length===0){alert("No hay datos capturados para generar el PDF");return}try{const j=new et,F=j.internal.pageSize.getWidth(),M=j.internal.pageSize.getHeight();j.setFontSize(24),j.setTextColor(0,0,0),j.text("Análisis Postural",F/2,30,{align:"center"}),j.setFontSize(12),j.text(`Sala: ${e}`,20,50),j.text(`Fecha: ${new Date().toLocaleString("es-CO")}`,20,60),j.text(`Snapshots capturados: ${u.length}`,20,70);let q=90;u.forEach((z,I)=>{if(I>0&&j.addPage(),q=20,j.setFontSize(18),j.setTextColor(0,100,200),j.text(`${z.description}`,F/2,q,{align:"center"}),q+=10,j.setFontSize(10),j.setTextColor(100,100,100),j.text(`Capturado: ${new Date(z.timestamp).toLocaleString("es-CO")}`,F/2,q,{align:"center"}),q+=15,z.canvasImage)try{const oe=(F-120)/2;j.addImage(z.canvasImage,"PNG",oe,q,120,90),q+=100}catch(X){console.error("[PDF] Error adding image:",X)}q+=5,z.metrics.posture&&(j.setFontSize(12),j.setTextColor(50,50,50),j.text("Postura:",25,q),q+=7,j.setFontSize(10),j.text(`  Ángulo del Trunco: ${z.metrics.posture.trunkAngle}°`,30,q),q+=6,j.text(`  Alineación: ${z.metrics.posture.alignment}`,30,q),q+=10),z.metrics.joints&&(j.setFontSize(12),j.setTextColor(50,50,50),j.text("Ángulos Articulares:",25,q),q+=7,j.setFontSize(10),j.text(`  Codo Izquierdo: ${z.metrics.joints.leftElbow}°`,30,q),q+=6,j.text(`  Codo Derecho: ${z.metrics.joints.rightElbow}°`,30,q),q+=6,j.text(`  Rodilla Izquierda: ${z.metrics.joints.leftKnee}°`,30,q),q+=6,j.text(`  Rodilla Derecha: ${z.metrics.joints.rightKnee}°`,30,q),q+=10),z.metrics.symmetry&&(j.setFontSize(12),j.setTextColor(50,50,50),j.text("Simetría Corporal:",25,q),q+=7,j.setFontSize(10),j.text(`  Hombros: ${z.metrics.symmetry.shoulders} (${z.metrics.symmetry.shoulderDiff}%)`,30,q),q+=6,j.text(`  Caderas: ${z.metrics.symmetry.hips} (${z.metrics.symmetry.hipDiff}%)`,30,q),q+=15)});const O=j.getNumberOfPages();for(let z=1;z<=O;z++)j.setPage(z),j.setFontSize(8),j.setTextColor(128,128,128),j.text("BSL Consulta Video - Análisis Postural",F/2,M-10,{align:"center"}),j.text(`Página ${z} de ${O}`,F-20,M-10,{align:"right"});const L=`analisis-postural-${e}-${Date.now()}.pdf`;j.save(L),console.log("[PDF] Generated successfully:",L),alert(`PDF generado exitosamente: ${L}`)}catch(j){console.error("[PDF] Error generating PDF:",j),alert("Error al generar el PDF. Ver consola para detalles.")}};return r?m.jsxs("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 pointer-events-auto",children:[m.jsxs("div",{className:"bg-[#1a2730] rounded-lg shadow-2xl w-[90%] max-w-6xl h-[85vh] flex flex-col border border-gray-700",children:[m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-700",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-white",children:"Análisis Postural"}),m.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Sala: ",e]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-green-500 animate-pulse":"bg-gray-500"}`}),m.jsx("span",{className:"text-sm text-gray-300",children:n?"Sesión Activa":"Sesión Inactiva"})]}),n&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-3 h-3 rounded-full ${i?"bg-blue-500 animate-pulse":"bg-yellow-500"}`}),m.jsx("span",{className:"text-sm text-gray-300",children:i?"Paciente Conectado":"Esperando Paciente..."})]}),m.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Cerrar",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),m.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[m.jsx("div",{className:"flex-1 bg-[#0b141a] relative p-4",children:n?i?o?m.jsx(jee,{poseData:a||null}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mb-6",children:m.jsx("div",{className:"w-16 h-16 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"})}),m.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"Cargando Análisis..."}),m.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Esperando datos del paciente"}),m.jsx("p",{className:"text-xs text-gray-600",children:"El paciente está activando su cámara y cargando el modelo de IA"})]})}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mb-6",children:m.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"})}),m.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"Esperando Paciente..."}),m.jsx("p",{className:"text-sm text-gray-500",children:"El paciente debe estar en la videollamada para continuar"})]})}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mb-6",children:m.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),m.jsx("h3",{className:"text-xl text-gray-400 mb-2",children:"Análisis Postural No Iniciado"}),m.jsx("p",{className:"text-sm text-gray-500 mb-6",children:'Haz clic en "Iniciar Análisis" para comenzar'}),m.jsx("button",{onClick:s,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Iniciar Análisis"})]})})}),m.jsxs("div",{className:"w-full lg:w-80 bg-[#15202b] border-t lg:border-t-0 lg:border-l border-gray-700 flex flex-col",children:[m.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Métricas en Tiempo Real"}),n&&i?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-[#1a2730] rounded-lg p-4 border border-gray-700",children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase mb-3",children:"Postura"}),(T=a==null?void 0:a.metrics)!=null&&T.posture?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-sm text-gray-400",children:"Ángulo del Tronco:"}),m.jsxs("span",{className:"text-lg font-semibold text-white",children:[a.metrics.posture.trunkAngle,"°"]})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-400",children:"Alineación:"}),m.jsx("span",{className:`text-sm font-semibold ${a.metrics.posture.alignment==="Buena"?"text-green-400":"text-yellow-400"}`,children:a.metrics.posture.alignment})]})]}):m.jsx("p",{className:"text-sm text-gray-400",children:"Esperando datos..."})]}),m.jsxs("div",{className:"bg-[#1a2730] rounded-lg p-4 border border-gray-700",children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase mb-3",children:"Ángulos Articulares"}),(R=a==null?void 0:a.metrics)!=null&&R.joints?m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Codo Izq:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.leftElbow,"°"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Codo Der:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.rightElbow,"°"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Rodilla Izq:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.leftKnee,"°"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-400",children:"Rodilla Der:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.joints.rightKnee,"°"]})]})]}):m.jsx("p",{className:"text-sm text-gray-400",children:"Esperando datos..."})]}),m.jsxs("div",{className:"bg-[#1a2730] rounded-lg p-4 border border-gray-700",children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase mb-3",children:"Simetría Corporal"}),(B=a==null?void 0:a.metrics)!=null&&B.symmetry?m.jsxs("div",{className:"space-y-2 text-sm",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-gray-400",children:"Hombros:"}),m.jsx("span",{className:`font-semibold ${a.metrics.symmetry.shoulders==="Simétrico"?"text-green-400":"text-yellow-400"}`,children:a.metrics.symmetry.shoulders})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-gray-400",children:"Diferencia:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.symmetry.shoulderDiff,"%"]})]}),m.jsxs("div",{className:"flex justify-between items-center mt-3",children:[m.jsx("span",{className:"text-gray-400",children:"Caderas:"}),m.jsx("span",{className:`font-semibold ${a.metrics.symmetry.hips==="Simétrico"?"text-green-400":"text-yellow-400"}`,children:a.metrics.symmetry.hips})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-gray-400",children:"Diferencia:"}),m.jsxs("span",{className:"text-white font-mono",children:[a.metrics.symmetry.hipDiff,"%"]})]})]}):m.jsx("p",{className:"text-sm text-gray-400",children:"Esperando datos..."})]})]}):m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-sm text-gray-500",children:"Las métricas aparecerán aquí cuando el análisis esté activo"})})]}),u.length>0&&m.jsxs("div",{className:"p-4 border-t border-gray-700 max-h-48 overflow-y-auto",children:[m.jsxs("h4",{className:"text-sm font-semibold text-gray-400 mb-3",children:["Snapshots Capturados (",u.length,")"]}),m.jsx("div",{className:"space-y-2",children:u.map((j,F)=>m.jsxs("div",{className:"flex items-center gap-3 bg-[#1a2730] p-2 rounded-lg border border-gray-700",children:[j.canvasImage&&m.jsx("img",{src:j.canvasImage,alt:j.description,className:"w-16 h-12 object-cover rounded border border-gray-600"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-medium text-white truncate",children:j.description}),m.jsx("p",{className:"text-xs text-gray-500",children:new Date(j.timestamp).toLocaleTimeString("es-CO")})]}),m.jsx("button",{onClick:()=>x(F),className:"p-1 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors",title:"Eliminar",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},F))})]}),m.jsxs("div",{className:"p-4 border-t border-gray-700 space-y-3",children:[n&&i&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:S,disabled:!a,className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Capturar Snapshot (",u.length,")"]}),m.jsxs("button",{onClick:k,disabled:u.length===0,className:"w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Generar PDF"]})]}),n&&m.jsx("button",{onClick:l,className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Finalizar Análisis"})]})]})]}),m.jsx("div",{className:"px-6 py-3 border-t border-gray-700 bg-[#15202b]",children:m.jsx("p",{className:"text-xs text-gray-500 text-center",children:"El análisis postural se realiza en tiempo real mientras la videollamada continúa"})})]}),y&&m.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-black/50",children:m.jsxs("div",{className:"bg-[#1a2730] rounded-lg shadow-2xl p-6 max-w-md w-full mx-4 border border-gray-700",children:[m.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Capturar Snapshot"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nombre del ejercicio o postura:"}),m.jsx("input",{type:"text",value:v,onChange:j=>p(j.target.value),placeholder:"Ej: Brazos levantados, Inclinación lateral...",className:"w-full px-3 py-2 bg-[#0b141a] border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-blue-500",autoFocus:!0,onKeyPress:j=>{j.key==="Enter"&&_()}})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"Cancelar"}),m.jsx("button",{onClick:_,className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"Capturar"})]})]})})]}):null};let lu=null;async function Dee(){return lu?(console.log("[MediaPipe] Returning cached MediaPipe instance"),lu):(console.log("[MediaPipe] Loading MediaPipe from CDN..."),lu=(async()=>{try{const t=await import("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15");return console.log("[MediaPipe] Successfully loaded from CDN"),{PoseLandmarker:t.PoseLandmarker,FilesetResolver:t.FilesetResolver}}catch(r){throw console.error("[MediaPipe] Error loading from CDN:",r),lu=null,new Error("Failed to load MediaPipe Vision tasks")}})(),lu)}async function Fee(){console.log("[MediaPipe] Creating PoseLandmarker...");const{PoseLandmarker:r,FilesetResolver:t}=await Dee(),e=await t.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.15/wasm"),n=await r.createFromOptions(e,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1,minPoseDetectionConfidence:.5,minPosePresenceConfidence:.5,minTrackingConfidence:.5});return console.log("[MediaPipe] PoseLandmarker created successfully"),n}function Bee(r){if(!r||r.length===0)return{posture:null,joints:null,symmetry:null};const t=(y,b,S)=>{const _={x:y.x-b.x,y:y.y-b.y},x={x:S.x-b.x,y:S.y-b.y},k=_.x*x.x+_.y*x.y,T=_.x*x.y-_.y*x.x;return Math.atan2(T,k)*180/Math.PI},e=11,n=12,i=13,a=14,o=15,s=16,l=23,c=24,u=25,d=26,v=27,p=28;try{const y={x:(r[e].x+r[n].x)/2,y:(r[e].y+r[n].y)/2,z:(r[e].z+r[n].z)/2},b={x:(r[l].x+r[c].x)/2,y:(r[l].y+r[c].y)/2,z:(r[l].z+r[c].z)/2},S=Math.abs(Math.atan2(y.y-b.y,y.x-b.x)*(180/Math.PI)),_=Math.abs(t(r[e],r[i],r[o])),x=Math.abs(t(r[n],r[a],r[s])),k=Math.abs(t(r[l],r[u],r[v])),T=Math.abs(t(r[c],r[d],r[p])),R=Math.abs(r[e].y-r[n].y)*100,B=Math.abs(r[l].y-r[c].y)*100;return{posture:{trunkAngle:S.toFixed(1),alignment:S>85&&S<95?"Buena":"Revisar"},joints:{leftElbow:_.toFixed(1),rightElbow:x.toFixed(1),leftKnee:k.toFixed(1),rightKnee:T.toFixed(1)},symmetry:{shoulders:R<5?"Simétrico":"Asimétrico",shoulderDiff:R.toFixed(2),hips:B<5?"Simétrico":"Asimétrico",hipDiff:B.toFixed(2)}}}catch(y){return console.error("[MediaPipe] Error calculating metrics:",y),{posture:null,joints:null,symmetry:null}}}const $ee=({onPoseData:r,isActive:t})=>{const e=fe.useRef(null),n=fe.useRef(null),[i,a]=fe.useState("Inicializando..."),[o,s]=fe.useState(!1),l=fe.useRef(null),c=fe.useRef(null),u=fe.useRef(null);fe.useEffect(()=>{if(!t)return;let y=!0;return(async()=>{try{a("Accediendo a cámara...");const S=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1});if(!y){S.getTracks().forEach(x=>x.stop());return}u.current=S,e.current&&(e.current.srcObject=S,await e.current.play()),a("Cargando modelo de análisis...");const _=await Fee();if(!y){_.close();return}l.current=_,a("Analizando postura..."),s(!0),d()}catch(S){console.error("[Postural Analysis Patient] Initialization error:",S),a("Error: No se pudo acceder a la cámara")}})(),()=>{y=!1,p()}},[t]);const d=()=>{if(!e.current||!n.current||!l.current)return;const y=e.current,b=n.current,S=b.getContext("2d");if(!S)return;b.width=y.videoWidth||640,b.height=y.videoHeight||480;let _=0;const x=1e3/15,k=()=>{const T=performance.now();if(T-_<x){c.current=requestAnimationFrame(k);return}if(_=T,y.readyState>=2)try{const R=l.current.detectForVideo(y,T);if(S.clearRect(0,0,b.width,b.height),S.drawImage(y,0,0,b.width,b.height),R.landmarks&&R.landmarks.length>0){const B=R.landmarks[0];v(S,B,b.width,b.height);const j=Bee(B);r({landmarks:B,metrics:j,timestamp:T})}}catch(R){console.error("[Postural Analysis Patient] Detection error:",R)}c.current=requestAnimationFrame(k)};k()},v=(y,b,S,_)=>{const x=[[11,12],[11,13],[13,15],[12,14],[14,16],[11,23],[12,24],[23,24],[23,25],[25,27],[24,26],[26,28]];y.strokeStyle="#00ff00",y.lineWidth=2,x.forEach(([k,T])=>{const R=b[k],B=b[T];R&&B&&(y.beginPath(),y.moveTo(R.x*S,R.y*_),y.lineTo(B.x*S,B.y*_),y.stroke())}),y.fillStyle="#ff0000",b.forEach(k=>{y.beginPath(),y.arc(k.x*S,k.y*_,4,0,2*Math.PI),y.fill()})},p=()=>{c.current&&cancelAnimationFrame(c.current),u.current&&u.current.getTracks().forEach(y=>y.stop()),l.current&&l.current.close(),s(!1)};return t?m.jsx("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center",children:m.jsxs("div",{className:"bg-[#1a2730] rounded-lg shadow-2xl p-6 max-w-4xl w-full mx-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Análisis Postural del Paciente"}),m.jsx("div",{className:"flex items-center gap-2",children:o?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-sm text-gray-300",children:i})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-sm text-gray-300",children:i})]})})]}),m.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[m.jsx("video",{ref:e,className:"hidden",playsInline:!0,muted:!0,autoPlay:!0}),m.jsx("canvas",{ref:n,className:"w-full h-auto"})]}),m.jsx("div",{className:"mt-4 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:m.jsx("p",{className:"text-sm text-blue-300 text-center",children:"Manténgase de pie frente a la cámara. El doctor está visualizando su postura en tiempo real."})})]})}):null},Uee=({historiaId:r,onAppendToObservaciones:t})=>{const[e,n]=fe.useState(!0),[i,a]=fe.useState(!1),[o,s]=fe.useState(null),[l,c]=fe.useState(null),[u,d]=fe.useState(""),[v,p]=fe.useState(""),[y,b]=fe.useState(""),[S,_]=fe.useState(""),[x,k]=fe.useState(""),[T,R]=fe.useState(""),[B,j]=fe.useState(""),[F,M]=fe.useState(""),[q,O]=fe.useState(""),[L,z]=fe.useState(""),[I,X]=fe.useState(""),[Z,oe]=fe.useState(!1);fe.useEffect(()=>{ue()},[r]),fe.useEffect(()=>{t&&t(G=>{b(ee=>ee?`${ee}

${G}`:G)})},[t]),fe.useEffect(()=>{if(F&&q){const U=parseFloat(F),G=parseFloat(q);if(!isNaN(U)&&!isNaN(G)&&U>0){const ee=U/100,ie=G/(ee*ee);z(ie.toFixed(2))}else z("")}else z("")},[F,q]);const H=()=>{const U=parseFloat(L);return isNaN(U)?"text-gray-400":U>=25?"text-red-500":"text-green-400"},re=()=>{const U=parseFloat(L);return isNaN(U)?"":U<18.5?"Bajo peso":U<25?"Normal":U<30?"Sobrepeso":"Obesidad"},ue=async()=>{try{n(!0),s(null);const U=await Ji.getMedicalHistory(r);c(U),d(U.mdAntecedentes||""),p(U.mdObsParaMiDocYa||""),b(U.mdObservacionesCertificado||""),_(U.mdRecomendacionesMedicasAdicionales||""),k(U.mdConceptoFinal||""),R(U.mdDx1||""),j(U.mdDx2||""),M(U.talla||""),O(U.peso||"")}catch(U){s(U.message||"Error al cargar historia clínica"),console.error("Error loading medical history:",U)}finally{n(!1)}},ne=async()=>{if(l)try{oe(!0),s(null);const U={edad:l.edad,genero:l.genero,estadoCivil:l.estadoCivil,hijos:l.hijos,ejercicio:l.ejercicio,codEmpresa:l.codEmpresa,cargo:l.cargo,tipoExamen:l.tipoExamen,antecedentesFamiliares:l.antecedentesFamiliares,encuestaSalud:l.encuestaSalud,empresa1:l.empresa1},G=await Ji.generateAISuggestions(U);X(G)}catch(U){s(U.message||"Error al generar sugerencias con IA"),console.error("Error generating AI suggestions:",U),alert("Error al generar sugerencias con IA")}finally{oe(!1)}},N=async()=>{if(l)try{a(!0),s(null);const U=I?`${I}

${S}`.trim():S;let G=u;if(L){const ee=`IMC: ${L} (${re()})`;G=u?`${u}

${ee}`:ee}await Ji.updateMedicalHistory({historiaId:l.historiaId,mdAntecedentes:G,mdObsParaMiDocYa:v,mdObservacionesCertificado:y,mdRecomendacionesMedicasAdicionales:U,mdConceptoFinal:x,mdDx1:T,mdDx2:B,talla:F,peso:q,cargo:l.cargo}),alert("Historia clínica guardada exitosamente")}catch(U){s(U.message||"Error al guardar historia clínica"),console.error("Error saving medical history:",U),alert("Error al guardar historia clínica")}finally{a(!1)}};if(e)return m.jsx("div",{className:"bg-[#1f2c34] rounded-xl p-6 text-white",children:m.jsxs("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00a884]"}),m.jsx("span",{className:"ml-3",children:"Cargando historia clínica..."})]})});if(o||!l){const U=o&&o.includes("Error al obtener historia clínica");return m.jsxs("div",{className:"h-full flex flex-col bg-[#1f2c34] text-white p-6",children:[m.jsx("div",{className:"mb-4",children:m.jsx("h2",{className:"text-xl font-bold text-red-400",children:"Error al Cargar Historia Clínica"})}),m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-4 mb-4",children:[m.jsx("p",{className:"text-red-400 mb-3",children:o||"No se encontró historia clínica para este paciente"}),U&&m.jsxs("div",{className:"mt-4 border-l-4 border-yellow-500 pl-4",children:[m.jsx("p",{className:"text-yellow-400 font-semibold mb-2",children:"⚠️ Configuración Pendiente"}),m.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Las funciones HTTP de Wix no están configuradas. Para activar esta funcionalidad:"}),m.jsxs("ol",{className:"text-sm text-gray-300 space-y-1 list-decimal list-inside",children:[m.jsx("li",{children:"Abre tu sitio de Wix (www.bsl.com.co)"}),m.jsx("li",{children:"Activa el Developer Mode (Velo)"}),m.jsx("li",{children:"Ve a Backend → http-functions.js"}),m.jsxs("li",{children:["Copia las funciones de: ",m.jsx("code",{className:"bg-gray-700 px-1 rounded",children:"backend/wix-backend-medical-history.js"})]}),m.jsx("li",{children:"Publica el sitio"})]}),m.jsxs("p",{className:"text-sm text-gray-400 mt-3",children:["ID de Historia: ",m.jsx("span",{className:"text-white font-mono",children:r})]})]})]})]})}return m.jsxs("div",{className:"h-full flex flex-col bg-[#1f2c34] text-white",children:[m.jsx("div",{className:"flex items-center p-4 border-b border-gray-700 bg-[#1f2c34] sticky top-0 z-10",children:m.jsx("h2",{className:"text-lg font-bold text-[#00a884]",children:"Historia Clínica"})}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2 text-[#00a884]",children:"Datos del Paciente"}),m.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Nombre:"}),m.jsxs("span",{className:"text-white ml-2",children:[l.primerNombre," ",l.segundoNombre," ",l.primerApellido," ",l.segundoApellido]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Documento:"}),m.jsx("span",{className:"text-white ml-2",children:l.numeroId})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Edad:"}),m.jsx("span",{className:"text-white ml-2",children:l.edad||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Género:"}),m.jsx("span",{className:"text-white ml-2",children:l.genero||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Celular:"}),m.jsx("span",{className:"text-white ml-2",children:l.celular})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Email:"}),m.jsx("span",{className:"text-white ml-2",children:l.email||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Estado Civil:"}),m.jsx("span",{className:"text-white ml-2",children:l.estadoCivil||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Hijos:"}),m.jsx("span",{className:"text-white ml-2",children:l.hijos||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Ejercicio:"}),m.jsx("span",{className:"text-white ml-2",children:l.ejercicio||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Empresa:"}),m.jsx("span",{className:"text-white ml-2",children:l.codEmpresa||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Cargo:"}),m.jsx("span",{className:"text-white ml-2",children:l.cargo||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Tipo Examen:"}),m.jsx("span",{className:"text-white ml-2",children:l.tipoExamen||"N/A"})]})]})]}),(l.antecedentesFamiliares||l.encuestaSalud||l.empresa1)&&m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2 text-[#00a884]",children:"Antecedentes"}),m.jsxs("div",{className:"space-y-2 text-xs",children:[l.antecedentesFamiliares&&m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Antecedentes Familiares:"}),m.jsx("p",{className:"text-white mt-1 whitespace-pre-wrap",children:l.antecedentesFamiliares})]}),l.encuestaSalud&&m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Encuesta de Salud:"}),m.jsx("p",{className:"text-white mt-1 whitespace-pre-wrap",children:l.encuestaSalud})]}),l.empresa1&&m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Cargo Anterior:"}),m.jsx("p",{className:"text-white mt-1",children:l.empresa1})]})]})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2 text-[#00a884]",children:"Medidas Físicas"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Talla (cm)"}),m.jsx("input",{type:"text",value:F,onChange:U=>M(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",placeholder:"170"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Peso (kg)"}),m.jsx("input",{type:"text",value:q,onChange:U=>O(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",placeholder:"70"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"IMC"}),m.jsx("input",{type:"text",value:L?`${L} (${re()})`:"",readOnly:!0,className:`w-full bg-[#2a3942] ${H()} text-sm px-2 py-2 rounded border border-gray-600 cursor-not-allowed font-semibold`,placeholder:"Auto"})]})]})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-lg p-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-3 text-[#00a884]",children:"Evaluación Médica"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Antecedentes"}),m.jsx("textarea",{value:u,onChange:U=>d(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Antecedentes médicos relevantes..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Obs. Certificado"}),m.jsx("textarea",{value:y,onChange:U=>b(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Observaciones para el certificado..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Recomendaciones Médicas Adicionales"}),m.jsx("textarea",{value:S,onChange:U=>_(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Recomendaciones médicas adicionales..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Observaciones privadas para la empresa"}),m.jsx("textarea",{value:v,onChange:U=>p(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",rows:3,placeholder:"Observaciones privadas para la empresa..."})]}),m.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Diagnóstico 1 (Principal)"}),m.jsxs("select",{value:T,onChange:U=>R(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",children:[m.jsx("option",{value:"",children:"Seleccione diagnóstico"}),m.jsx("option",{value:"Asma ocupacional",children:"Asma ocupacional"}),m.jsx("option",{value:"Bronquitis crónica por polvos inorgánicos",children:"Bronquitis crónica por polvos inorgánicos"}),m.jsx("option",{value:"Bursitis de codo",children:"Bursitis de codo"}),m.jsx("option",{value:"Bursitis de hombro",children:"Bursitis de hombro"}),m.jsx("option",{value:"Bursitis de rodilla",children:"Bursitis de rodilla"}),m.jsx("option",{value:"Cervicalgia",children:"Cervicalgia"}),m.jsx("option",{value:"Dermatitis alérgica de contacto",children:"Dermatitis alérgica de contacto"}),m.jsx("option",{value:"Dermatitis irritativa de contacto",children:"Dermatitis irritativa de contacto"}),m.jsx("option",{value:"Dorsalgia",children:"Dorsalgia"}),m.jsx("option",{value:"Epicondilitis lateral (codo de tenista)",children:"Epicondilitis lateral (codo de tenista)"}),m.jsx("option",{value:"Epicondilitis medial",children:"Epicondilitis medial"}),m.jsx("option",{value:"Escoliosis",children:"Escoliosis"}),m.jsx("option",{value:"Espondiloartrosis cervical",children:"Espondiloartrosis cervical"}),m.jsx("option",{value:"Espondiloartrosis lumbar",children:"Espondiloartrosis lumbar"}),m.jsx("option",{value:"Espondilosis cervical",children:"Espondilosis cervical"}),m.jsx("option",{value:"Espondilosis lumbar",children:"Espondilosis lumbar"}),m.jsx("option",{value:"Estrés postraumático",children:"Estrés postraumático"}),m.jsx("option",{value:"Gonalgia (dolor de rodilla)",children:"Gonalgia (dolor de rodilla)"}),m.jsx("option",{value:"Hernia discal cervical",children:"Hernia discal cervical"}),m.jsx("option",{value:"Hernia discal lumbar",children:"Hernia discal lumbar"}),m.jsx("option",{value:"Hipoacusia neurosensorial bilateral",children:"Hipoacusia neurosensorial bilateral"}),m.jsx("option",{value:"Lumbalgia",children:"Lumbalgia"}),m.jsx("option",{value:"Mialgia",children:"Mialgia"}),m.jsx("option",{value:"Obesidad",children:"Obesidad"}),m.jsx("option",{value:"Onicomicosis",children:"Onicomicosis"}),m.jsx("option",{value:"Pérdida auditiva inducida por ruido",children:"Pérdida auditiva inducida por ruido"}),m.jsx("option",{value:"Presbiacusia",children:"Presbiacusia"}),m.jsx("option",{value:"Síndrome de Burnout",children:"Síndrome de Burnout"}),m.jsx("option",{value:"Síndrome de túnel carpiano",children:"Síndrome de túnel carpiano"}),m.jsx("option",{value:"Síndrome del manguito rotador",children:"Síndrome del manguito rotador"}),m.jsx("option",{value:"Sinovitis de muñeca",children:"Sinovitis de muñeca"}),m.jsx("option",{value:"Sobrepeso",children:"Sobrepeso"}),m.jsx("option",{value:"Tenosinovitis de De Quervain",children:"Tenosinovitis de De Quervain"}),m.jsx("option",{value:"Tendinitis de hombro",children:"Tendinitis de hombro"}),m.jsx("option",{value:"Tendinitis del manguito rotador",children:"Tendinitis del manguito rotador"}),m.jsx("option",{value:"Trastorno adaptativo con ansiedad",children:"Trastorno adaptativo con ansiedad"}),m.jsx("option",{value:"Trastorno de ansiedad generalizada",children:"Trastorno de ansiedad generalizada"}),m.jsx("option",{value:"Trastorno depresivo",children:"Trastorno depresivo"}),m.jsx("option",{value:"Trastornos del sueño",children:"Trastornos del sueño"}),m.jsx("option",{value:"Trauma acústico agudo",children:"Trauma acústico agudo"}),m.jsx("option",{value:"Vértigo posicional",children:"Vértigo posicional"}),m.jsx("option",{value:"Vitiligo",children:"Vitiligo"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Diagnóstico 2 (Secundario)"}),m.jsxs("select",{value:B,onChange:U=>j(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",children:[m.jsx("option",{value:"",children:"Seleccione diagnóstico"}),m.jsx("option",{value:"Asma ocupacional",children:"Asma ocupacional"}),m.jsx("option",{value:"Bronquitis crónica por polvos inorgánicos",children:"Bronquitis crónica por polvos inorgánicos"}),m.jsx("option",{value:"Bursitis de codo",children:"Bursitis de codo"}),m.jsx("option",{value:"Bursitis de hombro",children:"Bursitis de hombro"}),m.jsx("option",{value:"Bursitis de rodilla",children:"Bursitis de rodilla"}),m.jsx("option",{value:"Cervicalgia",children:"Cervicalgia"}),m.jsx("option",{value:"Dermatitis alérgica de contacto",children:"Dermatitis alérgica de contacto"}),m.jsx("option",{value:"Dermatitis irritativa de contacto",children:"Dermatitis irritativa de contacto"}),m.jsx("option",{value:"Dorsalgia",children:"Dorsalgia"}),m.jsx("option",{value:"Epicondilitis lateral (codo de tenista)",children:"Epicondilitis lateral (codo de tenista)"}),m.jsx("option",{value:"Epicondilitis medial",children:"Epicondilitis medial"}),m.jsx("option",{value:"Escoliosis",children:"Escoliosis"}),m.jsx("option",{value:"Espondiloartrosis cervical",children:"Espondiloartrosis cervical"}),m.jsx("option",{value:"Espondiloartrosis lumbar",children:"Espondiloartrosis lumbar"}),m.jsx("option",{value:"Espondilosis cervical",children:"Espondilosis cervical"}),m.jsx("option",{value:"Espondilosis lumbar",children:"Espondilosis lumbar"}),m.jsx("option",{value:"Estrés postraumático",children:"Estrés postraumático"}),m.jsx("option",{value:"Gonalgia (dolor de rodilla)",children:"Gonalgia (dolor de rodilla)"}),m.jsx("option",{value:"Hernia discal cervical",children:"Hernia discal cervical"}),m.jsx("option",{value:"Hernia discal lumbar",children:"Hernia discal lumbar"}),m.jsx("option",{value:"Hipoacusia neurosensorial bilateral",children:"Hipoacusia neurosensorial bilateral"}),m.jsx("option",{value:"Lumbalgia",children:"Lumbalgia"}),m.jsx("option",{value:"Mialgia",children:"Mialgia"}),m.jsx("option",{value:"Obesidad",children:"Obesidad"}),m.jsx("option",{value:"Onicomicosis",children:"Onicomicosis"}),m.jsx("option",{value:"Pérdida auditiva inducida por ruido",children:"Pérdida auditiva inducida por ruido"}),m.jsx("option",{value:"Presbiacusia",children:"Presbiacusia"}),m.jsx("option",{value:"Síndrome de Burnout",children:"Síndrome de Burnout"}),m.jsx("option",{value:"Síndrome de túnel carpiano",children:"Síndrome de túnel carpiano"}),m.jsx("option",{value:"Síndrome del manguito rotador",children:"Síndrome del manguito rotador"}),m.jsx("option",{value:"Sinovitis de muñeca",children:"Sinovitis de muñeca"}),m.jsx("option",{value:"Sobrepeso",children:"Sobrepeso"}),m.jsx("option",{value:"Tenosinovitis de De Quervain",children:"Tenosinovitis de De Quervain"}),m.jsx("option",{value:"Tendinitis de hombro",children:"Tendinitis de hombro"}),m.jsx("option",{value:"Tendinitis del manguito rotador",children:"Tendinitis del manguito rotador"}),m.jsx("option",{value:"Trastorno adaptativo con ansiedad",children:"Trastorno adaptativo con ansiedad"}),m.jsx("option",{value:"Trastorno de ansiedad generalizada",children:"Trastorno de ansiedad generalizada"}),m.jsx("option",{value:"Trastorno depresivo",children:"Trastorno depresivo"}),m.jsx("option",{value:"Trastornos del sueño",children:"Trastornos del sueño"}),m.jsx("option",{value:"Trauma acústico agudo",children:"Trauma acústico agudo"}),m.jsx("option",{value:"Vértigo posicional",children:"Vértigo posicional"}),m.jsx("option",{value:"Vitiligo",children:"Vitiligo"})]})]})]}),m.jsxs("div",{className:"border-2 border-blue-500/30 rounded-lg p-3 bg-blue-900/10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"block text-xs text-blue-400 font-semibold",children:"Sugerencias IA"}),m.jsx("button",{onClick:ne,disabled:Z,className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-1",children:Z?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-3 w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generando..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Generar con IA"]})})]}),m.jsx("textarea",{value:I,onChange:U=>X(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-blue-500/30 focus:border-blue-400 focus:outline-none",rows:5,placeholder:"Haz clic en 'Generar con IA' para obtener recomendaciones médicas personalizadas basadas en los datos del paciente..."}),m.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:"Estas sugerencias se concatenarán automáticamente con las recomendaciones médicas adicionales al guardar"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Concepto Final"}),m.jsxs("select",{value:x,onChange:U=>k(U.target.value),className:"w-full bg-[#1f2c34] text-white text-sm px-2 py-2 rounded border border-gray-600 focus:border-[#00a884] focus:outline-none",children:[m.jsx("option",{value:"",children:"Seleccione una opción"}),m.jsx("option",{value:"ELEGIBLE PARA EL CARGO SIN RECOMENDACIONES LABORALES",children:"ELEGIBLE PARA EL CARGO SIN RECOMENDACIONES LABORALES"}),m.jsx("option",{value:"ELEGIBLE PARA EL CARGO CON RECOMENDACIONES LABORALES",children:"ELEGIBLE PARA EL CARGO CON RECOMENDACIONES LABORALES"}),m.jsx("option",{value:"NO ELEGIBLE PARA EL CARGO POR FUERA DEL PROFESIOGRAMA",children:"NO ELEGIBLE PARA EL CARGO POR FUERA DEL PROFESIOGRAMA"}),m.jsx("option",{value:"PENDIENTE",children:"PENDIENTE"}),m.jsx("option",{value:"NO PRESENTA DETERIORO FÍSICO POR ACTIVIDAD LABORAL",children:"NO PRESENTA DETERIORO FÍSICO POR ACTIVIDAD LABORAL"}),m.jsx("option",{value:"Puede realizar actividades escolares y grupales",children:"Puede realizar actividades escolares y grupales"})]})]})]})]})]}),m.jsx("div",{className:"border-t border-gray-700 p-4 bg-[#1f2c34]",children:m.jsx("button",{onClick:N,disabled:i,className:"w-full bg-[#00a884] text-white px-6 py-3 rounded-lg hover:bg-[#008f6f] transition font-semibold disabled:bg-gray-600 disabled:cursor-not-allowed shadow-lg",children:i?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):"Guardar Historia Clínica"})})]})},k_=({identity:r,roomName:t,role:e,historiaId:n,documento:i,onLeave:a})=>{const[o,s]=fe.useState(!1),[l,c]=fe.useState(null),{localParticipant:u,remoteParticipants:d,isConnecting:v,isConnected:p,error:y,connectToRoom:b,disconnectFromRoom:S,toggleAudio:_,toggleVideo:x,isAudioEnabled:k,isVideoEnabled:T,localVideoTrack:R}=aQ({identity:r,roomName:t,role:e,documento:i}),{currentEffect:B,isProcessing:j,applyBlur:F,applyVirtualBackground:M,removeEffect:q}=GY(),O=UJ({roomName:t,doctorIdentity:r,role:e||"patient",enabled:!0}),{isConnected:L,sessionActive:z,patientConnected:I,latestPoseData:X,hasReceivedFirstFrame:Z,startSession:oe,endSession:H,sendPoseData:re}=O,ue=()=>{S(),a==null||a()},ne=()=>{R&&F(R)},N=ce=>{R&&M(R,ce)},U=()=>{R&&q(R)},G=()=>{if(!L){alert("⚠️ El sistema de análisis postural aún no está conectado. Por favor espere un momento e intente de nuevo."),console.warn("[VideoRoom] Cannot open postural analysis: Socket.io not connected");return}s(!0)},ee=()=>{z&&H(),s(!1)};if(y)return m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsx("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h2",{className:"text-2xl font-semibold text-white mb-3",children:"Error de Conexión"}),m.jsx("p",{className:"text-gray-400 mb-8",children:y}),m.jsx("button",{onClick:b,className:"w-full bg-[#00a884] text-white px-6 py-3 rounded-xl hover:bg-[#008f6f] transition font-semibold",children:"Reintentar"})]})})});if(!p)return m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsx("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-white mb-6",children:"Consulta Video"}),m.jsxs("div",{className:"space-y-3 mb-8",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3 text-left",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Sala"}),m.jsx("p",{className:"text-white font-medium",children:t})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3 text-left",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Usuario"}),m.jsx("p",{className:"text-white font-medium",children:r})]})]}),m.jsx("button",{onClick:b,disabled:v,className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition disabled:bg-gray-600 disabled:cursor-not-allowed font-semibold shadow-lg",children:v?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Conectando..."]}):"Unirse a la Llamada"}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Conexión segura end-to-end"})]})})]})})});const ie=Array.from(d.values());return m.jsxs("div",{className:"min-h-screen bg-[#0b141a] flex",children:[e==="doctor"&&n&&m.jsx("div",{className:"fixed top-0 right-0 h-full bg-[#1f2c34] shadow-2xl z-50",style:{width:"450px",maxWidth:"90vw"},children:m.jsx(Uee,{historiaId:n,onAppendToObservaciones:ce=>c(()=>ce)})}),m.jsxs("div",{className:"flex-1 flex flex-col",children:[m.jsxs("div",{className:"bg-[#1f2c34] px-4 py-3 flex items-center justify-between shadow-lg",children:[m.jsx("button",{onClick:ue,className:"text-white p-2 hover:bg-white/10 rounded-full transition","aria-label":"Volver",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[m.jsx("img",{src:"/logoBlanco.png",alt:"BSL",className:"h-8 w-auto"}),m.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"End-to-end Encrypted"})]})]}),m.jsx("button",{className:"text-white p-2 hover:bg-white/10 rounded-full transition","aria-label":"Información",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),m.jsxs("div",{className:"flex-1 relative overflow-hidden bg-[#0b141a]",children:[ie.length>0?m.jsx("div",{className:`
            ${o?"fixed bottom-20 right-6 w-80 h-60 z-[55] rounded-xl overflow-hidden shadow-2xl border-2 border-green-500":"absolute inset-0 w-full h-full"}
          `,children:m.jsx(bg,{participant:ie[0]})}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#0b141a]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("img",{src:"/logoBlanco.png",alt:"BSL",className:"h-16 w-auto mx-auto mb-4 opacity-50"}),m.jsx("p",{className:"text-gray-500",children:"Esperando participantes..."})]})}),u&&m.jsx("div",{className:`absolute top-3 ${e==="doctor"?"left-3":"right-3"} w-36 h-48 sm:w-40 sm:h-56 md:w-32 md:h-48 rounded-2xl overflow-hidden shadow-2xl border-2 border-white/30 z-10`,children:m.jsx(bg,{participant:u,isLocal:!0})}),ie.length>1&&m.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4 z-10",children:m.jsx("div",{className:"flex gap-2 justify-center overflow-x-auto pb-2",children:ie.slice(1).map(ce=>m.jsx("div",{className:"w-24 h-32 rounded-lg overflow-hidden flex-shrink-0 border-2 border-gray-700",children:m.jsx(bg,{participant:ce})},ce.sid))})})]}),m.jsx(zJ,{isAudioEnabled:k,isVideoEnabled:T,onToggleAudio:_,onToggleVideo:x,onLeave:ue,showBackgroundControls:e==="doctor"&&!!R,onApplyBlur:ne,onApplyVirtualBackground:N,onRemoveEffect:U,isProcessingBackground:j,currentBackgroundEffect:B,showPosturalAnalysis:e==="doctor",onOpenPosturalAnalysis:G}),e==="doctor"&&m.jsx(Mee,{isOpen:o,onClose:ee,roomName:t,sessionActive:z,patientConnected:I,latestPoseData:X,hasReceivedFirstFrame:Z,onStartSession:oe,onEndSession:H,onAppendToObservaciones:l}),e==="patient"&&z&&m.jsx($ee,{onPoseData:re,isActive:z})]})]})},Vee=()=>{const r=Date.now().toString(36),t=Math.random().toString(36).substring(2,7);return`consulta-${r}-${t}`},zee=r=>`${window.location.origin}/patient/${r}`,Wee=async r=>{try{return await navigator.clipboard.writeText(r),!0}catch(t){return console.error("Error al copiar al clipboard:",t),!1}},qee=()=>{const[r,t]=fe.useState(""),[e,n]=fe.useState(""),[i,a]=fe.useState(""),[o,s]=fe.useState(!1),[l,c]=fe.useState(!1),u=()=>{if(!r.trim())return;const y=Vee(),b=zee(y);n(y),a(b)},d=async()=>{await Wee(i)&&(c(!0),setTimeout(()=>c(!1),2e3))},v=()=>{s(!0)},p=()=>{s(!1),n(""),a(""),t("")};return o?m.jsx(k_,{identity:r,roomName:e,role:"doctor",onLeave:p}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Panel del Médico"})]}),i?m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4 border border-gray-600",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Link para el Paciente"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"text",value:i,readOnly:!0,className:"flex-1 bg-[#1f2c34] text-white px-3 py-2 rounded-lg text-sm border border-gray-700"}),m.jsx("button",{onClick:d,className:"bg-[#00a884] text-white px-4 py-2 rounded-lg hover:bg-[#008f6f] transition text-sm font-medium whitespace-nowrap",children:l?"✓ Copiado":"Copiar"})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Comparte este link con tu paciente por WhatsApp, email o mensaje de texto"})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Sala"}),m.jsx("p",{className:"text-white font-medium text-sm",children:e})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Médico"}),m.jsx("p",{className:"text-white font-medium text-sm",children:r})]}),m.jsx("button",{onClick:v,className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg",children:"Iniciar Consulta"}),m.jsx("button",{onClick:()=>{n(""),a("")},className:"w-full bg-transparent text-gray-400 px-6 py-2 rounded-xl hover:text-white transition text-sm",children:"Cancelar"})]}):m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"doctorName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Tu Nombre (Médico)"}),m.jsx("input",{type:"text",id:"doctorName",value:r,onChange:y=>t(y.target.value),placeholder:"Ej: Dr. Juan Pérez",className:"w-full px-4 py-3 bg-[#2a3942] text-white border border-gray-600 rounded-xl focus:ring-2 focus:ring-[#00a884] focus:border-[#00a884] outline-none transition placeholder-gray-500",required:!0})]}),m.jsx("button",{onClick:u,disabled:!r.trim(),className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Crear Sala de Consulta"})]})]})})},Hee=()=>{const{roomName:r}=C4(),[t]=N4(),[e,n]=fe.useState(""),[i,a]=fe.useState(!1),o=t.get("doctor"),s=t.get("documento"),l=t.get("paciente");fe.useEffect(()=>{o&&n(o)},[o]);const c=()=>{e.trim()&&a(!0)},u=()=>{a(!1)};return i&&r?m.jsx(k_,{identity:`Dr. ${e}`,roomName:r,role:"doctor",historiaId:s||void 0,onLeave:u}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Panel del Médico"})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4 mb-6 border border-gray-600 space-y-3",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Sala de Consulta"}),m.jsx("p",{className:"text-white font-medium text-sm break-all",children:r})]}),l&&m.jsxs("div",{className:"pt-3 border-t border-gray-600",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Paciente"}),m.jsx("p",{className:"text-white font-semibold text-base",children:l})]})]}),m.jsxs("div",{className:"space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"doctorName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Código de Médico"}),m.jsx("input",{type:"text",id:"doctorName",value:e,onChange:d=>n(d.target.value),placeholder:"Ingresa tu código",className:"w-full px-4 py-3 bg-[#2a3942] text-white border border-gray-600 rounded-xl focus:ring-2 focus:ring-[#00a884] focus:border-[#00a884] outline-none transition placeholder-gray-500",required:!0})]}),m.jsx("button",{onClick:c,disabled:!e.trim(),className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Unirse a la Consulta"}),m.jsx("div",{className:"bg-[#2a3942] rounded-xl p-4 border border-gray-600",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("svg",{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-300 font-medium mb-1",children:"Información"}),m.jsx("p",{className:"text-xs text-gray-400",children:"Tu paciente se conectará automáticamente a esta sala cuando abra el link que le enviaste por WhatsApp."})]})]})})]}),m.jsx("div",{className:"mt-8 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Conexión segura end-to-end"})]})})]})})},Gee=()=>{const{roomName:r}=C4(),[t]=N4(),[e,n]=fe.useState(""),[i,a]=fe.useState(!1),o=t.get("nombre"),s=t.get("apellido"),l=t.get("doctor"),c=t.get("documento");fe.useEffect(()=>{if(o&&s){const v=`${o} ${s}`;n(v)}},[o,s]);const u=()=>{e.trim()&&a(!0)},d=()=>{a(!1),n("")};return i&&r?m.jsx(k_,{identity:e,roomName:r,role:"patient",documento:c||void 0,onLeave:d}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Consulta Video"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Unirse a la Consulta"})]}),m.jsxs("div",{className:"space-y-5",children:[l&&m.jsx("div",{className:"bg-[#00a884]/10 border border-[#00a884]/30 rounded-xl px-4 py-3",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("svg",{className:"w-4 h-4 text-[#00a884]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-400",children:"Conectándose con"}),m.jsxs("p",{className:"text-white font-medium text-sm",children:["Dr. ",l]})]})]})}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl px-4 py-3",children:[m.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Sala de Consulta"}),m.jsx("p",{className:"text-white font-medium text-sm break-all",children:r})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"patientName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Tu Nombre"}),m.jsx("input",{type:"text",id:"patientName",value:e,onChange:v=>n(v.target.value),placeholder:"Ej: María González",className:"w-full px-4 py-3 bg-[#2a3942] text-white border border-gray-600 rounded-xl focus:ring-2 focus:ring-[#00a884] focus:border-[#00a884] outline-none transition placeholder-gray-500",onKeyDown:v=>{v.key==="Enter"&&u()},autoFocus:!0,required:!0})]}),m.jsx("button",{onClick:u,disabled:!e.trim(),className:"w-full bg-[#00a884] text-white px-6 py-3.5 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Unirse a la Consulta"}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Asegúrate de permitir el acceso a tu cámara y micrófono"})]})})]})]})})},Kee="";class Qee{constructor(){jt(this,"client");this.client=pr.create({baseURL:Kee,headers:{"Content-Type":"application/json"}})}async getDailyStats(t){return(await this.client.get(`/api/medical-panel/stats/${t}`)).data}async getPendingPatients(t,e=0,n=10){return(await this.client.get(`/api/medical-panel/patients/pending/${t}`,{params:{page:e,pageSize:n}})).data}async searchPatientByDocument(t,e){return(await this.client.get(`/api/medical-panel/patients/search/${t}`,{params:e?{medicoCode:e}:{}})).data}async getPatientDetails(t){return(await this.client.get(`/api/medical-panel/patients/details/${t}`)).data}async markAsNoAnswer(t){await this.client.patch(`/api/medical-panel/patients/${t}/no-answer`)}generateWhatsAppLink(t,e){return`https://api.whatsapp.com/send?phone=${this.formatPhoneNumber(t)}&text=${encodeURIComponent(e)}`}formatPhoneNumber(t){let e=t.replace(/[\s\(\)\+\-]/g,"");if(e.startsWith("57")&&e.length>=10)return"+"+e;if(e.length===10&&e.startsWith("3"))return"+57"+e;const n=["1","52","54","55","34","44","49","33"];for(const i of n)if(e.startsWith(i))return"+"+e;return"+57"+e}generateRoomName(){const t=Date.now().toString(36),e=Math.random().toString(36).substring(2,7);return`consulta-${t}-${e}`}}const ka=new Qee,rS=()=>{try{const r=new(window.AudioContext||window.webkitAudioContext),t=r.createOscillator(),e=r.createGain();t.connect(e),e.connect(r.destination),t.frequency.value=800,t.type="sine",e.gain.setValueAtTime(0,r.currentTime),e.gain.linearRampToValueAtTime(.3,r.currentTime+.01),e.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),t.start(r.currentTime),t.stop(r.currentTime+.5),console.log("🔔 Notification sound played")}catch(r){console.error("Error playing notification sound:",r)}},Yee=r=>{try{if("speechSynthesis"in window){window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(r);t.lang="es-ES",t.rate=1,t.pitch=1,t.volume=1,rS(),setTimeout(()=>{window.speechSynthesis.speak(t),console.log("🔊 Speaking:",r)},600)}else console.warn("speechSynthesis no está disponible en este navegador"),rS()}catch(t){console.error("Error in speakText:",t)}};function Jee(){const[r,t]=fe.useState(""),[e,n]=fe.useState(!1),[i,a]=fe.useState(!1),[o,s]=fe.useState(null),[l,c]=fe.useState([]),[u,d]=fe.useState(0),[v,p]=fe.useState(0),[y,b]=fe.useState({}),[S,_]=fe.useState(""),[x,k]=fe.useState(null),[T,R]=fe.useState(!1),[B,j]=fe.useState(null),[F,M]=fe.useState(null),[q,O]=fe.useState(null),[L,z]=fe.useState(null),[I,X]=fe.useState(null),[Z,oe]=fe.useState(new Set),[H,re]=fe.useState({}),[ue,ne]=fe.useState(new Set),N=10,U=async()=>{if(!r){M("Por favor ingrese el código de médico");return}a(!0),M(null);try{const we=await ka.getDailyStats(r);s(we);const Oe=await ka.getPendingPatients(r,u,N);c(Oe.patients),p(Oe.totalPages),n(!0)}catch(we){console.error("Error cargando datos:",we),M("Error al cargar los datos. Verifique el código de médico.")}finally{a(!1)}},G=async we=>{we.preventDefault(),await U()},ee=async()=>{await U()},ie=async we=>{we<0||we>=v||d(we)};fe.useEffect(()=>{e&&r&&U()},[u]),fe.useEffect(()=>{if(!e)return;const we=window.location.origin;console.log("[MedicalPanel] Connecting to Socket.io at:",we);const Oe=Cu(we,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});return Oe.on("connect",()=>{console.log("[MedicalPanel] Socket.io connected")}),Oe.on("disconnect",()=>{console.log("[MedicalPanel] Socket.io disconnected")}),Oe.on("patient-connected",Me=>{console.log("[MedicalPanel] Patient connected:",Me),oe(De=>{const Ne=new Set(De);return Ne.add(Me.documento),Ne});const Pe=Me.identity||"Paciente";Yee(`${Pe} conectado`)}),Oe.on("patient-disconnected",Me=>{console.log("[MedicalPanel] Patient disconnected:",Me),oe(Pe=>{const De=new Set(Pe);return De.delete(Me.documento),De})}),()=>{console.log("[MedicalPanel] Disconnecting Socket.io"),Oe.disconnect()}},[e]);const ce=async we=>{try{await ka.markAsNoAnswer(we),b({...y,[we]:!0}),await U()}catch(Oe){console.error("Error marcando como no contesta:",Oe)}},ge=we=>{let Oe=we.replace(/[\s\(\)\-]/g,"");return Oe.startsWith("+")?Oe:/^(1|52|57|54|55|34|44|49|33)\d{10,}/.test(Oe)?`+${Oe}`:/^3\d{9}$/.test(Oe)?`+57${Oe}`:(console.warn(`⚠️ Número telefónico con formato desconocido: ${Oe}`),Oe)},ve=async we=>{z(we._id);try{const Oe=ka.generateRoomName();re(yt=>({...yt,[we._id]:Oe}));const Me=`${window.location.origin}/patient/${Oe}`,Pe=new URLSearchParams({nombre:we.primerNombre,apellido:we.primerApellido,documento:we._id,doctor:r}),De=`${Me}?${Pe.toString()}`,Ne=`Hola ${we.primerNombre}. Te escribimos de BSL. Tienes una cita médica programada conmigo

Conéctate al link:

${De}`,ct=ge(we.celular),Ge=ct.substring(1);await Ji.sendWhatsApp(Ge,Ne),console.log("WhatsApp enviado exitosamente");try{console.log(`📞 Iniciando llamada a: ${ct}`),await Ji.makeVoiceCall(ct,we.primerNombre),console.log("✅ Llamada telefónica iniciada exitosamente")}catch(yt){console.error("❌ Error realizando llamada telefónica:",yt)}ne(yt=>{const ot=new Set(yt);return ot.add(we._id),ot}),alert(`✅ Mensaje de WhatsApp enviado y llamada iniciada a ${we.primerNombre}`)}catch(Oe){console.error("Error al contactar paciente:",Oe),alert("Error al contactar paciente. Inténtalo nuevamente.")}finally{z(null)}},be=async we=>{X(we._id);try{const Oe=ge(we.celular);console.log(`📞 Rellamando a: ${Oe}`),await Ji.makeVoiceCall(Oe,we.primerNombre),console.log("✅ Rellamada iniciada exitosamente"),alert(`✅ Llamada iniciada a ${we.primerNombre}`)}catch(Oe){console.error("❌ Error al rellamar paciente:",Oe),alert("Error al realizar la llamada. Inténtalo nuevamente.")}finally{X(null)}},Ce=async we=>{O(we._id);try{let Oe=H[we._id];Oe||(Oe=ka.generateRoomName(),re(Pe=>({...Pe,[we._id]:Oe})));const Me=`${window.location.origin}/doctor/${Oe}?doctor=${r}&documento=${we._id}&paciente=${encodeURIComponent(we.nombres)}`;window.open(Me,"_blank")}catch(Oe){console.error("Error al atender paciente:",Oe),alert("Error al abrir sala de consulta. Inténtalo nuevamente.")}finally{O(null)}},Ie=we=>{b({...y,[we]:!y[we]})},je=async we=>{if(we.preventDefault(),!S.trim()){j("Por favor ingrese un documento o celular");return}R(!0),j(null),k(null);try{const Oe=await ka.searchPatientByDocument(S.trim());Oe?k(Oe):j("No se encontró paciente con ese documento o celular")}catch(Oe){console.error("Error buscando paciente:",Oe),j("Error al buscar paciente")}finally{R(!1)}},ye=()=>{_(""),k(null),j(null)},J=(we,Oe=!1)=>{if(!Oe)return`Hola ${we.primerNombre}. Te escribimos de BSL. Tienes una cita médica programada conmigo`;const Me=ka.generateRoomName(),Pe=`${window.location.origin}/patient/${Me}?nombre=${we.primerNombre}&apellido=${we.primerApellido}`;return`Hola ${we.primerNombre}. Te escribimos de BSL. Tienes una cita médica programada conmigo

Conéctate al link:

${Pe}`};return e?m.jsx("div",{className:"min-h-screen bg-[#0b141a] p-4",children:m.jsxs("div",{className:"max-w-7xl mx-auto",children:[m.jsxs("div",{className:"bg-[#1f2c34] rounded-2xl shadow-xl p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-12 w-auto"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-white",children:"Panel Médico"}),m.jsxs("p",{className:"text-gray-400 text-sm",children:["Código: ",r]})]})]}),m.jsx("button",{onClick:ee,disabled:i,className:"bg-[#00a884] text-white px-4 py-2 rounded-xl hover:bg-[#008f6f] transition font-semibold disabled:opacity-50",children:i?"⟳":"↻ Actualizar"})]}),o&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4",children:[m.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Programados Hoy"}),m.jsx("div",{className:"text-3xl font-bold text-white",children:o.programadosHoy})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4",children:[m.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Atendidos Hoy"}),m.jsx("div",{className:"text-3xl font-bold text-[#00a884]",children:o.atendidosHoy})]}),m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4",children:[m.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Restantes Hoy"}),m.jsx("div",{className:"text-3xl font-bold text-yellow-500",children:o.restantesHoy})]})]})]}),m.jsxs("div",{className:"bg-[#1f2c34] rounded-2xl shadow-xl p-6 mb-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Buscar Paciente"}),m.jsxs("form",{onSubmit:je,className:"space-y-4",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",placeholder:"Buscar por documento o celular...",value:S,onChange:we=>_(we.target.value),className:"flex-1 px-4 py-3 bg-[#2a3942] border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-[#00a884] transition"}),m.jsx("button",{type:"submit",disabled:T||!S.trim(),className:"bg-[#00a884] text-white px-6 py-3 rounded-xl hover:bg-[#008f6f] transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:T?"🔍":"🔎 Buscar"}),(x||B)&&m.jsx("button",{type:"button",onClick:ye,className:"bg-gray-600 text-white px-4 py-3 rounded-xl hover:bg-gray-700 transition font-semibold",children:"✕ Limpiar"})]}),B&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-3 text-red-400 text-sm",children:B}),x&&m.jsxs("div",{className:"bg-[#2a3942] rounded-xl p-4 mt-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:"✅ Paciente encontrado"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{className:"col-span-2 flex items-center gap-3 mb-2",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Nombre:"}),m.jsxs("span",{className:"text-white ml-2 font-semibold",children:[x.nombres,x.tipoExamen&&m.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-400",children:["(",x.tipoExamen,")"]})]})]}),Z.has(x._id)&&m.jsxs("div",{className:"flex items-center gap-2 bg-green-500/20 px-3 py-1 rounded-full border border-green-500/50",children:[m.jsxs("div",{className:"relative flex items-center justify-center w-2 h-2",children:[m.jsx("div",{className:"absolute w-2 h-2 bg-green-500 rounded-full animate-ping"}),m.jsx("div",{className:"relative w-2 h-2 bg-green-500 rounded-full"})]}),m.jsx("span",{className:"text-green-400 text-xs font-medium uppercase tracking-wide",children:"Conectado"})]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Doc:"}),m.jsx("span",{className:"text-white ml-2",children:x.numeroId})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:"Celular:"}),m.jsx("span",{className:"text-white ml-2",children:x.celular||"NO REGISTRA"}),x.celular&&m.jsx("a",{href:ka.generateWhatsAppLink(x.celular,J(x,!1)),target:"_blank",rel:"noopener noreferrer",className:"text-[#25D366] hover:text-[#1da851] transition",title:"Enviar WhatsApp",children:m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Empresa:"}),m.jsx("span",{className:"text-white ml-2",children:x.empresaListado==="SANITHELP-JJ"?"PARTICULAR":x.empresaListado})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Fecha atención:"}),m.jsx("span",{className:"text-white ml-2",children:new Date(x.fechaAtencion).toLocaleString()})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Estado:"}),m.jsx("span",{className:"text-white ml-2",children:x.estado})]})]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>ve(x),disabled:L===x._id||ue.has(x._id),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:L===x._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Contactando..."]}):ue.has(x._id)?m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Contactado"]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M20 10.999h2C22 5.869 18.127 2 12.99 2v2C17.052 4 20 6.943 20 10.999z"}),m.jsx("path",{d:"M13 8c2.103 0 3 .897 3 3h2c0-3.225-1.775-5-5-5v2zm3.422 5.443a1.001 1.001 0 0 0-1.391.043l-2.393 2.461c-.576-.11-1.734-.471-2.926-1.66-1.192-1.193-1.553-2.354-1.66-2.926l2.459-2.394a1 1 0 0 0 .043-1.391L6.859 3.513a1 1 0 0 0-1.391-.087l-2.17 1.861a1 1 0 0 0-.29.649c-.015.25-.301 6.172 4.291 10.766C11.305 20.707 16.323 21 17.705 21c.202 0 .326-.006.359-.008a.992.992 0 0 0 .648-.291l1.86-2.171a.997.997 0 0 0-.086-1.391l-4.064-3.696z"})]}),"Contactar"]})}),m.jsx("button",{onClick:()=>be(x),disabled:I===x._id,className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:I===x._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Llamando..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"})}),"Rellamar"]})})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>Ce(x),disabled:q===x._id,className:"bg-[#00a884] text-white px-4 py-2 rounded-lg hover:bg-[#008f6f] transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:q===x._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Abriendo sala..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}),"Atender"]})}),m.jsx("button",{onClick:()=>ce(x._id),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm font-medium flex items-center gap-2",children:"No Contesta"})]})]})]})]})]})]}),m.jsxs("div",{className:"bg-[#1f2c34] rounded-2xl shadow-xl p-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Pacientes Pendientes"}),i?m.jsx("div",{className:"text-center py-8 text-gray-400",children:"Cargando pacientes..."}):l.length===0?m.jsx("div",{className:"text-center py-8 text-gray-400",children:"No hay pacientes pendientes"}):m.jsx("div",{className:"space-y-4",children:l.map(we=>m.jsx("div",{className:`bg-[#2a3942] rounded-xl overflow-hidden transition-all ${y[we._id]?"opacity-50":""}`,children:m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsxs("h3",{className:"text-lg font-semibold text-white",children:[we.nombres,we.tipoExamen&&m.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-400",children:["(",we.tipoExamen,")"]})]}),Z.has(we._id)&&m.jsxs("div",{className:"flex items-center gap-2 bg-green-500/20 px-3 py-1 rounded-full border border-green-500/50",children:[m.jsxs("div",{className:"relative flex items-center justify-center w-2 h-2",children:[m.jsx("div",{className:"absolute w-2 h-2 bg-green-500 rounded-full animate-ping"}),m.jsx("div",{className:"relative w-2 h-2 bg-green-500 rounded-full"})]}),m.jsx("span",{className:"text-green-400 text-xs font-medium uppercase tracking-wide",children:"Conectado"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Doc:"}),m.jsx("span",{className:"text-white ml-2",children:we.numeroId})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:"Celular:"}),m.jsx("span",{className:"text-white ml-2",children:we.celular||"NO REGISTRA"}),we.celular&&m.jsx("a",{href:ka.generateWhatsAppLink(we.celular,J(we,!1)),target:"_blank",rel:"noopener noreferrer",className:"text-[#25D366] hover:text-[#1da851] transition",title:"Enviar WhatsApp",children:m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Empresa:"}),m.jsx("span",{className:"text-white ml-2",children:we.empresaListado==="SANITHELP-JJ"?"PARTICULAR":we.empresaListado})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Fecha:"}),m.jsx("span",{className:"text-white ml-2",children:new Date(we.fechaAtencion).toLocaleString()})]})]})]}),m.jsx("button",{onClick:()=>Ie(we._id),className:"text-gray-400 hover:text-white ml-4",children:y[we._id]?"▼":"▲"})]}),!y[we._id]&&m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>ve(we),disabled:L===we._id||ue.has(we._id),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:L===we._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Contactando..."]}):ue.has(we._id)?m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),"Contactado"]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M20 10.999h2C22 5.869 18.127 2 12.99 2v2C17.052 4 20 6.943 20 10.999z"}),m.jsx("path",{d:"M13 8c2.103 0 3 .897 3 3h2c0-3.225-1.775-5-5-5v2zm3.422 5.443a1.001 1.001 0 0 0-1.391.043l-2.393 2.461c-.576-.11-1.734-.471-2.926-1.66-1.192-1.193-1.553-2.354-1.66-2.926l2.459-2.394a1 1 0 0 0 .043-1.391L6.859 3.513a1 1 0 0 0-1.391-.087l-2.17 1.861a1 1 0 0 0-.29.649c-.015.25-.301 6.172 4.291 10.766C11.305 20.707 16.323 21 17.705 21c.202 0 .326-.006.359-.008a.992.992 0 0 0 .648-.291l1.86-2.171a.997.997 0 0 0-.086-1.391l-4.064-3.696z"})]}),"Contactar"]})}),m.jsx("button",{onClick:()=>be(we),disabled:I===we._id,className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:I===we._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Llamando..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"})}),"Rellamar"]})})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>Ce(we),disabled:q===we._id,className:"bg-[#00a884] text-white px-4 py-2 rounded-lg hover:bg-[#008f6f] transition text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:q===we._id?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Abriendo sala..."]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})}),"Atender"]})}),m.jsx("button",{onClick:()=>ce(we._id),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition text-sm font-medium flex items-center gap-2",children:"No Contesta"})]})]})]})},we._id))}),v>1&&m.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:()=>ie(u-1),disabled:u===0,className:"px-4 py-2 bg-[#2a3942] text-white rounded-lg hover:bg-[#3a4952] transition disabled:opacity-30 disabled:cursor-not-allowed",children:"← Anterior"}),m.jsxs("span",{className:"text-gray-400",children:["Página ",u+1," de ",v]}),m.jsx("button",{onClick:()=>ie(u+1),disabled:u>=v-1,className:"px-4 py-2 bg-[#2a3942] text-white rounded-lg hover:bg-[#3a4952] transition disabled:opacity-30 disabled:cursor-not-allowed",children:"Siguiente →"})]})]})]})}):m.jsx("div",{className:"min-h-screen bg-[#0b141a] flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-[#1f2c34] rounded-3xl shadow-2xl p-8 sm:p-10 max-w-md w-full",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("img",{src:"/logoBlanco.png",alt:"BSL Logo",className:"h-20 w-auto"})}),m.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-white mb-2",children:"Panel Médico"}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Gestión de consultas y pacientes"})]}),m.jsxs("form",{onSubmit:G,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"codEmpresa",className:"block text-sm font-medium text-gray-300 mb-2",children:"Código de Médico"}),m.jsx("input",{type:"text",id:"codEmpresa",value:r,onChange:we=>t(we.target.value),className:"w-full px-4 py-3 bg-[#2a3942] border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-[#00a884] transition",placeholder:"Ingrese su código",required:!0})]}),F&&m.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-3 text-red-400 text-sm",children:F}),m.jsx("button",{type:"submit",disabled:i,className:"w-full bg-[#00a884] text-white px-6 py-3 rounded-xl hover:bg-[#008f6f] transition font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Cargando...":"Entrar"})]}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:m.jsxs("a",{href:"https://api.whatsapp.com/send?phone=573008021701&text=Hola",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-sm text-gray-400 hover:text-[#00a884] transition",children:[m.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Soporte técnico"]})})]})})}function Xee(){return m.jsx(fN,{children:m.jsxs(sN,{children:[m.jsx(fc,{path:"/",element:m.jsx(aN,{to:"/panel-medico",replace:!0})}),m.jsx(fc,{path:"/doctor",element:m.jsx(qee,{})}),m.jsx(fc,{path:"/doctor/:roomName",element:m.jsx(Hee,{})}),m.jsx(fc,{path:"/patient/:roomName",element:m.jsx(Gee,{})}),m.jsx(fc,{path:"/panel-medico",element:m.jsx(Jee,{})})]})})}Wg.createRoot(document.getElementById("root")).render(m.jsx(pS.StrictMode,{children:m.jsx(Xee,{})}));export{$t as _,A as c,nS as g};
